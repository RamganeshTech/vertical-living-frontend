import{d as D,k as v,r as i,j as l,O as x,aA as T,aB as V}from"./index-BAM0eJUz.js";import{M as Y,S as y}from"./MobileSidebar-DliuvRdX.js";import"./currentActiveStageApi-CYcZaWni.js";import"./notificationApi-DYIWgdjl.js";import"./useInfiniteQuery-BGz0VllC.js";import"./issueDiscussionApi-CgOxgxFZ.js";const G={INVENTORY:"inventory",WORKERS:"inviteworker",INVITECLIENT:"inviteclient",PREREQUISTIES:"prerequisites",REQUIREMENTFORM:"clientrequirement",SITEMEASUREMENT:"sitemeasurement",SAMPLEDESIGN:"sampledesign",WORKSCHEDULE:"workschedule",TECHNICALCONSULTANT:"technicalconsultant",PAYMENTCONFIRMATION:"paymentconfirmation",MODULARUNIT:"modularunit",ORDERMATERIALS:"ordermaterial",MATERIALARRIVED:"materialarrival",INSTALLATION:"installation",QUALITYCHECK:"qualitycheck",CLEANINGSANITATION:"cleaning",PROJECTDELIVERY:"projectdelivery"},J=({projectId:e,setProjectId:A,organizationId:t,setOrganizationId:I})=>{const S=D(),{role:r,permission:R}=v(),b=(r==null?void 0:r.toLowerCase())||"",[O,N]=i.useState(!1),[o,f]=i.useState(window.innerWidth<470),[L,m]=i.useState("Vertical Living");i.useLayoutEffect(()=>{const s=S.pathname.split("/");A(s[3]),I(s[1])},[S.pathname]),i.useEffect(()=>{const s=()=>{f(window.innerWidth<470)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const u={INVENTORY:e?`/${t}/projectdetails/${e}/inventory`:"",WORKERS:e?`/${t}/projectdetails/${e}/workers`:"",INVITECLIENT:e?`/${t}/projectdetails/${e}/inviteclient`:"",PREREQUISTIES:e?`/${t}/projectdetails/${e}/prerequisites`:"",REQUIREMENTFORM:e?`/${t}/projectdetails/${e}/requirementform`:"",SITEMEASUREMENT:e?`/${t}/projectdetails/${e}/sitemeasurement`:"",SAMPLEDESIGN:e?`/${t}/projectdetails/${e}/sampledesign`:"",WORKSCHEDULE:e?`/${t}/projectdetails/${e}/workmainschedule`:"",TECHNICALCONSULTANT:e?`/${t}/projectdetails/${e}/technicalconsultant`:"",PAYMENTCONFIRMATION:e?`/${t}/projectdetails/${e}/paymentconfirmation`:"",MODULARUNIT:e?`/${t}/projectdetails/${e}/modularunitsnew`:"",ORDERMATERIALS:e?`/${t}/projectdetails/${e}/ordermaterial`:"",MATERIALARRIVED:e?`/${t}/projectdetails/${e}/materialarrival`:"",INSTALLATION:e?`/${t}/projectdetails/${e}/installation`:"",QUALITYCHECK:e?`/${t}/projectdetails/${e}/qualitycheck`:"",CLEANINGSANITATION:e?`/${t}/projectdetails/${e}/cleaning`:"",PROJECTDELIVERY:e?`/${t}/projectdetails/${e}/projectdelivery`:""},p=Object.keys(T);let C=[];C=p;let E={},c={},a={};C.forEach(s=>{T[s]&&u[s]&&(E[s]=T[s],c[s]=V[s],a[s]=u[s])}),b!=="owner"&&Object.keys(E).forEach(s=>{const n=G[s];if(n){const h=R==null?void 0:R[n];h&&Object.values(h).some(w=>w===!0)||(delete E[s],delete c[s],delete a[s])}});const M={id:"CORE_OPS",label:"Core Operations",isOpenByDefault:!0,keys:["WORKERS","INVITECLIENT","PREREQUISTIES","REQUIREMENTFORM","SITEMEASUREMENT","SAMPLEDESIGN","WORKSCHEDULE","TECHNICALCONSULTANT","PAYMENTCONFIRMATION","ORDERMATERIALS","MATERIALARRIVED","INSTALLATION","QUALITYCHECK","CLEANINGSANITATION","PROJECTDELIVERY"]},$=M.keys,P=Object.entries(E).filter(([s])=>!$.includes(s)).map(([s,n])=>({type:"item",key:s,label:n})),U=[...$.some(s=>E[s])?[{type:"group",...M}]:[],...P];return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex w-screen h-screen",children:[o?l.jsx(Y,{labels:E,path:a,isOpen:O,onClose:()=>N(!1)}):l.jsx(y,{path:a,labels:E,icons:c,setProjectName:m,projectName:L,menuStructure:U}),l.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:l.jsx(x,{context:{projectId:e,setProjectId:A,isMobile:o,isMobileSidebarOpen:O,openMobileSidebar:()=>N(!0),closeMobileSidebar:()=>N(!1),setProjectName:m,projectName:L}})})]})})};export{J as default};
