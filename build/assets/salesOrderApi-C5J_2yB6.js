import{g as w,q as m}from"./index-BYTWf4fI.js";import{g}from"./roleCheck-DhBlwT6t.js";import{u as h}from"./useQuery-DFVFWtWl.js";import{u as y}from"./useMutation-sTZCeqmg.js";import{u as P}from"./useInfiniteQuery-BdEWgiGc.js";const S=async({organizationId:a,customerId:r,page:e,limit:t,fromSalesOrderDate:i,toSalesOrderDate:l,createdFromDate:c,createdToDate:d,search:u,api:f,sortBy:p,sortOrder:s})=>{const n=new URLSearchParams;a&&n.append("organizationId",a),r&&n.append("customerId",r),e&&n.append("page",e.toString()),t&&n.append("limit",t.toString()),i&&n.append("fromSalesOrderDate",i),l&&n.append("toSalesOrderDate",l),c&&n.append("createdFromDate",c),d&&n.append("createdToDate",d),u&&n.append("search",u),s&&n.append("sortOrder",s),p&&n.append("sortBy",p);const{data:o}=await f.get(`/department/accounting/salesorder/getallorder?${n.toString()}`);if(!o.ok)throw new Error(o.message);return o},E=async({salesData:a,api:r})=>{const{data:e}=await r.post("/department/accounting/salesorder/createorder",a);if(!e.ok)throw new Error(e.message);return e.data},A=async({salesId:a,api:r})=>{const{data:e}=await r.delete(`/department/accounting/salesorder/deleteorder/${a}`);if(!e.ok)throw new Error(e.message);return e.data},O=async({salesId:a,api:r})=>{const{data:e}=await r.get(`/department/accounting/salesorder/getsingleorder/${a}`);if(!e.ok)throw new Error(e.message);return e.data},N=({organizationId:a,customerId:r,limit:e=10,search:t,fromSalesOrderDate:i,toSalesOrderDate:l,createdFromDate:c,createdToDate:d,sortBy:u,sortOrder:f})=>{const p=["owner","staff","CTO"],{role:s}=w(),n=g(s);return P({queryKey:["salesorder",a,r,e,t,u,f,i,l,c,d],queryFn:async({pageParam:o=1})=>{if(!s||!p.includes(s))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await S({organizationId:a,customerId:r,page:o,limit:e,fromSalesOrderDate:i,toSalesOrderDate:l,createdFromDate:c,createdToDate:d,search:t,api:n,sortBy:u,sortOrder:f})},getNextPageParam:o=>{if(o.pagination.page<o.pagination.totalPages)return o.pagination.page+1},getPreviousPageParam:o=>{if(o.pagination.page>1)return o.pagination.page-1},initialPageParam:1,enabled:!!s&&p.includes(s)&&!!a})},F=()=>{const a=["owner","staff","CTO"],{role:r}=w(),e=g(r);return y({mutationFn:async({salesData:t})=>{if(!r||!a.includes(r))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await E({salesData:t,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["salesorder"]})}})},I=()=>{const a=["owner","staff","CTO"],{role:r}=w(),e=g(r);return y({mutationFn:async({salesId:t})=>{if(!r||!a.includes(r))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({salesId:t,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["salesorder"]})}})},K=a=>{const r=["owner","staff","CTO"],{role:e}=w(),t=g(e);return h({queryKey:["salesordersingle",a],queryFn:async()=>{if(!e||!r.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await O({salesId:a,api:t})},enabled:!!a&&!!e&&r.includes(e)})};export{I as a,K as b,F as c,N as u};
