import{c as n,h as c,e as u,q as i,d as l,g as a}from"./index-MXS_gbde.js";const w=async(t,o)=>{const{data:e}=await o.post("/toolmaster/create",t);if(!e.ok)throw new Error(e.message);return e.data},d=async({id:t,updateData:o,api:e})=>{const{data:r}=await e.patch(`/toolmaster/updatecontent/${t}`,o);if(!r.ok)throw new Error(r.message);return r.data},f=async({id:t,formData:o,api:e})=>{const{data:r}=await e.patch(`/toolmaster/updateimages/${t}`,o);if(!r.ok)throw new Error(r.message);return r.data},y=async({params:t,api:o})=>{const{data:e}=await o.get("/toolmaster/getall",{params:t});if(!e.ok)throw new Error(e.message);return e},m=async(t,o)=>{const{data:e}=await o.get(`/toolmaster/get/${t}`);if(!e.ok)throw new Error(e.message);return e.data},h=async(t,o)=>{const{data:e}=await o.delete(`/toolmaster/delete/${t}`);if(!e.ok)throw new Error(e.message);return e},s=["owner","staff","CTO"],g=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async e=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await w(e,o)},onSuccess:()=>{i.invalidateQueries({queryKey:["toolmaster"]})}})},E=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async({id:e,updateData:r})=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await d({id:e,updateData:r,api:o})},onSuccess:(e,{id:r})=>{i.invalidateQueries({queryKey:["toolmaster"]}),i.invalidateQueries({queryKey:["toolmaster",r]})}})},A=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async({id:e,formData:r})=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await f({id:e,formData:r,api:o})},onSuccess:(e,{id:r})=>{i.invalidateQueries({queryKey:["toolmaster",r]})}})},T=t=>{const{role:o}=n(),e=a(o);return c({queryKey:["toolmaster","all",t],queryFn:async({pageParam:r=1})=>{if(!o||!s.includes(o))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await y({params:{...t,page:r,limit:10},api:e})},getNextPageParam:r=>{if(r.currentPage<r.totalPages)return r.currentPage+1},initialPageParam:1,enabled:!!o&&!!e})},I=t=>{const{role:o}=n(),e=a(o);return l({queryKey:["toolmaster",t],queryFn:async()=>{if(!o||!s.includes(o))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await m(t,e)},enabled:!!t&&!!o&&!!e})},q=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async e=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await h(e,o)},onSuccess:()=>{i.invalidateQueries({queryKey:["toolmaster"]})}})};export{q as a,I as b,E as c,A as d,g as e,T as u};
