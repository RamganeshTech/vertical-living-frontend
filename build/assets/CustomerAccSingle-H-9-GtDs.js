import{u as b,a as f,j as t,M as w,B as m,t as c}from"./index-MXS_gbde.js";import{c as C,d as j,e as v}from"./customerAccountApi-DQkKFofY.js";import{C as y}from"./CustomerAccountForm-CApHir_4.js";import"./Card-L4jLwmC3.js";import"./ImageGalleryMain-LKPoIxi9.js";import"./downloadFile-BskFWteI.js";import"./index-BDg928G7.js";import"./dateFormator-BGKi5rfZ.js";const S=()=>{const{id:s}=b(),a=f(),{data:i,isLoading:u,isError:l,error:o,refetch:x}=C(s),d=j(),n=v(),p=async(g,r)=>{try{if(await d.mutateAsync({customerId:s,payload:g}),r&&r.length>0){const e=new FormData;r.forEach(h=>{e.append("files",h)}),await n.mutateAsync({id:s,formData:e})}c({title:"Success",description:"Customer updated successfully"}),x()}catch(e){throw c({title:"Error",description:e.message||"Failed to update customer"}),e}};return u?t.jsx(w,{}):l?t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl",children:"⚠️ Error Occurred"}),t.jsx("p",{className:"text-red-500 mb-4",children:(o==null?void 0:o.message)||"Failed to load customer"}),t.jsx(m,{onClick:()=>a(-1),children:"Go Back"})]}):i?t.jsx(y,{mode:"view",initialData:i,onSubmit:p,isSubmitting:d.isPending||n.isPending}):t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-yellow-600 font-semibold mb-2 text-xl",children:"Customer Not Found"}),t.jsx(m,{onClick:()=>a(-1),children:"Go Back"})]})};export{S as default};
