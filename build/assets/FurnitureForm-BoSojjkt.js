import{j as e,B as p}from"./index-ogMTmcqi.js";const y={labour:2e3,plywood:1,laminate:1},f=()=>({itemName:"",plywoodNos:{quantity:0,thickness:0},laminateNos:{quantity:0,thickness:0},carpenters:0,days:0,profitOnMaterial:0,profitOnLabour:0,rowTotal:0,remarks:""}),j=()=>({itemName:"",description:"",quantity:0,cost:0,rowTotal:0}),T=({data:i,updateFurniture:x,removeFurniture:h})=>{const v=r=>{var N,b;const t=((N=r.plywoodNos)==null?void 0:N.quantity)||0,a=((b=r.laminateNos)==null?void 0:b.quantity)||0,s=r.carpenters||0,n=r.days||0,o=t*y.plywood+a*y.laminate,l=s*n*y.labour,c=o*(1+(r.profitOnMaterial||0)/100),C=l*(1+(r.profitOnLabour||0)/100);return Math.round(c+C)},d=r=>{const t=r.coreMaterials.reduce((o,l)=>o+l.rowTotal,0),a=r.fittingsAndAccessories.reduce((o,l)=>o+l.rowTotal,0),s=r.glues.reduce((o,l)=>o+l.rowTotal,0),n=r.nonBrandMaterials.reduce((o,l)=>o+l.rowTotal,0);return{core:t,fittings:a,glues:s,nbms:n,furnitureTotal:t+a+s+n}},m=(r,t,a)=>{const s=[...i.coreMaterials];t==="imageUrl"?(s[r].imageUrl=a,s[r].previewUrl=URL.createObjectURL(a)):s[r][t]=a,s[r].rowTotal=v(s[r]);const n=r===s.length-1,o=Object.values(s[r]).some(c=>typeof c=="object"&&c!==null&&"quantity"in c?c.quantity||c.thickness:c!==""&&c!==0&&c!==null);n&&o&&s.push(f());const l={...i,coreMaterials:s};l.totals=d(l),x&&x(l)},u=(r,t,a,s)=>{const n=[...i[r]];n[t][a]=s,n[t].rowTotal=n[t].quantity*n[t].cost;const o=t===n.length-1,l=n[t].itemName||n[t].description||n[t].quantity||n[t].cost;o&&l&&n.push(j());const c={...i,[r]:n};c.totals=d(c),x&&x(c)},w=()=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2",children:["Core Materials - Total: ₹",i==null?void 0:i.totals.core.toLocaleString("en-IN")]}),e.jsx("div",{className:"overflow-x-auto  rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsxs("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Image"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",colSpan:2,children:"Plywood"}),e.jsx("th",{className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",colSpan:2,children:"Laminate"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"No. of Carpenters / Day"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"No. of Days"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Profit % Material"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Profit % Labour"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Remarks"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Actions"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"})]})]}),e.jsx("tbody",{children:i.coreMaterials.map((r,t)=>e.jsxs("tr",{className:"group relative border-none !border-b-1 px-4 py-2 transition-all duration-150 hover:bg-gray-50",children:[e.jsxs("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:[e.jsx("input",{type:"file",onChange:a=>{var s;return m(t,"imageUrl",(s=a.target.files)==null?void 0:s[0])},className:"w-full px-2 py-3 text-center outline-none"}),r.previewUrl&&e.jsx("img",{src:r.previewUrl,className:"h-10 mx-auto mt-1"})]}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:r.itemName,placeholder:"TV Unit | Wardrobe",onChange:a=>m(t,"itemName",a.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),["plywoodNos","laminateNos"].map(a=>["quantity","thickness"].map(s=>e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:r[a][s],onChange:n=>{Number(n.target.value)>=0&&m(t,a,{...r[a],[s]:Number(n.target.value)})},className:"w-full px-2 py-1 text-center outline-none"})},`${a}-${s}`))),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:r.carpenters,onChange:a=>m(t,"carpenters",Number(a.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:r.days,onChange:a=>m(t,"days",Number(a.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:r.profitOnMaterial,onChange:a=>m(t,"profitOnMaterial",Number(a.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:r.profitOnLabour,onChange:a=>m(t,"profitOnLabour",Number(a.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:r.remarks,placeholder:"remarks",onChange:a=>m(t,"remarks",a.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsxs("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:["₹",r.rowTotal.toLocaleString("en-IN")]}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx(p,{variant:"danger",onClick:()=>{const a=[...i.coreMaterials];a.splice(t,1);const s={...i,coreMaterials:a};s.totals=d(s),x&&x(s)},className:"px-1 text-xs bg-red-600 text-white",children:"Remove"})})]},t))})]})}),e.jsx("div",{className:"mt-2 text-right",children:e.jsx(p,{onClick:()=>{const r=[...i.coreMaterials,f()],t={...i,coreMaterials:r};t.totals=d(t),x&&x(t)},children:"+ Add Core Material"})})]}),g=(r,t)=>{var a;return e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2",children:[r," - Total: ₹",(a=i==null?void 0:i.totals[t==="fittingsAndAccessories"?"fittings":t])==null?void 0:a.toLocaleString("en-IN")]}),e.jsx("div",{className:"overflow-x-auto  rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsx("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:i[t].map((s,n)=>e.jsxs("tr",{className:"group relative border-none !border-b-1 px-4 !py-2 transition-all duration-150 hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:s.itemName,placeholder:"Item Name",onChange:o=>u(t,n,"itemName",o.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:s.description,placeholder:"description",onChange:o=>u(t,n,"description",o.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:s.quantity,onChange:o=>{Number(o.target.value)>=0&&u(t,n,"quantity",Number(o.target.value))},className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:s.cost,onChange:o=>u(t,n,"cost",Number(o.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsxs("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:["₹",s.rowTotal.toLocaleString("en-IN")]}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx(p,{variant:"danger",onClick:()=>{const o=[...i[t]];o.splice(n,1);const l={...i,[t]:o};l.totals=d(l),x&&x(l)},className:"px-1 text-xs bg-red-600 text-white",children:"Remove"})})]},n))})]})}),e.jsx("div",{className:"mt-2 text-right",children:e.jsxs(p,{onClick:()=>{const s=[...i[t],j()],n={...i,[t]:s};n.totals=d(n),x&&x(n)},children:["+ Add ",r," Item"]})})]})};return e.jsxs("div",{className:"shadow-md p-4 my-4 border rounded-lg bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Furniture: ",i.furnitureName]}),h&&e.jsx(p,{variant:"danger",size:"sm",onClick:h,className:"bg-red-600 text-white",children:"Remove Furniture"})]}),w(),g("Fittings","fittingsAndAccessories"),g("Glues","glues"),g("Non-Branded Materials","nonBrandMaterials"),e.jsxs("div",{className:"mt-6 text-right text-xl text-green-700 font-bold",children:["Furniture Total: ₹",i.totals.furnitureTotal.toLocaleString("en-IN")]})]})};export{T as F,y as R};
