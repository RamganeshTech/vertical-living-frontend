import{u as w}from"./useQuery-BmC89CNR.js";import{c as s,q as l,d as m,f}from"./index-C2KHEypQ.js";import{u}from"./useMutation-DaAue-fW.js";import{g as i}from"./roleCheck-DBD7VNWv.js";const y=async({projectId:o,payload:e,token:r})=>{const{data:t}=await f.post(`https://houseofram.in/api/requirementform/createrequirement/${o}?token=${r}`,e);if(!t.ok)throw new Error(t.message);return t.data},h=async({projectId:o,payload:e,api:r})=>{const{data:t}=await r.post(`/requirementform/createRoom/${o}`,e);if(!t.ok)throw new Error(t.message);return t},p=async({projectId:o,roomId:e,api:r})=>{const{data:t}=await r.delete(`/requirementform/deleteroom/${o}/${e}`);if(!t.ok)throw new Error(t.message);return t},q=async({projectId:o,roomId:e,itemId:r,payload:t,api:n})=>{const{data:a}=await n.put(`/requirementform/updateroomitem/${o}/${e}/${r}`,t);if(!a.ok)throw new Error(a.message);return a},F=async({projectId:o,roomId:e,itemId:r,api:t})=>{const{data:n}=await t.delete(`/requirementform/deleteitem/${o}/${e}/${r}`);if(!n.ok)throw new Error(n.message);return n},R=async({projectId:o,api:e})=>{const{data:r}=await e.get(`/requirementform/getrequirementform/${o}`);if(!r.ok)throw new Error(r.message);return r==null?void 0:r.data},E=async({projectId:o,roomId:e,api:r})=>{const{data:t}=await r.get(`/requirementform/getroomwise/${o}/${e}`);if(!t.ok)throw new Error(t.message);return t.data},$=async({projectId:o,api:e})=>{const{data:r}=await e.post(`/requirementform/formsharelink/${o}`);if(!r.ok)throw new Error(r.message);return r.data},g=async({formId:o,projectId:e,api:r})=>{const{data:t}=await r.patch(`/requirementform/formcompleted/${e}/${o}`);if(!t.ok)throw new Error(t.message);return t.data},k=async({formId:o,projectId:e,deadLine:r,api:t})=>{const{data:n}=await t.patch(`/requirementform/deadline/${e}/${o}`,{deadLine:r});if(!n.ok)throw new Error(n.message);return n.data},C=async({formId:o,projectId:e,files:r,api:t})=>{const n=new FormData;return r.forEach(c=>n.append("file",c)),(await t.post(`/requirementform/upload/multiple/${e}/${o}`,n,{headers:{"Content-Type":"multipart/form-data"}})).data},A=async(o,e,r)=>{const{data:t}=await r.patch(`/requirementform/${o}/deleteuploadedfile/${e}`);if(!t.ok)throw new Error(t.message);return t.data},O=()=>{const{role:o}=s(),e=i(o),r=["owner","staff","CTO"];return u({mutationFn:async({projectId:t,fileId:n})=>{if(!o||!r.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await A(t,n,e)},onSuccess:(t,{projectId:n})=>{l.invalidateQueries({queryKey:["requirementForm",n]})}})},P=()=>u({mutationFn:async({projectId:o,payload:e,token:r})=>await y({projectId:o,payload:e,token:r}),onSuccess:(o,{projectId:e})=>{l.invalidateQueries({queryKey:["requirementForm",e]})}}),_=()=>{const o=["owner","staff","CTO"],{role:e}=s(),r=i(e);return u({mutationFn:async({projectId:t})=>{if(!e||!o.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await $({projectId:t,api:r})},onSuccess:(t,{projectId:n})=>{l.invalidateQueries({queryKey:["requirementForm",n]})}})},D=()=>{const o=["owner","staff","CTO","client"],{role:e}=s(),r=i(e);return u({mutationFn:async({formId:t,projectId:n})=>{if(!e)throw new Error("not authorized");if(!o.includes(e))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await g({formId:t,projectId:n,api:r})},onSuccess:(t,{projectId:n})=>{l.invalidateQueries({queryKey:["requirementForm"]}),l.invalidateQueries({queryKey:["siteMeasurement",n]})}})},b=()=>{const o=["owner","staff","CTO"],{role:e}=s(),r=i(e);return u({mutationFn:async({formId:t,deadLine:n,projectId:a})=>{if(!e)throw new Error("not authorized");if(!o.includes(e))throw new Error("you dont have the access to make this api");if(!r)throw new Error("api is not available");return await k({formId:t,deadLine:n,projectId:a,api:r})},onSuccess:(t,{projectId:n})=>{l.invalidateQueries({queryKey:["requirementForm",n]})}})},N=()=>{const o=["owner","staff","CTO","client"],{role:e}=s(),r=i(e);return u({mutationFn:async({formId:t,files:n,projectId:a})=>{if(!e)throw new Error("not authorized");if(!o.includes(e))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await C({formId:t,projectId:a,files:n,api:r})},onSuccess:(t,{projectId:n})=>{l.invalidateQueries({queryKey:["requirementForm",n]})}})},U=()=>{const o=["owner","staff","CTO"],{role:e}=s(),r=i(e),t=m();return u({mutationFn:async({projectId:n,payload:a})=>{if(!e||!o.includes(e))throw new Error("Not allowed");if(!r)throw new Error("API instance not found");return await h({projectId:n,payload:a,api:r})},onSuccess:(n,{projectId:a})=>{t.invalidateQueries({queryKey:["requirementForm",a]})}})},G=()=>{const o=["owner","staff","CTO"],{role:e}=s(),r=i(e),t=m();return u({mutationFn:async({projectId:n,roomId:a})=>{if(!e||!o.includes(e))throw new Error("Not allowed");if(!r)throw new Error("API instance not found");return await p({projectId:n,roomId:a,api:r})},onSuccess:(n,{projectId:a})=>{t.invalidateQueries({queryKey:["requirementForm",a]})}})},z=()=>{const o=["owner","staff","CTO"],{role:e}=s(),r=i(e),t=m();return u({mutationFn:async({projectId:n,roomId:a,itemId:c,payload:d})=>{if(!e||!o.includes(e))throw new Error("Not allowed");if(!r)throw new Error("API instance not found");return await q({projectId:n,roomId:a,itemId:c,payload:d,api:r})},onSuccess:(n,{projectId:a,roomId:c})=>{t.invalidateQueries({queryKey:["requirementFormRoom",a,c]})}})},L=()=>{const o=["owner","staff","CTO"],{role:e}=s(),r=i(e),t=m();return u({mutationFn:async({projectId:n,roomId:a,itemId:c})=>{if(!e||!o.includes(e))throw new Error("Not allowed");if(!r)throw new Error("API instance not found");return await F({projectId:n,roomId:a,itemId:c,api:r})},onSuccess:(n,{projectId:a,roomId:c})=>{t.invalidateQueries({queryKey:["requirementFormRoom",a,c]})}})},x=({projectId:o})=>{const e=["owner","staff","CTO","client"],{role:r}=s(),t=i(r);return w({queryKey:["requirementForm",o],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("Not allowed");if(!t)throw new Error("API instance not found");return await R({projectId:o,api:t})},retry:!1})},M=({projectId:o,roomId:e})=>{const r=["owner","staff","CTO","client"],{role:t}=s(),n=i(t);return w({queryKey:["requirementFormRoom",o,e],queryFn:async()=>{if(!t||!r.includes(t))throw new Error("Not allowed");if(!n)throw new Error("API instance not found");return await E({projectId:o,roomId:e,api:n})},enabled:!!o&&!!e,retry:!1})},S=async(o,e,r,t)=>{const{data:n}=await t.post(`/requirementform/${o}/${e}/upload`,r,{headers:{"Content-Type":"multipart/form-data"}});if(!n.ok)throw new Error(n.message);return n.data},Y=()=>{const{role:o}=s(),e=i(o),r=["owner","staff","CTO","client"];return u({mutationFn:async({projectId:t,sectionName:n,files:a})=>{if(!o||!r.includes(o))throw new Error("You are not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await S(t,n,a,e)},onSuccess:(t,{projectId:n})=>{l.invalidateQueries({queryKey:["requirementForm",n]})}})},v=async(o,e,r,t)=>{const{data:n}=await t.delete(`/requirementform/${o}/${e}/${r}/deletefile`);if(!n.ok)throw new Error(n.message);return n.data},B=()=>{const{role:o}=s(),e=i(o),r=["owner","staff","CTO"];return u({mutationFn:async({projectId:t,sectionName:n,fileId:a})=>{if(!o||!r.includes(o))throw new Error("You are not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await v(t,n,a,e)},onSuccess:(t,{projectId:n})=>{l.invalidateQueries({queryKey:["requirementForm",n]})}})};export{Y as a,B as b,M as c,z as d,L as e,P as f,G as g,_ as h,D as i,b as j,N as k,O as l,U as m,x as u};
