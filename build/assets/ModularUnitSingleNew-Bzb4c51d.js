import{a as Se,u as De,r as c,k as Ae,j as e,M as qe,B as h,T as ie,t as b}from"./index-BAM0eJUz.js";import{d as Ee,c as Pe}from"./modularUnitNewApi-BtjMkC-6.js";import{C as p,a as u,b as g,c as f}from"./Card-CdxfjEr-.js";import{L as o}from"./Label-C8i6KaZe.js";import{I as m}from"./Input-1UBXZqEj.js";import{d as Re}from"./downloadFile-BbGV_BaX.js";import"./useInfiniteQuery-BGz0VllC.js";const _e=()=>{var Y,Z,ee,se,ae,te,re,le;const G=Se(),{unitId:O}=De(),[n,V]=c.useState(!1),[j,k]=c.useState("product"),[F,C]=c.useState(0),{data:a,isLoading:ne}=Ee(O),{mutateAsync:ce,isPending:I}=Pe(),[y,S]=c.useState([{key:"no",label:"No"},{key:"partCode",label:"Part Code"},{key:"partName",label:"Part Name"},{key:"l",label:"L"},{key:"w",label:"W"},{key:"t",label:"T"},{key:"coreMaterial",label:"Core Material"},{key:"externalFinish",label:"External Finish"},{key:"internalFinish",label:"Internal Finish"},{key:"grain",label:"Grain"}]),[i,d]=c.useState({serialNo:"",category:"",description:"",dimention:{height:0,width:0,depth:0},totalAreaSqFt:"",materialsNeeded:"",fabricationCost:"",timeRequired:"",attributes:[],parts:[]}),[D,A]=c.useState([]),[q,E]=c.useState([]),[P,R]=c.useState([]),[M,H]=c.useState([]),[de,U]=c.useState(!1),[oe,L]=c.useState(!1),[me,$]=c.useState(!1),[xe,W]=c.useState(!1),[T,J]=c.useState("");c.useEffect(()=>{var s,t,l,r,x,v;a&&d({serialNo:a.serialNo||"",category:a.category||"",description:a.description||"",dimention:{height:((s=a.dimention)==null?void 0:s.height)||0,width:((t=a.dimention)==null?void 0:t.width)||0,depth:((l=a.dimention)==null?void 0:l.depth)||0},totalAreaSqFt:((r=a.totalAreaSqFt)==null?void 0:r.toString())||"",materialsNeeded:a.materialsNeeded||"",fabricationCost:((x=a.fabricationCost)==null?void 0:x.toString())||"",timeRequired:((v=a.timeRequired)==null?void 0:v.toString())||"",attributes:a.attributes||[],parts:a.parts||[]})},[a]),c.useEffect(()=>{if(a&&a.parts&&a.parts.length>0){const s=a.parts[0],l=Object.keys(s).filter(r=>r!=="_id").map(r=>({key:r,label:r.charAt(0).toUpperCase()+r.slice(1).replace(/_/g," ")}));l.find(r=>r.key==="no")||l.unshift({key:"no",label:"No"}),S(l)}},[a]);const z=(s,t)=>{d(l=>({...l,[s]:t}))},B=(s,t)=>{const l=Math.max(0,Number(t)||0);d(r=>({...r,dimention:{...r.dimention,[s]:l}}))},N=s=>{(s.key==="-"||s.key==="e"||s.key==="E"||s.key==="+")&&s.preventDefault()},K=(s,t)=>{const l=t.replace(/-/g,"");d(r=>({...r,[s]:l}))},he=s=>{const t=Array.from(s.target.files||[]);A(t),U(!1)},pe=s=>{const t=Array.from(s.target.files||[]);E(t),L(!1)},ue=s=>{const t=Array.from(s.target.files||[]);R(t),$(!1)},ge=s=>{const t=Array.from(s.target.files||[]);H(t),W(!1)},Q=()=>{T.trim()&&(d(s=>({...s,attributes:[...s.attributes,T.trim()]})),J(""))},fe=s=>{d(t=>({...t,attributes:t.attributes.filter((l,r)=>r!==s)}))},{role:je,permission:_}=Ae(),Ne=je==="owner"||((Y=_==null?void 0:_.modularunit)==null?void 0:Y.edit),X=()=>{var s,t,l,r,x,v;n&&(a&&d({serialNo:a.serialNo||"",category:a.category||"",description:a.description||"",dimention:{height:((s=a.dimention)==null?void 0:s.height)||0,width:((t=a.dimention)==null?void 0:t.width)||0,depth:((l=a.dimention)==null?void 0:l.depth)||0},totalAreaSqFt:((r=a.totalAreaSqFt)==null?void 0:r.toString())||"",materialsNeeded:a.materialsNeeded||"",fabricationCost:((x=a.fabricationCost)==null?void 0:x.toString())||"",timeRequired:((v=a.timeRequired)==null?void 0:v.toString())||"",attributes:a.attributes||[],parts:a.parts||[]}),A([]),E([]),R([]),H([]),U(!1),L(!1),$(!1),W(!1),n&&i.parts.length===0&&d(Ie=>({...Ie,parts:[{no:1,partCode:"",partName:"",l:0,w:0,d:0,coreMaterial:"",externalFinish:"",internalFinish:"",grain:""}]}))),V(!n)},be=async()=>{var t,l;if(!i.category){b({title:"Error",description:"Category is required",variant:"destructive"});return}if(!i.fabricationCost||Number(i.fabricationCost)<=0){b({title:"Error",description:"Valid fabrication cost is required",variant:"destructive"});return}const s={...i,totalAreaSqFt:i.totalAreaSqFt||void 0,fabricationCost:i.fabricationCost||void 0,timeRequired:i.timeRequired||void 0,parts:JSON.stringify(i.parts)};try{await ce({unitId:O,formValues:s,productImages:D,images2d:q,images3d:P,replaceProductImages:de,replace2dImages:oe,replace3dImages:me,replaceCutlistDoc:xe,cutlistDoc:M}),b({title:"Success",description:"Product updated successfully!"}),V(!1),A([]),E([]),R([]),U(!1),L(!1),$(!1)}catch(r){b({title:"Error",description:((l=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to update product",variant:"destructive"})}},ye=()=>{d(s=>({...s,parts:[...s.parts,{no:s.parts.length+1,partCode:"",partName:"",l:0,w:0,t:0,coreMaterial:"",externalFinish:"",internalFinish:"",grain:""}]}))},ve=s=>{d(t=>({...t,parts:t.parts.filter((l,r)=>r!==s)}))},Ce=()=>{const s=prompt("Enter new field name (e.g., Edge Banding):");if(!s)return;const t=s.toLowerCase().replace(/\s+/g,"_");S(l=>[...l,{key:t,label:s}]),d(l=>({...l,parts:l.parts.map(r=>({...r,[t]:""}))}))},we=s=>{s!=="no"&&(S(t=>t.filter(l=>l.key!==s)),d(t=>({...t,parts:t.parts.map(l=>{const r={...l};return delete r[s],r})})))},ke=(s,t,l)=>{d(r=>{const x=[...r.parts];return x[s]={...x[s],[t]:l},{...r,parts:x}})},Fe=async s=>{var t,l;try{await Re({src:s==null?void 0:s.url,alt:s.originalName}),b({title:"Success",description:"PDF Downloaded successfully"})}catch(r){b({title:"Error",description:((l=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:l.message)||(r==null?void 0:r.message)||"Failed to generate PDF",variant:"destructive"})}},w=(()=>{if(!a)return[];switch(j){case"product":return a.productImages||[];case"2d":return a["2dImages"]||[];case"3d":return a["3dImages"]||[];default:return[]}})();return ne?e.jsx(qe,{}):a?e.jsxs("main",{className:"max-h-full overflow-y-auto flex flex-col  bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-full mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>G(-1),className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:a.category||"Untitled category"}),a.serialNo&&e.jsxs("p",{className:"text-sm text-gray-500 font-semibold",children:["Unit No: ",e.jsx("span",{className:"text-gray-900",children:a.serialNo})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!n&&Ne&&e.jsxs(h,{onClick:X,className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"outline",onClick:X,disabled:I,children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(h,{onClick:be,isLoading:I,className:"min-w-[120px]",children:I?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save"]})})]})]})]})}),e.jsx("section",{className:"flex-1  custom-scrollbar p-3",children:e.jsx("div",{className:"max-w-full !max-h-full  mx-auto p-3",children:e.jsxs("div",{className:"grid grid-cols-1  lg:grid-cols-4 gap-6",children:[e.jsxs("section",{className:`lg:col-span-2 h-[calc(100vh-${n?"90px":"40px"})] overflow-y-auto space-y-6 custom-scrollbar`,children:[e.jsx(p,{children:e.jsxs(u,{className:"!p-2",children:[e.jsx("div",{className:"aspect-video bg-gray-100 relative rounded-lg",children:w.length>0?e.jsx("img",{src:(Z=w[F])==null?void 0:Z.url,alt:`${j} image ${F+1}`,className:"w-full h-full object-contain rounded-lg"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("i",{className:"fas fa-image text-6xl mb-4"}),e.jsxs("p",{children:["No ",j," images available"]})]})})}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>{k("product"),C(0)},className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${j==="product"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"fas fa-images mr-2"}),"Product Images (",((ee=a.productImages)==null?void 0:ee.length)||0,")"]}),e.jsxs("button",{onClick:()=>{k("2d"),C(0)},className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${j==="2d"?"bg-cyan-50 text-cyan-600 border-b-2 border-cyan-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"fas fa-draw-polygon mr-2"}),"2D Images (",((se=a["2dImages"])==null?void 0:se.length)||0,")"]}),e.jsxs("button",{onClick:()=>{k("3d"),C(0)},className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${j==="3d"?"bg-indigo-50 text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"fas fa-cube mr-2"}),"3D Images (",((ae=a["3dImages"])==null?void 0:ae.length)||0,")"]})]}),w.length>0&&e.jsx("div",{className:"p-4 border-t",children:e.jsx("div",{className:"grid grid-cols-3 gap-1 h-full max-h-[150px] overflow-y-auto ",children:w.map((s,t)=>e.jsx("button",{onClick:()=>C(t),className:`aspect-square h-full w-full rounded-lg overflow-hidden border-2 transition-all ${F===t?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("img",{src:s.url,alt:`Thumbnail ${t+1}`,className:"w-full h-full object-cover"})},t))})})]})}),n&&e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt text-blue-600"}),"Upload New Images"]})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"productImages",children:"Product Images"}),e.jsx(m,{id:"productImages",type:"file",accept:"image/*",multiple:!0,onChange:he,className:"cursor-pointer"}),D.length>0&&e.jsxs("p",{className:"text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),D.length," new image(s) selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"images2d",children:"2D Design Images"}),e.jsx(m,{id:"images2d",type:"file",accept:"image/*",multiple:!0,onChange:pe,className:"cursor-pointer"}),q.length>0&&e.jsxs("p",{className:"text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),q.length," new image(s) selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"images3d",children:"3D Render Images"}),e.jsx(m,{id:"images3d",type:"file",accept:"image/*",multiple:!0,onChange:ue,className:"cursor-pointer"}),P.length>0&&e.jsxs("p",{className:"text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),P.length," new image(s) selected"]})]}),e.jsxs("p",{className:"text-xs text-orange-600",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Note: Uploading new images will replace existing images of that type"]})]})]})]}),e.jsxs("section",{className:"overflow-y-auto !max-h-[100%] h-[calc(100vh-120px)]  col-span-2  space-y-6 custom-scrollbar ",children:[e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-info-circle text-blue-600"}),"Basic Information"]})}),e.jsx(u,{className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"category",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"Category",placeholder:"Enter Category",value:i.category,onChange:s=>z("category",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"fabricationCost",children:["Fabrication Cost (â‚¹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"fabricationCost",type:"number",min:"0",step:"0.01",placeholder:"Enter fabrication cost",value:i.fabricationCost,onChange:s=>K("fabricationCost",s.target.value),onKeyDown:N,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"timeRequired",children:"Time Required (days)"}),e.jsx(m,{id:"timeRequired",type:"number",min:"0",placeholder:"Enter time required",value:i.timeRequired,onChange:s=>K("timeRequired",s.target.value),onKeyDown:N})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(ie,{id:"description",placeholder:"Enter product description",value:i.description,onChange:s=>z("description",s.target.value),rows:4})]})]}):e.jsxs("section",{className:"flex gap-2  justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Category"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-600"}),e.jsx("span",{className:"font-medium capitalize",children:a.category||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Fabrication Cost"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-hammer text-blue-600"}),e.jsx("span",{className:"font-medium capitalize",children:((te=a.fabricationCost)==null?void 0:te.toLocaleString())||0})]})]}),a.timeRequired&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Time Required"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-clock text-blue-600"}),e.jsxs("span",{className:"font-medium capitalize",children:[a.timeRequired," days"]})]})]}),a.serialNo&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Unit No:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-barcode text-blue-600"}),e.jsx("span",{className:"font-medium capitalize",children:a.serialNo})]})]}),a.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:a.description})]})]})})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-ruler-combined text-purple-600"}),"Dimensions"]})}),e.jsx(u,{className:"space-y-4",children:n?e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"height",className:"text-xs",children:"Height (mm)"}),e.jsx(m,{id:"height",type:"number",min:"0",placeholder:"H",value:i.dimention.height||"",onChange:s=>B("height",s.target.value),onKeyDown:N,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"width",className:"text-xs",children:"Width (mm)"}),e.jsx(m,{id:"width",type:"number",min:"0",placeholder:"W",value:i.dimention.width||"",onChange:s=>B("width",s.target.value),onKeyDown:N,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"depth",className:"text-xs",children:"Depth (mm)"}),e.jsx(m,{id:"depth",type:"number",min:"0",placeholder:"D",value:i.dimention.depth||"",onChange:s=>B("depth",s.target.value),onKeyDown:N,className:"text-sm"})]})]}):e.jsx("div",{className:" rounded-lg p-3",children:e.jsx("div",{className:"flex items-center gap-2 font-semibold text-gray-700",children:(a==null?void 0:a.dimention)&&((re=Object.entries(a.dimention))==null?void 0:re.map(([s,t],l)=>{var r;return e.jsxs(c.Fragment,{children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsxs("span",{className:"text-[16px] text-gray-500",children:[s[0].toUpperCase()+s.slice(1),":"]})," ",t||0,"mm"]}),l!==((r=Object.keys(a.dimention))==null?void 0:r.length)-1&&e.jsx("span",{className:"text-[12px] text-gray-500",children:","})]},l)}))})})})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-expand text-blue-600"}),"Area & Materials"]})}),e.jsx(u,{className:"space-y-2",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"totalAreaSqFt",children:"Total Area (sq ft)"}),e.jsx(m,{id:"totalAreaSqFt",type:"number",min:"0",step:"0.01",placeholder:"Enter total area",value:i.totalAreaSqFt,onChange:s=>K("totalAreaSqFt",s.target.value),onKeyDown:N})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"materialsNeeded",children:"Materials Needed"}),e.jsx(ie,{id:"materialsNeeded",placeholder:"Enter materials needed",value:i.materialsNeeded,onChange:s=>z("materialsNeeded",s.target.value),rows:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-2 flex gap-2",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-expand"}),"Total Area:"]}),e.jsxs("span",{className:"font-semibold",children:[a.totalAreaSqFt||"N/A"," sq ft"]})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Materials Needed: "}),e.jsx("p",{className:"text-gray-700",children:a.materialsNeeded||"N/A"})]})]})})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar text-gray-600"}),"CutList Doc"]})}),e.jsx(u,{className:"space-y-3",children:n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsx(m,{id:"cutlistdoc",type:"file",accept:"pdf/*",multiple:!0,onChange:ge,className:"cursor-pointer text-xs"}),M.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:M.map((s,t)=>e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[e.jsx("i",{className:"far fa-file-pdf mr-1 text-red-500"}),s.name]},t))})]})}):e.jsx(e.Fragment,{children:a.cutlistDoc&&a.cutlistDoc.length>0?e.jsx("div",{className:"mt-2 space-y-2",children:a.cutlistDoc.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md border border-gray-100 group",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 truncate",children:[e.jsx("i",{className:"far fa-file-pdf text-red-500 text-sm"}),e.jsx("span",{className:"text-xs font-medium text-gray-700 truncate",children:s.originalName||`Document ${t+1}`})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 bg-blue-100 px-3 py-2 rounded-2xl hover:text-blue-800 text-[14px] font-semibold flex items-center gap-1 transition-colors",children:[e.jsx("i",{className:"fas fa-eye"}),"View"]}),e.jsx(h,{variant:"secondary",onClick:()=>Fe(s),className:"border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400",children:"Download PDF"})]})]},t))}):e.jsx("p",{className:"text-xs text-gray-400 italic",children:"No documents uploaded"})})})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tags text-orange-600"}),"Attributes"]})}),e.jsx(u,{className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{placeholder:"Add attribute (e.g., modern, wooden)",value:T,onChange:s=>J(s.target.value),onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),Q())},className:"text-sm"}),e.jsx(h,{type:"button",onClick:Q,variant:"outline",size:"sm",className:"px-3",children:e.jsx("i",{className:"fas fa-plus"})})]}),i.attributes.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.attributes.map((s,t)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs flex items-center gap-1.5",children:[s,e.jsx("button",{type:"button",onClick:()=>fe(t),className:"hover:text-red-600 transition-colors",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]},t))})]}):e.jsx(e.Fragment,{children:a.attributes&&a.attributes.length>0?e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.attributes.map((s,t)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-star text-[10px]"}),s]},t))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No attributes added"})})})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar text-gray-600"}),"Metadata"]})}),e.jsxs(u,{className:"space-y-3",children:[a.createdAt&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar-plus"}),"Created At"]}),e.jsx("span",{className:"font-medium",children:new Date(a.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})})]}),a.updatedAt&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar-check"}),"Updated At"]}),e.jsx("span",{className:"font-medium",children:new Date(a.updatedAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})})]})]})]})]})]})})}),e.jsx("section",{className:"w-full",children:e.jsxs(p,{className:"shadow-sm border-none",children:[e.jsxs(g,{className:"flex flex-row items-center justify-between bg-white border-b",children:[e.jsxs(f,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-th-list text-blue-600"}),"Cutlist Details"]}),n&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{type:"button",size:"sm",variant:"outline",onClick:Ce,children:[e.jsx("i",{className:"fas fa-columns mr-1"})," Add Field"]}),e.jsxs(h,{type:"button",size:"sm",onClick:ye,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Row"]})]})]}),e.jsx(u,{className:"p-0 overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed text-left border-collapse min-w-[1200px]",children:[e.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-600",children:e.jsxs("tr",{children:[y.map((s,t)=>e.jsx("th",{className:`
                                                bg-blue-50
          p-3 border-b border-r border-blue-200 text-[11px] font-bold uppercase tracking-wider text-blue-700 relative group
          ${t===0?"rounded-tl-xl":""} 
          ${!n&&t===y.length-1?"rounded-tr-xl":""}
        `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[s.label,n&&s.key!=="no"&&e.jsx("button",{type:"button",onClick:()=>we(s.key),className:"ml-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"fas fa-times-circle"})})]})},s.key)),n&&e.jsx("th",{className:"p-2 border-b border-blue-100 text-[11px] font-bold uppercase tracking-wider text-blue-700 text-center bg-blue-50",children:"Action"})]})}),e.jsx("tbody",{className:"text-sm",children:((le=i==null?void 0:i.parts)==null?void 0:le.length)>0?e.jsx(e.Fragment,{children:i.parts.map((s,t)=>e.jsxs("tr",{className:"hover:bg-blue-50/40 transition-colors group",children:[y.map(l=>e.jsx("td",{className:"p-0 border border-r border-blue-200",children:l.key==="no"?e.jsx("div",{className:"text-center font-medium text-gray-500 py-3 bg-gray-50/30",children:t+1}):e.jsx("div",{className:"relative min-h-[45px] flex items-center",children:n?e.jsx("input",{type:["l","w","t"].includes(l.key)?"number":"text",value:s[l.key]??"",onChange:r=>ke(t,l.key,r.target.value),className:"w-full p-3 bg-transparent outline-none transition-all focus:bg-white focus:ring-2 focus:ring-inset focus:ring-blue-500 cursor-text text-slate-700"}):e.jsx("div",{className:"w-full p-3 text-slate-700 font-medium text-xs leading-relaxed break-words whitespace-normal overflow-hidden",children:s[l.key]||"-"})})},l.key)),n&&e.jsx("td",{className:"p-1 border border-blue-200 text-center",children:e.jsx("button",{type:"button",onClick:()=>ve(t),className:"p-2  cursor-pointer text-slate-600 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",children:e.jsx("i",{className:"fas fa-trash-alt"})})})]},t))}):e.jsx(e.Fragment,{children:e.jsx("tr",{className:"hover:bg-blue-50/20 transition-colors border !border-blue-50",children:e.jsx("td",{colSpan:n?y.length+1:y.length,className:"py-12 text-center align-middle border-b border-l border-r border-blue-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-file-circle-exclamation text-blue-200 text-2xl"}),e.jsx("p",{className:"text-slate-400 font-medium italic",children:"No cutlist provided"})]})})})})})]})})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-4xl text-red-500 mb-4"}),e.jsx("p",{className:"text-red-500",children:"Product not found"}),e.jsx(h,{onClick:()=>G(-1),className:"mt-4",children:"Go Back"})]})})};export{_e as default};
