import{u as j,a as N,r as x,j as e,C as m,B as v,t as k}from"./index-BAM0eJUz.js";import{u as w}from"./logisticsApi-Qwzfztbq.js";import{u as S,L as y}from"./LiveTrackingMap-CEKkjBtH.js";import{C as p,a as L}from"./Card-CdxfjEr-.js";import"./index-C8BdbktQ.js";const E=()=>{var c,o,d;const{id:i}=j(),h=N(),{data:a,isLoading:f,isError:g}=w(i),[t,n]=x.useState(!1),[l,r]=x.useState(!1),{isUpdating:b}=S(i,t||l,()=>{n(!0),r(!1),k({title:"Success",description:"GPS Connection Established! Sharing live location."})}),u=()=>{t?(n(!1),r(!1)):r(!0)};if(f)return e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-slate-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(g||!a)return e.jsxs("div",{className:"h-screen flex flex-col items-center justify-center p-6 text-center bg-white",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-4xl text-red-500 mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"Invalid Tracking Session"}),e.jsx("p",{className:"text-slate-500",children:"This tracking link is no longer active."})]});const s=a==null?void 0:a.vehicleDetails;return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col overflow-x-hidden",children:[e.jsxs("header",{className:"sticky top-0 z-[1001] bg-white border-b border-slate-200 px-6 py-3 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{onClick:()=>h("/"),className:"flex cursor-pointer items-center gap-2 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0  w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center overflow-hidden rounded-lg",children:e.jsx("img",{src:m.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm sm:text-xl font-black text-slate-900 leading-none tracking-tight",children:m.COMPANY_NAME}),e.jsx("span",{className:"text-[9px] sm:text-xs text-blue-600 font-bold uppercase tracking-[0.15em]",children:"Logistics Tracking"})]})]}),e.jsxs(v,{variant:t?"danger":"primary",size:"sm",className:"font-bold px-6  rounded-full shadow-lg transition-all active:scale-95",isLoading:l||t&&b,onClick:u,children:[e.jsx("i",{className:`fas ${t?"fa-stop-circle":"fa-play-circle"} mr-2 text-lg`}),e.jsx("span",{className:"text-sm sm:text-base",children:l?"Connecting GPS...":t?"Stop Sharing":"Start Sharing"})]})]}),e.jsxs("main",{className:"flex-1 w-full mx-auto p-4 space-y-4",children:[e.jsx(p,{className:"border-none shadow-sm rounded-xl overflow-hidden",children:e.jsxs(L,{className:"p-0",children:[e.jsx("div",{className:"bg-slate-900 p-3 text-white",children:e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest opacity-80",children:"Shipment Details"})}),e.jsxs("div",{className:"p-5 grid grid-cols-1 sm:grid-cols-2 gap-y-4 gap-x-8",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tight",children:"Vehicle Number"}),e.jsx("span",{className:"text-base font-bold text-slate-800",children:(s==null?void 0:s.vehicleNumber)||"—"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tight",children:"Vehicle Type"}),e.jsx("span",{className:"text-base font-bold text-slate-800 capitalize",children:(s==null?void 0:s.vehicleType)||"—"})]}),e.jsxs("div",{className:"flex flex-col border-t border-slate-100 sm:border-none pt-3 sm:pt-0",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tight",children:"Driver Name"}),e.jsx("span",{className:"text-base font-bold text-slate-800",children:((c=s==null?void 0:s.driver)==null?void 0:c.name)||"—"})]}),e.jsxs("div",{className:"flex flex-col border-t border-slate-100 sm:border-none pt-3 sm:pt-0",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tight",children:"Driver Phone"}),e.jsx("span",{className:"text-base font-bold text-slate-800",children:((o=s==null?void 0:s.driver)==null?void 0:o.phone)||"—"})]})]})]})}),e.jsxs(p,{className:"border-none shadow-xl rounded-2xl overflow-hidden h-[450px] sm:h-[600px] relative",children:[e.jsx(y,{shipment:a,currentLocation:a.currentLocation,locationHistory:a.locationHistory||[]}),e.jsx("div",{className:"absolute top-4 right-4 z-[1000]",children:e.jsxs("div",{className:`px-3 py-1.5 rounded-full backdrop-blur-md border flex items-center gap-2 ${t?"bg-green-50/90 border-green-200 text-green-700":"bg-white/90 border-slate-200 text-slate-600"}`,children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${t?"bg-green-500 animate-pulse":"bg-slate-300"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t?"GPS Active":"GPS Inactive"})]})})]}),e.jsxs("div",{className:"p-4 bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tight",children:"Delivery To"}),e.jsx("p",{className:"text-sm font-medium text-slate-700",children:((d=a.destination)==null?void 0:d.address)||"Location not set"})]})]}),e.jsx("footer",{className:"p-6 text-center",children:e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-[0.2em]",children:"Powered by House of Ram"})})]})};export{E as default};
