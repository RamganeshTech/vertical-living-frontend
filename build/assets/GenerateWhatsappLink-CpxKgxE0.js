import{r as l,j as t,I as w,B as i,t as r}from"./index-JxDlpqED.js";const v=({projectId:h,context:f,label:m,generateLink:u,isPending:c,data:n})=>{const[s,o]=l.useState(""),[d,p]=l.useState(!1);l.useEffect(()=>{typeof n=="string"&&o(n)},[n]);const b=async()=>{try{await navigator.clipboard.writeText(s),p(!0),setTimeout(()=>p(!1),1500)}catch{r({title:"Error",description:"Failed to copy link",variant:"destructive"})}},g=()=>{const a=encodeURIComponent(`Hey, please check this ${f} link:\`${s}`);window.open(`https://wa.me/?text=${a}`,"_blank")},k=async()=>{var a,x;try{const e=await u({projectId:h});e!=null&&e.shareableUrl&&(o(e.shareableUrl),r({title:"Link generated",description:"You can now share the link",variant:"default"}))}catch(e){r({title:"Error",description:((x=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:x.message)||(e==null?void 0:e.message)||"Failed to generate link",variant:"destructive"})}};return t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 shadow-sm w-full max-w-xl",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[t.jsx("i",{className:"fas fa-link"})," ",m||"Generate Shareable Link"]})}),s?t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[t.jsx(w,{readOnly:!0,value:s,className:"flex-1 text-sm cursor-default"}),t.jsxs(i,{onClick:b,variant:"outline",className:"flex gap-2",children:[t.jsx("i",{className:`fas ${d?"fa-check-circle":"fa-copy"}`}),d?"Copied":"Copy"]}),t.jsxs(i,{onClick:g,className:"bg-green-500 hover:bg-green-600 text-white flex gap-2",children:[t.jsx("i",{className:"fab fa-whatsapp"}),"Share"]})]}):t.jsx(i,{onClick:k,disabled:c,className:"bg-blue-600 hover:bg-blue-700 text-white",children:c?"Generating...":"Generate Link"})]})};export{v as G};
