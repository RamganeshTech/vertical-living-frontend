import{a as j,r as p,c as L,j as o,O as C,a2 as E,a3 as M}from"./index-By5P0A7l.js";import{M as z,S as h}from"./MobileSidebar-DM9GUuDu.js";import"./CTOApi-BAYv2JE1.js";import"./useMutation-7YLqc7VE.js";import"./clientApi-CkTT7T0B.js";import"./staffApi-I818liCO.js";import"./userApi-BwcMcx4P.js";import"./workerApi-DlTONNdO.js";import"./Button-DLUK8O0t.js";import"./toast-BSC5QTk1.js";import"./currentActiveStageApi-_FTPeAr6.js";import"./useQuery-Cc7pLKfK.js";import"./roleCheck-YGaMnK_P.js";import"./notificationApi-BZWUzyjQ.js";import"./useInfiniteQuery-DQF0m-E9.js";import"./issueDiscussionApi-eVzs4Q5x.js";const b={HR:"hr",LOGISTICS:"logistics",PROCUREMENT:"procurement",SHORTLIST:"referencedesign",DESIGNLAB:"design",CAD:"cad",COMMONORDER:"commonorder",TOOLMANAGEMENT:"toolmanagement",ACCOUNTING:["accounts","billing","payments","vendor","customer","invoice","expense","billtemplate","purchaseorder","vendorpayment","salesorder","retailinvoice"],RATECONIG:"materialquote",RATECONIGSTAFF:"materialquote",WORKTEMPLATE:"materialquote",INTERNALQUOTE:"materialquote",QUOTEVARIENT:"materialquote","QUOTES (CLIENT)":"materialquote",SUBCONTRACT:"subcontract",STAFFTASK:"stafftask",SINGLESTAFFTASK:"stafftask",WORKLIBRARY:"stafftask",MATERIALINVENTORY:"productinventory"},_=({projectId:N,setProjectId:f})=>{const{organizationId:e}=j(),[R,l]=p.useState(!1),[S,u]=p.useState(window.innerWidth<470),{role:T,permission:A}=L(),s=(T==null?void 0:T.toLowerCase())||"",m={PROJECTS:`/organizations/${e}/projects`,ORGANIZATION:`/organizations/${e}`,SHORTLIST:`/organizations/${e}/projects/shortlistdesign`,COMMONORDER:`/organizations/${e}/projects/commonorder`,SUBCONTRACT:`/organizations/${e}/projects/subcontractmain`,TOOLMANAGEMENT:`/organizations/${e}/projects/toolhub`,CAD:`/organizations/${e}/projects/cadmain`,HR:`/organizations/${e}/projects/hr`,LOGISTICS:`/organizations/${e}/projects/logistics`,PROCUREMENT:`/organizations/${e}/projects/procurement`,ACCOUNTING:`/organizations/${e}/projects/accounting`,DESIGNLAB:`/organizations/${e}/projects/designlabmain`,RATECONIG:`/organizations/${e}/projects/rateconfig`,RATECONIGSTAFF:`/organizations/${e}/projects/labourrateconfig`,WORKTEMPLATE:`/organizations/${e}/projects/worktemplates`,INTERNALQUOTE:`/organizations/${e}/projects/internalquote`,QUOTEVARIENT:`/organizations/${e}/projects/quotevariant`,"QUOTES (CLIENT)":`/organizations/${e}/projects/clientquotes`,WORKLIBRARY:`/organizations/${e}/projects/worklibrary`,STAFFTASK:`/organizations/${e}/projects/stafftask`,SINGLESTAFFTASK:`/organizations/${e}/projects/associatedstafftask`,MATERIALINVENTORY:`/organizations/${e}/projects/materialinventory`},i=Object.keys(E);let a=[];s==="owner"||s==="cto"?a=i.filter(t=>t!=="SINGLESTAFFTASK"):s==="staff"?a=i.filter(t=>t!=="STAFFTASK"&&t!=="WORKLIBRARY"):s==="worker"?a=i.filter(t=>t!=="STAFFTASK"&&t!=="WORKLIBRARY"):s==="client"?a=i.filter(t=>t!=="STAFFTASK"&&t!=="WORKLIBRARY"):a=["PROJECTS","ORGANIZATION"];let r={},O={},n={};return a.forEach(t=>{E[t]&&m[t]&&(r[t]=E[t],O[t]=M[t],n[t]=m[t])}),s!=="owner"&&Object.keys(r).forEach(t=>{const c=b[t];t==="CAD"||t==="TOOLMANAGEMENT"||t==="WORKTEMPLATES"||c&&((Array.isArray(c)?c:[c]).some(d=>{const I=A==null?void 0:A[d];return I&&Object.values(I).some(g=>g===!0)})||(delete r[t],delete O[t],delete n[t]))}),p.useEffect(()=>{const t=()=>{u(window.innerWidth<470)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex w-full h-full",children:[S?o.jsx(z,{labels:r,path:n,isOpen:R,onClose:()=>l(!1)}):o.jsx(h,{path:n,labels:r,icons:O}),o.jsx("main",{className:"!w-[100%] h-full p-4",children:o.jsx(C,{context:{projectId:N,setProjectId:f,organizationId:e,isMobile:S,isMobileSidebarOpen:R,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})})};export{_ as default};
