import{f as a,h as d,s as u,b as g,i as s}from"./index-BAM0eJUz.js";import{u as m}from"./useInfiniteQuery-BGz0VllC.js";const y=async({payload:e,api:n})=>{const t=new FormData,{files:r,phone:i,shopImages:l,location:p,...h}=e;Object.entries(h).forEach(([c,f])=>{f!=null&&t.append(c,String(f))}),i&&t.append("phone",JSON.stringify(i)),p&&t.append("location",JSON.stringify(p)),r&&r.length>0&&r.forEach(c=>{t.append("files",c)}),l&&l.length>0&&l.forEach(c=>{t.append("shopImages",c)});const{data:w}=await n.post("/department/accounting/vendor/createvendor",t,{headers:{"Content-Type":"multipart/form-data"}});if(!w.ok)throw new Error(w.message);return w.data},v=async({params:e,api:n})=>{const{data:t}=await n.get("/department/accounting/vendor/getallvendor",{params:e});if(!t.ok)throw new Error(t.message);return t},E=async({VendorId:e,api:n})=>{const{data:t}=await n.get(`/department/accounting/vendor/singlevendor/${e}`);if(!t.ok)throw new Error(t.message);return t.data},P=async({organizationId:e,priority:n,api:t})=>{const{data:r}=await t.get(`/department/accounting/vendor/getallvendorname/${e}`,{params:{priority:n}});if(!r.ok)throw new Error(r.message);return r.data},I=async({vendorId:e,payload:n,api:t})=>{const{data:r}=await t.put(`/department/accounting/vendor/updatevendor/${e}`,n);if(!r.ok)throw new Error(r.message);return r.data},A=async({api:e,formData:n,id:t})=>(await e.put(`/department/accounting/vendor/updatevendor/${t}/document`,n,{headers:{"Content-Type":"multipart/form-data"}})).data,k=async({api:e,formData:n,id:t})=>(await e.put(`/department/accounting/vendor/updatevendor/${t}/shopimages`,n,{headers:{"Content-Type":"multipart/form-data"}})).data,V=async({VendorId:e,api:n})=>{const{data:t}=await n.delete(`/department/accounting/vendor/deletevendor/${e}`);if(!t.ok)throw new Error(t.message)},o=["owner","staff","CTO"],N=()=>{const{role:e}=a(),n=s(e);return d({mutationFn:async t=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await y({payload:t,api:n})},onSuccess:(t,r)=>{u.invalidateQueries({queryKey:["vendors","list",r.organizationId]})}})},q=e=>{const{role:n}=a(),t=s(n);return m({queryKey:["vendors","list",e.organizationId,e.search,e.sortBy,e.sortOrder,e.createdFromDate,e.createdToDate],queryFn:async({pageParam:r=1})=>{if(!n||!o.includes(n))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await v({params:{...e,page:r},api:t})},getNextPageParam:r=>{if(r.pagination.hasNextPage)return r.pagination.currentPage+1},getPreviousPageParam:r=>{if(r.pagination.hasPrevPage)return r.pagination.currentPage-1},initialPageParam:1,enabled:!!n&&o.includes(n)&&!!e.organizationId})},S=(e,n=!0)=>{const{role:t}=a(),r=s(t);return g({queryKey:["vendors","single",e],queryFn:async()=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await E({VendorId:e,api:r})},enabled:n&&!!t&&o.includes(t)&&!!e})},C=(e,n=!0,t)=>{const{role:r}=a(),i=s(r);return g({queryKey:["allvendorsname",e,t],queryFn:async()=>{if(!r||!o.includes(r))throw new Error("Not allowed to make this API call");if(!i)throw new Error("API instance not found for role");return await P({organizationId:e,priority:t,api:i})},enabled:n&&!!r&&o.includes(r)&&!!e})},K=()=>{const{role:e}=a(),n=s(e);return d({mutationFn:async({vendorId:t,payload:r})=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await I({vendorId:t,payload:r,api:n})},onSuccess:t=>{u.invalidateQueries({queryKey:["vendors","single",t.vendorId]}),u.invalidateQueries({queryKey:["vendors","list"]})}})},O=()=>{const{role:e}=a(),n=s(e);return d({mutationFn:async({id:t,formData:r})=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await A({id:t,formData:r,api:n})}})},b=()=>{const{role:e}=a(),n=s(e);return d({mutationFn:async({id:t,formData:r})=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await k({id:t,formData:r,api:n})}})},Q=()=>{const{role:e}=a(),n=s(e);return d({mutationFn:async t=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await V({VendorId:t,api:n})},onSuccess:()=>{u.invalidateQueries({queryKey:["vendors","list"]})}})};export{q as a,Q as b,S as c,K as d,O as e,b as f,N as g,C as u};
