var kg=t=>{throw TypeError(t)};var im=(t,a,r)=>a.has(t)||kg("Cannot "+r);var I=(t,a,r)=>(im(t,a,"read from private field"),r?r.call(t):a.get(t)),ke=(t,a,r)=>a.has(t)?kg("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(t):a.set(t,r),ve=(t,a,r,l)=>(im(t,a,"write to private field"),l?l.call(t,r):a.set(t,r),r),ze=(t,a,r)=>(im(t,a,"access private method"),r);var Qo=(t,a,r,l)=>({set _(o){ve(t,a,o,r)},get _(){return I(t,a,l)}});(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function r(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(o){if(o.ep)return;o.ep=!0;const d=r(o);fetch(o.href,d)}})();function Sj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var om={exports:{}},si={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function Cj(){if(Eg)return si;Eg=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(l,o,d){var m=null;if(d!==void 0&&(m=""+d),o.key!==void 0&&(m=""+o.key),"key"in o){d={};for(var x in o)x!=="key"&&(d[x]=o[x])}else d=o;return o=d.ref,{$$typeof:t,type:l,key:m,ref:o!==void 0?o:null,props:d}}return si.Fragment=a,si.jsx=r,si.jsxs=r,si}var Ag;function kj(){return Ag||(Ag=1,om.exports=Cj()),om.exports}var e=kj(),cm={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function Ej(){if(Og)return De;Og=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function j(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,k={};function w(R,z,M){this.props=R,this.context=z,this.refs=k,this.updater=M||E}w.prototype.isReactComponent={},w.prototype.setState=function(R,z){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,z,"setState")},w.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function C(){}C.prototype=w.prototype;function v(R,z,M){this.props=R,this.context=z,this.refs=k,this.updater=M||E}var N=v.prototype=new C;N.constructor=v,b(N,w.prototype),N.isPureReactComponent=!0;var T=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function $(R,z,M,G,Y,ge){return M=ge.ref,{$$typeof:t,type:R,key:z,ref:M!==void 0?M:null,props:ge}}function q(R,z){return $(R.type,z,void 0,void 0,void 0,R.props)}function H(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function he(R){var z={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(M){return z[M]})}var K=/\/+/g;function B(R,z){return typeof R=="object"&&R!==null&&R.key!=null?he(""+R.key):z.toString(36)}function te(){}function V(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(te,te):(R.status="pending",R.then(function(z){R.status==="pending"&&(R.status="fulfilled",R.value=z)},function(z){R.status==="pending"&&(R.status="rejected",R.reason=z)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function oe(R,z,M,G,Y){var ge=typeof R;(ge==="undefined"||ge==="boolean")&&(R=null);var se=!1;if(R===null)se=!0;else switch(ge){case"bigint":case"string":case"number":se=!0;break;case"object":switch(R.$$typeof){case t:case a:se=!0;break;case g:return se=R._init,oe(se(R._payload),z,M,G,Y)}}if(se)return Y=Y(R),se=G===""?"."+B(R,0):G,T(Y)?(M="",se!=null&&(M=se.replace(K,"$&/")+"/"),oe(Y,z,M,"",function(Ke){return Ke})):Y!=null&&(H(Y)&&(Y=q(Y,M+(Y.key==null||R&&R.key===Y.key?"":(""+Y.key).replace(K,"$&/")+"/")+se)),z.push(Y)),1;se=0;var Ne=G===""?".":G+":";if(T(R))for(var be=0;be<R.length;be++)G=R[be],ge=Ne+B(G,be),se+=oe(G,z,M,ge,Y);else if(be=j(R),typeof be=="function")for(R=be.call(R),be=0;!(G=R.next()).done;)G=G.value,ge=Ne+B(G,be++),se+=oe(G,z,M,ge,Y);else if(ge==="object"){if(typeof R.then=="function")return oe(V(R),z,M,G,Y);throw z=String(R),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return se}function F(R,z,M){if(R==null)return R;var G=[],Y=0;return oe(R,G,"","",function(ge){return z.call(M,ge,Y++)}),G}function W(R){if(R._status===-1){var z=R._result;z=z(),z.then(function(M){(R._status===0||R._status===-1)&&(R._status=1,R._result=M)},function(M){(R._status===0||R._status===-1)&&(R._status=2,R._result=M)}),R._status===-1&&(R._status=0,R._result=z)}if(R._status===1)return R._result.default;throw R._result}var ue=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function re(){}return De.Children={map:F,forEach:function(R,z,M){F(R,function(){z.apply(this,arguments)},M)},count:function(R){var z=0;return F(R,function(){z++}),z},toArray:function(R){return F(R,function(z){return z})||[]},only:function(R){if(!H(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},De.Component=w,De.Fragment=r,De.Profiler=o,De.PureComponent=v,De.StrictMode=l,De.Suspense=h,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,De.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},De.cache=function(R){return function(){return R.apply(null,arguments)}},De.cloneElement=function(R,z,M){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var G=b({},R.props),Y=R.key,ge=void 0;if(z!=null)for(se in z.ref!==void 0&&(ge=void 0),z.key!==void 0&&(Y=""+z.key),z)!D.call(z,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&z.ref===void 0||(G[se]=z[se]);var se=arguments.length-2;if(se===1)G.children=M;else if(1<se){for(var Ne=Array(se),be=0;be<se;be++)Ne[be]=arguments[be+2];G.children=Ne}return $(R.type,Y,void 0,void 0,ge,G)},De.createContext=function(R){return R={$$typeof:m,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:d,_context:R},R},De.createElement=function(R,z,M){var G,Y={},ge=null;if(z!=null)for(G in z.key!==void 0&&(ge=""+z.key),z)D.call(z,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(Y[G]=z[G]);var se=arguments.length-2;if(se===1)Y.children=M;else if(1<se){for(var Ne=Array(se),be=0;be<se;be++)Ne[be]=arguments[be+2];Y.children=Ne}if(R&&R.defaultProps)for(G in se=R.defaultProps,se)Y[G]===void 0&&(Y[G]=se[G]);return $(R,ge,void 0,void 0,null,Y)},De.createRef=function(){return{current:null}},De.forwardRef=function(R){return{$$typeof:x,render:R}},De.isValidElement=H,De.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:W}},De.memo=function(R,z){return{$$typeof:p,type:R,compare:z===void 0?null:z}},De.startTransition=function(R){var z=P.T,M={};P.T=M;try{var G=R(),Y=P.S;Y!==null&&Y(M,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(re,ue)}catch(ge){ue(ge)}finally{P.T=z}},De.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},De.use=function(R){return P.H.use(R)},De.useActionState=function(R,z,M){return P.H.useActionState(R,z,M)},De.useCallback=function(R,z){return P.H.useCallback(R,z)},De.useContext=function(R){return P.H.useContext(R)},De.useDebugValue=function(){},De.useDeferredValue=function(R,z){return P.H.useDeferredValue(R,z)},De.useEffect=function(R,z,M){var G=P.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(R,z)},De.useId=function(){return P.H.useId()},De.useImperativeHandle=function(R,z,M){return P.H.useImperativeHandle(R,z,M)},De.useInsertionEffect=function(R,z){return P.H.useInsertionEffect(R,z)},De.useLayoutEffect=function(R,z){return P.H.useLayoutEffect(R,z)},De.useMemo=function(R,z){return P.H.useMemo(R,z)},De.useOptimistic=function(R,z){return P.H.useOptimistic(R,z)},De.useReducer=function(R,z,M){return P.H.useReducer(R,z,M)},De.useRef=function(R){return P.H.useRef(R)},De.useState=function(R){return P.H.useState(R)},De.useSyncExternalStore=function(R,z,M){return P.H.useSyncExternalStore(R,z,M)},De.useTransition=function(){return P.H.useTransition()},De.version="19.1.0",De}var Rg;function Cc(){return Rg||(Rg=1,cm.exports=Ej()),cm.exports}var A=Cc();const ct=Sj(A);var dm={exports:{}},ai={},um={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg;function Aj(){return Tg||(Tg=1,function(t){function a(F,W){var ue=F.length;F.push(W);e:for(;0<ue;){var re=ue-1>>>1,R=F[re];if(0<o(R,W))F[re]=W,F[ue]=R,ue=re;else break e}}function r(F){return F.length===0?null:F[0]}function l(F){if(F.length===0)return null;var W=F[0],ue=F.pop();if(ue!==W){F[0]=ue;e:for(var re=0,R=F.length,z=R>>>1;re<z;){var M=2*(re+1)-1,G=F[M],Y=M+1,ge=F[Y];if(0>o(G,ue))Y<R&&0>o(ge,G)?(F[re]=ge,F[Y]=ue,re=Y):(F[re]=G,F[M]=ue,re=M);else if(Y<R&&0>o(ge,ue))F[re]=ge,F[Y]=ue,re=Y;else break e}}return W}function o(F,W){var ue=F.sortIndex-W.sortIndex;return ue!==0?ue:F.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var m=Date,x=m.now();t.unstable_now=function(){return m.now()-x}}var h=[],p=[],g=1,y=null,j=3,E=!1,b=!1,k=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function T(F){for(var W=r(p);W!==null;){if(W.callback===null)l(p);else if(W.startTime<=F)l(p),W.sortIndex=W.expirationTime,a(h,W);else break;W=r(p)}}function P(F){if(k=!1,T(F),!b)if(r(h)!==null)b=!0,D||(D=!0,B());else{var W=r(p);W!==null&&oe(P,W.startTime-F)}}var D=!1,$=-1,q=5,H=-1;function he(){return w?!0:!(t.unstable_now()-H<q)}function K(){if(w=!1,D){var F=t.unstable_now();H=F;var W=!0;try{e:{b=!1,k&&(k=!1,v($),$=-1),E=!0;var ue=j;try{t:{for(T(F),y=r(h);y!==null&&!(y.expirationTime>F&&he());){var re=y.callback;if(typeof re=="function"){y.callback=null,j=y.priorityLevel;var R=re(y.expirationTime<=F);if(F=t.unstable_now(),typeof R=="function"){y.callback=R,T(F),W=!0;break t}y===r(h)&&l(h),T(F)}else l(h);y=r(h)}if(y!==null)W=!0;else{var z=r(p);z!==null&&oe(P,z.startTime-F),W=!1}}break e}finally{y=null,j=ue,E=!1}W=void 0}}finally{W?B():D=!1}}}var B;if(typeof N=="function")B=function(){N(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,V=te.port2;te.port1.onmessage=K,B=function(){V.postMessage(null)}}else B=function(){C(K,0)};function oe(F,W){$=C(function(){F(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_next=function(F){switch(j){case 1:case 2:case 3:var W=3;break;default:W=j}var ue=j;j=W;try{return F()}finally{j=ue}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ue=j;j=F;try{return W()}finally{j=ue}},t.unstable_scheduleCallback=function(F,W,ue){var re=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?re+ue:re):ue=re,F){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ue+R,F={id:g++,callback:W,priorityLevel:F,startTime:ue,expirationTime:R,sortIndex:-1},ue>re?(F.sortIndex=ue,a(p,F),r(h)===null&&F===r(p)&&(k?(v($),$=-1):k=!0,oe(P,ue-re))):(F.sortIndex=R,a(h,F),b||E||(b=!0,D||(D=!0,B()))),F},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(F){var W=j;return function(){var ue=j;j=W;try{return F.apply(this,arguments)}finally{j=ue}}}}(mm)),mm}var Pg;function Oj(){return Pg||(Pg=1,um.exports=Aj()),um.exports}var fm={exports:{}},Dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function Rj(){if(Mg)return Dt;Mg=1;var t=Cc();function a(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(h,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:h,containerInfo:p,implementation:g}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Dt.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(h,p,null,g)},Dt.flushSync=function(h){var p=m.T,g=l.p;try{if(m.T=null,l.p=2,h)return h()}finally{m.T=p,l.p=g,l.d.f()}},Dt.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(h,p))},Dt.prefetchDNS=function(h){typeof h=="string"&&l.d.D(h)},Dt.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,y=x(g,p.crossOrigin),j=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?l.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:j,fetchPriority:E}):g==="script"&&l.d.X(h,{crossOrigin:y,integrity:j,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Dt.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=x(p.as,p.crossOrigin);l.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(h)},Dt.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=x(g,p.crossOrigin);l.d.L(h,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Dt.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=x(p.as,p.crossOrigin);l.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(h)},Dt.requestFormReset=function(h){l.d.r(h)},Dt.unstable_batchedUpdates=function(h,p){return h(p)},Dt.useFormState=function(h,p,g){return m.H.useFormState(h,p,g)},Dt.useFormStatus=function(){return m.H.useHostTransitionStatus()},Dt.version="19.1.0",Dt}var Lg;function Tj(){if(Lg)return fm.exports;Lg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),fm.exports=Rj(),fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function Pj(){if(_g)return ai;_g=1;var t=Oj(),a=Cc(),r=Tj();function l(s){var n="https://react.dev/errors/"+s;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+s+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var n=s,i=s;if(s.alternate)for(;n.return;)n=n.return;else{s=n;do n=s,(n.flags&4098)!==0&&(i=n.return),s=n.return;while(s)}return n.tag===3?i:null}function m(s){if(s.tag===13){var n=s.memoizedState;if(n===null&&(s=s.alternate,s!==null&&(n=s.memoizedState)),n!==null)return n.dehydrated}return null}function x(s){if(d(s)!==s)throw Error(l(188))}function h(s){var n=s.alternate;if(!n){if(n=d(s),n===null)throw Error(l(188));return n!==s?null:s}for(var i=s,c=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(c=u.return,c!==null){i=c;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return x(u),s;if(f===c)return x(u),n;f=f.sibling}throw Error(l(188))}if(i.return!==c.return)i=u,c=f;else{for(var S=!1,O=u.child;O;){if(O===i){S=!0,i=u,c=f;break}if(O===c){S=!0,c=u,i=f;break}O=O.sibling}if(!S){for(O=f.child;O;){if(O===i){S=!0,i=f,c=u;break}if(O===c){S=!0,c=f,i=u;break}O=O.sibling}if(!S)throw Error(l(189))}}if(i.alternate!==c)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?s:n}function p(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s;for(s=s.child;s!==null;){if(n=p(s),n!==null)return n;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var te=Symbol.for("react.client.reference");function V(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===te?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case w:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case N:return(s.displayName||"Context")+".Provider";case v:return(s._context.displayName||"Context")+".Consumer";case T:var n=s.render;return s=s.displayName,s||(s=n.displayName||n.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return n=s.displayName||null,n!==null?n:V(s.type)||"Memo";case q:n=s._payload,s=s._init;try{return V(s(n))}catch{}}return null}var oe=Array.isArray,F=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},re=[],R=-1;function z(s){return{current:s}}function M(s){0>R||(s.current=re[R],re[R]=null,R--)}function G(s,n){R++,re[R]=s.current,s.current=n}var Y=z(null),ge=z(null),se=z(null),Ne=z(null);function be(s,n){switch(G(se,n),G(ge,s),G(Y,null),n.nodeType){case 9:case 11:s=(s=n.documentElement)&&(s=s.namespaceURI)?eg(s):0;break;default:if(s=n.tagName,n=n.namespaceURI)n=eg(n),s=tg(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}M(Y),G(Y,s)}function Ke(){M(Y),M(ge),M(se)}function Gc(s){s.memoizedState!==null&&G(Ne,s);var n=Y.current,i=tg(n,s.type);n!==i&&(G(ge,s),G(Y,i))}function Oi(s){ge.current===s&&(M(Y),M(ge)),Ne.current===s&&(M(Ne),Xl._currentValue=ue)}var Kc=Object.prototype.hasOwnProperty,Vc=t.unstable_scheduleCallback,Yc=t.unstable_cancelCallback,sw=t.unstable_shouldYield,aw=t.unstable_requestPaint,Qs=t.unstable_now,nw=t.unstable_getCurrentPriorityLevel,Lf=t.unstable_ImmediatePriority,_f=t.unstable_UserBlockingPriority,Ri=t.unstable_NormalPriority,rw=t.unstable_LowPriority,Ff=t.unstable_IdlePriority,lw=t.log,iw=t.unstable_setDisableYieldValue,rl=null,ls=null;function Oa(s){if(typeof lw=="function"&&iw(s),ls&&typeof ls.setStrictMode=="function")try{ls.setStrictMode(rl,s)}catch{}}var is=Math.clz32?Math.clz32:dw,ow=Math.log,cw=Math.LN2;function dw(s){return s>>>=0,s===0?32:31-(ow(s)/cw|0)|0}var Ti=256,Pi=4194304;function pn(s){var n=s&42;if(n!==0)return n;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Mi(s,n,i){var c=s.pendingLanes;if(c===0)return 0;var u=0,f=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var O=c&134217727;return O!==0?(c=O&~f,c!==0?u=pn(c):(S&=O,S!==0?u=pn(S):i||(i=O&~s,i!==0&&(u=pn(i))))):(O=c&~f,O!==0?u=pn(O):S!==0?u=pn(S):i||(i=c&~s,i!==0&&(u=pn(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function ll(s,n){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&n)===0}function uw(s,n){switch(s){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Df(){var s=Ti;return Ti<<=1,(Ti&4194048)===0&&(Ti=256),s}function qf(){var s=Pi;return Pi<<=1,(Pi&62914560)===0&&(Pi=4194304),s}function Wc(s){for(var n=[],i=0;31>i;i++)n.push(s);return n}function il(s,n){s.pendingLanes|=n,n!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function mw(s,n,i,c,u,f){var S=s.pendingLanes;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=i,s.entangledLanes&=i,s.errorRecoveryDisabledLanes&=i,s.shellSuspendCounter=0;var O=s.entanglements,U=s.expirationTimes,ae=s.hiddenUpdates;for(i=S&~i;0<i;){var fe=31-is(i),pe=1<<fe;O[fe]=0,U[fe]=-1;var ne=ae[fe];if(ne!==null)for(ae[fe]=null,fe=0;fe<ne.length;fe++){var le=ne[fe];le!==null&&(le.lane&=-536870913)}i&=~pe}c!==0&&zf(s,c,0),f!==0&&u===0&&s.tag!==0&&(s.suspendedLanes|=f&~(S&~n))}function zf(s,n,i){s.pendingLanes|=n,s.suspendedLanes&=~n;var c=31-is(n);s.entangledLanes|=n,s.entanglements[c]=s.entanglements[c]|1073741824|i&4194090}function Uf(s,n){var i=s.entangledLanes|=n;for(s=s.entanglements;i;){var c=31-is(i),u=1<<c;u&n|s[c]&n&&(s[c]|=n),i&=~u}}function Xc(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Zc(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $f(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:wg(s.type))}function fw(s,n){var i=W.p;try{return W.p=s,n()}finally{W.p=i}}var Ra=Math.random().toString(36).slice(2),_t="__reactFiber$"+Ra,Yt="__reactProps$"+Ra,Wn="__reactContainer$"+Ra,Jc="__reactEvents$"+Ra,hw="__reactListeners$"+Ra,xw="__reactHandles$"+Ra,If="__reactResources$"+Ra,ol="__reactMarker$"+Ra;function ed(s){delete s[_t],delete s[Yt],delete s[Jc],delete s[hw],delete s[xw]}function Xn(s){var n=s[_t];if(n)return n;for(var i=s.parentNode;i;){if(n=i[Wn]||i[_t]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(s=rg(s);s!==null;){if(i=s[_t])return i;s=rg(s)}return n}s=i,i=s.parentNode}return null}function Zn(s){if(s=s[_t]||s[Wn]){var n=s.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return s}return null}function cl(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s.stateNode;throw Error(l(33))}function Jn(s){var n=s[If];return n||(n=s[If]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function kt(s){s[ol]=!0}var Bf=new Set,Hf={};function gn(s,n){er(s,n),er(s+"Capture",n)}function er(s,n){for(Hf[s]=n,s=0;s<n.length;s++)Bf.add(n[s])}var pw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qf={},Gf={};function gw(s){return Kc.call(Gf,s)?!0:Kc.call(Qf,s)?!1:pw.test(s)?Gf[s]=!0:(Qf[s]=!0,!1)}function Li(s,n,i){if(gw(n))if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":s.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(n);return}}s.setAttribute(n,""+i)}}function _i(s,n,i){if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(n);return}s.setAttribute(n,""+i)}}function na(s,n,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttributeNS(n,i,""+c)}}var td,Kf;function tr(s){if(td===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);td=n&&n[1]||"",Kf=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+td+s+Kf}var sd=!1;function ad(s,n){if(!s||sd)return"";sd=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var ne=le}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(le){ne=le}s.call(pe.prototype)}}else{try{throw Error()}catch(le){ne=le}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),S=f[0],O=f[1];if(S&&O){var U=S.split(`
`),ae=O.split(`
`);for(u=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;u<ae.length&&!ae[u].includes("DetermineComponentFrameRoot");)u++;if(c===U.length||u===ae.length)for(c=U.length-1,u=ae.length-1;1<=c&&0<=u&&U[c]!==ae[u];)u--;for(;1<=c&&0<=u;c--,u--)if(U[c]!==ae[u]){if(c!==1||u!==1)do if(c--,u--,0>u||U[c]!==ae[u]){var fe=`
`+U[c].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=c&&0<=u);break}}}finally{sd=!1,Error.prepareStackTrace=i}return(i=s?s.displayName||s.name:"")?tr(i):""}function bw(s){switch(s.tag){case 26:case 27:case 5:return tr(s.type);case 16:return tr("Lazy");case 13:return tr("Suspense");case 19:return tr("SuspenseList");case 0:case 15:return ad(s.type,!1);case 11:return ad(s.type.render,!1);case 1:return ad(s.type,!0);case 31:return tr("Activity");default:return""}}function Vf(s){try{var n="";do n+=bw(s),s=s.return;while(s);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function vs(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Yf(s){var n=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function yw(s){var n=Yf(s)?"checked":"value",i=Object.getOwnPropertyDescriptor(s.constructor.prototype,n),c=""+s[n];if(!s.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(s,n,{configurable:!0,get:function(){return u.call(this)},set:function(S){c=""+S,f.call(this,S)}}),Object.defineProperty(s,n,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){s._valueTracker=null,delete s[n]}}}}function Fi(s){s._valueTracker||(s._valueTracker=yw(s))}function Wf(s){if(!s)return!1;var n=s._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return s&&(c=Yf(s)?s.checked?"true":"false":s.value),s=c,s!==i?(n.setValue(s),!0):!1}function Di(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ww=/[\n"\\]/g;function js(s){return s.replace(ww,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function nd(s,n,i,c,u,f,S,O){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),n!=null?S==="number"?(n===0&&s.value===""||s.value!=n)&&(s.value=""+vs(n)):s.value!==""+vs(n)&&(s.value=""+vs(n)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),n!=null?rd(s,S,vs(n)):i!=null?rd(s,S,vs(i)):c!=null&&s.removeAttribute("value"),u==null&&f!=null&&(s.defaultChecked=!!f),u!=null&&(s.checked=u&&typeof u!="function"&&typeof u!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+vs(O):s.removeAttribute("name")}function Xf(s,n,i,c,u,f,S,O){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(s.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;i=i!=null?""+vs(i):"",n=n!=null?""+vs(n):i,O||n===s.value||(s.value=n),s.defaultValue=n}c=c??u,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=O?s.checked:!!c,s.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function rd(s,n,i){n==="number"&&Di(s.ownerDocument)===s||s.defaultValue===""+i||(s.defaultValue=""+i)}function sr(s,n,i,c){if(s=s.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<s.length;i++)u=n.hasOwnProperty("$"+s[i].value),s[i].selected!==u&&(s[i].selected=u),u&&c&&(s[i].defaultSelected=!0)}else{for(i=""+vs(i),n=null,u=0;u<s.length;u++){if(s[u].value===i){s[u].selected=!0,c&&(s[u].defaultSelected=!0);return}n!==null||s[u].disabled||(n=s[u])}n!==null&&(n.selected=!0)}}function Zf(s,n,i){if(n!=null&&(n=""+vs(n),n!==s.value&&(s.value=n),i==null)){s.defaultValue!==n&&(s.defaultValue=n);return}s.defaultValue=i!=null?""+vs(i):""}function Jf(s,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(l(92));if(oe(c)){if(1<c.length)throw Error(l(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=vs(n),s.defaultValue=i,c=s.textContent,c===i&&c!==""&&c!==null&&(s.value=c)}function ar(s,n){if(n){var i=s.firstChild;if(i&&i===s.lastChild&&i.nodeType===3){i.nodeValue=n;return}}s.textContent=n}var vw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eh(s,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?s.setProperty(n,""):n==="float"?s.cssFloat="":s[n]="":c?s.setProperty(n,i):typeof i!="number"||i===0||vw.has(n)?n==="float"?s.cssFloat=i:s[n]=(""+i).trim():s[n]=i+"px"}function th(s,n,i){if(n!=null&&typeof n!="object")throw Error(l(62));if(s=s.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var u in n)c=n[u],n.hasOwnProperty(u)&&i[u]!==c&&eh(s,u,c)}else for(var f in n)n.hasOwnProperty(f)&&eh(s,f,n[f])}function ld(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(s){return Nw.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var id=null;function od(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var nr=null,rr=null;function sh(s){var n=Zn(s);if(n&&(s=n.stateNode)){var i=s[Yt]||null;e:switch(s=n.stateNode,n.type){case"input":if(nd(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=s;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+js(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==s&&c.form===s.form){var u=c[Yt]||null;if(!u)throw Error(l(90));nd(c,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===s.form&&Wf(c)}break e;case"textarea":Zf(s,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&sr(s,!!i.multiple,n,!1)}}}var cd=!1;function ah(s,n,i){if(cd)return s(n,i);cd=!0;try{var c=s(n);return c}finally{if(cd=!1,(nr!==null||rr!==null)&&(So(),nr&&(n=nr,s=rr,rr=nr=null,sh(n),s)))for(n=0;n<s.length;n++)sh(s[n])}}function dl(s,n){var i=s.stateNode;if(i===null)return null;var c=i[Yt]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(i&&typeof i!="function")throw Error(l(231,n,typeof i));return i}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dd=!1;if(ra)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){dd=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{dd=!1}var Ta=null,ud=null,zi=null;function nh(){if(zi)return zi;var s,n=ud,i=n.length,c,u="value"in Ta?Ta.value:Ta.textContent,f=u.length;for(s=0;s<i&&n[s]===u[s];s++);var S=i-s;for(c=1;c<=S&&n[i-c]===u[f-c];c++);return zi=u.slice(s,1<c?1-c:void 0)}function Ui(s){var n=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&n===13&&(s=13)):s=n,s===10&&(s=13),32<=s||s===13?s:0}function $i(){return!0}function rh(){return!1}function Wt(s){function n(i,c,u,f,S){this._reactName=i,this._targetInst=u,this.type=c,this.nativeEvent=f,this.target=S,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(i=s[O],this[O]=i?i(f):f[O]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$i:rh,this.isPropagationStopped=rh,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),n}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=Wt(bn),ml=g({},bn,{view:0,detail:0}),Sw=Wt(ml),md,fd,fl,Bi=g({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fl&&(fl&&s.type==="mousemove"?(md=s.screenX-fl.screenX,fd=s.screenY-fl.screenY):fd=md=0,fl=s),md)},movementY:function(s){return"movementY"in s?s.movementY:fd}}),lh=Wt(Bi),Cw=g({},Bi,{dataTransfer:0}),kw=Wt(Cw),Ew=g({},ml,{relatedTarget:0}),hd=Wt(Ew),Aw=g({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ow=Wt(Aw),Rw=g({},bn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Tw=Wt(Rw),Pw=g({},bn,{data:0}),ih=Wt(Pw),Mw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_w={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fw(s){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(s):(s=_w[s])?!!n[s]:!1}function xd(){return Fw}var Dw=g({},ml,{key:function(s){if(s.key){var n=Mw[s.key]||s.key;if(n!=="Unidentified")return n}return s.type==="keypress"?(s=Ui(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Lw[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(s){return s.type==="keypress"?Ui(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ui(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),qw=Wt(Dw),zw=g({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=Wt(zw),Uw=g({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),$w=Wt(Uw),Iw=g({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bw=Wt(Iw),Hw=g({},Bi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Qw=Wt(Hw),Gw=g({},bn,{newState:0,oldState:0}),Kw=Wt(Gw),Vw=[9,13,27,32],pd=ra&&"CompositionEvent"in window,hl=null;ra&&"documentMode"in document&&(hl=document.documentMode);var Yw=ra&&"TextEvent"in window&&!hl,ch=ra&&(!pd||hl&&8<hl&&11>=hl),dh=" ",uh=!1;function mh(s,n){switch(s){case"keyup":return Vw.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var lr=!1;function Ww(s,n){switch(s){case"compositionend":return fh(n);case"keypress":return n.which!==32?null:(uh=!0,dh);case"textInput":return s=n.data,s===dh&&uh?null:s;default:return null}}function Xw(s,n){if(lr)return s==="compositionend"||!pd&&mh(s,n)?(s=nh(),zi=ud=Ta=null,lr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ch&&n.locale!=="ko"?null:n.data;default:return null}}var Zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n==="input"?!!Zw[s.type]:n==="textarea"}function xh(s,n,i,c){nr?rr?rr.push(c):rr=[c]:nr=c,n=Ro(n,"onChange"),0<n.length&&(i=new Ii("onChange","change",null,i,c),s.push({event:i,listeners:n}))}var xl=null,pl=null;function Jw(s){Yp(s,0)}function Hi(s){var n=cl(s);if(Wf(n))return s}function ph(s,n){if(s==="change")return n}var gh=!1;if(ra){var gd;if(ra){var bd="oninput"in document;if(!bd){var bh=document.createElement("div");bh.setAttribute("oninput","return;"),bd=typeof bh.oninput=="function"}gd=bd}else gd=!1;gh=gd&&(!document.documentMode||9<document.documentMode)}function yh(){xl&&(xl.detachEvent("onpropertychange",wh),pl=xl=null)}function wh(s){if(s.propertyName==="value"&&Hi(pl)){var n=[];xh(n,pl,s,od(s)),ah(Jw,n)}}function ev(s,n,i){s==="focusin"?(yh(),xl=n,pl=i,xl.attachEvent("onpropertychange",wh)):s==="focusout"&&yh()}function tv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hi(pl)}function sv(s,n){if(s==="click")return Hi(n)}function av(s,n){if(s==="input"||s==="change")return Hi(n)}function nv(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var os=typeof Object.is=="function"?Object.is:nv;function gl(s,n){if(os(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;var i=Object.keys(s),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var u=i[c];if(!Kc.call(n,u)||!os(s[u],n[u]))return!1}return!0}function vh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function jh(s,n){var i=vh(s);s=0;for(var c;i;){if(i.nodeType===3){if(c=s+i.textContent.length,s<=n&&c>=n)return{node:i,offset:n-s};s=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=vh(i)}}function Nh(s,n){return s&&n?s===n?!0:s&&s.nodeType===3?!1:n&&n.nodeType===3?Nh(s,n.parentNode):"contains"in s?s.contains(n):s.compareDocumentPosition?!!(s.compareDocumentPosition(n)&16):!1:!1}function Sh(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var n=Di(s.document);n instanceof s.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)s=n.contentWindow;else break;n=Di(s.document)}return n}function yd(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n&&(n==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||n==="textarea"||s.contentEditable==="true")}var rv=ra&&"documentMode"in document&&11>=document.documentMode,ir=null,wd=null,bl=null,vd=!1;function Ch(s,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;vd||ir==null||ir!==Di(c)||(c=ir,"selectionStart"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bl&&gl(bl,c)||(bl=c,c=Ro(wd,"onSelect"),0<c.length&&(n=new Ii("onSelect","select",null,n,i),s.push({event:n,listeners:c}),n.target=ir)))}function yn(s,n){var i={};return i[s.toLowerCase()]=n.toLowerCase(),i["Webkit"+s]="webkit"+n,i["Moz"+s]="moz"+n,i}var or={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionrun:yn("Transition","TransitionRun"),transitionstart:yn("Transition","TransitionStart"),transitioncancel:yn("Transition","TransitionCancel"),transitionend:yn("Transition","TransitionEnd")},jd={},kh={};ra&&(kh=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function wn(s){if(jd[s])return jd[s];if(!or[s])return s;var n=or[s],i;for(i in n)if(n.hasOwnProperty(i)&&i in kh)return jd[s]=n[i];return s}var Eh=wn("animationend"),Ah=wn("animationiteration"),Oh=wn("animationstart"),lv=wn("transitionrun"),iv=wn("transitionstart"),ov=wn("transitioncancel"),Rh=wn("transitionend"),Th=new Map,Nd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nd.push("scrollEnd");function _s(s,n){Th.set(s,n),gn(n,[s])}var Ph=new WeakMap;function Ns(s,n){if(typeof s=="object"&&s!==null){var i=Ph.get(s);return i!==void 0?i:(n={value:s,source:n,stack:Vf(n)},Ph.set(s,n),n)}return{value:s,source:n,stack:Vf(n)}}var Ss=[],cr=0,Sd=0;function Qi(){for(var s=cr,n=Sd=cr=0;n<s;){var i=Ss[n];Ss[n++]=null;var c=Ss[n];Ss[n++]=null;var u=Ss[n];Ss[n++]=null;var f=Ss[n];if(Ss[n++]=null,c!==null&&u!==null){var S=c.pending;S===null?u.next=u:(u.next=S.next,S.next=u),c.pending=u}f!==0&&Mh(i,u,f)}}function Gi(s,n,i,c){Ss[cr++]=s,Ss[cr++]=n,Ss[cr++]=i,Ss[cr++]=c,Sd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Cd(s,n,i,c){return Gi(s,n,i,c),Ki(s)}function dr(s,n){return Gi(s,null,null,n),Ki(s)}function Mh(s,n,i){s.lanes|=i;var c=s.alternate;c!==null&&(c.lanes|=i);for(var u=!1,f=s.return;f!==null;)f.childLanes|=i,c=f.alternate,c!==null&&(c.childLanes|=i),f.tag===22&&(s=f.stateNode,s===null||s._visibility&1||(u=!0)),s=f,f=f.return;return s.tag===3?(f=s.stateNode,u&&n!==null&&(u=31-is(i),s=f.hiddenUpdates,c=s[u],c===null?s[u]=[n]:c.push(n),n.lane=i|536870912),f):null}function Ki(s){if(50<Bl)throw Bl=0,Tu=null,Error(l(185));for(var n=s.return;n!==null;)s=n,n=s.return;return s.tag===3?s.stateNode:null}var ur={};function cv(s,n,i,c){this.tag=s,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(s,n,i,c){return new cv(s,n,i,c)}function kd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function la(s,n){var i=s.alternate;return i===null?(i=cs(s.tag,n,s.key,s.mode),i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.alternate=s,s.alternate=i):(i.pendingProps=n,i.type=s.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=s.flags&65011712,i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,n=s.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i.refCleanup=s.refCleanup,i}function Lh(s,n){s.flags&=65011714;var i=s.alternate;return i===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,n=i.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s}function Vi(s,n,i,c,u,f){var S=0;if(c=s,typeof s=="function")kd(s)&&(S=1);else if(typeof s=="string")S=uj(s,i,Y.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=cs(31,i,n,u),s.elementType=H,s.lanes=f,s;case b:return vn(i.children,u,f,n);case k:S=8,u|=24;break;case w:return s=cs(12,i,n,u|2),s.elementType=w,s.lanes=f,s;case P:return s=cs(13,i,n,u),s.elementType=P,s.lanes=f,s;case D:return s=cs(19,i,n,u),s.elementType=D,s.lanes=f,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case N:S=10;break e;case v:S=9;break e;case T:S=11;break e;case $:S=14;break e;case q:S=16,c=null;break e}S=29,i=Error(l(130,s===null?"null":typeof s,"")),c=null}return n=cs(S,i,n,u),n.elementType=s,n.type=c,n.lanes=f,n}function vn(s,n,i,c){return s=cs(7,s,c,n),s.lanes=i,s}function Ed(s,n,i){return s=cs(6,s,null,n),s.lanes=i,s}function Ad(s,n,i){return n=cs(4,s.children!==null?s.children:[],s.key,n),n.lanes=i,n.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},n}var mr=[],fr=0,Yi=null,Wi=0,Cs=[],ks=0,jn=null,ia=1,oa="";function Nn(s,n){mr[fr++]=Wi,mr[fr++]=Yi,Yi=s,Wi=n}function _h(s,n,i){Cs[ks++]=ia,Cs[ks++]=oa,Cs[ks++]=jn,jn=s;var c=ia;s=oa;var u=32-is(c)-1;c&=~(1<<u),i+=1;var f=32-is(n)+u;if(30<f){var S=u-u%5;f=(c&(1<<S)-1).toString(32),c>>=S,u-=S,ia=1<<32-is(n)+u|i<<u|c,oa=f+s}else ia=1<<f|i<<u|c,oa=s}function Od(s){s.return!==null&&(Nn(s,1),_h(s,1,0))}function Rd(s){for(;s===Yi;)Yi=mr[--fr],mr[fr]=null,Wi=mr[--fr],mr[fr]=null;for(;s===jn;)jn=Cs[--ks],Cs[ks]=null,oa=Cs[--ks],Cs[ks]=null,ia=Cs[--ks],Cs[ks]=null}var It=null,ft=null,Ye=!1,Sn=null,Gs=!1,Td=Error(l(519));function Cn(s){var n=Error(l(418,""));throw vl(Ns(n,s)),Td}function Fh(s){var n=s.stateNode,i=s.type,c=s.memoizedProps;switch(n[_t]=s,n[Yt]=c,i){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(i=0;i<Ql.length;i++)Be(Ql[i],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Be("invalid",n),Xf(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Fi(n);break;case"select":Be("invalid",n);break;case"textarea":Be("invalid",n),Jf(n,c.value,c.defaultValue,c.children),Fi(n)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||Jp(n.textContent,i)?(c.popover!=null&&(Be("beforetoggle",n),Be("toggle",n)),c.onScroll!=null&&Be("scroll",n),c.onScrollEnd!=null&&Be("scrollend",n),c.onClick!=null&&(n.onclick=To),n=!0):n=!1,n||Cn(s)}function Dh(s){for(It=s.return;It;)switch(It.tag){case 5:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:It=It.return}}function yl(s){if(s!==It)return!1;if(!Ye)return Dh(s),Ye=!0,!1;var n=s.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=s.type,i=!(i!=="form"&&i!=="button")||Ku(s.type,s.memoizedProps)),i=!i),i&&ft&&Cn(s),Dh(s),n===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));e:{for(s=s.nextSibling,n=0;s;){if(s.nodeType===8)if(i=s.data,i==="/$"){if(n===0){ft=Ds(s.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;s=s.nextSibling}ft=null}}else n===27?(n=ft,Ka(s.type)?(s=Xu,Xu=null,ft=s):ft=n):ft=It?Ds(s.stateNode.nextSibling):null;return!0}function wl(){ft=It=null,Ye=!1}function qh(){var s=Sn;return s!==null&&(Jt===null?Jt=s:Jt.push.apply(Jt,s),Sn=null),s}function vl(s){Sn===null?Sn=[s]:Sn.push(s)}var Pd=z(null),kn=null,ca=null;function Pa(s,n,i){G(Pd,n._currentValue),n._currentValue=i}function da(s){s._currentValue=Pd.current,M(Pd)}function Md(s,n,i){for(;s!==null;){var c=s.alternate;if((s.childLanes&n)!==n?(s.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),s===i)break;s=s.return}}function Ld(s,n,i,c){var u=s.child;for(u!==null&&(u.return=s);u!==null;){var f=u.dependencies;if(f!==null){var S=u.child;f=f.firstContext;e:for(;f!==null;){var O=f;f=u;for(var U=0;U<n.length;U++)if(O.context===n[U]){f.lanes|=i,O=f.alternate,O!==null&&(O.lanes|=i),Md(f.return,i,s),c||(S=null);break e}f=O.next}}else if(u.tag===18){if(S=u.return,S===null)throw Error(l(341));S.lanes|=i,f=S.alternate,f!==null&&(f.lanes|=i),Md(S,i,s),S=null}else S=u.child;if(S!==null)S.return=u;else for(S=u;S!==null;){if(S===s){S=null;break}if(u=S.sibling,u!==null){u.return=S.return,S=u;break}S=S.return}u=S}}function jl(s,n,i,c){s=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var S=u.alternate;if(S===null)throw Error(l(387));if(S=S.memoizedProps,S!==null){var O=u.type;os(u.pendingProps.value,S.value)||(s!==null?s.push(O):s=[O])}}else if(u===Ne.current){if(S=u.alternate,S===null)throw Error(l(387));S.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(s!==null?s.push(Xl):s=[Xl])}u=u.return}s!==null&&Ld(n,s,i,c),n.flags|=262144}function Xi(s){for(s=s.firstContext;s!==null;){if(!os(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function En(s){kn=s,ca=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ft(s){return zh(kn,s)}function Zi(s,n){return kn===null&&En(s),zh(s,n)}function zh(s,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ca===null){if(s===null)throw Error(l(308));ca=n,s.dependencies={lanes:0,firstContext:n},s.flags|=524288}else ca=ca.next=n;return i}var dv=typeof AbortController<"u"?AbortController:function(){var s=[],n=this.signal={aborted:!1,addEventListener:function(i,c){s.push(c)}};this.abort=function(){n.aborted=!0,s.forEach(function(i){return i()})}},uv=t.unstable_scheduleCallback,mv=t.unstable_NormalPriority,Nt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new dv,data:new Map,refCount:0}}function Nl(s){s.refCount--,s.refCount===0&&uv(mv,function(){s.controller.abort()})}var Sl=null,Fd=0,hr=0,xr=null;function fv(s,n){if(Sl===null){var i=Sl=[];Fd=0,hr=qu(),xr={status:"pending",value:void 0,then:function(c){i.push(c)}}}return Fd++,n.then(Uh,Uh),n}function Uh(){if(--Fd===0&&Sl!==null){xr!==null&&(xr.status="fulfilled");var s=Sl;Sl=null,hr=0,xr=null;for(var n=0;n<s.length;n++)(0,s[n])()}}function hv(s,n){var i=[],c={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return s.then(function(){c.status="fulfilled",c.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(c.status="rejected",c.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),c}var $h=F.S;F.S=function(s,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&fv(s,n),$h!==null&&$h(s,n)};var An=z(null);function Dd(){var s=An.current;return s!==null?s:ot.pooledCache}function Ji(s,n){n===null?G(An,An.current):G(An,n.pool)}function Ih(){var s=Dd();return s===null?null:{parent:Nt._currentValue,pool:s}}var Cl=Error(l(460)),Bh=Error(l(474)),eo=Error(l(542)),qd={then:function(){}};function Hh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function to(){}function Qh(s,n,i){switch(i=s[i],i===void 0?s.push(n):i!==n&&(n.then(to,to),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Kh(s),s;default:if(typeof n.status=="string")n.then(to,to);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(l(482));s=n,s.status="pending",s.then(function(c){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=c}},function(c){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Kh(s),s}throw kl=n,Cl}}var kl=null;function Gh(){if(kl===null)throw Error(l(459));var s=kl;return kl=null,s}function Kh(s){if(s===Cl||s===eo)throw Error(l(483))}var Ma=!1;function zd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(s,n){s=s.updateQueue,n.updateQueue===s&&(n.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function La(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function _a(s,n,i){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var u=c.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),c.pending=n,n=Ki(s),Mh(s,null,i),n}return Gi(s,c,n,i),Ki(s)}function El(s,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,Uf(s,i)}}function $d(s,n){var i=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var S={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=S:f=f.next=S,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:c.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},s.updateQueue=i;return}s=i.lastBaseUpdate,s===null?i.firstBaseUpdate=n:s.next=n,i.lastBaseUpdate=n}var Id=!1;function Al(){if(Id){var s=xr;if(s!==null)throw s}}function Ol(s,n,i,c){Id=!1;var u=s.updateQueue;Ma=!1;var f=u.firstBaseUpdate,S=u.lastBaseUpdate,O=u.shared.pending;if(O!==null){u.shared.pending=null;var U=O,ae=U.next;U.next=null,S===null?f=ae:S.next=ae,S=U;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,O=fe.lastBaseUpdate,O!==S&&(O===null?fe.firstBaseUpdate=ae:O.next=ae,fe.lastBaseUpdate=U))}if(f!==null){var pe=u.baseState;S=0,fe=ae=U=null,O=f;do{var ne=O.lane&-536870913,le=ne!==O.lane;if(le?(Ge&ne)===ne:(c&ne)===ne){ne!==0&&ne===hr&&(Id=!0),fe!==null&&(fe=fe.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Te=s,Ee=O;ne=n;var st=i;switch(Ee.tag){case 1:if(Te=Ee.payload,typeof Te=="function"){pe=Te.call(st,pe,ne);break e}pe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ee.payload,ne=typeof Te=="function"?Te.call(st,pe,ne):Te,ne==null)break e;pe=g({},pe,ne);break e;case 2:Ma=!0}}ne=O.callback,ne!==null&&(s.flags|=64,le&&(s.flags|=8192),le=u.callbacks,le===null?u.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},fe===null?(ae=fe=le,U=pe):fe=fe.next=le,S|=ne;if(O=O.next,O===null){if(O=u.shared.pending,O===null)break;le=O,O=le.next,le.next=null,u.lastBaseUpdate=le,u.shared.pending=null}}while(!0);fe===null&&(U=pe),u.baseState=U,u.firstBaseUpdate=ae,u.lastBaseUpdate=fe,f===null&&(u.shared.lanes=0),Ba|=S,s.lanes=S,s.memoizedState=pe}}function Vh(s,n){if(typeof s!="function")throw Error(l(191,s));s.call(n)}function Yh(s,n){var i=s.callbacks;if(i!==null)for(s.callbacks=null,s=0;s<i.length;s++)Vh(i[s],n)}var pr=z(null),so=z(0);function Wh(s,n){s=ga,G(so,s),G(pr,n),ga=s|n.baseLanes}function Bd(){G(so,ga),G(pr,pr.current)}function Hd(){ga=so.current,M(pr),M(so)}var Fa=0,Ue=null,et=null,wt=null,ao=!1,gr=!1,On=!1,no=0,Rl=0,br=null,xv=0;function pt(){throw Error(l(321))}function Qd(s,n){if(n===null)return!1;for(var i=0;i<n.length&&i<s.length;i++)if(!os(s[i],n[i]))return!1;return!0}function Gd(s,n,i,c,u,f){return Fa=f,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=s===null||s.memoizedState===null?Mx:Lx,On=!1,f=i(c,u),On=!1,gr&&(f=Zh(n,i,c,u)),Xh(s),f}function Xh(s){F.H=uo;var n=et!==null&&et.next!==null;if(Fa=0,wt=et=Ue=null,ao=!1,Rl=0,br=null,n)throw Error(l(300));s===null||Et||(s=s.dependencies,s!==null&&Xi(s)&&(Et=!0))}function Zh(s,n,i,c){Ue=s;var u=0;do{if(gr&&(br=null),Rl=0,gr=!1,25<=u)throw Error(l(301));if(u+=1,wt=et=null,s.updateQueue!=null){var f=s.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=jv,f=n(i,c)}while(gr);return f}function pv(){var s=F.H,n=s.useState()[0];return n=typeof n.then=="function"?Tl(n):n,s=s.useState()[0],(et!==null?et.memoizedState:null)!==s&&(Ue.flags|=1024),n}function Kd(){var s=no!==0;return no=0,s}function Vd(s,n,i){n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~i}function Yd(s){if(ao){for(s=s.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}ao=!1}Fa=0,wt=et=Ue=null,gr=!1,Rl=no=0,br=null}function Xt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ue.memoizedState=wt=s:wt=wt.next=s,wt}function vt(){if(et===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=et.next;var n=wt===null?Ue.memoizedState:wt.next;if(n!==null)wt=n,et=s;else{if(s===null)throw Ue.alternate===null?Error(l(467)):Error(l(310));et=s,s={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},wt===null?Ue.memoizedState=wt=s:wt=wt.next=s}return wt}function Wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(s){var n=Rl;return Rl+=1,br===null&&(br=[]),s=Qh(br,s,n),n=Ue,(wt===null?n.memoizedState:wt.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?Mx:Lx),s}function ro(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tl(s);if(s.$$typeof===N)return Ft(s)}throw Error(l(438,String(s)))}function Xd(s){var n=null,i=Ue.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Wd(),Ue.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(s),c=0;c<s;c++)i[c]=he;return n.index++,i}function ua(s,n){return typeof n=="function"?n(s):n}function lo(s){var n=vt();return Zd(n,et,s)}function Zd(s,n,i){var c=s.queue;if(c===null)throw Error(l(311));c.lastRenderedReducer=i;var u=s.baseQueue,f=c.pending;if(f!==null){if(u!==null){var S=u.next;u.next=f.next,f.next=S}n.baseQueue=u=f,c.pending=null}if(f=s.baseState,u===null)s.memoizedState=f;else{n=u.next;var O=S=null,U=null,ae=n,fe=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(Ge&pe)===pe:(Fa&pe)===pe){var ne=ae.revertLane;if(ne===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===hr&&(fe=!0);else if((Fa&ne)===ne){ae=ae.next,ne===hr&&(fe=!0);continue}else pe={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},U===null?(O=U=pe,S=f):U=U.next=pe,Ue.lanes|=ne,Ba|=ne;pe=ae.action,On&&i(f,pe),f=ae.hasEagerState?ae.eagerState:i(f,pe)}else ne={lane:pe,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},U===null?(O=U=ne,S=f):U=U.next=ne,Ue.lanes|=pe,Ba|=pe;ae=ae.next}while(ae!==null&&ae!==n);if(U===null?S=f:U.next=O,!os(f,s.memoizedState)&&(Et=!0,fe&&(i=xr,i!==null)))throw i;s.memoizedState=f,s.baseState=S,s.baseQueue=U,c.lastRenderedState=f}return u===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Jd(s){var n=vt(),i=n.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=s;var c=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var S=u=u.next;do f=s(f,S.action),S=S.next;while(S!==u);os(f,n.memoizedState)||(Et=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,c]}function Jh(s,n,i){var c=Ue,u=vt(),f=Ye;if(f){if(i===void 0)throw Error(l(407));i=i()}else i=n();var S=!os((et||u).memoizedState,i);S&&(u.memoizedState=i,Et=!0),u=u.queue;var O=sx.bind(null,c,u,s);if(Pl(2048,8,O,[s]),u.getSnapshot!==n||S||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,yr(9,io(),tx.bind(null,c,u,i,n),null),ot===null)throw Error(l(349));f||(Fa&124)!==0||ex(c,n,i)}return i}function ex(s,n,i){s.flags|=16384,s={getSnapshot:n,value:i},n=Ue.updateQueue,n===null?(n=Wd(),Ue.updateQueue=n,n.stores=[s]):(i=n.stores,i===null?n.stores=[s]:i.push(s))}function tx(s,n,i,c){n.value=i,n.getSnapshot=c,ax(n)&&nx(s)}function sx(s,n,i){return i(function(){ax(n)&&nx(s)})}function ax(s){var n=s.getSnapshot;s=s.value;try{var i=n();return!os(s,i)}catch{return!0}}function nx(s){var n=dr(s,2);n!==null&&hs(n,s,2)}function eu(s){var n=Xt();if(typeof s=="function"){var i=s;if(s=i(),On){Oa(!0);try{i()}finally{Oa(!1)}}}return n.memoizedState=n.baseState=s,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:s},n}function rx(s,n,i,c){return s.baseState=i,Zd(s,et,typeof c=="function"?c:ua)}function gv(s,n,i,c,u){if(co(s))throw Error(l(485));if(s=n.action,s!==null){var f={payload:u,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){f.listeners.push(S)}};F.T!==null?i(!0):f.isTransition=!1,c(f),i=n.pending,i===null?(f.next=n.pending=f,lx(n,f)):(f.next=i.next,n.pending=i.next=f)}}function lx(s,n){var i=n.action,c=n.payload,u=s.state;if(n.isTransition){var f=F.T,S={};F.T=S;try{var O=i(u,c),U=F.S;U!==null&&U(S,O),ix(s,n,O)}catch(ae){tu(s,n,ae)}finally{F.T=f}}else try{f=i(u,c),ix(s,n,f)}catch(ae){tu(s,n,ae)}}function ix(s,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){ox(s,n,c)},function(c){return tu(s,n,c)}):ox(s,n,i)}function ox(s,n,i){n.status="fulfilled",n.value=i,cx(n),s.state=i,n=s.pending,n!==null&&(i=n.next,i===n?s.pending=null:(i=i.next,n.next=i,lx(s,i)))}function tu(s,n,i){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,cx(n),n=n.next;while(n!==c)}s.action=null}function cx(s){s=s.listeners;for(var n=0;n<s.length;n++)(0,s[n])()}function dx(s,n){return n}function ux(s,n){if(Ye){var i=ot.formState;if(i!==null){e:{var c=Ue;if(Ye){if(ft){t:{for(var u=ft,f=Gs;u.nodeType!==8;){if(!f){u=null;break t}if(u=Ds(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){ft=Ds(u.nextSibling),c=u.data==="F!";break e}}Cn(c)}c=!1}c&&(n=i[0])}}return i=Xt(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dx,lastRenderedState:n},i.queue=c,i=Rx.bind(null,Ue,c),c.dispatch=i,c=eu(!1),f=lu.bind(null,Ue,!1,c.queue),c=Xt(),u={state:n,dispatch:null,action:s,pending:null},c.queue=u,i=gv.bind(null,Ue,u,f,i),u.dispatch=i,c.memoizedState=s,[n,i,!1]}function mx(s){var n=vt();return fx(n,et,s)}function fx(s,n,i){if(n=Zd(s,n,dx)[0],s=lo(ua)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Tl(n)}catch(S){throw S===Cl?eo:S}else c=n;n=vt();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(Ue.flags|=2048,yr(9,io(),bv.bind(null,u,i),null)),[c,f,s]}function bv(s,n){s.action=n}function hx(s){var n=vt(),i=et;if(i!==null)return fx(n,i,s);vt(),n=n.memoizedState,i=vt();var c=i.queue.dispatch;return i.memoizedState=s,[n,c,!1]}function yr(s,n,i,c){return s={tag:s,create:i,deps:c,inst:n,next:null},n=Ue.updateQueue,n===null&&(n=Wd(),Ue.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=s.next=s:(c=i.next,i.next=s,s.next=c,n.lastEffect=s),s}function io(){return{destroy:void 0,resource:void 0}}function xx(){return vt().memoizedState}function oo(s,n,i,c){var u=Xt();c=c===void 0?null:c,Ue.flags|=s,u.memoizedState=yr(1|n,io(),i,c)}function Pl(s,n,i,c){var u=vt();c=c===void 0?null:c;var f=u.memoizedState.inst;et!==null&&c!==null&&Qd(c,et.memoizedState.deps)?u.memoizedState=yr(n,f,i,c):(Ue.flags|=s,u.memoizedState=yr(1|n,f,i,c))}function px(s,n){oo(8390656,8,s,n)}function gx(s,n){Pl(2048,8,s,n)}function bx(s,n){return Pl(4,2,s,n)}function yx(s,n){return Pl(4,4,s,n)}function wx(s,n){if(typeof n=="function"){s=s();var i=n(s);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return s=s(),n.current=s,function(){n.current=null}}function vx(s,n,i){i=i!=null?i.concat([s]):null,Pl(4,4,wx.bind(null,n,s),i)}function su(){}function jx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&Qd(n,c[1])?c[0]:(i.memoizedState=[s,n],s)}function Nx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&Qd(n,c[1]))return c[0];if(c=s(),On){Oa(!0);try{s()}finally{Oa(!1)}}return i.memoizedState=[c,n],c}function au(s,n,i){return i===void 0||(Fa&1073741824)!==0?s.memoizedState=n:(s.memoizedState=i,s=kp(),Ue.lanes|=s,Ba|=s,i)}function Sx(s,n,i,c){return os(i,n)?i:pr.current!==null?(s=au(s,i,c),os(s,n)||(Et=!0),s):(Fa&42)===0?(Et=!0,s.memoizedState=i):(s=kp(),Ue.lanes|=s,Ba|=s,n)}function Cx(s,n,i,c,u){var f=W.p;W.p=f!==0&&8>f?f:8;var S=F.T,O={};F.T=O,lu(s,!1,n,i);try{var U=u(),ae=F.S;if(ae!==null&&ae(O,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var fe=hv(U,c);Ml(s,n,fe,fs(s))}else Ml(s,n,c,fs(s))}catch(pe){Ml(s,n,{then:function(){},status:"rejected",reason:pe},fs())}finally{W.p=f,F.T=S}}function yv(){}function nu(s,n,i,c){if(s.tag!==5)throw Error(l(476));var u=kx(s).queue;Cx(s,u,n,ue,i===null?yv:function(){return Ex(s),i(c)})}function kx(s){var n=s.memoizedState;if(n!==null)return n;n={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:ue},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:i},next:null},s.memoizedState=n,s=s.alternate,s!==null&&(s.memoizedState=n),n}function Ex(s){var n=kx(s).next.queue;Ml(s,n,{},fs())}function ru(){return Ft(Xl)}function Ax(){return vt().memoizedState}function Ox(){return vt().memoizedState}function wv(s){for(var n=s.return;n!==null;){switch(n.tag){case 24:case 3:var i=fs();s=La(i);var c=_a(n,s,i);c!==null&&(hs(c,n,i),El(c,n,i)),n={cache:_d()},s.payload=n;return}n=n.return}}function vv(s,n,i){var c=fs();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},co(s)?Tx(n,i):(i=Cd(s,n,i,c),i!==null&&(hs(i,s,c),Px(i,n,c)))}function Rx(s,n,i){var c=fs();Ml(s,n,i,c)}function Ml(s,n,i,c){var u={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(co(s))Tx(n,u);else{var f=s.alternate;if(s.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var S=n.lastRenderedState,O=f(S,i);if(u.hasEagerState=!0,u.eagerState=O,os(O,S))return Gi(s,n,u,0),ot===null&&Qi(),!1}catch{}finally{}if(i=Cd(s,n,u,c),i!==null)return hs(i,s,c),Px(i,n,c),!0}return!1}function lu(s,n,i,c){if(c={lane:2,revertLane:qu(),action:c,hasEagerState:!1,eagerState:null,next:null},co(s)){if(n)throw Error(l(479))}else n=Cd(s,i,c,2),n!==null&&hs(n,s,2)}function co(s){var n=s.alternate;return s===Ue||n!==null&&n===Ue}function Tx(s,n){gr=ao=!0;var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}function Px(s,n,i){if((i&4194048)!==0){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,Uf(s,i)}}var uo={readContext:Ft,use:ro,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},Mx={readContext:Ft,use:ro,useCallback:function(s,n){return Xt().memoizedState=[s,n===void 0?null:n],s},useContext:Ft,useEffect:px,useImperativeHandle:function(s,n,i){i=i!=null?i.concat([s]):null,oo(4194308,4,wx.bind(null,n,s),i)},useLayoutEffect:function(s,n){return oo(4194308,4,s,n)},useInsertionEffect:function(s,n){oo(4,2,s,n)},useMemo:function(s,n){var i=Xt();n=n===void 0?null:n;var c=s();if(On){Oa(!0);try{s()}finally{Oa(!1)}}return i.memoizedState=[c,n],c},useReducer:function(s,n,i){var c=Xt();if(i!==void 0){var u=i(n);if(On){Oa(!0);try{i(n)}finally{Oa(!1)}}}else u=n;return c.memoizedState=c.baseState=u,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},c.queue=s,s=s.dispatch=vv.bind(null,Ue,s),[c.memoizedState,s]},useRef:function(s){var n=Xt();return s={current:s},n.memoizedState=s},useState:function(s){s=eu(s);var n=s.queue,i=Rx.bind(null,Ue,n);return n.dispatch=i,[s.memoizedState,i]},useDebugValue:su,useDeferredValue:function(s,n){var i=Xt();return au(i,s,n)},useTransition:function(){var s=eu(!1);return s=Cx.bind(null,Ue,s.queue,!0,!1),Xt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,n,i){var c=Ue,u=Xt();if(Ye){if(i===void 0)throw Error(l(407));i=i()}else{if(i=n(),ot===null)throw Error(l(349));(Ge&124)!==0||ex(c,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,px(sx.bind(null,c,f,s),[s]),c.flags|=2048,yr(9,io(),tx.bind(null,c,f,i,n),null),i},useId:function(){var s=Xt(),n=ot.identifierPrefix;if(Ye){var i=oa,c=ia;i=(c&~(1<<32-is(c)-1)).toString(32)+i,n=""+n+"R"+i,i=no++,0<i&&(n+="H"+i.toString(32)),n+=""}else i=xv++,n=""+n+"r"+i.toString(32)+"";return s.memoizedState=n},useHostTransitionStatus:ru,useFormState:ux,useActionState:ux,useOptimistic:function(s){var n=Xt();n.memoizedState=n.baseState=s;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=lu.bind(null,Ue,!0,i),i.dispatch=n,[s,n]},useMemoCache:Xd,useCacheRefresh:function(){return Xt().memoizedState=wv.bind(null,Ue)}},Lx={readContext:Ft,use:ro,useCallback:jx,useContext:Ft,useEffect:gx,useImperativeHandle:vx,useInsertionEffect:bx,useLayoutEffect:yx,useMemo:Nx,useReducer:lo,useRef:xx,useState:function(){return lo(ua)},useDebugValue:su,useDeferredValue:function(s,n){var i=vt();return Sx(i,et.memoizedState,s,n)},useTransition:function(){var s=lo(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tl(s),n]},useSyncExternalStore:Jh,useId:Ax,useHostTransitionStatus:ru,useFormState:mx,useActionState:mx,useOptimistic:function(s,n){var i=vt();return rx(i,et,s,n)},useMemoCache:Xd,useCacheRefresh:Ox},jv={readContext:Ft,use:ro,useCallback:jx,useContext:Ft,useEffect:gx,useImperativeHandle:vx,useInsertionEffect:bx,useLayoutEffect:yx,useMemo:Nx,useReducer:Jd,useRef:xx,useState:function(){return Jd(ua)},useDebugValue:su,useDeferredValue:function(s,n){var i=vt();return et===null?au(i,s,n):Sx(i,et.memoizedState,s,n)},useTransition:function(){var s=Jd(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tl(s),n]},useSyncExternalStore:Jh,useId:Ax,useHostTransitionStatus:ru,useFormState:hx,useActionState:hx,useOptimistic:function(s,n){var i=vt();return et!==null?rx(i,et,s,n):(i.baseState=s,[s,i.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:Ox},wr=null,Ll=0;function mo(s){var n=Ll;return Ll+=1,wr===null&&(wr=[]),Qh(wr,s,n)}function _l(s,n){n=n.props.ref,s.ref=n!==void 0?n:null}function fo(s,n){throw n.$$typeof===y?Error(l(525)):(s=Object.prototype.toString.call(n),Error(l(31,s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s)))}function _x(s){var n=s._init;return n(s._payload)}function Fx(s){function n(X,Q){if(s){var ee=X.deletions;ee===null?(X.deletions=[Q],X.flags|=16):ee.push(Q)}}function i(X,Q){if(!s)return null;for(;Q!==null;)n(X,Q),Q=Q.sibling;return null}function c(X){for(var Q=new Map;X!==null;)X.key!==null?Q.set(X.key,X):Q.set(X.index,X),X=X.sibling;return Q}function u(X,Q){return X=la(X,Q),X.index=0,X.sibling=null,X}function f(X,Q,ee){return X.index=ee,s?(ee=X.alternate,ee!==null?(ee=ee.index,ee<Q?(X.flags|=67108866,Q):ee):(X.flags|=67108866,Q)):(X.flags|=1048576,Q)}function S(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function O(X,Q,ee,xe){return Q===null||Q.tag!==6?(Q=Ed(ee,X.mode,xe),Q.return=X,Q):(Q=u(Q,ee),Q.return=X,Q)}function U(X,Q,ee,xe){var je=ee.type;return je===b?fe(X,Q,ee.props.children,xe,ee.key):Q!==null&&(Q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&_x(je)===Q.type)?(Q=u(Q,ee.props),_l(Q,ee),Q.return=X,Q):(Q=Vi(ee.type,ee.key,ee.props,null,X.mode,xe),_l(Q,ee),Q.return=X,Q)}function ae(X,Q,ee,xe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ee.containerInfo||Q.stateNode.implementation!==ee.implementation?(Q=Ad(ee,X.mode,xe),Q.return=X,Q):(Q=u(Q,ee.children||[]),Q.return=X,Q)}function fe(X,Q,ee,xe,je){return Q===null||Q.tag!==7?(Q=vn(ee,X.mode,xe,je),Q.return=X,Q):(Q=u(Q,ee),Q.return=X,Q)}function pe(X,Q,ee){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Ed(""+Q,X.mode,ee),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case j:return ee=Vi(Q.type,Q.key,Q.props,null,X.mode,ee),_l(ee,Q),ee.return=X,ee;case E:return Q=Ad(Q,X.mode,ee),Q.return=X,Q;case q:var xe=Q._init;return Q=xe(Q._payload),pe(X,Q,ee)}if(oe(Q)||B(Q))return Q=vn(Q,X.mode,ee,null),Q.return=X,Q;if(typeof Q.then=="function")return pe(X,mo(Q),ee);if(Q.$$typeof===N)return pe(X,Zi(X,Q),ee);fo(X,Q)}return null}function ne(X,Q,ee,xe){var je=Q!==null?Q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return je!==null?null:O(X,Q,""+ee,xe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:return ee.key===je?U(X,Q,ee,xe):null;case E:return ee.key===je?ae(X,Q,ee,xe):null;case q:return je=ee._init,ee=je(ee._payload),ne(X,Q,ee,xe)}if(oe(ee)||B(ee))return je!==null?null:fe(X,Q,ee,xe,null);if(typeof ee.then=="function")return ne(X,Q,mo(ee),xe);if(ee.$$typeof===N)return ne(X,Q,Zi(X,ee),xe);fo(X,ee)}return null}function le(X,Q,ee,xe,je){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return X=X.get(ee)||null,O(Q,X,""+xe,je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case j:return X=X.get(xe.key===null?ee:xe.key)||null,U(Q,X,xe,je);case E:return X=X.get(xe.key===null?ee:xe.key)||null,ae(Q,X,xe,je);case q:var $e=xe._init;return xe=$e(xe._payload),le(X,Q,ee,xe,je)}if(oe(xe)||B(xe))return X=X.get(ee)||null,fe(Q,X,xe,je,null);if(typeof xe.then=="function")return le(X,Q,ee,mo(xe),je);if(xe.$$typeof===N)return le(X,Q,ee,Zi(Q,xe),je);fo(Q,xe)}return null}function Te(X,Q,ee,xe){for(var je=null,$e=null,Se=Q,Oe=Q=0,Ot=null;Se!==null&&Oe<ee.length;Oe++){Se.index>Oe?(Ot=Se,Se=null):Ot=Se.sibling;var Ve=ne(X,Se,ee[Oe],xe);if(Ve===null){Se===null&&(Se=Ot);break}s&&Se&&Ve.alternate===null&&n(X,Se),Q=f(Ve,Q,Oe),$e===null?je=Ve:$e.sibling=Ve,$e=Ve,Se=Ot}if(Oe===ee.length)return i(X,Se),Ye&&Nn(X,Oe),je;if(Se===null){for(;Oe<ee.length;Oe++)Se=pe(X,ee[Oe],xe),Se!==null&&(Q=f(Se,Q,Oe),$e===null?je=Se:$e.sibling=Se,$e=Se);return Ye&&Nn(X,Oe),je}for(Se=c(Se);Oe<ee.length;Oe++)Ot=le(Se,X,Oe,ee[Oe],xe),Ot!==null&&(s&&Ot.alternate!==null&&Se.delete(Ot.key===null?Oe:Ot.key),Q=f(Ot,Q,Oe),$e===null?je=Ot:$e.sibling=Ot,$e=Ot);return s&&Se.forEach(function(Za){return n(X,Za)}),Ye&&Nn(X,Oe),je}function Ee(X,Q,ee,xe){if(ee==null)throw Error(l(151));for(var je=null,$e=null,Se=Q,Oe=Q=0,Ot=null,Ve=ee.next();Se!==null&&!Ve.done;Oe++,Ve=ee.next()){Se.index>Oe?(Ot=Se,Se=null):Ot=Se.sibling;var Za=ne(X,Se,Ve.value,xe);if(Za===null){Se===null&&(Se=Ot);break}s&&Se&&Za.alternate===null&&n(X,Se),Q=f(Za,Q,Oe),$e===null?je=Za:$e.sibling=Za,$e=Za,Se=Ot}if(Ve.done)return i(X,Se),Ye&&Nn(X,Oe),je;if(Se===null){for(;!Ve.done;Oe++,Ve=ee.next())Ve=pe(X,Ve.value,xe),Ve!==null&&(Q=f(Ve,Q,Oe),$e===null?je=Ve:$e.sibling=Ve,$e=Ve);return Ye&&Nn(X,Oe),je}for(Se=c(Se);!Ve.done;Oe++,Ve=ee.next())Ve=le(Se,X,Oe,Ve.value,xe),Ve!==null&&(s&&Ve.alternate!==null&&Se.delete(Ve.key===null?Oe:Ve.key),Q=f(Ve,Q,Oe),$e===null?je=Ve:$e.sibling=Ve,$e=Ve);return s&&Se.forEach(function(Nj){return n(X,Nj)}),Ye&&Nn(X,Oe),je}function st(X,Q,ee,xe){if(typeof ee=="object"&&ee!==null&&ee.type===b&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:e:{for(var je=ee.key;Q!==null;){if(Q.key===je){if(je=ee.type,je===b){if(Q.tag===7){i(X,Q.sibling),xe=u(Q,ee.props.children),xe.return=X,X=xe;break e}}else if(Q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&_x(je)===Q.type){i(X,Q.sibling),xe=u(Q,ee.props),_l(xe,ee),xe.return=X,X=xe;break e}i(X,Q);break}else n(X,Q);Q=Q.sibling}ee.type===b?(xe=vn(ee.props.children,X.mode,xe,ee.key),xe.return=X,X=xe):(xe=Vi(ee.type,ee.key,ee.props,null,X.mode,xe),_l(xe,ee),xe.return=X,X=xe)}return S(X);case E:e:{for(je=ee.key;Q!==null;){if(Q.key===je)if(Q.tag===4&&Q.stateNode.containerInfo===ee.containerInfo&&Q.stateNode.implementation===ee.implementation){i(X,Q.sibling),xe=u(Q,ee.children||[]),xe.return=X,X=xe;break e}else{i(X,Q);break}else n(X,Q);Q=Q.sibling}xe=Ad(ee,X.mode,xe),xe.return=X,X=xe}return S(X);case q:return je=ee._init,ee=je(ee._payload),st(X,Q,ee,xe)}if(oe(ee))return Te(X,Q,ee,xe);if(B(ee)){if(je=B(ee),typeof je!="function")throw Error(l(150));return ee=je.call(ee),Ee(X,Q,ee,xe)}if(typeof ee.then=="function")return st(X,Q,mo(ee),xe);if(ee.$$typeof===N)return st(X,Q,Zi(X,ee),xe);fo(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Q!==null&&Q.tag===6?(i(X,Q.sibling),xe=u(Q,ee),xe.return=X,X=xe):(i(X,Q),xe=Ed(ee,X.mode,xe),xe.return=X,X=xe),S(X)):i(X,Q)}return function(X,Q,ee,xe){try{Ll=0;var je=st(X,Q,ee,xe);return wr=null,je}catch(Se){if(Se===Cl||Se===eo)throw Se;var $e=cs(29,Se,null,X.mode);return $e.lanes=xe,$e.return=X,$e}finally{}}}var vr=Fx(!0),Dx=Fx(!1),Es=z(null),Ks=null;function Da(s){var n=s.alternate;G(St,St.current&1),G(Es,s),Ks===null&&(n===null||pr.current!==null||n.memoizedState!==null)&&(Ks=s)}function qx(s){if(s.tag===22){if(G(St,St.current),G(Es,s),Ks===null){var n=s.alternate;n!==null&&n.memoizedState!==null&&(Ks=s)}}else qa()}function qa(){G(St,St.current),G(Es,Es.current)}function ma(s){M(Es),Ks===s&&(Ks=null),M(St)}var St=z(0);function ho(s){for(var n=s;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Wu(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function iu(s,n,i,c){n=s.memoizedState,i=i(c,n),i=i==null?n:g({},n,i),s.memoizedState=i,s.lanes===0&&(s.updateQueue.baseState=i)}var ou={enqueueSetState:function(s,n,i){s=s._reactInternals;var c=fs(),u=La(c);u.payload=n,i!=null&&(u.callback=i),n=_a(s,u,c),n!==null&&(hs(n,s,c),El(n,s,c))},enqueueReplaceState:function(s,n,i){s=s._reactInternals;var c=fs(),u=La(c);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=_a(s,u,c),n!==null&&(hs(n,s,c),El(n,s,c))},enqueueForceUpdate:function(s,n){s=s._reactInternals;var i=fs(),c=La(i);c.tag=2,n!=null&&(c.callback=n),n=_a(s,c,i),n!==null&&(hs(n,s,i),El(n,s,i))}};function zx(s,n,i,c,u,f,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,f,S):n.prototype&&n.prototype.isPureReactComponent?!gl(i,c)||!gl(u,f):!0}function Ux(s,n,i,c){s=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==s&&ou.enqueueReplaceState(n,n.state,null)}function Rn(s,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(s=s.defaultProps){i===n&&(i=g({},i));for(var u in s)i[u]===void 0&&(i[u]=s[u])}return i}var xo=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function $x(s){xo(s)}function Ix(s){console.error(s)}function Bx(s){xo(s)}function po(s,n){try{var i=s.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function Hx(s,n,i){try{var c=s.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function cu(s,n,i){return i=La(i),i.tag=3,i.payload={element:null},i.callback=function(){po(s,n)},i}function Qx(s){return s=La(s),s.tag=3,s}function Gx(s,n,i,c){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=c.value;s.payload=function(){return u(f)},s.callback=function(){Hx(n,i,c)}}var S=i.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Hx(n,i,c),typeof u!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})})}function Nv(s,n,i,c,u){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&jl(n,i,u,!0),i=Es.current,i!==null){switch(i.tag){case 13:return Ks===null?Mu():i.alternate===null&&ht===0&&(ht=3),i.flags&=-257,i.flags|=65536,i.lanes=u,c===qd?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),_u(s,c,u)),!1;case 22:return i.flags|=65536,c===qd?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),_u(s,c,u)),!1}throw Error(l(435,i.tag))}return _u(s,c,u),Mu(),!1}if(Ye)return n=Es.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,c!==Td&&(s=Error(l(422),{cause:c}),vl(Ns(s,i)))):(c!==Td&&(n=Error(l(423),{cause:c}),vl(Ns(n,i))),s=s.current.alternate,s.flags|=65536,u&=-u,s.lanes|=u,c=Ns(c,i),u=cu(s.stateNode,c,u),$d(s,u),ht!==4&&(ht=2)),!1;var f=Error(l(520),{cause:c});if(f=Ns(f,i),Il===null?Il=[f]:Il.push(f),ht!==4&&(ht=2),n===null)return!0;c=Ns(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,s=u&-u,i.lanes|=s,s=cu(i.stateNode,c,s),$d(i,s),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ha===null||!Ha.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Qx(u),Gx(u,s,i,c),$d(i,u),!1}i=i.return}while(i!==null);return!1}var Kx=Error(l(461)),Et=!1;function Rt(s,n,i,c){n.child=s===null?Dx(n,null,i,c):vr(n,s.child,i,c)}function Vx(s,n,i,c,u){i=i.render;var f=n.ref;if("ref"in c){var S={};for(var O in c)O!=="ref"&&(S[O]=c[O])}else S=c;return En(n),c=Gd(s,n,i,S,f,u),O=Kd(),s!==null&&!Et?(Vd(s,n,u),fa(s,n,u)):(Ye&&O&&Od(n),n.flags|=1,Rt(s,n,c,u),n.child)}function Yx(s,n,i,c,u){if(s===null){var f=i.type;return typeof f=="function"&&!kd(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,Wx(s,n,f,c,u)):(s=Vi(i.type,null,c,n,n.mode,u),s.ref=n.ref,s.return=n,n.child=s)}if(f=s.child,!gu(s,u)){var S=f.memoizedProps;if(i=i.compare,i=i!==null?i:gl,i(S,c)&&s.ref===n.ref)return fa(s,n,u)}return n.flags|=1,s=la(f,c),s.ref=n.ref,s.return=n,n.child=s}function Wx(s,n,i,c,u){if(s!==null){var f=s.memoizedProps;if(gl(f,c)&&s.ref===n.ref)if(Et=!1,n.pendingProps=c=f,gu(s,u))(s.flags&131072)!==0&&(Et=!0);else return n.lanes=s.lanes,fa(s,n,u)}return du(s,n,i,c,u)}function Xx(s,n,i){var c=n.pendingProps,u=c.children,f=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((n.flags&128)!==0){if(c=f!==null?f.baseLanes|i:i,s!==null){for(u=n.child=s.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;n.childLanes=f&~c}else n.childLanes=0,n.child=null;return Zx(s,n,c,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ji(n,f!==null?f.cachePool:null),f!==null?Wh(n,f):Bd(),qx(n);else return n.lanes=n.childLanes=536870912,Zx(s,n,f!==null?f.baseLanes|i:i,i)}else f!==null?(Ji(n,f.cachePool),Wh(n,f),qa(),n.memoizedState=null):(s!==null&&Ji(n,null),Bd(),qa());return Rt(s,n,u,i),n.child}function Zx(s,n,i,c){var u=Dd();return u=u===null?null:{parent:Nt._currentValue,pool:u},n.memoizedState={baseLanes:i,cachePool:u},s!==null&&Ji(n,null),Bd(),qx(n),s!==null&&jl(s,n,c,!0),null}function go(s,n){var i=n.ref;if(i===null)s!==null&&s.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(s===null||s.ref!==i)&&(n.flags|=4194816)}}function du(s,n,i,c,u){return En(n),i=Gd(s,n,i,c,void 0,u),c=Kd(),s!==null&&!Et?(Vd(s,n,u),fa(s,n,u)):(Ye&&c&&Od(n),n.flags|=1,Rt(s,n,i,u),n.child)}function Jx(s,n,i,c,u,f){return En(n),n.updateQueue=null,i=Zh(n,c,i,u),Xh(s),c=Kd(),s!==null&&!Et?(Vd(s,n,f),fa(s,n,f)):(Ye&&c&&Od(n),n.flags|=1,Rt(s,n,i,f),n.child)}function ep(s,n,i,c,u){if(En(n),n.stateNode===null){var f=ur,S=i.contextType;typeof S=="object"&&S!==null&&(f=Ft(S)),f=new i(c,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ou,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=c,f.state=n.memoizedState,f.refs={},zd(n),S=i.contextType,f.context=typeof S=="object"&&S!==null?Ft(S):ur,f.state=n.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(iu(n,i,S,c),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(S=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),S!==f.state&&ou.enqueueReplaceState(f,f.state,null),Ol(n,c,f,u),Al(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(s===null){f=n.stateNode;var O=n.memoizedProps,U=Rn(i,O);f.props=U;var ae=f.context,fe=i.contextType;S=ur,typeof fe=="object"&&fe!==null&&(S=Ft(fe));var pe=i.getDerivedStateFromProps;fe=typeof pe=="function"||typeof f.getSnapshotBeforeUpdate=="function",O=n.pendingProps!==O,fe||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(O||ae!==S)&&Ux(n,f,c,S),Ma=!1;var ne=n.memoizedState;f.state=ne,Ol(n,c,f,u),Al(),ae=n.memoizedState,O||ne!==ae||Ma?(typeof pe=="function"&&(iu(n,i,pe,c),ae=n.memoizedState),(U=Ma||zx(n,i,U,c,ne,ae,S))?(fe||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=ae),f.props=c,f.state=ae,f.context=S,c=U):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{f=n.stateNode,Ud(s,n),S=n.memoizedProps,fe=Rn(i,S),f.props=fe,pe=n.pendingProps,ne=f.context,ae=i.contextType,U=ur,typeof ae=="object"&&ae!==null&&(U=Ft(ae)),O=i.getDerivedStateFromProps,(ae=typeof O=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S!==pe||ne!==U)&&Ux(n,f,c,U),Ma=!1,ne=n.memoizedState,f.state=ne,Ol(n,c,f,u),Al();var le=n.memoizedState;S!==pe||ne!==le||Ma||s!==null&&s.dependencies!==null&&Xi(s.dependencies)?(typeof O=="function"&&(iu(n,i,O,c),le=n.memoizedState),(fe=Ma||zx(n,i,fe,c,ne,le,U)||s!==null&&s.dependencies!==null&&Xi(s.dependencies))?(ae||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,le,U),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,le,U)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=le),f.props=c,f.state=le,f.context=U,c=fe):(typeof f.componentDidUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(n.flags|=1024),c=!1)}return f=c,go(s,n),c=(n.flags&128)!==0,f||c?(f=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,s!==null&&c?(n.child=vr(n,s.child,null,u),n.child=vr(n,null,i,u)):Rt(s,n,i,u),n.memoizedState=f.state,s=n.child):s=fa(s,n,u),s}function tp(s,n,i,c){return wl(),n.flags|=256,Rt(s,n,i,c),n.child}var uu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mu(s){return{baseLanes:s,cachePool:Ih()}}function fu(s,n,i){return s=s!==null?s.childLanes&~i:0,n&&(s|=As),s}function sp(s,n,i){var c=n.pendingProps,u=!1,f=(n.flags&128)!==0,S;if((S=f)||(S=s!==null&&s.memoizedState===null?!1:(St.current&2)!==0),S&&(u=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,s===null){if(Ye){if(u?Da(n):qa(),Ye){var O=ft,U;if(U=O){e:{for(U=O,O=Gs;U.nodeType!==8;){if(!O){O=null;break e}if(U=Ds(U.nextSibling),U===null){O=null;break e}}O=U}O!==null?(n.memoizedState={dehydrated:O,treeContext:jn!==null?{id:ia,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},U=cs(18,null,null,0),U.stateNode=O,U.return=n,n.child=U,It=n,ft=null,U=!0):U=!1}U||Cn(n)}if(O=n.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Wu(O)?n.lanes=32:n.lanes=536870912,null;ma(n)}return O=c.children,c=c.fallback,u?(qa(),u=n.mode,O=bo({mode:"hidden",children:O},u),c=vn(c,u,i,null),O.return=n,c.return=n,O.sibling=c,n.child=O,u=n.child,u.memoizedState=mu(i),u.childLanes=fu(s,S,i),n.memoizedState=uu,c):(Da(n),hu(n,O))}if(U=s.memoizedState,U!==null&&(O=U.dehydrated,O!==null)){if(f)n.flags&256?(Da(n),n.flags&=-257,n=xu(s,n,i)):n.memoizedState!==null?(qa(),n.child=s.child,n.flags|=128,n=null):(qa(),u=c.fallback,O=n.mode,c=bo({mode:"visible",children:c.children},O),u=vn(u,O,i,null),u.flags|=2,c.return=n,u.return=n,c.sibling=u,n.child=c,vr(n,s.child,null,i),c=n.child,c.memoizedState=mu(i),c.childLanes=fu(s,S,i),n.memoizedState=uu,n=u);else if(Da(n),Wu(O)){if(S=O.nextSibling&&O.nextSibling.dataset,S)var ae=S.dgst;S=ae,c=Error(l(419)),c.stack="",c.digest=S,vl({value:c,source:null,stack:null}),n=xu(s,n,i)}else if(Et||jl(s,n,i,!1),S=(i&s.childLanes)!==0,Et||S){if(S=ot,S!==null&&(c=i&-i,c=(c&42)!==0?1:Xc(c),c=(c&(S.suspendedLanes|i))!==0?0:c,c!==0&&c!==U.retryLane))throw U.retryLane=c,dr(s,c),hs(S,s,c),Kx;O.data==="$?"||Mu(),n=xu(s,n,i)}else O.data==="$?"?(n.flags|=192,n.child=s.child,n=null):(s=U.treeContext,ft=Ds(O.nextSibling),It=n,Ye=!0,Sn=null,Gs=!1,s!==null&&(Cs[ks++]=ia,Cs[ks++]=oa,Cs[ks++]=jn,ia=s.id,oa=s.overflow,jn=n),n=hu(n,c.children),n.flags|=4096);return n}return u?(qa(),u=c.fallback,O=n.mode,U=s.child,ae=U.sibling,c=la(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,ae!==null?u=la(ae,u):(u=vn(u,O,i,null),u.flags|=2),u.return=n,c.return=n,c.sibling=u,n.child=c,c=u,u=n.child,O=s.child.memoizedState,O===null?O=mu(i):(U=O.cachePool,U!==null?(ae=Nt._currentValue,U=U.parent!==ae?{parent:ae,pool:ae}:U):U=Ih(),O={baseLanes:O.baseLanes|i,cachePool:U}),u.memoizedState=O,u.childLanes=fu(s,S,i),n.memoizedState=uu,c):(Da(n),i=s.child,s=i.sibling,i=la(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,s!==null&&(S=n.deletions,S===null?(n.deletions=[s],n.flags|=16):S.push(s)),n.child=i,n.memoizedState=null,i)}function hu(s,n){return n=bo({mode:"visible",children:n},s.mode),n.return=s,s.child=n}function bo(s,n){return s=cs(22,s,null,n),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function xu(s,n,i){return vr(n,s.child,null,i),s=hu(n,n.pendingProps.children),s.flags|=2,n.memoizedState=null,s}function ap(s,n,i){s.lanes|=n;var c=s.alternate;c!==null&&(c.lanes|=n),Md(s.return,n,i)}function pu(s,n,i,c,u){var f=s.memoizedState;f===null?s.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:u}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=i,f.tailMode=u)}function np(s,n,i){var c=n.pendingProps,u=c.revealOrder,f=c.tail;if(Rt(s,n,c.children,i),c=St.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=n.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ap(s,i,n);else if(s.tag===19)ap(s,i,n);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(G(St,c),u){case"forwards":for(i=n.child,u=null;i!==null;)s=i.alternate,s!==null&&ho(s)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),pu(n,!1,u,i,f);break;case"backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(s=u.alternate,s!==null&&ho(s)===null){n.child=u;break}s=u.sibling,u.sibling=i,i=u,u=s}pu(n,!0,i,null,f);break;case"together":pu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fa(s,n,i){if(s!==null&&(n.dependencies=s.dependencies),Ba|=n.lanes,(i&n.childLanes)===0)if(s!==null){if(jl(s,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(s!==null&&n.child!==s.child)throw Error(l(153));if(n.child!==null){for(s=n.child,i=la(s,s.pendingProps),n.child=i,i.return=n;s.sibling!==null;)s=s.sibling,i=i.sibling=la(s,s.pendingProps),i.return=n;i.sibling=null}return n.child}function gu(s,n){return(s.lanes&n)!==0?!0:(s=s.dependencies,!!(s!==null&&Xi(s)))}function Sv(s,n,i){switch(n.tag){case 3:be(n,n.stateNode.containerInfo),Pa(n,Nt,s.memoizedState.cache),wl();break;case 27:case 5:Gc(n);break;case 4:be(n,n.stateNode.containerInfo);break;case 10:Pa(n,n.type,n.memoizedProps.value);break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Da(n),n.flags|=128,null):(i&n.child.childLanes)!==0?sp(s,n,i):(Da(n),s=fa(s,n,i),s!==null?s.sibling:null);Da(n);break;case 19:var u=(s.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(jl(s,n,i,!1),c=(i&n.childLanes)!==0),u){if(c)return np(s,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),G(St,St.current),c)break;return null;case 22:case 23:return n.lanes=0,Xx(s,n,i);case 24:Pa(n,Nt,s.memoizedState.cache)}return fa(s,n,i)}function rp(s,n,i){if(s!==null)if(s.memoizedProps!==n.pendingProps)Et=!0;else{if(!gu(s,i)&&(n.flags&128)===0)return Et=!1,Sv(s,n,i);Et=(s.flags&131072)!==0}else Et=!1,Ye&&(n.flags&1048576)!==0&&_h(n,Wi,n.index);switch(n.lanes=0,n.tag){case 16:e:{s=n.pendingProps;var c=n.elementType,u=c._init;if(c=u(c._payload),n.type=c,typeof c=="function")kd(c)?(s=Rn(c,s),n.tag=1,n=ep(null,n,c,s,i)):(n.tag=0,n=du(null,n,c,s,i));else{if(c!=null){if(u=c.$$typeof,u===T){n.tag=11,n=Vx(null,n,c,s,i);break e}else if(u===$){n.tag=14,n=Yx(null,n,c,s,i);break e}}throw n=V(c)||c,Error(l(306,n,""))}}return n;case 0:return du(s,n,n.type,n.pendingProps,i);case 1:return c=n.type,u=Rn(c,n.pendingProps),ep(s,n,c,u,i);case 3:e:{if(be(n,n.stateNode.containerInfo),s===null)throw Error(l(387));c=n.pendingProps;var f=n.memoizedState;u=f.element,Ud(s,n),Ol(n,c,null,i);var S=n.memoizedState;if(c=S.cache,Pa(n,Nt,c),c!==f.cache&&Ld(n,[Nt],i,!0),Al(),c=S.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=tp(s,n,c,i);break e}else if(c!==u){u=Ns(Error(l(424)),n),vl(u),n=tp(s,n,c,i);break e}else{switch(s=n.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ft=Ds(s.firstChild),It=n,Ye=!0,Sn=null,Gs=!0,i=Dx(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(wl(),c===u){n=fa(s,n,i);break e}Rt(s,n,c,i)}n=n.child}return n;case 26:return go(s,n),s===null?(i=cg(n.type,null,n.pendingProps,null))?n.memoizedState=i:Ye||(i=n.type,s=n.pendingProps,c=Po(se.current).createElement(i),c[_t]=n,c[Yt]=s,Pt(c,i,s),kt(c),n.stateNode=c):n.memoizedState=cg(n.type,s.memoizedProps,n.pendingProps,s.memoizedState),null;case 27:return Gc(n),s===null&&Ye&&(c=n.stateNode=lg(n.type,n.pendingProps,se.current),It=n,Gs=!0,u=ft,Ka(n.type)?(Xu=u,ft=Ds(c.firstChild)):ft=u),Rt(s,n,n.pendingProps.children,i),go(s,n),s===null&&(n.flags|=4194304),n.child;case 5:return s===null&&Ye&&((u=c=ft)&&(c=Zv(c,n.type,n.pendingProps,Gs),c!==null?(n.stateNode=c,It=n,ft=Ds(c.firstChild),Gs=!1,u=!0):u=!1),u||Cn(n)),Gc(n),u=n.type,f=n.pendingProps,S=s!==null?s.memoizedProps:null,c=f.children,Ku(u,f)?c=null:S!==null&&Ku(u,S)&&(n.flags|=32),n.memoizedState!==null&&(u=Gd(s,n,pv,null,null,i),Xl._currentValue=u),go(s,n),Rt(s,n,c,i),n.child;case 6:return s===null&&Ye&&((s=i=ft)&&(i=Jv(i,n.pendingProps,Gs),i!==null?(n.stateNode=i,It=n,ft=null,s=!0):s=!1),s||Cn(n)),null;case 13:return sp(s,n,i);case 4:return be(n,n.stateNode.containerInfo),c=n.pendingProps,s===null?n.child=vr(n,null,c,i):Rt(s,n,c,i),n.child;case 11:return Vx(s,n,n.type,n.pendingProps,i);case 7:return Rt(s,n,n.pendingProps,i),n.child;case 8:return Rt(s,n,n.pendingProps.children,i),n.child;case 12:return Rt(s,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,Pa(n,n.type,c.value),Rt(s,n,c.children,i),n.child;case 9:return u=n.type._context,c=n.pendingProps.children,En(n),u=Ft(u),c=c(u),n.flags|=1,Rt(s,n,c,i),n.child;case 14:return Yx(s,n,n.type,n.pendingProps,i);case 15:return Wx(s,n,n.type,n.pendingProps,i);case 19:return np(s,n,i);case 31:return c=n.pendingProps,i=n.mode,c={mode:c.mode,children:c.children},s===null?(i=bo(c,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=la(s.child,c),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return Xx(s,n,i);case 24:return En(n),c=Ft(Nt),s===null?(u=Dd(),u===null&&(u=ot,f=_d(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:c,cache:u},zd(n),Pa(n,Nt,u)):((s.lanes&i)!==0&&(Ud(s,n),Ol(n,null,null,i),Al()),u=s.memoizedState,f=n.memoizedState,u.parent!==c?(u={parent:c,cache:c},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Pa(n,Nt,c)):(c=f.cache,Pa(n,Nt,c),c!==u.cache&&Ld(n,[Nt],i,!0))),Rt(s,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function ha(s){s.flags|=4}function lp(s,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!hg(n)){if(n=Es.current,n!==null&&((Ge&4194048)===Ge?Ks!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||n!==Ks))throw kl=qd,Bh;s.flags|=8192}}function yo(s,n){n!==null&&(s.flags|=4),s.flags&16384&&(n=s.tag!==22?qf():536870912,s.lanes|=n,Cr|=n)}function Fl(s,n){if(!Ye)switch(s.tailMode){case"hidden":n=s.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?s.tail=null:i.sibling=null;break;case"collapsed":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function mt(s){var n=s.alternate!==null&&s.alternate.child===s.child,i=0,c=0;if(n)for(var u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags&65011712,c|=u.flags&65011712,u.return=s,u=u.sibling;else for(u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags,c|=u.flags,u.return=s,u=u.sibling;return s.subtreeFlags|=c,s.childLanes=i,n}function Cv(s,n,i){var c=n.pendingProps;switch(Rd(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(n),null;case 1:return mt(n),null;case 3:return i=n.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),da(Nt),Ke(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(s===null||s.child===null)&&(yl(n)?ha(n):s===null||s.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,qh())),mt(n),null;case 26:return i=n.memoizedState,s===null?(ha(n),i!==null?(mt(n),lp(n,i)):(mt(n),n.flags&=-16777217)):i?i!==s.memoizedState?(ha(n),mt(n),lp(n,i)):(mt(n),n.flags&=-16777217):(s.memoizedProps!==c&&ha(n),mt(n),n.flags&=-16777217),null;case 27:Oi(n),i=se.current;var u=n.type;if(s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(l(166));return mt(n),null}s=Y.current,yl(n)?Fh(n):(s=lg(u,c,i),n.stateNode=s,ha(n))}return mt(n),null;case 5:if(Oi(n),i=n.type,s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(l(166));return mt(n),null}if(s=Y.current,yl(n))Fh(n);else{switch(u=Po(se.current),s){case 1:s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?u.createElement("select",{is:c.is}):u.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?u.createElement(i,{is:c.is}):u.createElement(i)}}s[_t]=n,s[Yt]=c;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=s;e:switch(Pt(s,i,c),i){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ha(n)}}return mt(n),n.flags&=-16777217,null;case 6:if(s&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(l(166));if(s=se.current,yl(n)){if(s=n.stateNode,i=n.memoizedProps,c=null,u=It,u!==null)switch(u.tag){case 27:case 5:c=u.memoizedProps}s[_t]=n,s=!!(s.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Jp(s.nodeValue,i)),s||Cn(n)}else s=Po(s).createTextNode(c),s[_t]=n,n.stateNode=s}return mt(n),null;case 13:if(c=n.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(u=yl(n),c!==null&&c.dehydrated!==null){if(s===null){if(!u)throw Error(l(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[_t]=n}else wl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),u=!1}else u=qh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(ma(n),n):(ma(n),null)}if(ma(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=c!==null,s=s!==null&&s.memoizedState!==null,i){c=n.child,u=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(u=c.alternate.memoizedState.cachePool.pool);var f=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==u&&(c.flags|=2048)}return i!==s&&i&&(n.child.flags|=8192),yo(n,n.updateQueue),mt(n),null;case 4:return Ke(),s===null&&Iu(n.stateNode.containerInfo),mt(n),null;case 10:return da(n.type),mt(n),null;case 19:if(M(St),u=n.memoizedState,u===null)return mt(n),null;if(c=(n.flags&128)!==0,f=u.rendering,f===null)if(c)Fl(u,!1);else{if(ht!==0||s!==null&&(s.flags&128)!==0)for(s=n.child;s!==null;){if(f=ho(s),f!==null){for(n.flags|=128,Fl(u,!1),s=f.updateQueue,n.updateQueue=s,yo(n,s),n.subtreeFlags=0,s=i,i=n.child;i!==null;)Lh(i,s),i=i.sibling;return G(St,St.current&1|2),n.child}s=s.sibling}u.tail!==null&&Qs()>jo&&(n.flags|=128,c=!0,Fl(u,!1),n.lanes=4194304)}else{if(!c)if(s=ho(f),s!==null){if(n.flags|=128,c=!0,s=s.updateQueue,n.updateQueue=s,yo(n,s),Fl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Ye)return mt(n),null}else 2*Qs()-u.renderingStartTime>jo&&i!==536870912&&(n.flags|=128,c=!0,Fl(u,!1),n.lanes=4194304);u.isBackwards?(f.sibling=n.child,n.child=f):(s=u.last,s!==null?s.sibling=f:n.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Qs(),n.sibling=null,s=St.current,G(St,c?s&1|2:s&1),n):(mt(n),null);case 22:case 23:return ma(n),Hd(),c=n.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(mt(n),n.subtreeFlags&6&&(n.flags|=8192)):mt(n),i=n.updateQueue,i!==null&&yo(n,i.retryQueue),i=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),s!==null&&M(An),null;case 24:return i=null,s!==null&&(i=s.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),da(Nt),mt(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function kv(s,n){switch(Rd(n),n.tag){case 1:return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 3:return da(Nt),Ke(),s=n.flags,(s&65536)!==0&&(s&128)===0?(n.flags=s&-65537|128,n):null;case 26:case 27:case 5:return Oi(n),null;case 13:if(ma(n),s=n.memoizedState,s!==null&&s.dehydrated!==null){if(n.alternate===null)throw Error(l(340));wl()}return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 19:return M(St),null;case 4:return Ke(),null;case 10:return da(n.type),null;case 22:case 23:return ma(n),Hd(),s!==null&&M(An),s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 24:return da(Nt),null;case 25:return null;default:return null}}function ip(s,n){switch(Rd(n),n.tag){case 3:da(Nt),Ke();break;case 26:case 27:case 5:Oi(n);break;case 4:Ke();break;case 13:ma(n);break;case 19:M(St);break;case 10:da(n.type);break;case 22:case 23:ma(n),Hd(),s!==null&&M(An);break;case 24:da(Nt)}}function Dl(s,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var u=c.next;i=u;do{if((i.tag&s)===s){c=void 0;var f=i.create,S=i.inst;c=f(),S.destroy=c}i=i.next}while(i!==u)}}catch(O){rt(n,n.return,O)}}function za(s,n,i){try{var c=n.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var f=u.next;c=f;do{if((c.tag&s)===s){var S=c.inst,O=S.destroy;if(O!==void 0){S.destroy=void 0,u=n;var U=i,ae=O;try{ae()}catch(fe){rt(u,U,fe)}}}c=c.next}while(c!==f)}}catch(fe){rt(n,n.return,fe)}}function op(s){var n=s.updateQueue;if(n!==null){var i=s.stateNode;try{Yh(n,i)}catch(c){rt(s,s.return,c)}}}function cp(s,n,i){i.props=Rn(s.type,s.memoizedProps),i.state=s.memoizedState;try{i.componentWillUnmount()}catch(c){rt(s,n,c)}}function ql(s,n){try{var i=s.ref;if(i!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof i=="function"?s.refCleanup=i(c):i.current=c}}catch(u){rt(s,n,u)}}function Vs(s,n){var i=s.ref,c=s.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(u){rt(s,n,u)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){rt(s,n,u)}else i.current=null}function dp(s){var n=s.type,i=s.memoizedProps,c=s.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(u){rt(s,s.return,u)}}function bu(s,n,i){try{var c=s.stateNode;Kv(c,s.type,i,n),c[Yt]=n}catch(u){rt(s,s.return,u)}}function up(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ka(s.type)||s.tag===4}function yu(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||up(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ka(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wu(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(s,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(s),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=To));else if(c!==4&&(c===27&&Ka(s.type)&&(i=s.stateNode,n=null),s=s.child,s!==null))for(wu(s,n,i),s=s.sibling;s!==null;)wu(s,n,i),s=s.sibling}function wo(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?i.insertBefore(s,n):i.appendChild(s);else if(c!==4&&(c===27&&Ka(s.type)&&(i=s.stateNode),s=s.child,s!==null))for(wo(s,n,i),s=s.sibling;s!==null;)wo(s,n,i),s=s.sibling}function mp(s){var n=s.stateNode,i=s.memoizedProps;try{for(var c=s.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Pt(n,c,i),n[_t]=s,n[Yt]=i}catch(f){rt(s,s.return,f)}}var xa=!1,gt=!1,vu=!1,fp=typeof WeakSet=="function"?WeakSet:Set,At=null;function Ev(s,n){if(s=s.containerInfo,Qu=qo,s=Sh(s),yd(s)){if("selectionStart"in s)var i={start:s.selectionStart,end:s.selectionEnd};else e:{i=(i=s.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var u=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var S=0,O=-1,U=-1,ae=0,fe=0,pe=s,ne=null;t:for(;;){for(var le;pe!==i||u!==0&&pe.nodeType!==3||(O=S+u),pe!==f||c!==0&&pe.nodeType!==3||(U=S+c),pe.nodeType===3&&(S+=pe.nodeValue.length),(le=pe.firstChild)!==null;)ne=pe,pe=le;for(;;){if(pe===s)break t;if(ne===i&&++ae===u&&(O=S),ne===f&&++fe===c&&(U=S),(le=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=le}i=O===-1||U===-1?null:{start:O,end:U}}else i=null}i=i||{start:0,end:0}}else i=null;for(Gu={focusedElem:s,selectionRange:i},qo=!1,At=n;At!==null;)if(n=At,s=n.child,(n.subtreeFlags&1024)!==0&&s!==null)s.return=n,At=s;else for(;At!==null;){switch(n=At,f=n.alternate,s=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&f!==null){s=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,c=i.stateNode;try{var Te=Rn(i.type,u,i.elementType===i.type);s=c.getSnapshotBeforeUpdate(Te,f),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ee){rt(i,i.return,Ee)}}break;case 3:if((s&1024)!==0){if(s=n.stateNode.containerInfo,i=s.nodeType,i===9)Yu(s);else if(i===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Yu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(l(163))}if(s=n.sibling,s!==null){s.return=n.return,At=s;break}At=n.return}}function hp(s,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Ua(s,i),c&4&&Dl(5,i);break;case 1:if(Ua(s,i),c&4)if(s=i.stateNode,n===null)try{s.componentDidMount()}catch(S){rt(i,i.return,S)}else{var u=Rn(i.type,n.memoizedProps);n=n.memoizedState;try{s.componentDidUpdate(u,n,s.__reactInternalSnapshotBeforeUpdate)}catch(S){rt(i,i.return,S)}}c&64&&op(i),c&512&&ql(i,i.return);break;case 3:if(Ua(s,i),c&64&&(s=i.updateQueue,s!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Yh(s,n)}catch(S){rt(i,i.return,S)}}break;case 27:n===null&&c&4&&mp(i);case 26:case 5:Ua(s,i),n===null&&c&4&&dp(i),c&512&&ql(i,i.return);break;case 12:Ua(s,i);break;case 13:Ua(s,i),c&4&&gp(s,i),c&64&&(s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(i=Fv.bind(null,i),ej(s,i))));break;case 22:if(c=i.memoizedState!==null||xa,!c){n=n!==null&&n.memoizedState!==null||gt,u=xa;var f=gt;xa=c,(gt=n)&&!f?$a(s,i,(i.subtreeFlags&8772)!==0):Ua(s,i),xa=u,gt=f}break;case 30:break;default:Ua(s,i)}}function xp(s){var n=s.alternate;n!==null&&(s.alternate=null,xp(n)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(n=s.stateNode,n!==null&&ed(n)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dt=null,Zt=!1;function pa(s,n,i){for(i=i.child;i!==null;)pp(s,n,i),i=i.sibling}function pp(s,n,i){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(rl,i)}catch{}switch(i.tag){case 26:gt||Vs(i,n),pa(s,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:gt||Vs(i,n);var c=dt,u=Zt;Ka(i.type)&&(dt=i.stateNode,Zt=!1),pa(s,n,i),Kl(i.stateNode),dt=c,Zt=u;break;case 5:gt||Vs(i,n);case 6:if(c=dt,u=Zt,dt=null,pa(s,n,i),dt=c,Zt=u,dt!==null)if(Zt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(i.stateNode)}catch(f){rt(i,n,f)}else try{dt.removeChild(i.stateNode)}catch(f){rt(i,n,f)}break;case 18:dt!==null&&(Zt?(s=dt,ng(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.stateNode),ti(s)):ng(dt,i.stateNode));break;case 4:c=dt,u=Zt,dt=i.stateNode.containerInfo,Zt=!0,pa(s,n,i),dt=c,Zt=u;break;case 0:case 11:case 14:case 15:gt||za(2,i,n),gt||za(4,i,n),pa(s,n,i);break;case 1:gt||(Vs(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&cp(i,n,c)),pa(s,n,i);break;case 21:pa(s,n,i);break;case 22:gt=(c=gt)||i.memoizedState!==null,pa(s,n,i),gt=c;break;default:pa(s,n,i)}}function gp(s,n){if(n.memoizedState===null&&(s=n.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ti(s)}catch(i){rt(n,n.return,i)}}function Av(s){switch(s.tag){case 13:case 19:var n=s.stateNode;return n===null&&(n=s.stateNode=new fp),n;case 22:return s=s.stateNode,n=s._retryCache,n===null&&(n=s._retryCache=new fp),n;default:throw Error(l(435,s.tag))}}function ju(s,n){var i=Av(s);n.forEach(function(c){var u=Dv.bind(null,s,c);i.has(c)||(i.add(c),c.then(u,u))})}function ds(s,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var u=i[c],f=s,S=n,O=S;e:for(;O!==null;){switch(O.tag){case 27:if(Ka(O.type)){dt=O.stateNode,Zt=!1;break e}break;case 5:dt=O.stateNode,Zt=!1;break e;case 3:case 4:dt=O.stateNode.containerInfo,Zt=!0;break e}O=O.return}if(dt===null)throw Error(l(160));pp(f,S,u),dt=null,Zt=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)bp(n,s),n=n.sibling}var Fs=null;function bp(s,n){var i=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ds(n,s),us(s),c&4&&(za(3,s,s.return),Dl(3,s),za(5,s,s.return));break;case 1:ds(n,s),us(s),c&512&&(gt||i===null||Vs(i,i.return)),c&64&&xa&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(i=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var u=Fs;if(ds(n,s),us(s),c&512&&(gt||i===null||Vs(i,i.return)),c&4){var f=i!==null?i.memoizedState:null;if(c=s.memoizedState,i===null)if(c===null)if(s.stateNode===null){e:{c=s.type,i=s.memoizedProps,u=u.ownerDocument||u;t:switch(c){case"title":f=u.getElementsByTagName("title")[0],(!f||f[ol]||f[_t]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(c),u.head.insertBefore(f,u.querySelector("head > title"))),Pt(f,c,i),f[_t]=s,kt(f),c=f;break e;case"link":var S=mg("link","href",u).get(c+(i.href||""));if(S){for(var O=0;O<S.length;O++)if(f=S[O],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){S.splice(O,1);break t}}f=u.createElement(c),Pt(f,c,i),u.head.appendChild(f);break;case"meta":if(S=mg("meta","content",u).get(c+(i.content||""))){for(O=0;O<S.length;O++)if(f=S[O],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){S.splice(O,1);break t}}f=u.createElement(c),Pt(f,c,i),u.head.appendChild(f);break;default:throw Error(l(468,c))}f[_t]=s,kt(f),c=f}s.stateNode=c}else fg(u,s.type,s.stateNode);else s.stateNode=ug(u,c,s.memoizedProps);else f!==c?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,c===null?fg(u,s.type,s.stateNode):ug(u,c,s.memoizedProps)):c===null&&s.stateNode!==null&&bu(s,s.memoizedProps,i.memoizedProps)}break;case 27:ds(n,s),us(s),c&512&&(gt||i===null||Vs(i,i.return)),i!==null&&c&4&&bu(s,s.memoizedProps,i.memoizedProps);break;case 5:if(ds(n,s),us(s),c&512&&(gt||i===null||Vs(i,i.return)),s.flags&32){u=s.stateNode;try{ar(u,"")}catch(le){rt(s,s.return,le)}}c&4&&s.stateNode!=null&&(u=s.memoizedProps,bu(s,u,i!==null?i.memoizedProps:u)),c&1024&&(vu=!0);break;case 6:if(ds(n,s),us(s),c&4){if(s.stateNode===null)throw Error(l(162));c=s.memoizedProps,i=s.stateNode;try{i.nodeValue=c}catch(le){rt(s,s.return,le)}}break;case 3:if(_o=null,u=Fs,Fs=Mo(n.containerInfo),ds(n,s),Fs=u,us(s),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ti(n.containerInfo)}catch(le){rt(s,s.return,le)}vu&&(vu=!1,yp(s));break;case 4:c=Fs,Fs=Mo(s.stateNode.containerInfo),ds(n,s),us(s),Fs=c;break;case 12:ds(n,s),us(s);break;case 13:ds(n,s),us(s),s.child.flags&8192&&s.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Au=Qs()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,ju(s,c)));break;case 22:u=s.memoizedState!==null;var U=i!==null&&i.memoizedState!==null,ae=xa,fe=gt;if(xa=ae||u,gt=fe||U,ds(n,s),gt=fe,xa=ae,us(s),c&8192)e:for(n=s.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||U||xa||gt||Tn(s)),i=null,n=s;;){if(n.tag===5||n.tag===26){if(i===null){U=i=n;try{if(f=U.stateNode,u)S=f.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{O=U.stateNode;var pe=U.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;O.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(le){rt(U,U.return,le)}}}else if(n.tag===6){if(i===null){U=n;try{U.stateNode.nodeValue=u?"":U.memoizedProps}catch(le){rt(U,U.return,le)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===s)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=s.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,ju(s,i))));break;case 19:ds(n,s),us(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,ju(s,c)));break;case 30:break;case 21:break;default:ds(n,s),us(s)}}function us(s){var n=s.flags;if(n&2){try{for(var i,c=s.return;c!==null;){if(up(c)){i=c;break}c=c.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var u=i.stateNode,f=yu(s);wo(s,f,u);break;case 5:var S=i.stateNode;i.flags&32&&(ar(S,""),i.flags&=-33);var O=yu(s);wo(s,O,S);break;case 3:case 4:var U=i.stateNode.containerInfo,ae=yu(s);wu(s,ae,U);break;default:throw Error(l(161))}}catch(fe){rt(s,s.return,fe)}s.flags&=-3}n&4096&&(s.flags&=-4097)}function yp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var n=s;yp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),s=s.sibling}}function Ua(s,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)hp(s,n.alternate,n),n=n.sibling}function Tn(s){for(s=s.child;s!==null;){var n=s;switch(n.tag){case 0:case 11:case 14:case 15:za(4,n,n.return),Tn(n);break;case 1:Vs(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&cp(n,n.return,i),Tn(n);break;case 27:Kl(n.stateNode);case 26:case 5:Vs(n,n.return),Tn(n);break;case 22:n.memoizedState===null&&Tn(n);break;case 30:Tn(n);break;default:Tn(n)}s=s.sibling}}function $a(s,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,u=s,f=n,S=f.flags;switch(f.tag){case 0:case 11:case 15:$a(u,f,i),Dl(4,f);break;case 1:if($a(u,f,i),c=f,u=c.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(ae){rt(c,c.return,ae)}if(c=f,u=c.updateQueue,u!==null){var O=c.stateNode;try{var U=u.shared.hiddenCallbacks;if(U!==null)for(u.shared.hiddenCallbacks=null,u=0;u<U.length;u++)Vh(U[u],O)}catch(ae){rt(c,c.return,ae)}}i&&S&64&&op(f),ql(f,f.return);break;case 27:mp(f);case 26:case 5:$a(u,f,i),i&&c===null&&S&4&&dp(f),ql(f,f.return);break;case 12:$a(u,f,i);break;case 13:$a(u,f,i),i&&S&4&&gp(u,f);break;case 22:f.memoizedState===null&&$a(u,f,i),ql(f,f.return);break;case 30:break;default:$a(u,f,i)}n=n.sibling}}function Nu(s,n){var i=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(s!=null&&s.refCount++,i!=null&&Nl(i))}function Su(s,n){s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nl(s))}function Ys(s,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wp(s,n,i,c),n=n.sibling}function wp(s,n,i,c){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Ys(s,n,i,c),u&2048&&Dl(9,n);break;case 1:Ys(s,n,i,c);break;case 3:Ys(s,n,i,c),u&2048&&(s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nl(s)));break;case 12:if(u&2048){Ys(s,n,i,c),s=n.stateNode;try{var f=n.memoizedProps,S=f.id,O=f.onPostCommit;typeof O=="function"&&O(S,n.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){rt(n,n.return,U)}}else Ys(s,n,i,c);break;case 13:Ys(s,n,i,c);break;case 23:break;case 22:f=n.stateNode,S=n.alternate,n.memoizedState!==null?f._visibility&2?Ys(s,n,i,c):zl(s,n):f._visibility&2?Ys(s,n,i,c):(f._visibility|=2,jr(s,n,i,c,(n.subtreeFlags&10256)!==0)),u&2048&&Nu(S,n);break;case 24:Ys(s,n,i,c),u&2048&&Su(n.alternate,n);break;default:Ys(s,n,i,c)}}function jr(s,n,i,c,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=s,S=n,O=i,U=c,ae=S.flags;switch(S.tag){case 0:case 11:case 15:jr(f,S,O,U,u),Dl(8,S);break;case 23:break;case 22:var fe=S.stateNode;S.memoizedState!==null?fe._visibility&2?jr(f,S,O,U,u):zl(f,S):(fe._visibility|=2,jr(f,S,O,U,u)),u&&ae&2048&&Nu(S.alternate,S);break;case 24:jr(f,S,O,U,u),u&&ae&2048&&Su(S.alternate,S);break;default:jr(f,S,O,U,u)}n=n.sibling}}function zl(s,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=s,c=n,u=c.flags;switch(c.tag){case 22:zl(i,c),u&2048&&Nu(c.alternate,c);break;case 24:zl(i,c),u&2048&&Su(c.alternate,c);break;default:zl(i,c)}n=n.sibling}}var Ul=8192;function Nr(s){if(s.subtreeFlags&Ul)for(s=s.child;s!==null;)vp(s),s=s.sibling}function vp(s){switch(s.tag){case 26:Nr(s),s.flags&Ul&&s.memoizedState!==null&&fj(Fs,s.memoizedState,s.memoizedProps);break;case 5:Nr(s);break;case 3:case 4:var n=Fs;Fs=Mo(s.stateNode.containerInfo),Nr(s),Fs=n;break;case 22:s.memoizedState===null&&(n=s.alternate,n!==null&&n.memoizedState!==null?(n=Ul,Ul=16777216,Nr(s),Ul=n):Nr(s));break;default:Nr(s)}}function jp(s){var n=s.alternate;if(n!==null&&(s=n.child,s!==null)){n.child=null;do n=s.sibling,s.sibling=null,s=n;while(s!==null)}}function $l(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,Sp(c,s)}jp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Np(s),s=s.sibling}function Np(s){switch(s.tag){case 0:case 11:case 15:$l(s),s.flags&2048&&za(9,s,s.return);break;case 3:$l(s);break;case 12:$l(s);break;case 22:var n=s.stateNode;s.memoizedState!==null&&n._visibility&2&&(s.return===null||s.return.tag!==13)?(n._visibility&=-3,vo(s)):$l(s);break;default:$l(s)}}function vo(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,Sp(c,s)}jp(s)}for(s=s.child;s!==null;){switch(n=s,n.tag){case 0:case 11:case 15:za(8,n,n.return),vo(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,vo(n));break;default:vo(n)}s=s.sibling}}function Sp(s,n){for(;At!==null;){var i=At;switch(i.tag){case 0:case 11:case 15:za(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nl(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,At=c;else e:for(i=s;At!==null;){c=At;var u=c.sibling,f=c.return;if(xp(c),c===i){At=null;break e}if(u!==null){u.return=f,At=u;break e}At=f}}}var Ov={getCacheForType:function(s){var n=Ft(Nt),i=n.data.get(s);return i===void 0&&(i=s(),n.data.set(s,i)),i}},Rv=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ot=null,Ie=null,Ge=0,Je=0,ms=null,Ia=!1,Sr=!1,Cu=!1,ga=0,ht=0,Ba=0,Pn=0,ku=0,As=0,Cr=0,Il=null,Jt=null,Eu=!1,Au=0,jo=1/0,No=null,Ha=null,Tt=0,Qa=null,kr=null,Er=0,Ou=0,Ru=null,Cp=null,Bl=0,Tu=null;function fs(){if((Ze&2)!==0&&Ge!==0)return Ge&-Ge;if(F.T!==null){var s=hr;return s!==0?s:qu()}return $f()}function kp(){As===0&&(As=(Ge&536870912)===0||Ye?Df():536870912);var s=Es.current;return s!==null&&(s.flags|=32),As}function hs(s,n,i){(s===ot&&(Je===2||Je===9)||s.cancelPendingCommit!==null)&&(Ar(s,0),Ga(s,Ge,As,!1)),il(s,i),((Ze&2)===0||s!==ot)&&(s===ot&&((Ze&2)===0&&(Pn|=i),ht===4&&Ga(s,Ge,As,!1)),Ws(s))}function Ep(s,n,i){if((Ze&6)!==0)throw Error(l(327));var c=!i&&(n&124)===0&&(n&s.expiredLanes)===0||ll(s,n),u=c?Mv(s,n):Lu(s,n,!0),f=c;do{if(u===0){Sr&&!c&&Ga(s,n,0,!1);break}else{if(i=s.current.alternate,f&&!Tv(i)){u=Lu(s,n,!1),f=!1;continue}if(u===2){if(f=n,s.errorRecoveryDisabledLanes&f)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;e:{var O=s;u=Il;var U=O.current.memoizedState.isDehydrated;if(U&&(Ar(O,S).flags|=256),S=Lu(O,S,!1),S!==2){if(Cu&&!U){O.errorRecoveryDisabledLanes|=f,Pn|=f,u=4;break e}f=Jt,Jt=u,f!==null&&(Jt===null?Jt=f:Jt.push.apply(Jt,f))}u=S}if(f=!1,u!==2)continue}}if(u===1){Ar(s,0),Ga(s,n,0,!0);break}e:{switch(c=s,f=u,f){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Ga(c,n,As,!Ia);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(u=Au+300-Qs(),10<u)){if(Ga(c,n,As,!Ia),Mi(c,0,!0)!==0)break e;c.timeoutHandle=sg(Ap.bind(null,c,i,Jt,No,Eu,n,As,Pn,Cr,Ia,f,2,-0,0),u);break e}Ap(c,i,Jt,No,Eu,n,As,Pn,Cr,Ia,f,0,-0,0)}}break}while(!0);Ws(s)}function Ap(s,n,i,c,u,f,S,O,U,ae,fe,pe,ne,le){if(s.timeoutHandle=-1,pe=n.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Wl={stylesheets:null,count:0,unsuspend:mj},vp(n),pe=hj(),pe!==null)){s.cancelPendingCommit=pe(_p.bind(null,s,n,f,i,c,u,S,O,U,fe,1,ne,le)),Ga(s,f,S,!ae);return}_p(s,n,f,i,c,u,S,O,U)}function Tv(s){for(var n=s;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var u=i[c],f=u.getSnapshot;u=u.value;try{if(!os(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ga(s,n,i,c){n&=~ku,n&=~Pn,s.suspendedLanes|=n,s.pingedLanes&=~n,c&&(s.warmLanes|=n),c=s.expirationTimes;for(var u=n;0<u;){var f=31-is(u),S=1<<f;c[f]=-1,u&=~S}i!==0&&zf(s,i,n)}function So(){return(Ze&6)===0?(Hl(0),!1):!0}function Pu(){if(Ie!==null){if(Je===0)var s=Ie.return;else s=Ie,ca=kn=null,Yd(s),wr=null,Ll=0,s=Ie;for(;s!==null;)ip(s.alternate,s),s=s.return;Ie=null}}function Ar(s,n){var i=s.timeoutHandle;i!==-1&&(s.timeoutHandle=-1,Yv(i)),i=s.cancelPendingCommit,i!==null&&(s.cancelPendingCommit=null,i()),Pu(),ot=s,Ie=i=la(s.current,null),Ge=n,Je=0,ms=null,Ia=!1,Sr=ll(s,n),Cu=!1,Cr=As=ku=Pn=Ba=ht=0,Jt=Il=null,Eu=!1,(n&8)!==0&&(n|=n&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=n;0<c;){var u=31-is(c),f=1<<u;n|=s[u],c&=~f}return ga=n,Qi(),i}function Op(s,n){Ue=null,F.H=uo,n===Cl||n===eo?(n=Gh(),Je=3):n===Bh?(n=Gh(),Je=4):Je=n===Kx?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ms=n,Ie===null&&(ht=1,po(s,Ns(n,s.current)))}function Rp(){var s=F.H;return F.H=uo,s===null?uo:s}function Tp(){var s=F.A;return F.A=Ov,s}function Mu(){ht=4,Ia||(Ge&4194048)!==Ge&&Es.current!==null||(Sr=!0),(Ba&134217727)===0&&(Pn&134217727)===0||ot===null||Ga(ot,Ge,As,!1)}function Lu(s,n,i){var c=Ze;Ze|=2;var u=Rp(),f=Tp();(ot!==s||Ge!==n)&&(No=null,Ar(s,n)),n=!1;var S=ht;e:do try{if(Je!==0&&Ie!==null){var O=Ie,U=ms;switch(Je){case 8:Pu(),S=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(n=!0);var ae=Je;if(Je=0,ms=null,Or(s,O,U,ae),i&&Sr){S=0;break e}break;default:ae=Je,Je=0,ms=null,Or(s,O,U,ae)}}Pv(),S=ht;break}catch(fe){Op(s,fe)}while(!0);return n&&s.shellSuspendCounter++,ca=kn=null,Ze=c,F.H=u,F.A=f,Ie===null&&(ot=null,Ge=0,Qi()),S}function Pv(){for(;Ie!==null;)Pp(Ie)}function Mv(s,n){var i=Ze;Ze|=2;var c=Rp(),u=Tp();ot!==s||Ge!==n?(No=null,jo=Qs()+500,Ar(s,n)):Sr=ll(s,n);e:do try{if(Je!==0&&Ie!==null){n=Ie;var f=ms;t:switch(Je){case 1:Je=0,ms=null,Or(s,n,f,1);break;case 2:case 9:if(Hh(f)){Je=0,ms=null,Mp(n);break}n=function(){Je!==2&&Je!==9||ot!==s||(Je=7),Ws(s)},f.then(n,n);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Hh(f)?(Je=0,ms=null,Mp(n)):(Je=0,ms=null,Or(s,n,f,7));break;case 5:var S=null;switch(Ie.tag){case 26:S=Ie.memoizedState;case 5:case 27:var O=Ie;if(!S||hg(S)){Je=0,ms=null;var U=O.sibling;if(U!==null)Ie=U;else{var ae=O.return;ae!==null?(Ie=ae,Co(ae)):Ie=null}break t}}Je=0,ms=null,Or(s,n,f,5);break;case 6:Je=0,ms=null,Or(s,n,f,6);break;case 8:Pu(),ht=6;break e;default:throw Error(l(462))}}Lv();break}catch(fe){Op(s,fe)}while(!0);return ca=kn=null,F.H=c,F.A=u,Ze=i,Ie!==null?0:(ot=null,Ge=0,Qi(),ht)}function Lv(){for(;Ie!==null&&!sw();)Pp(Ie)}function Pp(s){var n=rp(s.alternate,s,ga);s.memoizedProps=s.pendingProps,n===null?Co(s):Ie=n}function Mp(s){var n=s,i=n.alternate;switch(n.tag){case 15:case 0:n=Jx(i,n,n.pendingProps,n.type,void 0,Ge);break;case 11:n=Jx(i,n,n.pendingProps,n.type.render,n.ref,Ge);break;case 5:Yd(n);default:ip(i,n),n=Ie=Lh(n,ga),n=rp(i,n,ga)}s.memoizedProps=s.pendingProps,n===null?Co(s):Ie=n}function Or(s,n,i,c){ca=kn=null,Yd(n),wr=null,Ll=0;var u=n.return;try{if(Nv(s,u,n,i,Ge)){ht=1,po(s,Ns(i,s.current)),Ie=null;return}}catch(f){if(u!==null)throw Ie=u,f;ht=1,po(s,Ns(i,s.current)),Ie=null;return}n.flags&32768?(Ye||c===1?s=!0:Sr||(Ge&536870912)!==0?s=!1:(Ia=s=!0,(c===2||c===9||c===3||c===6)&&(c=Es.current,c!==null&&c.tag===13&&(c.flags|=16384))),Lp(n,s)):Co(n)}function Co(s){var n=s;do{if((n.flags&32768)!==0){Lp(n,Ia);return}s=n.return;var i=Cv(n.alternate,n,ga);if(i!==null){Ie=i;return}if(n=n.sibling,n!==null){Ie=n;return}Ie=n=s}while(n!==null);ht===0&&(ht=5)}function Lp(s,n){do{var i=kv(s.alternate,s);if(i!==null){i.flags&=32767,Ie=i;return}if(i=s.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(s=s.sibling,s!==null)){Ie=s;return}Ie=s=i}while(s!==null);ht=6,Ie=null}function _p(s,n,i,c,u,f,S,O,U){s.cancelPendingCommit=null;do ko();while(Tt!==0);if((Ze&6)!==0)throw Error(l(327));if(n!==null){if(n===s.current)throw Error(l(177));if(f=n.lanes|n.childLanes,f|=Sd,mw(s,i,f,S,O,U),s===ot&&(Ie=ot=null,Ge=0),kr=n,Qa=s,Er=i,Ou=f,Ru=u,Cp=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,qv(Ri,function(){return Up(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=F.T,F.T=null,u=W.p,W.p=2,S=Ze,Ze|=4;try{Ev(s,n,i)}finally{Ze=S,W.p=u,F.T=c}}Tt=1,Fp(),Dp(),qp()}}function Fp(){if(Tt===1){Tt=0;var s=Qa,n=kr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=F.T,F.T=null;var c=W.p;W.p=2;var u=Ze;Ze|=4;try{bp(n,s);var f=Gu,S=Sh(s.containerInfo),O=f.focusedElem,U=f.selectionRange;if(S!==O&&O&&O.ownerDocument&&Nh(O.ownerDocument.documentElement,O)){if(U!==null&&yd(O)){var ae=U.start,fe=U.end;if(fe===void 0&&(fe=ae),"selectionStart"in O)O.selectionStart=ae,O.selectionEnd=Math.min(fe,O.value.length);else{var pe=O.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),Te=O.textContent.length,Ee=Math.min(U.start,Te),st=U.end===void 0?Ee:Math.min(U.end,Te);!le.extend&&Ee>st&&(S=st,st=Ee,Ee=S);var X=jh(O,Ee),Q=jh(O,st);if(X&&Q&&(le.rangeCount!==1||le.anchorNode!==X.node||le.anchorOffset!==X.offset||le.focusNode!==Q.node||le.focusOffset!==Q.offset)){var ee=pe.createRange();ee.setStart(X.node,X.offset),le.removeAllRanges(),Ee>st?(le.addRange(ee),le.extend(Q.node,Q.offset)):(ee.setEnd(Q.node,Q.offset),le.addRange(ee))}}}}for(pe=[],le=O;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<pe.length;O++){var xe=pe[O];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}qo=!!Qu,Gu=Qu=null}finally{Ze=u,W.p=c,F.T=i}}s.current=n,Tt=2}}function Dp(){if(Tt===2){Tt=0;var s=Qa,n=kr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=F.T,F.T=null;var c=W.p;W.p=2;var u=Ze;Ze|=4;try{hp(s,n.alternate,n)}finally{Ze=u,W.p=c,F.T=i}}Tt=3}}function qp(){if(Tt===4||Tt===3){Tt=0,aw();var s=Qa,n=kr,i=Er,c=Cp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Tt=5:(Tt=0,kr=Qa=null,zp(s,s.pendingLanes));var u=s.pendingLanes;if(u===0&&(Ha=null),Zc(i),n=n.stateNode,ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(rl,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=F.T,u=W.p,W.p=2,F.T=null;try{for(var f=s.onRecoverableError,S=0;S<c.length;S++){var O=c[S];f(O.value,{componentStack:O.stack})}}finally{F.T=n,W.p=u}}(Er&3)!==0&&ko(),Ws(s),u=s.pendingLanes,(i&4194090)!==0&&(u&42)!==0?s===Tu?Bl++:(Bl=0,Tu=s):Bl=0,Hl(0)}}function zp(s,n){(s.pooledCacheLanes&=n)===0&&(n=s.pooledCache,n!=null&&(s.pooledCache=null,Nl(n)))}function ko(s){return Fp(),Dp(),qp(),Up()}function Up(){if(Tt!==5)return!1;var s=Qa,n=Ou;Ou=0;var i=Zc(Er),c=F.T,u=W.p;try{W.p=32>i?32:i,F.T=null,i=Ru,Ru=null;var f=Qa,S=Er;if(Tt=0,kr=Qa=null,Er=0,(Ze&6)!==0)throw Error(l(331));var O=Ze;if(Ze|=4,Np(f.current),wp(f,f.current,S,i),Ze=O,Hl(0,!1),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(rl,f)}catch{}return!0}finally{W.p=u,F.T=c,zp(s,n)}}function $p(s,n,i){n=Ns(i,n),n=cu(s.stateNode,n,2),s=_a(s,n,2),s!==null&&(il(s,2),Ws(s))}function rt(s,n,i){if(s.tag===3)$p(s,s,i);else for(;n!==null;){if(n.tag===3){$p(n,s,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ha===null||!Ha.has(c))){s=Ns(i,s),i=Qx(2),c=_a(n,i,2),c!==null&&(Gx(i,c,n,s),il(c,2),Ws(c));break}}n=n.return}}function _u(s,n,i){var c=s.pingCache;if(c===null){c=s.pingCache=new Rv;var u=new Set;c.set(n,u)}else u=c.get(n),u===void 0&&(u=new Set,c.set(n,u));u.has(i)||(Cu=!0,u.add(i),s=_v.bind(null,s,n,i),n.then(s,s))}function _v(s,n,i){var c=s.pingCache;c!==null&&c.delete(n),s.pingedLanes|=s.suspendedLanes&i,s.warmLanes&=~i,ot===s&&(Ge&i)===i&&(ht===4||ht===3&&(Ge&62914560)===Ge&&300>Qs()-Au?(Ze&2)===0&&Ar(s,0):ku|=i,Cr===Ge&&(Cr=0)),Ws(s)}function Ip(s,n){n===0&&(n=qf()),s=dr(s,n),s!==null&&(il(s,n),Ws(s))}function Fv(s){var n=s.memoizedState,i=0;n!==null&&(i=n.retryLane),Ip(s,i)}function Dv(s,n){var i=0;switch(s.tag){case 13:var c=s.stateNode,u=s.memoizedState;u!==null&&(i=u.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(l(314))}c!==null&&c.delete(n),Ip(s,i)}function qv(s,n){return Vc(s,n)}var Eo=null,Rr=null,Fu=!1,Ao=!1,Du=!1,Mn=0;function Ws(s){s!==Rr&&s.next===null&&(Rr===null?Eo=Rr=s:Rr=Rr.next=s),Ao=!0,Fu||(Fu=!0,Uv())}function Hl(s,n){if(!Du&&Ao){Du=!0;do for(var i=!1,c=Eo;c!==null;){if(s!==0){var u=c.pendingLanes;if(u===0)var f=0;else{var S=c.suspendedLanes,O=c.pingedLanes;f=(1<<31-is(42|s)+1)-1,f&=u&~(S&~O),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Gp(c,f))}else f=Ge,f=Mi(c,c===ot?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||ll(c,f)||(i=!0,Gp(c,f));c=c.next}while(i);Du=!1}}function zv(){Bp()}function Bp(){Ao=Fu=!1;var s=0;Mn!==0&&(Vv()&&(s=Mn),Mn=0);for(var n=Qs(),i=null,c=Eo;c!==null;){var u=c.next,f=Hp(c,n);f===0?(c.next=null,i===null?Eo=u:i.next=u,u===null&&(Rr=i)):(i=c,(s!==0||(f&3)!==0)&&(Ao=!0)),c=u}Hl(s)}function Hp(s,n){for(var i=s.suspendedLanes,c=s.pingedLanes,u=s.expirationTimes,f=s.pendingLanes&-62914561;0<f;){var S=31-is(f),O=1<<S,U=u[S];U===-1?((O&i)===0||(O&c)!==0)&&(u[S]=uw(O,n)):U<=n&&(s.expiredLanes|=O),f&=~O}if(n=ot,i=Ge,i=Mi(s,s===n?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,i===0||s===n&&(Je===2||Je===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Yc(c),s.callbackNode=null,s.callbackPriority=0;if((i&3)===0||ll(s,i)){if(n=i&-i,n===s.callbackPriority)return n;switch(c!==null&&Yc(c),Zc(i)){case 2:case 8:i=_f;break;case 32:i=Ri;break;case 268435456:i=Ff;break;default:i=Ri}return c=Qp.bind(null,s),i=Vc(i,c),s.callbackPriority=n,s.callbackNode=i,n}return c!==null&&c!==null&&Yc(c),s.callbackPriority=2,s.callbackNode=null,2}function Qp(s,n){if(Tt!==0&&Tt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var i=s.callbackNode;if(ko()&&s.callbackNode!==i)return null;var c=Ge;return c=Mi(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Ep(s,c,n),Hp(s,Qs()),s.callbackNode!=null&&s.callbackNode===i?Qp.bind(null,s):null)}function Gp(s,n){if(ko())return null;Ep(s,n,!0)}function Uv(){Wv(function(){(Ze&6)!==0?Vc(Lf,zv):Bp()})}function qu(){return Mn===0&&(Mn=Df()),Mn}function Kp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:qi(""+s)}function Vp(s,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,s.id&&i.setAttribute("form",s.id),n.parentNode.insertBefore(i,n),s=new FormData(s),i.parentNode.removeChild(i),s}function $v(s,n,i,c,u){if(n==="submit"&&i&&i.stateNode===u){var f=Kp((u[Yt]||null).action),S=c.submitter;S&&(n=(n=S[Yt]||null)?Kp(n.formAction):S.getAttribute("formAction"),n!==null&&(f=n,S=null));var O=new Ii("action","action",null,c,u);s.push({event:O,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Mn!==0){var U=S?Vp(u,S):new FormData(u);nu(i,{pending:!0,data:U,method:u.method,action:f},null,U)}}else typeof f=="function"&&(O.preventDefault(),U=S?Vp(u,S):new FormData(u),nu(i,{pending:!0,data:U,method:u.method,action:f},f,U))},currentTarget:u}]})}}for(var zu=0;zu<Nd.length;zu++){var Uu=Nd[zu],Iv=Uu.toLowerCase(),Bv=Uu[0].toUpperCase()+Uu.slice(1);_s(Iv,"on"+Bv)}_s(Eh,"onAnimationEnd"),_s(Ah,"onAnimationIteration"),_s(Oh,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(lv,"onTransitionRun"),_s(iv,"onTransitionStart"),_s(ov,"onTransitionCancel"),_s(Rh,"onTransitionEnd"),er("onMouseEnter",["mouseout","mouseover"]),er("onMouseLeave",["mouseout","mouseover"]),er("onPointerEnter",["pointerout","pointerover"]),er("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function Yp(s,n){n=(n&4)!==0;for(var i=0;i<s.length;i++){var c=s[i],u=c.event;c=c.listeners;e:{var f=void 0;if(n)for(var S=c.length-1;0<=S;S--){var O=c[S],U=O.instance,ae=O.currentTarget;if(O=O.listener,U!==f&&u.isPropagationStopped())break e;f=O,u.currentTarget=ae;try{f(u)}catch(fe){xo(fe)}u.currentTarget=null,f=U}else for(S=0;S<c.length;S++){if(O=c[S],U=O.instance,ae=O.currentTarget,O=O.listener,U!==f&&u.isPropagationStopped())break e;f=O,u.currentTarget=ae;try{f(u)}catch(fe){xo(fe)}u.currentTarget=null,f=U}}}}function Be(s,n){var i=n[Jc];i===void 0&&(i=n[Jc]=new Set);var c=s+"__bubble";i.has(c)||(Wp(n,s,2,!1),i.add(c))}function $u(s,n,i){var c=0;n&&(c|=4),Wp(i,s,c,n)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Iu(s){if(!s[Oo]){s[Oo]=!0,Bf.forEach(function(i){i!=="selectionchange"&&(Hv.has(i)||$u(i,!1,s),$u(i,!0,s))});var n=s.nodeType===9?s:s.ownerDocument;n===null||n[Oo]||(n[Oo]=!0,$u("selectionchange",!1,n))}}function Wp(s,n,i,c){switch(wg(n)){case 2:var u=gj;break;case 8:u=bj;break;default:u=sm}i=u.bind(null,n,i,s),u=void 0,!dd||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),c?u!==void 0?s.addEventListener(n,i,{capture:!0,passive:u}):s.addEventListener(n,i,!0):u!==void 0?s.addEventListener(n,i,{passive:u}):s.addEventListener(n,i,!1)}function Bu(s,n,i,c,u){var f=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var O=c.stateNode.containerInfo;if(O===u)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===u)return;S=S.return}for(;O!==null;){if(S=Xn(O),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=f=S;continue e}O=O.parentNode}}c=c.return}ah(function(){var ae=f,fe=od(i),pe=[];e:{var ne=Th.get(s);if(ne!==void 0){var le=Ii,Te=s;switch(s){case"keypress":if(Ui(i)===0)break e;case"keydown":case"keyup":le=qw;break;case"focusin":Te="focus",le=hd;break;case"focusout":Te="blur",le=hd;break;case"beforeblur":case"afterblur":le=hd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=$w;break;case Eh:case Ah:case Oh:le=Ow;break;case Rh:le=Bw;break;case"scroll":case"scrollend":le=Sw;break;case"wheel":le=Qw;break;case"copy":case"cut":case"paste":le=Tw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=oh;break;case"toggle":case"beforetoggle":le=Kw}var Ee=(n&4)!==0,st=!Ee&&(s==="scroll"||s==="scrollend"),X=Ee?ne!==null?ne+"Capture":null:ne;Ee=[];for(var Q=ae,ee;Q!==null;){var xe=Q;if(ee=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ee===null||X===null||(xe=dl(Q,X),xe!=null&&Ee.push(Gl(Q,xe,ee))),st)break;Q=Q.return}0<Ee.length&&(ne=new le(ne,Te,null,i,fe),pe.push({event:ne,listeners:Ee}))}}if((n&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",ne&&i!==id&&(Te=i.relatedTarget||i.fromElement)&&(Xn(Te)||Te[Wn]))break e;if((le||ne)&&(ne=fe.window===fe?fe:(ne=fe.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(Te=i.relatedTarget||i.toElement,le=ae,Te=Te?Xn(Te):null,Te!==null&&(st=d(Te),Ee=Te.tag,Te!==st||Ee!==5&&Ee!==27&&Ee!==6)&&(Te=null)):(le=null,Te=ae),le!==Te)){if(Ee=lh,xe="onMouseLeave",X="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(Ee=oh,xe="onPointerLeave",X="onPointerEnter",Q="pointer"),st=le==null?ne:cl(le),ee=Te==null?ne:cl(Te),ne=new Ee(xe,Q+"leave",le,i,fe),ne.target=st,ne.relatedTarget=ee,xe=null,Xn(fe)===ae&&(Ee=new Ee(X,Q+"enter",Te,i,fe),Ee.target=ee,Ee.relatedTarget=st,xe=Ee),st=xe,le&&Te)t:{for(Ee=le,X=Te,Q=0,ee=Ee;ee;ee=Tr(ee))Q++;for(ee=0,xe=X;xe;xe=Tr(xe))ee++;for(;0<Q-ee;)Ee=Tr(Ee),Q--;for(;0<ee-Q;)X=Tr(X),ee--;for(;Q--;){if(Ee===X||X!==null&&Ee===X.alternate)break t;Ee=Tr(Ee),X=Tr(X)}Ee=null}else Ee=null;le!==null&&Xp(pe,ne,le,Ee,!1),Te!==null&&st!==null&&Xp(pe,st,Te,Ee,!0)}}e:{if(ne=ae?cl(ae):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var je=ph;else if(hh(ne))if(gh)je=av;else{je=tv;var $e=ev}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ae&&ld(ae.elementType)&&(je=ph):je=sv;if(je&&(je=je(s,ae))){xh(pe,je,i,fe);break e}$e&&$e(s,ne,ae),s==="focusout"&&ae&&ne.type==="number"&&ae.memoizedProps.value!=null&&rd(ne,"number",ne.value)}switch($e=ae?cl(ae):window,s){case"focusin":(hh($e)||$e.contentEditable==="true")&&(ir=$e,wd=ae,bl=null);break;case"focusout":bl=wd=ir=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,Ch(pe,i,fe);break;case"selectionchange":if(rv)break;case"keydown":case"keyup":Ch(pe,i,fe)}var Se;if(pd)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else lr?mh(s,i)&&(Oe="onCompositionEnd"):s==="keydown"&&i.keyCode===229&&(Oe="onCompositionStart");Oe&&(ch&&i.locale!=="ko"&&(lr||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&lr&&(Se=nh()):(Ta=fe,ud="value"in Ta?Ta.value:Ta.textContent,lr=!0)),$e=Ro(ae,Oe),0<$e.length&&(Oe=new ih(Oe,s,null,i,fe),pe.push({event:Oe,listeners:$e}),Se?Oe.data=Se:(Se=fh(i),Se!==null&&(Oe.data=Se)))),(Se=Yw?Ww(s,i):Xw(s,i))&&(Oe=Ro(ae,"onBeforeInput"),0<Oe.length&&($e=new ih("onBeforeInput","beforeinput",null,i,fe),pe.push({event:$e,listeners:Oe}),$e.data=Se)),$v(pe,s,ae,i,fe)}Yp(pe,n)})}function Gl(s,n,i){return{instance:s,listener:n,currentTarget:i}}function Ro(s,n){for(var i=n+"Capture",c=[];s!==null;){var u=s,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=dl(s,i),u!=null&&c.unshift(Gl(s,u,f)),u=dl(s,n),u!=null&&c.push(Gl(s,u,f))),s.tag===3)return c;s=s.return}return[]}function Tr(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Xp(s,n,i,c,u){for(var f=n._reactName,S=[];i!==null&&i!==c;){var O=i,U=O.alternate,ae=O.stateNode;if(O=O.tag,U!==null&&U===c)break;O!==5&&O!==26&&O!==27||ae===null||(U=ae,u?(ae=dl(i,f),ae!=null&&S.unshift(Gl(i,ae,U))):u||(ae=dl(i,f),ae!=null&&S.push(Gl(i,ae,U)))),i=i.return}S.length!==0&&s.push({event:n,listeners:S})}var Qv=/\r\n?/g,Gv=/\u0000|\uFFFD/g;function Zp(s){return(typeof s=="string"?s:""+s).replace(Qv,`
`).replace(Gv,"")}function Jp(s,n){return n=Zp(n),Zp(s)===n}function To(){}function tt(s,n,i,c,u,f){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||ar(s,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&ar(s,""+c);break;case"className":_i(s,"class",c);break;case"tabIndex":_i(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(s,i,c);break;case"style":th(s,c,f);break;case"data":if(n!=="object"){_i(s,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){s.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&tt(s,n,"name",u.name,u,null),tt(s,n,"formEncType",u.formEncType,u,null),tt(s,n,"formMethod",u.formMethod,u,null),tt(s,n,"formTarget",u.formTarget,u,null)):(tt(s,n,"encType",u.encType,u,null),tt(s,n,"method",u.method,u,null),tt(s,n,"target",u.target,u,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"onClick":c!=null&&(s.onclick=To);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(l(60));s.innerHTML=i}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}i=qi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""+c):s.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""):s.removeAttribute(i);break;case"capture":case"download":c===!0?s.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,c):s.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(i,c):s.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(i):s.setAttribute(i,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),Li(s,"popover",c);break;case"xlinkActuate":na(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":na(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":na(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":na(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":na(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":na(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":na(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":na(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":na(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Li(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=jw.get(i)||i,Li(s,i,c))}}function Hu(s,n,i,c,u,f){switch(i){case"style":th(s,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(l(60));s.innerHTML=i}}break;case"children":typeof c=="string"?ar(s,c):(typeof c=="number"||typeof c=="bigint")&&ar(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=To);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hf.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=s[Yt]||null,f=f!=null?f[i]:null,typeof f=="function"&&s.removeEventListener(n,f,u),typeof c=="function")){typeof f!="function"&&f!==null&&(i in s?s[i]=null:s.hasAttribute(i)&&s.removeAttribute(i)),s.addEventListener(n,c,u);break e}i in s?s[i]=c:c===!0?s.setAttribute(i,""):Li(s,i,c)}}}function Pt(s,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var S=i[f];if(S!=null)switch(f){case"src":c=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:tt(s,n,f,S,i,null)}}u&&tt(s,n,"srcSet",i.srcSet,i,null),c&&tt(s,n,"src",i.src,i,null);return;case"input":Be("invalid",s);var O=f=S=u=null,U=null,ae=null;for(c in i)if(i.hasOwnProperty(c)){var fe=i[c];if(fe!=null)switch(c){case"name":u=fe;break;case"type":S=fe;break;case"checked":U=fe;break;case"defaultChecked":ae=fe;break;case"value":f=fe;break;case"defaultValue":O=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(l(137,n));break;default:tt(s,n,c,fe,i,null)}}Xf(s,f,O,U,ae,S,u,!1),Fi(s);return;case"select":Be("invalid",s),c=S=f=null;for(u in i)if(i.hasOwnProperty(u)&&(O=i[u],O!=null))switch(u){case"value":f=O;break;case"defaultValue":S=O;break;case"multiple":c=O;default:tt(s,n,u,O,i,null)}n=f,i=S,s.multiple=!!c,n!=null?sr(s,!!c,n,!1):i!=null&&sr(s,!!c,i,!0);return;case"textarea":Be("invalid",s),f=u=c=null;for(S in i)if(i.hasOwnProperty(S)&&(O=i[S],O!=null))switch(S){case"value":c=O;break;case"defaultValue":u=O;break;case"children":f=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(l(91));break;default:tt(s,n,S,O,i,null)}Jf(s,c,u,f),Fi(s);return;case"option":for(U in i)if(i.hasOwnProperty(U)&&(c=i[U],c!=null))switch(U){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:tt(s,n,U,c,i,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<Ql.length;c++)Be(Ql[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in i)if(i.hasOwnProperty(ae)&&(c=i[ae],c!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:tt(s,n,ae,c,i,null)}return;default:if(ld(n)){for(fe in i)i.hasOwnProperty(fe)&&(c=i[fe],c!==void 0&&Hu(s,n,fe,c,i,void 0));return}}for(O in i)i.hasOwnProperty(O)&&(c=i[O],c!=null&&tt(s,n,O,c,i,null))}function Kv(s,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,S=null,O=null,U=null,ae=null,fe=null;for(le in i){var pe=i[le];if(i.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":U=pe;default:c.hasOwnProperty(le)||tt(s,n,le,null,c,pe)}}for(var ne in c){var le=c[ne];if(pe=i[ne],c.hasOwnProperty(ne)&&(le!=null||pe!=null))switch(ne){case"type":f=le;break;case"name":u=le;break;case"checked":ae=le;break;case"defaultChecked":fe=le;break;case"value":S=le;break;case"defaultValue":O=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(l(137,n));break;default:le!==pe&&tt(s,n,ne,le,c,pe)}}nd(s,S,O,U,ae,fe,f,u);return;case"select":le=S=O=ne=null;for(f in i)if(U=i[f],i.hasOwnProperty(f)&&U!=null)switch(f){case"value":break;case"multiple":le=U;default:c.hasOwnProperty(f)||tt(s,n,f,null,c,U)}for(u in c)if(f=c[u],U=i[u],c.hasOwnProperty(u)&&(f!=null||U!=null))switch(u){case"value":ne=f;break;case"defaultValue":O=f;break;case"multiple":S=f;default:f!==U&&tt(s,n,u,f,c,U)}n=O,i=S,c=le,ne!=null?sr(s,!!i,ne,!1):!!c!=!!i&&(n!=null?sr(s,!!i,n,!0):sr(s,!!i,i?[]:"",!1));return;case"textarea":le=ne=null;for(O in i)if(u=i[O],i.hasOwnProperty(O)&&u!=null&&!c.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:tt(s,n,O,null,c,u)}for(S in c)if(u=c[S],f=i[S],c.hasOwnProperty(S)&&(u!=null||f!=null))switch(S){case"value":ne=u;break;case"defaultValue":le=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==f&&tt(s,n,S,u,c,f)}Zf(s,ne,le);return;case"option":for(var Te in i)if(ne=i[Te],i.hasOwnProperty(Te)&&ne!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":s.selected=!1;break;default:tt(s,n,Te,null,c,ne)}for(U in c)if(ne=c[U],le=i[U],c.hasOwnProperty(U)&&ne!==le&&(ne!=null||le!=null))switch(U){case"selected":s.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:tt(s,n,U,ne,c,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in i)ne=i[Ee],i.hasOwnProperty(Ee)&&ne!=null&&!c.hasOwnProperty(Ee)&&tt(s,n,Ee,null,c,ne);for(ae in c)if(ne=c[ae],le=i[ae],c.hasOwnProperty(ae)&&ne!==le&&(ne!=null||le!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(l(137,n));break;default:tt(s,n,ae,ne,c,le)}return;default:if(ld(n)){for(var st in i)ne=i[st],i.hasOwnProperty(st)&&ne!==void 0&&!c.hasOwnProperty(st)&&Hu(s,n,st,void 0,c,ne);for(fe in c)ne=c[fe],le=i[fe],!c.hasOwnProperty(fe)||ne===le||ne===void 0&&le===void 0||Hu(s,n,fe,ne,c,le);return}}for(var X in i)ne=i[X],i.hasOwnProperty(X)&&ne!=null&&!c.hasOwnProperty(X)&&tt(s,n,X,null,c,ne);for(pe in c)ne=c[pe],le=i[pe],!c.hasOwnProperty(pe)||ne===le||ne==null&&le==null||tt(s,n,pe,ne,c,le)}var Qu=null,Gu=null;function Po(s){return s.nodeType===9?s:s.ownerDocument}function eg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tg(s,n){if(s===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&n==="foreignObject"?0:s}function Ku(s,n){return s==="textarea"||s==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vu=null;function Vv(){var s=window.event;return s&&s.type==="popstate"?s===Vu?!1:(Vu=s,!0):(Vu=null,!1)}var sg=typeof setTimeout=="function"?setTimeout:void 0,Yv=typeof clearTimeout=="function"?clearTimeout:void 0,ag=typeof Promise=="function"?Promise:void 0,Wv=typeof queueMicrotask=="function"?queueMicrotask:typeof ag<"u"?function(s){return ag.resolve(null).then(s).catch(Xv)}:sg;function Xv(s){setTimeout(function(){throw s})}function Ka(s){return s==="head"}function ng(s,n){var i=n,c=0,u=0;do{var f=i.nextSibling;if(s.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<c&&8>c){i=c;var S=s.ownerDocument;if(i&1&&Kl(S.documentElement),i&2&&Kl(S.body),i&4)for(i=S.head,Kl(i),S=i.firstChild;S;){var O=S.nextSibling,U=S.nodeName;S[ol]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&S.rel.toLowerCase()==="stylesheet"||i.removeChild(S),S=O}}if(u===0){s.removeChild(f),ti(n);return}u--}else i==="$"||i==="$?"||i==="$!"?u++:c=i.charCodeAt(0)-48;else c=0;i=f}while(i);ti(n)}function Yu(s){var n=s.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Yu(i),ed(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}s.removeChild(i)}}function Zv(s,n,i,c){for(;s.nodeType===1;){var u=i;if(s.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[ol])switch(n){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(f=s.getAttribute("rel"),f==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(f!==u.rel||s.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||s.getAttribute("title")!==(u.title==null?null:u.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(f=s.getAttribute("src"),(f!==(u.src==null?null:u.src)||s.getAttribute("type")!==(u.type==null?null:u.type)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(n==="input"&&s.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&s.getAttribute("name")===f)return s}else return s;if(s=Ds(s.nextSibling),s===null)break}return null}function Jv(s,n,i){if(n==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Ds(s.nextSibling),s===null))return null;return s}function Wu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function ej(s,n){var i=s.ownerDocument;if(s.data!=="$?"||i.readyState==="complete")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Ds(s){for(;s!=null;s=s.nextSibling){var n=s.nodeType;if(n===1||n===3)break;if(n===8){if(n=s.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return s}var Xu=null;function rg(s){s=s.previousSibling;for(var n=0;s;){if(s.nodeType===8){var i=s.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return s;n--}else i==="/$"&&n++}s=s.previousSibling}return null}function lg(s,n,i){switch(n=Po(i),s){case"html":if(s=n.documentElement,!s)throw Error(l(452));return s;case"head":if(s=n.head,!s)throw Error(l(453));return s;case"body":if(s=n.body,!s)throw Error(l(454));return s;default:throw Error(l(451))}}function Kl(s){for(var n=s.attributes;n.length;)s.removeAttributeNode(n[0]);ed(s)}var Os=new Map,ig=new Set;function Mo(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ba=W.d;W.d={f:tj,r:sj,D:aj,C:nj,L:rj,m:lj,X:oj,S:ij,M:cj};function tj(){var s=ba.f(),n=So();return s||n}function sj(s){var n=Zn(s);n!==null&&n.tag===5&&n.type==="form"?Ex(n):ba.r(s)}var Pr=typeof document>"u"?null:document;function og(s,n,i){var c=Pr;if(c&&typeof n=="string"&&n){var u=js(n);u='link[rel="'+s+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),ig.has(u)||(ig.add(u),s={rel:s,crossOrigin:i,href:n},c.querySelector(u)===null&&(n=c.createElement("link"),Pt(n,"link",s),kt(n),c.head.appendChild(n)))}}function aj(s){ba.D(s),og("dns-prefetch",s,null)}function nj(s,n){ba.C(s,n),og("preconnect",s,n)}function rj(s,n,i){ba.L(s,n,i);var c=Pr;if(c&&s&&n){var u='link[rel="preload"][as="'+js(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+js(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+js(i.imageSizes)+'"]')):u+='[href="'+js(s)+'"]';var f=u;switch(n){case"style":f=Mr(s);break;case"script":f=Lr(s)}Os.has(f)||(s=g({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:s,as:n},i),Os.set(f,s),c.querySelector(u)!==null||n==="style"&&c.querySelector(Vl(f))||n==="script"&&c.querySelector(Yl(f))||(n=c.createElement("link"),Pt(n,"link",s),kt(n),c.head.appendChild(n)))}}function lj(s,n){ba.m(s,n);var i=Pr;if(i&&s){var c=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+js(c)+'"][href="'+js(s)+'"]',f=u;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Lr(s)}if(!Os.has(f)&&(s=g({rel:"modulepreload",href:s},n),Os.set(f,s),i.querySelector(u)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Yl(f)))return}c=i.createElement("link"),Pt(c,"link",s),kt(c),i.head.appendChild(c)}}}function ij(s,n,i){ba.S(s,n,i);var c=Pr;if(c&&s){var u=Jn(c).hoistableStyles,f=Mr(s);n=n||"default";var S=u.get(f);if(!S){var O={loading:0,preload:null};if(S=c.querySelector(Vl(f)))O.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":n},i),(i=Os.get(f))&&Zu(s,i);var U=S=c.createElement("link");kt(U),Pt(U,"link",s),U._p=new Promise(function(ae,fe){U.onload=ae,U.onerror=fe}),U.addEventListener("load",function(){O.loading|=1}),U.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Lo(S,n,c)}S={type:"stylesheet",instance:S,count:1,state:O},u.set(f,S)}}}function oj(s,n){ba.X(s,n);var i=Pr;if(i&&s){var c=Jn(i).hoistableScripts,u=Lr(s),f=c.get(u);f||(f=i.querySelector(Yl(u)),f||(s=g({src:s,async:!0},n),(n=Os.get(u))&&Ju(s,n),f=i.createElement("script"),kt(f),Pt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function cj(s,n){ba.M(s,n);var i=Pr;if(i&&s){var c=Jn(i).hoistableScripts,u=Lr(s),f=c.get(u);f||(f=i.querySelector(Yl(u)),f||(s=g({src:s,async:!0,type:"module"},n),(n=Os.get(u))&&Ju(s,n),f=i.createElement("script"),kt(f),Pt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function cg(s,n,i,c){var u=(u=se.current)?Mo(u):null;if(!u)throw Error(l(446));switch(s){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Mr(i.href),i=Jn(u).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){s=Mr(i.href);var f=Jn(u).hoistableStyles,S=f.get(s);if(S||(u=u.ownerDocument||u,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(s,S),(f=u.querySelector(Vl(s)))&&!f._p&&(S.instance=f,S.state.loading=5),Os.has(s)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Os.set(s,i),f||dj(u,s,i,S.state))),n&&c===null)throw Error(l(528,""));return S}if(n&&c!==null)throw Error(l(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Lr(i),i=Jn(u).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,s))}}function Mr(s){return'href="'+js(s)+'"'}function Vl(s){return'link[rel="stylesheet"]['+s+"]"}function dg(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function dj(s,n,i,c){s.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=s.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Pt(n,"link",i),kt(n),s.head.appendChild(n))}function Lr(s){return'[src="'+js(s)+'"]'}function Yl(s){return"script[async]"+s}function ug(s,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=s.querySelector('style[data-href~="'+js(i.href)+'"]');if(c)return n.instance=c,kt(c),c;var u=g({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),kt(c),Pt(c,"style",u),Lo(c,i.precedence,s),n.instance=c;case"stylesheet":u=Mr(i.href);var f=s.querySelector(Vl(u));if(f)return n.state.loading|=4,n.instance=f,kt(f),f;c=dg(i),(u=Os.get(u))&&Zu(c,u),f=(s.ownerDocument||s).createElement("link"),kt(f);var S=f;return S._p=new Promise(function(O,U){S.onload=O,S.onerror=U}),Pt(f,"link",c),n.state.loading|=4,Lo(f,i.precedence,s),n.instance=f;case"script":return f=Lr(i.src),(u=s.querySelector(Yl(f)))?(n.instance=u,kt(u),u):(c=i,(u=Os.get(f))&&(c=g({},i),Ju(c,u)),s=s.ownerDocument||s,u=s.createElement("script"),kt(u),Pt(u,"link",c),s.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Lo(c,i.precedence,s));return n.instance}function Lo(s,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=c.length?c[c.length-1]:null,f=u,S=0;S<c.length;S++){var O=c[S];if(O.dataset.precedence===n)f=O;else if(f!==u)break}f?f.parentNode.insertBefore(s,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(s,n.firstChild))}function Zu(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.title==null&&(s.title=n.title)}function Ju(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.integrity==null&&(s.integrity=n.integrity)}var _o=null;function mg(s,n,i){if(_o===null){var c=new Map,u=_o=new Map;u.set(i,c)}else u=_o,c=u.get(i),c||(c=new Map,u.set(i,c));if(c.has(s))return c;for(c.set(s,null),i=i.getElementsByTagName(s),u=0;u<i.length;u++){var f=i[u];if(!(f[ol]||f[_t]||s==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var S=f.getAttribute(n)||"";S=s+S;var O=c.get(S);O?O.push(f):c.set(S,[f])}}return c}function fg(s,n,i){s=s.ownerDocument||s,s.head.insertBefore(i,n==="title"?s.querySelector("head > title"):null)}function uj(s,n,i){if(i===1||n.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return s=n.disabled,typeof n.precedence=="string"&&s==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function hg(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Wl=null;function mj(){}function fj(s,n,i){if(Wl===null)throw Error(l(475));var c=Wl;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=Mr(i.href),f=s.querySelector(Vl(u));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=Fo.bind(c),s.then(c,c)),n.state.loading|=4,n.instance=f,kt(f);return}f=s.ownerDocument||s,i=dg(i),(u=Os.get(u))&&Zu(i,u),f=f.createElement("link"),kt(f);var S=f;S._p=new Promise(function(O,U){S.onload=O,S.onerror=U}),Pt(f,"link",i),n.instance=f}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(n,s),(s=n.state.preload)&&(n.state.loading&3)===0&&(c.count++,n=Fo.bind(c),s.addEventListener("load",n),s.addEventListener("error",n))}}function hj(){if(Wl===null)throw Error(l(475));var s=Wl;return s.stylesheets&&s.count===0&&em(s,s.stylesheets),0<s.count?function(n){var i=setTimeout(function(){if(s.stylesheets&&em(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=n,function(){s.unsuspend=null,clearTimeout(i)}}:null}function Fo(){if(this.count--,this.count===0){if(this.stylesheets)em(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Do=null;function em(s,n){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Do=new Map,n.forEach(xj,s),Do=null,Fo.call(s))}function xj(s,n){if(!(n.state.loading&4)){var i=Do.get(s);if(i)var c=i.get(null);else{i=new Map,Do.set(s,i);for(var u=s.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var S=u[f];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(i.set(S.dataset.precedence,S),c=S)}c&&i.set(null,c)}u=n.instance,S=u.getAttribute("data-precedence"),f=i.get(S)||c,f===c&&i.set(null,u),i.set(S,u),this.count++,c=Fo.bind(this),u.addEventListener("load",c),u.addEventListener("error",c),f?f.parentNode.insertBefore(u,f.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(u,s.firstChild)),n.state.loading|=4}}var Xl={$$typeof:N,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function pj(s,n,i,c,u,f,S,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wc(0),this.hiddenUpdates=Wc(null),this.identifierPrefix=c,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function xg(s,n,i,c,u,f,S,O,U,ae,fe,pe){return s=new pj(s,n,i,S,O,U,ae,pe),n=1,f===!0&&(n|=24),f=cs(3,null,null,n),s.current=f,f.stateNode=s,n=_d(),n.refCount++,s.pooledCache=n,n.refCount++,f.memoizedState={element:c,isDehydrated:i,cache:n},zd(f),s}function pg(s){return s?(s=ur,s):ur}function gg(s,n,i,c,u,f){u=pg(u),c.context===null?c.context=u:c.pendingContext=u,c=La(n),c.payload={element:i},f=f===void 0?null:f,f!==null&&(c.callback=f),i=_a(s,c,n),i!==null&&(hs(i,s,n),El(i,s,n))}function bg(s,n){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var i=s.retryLane;s.retryLane=i!==0&&i<n?i:n}}function tm(s,n){bg(s,n),(s=s.alternate)&&bg(s,n)}function yg(s){if(s.tag===13){var n=dr(s,67108864);n!==null&&hs(n,s,67108864),tm(s,67108864)}}var qo=!0;function gj(s,n,i,c){var u=F.T;F.T=null;var f=W.p;try{W.p=2,sm(s,n,i,c)}finally{W.p=f,F.T=u}}function bj(s,n,i,c){var u=F.T;F.T=null;var f=W.p;try{W.p=8,sm(s,n,i,c)}finally{W.p=f,F.T=u}}function sm(s,n,i,c){if(qo){var u=am(c);if(u===null)Bu(s,n,c,zo,i),vg(s,c);else if(wj(u,s,n,i,c))c.stopPropagation();else if(vg(s,c),n&4&&-1<yj.indexOf(s)){for(;u!==null;){var f=Zn(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var S=pn(f.pendingLanes);if(S!==0){var O=f;for(O.pendingLanes|=2,O.entangledLanes|=2;S;){var U=1<<31-is(S);O.entanglements[1]|=U,S&=~U}Ws(f),(Ze&6)===0&&(jo=Qs()+500,Hl(0))}}break;case 13:O=dr(f,2),O!==null&&hs(O,f,2),So(),tm(f,2)}if(f=am(c),f===null&&Bu(s,n,c,zo,i),f===u)break;u=f}u!==null&&c.stopPropagation()}else Bu(s,n,c,null,i)}}function am(s){return s=od(s),nm(s)}var zo=null;function nm(s){if(zo=null,s=Xn(s),s!==null){var n=d(s);if(n===null)s=null;else{var i=n.tag;if(i===13){if(s=m(n),s!==null)return s;s=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;s=null}else n!==s&&(s=null)}}return zo=s,null}function wg(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nw()){case Lf:return 2;case _f:return 8;case Ri:case rw:return 32;case Ff:return 268435456;default:return 32}default:return 32}}var rm=!1,Va=null,Ya=null,Wa=null,Zl=new Map,Jl=new Map,Xa=[],yj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vg(s,n){switch(s){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(n.pointerId)}}function ei(s,n,i,c,u,f){return s===null||s.nativeEvent!==f?(s={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Zn(n),n!==null&&yg(n)),s):(s.eventSystemFlags|=c,n=s.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),s)}function wj(s,n,i,c,u){switch(n){case"focusin":return Va=ei(Va,s,n,i,c,u),!0;case"dragenter":return Ya=ei(Ya,s,n,i,c,u),!0;case"mouseover":return Wa=ei(Wa,s,n,i,c,u),!0;case"pointerover":var f=u.pointerId;return Zl.set(f,ei(Zl.get(f)||null,s,n,i,c,u)),!0;case"gotpointercapture":return f=u.pointerId,Jl.set(f,ei(Jl.get(f)||null,s,n,i,c,u)),!0}return!1}function jg(s){var n=Xn(s.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){s.blockedOn=n,fw(s.priority,function(){if(i.tag===13){var c=fs();c=Xc(c);var u=dr(i,c);u!==null&&hs(u,i,c),tm(i,c)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){s.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Uo(s){if(s.blockedOn!==null)return!1;for(var n=s.targetContainers;0<n.length;){var i=am(s.nativeEvent);if(i===null){i=s.nativeEvent;var c=new i.constructor(i.type,i);id=c,i.target.dispatchEvent(c),id=null}else return n=Zn(i),n!==null&&yg(n),s.blockedOn=i,!1;n.shift()}return!0}function Ng(s,n,i){Uo(s)&&i.delete(n)}function vj(){rm=!1,Va!==null&&Uo(Va)&&(Va=null),Ya!==null&&Uo(Ya)&&(Ya=null),Wa!==null&&Uo(Wa)&&(Wa=null),Zl.forEach(Ng),Jl.forEach(Ng)}function $o(s,n){s.blockedOn===n&&(s.blockedOn=null,rm||(rm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vj)))}var Io=null;function Sg(s){Io!==s&&(Io=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Io===s&&(Io=null);for(var n=0;n<s.length;n+=3){var i=s[n],c=s[n+1],u=s[n+2];if(typeof c!="function"){if(nm(c||i)===null)continue;break}var f=Zn(i);f!==null&&(s.splice(n,3),n-=3,nu(f,{pending:!0,data:u,method:i.method,action:c},c,u))}}))}function ti(s){function n(U){return $o(U,s)}Va!==null&&$o(Va,s),Ya!==null&&$o(Ya,s),Wa!==null&&$o(Wa,s),Zl.forEach(n),Jl.forEach(n);for(var i=0;i<Xa.length;i++){var c=Xa[i];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Xa.length&&(i=Xa[0],i.blockedOn===null);)jg(i),i.blockedOn===null&&Xa.shift();if(i=(s.ownerDocument||s).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var u=i[c],f=i[c+1],S=u[Yt]||null;if(typeof f=="function")S||Sg(i);else if(S){var O=null;if(f&&f.hasAttribute("formAction")){if(u=f,S=f[Yt]||null)O=S.formAction;else if(nm(u)!==null)continue}else O=S.action;typeof O=="function"?i[c+1]=O:(i.splice(c,3),c-=3),Sg(i)}}}function lm(s){this._internalRoot=s}Bo.prototype.render=lm.prototype.render=function(s){var n=this._internalRoot;if(n===null)throw Error(l(409));var i=n.current,c=fs();gg(i,c,s,n,null,null)},Bo.prototype.unmount=lm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var n=s.containerInfo;gg(s.current,2,null,s,null,null),So(),n[Wn]=null}};function Bo(s){this._internalRoot=s}Bo.prototype.unstable_scheduleHydration=function(s){if(s){var n=$f();s={blockedOn:null,target:s,priority:n};for(var i=0;i<Xa.length&&n!==0&&n<Xa[i].priority;i++);Xa.splice(i,0,s),i===0&&jg(s)}};var Cg=a.version;if(Cg!=="19.1.0")throw Error(l(527,Cg,"19.1.0"));W.findDOMNode=function(s){var n=s._reactInternals;if(n===void 0)throw typeof s.render=="function"?Error(l(188)):(s=Object.keys(s).join(","),Error(l(268,s)));return s=h(n),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var jj={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{rl=Ho.inject(jj),ls=Ho}catch{}}return ai.createRoot=function(s,n){if(!o(s))throw Error(l(299));var i=!1,c="",u=$x,f=Ix,S=Bx,O=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(O=n.unstable_transitionCallbacks)),n=xg(s,1,!1,null,null,i,c,u,f,S,O,null),s[Wn]=n.current,Iu(s),new lm(n)},ai.hydrateRoot=function(s,n,i){if(!o(s))throw Error(l(299));var c=!1,u="",f=$x,S=Ix,O=Bx,U=null,ae=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(S=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(U=i.unstable_transitionCallbacks),i.formState!==void 0&&(ae=i.formState)),n=xg(s,1,!0,n,i??null,c,u,f,S,O,U,ae),n.context=pg(null),i=n.current,c=fs(),c=Xc(c),u=La(c),u.callback=null,_a(i,u,c),i=c,n.current.lanes=i,il(n,i),Ws(n),s[Wn]=n.current,Iu(s),new Bo(n)},ai.version="19.1.0",ai}var Fg;function Mj(){if(Fg)return dm.exports;Fg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),dm.exports=Pj(),dm.exports}var Lj=Mj(),ni={},Dg;function _j(){if(Dg)return ni;Dg=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.parse=m,ni.serialize=p;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,l=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,d=(()=>{const j=function(){};return j.prototype=Object.create(null),j})();function m(j,E){const b=new d,k=j.length;if(k<2)return b;const w=(E==null?void 0:E.decode)||g;let C=0;do{const v=j.indexOf("=",C);if(v===-1)break;const N=j.indexOf(";",C),T=N===-1?k:N;if(v>T){C=j.lastIndexOf(";",v-1)+1;continue}const P=x(j,C,v),D=h(j,v,P),$=j.slice(P,D);if(b[$]===void 0){let q=x(j,v+1,T),H=h(j,T,q);const he=w(j.slice(q,H));b[$]=he}C=T+1}while(C<k);return b}function x(j,E,b){do{const k=j.charCodeAt(E);if(k!==32&&k!==9)return E}while(++E<b);return b}function h(j,E,b){for(;E>b;){const k=j.charCodeAt(--E);if(k!==32&&k!==9)return E+1}return b}function p(j,E,b){const k=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(j))throw new TypeError(`argument name is invalid: ${j}`);const w=k(E);if(!a.test(w))throw new TypeError(`argument val is invalid: ${E}`);let C=j+"="+w;if(!b)return C;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);C+="; Max-Age="+b.maxAge}if(b.domain){if(!r.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);C+="; Domain="+b.domain}if(b.path){if(!l.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);C+="; Path="+b.path}if(b.expires){if(!y(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);C+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(C+="; HttpOnly"),b.secure&&(C+="; Secure"),b.partitioned&&(C+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return C}function g(j){if(j.indexOf("%")===-1)return j;try{return decodeURIComponent(j)}catch{return j}}function y(j){return o.call(j)==="[object Date]"}return ni}_j();var qg="popstate";function Fj(t={}){function a(l,o){let{pathname:d,search:m,hash:x}=l.location;return qm("",{pathname:d,search:m,hash:x},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(l,o){return typeof o=="string"?o:mi(o)}return qj(a,r,null,t)}function ut(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Ts(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Dj(){return Math.random().toString(36).substring(2,10)}function zg(t,a){return{usr:t.state,key:t.key,idx:a}}function qm(t,a,r=null,l){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Yr(a):a,state:r,key:a&&a.key||l||Dj()}}function mi({pathname:t="/",search:a="",hash:r=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Yr(t){let a={};if(t){let r=t.indexOf("#");r>=0&&(a.hash=t.substring(r),t=t.substring(0,r));let l=t.indexOf("?");l>=0&&(a.search=t.substring(l),t=t.substring(0,l)),t&&(a.pathname=t)}return a}function qj(t,a,r,l={}){let{window:o=document.defaultView,v5Compat:d=!1}=l,m=o.history,x="POP",h=null,p=g();p==null&&(p=0,m.replaceState({...m.state,idx:p},""));function g(){return(m.state||{idx:null}).idx}function y(){x="POP";let w=g(),C=w==null?null:w-p;p=w,h&&h({action:x,location:k.location,delta:C})}function j(w,C){x="PUSH";let v=qm(k.location,w,C);p=g()+1;let N=zg(v,p),T=k.createHref(v);try{m.pushState(N,"",T)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;o.location.assign(T)}d&&h&&h({action:x,location:k.location,delta:1})}function E(w,C){x="REPLACE";let v=qm(k.location,w,C);p=g();let N=zg(v,p),T=k.createHref(v);m.replaceState(N,"",T),d&&h&&h({action:x,location:k.location,delta:0})}function b(w){return zj(w)}let k={get action(){return x},get location(){return t(o,m)},listen(w){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(qg,y),h=w,()=>{o.removeEventListener(qg,y),h=null}},createHref(w){return a(o,w)},createURL:b,encodeLocation(w){let C=b(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:j,replace:E,go(w){return m.go(w)}};return k}function zj(t,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ut(r,"No window.location.(origin|href) available to create URL");let l=typeof t=="string"?t:mi(t);return l=l.replace(/ $/,"%20"),!a&&l.startsWith("//")&&(l=r+l),new URL(l,r)}function ib(t,a,r="/"){return Uj(t,a,r,!1)}function Uj(t,a,r,l){let o=typeof a=="string"?Yr(a):a,d=ka(o.pathname||"/",r);if(d==null)return null;let m=ob(t);$j(m);let x=null;for(let h=0;x==null&&h<m.length;++h){let p=Zj(d);x=Wj(m[h],p,l)}return x}function ob(t,a=[],r=[],l=""){let o=(d,m,x)=>{let h={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};h.relativePath.startsWith("/")&&(ut(h.relativePath.startsWith(l),`Absolute route path "${h.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(l.length));let p=Na([l,h.relativePath]),g=r.concat(h);d.children&&d.children.length>0&&(ut(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),ob(d.children,a,g,p)),!(d.path==null&&!d.index)&&a.push({path:p,score:Vj(p,d.index),routesMeta:g})};return t.forEach((d,m)=>{var x;if(d.path===""||!((x=d.path)!=null&&x.includes("?")))o(d,m);else for(let h of cb(d.path))o(d,m,h)}),a}function cb(t){let a=t.split("/");if(a.length===0)return[];let[r,...l]=a,o=r.endsWith("?"),d=r.replace(/\?$/,"");if(l.length===0)return o?[d,""]:[d];let m=cb(l.join("/")),x=[];return x.push(...m.map(h=>h===""?d:[d,h].join("/"))),o&&x.push(...m),x.map(h=>t.startsWith("/")&&h===""?"/":h)}function $j(t){t.sort((a,r)=>a.score!==r.score?r.score-a.score:Yj(a.routesMeta.map(l=>l.childrenIndex),r.routesMeta.map(l=>l.childrenIndex)))}var Ij=/^:[\w-]+$/,Bj=3,Hj=2,Qj=1,Gj=10,Kj=-2,Ug=t=>t==="*";function Vj(t,a){let r=t.split("/"),l=r.length;return r.some(Ug)&&(l+=Kj),a&&(l+=Hj),r.filter(o=>!Ug(o)).reduce((o,d)=>o+(Ij.test(d)?Bj:d===""?Qj:Gj),l)}function Yj(t,a){return t.length===a.length&&t.slice(0,-1).every((l,o)=>l===a[o])?t[t.length-1]-a[a.length-1]:0}function Wj(t,a,r=!1){let{routesMeta:l}=t,o={},d="/",m=[];for(let x=0;x<l.length;++x){let h=l[x],p=x===l.length-1,g=d==="/"?a:a.slice(d.length)||"/",y=rc({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),j=h.route;if(!y&&p&&r&&!l[l.length-1].route.index&&(y=rc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(o,y.params),m.push({params:o,pathname:Na([d,y.pathname]),pathnameBase:sN(Na([d,y.pathnameBase])),route:j}),y.pathnameBase!=="/"&&(d=Na([d,y.pathnameBase]))}return m}function rc(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,l]=Xj(t.path,t.caseSensitive,t.end),o=a.match(r);if(!o)return null;let d=o[0],m=d.replace(/(.)\/+$/,"$1"),x=o.slice(1);return{params:l.reduce((p,{paramName:g,isOptional:y},j)=>{if(g==="*"){let b=x[j]||"";m=d.slice(0,d.length-b.length).replace(/(.)\/+$/,"$1")}const E=x[j];return y&&!E?p[g]=void 0:p[g]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:m,pattern:t}}function Xj(t,a=!1,r=!0){Ts(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let l=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,x,h)=>(l.push({paramName:x,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(l.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),l]}function Zj(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Ts(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ka(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,l=t.charAt(r);return l&&l!=="/"?null:t.slice(r)||"/"}function Jj(t,a="/"){let{pathname:r,search:l="",hash:o=""}=typeof t=="string"?Yr(t):t;return{pathname:r?r.startsWith("/")?r:eN(r,a):a,search:aN(l),hash:nN(o)}}function eN(t,a){let r=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function hm(t,a,r,l){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tN(t){return t.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function xf(t){let a=tN(t);return a.map((r,l)=>l===a.length-1?r.pathname:r.pathnameBase)}function pf(t,a,r,l=!1){let o;typeof t=="string"?o=Yr(t):(o={...t},ut(!o.pathname||!o.pathname.includes("?"),hm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),hm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),hm("#","search","hash",o)));let d=t===""||o.pathname==="",m=d?"/":o.pathname,x;if(m==null)x=r;else{let y=a.length-1;if(!l&&m.startsWith("..")){let j=m.split("/");for(;j[0]==="..";)j.shift(),y-=1;o.pathname=j.join("/")}x=y>=0?a[y]:"/"}let h=Jj(o,x),p=m&&m!=="/"&&m.endsWith("/"),g=(d||m===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}var Na=t=>t.join("/").replace(/\/\/+/g,"/"),sN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var db=["POST","PUT","PATCH","DELETE"];new Set(db);var lN=["GET",...db];new Set(lN);var Wr=A.createContext(null);Wr.displayName="DataRouter";var kc=A.createContext(null);kc.displayName="DataRouterState";var ub=A.createContext({isTransitioning:!1});ub.displayName="ViewTransition";var iN=A.createContext(new Map);iN.displayName="Fetchers";var oN=A.createContext(null);oN.displayName="Await";var Bs=A.createContext(null);Bs.displayName="Navigation";var vi=A.createContext(null);vi.displayName="Location";var Ms=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var gf=A.createContext(null);gf.displayName="RouteError";function cN(t,{relative:a}={}){ut(Xr(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:l}=A.useContext(Bs),{hash:o,pathname:d,search:m}=ji(t,{relative:a}),x=d;return r!=="/"&&(x=d==="/"?r:Na([r,d])),l.createHref({pathname:x,search:m,hash:o})}function Xr(){return A.useContext(vi)!=null}function yt(){return ut(Xr(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(vi).location}var mb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fb(t){A.useContext(Bs).static||A.useLayoutEffect(t)}function Me(){let{isDataRoute:t}=A.useContext(Ms);return t?NN():dN()}function dN(){ut(Xr(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Wr),{basename:a,navigator:r}=A.useContext(Bs),{matches:l}=A.useContext(Ms),{pathname:o}=yt(),d=JSON.stringify(xf(l)),m=A.useRef(!1);return fb(()=>{m.current=!0}),A.useCallback((h,p={})=>{if(Ts(m.current,mb),!m.current)return;if(typeof h=="number"){r.go(h);return}let g=pf(h,JSON.parse(d),o,p.relative==="path");t==null&&a!=="/"&&(g.pathname=g.pathname==="/"?a:Na([a,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[a,r,d,o,t])}var hb=A.createContext(null);function We(){return A.useContext(hb)}function uN(t){let a=A.useContext(Ms).outlet;return a&&A.createElement(hb.Provider,{value:t},a)}function Re(){let{matches:t}=A.useContext(Ms),a=t[t.length-1];return a?a.params:{}}function ji(t,{relative:a}={}){let{matches:r}=A.useContext(Ms),{pathname:l}=yt(),o=JSON.stringify(xf(r));return A.useMemo(()=>pf(t,JSON.parse(o),l,a==="path"),[t,o,l,a])}function mN(t,a){return xb(t,a)}function xb(t,a,r,l){var C;ut(Xr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(Bs),{matches:d}=A.useContext(Ms),m=d[d.length-1],x=m?m.params:{},h=m?m.pathname:"/",p=m?m.pathnameBase:"/",g=m&&m.route;{let v=g&&g.path||"";pb(h,!g||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let y=yt(),j;if(a){let v=typeof a=="string"?Yr(a):a;ut(p==="/"||((C=v.pathname)==null?void 0:C.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${v.pathname}" was given in the \`location\` prop.`),j=v}else j=y;let E=j.pathname||"/",b=E;if(p!=="/"){let v=p.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(v.length).join("/")}let k=ib(t,{pathname:b});Ts(g||k!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Ts(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=gN(k&&k.map(v=>Object.assign({},v,{params:Object.assign({},x,v.params),pathname:Na([p,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?p:Na([p,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),d,r,l);return a&&w?A.createElement(vi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},w):w}function fN(){let t=jN(),a=rN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,l="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},m=null;return console.error("Error handled by React Router default ErrorBoundary:",t),m=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:d},"ErrorBoundary")," or"," ",A.createElement("code",{style:d},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},a),r?A.createElement("pre",{style:o},r):null,m)}var hN=A.createElement(fN,null),xN=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?A.createElement(Ms.Provider,{value:this.props.routeContext},A.createElement(gf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pN({routeContext:t,match:a,children:r}){let l=A.useContext(Wr);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),A.createElement(Ms.Provider,{value:t},r)}function gN(t,a=[],r=null,l=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,d=r==null?void 0:r.errors;if(d!=null){let h=o.findIndex(p=>p.route.id&&(d==null?void 0:d[p.route.id])!==void 0);ut(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let m=!1,x=-1;if(r)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(x=h),p.route.id){let{loaderData:g,errors:y}=r,j=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||j){m=!0,x>=0?o=o.slice(0,x+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,j=!1,E=null,b=null;r&&(y=d&&p.route.id?d[p.route.id]:void 0,E=p.route.errorElement||hN,m&&(x<0&&g===0?(pb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,b=null):x===g&&(j=!0,b=p.route.hydrateFallbackElement||null)));let k=a.concat(o.slice(0,g+1)),w=()=>{let C;return y?C=E:j?C=b:p.route.Component?C=A.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,A.createElement(pN,{match:p,routeContext:{outlet:h,matches:k,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?A.createElement(xN,{location:r.location,revalidation:r.revalidation,component:E,error:y,children:w(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):w()},null)}function bf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bN(t){let a=A.useContext(Wr);return ut(a,bf(t)),a}function yN(t){let a=A.useContext(kc);return ut(a,bf(t)),a}function wN(t){let a=A.useContext(Ms);return ut(a,bf(t)),a}function yf(t){let a=wN(t),r=a.matches[a.matches.length-1];return ut(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function vN(){return yf("useRouteId")}function jN(){var l;let t=A.useContext(gf),a=yN("useRouteError"),r=yf("useRouteError");return t!==void 0?t:(l=a.errors)==null?void 0:l[r]}function NN(){let{router:t}=bN("useNavigate"),a=yf("useNavigate"),r=A.useRef(!1);return fb(()=>{r.current=!0}),A.useCallback(async(o,d={})=>{Ts(r.current,mb),r.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:a,...d}))},[t,a])}var $g={};function pb(t,a,r){!a&&!$g[t]&&($g[t]=!0,Ts(!1,r))}A.memo(SN);function SN({routes:t,future:a,state:r}){return xb(t,void 0,r,a)}function zm({to:t,replace:a,state:r,relative:l}){ut(Xr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=A.useContext(Bs);Ts(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=A.useContext(Ms),{pathname:m}=yt(),x=Me(),h=pf(t,xf(d),m,l==="path"),p=JSON.stringify(h);return A.useEffect(()=>{x(JSON.parse(p),{replace:a,state:r,relative:l})},[x,p,l,a,r]),null}function Vt(t){return uN(t.context)}function we(t){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CN({basename:t="/",children:a=null,location:r,navigationType:l="POP",navigator:o,static:d=!1}){ut(!Xr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),x=A.useMemo(()=>({basename:m,navigator:o,static:d,future:{}}),[m,o,d]);typeof r=="string"&&(r=Yr(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:j="default"}=r,E=A.useMemo(()=>{let b=ka(h,m);return b==null?null:{location:{pathname:b,search:p,hash:g,state:y,key:j},navigationType:l}},[m,h,p,g,y,j,l]);return Ts(E!=null,`<Router basename="${m}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:A.createElement(Bs.Provider,{value:x},A.createElement(vi.Provider,{children:a,value:E}))}function kN({children:t,location:a}){return mN(Um(t),a)}function Um(t,a=[]){let r=[];return A.Children.forEach(t,(l,o)=>{if(!A.isValidElement(l))return;let d=[...a,o];if(l.type===A.Fragment){r.push.apply(r,Um(l.props.children,d));return}ut(l.type===we,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!l.props.index||!l.props.children,"An index route cannot have child routes.");let m={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(m.children=Um(l.props.children,d)),r.push(m)}),r}var Jo="get",ec="application/x-www-form-urlencoded";function Ec(t){return t!=null&&typeof t.tagName=="string"}function EN(t){return Ec(t)&&t.tagName.toLowerCase()==="button"}function AN(t){return Ec(t)&&t.tagName.toLowerCase()==="form"}function ON(t){return Ec(t)&&t.tagName.toLowerCase()==="input"}function RN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TN(t,a){return t.button===0&&(!a||a==="_self")&&!RN(t)}function $m(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,r)=>{let l=t[r];return a.concat(Array.isArray(l)?l.map(o=>[r,o]):[[r,l]])},[]))}function PN(t,a){let r=$m(t);return a&&a.forEach((l,o)=>{r.has(o)||a.getAll(o).forEach(d=>{r.append(o,d)})}),r}var Go=null;function MN(){if(Go===null)try{new FormData(document.createElement("form"),0),Go=!1}catch{Go=!0}return Go}var LN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(t){return t!=null&&!LN.has(t)?(Ts(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ec}"`),null):t}function _N(t,a){let r,l,o,d,m;if(AN(t)){let x=t.getAttribute("action");l=x?ka(x,a):null,r=t.getAttribute("method")||Jo,o=xm(t.getAttribute("enctype"))||ec,d=new FormData(t)}else if(EN(t)||ON(t)&&(t.type==="submit"||t.type==="image")){let x=t.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||x.getAttribute("action");if(l=h?ka(h,a):null,r=t.getAttribute("formmethod")||x.getAttribute("method")||Jo,o=xm(t.getAttribute("formenctype"))||xm(x.getAttribute("enctype"))||ec,d=new FormData(x,t),!MN()){let{name:p,type:g,value:y}=t;if(g==="image"){let j=p?`${p}.`:"";d.append(`${j}x`,"0"),d.append(`${j}y`,"0")}else p&&d.append(p,y)}}else{if(Ec(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Jo,l=null,o=ec,m=t}return d&&o==="text/plain"&&(m=d,d=void 0),{action:l,method:r.toLowerCase(),encType:o,formData:d,body:m}}function wf(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}async function FN(t,a){if(t.id in a)return a[t.id];try{let r=await import(t.module);return a[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function qN(t,a,r){let l=await Promise.all(t.map(async o=>{let d=a.routes[o.route.id];if(d){let m=await FN(d,r);return m.links?m.links():[]}return[]}));return IN(l.flat(1).filter(DN).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ig(t,a,r,l,o,d){let m=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,x=(h,p)=>{var g;return r[p].pathname!==h.pathname||((g=r[p].route.path)==null?void 0:g.endsWith("*"))&&r[p].params["*"]!==h.params["*"]};return d==="assets"?a.filter((h,p)=>m(h,p)||x(h,p)):d==="data"?a.filter((h,p)=>{var y;let g=l.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(m(h,p)||x(h,p))return!0;if(h.route.shouldRevalidate){let j=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=r[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function zN(t,a,{includeHydrateFallback:r}={}){return UN(t.map(l=>{let o=a.routes[l.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function UN(t){return[...new Set(t)]}function $N(t){let a={},r=Object.keys(t).sort();for(let l of r)a[l]=t[l];return a}function IN(t,a){let r=new Set;return new Set(a),t.reduce((l,o)=>{let d=JSON.stringify($N(o));return r.has(d)||(r.add(d),l.push({key:d,link:o})),l},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BN=new Set([100,101,204,205]);function HN(t,a){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":a&&ka(r.pathname,a)==="/"?r.pathname=`${a.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function gb(){let t=A.useContext(Wr);return wf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function QN(){let t=A.useContext(kc);return wf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var vf=A.createContext(void 0);vf.displayName="FrameworkContext";function bb(){let t=A.useContext(vf);return wf(t,"You must render this element inside a <HydratedRouter> element"),t}function GN(t,a){let r=A.useContext(vf),[l,o]=A.useState(!1),[d,m]=A.useState(!1),{onFocus:x,onBlur:h,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=a,j=A.useRef(null);A.useEffect(()=>{if(t==="render"&&m(!0),t==="viewport"){let k=C=>{C.forEach(v=>{m(v.isIntersecting)})},w=new IntersectionObserver(k,{threshold:.5});return j.current&&w.observe(j.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(l){let k=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(k)}}},[l]);let E=()=>{o(!0)},b=()=>{o(!1),m(!1)};return r?t!=="intent"?[d,j,{}]:[d,j,{onFocus:ri(x,E),onBlur:ri(h,b),onMouseEnter:ri(p,E),onMouseLeave:ri(g,b),onTouchStart:ri(y,E)}]:[!1,j,{}]}function ri(t,a){return r=>{t&&t(r),r.defaultPrevented||a(r)}}function KN({page:t,...a}){let{router:r}=gb(),l=A.useMemo(()=>ib(r.routes,t,r.basename),[r.routes,t,r.basename]);return l?A.createElement(YN,{page:t,matches:l,...a}):null}function VN(t){let{manifest:a,routeModules:r}=bb(),[l,o]=A.useState([]);return A.useEffect(()=>{let d=!1;return qN(t,a,r).then(m=>{d||o(m)}),()=>{d=!0}},[t,a,r]),l}function YN({page:t,matches:a,...r}){let l=yt(),{manifest:o,routeModules:d}=bb(),{basename:m}=gb(),{loaderData:x,matches:h}=QN(),p=A.useMemo(()=>Ig(t,a,h,o,l,"data"),[t,a,h,o,l]),g=A.useMemo(()=>Ig(t,a,h,o,l,"assets"),[t,a,h,o,l]),y=A.useMemo(()=>{if(t===l.pathname+l.search+l.hash)return[];let b=new Set,k=!1;if(a.forEach(C=>{var N;let v=o.routes[C.route.id];!v||!v.hasLoader||(!p.some(T=>T.route.id===C.route.id)&&C.route.id in x&&((N=d[C.route.id])!=null&&N.shouldRevalidate)||v.hasClientLoader?k=!0:b.add(C.route.id))}),b.size===0)return[];let w=HN(t,m);return k&&b.size>0&&w.searchParams.set("_routes",a.filter(C=>b.has(C.route.id)).map(C=>C.route.id).join(",")),[w.pathname+w.search]},[m,x,l,o,p,a,t,d]),j=A.useMemo(()=>zN(g,o),[g,o]),E=VN(g);return A.createElement(A.Fragment,null,y.map(b=>A.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),j.map(b=>A.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),E.map(({key:b,link:k})=>A.createElement("link",{key:b,...k})))}function WN(...t){return a=>{t.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var yb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yb&&(window.__reactRouterVersion="7.6.1")}catch{}function XN({basename:t,children:a,window:r}){let l=A.useRef();l.current==null&&(l.current=Fj({window:r,v5Compat:!0}));let o=l.current,[d,m]=A.useState({action:o.action,location:o.location}),x=A.useCallback(h=>{A.startTransition(()=>m(h))},[m]);return A.useLayoutEffect(()=>o.listen(x),[o,x]),A.createElement(CN,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:o})}var wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=A.forwardRef(function({onClick:a,discover:r="render",prefetch:l="none",relative:o,reloadDocument:d,replace:m,state:x,target:h,to:p,preventScrollReset:g,viewTransition:y,...j},E){let{basename:b}=A.useContext(Bs),k=typeof p=="string"&&wb.test(p),w,C=!1;if(typeof p=="string"&&k&&(w=p,yb))try{let H=new URL(window.location.href),he=p.startsWith("//")?new URL(H.protocol+p):new URL(p),K=ka(he.pathname,b);he.origin===H.origin&&K!=null?p=K+he.search+he.hash:C=!0}catch{Ts(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=cN(p,{relative:o}),[N,T,P]=GN(l,j),D=t2(p,{replace:m,state:x,target:h,preventScrollReset:g,relative:o,viewTransition:y});function $(H){a&&a(H),H.defaultPrevented||D(H)}let q=A.createElement("a",{...j,...P,href:w||v,onClick:C||d?a:$,ref:WN(E,T),target:h,"data-discover":!k&&r==="render"?"true":void 0});return N&&!k?A.createElement(A.Fragment,null,q,A.createElement(KN,{page:v})):q});$t.displayName="Link";var ZN=A.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:l="",end:o=!1,style:d,to:m,viewTransition:x,children:h,...p},g){let y=ji(m,{relative:p.relative}),j=yt(),E=A.useContext(kc),{navigator:b,basename:k}=A.useContext(Bs),w=E!=null&&l2(y)&&x===!0,C=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,v=j.pathname,N=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(v=v.toLowerCase(),N=N?N.toLowerCase():null,C=C.toLowerCase()),N&&k&&(N=ka(N,k)||N);const T=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let P=v===C||!o&&v.startsWith(C)&&v.charAt(T)==="/",D=N!=null&&(N===C||!o&&N.startsWith(C)&&N.charAt(C.length)==="/"),$={isActive:P,isPending:D,isTransitioning:w},q=P?a:void 0,H;typeof l=="function"?H=l($):H=[l,P?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let he=typeof d=="function"?d($):d;return A.createElement($t,{...p,"aria-current":q,className:H,ref:g,style:he,to:m,viewTransition:x},typeof h=="function"?h($):h)});ZN.displayName="NavLink";var JN=A.forwardRef(({discover:t="render",fetcherKey:a,navigate:r,reloadDocument:l,replace:o,state:d,method:m=Jo,action:x,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:y,...j},E)=>{let b=n2(),k=r2(x,{relative:p}),w=m.toLowerCase()==="get"?"get":"post",C=typeof x=="string"&&wb.test(x),v=N=>{if(h&&h(N),N.defaultPrevented)return;N.preventDefault();let T=N.nativeEvent.submitter,P=(T==null?void 0:T.getAttribute("formmethod"))||m;b(T||N.currentTarget,{fetcherKey:a,method:P,navigate:r,replace:o,state:d,relative:p,preventScrollReset:g,viewTransition:y})};return A.createElement("form",{ref:E,method:w,action:k,onSubmit:l?h:v,...j,"data-discover":!C&&t==="render"?"true":void 0})});JN.displayName="Form";function e2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vb(t){let a=A.useContext(Wr);return ut(a,e2(t)),a}function t2(t,{target:a,replace:r,state:l,preventScrollReset:o,relative:d,viewTransition:m}={}){let x=Me(),h=yt(),p=ji(t,{relative:d});return A.useCallback(g=>{if(TN(g,a)){g.preventDefault();let y=r!==void 0?r:mi(h)===mi(p);x(t,{replace:y,state:l,preventScrollReset:o,relative:d,viewTransition:m})}},[h,x,p,r,l,a,t,o,d,m])}function Ac(t){Ts(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=A.useRef($m(t)),r=A.useRef(!1),l=yt(),o=A.useMemo(()=>PN(l.search,r.current?null:a.current),[l.search]),d=Me(),m=A.useCallback((x,h)=>{const p=$m(typeof x=="function"?x(o):x);r.current=!0,d("?"+p,h)},[d,o]);return[o,m]}var s2=0,a2=()=>`__${String(++s2)}__`;function n2(){let{router:t}=vb("useSubmit"),{basename:a}=A.useContext(Bs),r=vN();return A.useCallback(async(l,o={})=>{let{action:d,method:m,encType:x,formData:h,body:p}=_N(l,a);if(o.navigate===!1){let g=o.fetcherKey||a2();await t.fetch(g,r,o.action||d,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||m,formEncType:o.encType||x,flushSync:o.flushSync})}else await t.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||m,formEncType:o.encType||x,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,a,r])}function r2(t,{relative:a}={}){let{basename:r}=A.useContext(Bs),l=A.useContext(Ms);ut(l,"useFormAction must be used inside a RouteContext");let[o]=l.matches.slice(-1),d={...ji(t||".",{relative:a})},m=yt();if(t==null){d.search=m.search;let x=new URLSearchParams(d.search),h=x.getAll("index");if(h.some(g=>g==="")){x.delete("index"),h.filter(y=>y).forEach(y=>x.append("index",y));let g=x.toString();d.search=g?`?${g}`:""}}return(!t||t===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:Na([r,d.pathname])),mi(d)}function l2(t,a={}){let r=A.useContext(ub);ut(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=vb("useViewTransitionState"),o=ji(t,{relative:a.relative});if(!r.isTransitioning)return!1;let d=ka(r.currentLocation.pathname,l)||r.currentLocation.pathname,m=ka(r.nextLocation.pathname,l)||r.nextLocation.pathname;return rc(o.pathname,m)!=null||rc(o.pathname,d)!=null}[...BN];var pm={exports:{}},gm={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function i2(){if(Bg)return gm;Bg=1;var t=Cc();function a(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:a,l=t.useSyncExternalStore,o=t.useRef,d=t.useEffect,m=t.useMemo,x=t.useDebugValue;return gm.useSyncExternalStoreWithSelector=function(h,p,g,y,j){var E=o(null);if(E.current===null){var b={hasValue:!1,value:null};E.current=b}else b=E.current;E=m(function(){function w(P){if(!C){if(C=!0,v=P,P=y(P),j!==void 0&&b.hasValue){var D=b.value;if(j(D,P))return N=D}return N=P}if(D=N,r(v,P))return D;var $=y(P);return j!==void 0&&j(D,$)?(v=P,D):(v=P,N=$)}var C=!1,v,N,T=g===void 0?null:g;return[function(){return w(p())},T===null?void 0:function(){return w(T())}]},[p,g,y,j]);var k=l(h,E[0],E[1]);return d(function(){b.hasValue=!0,b.value=k},[k]),x(k),k},gm}var Hg;function o2(){return Hg||(Hg=1,pm.exports=i2()),pm.exports}var c2=o2();function d2(t){t()}function u2(){let t=null,a=null;return{clear(){t=null,a=null},notify(){d2(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let l=t;for(;l;)r.push(l),l=l.next;return r},subscribe(r){let l=!0;const o=a={callback:r,next:null,prev:a};return o.prev?o.prev.next=o:t=o,function(){!l||t===null||(l=!1,o.next?o.next.prev=o.prev:a=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Qg={notify(){},get:()=>[]};function m2(t,a){let r,l=Qg,o=0,d=!1;function m(k){g();const w=l.subscribe(k);let C=!1;return()=>{C||(C=!0,w(),y())}}function x(){l.notify()}function h(){b.onStateChange&&b.onStateChange()}function p(){return d}function g(){o++,r||(r=t.subscribe(h),l=u2())}function y(){o--,r&&o===0&&(r(),r=void 0,l.clear(),l=Qg)}function j(){d||(d=!0,g())}function E(){d&&(d=!1,y())}const b={addNestedSub:m,notifyNestedSubs:x,handleChangeWrapper:h,isSubscribed:p,trySubscribe:j,tryUnsubscribe:E,getListeners:()=>l};return b}var f2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",h2=f2(),x2=()=>typeof navigator<"u"&&navigator.product==="ReactNative",p2=x2(),g2=()=>h2||p2?A.useLayoutEffect:A.useEffect,b2=g2(),bm=Symbol.for("react-redux-context"),ym=typeof globalThis<"u"?globalThis:{};function y2(){if(!A.createContext)return{};const t=ym[bm]??(ym[bm]=new Map);let a=t.get(A.createContext);return a||(a=A.createContext(null),t.set(A.createContext,a)),a}var mn=y2();function w2(t){const{children:a,context:r,serverState:l,store:o}=t,d=A.useMemo(()=>{const h=m2(o);return{store:o,subscription:h,getServerState:l?()=>l:void 0}},[o,l]),m=A.useMemo(()=>o.getState(),[o]);b2(()=>{const{subscription:h}=d;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),m!==o.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[d,m]);const x=r||mn;return A.createElement(x.Provider,{value:d},a)}var v2=w2;function jf(t=mn){return function(){return A.useContext(t)}}var jb=jf();function Nb(t=mn){const a=t===mn?jb:jf(t),r=()=>{const{store:l}=a();return l};return Object.assign(r,{withTypes:()=>r}),r}var j2=Nb();function N2(t=mn){const a=t===mn?j2:Nb(t),r=()=>a().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var ys=N2(),S2=(t,a)=>t===a;function C2(t=mn){const a=t===mn?jb:jf(t),r=(l,o={})=>{const{equalityFn:d=S2}=typeof o=="function"?{equalityFn:o}:o,m=a(),{store:x,subscription:h,getServerState:p}=m;A.useRef(!0);const g=A.useCallback({[l.name](j){return l(j)}}[l.name],[l]),y=c2.useSyncExternalStoreWithSelector(h.addNestedSub,x.getState,p||x.getState,g,d);return A.useDebugValue(y),y};return Object.assign(r,{withTypes:()=>r}),r}var xs=C2();const Im={PROJECTS:"Projects",ORGANIZATION:"Organization"},k2={PROJECTS:"fa-solid fa-diagram-project text-2xl",ORGANIZATION:"fa-solid fa-building text-2xl"},Sb={ADMIN:"fas fa-user-tie text-2xl",STAFF:"fas fa-user-gear text-2xl",CTO:"fas fa-users-gear text-2xl",WORKER:"fas fa-hard-hat text-2xl",CLIENT:"fas fa-user text-2xl"},lc={ADMIN:"Admin Login",STAFF:"STaff Login",CTO:"CTO Login",WORKER:"Worker Login",CLIENT:"Client Login"},E2={INVITECTO:"fa-solid fa-user-tie text-2xl",INVITESTAFFS:"fa-solid fa-user text-2xl",DETAILS:"fa-solid fa-building text-2xl",PROJECTS:"fa-solid fa-diagram-project  text-2xl",PLAN:"fa-solid fa-cash  text-2xl",PROFILE:"fa-solid fa-user-gear  text-2xl"},Gg={INVITECTO:"Invite CTO",INVITESTAFFS:"Invite Staffs",DETAILS:"Org Details",PROJECTS:"Projects",PLAN:"Upgrade Plan",PROFILE:"User Profile"},Kg={WORKERS:"Invite Workers",INVITECLIENT:"Invite Client",PREREQUIRETIES:"Pre Requireties",REQUIREMENTFORM:"Requirement Form",SITEMEASUREMENT:"Site Measurement",SAMPLEDESIGN:"Sample Designs",TECHNICALCONSULTANT:"Technical consultant",MATERIALSELECTION:"Material Selection",COSTESTIMATION:"Cost Estiamtion",PAYMENTCONFIRMATION:"Payment Stage",ORDERMATERIALS:"Ordering Material",MATERIALARRIVED:"Material Arrival",WORKSCHEDULE:"Work Schedule",INSTALLATION:"Installation and execution",QUALITYCHECK:"Quality Check",CLEANINGSANITATION:"Cleaning & Sanitation",PROJECTDELIVERY:"Project Delivery"},A2={WORKERS:"fa-solid fa-circle-info text-2xl",INVITECLIENT:"fa-solid fa-user-group text-2xl",PREREQUIRETIES:"fa-solid fa-clipboard text-2xl",REQUIREMENTFORM:"fa-solid fa-pencil text-2xl",SITEMEASUREMENT:"fa-solid fa-building text-2xl",SAMPLEDESIGN:"fa-solid fa-object-group text-2xl",TECHNICALCONSULTANT:"fa-solid fa-comments text-2xl",MATERIALSELECTION:"fas fa-box text-2xl",COSTESTIMATION:"fa-solid fa-money-bill-1-wave text-2xl",PAYMENTCONFIRMATION:"fa-solid fa-money-bill-wave text-2xl",ORDERMATERIALS:"fa-solid fa-shopping-cart text-2xl",MATERIALARRIVED:"fa-solid fa-receipt text-2xl",WORKSCHEDULE:"fas fa-digging text-2xl",INSTALLATION:"fas fa-comments text-2xl",QUALITYCHECK:"fas fa-check-double text-2xl",CLEANINGSANITATION:"fas fa-broom text-2xl",PROJECTDELIVERY:"fas fa-handshake text-2xl"},O2={labourlist:"Labours",materiallist:"Materials",transportationlist:"Transportation",workers:"Workers",inviteclient:"Invite Client",requirementform:"Requirement Form",sitemeasurement:"Site Measurement",sampledesign:"Sample Designs",technicalconsultant:"Technical consultant",materialselection:"Material Selection",costestimation:"Cost Estiamtion",paymentconfirmation:"Payment Stage",ordermaterial:"Ordering Material",materialarrival:"Material Arrival",workmainschedule:"Work Schedule",installation:"Installation and execution",qualitycheck:"Quality Check",cleaning:"Cleaning & Sanitation",projectdelivery:"Project Delivery"},R2={labourlist:"LABOURS",materiallist:"MATERIALS",transportationlist:"TRANSPORTATION",workers:"WORKERS",inviteclient:"INVITECLIENT",requirementform:"REQUIREMENTFORM",sitemeasurement:"SITEMEASUREMENT",sampledesign:"SAMPLEDESIGN",technicalconsultant:"TECHNICALCONSULTANT",materialselection:"MATERIALSELECTION",costestimation:"COSTESTIMATION",paymentconfirmation:"PAYMENTCONFIRMATION",ordermaterial:"ORDERMATERIALS",materialarrival:"MATERIALARRIVED",workmainschedule:"WORKSCHEDULE",installation:"INSTALLATION",qualitycheck:"QUALITYCHECK",cleaning:"CLEANINGSANITATION",projectdelivery:"PROJECTDELIVERY"},bt={COMPANY_NAME:"Vertical living",COMPANY_LOGO:"https://th.bing.com/th/id/OIP.Uparc9uI63RDb82OupdPvwAAAA?w=80&h=80&c=1&bgcl=c77779&r=0&o=6&dpr=1.3&pid=ImgRC"},Cb=[{key:"basic",name:"Basic",price:1e3,color:"border-blue-500",btnColor:"bg-blue-600 hover:bg-blue-700",planNameColor:"text-blue-700",features:[" 5 Roles Allowed"," Email Notification"," Timer Functionality"," Image Upload"," PDF Upload"," Assign Staffs"," Cost Estimation"],available:!0},{key:"advanced",name:"Advanced",price:0,color:"border-purple-500",btnColor:"bg-purple-600 hover:bg-purple-700",planNameColor:"text-purple-700",features:[],available:!1},{key:"enterprise",name:"Enterprise",price:0,color:"border-rose-500",btnColor:"bg-rose-600 hover:bg-rose-700",planNameColor:"text-rose-700",features:[],available:!1}],ya={carpentry:["material","brandName","specification","quantity","unit","remarks"],hardware:["item","size","material","brandName","quantity","unit","remarks"],electricalFittings:["item","specification","quantity","unit","remarks"],tiles:["type","brandName","size","quantity","unit","remarks"],ceramicSanitaryware:["item","specification","quantity","unit","remarks"],paintsCoatings:["type","brandName","color","quantity","unit","remarks"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks"],glassMirrors:["type","brandName","size","thickness","quantity","remarks"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks"],falseCeilingMaterials:["item","specification","quantity","unit","remarks"]},T2={carpentry:["Greenply","CenturyPly","Kitply","Archidply","Merino Laminates","Action TESA","Austin Plywood"],hardware:["Hettich","Hafele","Ebco","Godrej Locks","Dorset","Ozone","Blum","Yale"],electricalFittings:["Havells","Anchor by Panasonic","Legrand","Schneider Electric","GM Modular","Wipro","Philips","Syska"],tiles:["Kajaria","Somany","Nitco","Orientbell","Johnson Tiles","Varmora","Asian Granito"],ceramicSanitaryware:["Hindware","Jaquar","CERA","Parryware","Kohler India","Roca India"],paintsCoatings:["Asian Paints","Berger Paints","Nerolac Paints","Dulux Paints","Indigo Paints","Shalimar Paints"],lightsFixtures:["Philips Lighting","Syska LED","Wipro Lighting","Havells","Crompton","Bajaj Electricals"],glassMirrors:["Saint-Gobain","Modiguard","AIS Glass","HNG Float Glass","Gold Plus Glass"],upholsteryCurtains:["DDecor","Fabindia","Bombay Dyeing","Raymond Furnishings","Spaces Home & Beyond"],falseCeilingMaterials:["Gyproc by Saint-Gobain","Armstrong Ceilings","USG Boral","Everest Industries","Shera"]},Zs={carpentry:["material","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],hardware:["item","size","material","brandName","quantity","unit","remarks","image","verifiedByAccountant"],electricalFittings:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],tiles:["type","brandName","size","quantity","unit","remarks","image","verifiedByAccountant"],ceramicSanitaryware:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],paintsCoatings:["type","brandName","color","quantity","unit","remarks","image","verifiedByAccountant"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],glassMirrors:["type","brandName","size","thickness","quantity","remarks","image","verifiedByAccountant"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks","image","verifiedByAccountant"],falseCeilingMaterials:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"]},wm={brandName:{carpentry:["Greenply","Century","Kitply","Archid","Austin"],hardware:["Hettich","Hafele","Blum","Godrej"],tiles:["Kajaria","Somany","Johnson","Nitco"],paintsCoatings:["Asian Paints","Berger","Dulux"],lightsFixtures:["Philips","Syska","Wipro"],glassMirrors:["Saint-Gobain","Modiguard","Asahi"],ceramicSanitaryware:["Cera","Parryware","Hindware"]},fabric:{upholsteryCurtains:["Cotton","Linen","Velvet","Polyester","Silk"]}},P2=["Living Room","Bedroom","Kitchen","Dining Room","Balcony","Foyer Area","Terrace","Study Room","Car Parking","Garden","Storage Room","Entertainment Room","Home Gym"],kb=[{stepNumber:1,label:"Identify Painting Area",rules:["Measure and record room dimensions (length, width, height) in feet and inches using a measuring tape or laser tool.","Take high-resolution photos of all walls, corners, and ceiling edges for supervisor reference.","Highlight and document any cracks, dampness, or surface irregularities that need attention.","Upload details of the paint brand and colour code selected for approval before proceeding."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Cover the floor using durable plastic sheets or canvas drop cloths to prevent paint spillage.","Move all movable furniture to the center of the room and cover them securely with protective sheets.","Apply masking tape to skirting boards, switches, sockets, and window trims for protection."]},{stepNumber:3,label:"Surface Preparation",rules:["Clean all walls thoroughly to remove dust, dirt, and grease spots.","Scrape off any old loose paint using a putty knife.","Fill cracks and holes with quality wall putty and allow it to dry.","Sand the surface to ensure a smooth and even base for putty application."]},{stepNumber:4,label:"First Coat of Putty",rules:["Apply the first coat of wall putty using a broad putty knife for even application.","Allow sufficient drying time as per the manufacturers guidelines.","Lightly sand the surface to remove any excess material and achieve a smooth finish."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Apply a second coat of wall putty for a fine, uniform surface.","After drying, sand the surface again to ensure it is perfectly smooth and ready for scrubbing.","Clean all dust particles with a dry cloth before proceeding."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["After applying two coats of putty, scrub the wall surface to eliminate any rough patches.","Choose between manual scrubbing (using sandpaper for small areas and edges) or machine scrubbing (for large walls, ensuring consistency and time-saving).","Scrub in circular motions and clean off all dust after scrubbing."]},{stepNumber:6,label:"Primer Application",rules:["Apply one uniform coat of primer using a roller or brush.","Allow the primer to dry completely before moving to paint application."]},{stepNumber:7,label:"First Coat of Paint",rules:["Apply the first coat of approved paint using consistent strokes to avoid streaks.","Allow sufficient drying time before applying the second coat."]},{stepNumber:8,label:"Second Coat of Paint",rules:["Apply the second coat of paint for a smooth, uniform finish.","Inspect walls for any missed spots and touch up as required."]},{stepNumber:9,label:"Final Finishing and Cleanup",rules:["Conduct a final inspection of all painted surfaces for uniformity.","Carefully remove all masking tape to avoid peeling paint.","Clean up the workspace, remove protective sheets, and reset furniture."]}],Eb=[{stepNumber:1,label:"Identify Painting Area",rules:["Review worker-uploaded images and details for Step 1.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Review worker-uploaded images and details for Step 2.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:3,label:"Surface Preparation",rules:["Review worker-uploaded images and details for Step 3.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:4,label:"First Coat of Putty",rules:["Review worker-uploaded images and details for Step 4.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Review worker-uploaded images and details for Step 5.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["Review worker-uploaded images and details for Step 6.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:7,label:"Primer Application",rules:["Review worker-uploaded images and details for Step 7.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:8,label:"First Coat of Paint",rules:["Review worker-uploaded images and details for Step 8.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:9,label:"Second Coat of Paint",rules:["Review worker-uploaded images and details for Step 9.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:10,label:"Final Finishing and Cleanup",rules:["Review worker-uploaded images and details for Step 10.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]}],Ko=({src:t,alt:a,className:r="",width:l,height:o})=>{const[d,m]=A.useState(!1),[x,h]=A.useState("");return A.useEffect(()=>{const p=new Image;p.crossOrigin="anonymous",p.onload=()=>{h(t),m(!0)},p.src=t},[t]),e.jsxs("div",{className:`relative overflow-hidden ${r}`,style:{width:l,height:o},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-blue-100 to-purple-100 transition-opacity duration-500 ${d?"opacity-0":"opacity-100"}`}),x&&e.jsx("img",{src:x,alt:a,className:`w-full h-full object-cover transition-opacity duration-500 ${d?"opacity-100":"opacity-0"}`})]})},li=({children:t,className:a=""})=>e.jsx("div",{className:`bg-white rounded-lg shadow-lg ${a}`,children:t}),vm=({children:t,variant:a="primary",size:r="md",className:l="",onClick:o})=>{const d="font-semibold rounded-lg transition-all duration-200 inline-flex items-center justify-center",m={primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700",secondary:"bg-white text-gray-900 border border-gray-300 hover:bg-gray-50",outline:"border-2 border-current bg-transparent hover:bg-current hover:text-white"},x={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return e.jsx("button",{className:`${d} ${m[a]} ${x[r]} ${l}`,onClick:o,children:t})},Vg=({children:t,className:a=""})=>e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ${a}`,children:t});function Yg(){const t=xs(m=>m.authStore),[a,r]=A.useState(!1),l=Me(),o=()=>{r(!1)},d={basic:"Perfect for small design studios",enterprise:"For large design firms",advanced:" For growing design businesses"};return e.jsxs("div",{className:"min-h-full w-full bg-white",children:[e.jsx("header",{className:"border-b px-4 border-gray-300 w-full bg-white/95 backdrop-blur sticky top-0 z-50",children:e.jsx("div",{className:" w-full",children:e.jsxs("div",{className:"flex justify-between w-full items-center py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ko,{src:bt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-10 h-10 rounded-lg",width:40,height:40}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:bt.COMPANY_NAME})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[e.jsx(vm,{onClick:()=>l("/login"),variant:"secondary",className:"hidden sm:inline-flex cursor-pointer",children:"Sign In"}),(t==null?void 0:t.isauthenticated)&&e.jsx(vm,{onClick:()=>l("/"),className:"cursor-pointer",children:"Get Started"})]}),e.jsx("button",{className:"sm:hidden block p-2",onClick:()=>r(!a),children:e.jsx("i",{className:"fas fa-bars text-gray-600"})})]})]})})}),e.jsx("div",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${a?"translate-x-0":"-translate-x-full"} `,children:e.jsxs("nav",{className:"flex flex-col space-y-4 ",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:bt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:bt.COMPANY_NAME})]}),e.jsx("button",{onClick:o,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("ul",{className:"px-4 space-x-2 max-h-screen overflow-y-auto space-y-4 ",children:[e.jsx("li",{onClick:()=>l("/login"),className:"border-b border-gray-300 py-5",children:e.jsx($t,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Sign In"})}),e.jsx("li",{onClick:()=>l("/organizations"),children:e.jsx($t,{to:"/organizations",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Get Started"})})]})]})}),e.jsx("section",{className:"pt-20 pb-16 sm:py-24",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs(Vg,{className:"mb-4",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Interior Design Task Management"]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Streamline Your"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Work Flows"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Manage client requirements, assign tasks to workers, set timers, and send automated email reminders. Everything you need to deliver exceptional interior design projects on time."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsxs(vm,{onClick:()=>l("/organizations"),size:"lg",className:"text-lg px-8 py-3 cursor-pointer",children:["Get Started Today",e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})})]}),e.jsx("div",{className:"mt-16 max-w-5xl mx-auto",children:e.jsx(Ko,{src:"/placeholder.svg?height=600&width=1000",alt:"Vertical Living Dashboard",className:"rounded-xl shadow-2xl border"})})]})}),e.jsx("section",{id:"features",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Everything you need for interior design project management"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Powerful features designed specifically for interior designers and their teams"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs(li,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-clipboard-list text-blue-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Client Requirements"}),e.jsx("p",{className:"text-gray-600",children:"Capture and organize client requirements, preferences, and specifications in one centralized location."})]}),e.jsxs(li,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-users text-green-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Task Assignment"}),e.jsx("p",{className:"text-gray-600",children:"Assign tasks to team members and workers with clear deadlines and detailed instructions."})]}),e.jsxs(li,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-envelope text-purple-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Email Reminders"}),e.jsx("p",{className:"text-gray-600",children:"Automated email notifications and reminders to keep everyone on track and informed."})]}),e.jsxs(li,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-stopwatch text-orange-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Time Tracking"}),e.jsx("p",{className:"text-gray-600",children:"Built-in timers to track work hours and monitor project progress in real-time."})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsxs("div",{className:"w-[100%] sm:w-[60%] mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-center  text-gray-900 mb-4",children:"Designed for Interior Design Professionals"}),e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Unlike generic project management tools, Vertical Living is built specifically for interior designers. We understand your workflow, from initial client consultation to final installation."})]}),e.jsx("div",{children:e.jsx(Ko,{src:"/placeholder.svg?height=400&width=500",alt:"Interior Design Project Management",className:"rounded-lg shadow-lg"})})]})]})}),e.jsx("section",{id:"pricing",className:"py-20",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Explore Plan"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Start with our Basic plan and upgrade as your business grows"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:Cb.map(m=>{let x="";switch(m.key){case"basic":x="fa-seedling";break;case"advanced":x="fa-rocket";break;case"enterprise":x="fa-building";break;default:x="fa-layer-group"}return e.jsxs(li,{className:`border-2 ${m.price?"border-blue-500":"border-none"} shadow-xl relative p-6`,children:[m.price===0&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(Vg,{className:"bg-gray-500 text-white",children:"Coming Soon"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-2",children:[e.jsx("i",{className:`fa-solid ${x} ${m.price?"text-blue-600":"text-gray-600"} mr-2`}),m.name]}),e.jsx("p",{className:"text-gray-600 mb-4",children:d[m.key]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:`text-2xl sm:text-2xl ${m.price?"text-3xl":"text-xl"} font-bold`,children:[" ",m.price?` ${m.price}`:"Coming Soon"]}),m.price>0&&e.jsx("span",{className:"text-gray-500",children:"/month"})]})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:m.features.length>0?m.features.map((h,p)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${h.includes("")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:h.replace("","").replace("","")})]},p)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})})]},m.key)})})]})}),e.jsx("footer",{id:"contact",className:"bg-gray-900 text-white py-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ko,{src:bt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-8 h-8 rounded-lg",width:32,height:32}),e.jsx("span",{className:"text-xl font-bold",children:bt.COMPANY_NAME})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Streamline your Work flow with our specialized task management platform."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-linkedin text-xl"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-instagram text-xl"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"text-gray-400 scroll-smooth  hover:text-white transition-colors",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors",children:"Pricing"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",className:"text-gray-400 hover:text-white transition-colors",children:"Contact"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," ",bt.COMPANY_NAME,". All rights reserved."]}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Terms of Service"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cookie Policy"})]})]})]})})]})}const M2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Issues"}),L2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Phase"}),_2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Tasks"});function F2(t,a){A.useEffect(()=>{const r=l=>{l.ctrlKey&&l.key==="]"?(l.preventDefault(),a()):l.ctrlKey&&l.key==="["&&(l.preventDefault(),t())};window.addEventListener("keydown",r)},[a,t])}var Zr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qn=typeof window>"u"||"Deno"in globalThis;function Qt(){}function D2(t,a){return typeof t=="function"?t(a):t}function Bm(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ab(t,a){return Math.max(t+(a||0)-Date.now(),0)}function un(t,a){return typeof t=="function"?t(a):t}function Us(t,a){return typeof t=="function"?t(a):t}function Wg(t,a){const{type:r="all",exact:l,fetchStatus:o,predicate:d,queryKey:m,stale:x}=t;if(m){if(l){if(a.queryHash!==Nf(m,a.options))return!1}else if(!fi(a.queryKey,m))return!1}if(r!=="all"){const h=a.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof x=="boolean"&&a.isStale()!==x||o&&o!==a.state.fetchStatus||d&&!d(a))}function Xg(t,a){const{exact:r,status:l,predicate:o,mutationKey:d}=t;if(d){if(!a.options.mutationKey)return!1;if(r){if(Gn(a.options.mutationKey)!==Gn(d))return!1}else if(!fi(a.options.mutationKey,d))return!1}return!(l&&a.state.status!==l||o&&!o(a))}function Nf(t,a){return((a==null?void 0:a.queryKeyHashFn)||Gn)(t)}function Gn(t){return JSON.stringify(t,(a,r)=>Hm(r)?Object.keys(r).sort().reduce((l,o)=>(l[o]=r[o],l),{}):r)}function fi(t,a){return t===a?!0:typeof t!=typeof a?!1:t&&a&&typeof t=="object"&&typeof a=="object"?Object.keys(a).every(r=>fi(t[r],a[r])):!1}function Ob(t,a){if(t===a)return t;const r=Zg(t)&&Zg(a);if(r||Hm(t)&&Hm(a)){const l=r?t:Object.keys(t),o=l.length,d=r?a:Object.keys(a),m=d.length,x=r?[]:{},h=new Set(l);let p=0;for(let g=0;g<m;g++){const y=r?g:d[g];(!r&&h.has(y)||r)&&t[y]===void 0&&a[y]===void 0?(x[y]=void 0,p++):(x[y]=Ob(t[y],a[y]),x[y]===t[y]&&t[y]!==void 0&&p++)}return o===m&&p===o?t:x}return a}function ic(t,a){if(!a||Object.keys(t).length!==Object.keys(a).length)return!1;for(const r in t)if(t[r]!==a[r])return!1;return!0}function Zg(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Hm(t){if(!Jg(t))return!1;const a=t.constructor;if(a===void 0)return!0;const r=a.prototype;return!(!Jg(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Jg(t){return Object.prototype.toString.call(t)==="[object Object]"}function q2(t){return new Promise(a=>{setTimeout(a,t)})}function Qm(t,a,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,a):r.structuralSharing!==!1?Ob(t,a):a}function z2(t,a,r=0){const l=[...t,a];return r&&l.length>r?l.slice(1):l}function U2(t,a,r=0){const l=[a,...t];return r&&l.length>r?l.slice(0,-1):l}var Sf=Symbol();function Rb(t,a){return!t.queryFn&&(a!=null&&a.initialPromise)?()=>a.initialPromise:!t.queryFn||t.queryFn===Sf?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Tb(t,a){return typeof t=="function"?t(...a):!!t}var Fn,en,_r,X0,$2=(X0=class extends Zr{constructor(){super();ke(this,Fn);ke(this,en);ke(this,_r);ve(this,_r,a=>{if(!Qn&&window.addEventListener){const r=()=>a();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){I(this,en)||this.setEventListener(I(this,_r))}onUnsubscribe(){var a;this.hasListeners()||((a=I(this,en))==null||a.call(this),ve(this,en,void 0))}setEventListener(a){var r;ve(this,_r,a),(r=I(this,en))==null||r.call(this),ve(this,en,a(l=>{typeof l=="boolean"?this.setFocused(l):this.onFocus()}))}setFocused(a){I(this,Fn)!==a&&(ve(this,Fn,a),this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(r=>{r(a)})}isFocused(){var a;return typeof I(this,Fn)=="boolean"?I(this,Fn):((a=globalThis.document)==null?void 0:a.visibilityState)!=="hidden"}},Fn=new WeakMap,en=new WeakMap,_r=new WeakMap,X0),Cf=new $2,Fr,tn,Dr,Z0,I2=(Z0=class extends Zr{constructor(){super();ke(this,Fr,!0);ke(this,tn);ke(this,Dr);ve(this,Dr,a=>{if(!Qn&&window.addEventListener){const r=()=>a(!0),l=()=>a(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",l)}}})}onSubscribe(){I(this,tn)||this.setEventListener(I(this,Dr))}onUnsubscribe(){var a;this.hasListeners()||((a=I(this,tn))==null||a.call(this),ve(this,tn,void 0))}setEventListener(a){var r;ve(this,Dr,a),(r=I(this,tn))==null||r.call(this),ve(this,tn,a(this.setOnline.bind(this)))}setOnline(a){I(this,Fr)!==a&&(ve(this,Fr,a),this.listeners.forEach(l=>{l(a)}))}isOnline(){return I(this,Fr)}},Fr=new WeakMap,tn=new WeakMap,Dr=new WeakMap,Z0),oc=new I2;function Gm(){let t,a;const r=new Promise((o,d)=>{t=o,a=d});r.status="pending",r.catch(()=>{});function l(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{l({status:"fulfilled",value:o}),t(o)},r.reject=o=>{l({status:"rejected",reason:o}),a(o)},r}function B2(t){return Math.min(1e3*2**t,3e4)}function Pb(t){return(t??"online")==="online"?oc.isOnline():!0}var Mb=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jm(t){return t instanceof Mb}function Lb(t){let a=!1,r=0,l=!1,o;const d=Gm(),m=k=>{var w;l||(j(new Mb(k)),(w=t.abort)==null||w.call(t))},x=()=>{a=!0},h=()=>{a=!1},p=()=>Cf.isFocused()&&(t.networkMode==="always"||oc.isOnline())&&t.canRun(),g=()=>Pb(t.networkMode)&&t.canRun(),y=k=>{var w;l||(l=!0,(w=t.onSuccess)==null||w.call(t,k),o==null||o(),d.resolve(k))},j=k=>{var w;l||(l=!0,(w=t.onError)==null||w.call(t,k),o==null||o(),d.reject(k))},E=()=>new Promise(k=>{var w;o=C=>{(l||p())&&k(C)},(w=t.onPause)==null||w.call(t)}).then(()=>{var k;o=void 0,l||(k=t.onContinue)==null||k.call(t)}),b=()=>{if(l)return;let k;const w=r===0?t.initialPromise:void 0;try{k=w??t.fn()}catch(C){k=Promise.reject(C)}Promise.resolve(k).then(y).catch(C=>{var D;if(l)return;const v=t.retry??(Qn?0:3),N=t.retryDelay??B2,T=typeof N=="function"?N(r,C):N,P=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,C);if(a||!P){j(C);return}r++,(D=t.onFail)==null||D.call(t,r,C),q2(T).then(()=>p()?void 0:E()).then(()=>{a?j(C):b()})})};return{promise:d,cancel:m,continue:()=>(o==null||o(),d),cancelRetry:x,continueRetry:h,canStart:g,start:()=>(g()?b():E().then(b),d)}}var H2=t=>setTimeout(t,0);function Q2(){let t=[],a=0,r=x=>{x()},l=x=>{x()},o=H2;const d=x=>{a?t.push(x):o(()=>{r(x)})},m=()=>{const x=t;t=[],x.length&&o(()=>{l(()=>{x.forEach(h=>{r(h)})})})};return{batch:x=>{let h;a++;try{h=x()}finally{a--,a||m()}return h},batchCalls:x=>(...h)=>{d(()=>{x(...h)})},schedule:d,setNotifyFunction:x=>{r=x},setBatchNotifyFunction:x=>{l=x},setScheduler:x=>{o=x}}}var Ct=Q2(),Dn,J0,_b=(J0=class{constructor(){ke(this,Dn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bm(this.gcTime)&&ve(this,Dn,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qn?1/0:5*60*1e3))}clearGcTimeout(){I(this,Dn)&&(clearTimeout(I(this,Dn)),ve(this,Dn,void 0))}},Dn=new WeakMap,J0),qr,zr,Rs,qn,qt,gi,zn,qs,wa,eb,G2=(eb=class extends _b{constructor(a){super();ke(this,qs);ke(this,qr);ke(this,zr);ke(this,Rs);ke(this,qn);ke(this,qt);ke(this,gi);ke(this,zn);ve(this,zn,!1),ve(this,gi,a.defaultOptions),this.setOptions(a.options),this.observers=[],ve(this,qn,a.client),ve(this,Rs,I(this,qn).getQueryCache()),this.queryKey=a.queryKey,this.queryHash=a.queryHash,ve(this,qr,K2(this.options)),this.state=a.state??I(this,qr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var a;return(a=I(this,qt))==null?void 0:a.promise}setOptions(a){this.options={...I(this,gi),...a},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,Rs).remove(this)}setData(a,r){const l=Qm(this.state.data,a,this.options);return ze(this,qs,wa).call(this,{data:l,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),l}setState(a,r){ze(this,qs,wa).call(this,{type:"setState",state:a,setStateOptions:r})}cancel(a){var l,o;const r=(l=I(this,qt))==null?void 0:l.promise;return(o=I(this,qt))==null||o.cancel(a),r?r.then(Qt).catch(Qt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,qr))}isActive(){return this.observers.some(a=>Us(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>un(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!Ab(this.state.dataUpdatedAt,a)}onFocus(){var r;const a=this.observers.find(l=>l.shouldFetchOnWindowFocus());a==null||a.refetch({cancelRefetch:!1}),(r=I(this,qt))==null||r.continue()}onOnline(){var r;const a=this.observers.find(l=>l.shouldFetchOnReconnect());a==null||a.refetch({cancelRefetch:!1}),(r=I(this,qt))==null||r.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),I(this,Rs).notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(r=>r!==a),this.observers.length||(I(this,qt)&&(I(this,zn)?I(this,qt).cancel({revert:!0}):I(this,qt).cancelRetry()),this.scheduleGc()),I(this,Rs).notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ze(this,qs,wa).call(this,{type:"invalidate"})}fetch(a,r){var p,g,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(I(this,qt))return I(this,qt).continueRetry(),I(this,qt).promise}if(a&&this.setOptions(a),!this.options.queryFn){const j=this.observers.find(E=>E.options.queryFn);j&&this.setOptions(j.options)}const l=new AbortController,o=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(ve(this,zn,!0),l.signal)})},d=()=>{const j=Rb(this.options,r),b=(()=>{const k={client:I(this,qn),queryKey:this.queryKey,meta:this.meta};return o(k),k})();return ve(this,zn,!1),this.options.persister?this.options.persister(j,b,this):j(b)},x=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:I(this,qn),state:this.state,fetchFn:d};return o(j),j})();(p=this.options.behavior)==null||p.onFetch(x,this),ve(this,zr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=x.fetchOptions)==null?void 0:g.meta))&&ze(this,qs,wa).call(this,{type:"fetch",meta:(y=x.fetchOptions)==null?void 0:y.meta});const h=j=>{var E,b,k,w;jm(j)&&j.silent||ze(this,qs,wa).call(this,{type:"error",error:j}),jm(j)||((b=(E=I(this,Rs).config).onError)==null||b.call(E,j,this),(w=(k=I(this,Rs).config).onSettled)==null||w.call(k,this.state.data,j,this)),this.scheduleGc()};return ve(this,qt,Lb({initialPromise:r==null?void 0:r.initialPromise,fn:x.fetchFn,abort:l.abort.bind(l),onSuccess:j=>{var E,b,k,w;if(j===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(j)}catch(C){h(C);return}(b=(E=I(this,Rs).config).onSuccess)==null||b.call(E,j,this),(w=(k=I(this,Rs).config).onSettled)==null||w.call(k,j,this.state.error,this),this.scheduleGc()},onError:h,onFail:(j,E)=>{ze(this,qs,wa).call(this,{type:"failed",failureCount:j,error:E})},onPause:()=>{ze(this,qs,wa).call(this,{type:"pause"})},onContinue:()=>{ze(this,qs,wa).call(this,{type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay,networkMode:x.options.networkMode,canRun:()=>!0})),I(this,qt).start()}},qr=new WeakMap,zr=new WeakMap,Rs=new WeakMap,qn=new WeakMap,qt=new WeakMap,gi=new WeakMap,zn=new WeakMap,qs=new WeakSet,wa=function(a){const r=l=>{switch(a.type){case"failed":return{...l,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...Fb(l.data,this.options),fetchMeta:a.meta??null};case"success":return{...l,data:a.data,dataUpdateCount:l.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=a.error;return jm(o)&&o.revert&&I(this,zr)?{...I(this,zr),fetchStatus:"idle"}:{...l,error:o,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...a.state}}};this.state=r(this.state),Ct.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),I(this,Rs).notify({query:this,type:"updated",action:a})})},eb);function Fb(t,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pb(a.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function K2(t){const a=typeof t.initialData=="function"?t.initialData():t.initialData,r=a!==void 0,l=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:r?l??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Js,tb,V2=(tb=class extends Zr{constructor(a={}){super();ke(this,Js);this.config=a,ve(this,Js,new Map)}build(a,r,l){const o=r.queryKey,d=r.queryHash??Nf(o,r);let m=this.get(d);return m||(m=new G2({client:a,queryKey:o,queryHash:d,options:a.defaultQueryOptions(r),state:l,defaultOptions:a.getQueryDefaults(o)}),this.add(m)),m}add(a){I(this,Js).has(a.queryHash)||(I(this,Js).set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const r=I(this,Js).get(a.queryHash);r&&(a.destroy(),r===a&&I(this,Js).delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){Ct.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return I(this,Js).get(a)}getAll(){return[...I(this,Js).values()]}find(a){const r={exact:!0,...a};return this.getAll().find(l=>Wg(r,l))}findAll(a={}){const r=this.getAll();return Object.keys(a).length>0?r.filter(l=>Wg(a,l)):r}notify(a){Ct.batch(()=>{this.listeners.forEach(r=>{r(a)})})}onFocus(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},Js=new WeakMap,tb),ea,Bt,Un,ta,Ja,sb,Y2=(sb=class extends _b{constructor(a){super();ke(this,ta);ke(this,ea);ke(this,Bt);ke(this,Un);this.mutationId=a.mutationId,ve(this,Bt,a.mutationCache),ve(this,ea,[]),this.state=a.state||Db(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){I(this,ea).includes(a)||(I(this,ea).push(a),this.clearGcTimeout(),I(this,Bt).notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){ve(this,ea,I(this,ea).filter(r=>r!==a)),this.scheduleGc(),I(this,Bt).notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){I(this,ea).length||(this.state.status==="pending"?this.scheduleGc():I(this,Bt).remove(this))}continue(){var a;return((a=I(this,Un))==null?void 0:a.continue())??this.execute(this.state.variables)}async execute(a){var d,m,x,h,p,g,y,j,E,b,k,w,C,v,N,T,P,D,$,q;const r=()=>{ze(this,ta,Ja).call(this,{type:"continue"})};ve(this,Un,Lb({fn:()=>this.options.mutationFn?this.options.mutationFn(a):Promise.reject(new Error("No mutationFn found")),onFail:(H,he)=>{ze(this,ta,Ja).call(this,{type:"failed",failureCount:H,error:he})},onPause:()=>{ze(this,ta,Ja).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,Bt).canRun(this)}));const l=this.state.status==="pending",o=!I(this,Un).canStart();try{if(l)r();else{ze(this,ta,Ja).call(this,{type:"pending",variables:a,isPaused:o}),await((m=(d=I(this,Bt).config).onMutate)==null?void 0:m.call(d,a,this));const he=await((h=(x=this.options).onMutate)==null?void 0:h.call(x,a));he!==this.state.context&&ze(this,ta,Ja).call(this,{type:"pending",context:he,variables:a,isPaused:o})}const H=await I(this,Un).start();return await((g=(p=I(this,Bt).config).onSuccess)==null?void 0:g.call(p,H,a,this.state.context,this)),await((j=(y=this.options).onSuccess)==null?void 0:j.call(y,H,a,this.state.context)),await((b=(E=I(this,Bt).config).onSettled)==null?void 0:b.call(E,H,null,this.state.variables,this.state.context,this)),await((w=(k=this.options).onSettled)==null?void 0:w.call(k,H,null,a,this.state.context)),ze(this,ta,Ja).call(this,{type:"success",data:H}),H}catch(H){try{throw await((v=(C=I(this,Bt).config).onError)==null?void 0:v.call(C,H,a,this.state.context,this)),await((T=(N=this.options).onError)==null?void 0:T.call(N,H,a,this.state.context)),await((D=(P=I(this,Bt).config).onSettled)==null?void 0:D.call(P,void 0,H,this.state.variables,this.state.context,this)),await((q=($=this.options).onSettled)==null?void 0:q.call($,void 0,H,a,this.state.context)),H}finally{ze(this,ta,Ja).call(this,{type:"error",error:H})}}finally{I(this,Bt).runNext(this)}}},ea=new WeakMap,Bt=new WeakMap,Un=new WeakMap,ta=new WeakSet,Ja=function(a){const r=l=>{switch(a.type){case"failed":return{...l,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...l,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:a.error,failureCount:l.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ct.batch(()=>{I(this,ea).forEach(l=>{l.onMutationUpdate(a)}),I(this,Bt).notify({mutation:this,type:"updated",action:a})})},sb);function Db(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var va,zs,bi,ab,W2=(ab=class extends Zr{constructor(a={}){super();ke(this,va);ke(this,zs);ke(this,bi);this.config=a,ve(this,va,new Set),ve(this,zs,new Map),ve(this,bi,0)}build(a,r,l){const o=new Y2({mutationCache:this,mutationId:++Qo(this,bi)._,options:a.defaultMutationOptions(r),state:l});return this.add(o),o}add(a){I(this,va).add(a);const r=Vo(a);if(typeof r=="string"){const l=I(this,zs).get(r);l?l.push(a):I(this,zs).set(r,[a])}this.notify({type:"added",mutation:a})}remove(a){if(I(this,va).delete(a)){const r=Vo(a);if(typeof r=="string"){const l=I(this,zs).get(r);if(l)if(l.length>1){const o=l.indexOf(a);o!==-1&&l.splice(o,1)}else l[0]===a&&I(this,zs).delete(r)}}this.notify({type:"removed",mutation:a})}canRun(a){const r=Vo(a);if(typeof r=="string"){const l=I(this,zs).get(r),o=l==null?void 0:l.find(d=>d.state.status==="pending");return!o||o===a}else return!0}runNext(a){var l;const r=Vo(a);if(typeof r=="string"){const o=(l=I(this,zs).get(r))==null?void 0:l.find(d=>d!==a&&d.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ct.batch(()=>{I(this,va).forEach(a=>{this.notify({type:"removed",mutation:a})}),I(this,va).clear(),I(this,zs).clear()})}getAll(){return Array.from(I(this,va))}find(a){const r={exact:!0,...a};return this.getAll().find(l=>Xg(r,l))}findAll(a={}){return this.getAll().filter(r=>Xg(a,r))}notify(a){Ct.batch(()=>{this.listeners.forEach(r=>{r(a)})})}resumePausedMutations(){const a=this.getAll().filter(r=>r.state.isPaused);return Ct.batch(()=>Promise.all(a.map(r=>r.continue().catch(Qt))))}},va=new WeakMap,zs=new WeakMap,bi=new WeakMap,ab);function Vo(t){var a;return(a=t.options.scope)==null?void 0:a.id}function e0(t){return{onFetch:(a,r)=>{var g,y,j,E,b;const l=a.options,o=(j=(y=(g=a.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:j.direction,d=((E=a.state.data)==null?void 0:E.pages)||[],m=((b=a.state.data)==null?void 0:b.pageParams)||[];let x={pages:[],pageParams:[]},h=0;const p=async()=>{let k=!1;const w=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(a.signal.aborted?k=!0:a.signal.addEventListener("abort",()=>{k=!0}),a.signal)})},C=Rb(a.options,a.fetchOptions),v=async(N,T,P)=>{if(k)return Promise.reject();if(T==null&&N.pages.length)return Promise.resolve(N);const $=(()=>{const K={client:a.client,queryKey:a.queryKey,pageParam:T,direction:P?"backward":"forward",meta:a.options.meta};return w(K),K})(),q=await C($),{maxPages:H}=a.options,he=P?U2:z2;return{pages:he(N.pages,q,H),pageParams:he(N.pageParams,T,H)}};if(o&&d.length){const N=o==="backward",T=N?X2:t0,P={pages:d,pageParams:m},D=T(l,P);x=await v(P,D,N)}else{const N=t??d.length;do{const T=h===0?m[0]??l.initialPageParam:t0(l,x);if(h>0&&T==null)break;x=await v(x,T),h++}while(h<N)}return x};a.options.persister?a.fetchFn=()=>{var k,w;return(w=(k=a.options).persister)==null?void 0:w.call(k,p,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},r)}:a.fetchFn=p}}}function t0(t,{pages:a,pageParams:r}){const l=a.length-1;return a.length>0?t.getNextPageParam(a[l],a,r[l],r):void 0}function X2(t,{pages:a,pageParams:r}){var l;return a.length>0?(l=t.getPreviousPageParam)==null?void 0:l.call(t,a[0],a,r[0],r):void 0}var xt,sn,an,Ur,$r,nn,Ir,Br,nb,Z2=(nb=class{constructor(t={}){ke(this,xt);ke(this,sn);ke(this,an);ke(this,Ur);ke(this,$r);ke(this,nn);ke(this,Ir);ke(this,Br);ve(this,xt,t.queryCache||new V2),ve(this,sn,t.mutationCache||new W2),ve(this,an,t.defaultOptions||{}),ve(this,Ur,new Map),ve(this,$r,new Map),ve(this,nn,0)}mount(){Qo(this,nn)._++,I(this,nn)===1&&(ve(this,Ir,Cf.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,xt).onFocus())})),ve(this,Br,oc.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,xt).onOnline())})))}unmount(){var t,a;Qo(this,nn)._--,I(this,nn)===0&&((t=I(this,Ir))==null||t.call(this),ve(this,Ir,void 0),(a=I(this,Br))==null||a.call(this),ve(this,Br,void 0))}isFetching(t){return I(this,xt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return I(this,sn).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const a=this.defaultQueryOptions({queryKey:t});return(r=I(this,xt).get(a.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const a=this.defaultQueryOptions(t),r=I(this,xt).build(this,a),l=r.state.data;return l===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(un(a.staleTime,r))&&this.prefetchQuery(a),Promise.resolve(l))}getQueriesData(t){return I(this,xt).findAll(t).map(({queryKey:a,state:r})=>{const l=r.data;return[a,l]})}setQueryData(t,a,r){const l=this.defaultQueryOptions({queryKey:t}),o=I(this,xt).get(l.queryHash),d=o==null?void 0:o.state.data,m=D2(a,d);if(m!==void 0)return I(this,xt).build(this,l).setData(m,{...r,manual:!0})}setQueriesData(t,a,r){return Ct.batch(()=>I(this,xt).findAll(t).map(({queryKey:l})=>[l,this.setQueryData(l,a,r)]))}getQueryState(t){var r;const a=this.defaultQueryOptions({queryKey:t});return(r=I(this,xt).get(a.queryHash))==null?void 0:r.state}removeQueries(t){const a=I(this,xt);Ct.batch(()=>{a.findAll(t).forEach(r=>{a.remove(r)})})}resetQueries(t,a){const r=I(this,xt);return Ct.batch(()=>(r.findAll(t).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...t},a)))}cancelQueries(t,a={}){const r={revert:!0,...a},l=Ct.batch(()=>I(this,xt).findAll(t).map(o=>o.cancel(r)));return Promise.all(l).then(Qt).catch(Qt)}invalidateQueries(t,a={}){return Ct.batch(()=>(I(this,xt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},a)))}refetchQueries(t,a={}){const r={...a,cancelRefetch:a.cancelRefetch??!0},l=Ct.batch(()=>I(this,xt).findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,r);return r.throwOnError||(d=d.catch(Qt)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(l).then(Qt)}fetchQuery(t){const a=this.defaultQueryOptions(t);a.retry===void 0&&(a.retry=!1);const r=I(this,xt).build(this,a);return r.isStaleByTime(un(a.staleTime,r))?r.fetch(a):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Qt).catch(Qt)}fetchInfiniteQuery(t){return t.behavior=e0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Qt).catch(Qt)}ensureInfiniteQueryData(t){return t.behavior=e0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oc.isOnline()?I(this,sn).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,xt)}getMutationCache(){return I(this,sn)}getDefaultOptions(){return I(this,an)}setDefaultOptions(t){ve(this,an,t)}setQueryDefaults(t,a){I(this,Ur).set(Gn(t),{queryKey:t,defaultOptions:a})}getQueryDefaults(t){const a=[...I(this,Ur).values()],r={};return a.forEach(l=>{fi(t,l.queryKey)&&Object.assign(r,l.defaultOptions)}),r}setMutationDefaults(t,a){I(this,$r).set(Gn(t),{mutationKey:t,defaultOptions:a})}getMutationDefaults(t){const a=[...I(this,$r).values()],r={};return a.forEach(l=>{fi(t,l.mutationKey)&&Object.assign(r,l.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const a={...I(this,an).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return a.queryHash||(a.queryHash=Nf(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Sf&&(a.enabled=!1),a}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...I(this,an).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){I(this,xt).clear(),I(this,sn).clear()}},xt=new WeakMap,sn=new WeakMap,an=new WeakMap,Ur=new WeakMap,$r=new WeakMap,nn=new WeakMap,Ir=new WeakMap,Br=new WeakMap,nb),es,He,yi,Ht,$n,Hr,rn,ln,wi,Qr,Gr,In,Bn,on,Kr,Xe,oi,Km,Vm,Ym,Wm,Xm,Zm,Jm,qb,rb,J2=(rb=class extends Zr{constructor(a,r){super();ke(this,Xe);ke(this,es);ke(this,He);ke(this,yi);ke(this,Ht);ke(this,$n);ke(this,Hr);ke(this,rn);ke(this,ln);ke(this,wi);ke(this,Qr);ke(this,Gr);ke(this,In);ke(this,Bn);ke(this,on);ke(this,Kr,new Set);this.options=r,ve(this,es,a),ve(this,ln,null),ve(this,rn,Gm()),this.options.experimental_prefetchInRender||I(this,rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(I(this,He).addObserver(this),s0(I(this,He),this.options)?ze(this,Xe,oi).call(this):this.updateResult(),ze(this,Xe,Wm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ef(I(this,He),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ef(I(this,He),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ze(this,Xe,Xm).call(this),ze(this,Xe,Zm).call(this),I(this,He).removeObserver(this)}setOptions(a){const r=this.options,l=I(this,He);if(this.options=I(this,es).defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Us(this.options.enabled,I(this,He))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ze(this,Xe,Jm).call(this),I(this,He).setOptions(this.options),r._defaulted&&!ic(this.options,r)&&I(this,es).getQueryCache().notify({type:"observerOptionsUpdated",query:I(this,He),observer:this});const o=this.hasListeners();o&&a0(I(this,He),l,this.options,r)&&ze(this,Xe,oi).call(this),this.updateResult(),o&&(I(this,He)!==l||Us(this.options.enabled,I(this,He))!==Us(r.enabled,I(this,He))||un(this.options.staleTime,I(this,He))!==un(r.staleTime,I(this,He)))&&ze(this,Xe,Km).call(this);const d=ze(this,Xe,Vm).call(this);o&&(I(this,He)!==l||Us(this.options.enabled,I(this,He))!==Us(r.enabled,I(this,He))||d!==I(this,on))&&ze(this,Xe,Ym).call(this,d)}getOptimisticResult(a){const r=I(this,es).getQueryCache().build(I(this,es),a),l=this.createResult(r,a);return tS(this,l)&&(ve(this,Ht,l),ve(this,Hr,this.options),ve(this,$n,I(this,He).state)),l}getCurrentResult(){return I(this,Ht)}trackResult(a,r){return new Proxy(a,{get:(l,o)=>(this.trackProp(o),r==null||r(o),Reflect.get(l,o))})}trackProp(a){I(this,Kr).add(a)}getCurrentQuery(){return I(this,He)}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const r=I(this,es).defaultQueryOptions(a),l=I(this,es).getQueryCache().build(I(this,es),r);return l.fetch().then(()=>this.createResult(l,r))}fetch(a){return ze(this,Xe,oi).call(this,{...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),I(this,Ht)))}createResult(a,r){var H;const l=I(this,He),o=this.options,d=I(this,Ht),m=I(this,$n),x=I(this,Hr),p=a!==l?a.state:I(this,yi),{state:g}=a;let y={...g},j=!1,E;if(r._optimisticResults){const he=this.hasListeners(),K=!he&&s0(a,r),B=he&&a0(a,l,r,o);(K||B)&&(y={...y,...Fb(g.data,a.options)}),r._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:b,errorUpdatedAt:k,status:w}=y;E=y.data;let C=!1;if(r.placeholderData!==void 0&&E===void 0&&w==="pending"){let he;d!=null&&d.isPlaceholderData&&r.placeholderData===(x==null?void 0:x.placeholderData)?(he=d.data,C=!0):he=typeof r.placeholderData=="function"?r.placeholderData((H=I(this,Gr))==null?void 0:H.state.data,I(this,Gr)):r.placeholderData,he!==void 0&&(w="success",E=Qm(d==null?void 0:d.data,he,r),j=!0)}if(r.select&&E!==void 0&&!C)if(d&&E===(m==null?void 0:m.data)&&r.select===I(this,wi))E=I(this,Qr);else try{ve(this,wi,r.select),E=r.select(E),E=Qm(d==null?void 0:d.data,E,r),ve(this,Qr,E),ve(this,ln,null)}catch(he){ve(this,ln,he)}I(this,ln)&&(b=I(this,ln),E=I(this,Qr),k=Date.now(),w="error");const v=y.fetchStatus==="fetching",N=w==="pending",T=w==="error",P=N&&v,D=E!==void 0,q={status:w,fetchStatus:y.fetchStatus,isPending:N,isSuccess:w==="success",isError:T,isInitialLoading:P,isLoading:P,data:E,dataUpdatedAt:y.dataUpdatedAt,error:b,errorUpdatedAt:k,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:v,isRefetching:v&&!N,isLoadingError:T&&!D,isPaused:y.fetchStatus==="paused",isPlaceholderData:j,isRefetchError:T&&D,isStale:kf(a,r),refetch:this.refetch,promise:I(this,rn)};if(this.options.experimental_prefetchInRender){const he=te=>{q.status==="error"?te.reject(q.error):q.data!==void 0&&te.resolve(q.data)},K=()=>{const te=ve(this,rn,q.promise=Gm());he(te)},B=I(this,rn);switch(B.status){case"pending":a.queryHash===l.queryHash&&he(B);break;case"fulfilled":(q.status==="error"||q.data!==B.value)&&K();break;case"rejected":(q.status!=="error"||q.error!==B.reason)&&K();break}}return q}updateResult(){const a=I(this,Ht),r=this.createResult(I(this,He),this.options);if(ve(this,$n,I(this,He).state),ve(this,Hr,this.options),I(this,$n).data!==void 0&&ve(this,Gr,I(this,He)),ic(r,a))return;ve(this,Ht,r);const l=()=>{if(!a)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!I(this,Kr).size)return!0;const m=new Set(d??I(this,Kr));return this.options.throwOnError&&m.add("error"),Object.keys(I(this,Ht)).some(x=>{const h=x;return I(this,Ht)[h]!==a[h]&&m.has(h)})};ze(this,Xe,qb).call(this,{listeners:l()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ze(this,Xe,Wm).call(this)}},es=new WeakMap,He=new WeakMap,yi=new WeakMap,Ht=new WeakMap,$n=new WeakMap,Hr=new WeakMap,rn=new WeakMap,ln=new WeakMap,wi=new WeakMap,Qr=new WeakMap,Gr=new WeakMap,In=new WeakMap,Bn=new WeakMap,on=new WeakMap,Kr=new WeakMap,Xe=new WeakSet,oi=function(a){ze(this,Xe,Jm).call(this);let r=I(this,He).fetch(this.options,a);return a!=null&&a.throwOnError||(r=r.catch(Qt)),r},Km=function(){ze(this,Xe,Xm).call(this);const a=un(this.options.staleTime,I(this,He));if(Qn||I(this,Ht).isStale||!Bm(a))return;const l=Ab(I(this,Ht).dataUpdatedAt,a)+1;ve(this,In,setTimeout(()=>{I(this,Ht).isStale||this.updateResult()},l))},Vm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(I(this,He)):this.options.refetchInterval)??!1},Ym=function(a){ze(this,Xe,Zm).call(this),ve(this,on,a),!(Qn||Us(this.options.enabled,I(this,He))===!1||!Bm(I(this,on))||I(this,on)===0)&&ve(this,Bn,setInterval(()=>{(this.options.refetchIntervalInBackground||Cf.isFocused())&&ze(this,Xe,oi).call(this)},I(this,on)))},Wm=function(){ze(this,Xe,Km).call(this),ze(this,Xe,Ym).call(this,ze(this,Xe,Vm).call(this))},Xm=function(){I(this,In)&&(clearTimeout(I(this,In)),ve(this,In,void 0))},Zm=function(){I(this,Bn)&&(clearInterval(I(this,Bn)),ve(this,Bn,void 0))},Jm=function(){const a=I(this,es).getQueryCache().build(I(this,es),this.options);if(a===I(this,He))return;const r=I(this,He);ve(this,He,a),ve(this,yi,a.state),this.hasListeners()&&(r==null||r.removeObserver(this),a.addObserver(this))},qb=function(a){Ct.batch(()=>{a.listeners&&this.listeners.forEach(r=>{r(I(this,Ht))}),I(this,es).getQueryCache().notify({query:I(this,He),type:"observerResultsUpdated"})})},rb);function eS(t,a){return Us(a.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&a.retryOnMount===!1)}function s0(t,a){return eS(t,a)||t.state.data!==void 0&&ef(t,a,a.refetchOnMount)}function ef(t,a,r){if(Us(a.enabled,t)!==!1&&un(a.staleTime,t)!=="static"){const l=typeof r=="function"?r(t):r;return l==="always"||l!==!1&&kf(t,a)}return!1}function a0(t,a,r,l){return(t!==a||Us(l.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&kf(t,r)}function kf(t,a){return Us(a.enabled,t)!==!1&&t.isStaleByTime(un(a.staleTime,t))}function tS(t,a){return!ic(t.getCurrentResult(),a)}var cn,dn,ts,ja,Ca,tc,tf,lb,sS=(lb=class extends Zr{constructor(r,l){super();ke(this,Ca);ke(this,cn);ke(this,dn);ke(this,ts);ke(this,ja);ve(this,cn,r),this.setOptions(l),this.bindMethods(),ze(this,Ca,tc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var o;const l=this.options;this.options=I(this,cn).defaultMutationOptions(r),ic(this.options,l)||I(this,cn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:I(this,ts),observer:this}),l!=null&&l.mutationKey&&this.options.mutationKey&&Gn(l.mutationKey)!==Gn(this.options.mutationKey)?this.reset():((o=I(this,ts))==null?void 0:o.state.status)==="pending"&&I(this,ts).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=I(this,ts))==null||r.removeObserver(this)}onMutationUpdate(r){ze(this,Ca,tc).call(this),ze(this,Ca,tf).call(this,r)}getCurrentResult(){return I(this,dn)}reset(){var r;(r=I(this,ts))==null||r.removeObserver(this),ve(this,ts,void 0),ze(this,Ca,tc).call(this),ze(this,Ca,tf).call(this)}mutate(r,l){var o;return ve(this,ja,l),(o=I(this,ts))==null||o.removeObserver(this),ve(this,ts,I(this,cn).getMutationCache().build(I(this,cn),this.options)),I(this,ts).addObserver(this),I(this,ts).execute(r)}},cn=new WeakMap,dn=new WeakMap,ts=new WeakMap,ja=new WeakMap,Ca=new WeakSet,tc=function(){var l;const r=((l=I(this,ts))==null?void 0:l.state)??Db();ve(this,dn,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},tf=function(r){Ct.batch(()=>{var l,o,d,m,x,h,p,g;if(I(this,ja)&&this.hasListeners()){const y=I(this,dn).variables,j=I(this,dn).context;(r==null?void 0:r.type)==="success"?((o=(l=I(this,ja)).onSuccess)==null||o.call(l,r.data,y,j),(m=(d=I(this,ja)).onSettled)==null||m.call(d,r.data,null,y,j)):(r==null?void 0:r.type)==="error"&&((h=(x=I(this,ja)).onError)==null||h.call(x,r.error,y,j),(g=(p=I(this,ja)).onSettled)==null||g.call(p,void 0,r.error,y,j))}this.listeners.forEach(y=>{y(I(this,dn))})})},lb),zb=A.createContext(void 0),Ce=t=>{const a=A.useContext(zb);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},aS=({client:t,children:a})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(zb.Provider,{value:t,children:a})),Ub=A.createContext(!1),nS=()=>A.useContext(Ub);Ub.Provider;function rS(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var lS=A.createContext(rS()),iS=()=>A.useContext(lS),oS=(t,a)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(a.isReset()||(t.retryOnMount=!1))},cS=t=>{A.useEffect(()=>{t.clearReset()},[t])},dS=({result:t,errorResetBoundary:a,throwOnError:r,query:l,suspense:o})=>t.isError&&!a.isReset()&&!t.isFetching&&l&&(o&&t.data===void 0||Tb(r,[t.error,l])),uS=t=>{if(t.suspense){const a=l=>l==="static"?l:Math.max(l??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...l)=>a(r(...l)):a(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},mS=(t,a)=>t.isLoading&&t.isFetching&&!a,fS=(t,a)=>(t==null?void 0:t.suspense)&&a.isPending,n0=(t,a,r)=>a.fetchOptimistic(t).catch(()=>{r.clearReset()});function hS(t,a,r){var y,j,E,b,k;const l=nS(),o=iS(),d=Ce(),m=d.defaultQueryOptions(t);(j=(y=d.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||j.call(y,m),m._optimisticResults=l?"isRestoring":"optimistic",uS(m),oS(m,o),cS(o);const x=!d.getQueryCache().get(m.queryHash),[h]=A.useState(()=>new a(d,m)),p=h.getOptimisticResult(m),g=!l&&t.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(w=>{const C=g?h.subscribe(Ct.batchCalls(w)):Qt;return h.updateResult(),C},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),A.useEffect(()=>{h.setOptions(m)},[m,h]),fS(m,p))throw n0(m,h,o);if(dS({result:p,errorResetBoundary:o,throwOnError:m.throwOnError,query:d.getQueryCache().get(m.queryHash),suspense:m.suspense}))throw p.error;if((b=(E=d.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||b.call(E,m,p),m.experimental_prefetchInRender&&!Qn&&mS(p,l)){const w=x?n0(m,h,o):(k=d.getQueryCache().get(m.queryHash))==null?void 0:k.promise;w==null||w.catch(Qt).finally(()=>{h.updateResult()})}return m.notifyOnChangeProps?p:h.trackResult(p)}function qe(t,a){return hS(t,J2)}function ie(t,a){const r=Ce(),[l]=A.useState(()=>new sS(r,t));A.useEffect(()=>{l.setOptions(t)},[l,t]);const o=A.useSyncExternalStore(A.useCallback(m=>l.subscribe(Ct.batchCalls(m)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d=A.useCallback((m,x)=>{l.mutate(m,x).catch(Qt)},[l]);if(o.error&&Tb(l.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}const Ae=new Z2;function $b(t,a){return function(){return t.apply(a,arguments)}}const{toString:xS}=Object.prototype,{getPrototypeOf:Ef}=Object,{iterator:Oc,toStringTag:Ib}=Symbol,Rc=(t=>a=>{const r=xS.call(a);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Hs=t=>(t=t.toLowerCase(),a=>Rc(a)===t),Tc=t=>a=>typeof a===t,{isArray:Jr}=Array,hi=Tc("undefined");function pS(t){return t!==null&&!hi(t)&&t.constructor!==null&&!hi(t.constructor)&&ss(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bb=Hs("ArrayBuffer");function gS(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&Bb(t.buffer),a}const bS=Tc("string"),ss=Tc("function"),Hb=Tc("number"),Pc=t=>t!==null&&typeof t=="object",yS=t=>t===!0||t===!1,sc=t=>{if(Rc(t)!=="object")return!1;const a=Ef(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Ib in t)&&!(Oc in t)},wS=Hs("Date"),vS=Hs("File"),jS=Hs("Blob"),NS=Hs("FileList"),SS=t=>Pc(t)&&ss(t.pipe),CS=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||ss(t.append)&&((a=Rc(t))==="formdata"||a==="object"&&ss(t.toString)&&t.toString()==="[object FormData]"))},kS=Hs("URLSearchParams"),[ES,AS,OS,RS]=["ReadableStream","Request","Response","Headers"].map(Hs),TS=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ni(t,a,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let l,o;if(typeof t!="object"&&(t=[t]),Jr(t))for(l=0,o=t.length;l<o;l++)a.call(null,t[l],l,t);else{const d=r?Object.getOwnPropertyNames(t):Object.keys(t),m=d.length;let x;for(l=0;l<m;l++)x=d[l],a.call(null,t[x],x,t)}}function Qb(t,a){a=a.toLowerCase();const r=Object.keys(t);let l=r.length,o;for(;l-- >0;)if(o=r[l],a===o.toLowerCase())return o;return null}const _n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gb=t=>!hi(t)&&t!==_n;function sf(){const{caseless:t}=Gb(this)&&this||{},a={},r=(l,o)=>{const d=t&&Qb(a,o)||o;sc(a[d])&&sc(l)?a[d]=sf(a[d],l):sc(l)?a[d]=sf({},l):Jr(l)?a[d]=l.slice():a[d]=l};for(let l=0,o=arguments.length;l<o;l++)arguments[l]&&Ni(arguments[l],r);return a}const PS=(t,a,r,{allOwnKeys:l}={})=>(Ni(a,(o,d)=>{r&&ss(o)?t[d]=$b(o,r):t[d]=o},{allOwnKeys:l}),t),MS=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),LS=(t,a,r,l)=>{t.prototype=Object.create(a.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),r&&Object.assign(t.prototype,r)},_S=(t,a,r,l)=>{let o,d,m;const x={};if(a=a||{},t==null)return a;do{for(o=Object.getOwnPropertyNames(t),d=o.length;d-- >0;)m=o[d],(!l||l(m,t,a))&&!x[m]&&(a[m]=t[m],x[m]=!0);t=r!==!1&&Ef(t)}while(t&&(!r||r(t,a))&&t!==Object.prototype);return a},FS=(t,a,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=a.length;const l=t.indexOf(a,r);return l!==-1&&l===r},DS=t=>{if(!t)return null;if(Jr(t))return t;let a=t.length;if(!Hb(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=t[a];return r},qS=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Ef(Uint8Array)),zS=(t,a)=>{const l=(t&&t[Oc]).call(t);let o;for(;(o=l.next())&&!o.done;){const d=o.value;a.call(t,d[0],d[1])}},US=(t,a)=>{let r;const l=[];for(;(r=t.exec(a))!==null;)l.push(r);return l},$S=Hs("HTMLFormElement"),IS=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,l,o){return l.toUpperCase()+o}),r0=(({hasOwnProperty:t})=>(a,r)=>t.call(a,r))(Object.prototype),BS=Hs("RegExp"),Kb=(t,a)=>{const r=Object.getOwnPropertyDescriptors(t),l={};Ni(r,(o,d)=>{let m;(m=a(o,d,t))!==!1&&(l[d]=m||o)}),Object.defineProperties(t,l)},HS=t=>{Kb(t,(a,r)=>{if(ss(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const l=t[r];if(ss(l)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},QS=(t,a)=>{const r={},l=o=>{o.forEach(d=>{r[d]=!0})};return Jr(t)?l(t):l(String(t).split(a)),r},GS=()=>{},KS=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function VS(t){return!!(t&&ss(t.append)&&t[Ib]==="FormData"&&t[Oc])}const YS=t=>{const a=new Array(10),r=(l,o)=>{if(Pc(l)){if(a.indexOf(l)>=0)return;if(!("toJSON"in l)){a[o]=l;const d=Jr(l)?[]:{};return Ni(l,(m,x)=>{const h=r(m,o+1);!hi(h)&&(d[x]=h)}),a[o]=void 0,d}}return l};return r(t,0)},WS=Hs("AsyncFunction"),XS=t=>t&&(Pc(t)||ss(t))&&ss(t.then)&&ss(t.catch),Vb=((t,a)=>t?setImmediate:a?((r,l)=>(_n.addEventListener("message",({source:o,data:d})=>{o===_n&&d===r&&l.length&&l.shift()()},!1),o=>{l.push(o),_n.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ss(_n.postMessage)),ZS=typeof queueMicrotask<"u"?queueMicrotask.bind(_n):typeof process<"u"&&process.nextTick||Vb,JS=t=>t!=null&&ss(t[Oc]),ce={isArray:Jr,isArrayBuffer:Bb,isBuffer:pS,isFormData:CS,isArrayBufferView:gS,isString:bS,isNumber:Hb,isBoolean:yS,isObject:Pc,isPlainObject:sc,isReadableStream:ES,isRequest:AS,isResponse:OS,isHeaders:RS,isUndefined:hi,isDate:wS,isFile:vS,isBlob:jS,isRegExp:BS,isFunction:ss,isStream:SS,isURLSearchParams:kS,isTypedArray:qS,isFileList:NS,forEach:Ni,merge:sf,extend:PS,trim:TS,stripBOM:MS,inherits:LS,toFlatObject:_S,kindOf:Rc,kindOfTest:Hs,endsWith:FS,toArray:DS,forEachEntry:zS,matchAll:US,isHTMLForm:$S,hasOwnProperty:r0,hasOwnProp:r0,reduceDescriptors:Kb,freezeMethods:HS,toObjectSet:QS,toCamelCase:IS,noop:GS,toFiniteNumber:KS,findKey:Qb,global:_n,isContextDefined:Gb,isSpecCompliantForm:VS,toJSONObject:YS,isAsyncFn:WS,isThenable:XS,setImmediate:Vb,asap:ZS,isIterable:JS};function _e(t,a,r,l,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),l&&(this.request=l),o&&(this.response=o,this.status=o.status?o.status:null)}ce.inherits(_e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const Yb=_e.prototype,Wb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Wb[t]={value:t}});Object.defineProperties(_e,Wb);Object.defineProperty(Yb,"isAxiosError",{value:!0});_e.from=(t,a,r,l,o,d)=>{const m=Object.create(Yb);return ce.toFlatObject(t,m,function(h){return h!==Error.prototype},x=>x!=="isAxiosError"),_e.call(m,t.message,a,r,l,o),m.cause=t,m.name=t.name,d&&Object.assign(m,d),m};const eC=null;function af(t){return ce.isPlainObject(t)||ce.isArray(t)}function Xb(t){return ce.endsWith(t,"[]")?t.slice(0,-2):t}function l0(t,a,r){return t?t.concat(a).map(function(o,d){return o=Xb(o),!r&&d?"["+o+"]":o}).join(r?".":""):a}function tC(t){return ce.isArray(t)&&!t.some(af)}const sC=ce.toFlatObject(ce,{},null,function(a){return/^is[A-Z]/.test(a)});function Mc(t,a,r){if(!ce.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,r=ce.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,w){return!ce.isUndefined(w[k])});const l=r.metaTokens,o=r.visitor||g,d=r.dots,m=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(a);if(!ce.isFunction(o))throw new TypeError("visitor must be a function");function p(b){if(b===null)return"";if(ce.isDate(b))return b.toISOString();if(!h&&ce.isBlob(b))throw new _e("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(b)||ce.isTypedArray(b)?h&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function g(b,k,w){let C=b;if(b&&!w&&typeof b=="object"){if(ce.endsWith(k,"{}"))k=l?k:k.slice(0,-2),b=JSON.stringify(b);else if(ce.isArray(b)&&tC(b)||(ce.isFileList(b)||ce.endsWith(k,"[]"))&&(C=ce.toArray(b)))return k=Xb(k),C.forEach(function(N,T){!(ce.isUndefined(N)||N===null)&&a.append(m===!0?l0([k],T,d):m===null?k:k+"[]",p(N))}),!1}return af(b)?!0:(a.append(l0(w,k,d),p(b)),!1)}const y=[],j=Object.assign(sC,{defaultVisitor:g,convertValue:p,isVisitable:af});function E(b,k){if(!ce.isUndefined(b)){if(y.indexOf(b)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(b),ce.forEach(b,function(C,v){(!(ce.isUndefined(C)||C===null)&&o.call(a,C,ce.isString(v)?v.trim():v,k,j))===!0&&E(C,k?k.concat(v):[v])}),y.pop()}}if(!ce.isObject(t))throw new TypeError("data must be an object");return E(t),a}function i0(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return a[l]})}function Af(t,a){this._pairs=[],t&&Mc(t,this,a)}const Zb=Af.prototype;Zb.append=function(a,r){this._pairs.push([a,r])};Zb.toString=function(a){const r=a?function(l){return a.call(this,l,i0)}:i0;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function aC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jb(t,a,r){if(!a)return t;const l=r&&r.encode||aC;ce.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let d;if(o?d=o(a,r):d=ce.isURLSearchParams(a)?a.toString():new Af(a,r).toString(l),d){const m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class o0{constructor(){this.handlers=[]}use(a,r,l){return this.handlers.push({fulfilled:a,rejected:r,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ce.forEach(this.handlers,function(l){l!==null&&a(l)})}}const ey={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nC=typeof URLSearchParams<"u"?URLSearchParams:Af,rC=typeof FormData<"u"?FormData:null,lC=typeof Blob<"u"?Blob:null,iC={isBrowser:!0,classes:{URLSearchParams:nC,FormData:rC,Blob:lC},protocols:["http","https","file","blob","url","data"]},Of=typeof window<"u"&&typeof document<"u",nf=typeof navigator=="object"&&navigator||void 0,oC=Of&&(!nf||["ReactNative","NativeScript","NS"].indexOf(nf.product)<0),cC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dC=Of&&window.location.href||"http://localhost",uC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Of,hasStandardBrowserEnv:oC,hasStandardBrowserWebWorkerEnv:cC,navigator:nf,origin:dC},Symbol.toStringTag,{value:"Module"})),zt={...uC,...iC};function mC(t,a){return Mc(t,new zt.classes.URLSearchParams,Object.assign({visitor:function(r,l,o,d){return zt.isNode&&ce.isBuffer(r)?(this.append(l,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},a))}function fC(t){return ce.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function hC(t){const a={},r=Object.keys(t);let l;const o=r.length;let d;for(l=0;l<o;l++)d=r[l],a[d]=t[d];return a}function ty(t){function a(r,l,o,d){let m=r[d++];if(m==="__proto__")return!0;const x=Number.isFinite(+m),h=d>=r.length;return m=!m&&ce.isArray(o)?o.length:m,h?(ce.hasOwnProp(o,m)?o[m]=[o[m],l]:o[m]=l,!x):((!o[m]||!ce.isObject(o[m]))&&(o[m]=[]),a(r,l,o[m],d)&&ce.isArray(o[m])&&(o[m]=hC(o[m])),!x)}if(ce.isFormData(t)&&ce.isFunction(t.entries)){const r={};return ce.forEachEntry(t,(l,o)=>{a(fC(l),o,r,0)}),r}return null}function xC(t,a,r){if(ce.isString(t))try{return(a||JSON.parse)(t),ce.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(r||JSON.stringify)(t)}const Si={transitional:ey,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const l=r.getContentType()||"",o=l.indexOf("application/json")>-1,d=ce.isObject(a);if(d&&ce.isHTMLForm(a)&&(a=new FormData(a)),ce.isFormData(a))return o?JSON.stringify(ty(a)):a;if(ce.isArrayBuffer(a)||ce.isBuffer(a)||ce.isStream(a)||ce.isFile(a)||ce.isBlob(a)||ce.isReadableStream(a))return a;if(ce.isArrayBufferView(a))return a.buffer;if(ce.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let x;if(d){if(l.indexOf("application/x-www-form-urlencoded")>-1)return mC(a,this.formSerializer).toString();if((x=ce.isFileList(a))||l.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Mc(x?{"files[]":a}:a,h&&new h,this.formSerializer)}}return d||o?(r.setContentType("application/json",!1),xC(a)):a}],transformResponse:[function(a){const r=this.transitional||Si.transitional,l=r&&r.forcedJSONParsing,o=this.responseType==="json";if(ce.isResponse(a)||ce.isReadableStream(a))return a;if(a&&ce.isString(a)&&(l&&!this.responseType||o)){const m=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(a)}catch(x){if(m)throw x.name==="SyntaxError"?_e.from(x,_e.ERR_BAD_RESPONSE,this,null,this.response):x}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zt.classes.FormData,Blob:zt.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],t=>{Si.headers[t]={}});const pC=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gC=t=>{const a={};let r,l,o;return t&&t.split(`
`).forEach(function(m){o=m.indexOf(":"),r=m.substring(0,o).trim().toLowerCase(),l=m.substring(o+1).trim(),!(!r||a[r]&&pC[r])&&(r==="set-cookie"?a[r]?a[r].push(l):a[r]=[l]:a[r]=a[r]?a[r]+", "+l:l)}),a},c0=Symbol("internals");function ii(t){return t&&String(t).trim().toLowerCase()}function ac(t){return t===!1||t==null?t:ce.isArray(t)?t.map(ac):String(t)}function bC(t){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=r.exec(t);)a[l[1]]=l[2];return a}const yC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Nm(t,a,r,l,o){if(ce.isFunction(l))return l.call(this,a,r);if(o&&(a=r),!!ce.isString(a)){if(ce.isString(l))return a.indexOf(l)!==-1;if(ce.isRegExp(l))return l.test(a)}}function wC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,l)=>r.toUpperCase()+l)}function vC(t,a){const r=ce.toCamelCase(" "+a);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+r,{value:function(o,d,m){return this[l].call(this,a,o,d,m)},configurable:!0})})}let as=class{constructor(a){a&&this.set(a)}set(a,r,l){const o=this;function d(x,h,p){const g=ii(h);if(!g)throw new Error("header name must be a non-empty string");const y=ce.findKey(o,g);(!y||o[y]===void 0||p===!0||p===void 0&&o[y]!==!1)&&(o[y||h]=ac(x))}const m=(x,h)=>ce.forEach(x,(p,g)=>d(p,g,h));if(ce.isPlainObject(a)||a instanceof this.constructor)m(a,r);else if(ce.isString(a)&&(a=a.trim())&&!yC(a))m(gC(a),r);else if(ce.isObject(a)&&ce.isIterable(a)){let x={},h,p;for(const g of a){if(!ce.isArray(g))throw TypeError("Object iterator must return a key-value pair");x[p=g[0]]=(h=x[p])?ce.isArray(h)?[...h,g[1]]:[h,g[1]]:g[1]}m(x,r)}else a!=null&&d(r,a,l);return this}get(a,r){if(a=ii(a),a){const l=ce.findKey(this,a);if(l){const o=this[l];if(!r)return o;if(r===!0)return bC(o);if(ce.isFunction(r))return r.call(this,o,l);if(ce.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=ii(a),a){const l=ce.findKey(this,a);return!!(l&&this[l]!==void 0&&(!r||Nm(this,this[l],l,r)))}return!1}delete(a,r){const l=this;let o=!1;function d(m){if(m=ii(m),m){const x=ce.findKey(l,m);x&&(!r||Nm(l,l[x],x,r))&&(delete l[x],o=!0)}}return ce.isArray(a)?a.forEach(d):d(a),o}clear(a){const r=Object.keys(this);let l=r.length,o=!1;for(;l--;){const d=r[l];(!a||Nm(this,this[d],d,a,!0))&&(delete this[d],o=!0)}return o}normalize(a){const r=this,l={};return ce.forEach(this,(o,d)=>{const m=ce.findKey(l,d);if(m){r[m]=ac(o),delete r[d];return}const x=a?wC(d):String(d).trim();x!==d&&delete r[d],r[x]=ac(o),l[x]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return ce.forEach(this,(l,o)=>{l!=null&&l!==!1&&(r[o]=a&&ce.isArray(l)?l.join(", "):l)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const l=new this(a);return r.forEach(o=>l.set(o)),l}static accessor(a){const l=(this[c0]=this[c0]={accessors:{}}).accessors,o=this.prototype;function d(m){const x=ii(m);l[x]||(vC(o,m),l[x]=!0)}return ce.isArray(a)?a.forEach(d):d(a),this}};as.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(as.prototype,({value:t},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(l){this[r]=l}}});ce.freezeMethods(as);function Sm(t,a){const r=this||Si,l=a||r,o=as.from(l.headers);let d=l.data;return ce.forEach(t,function(x){d=x.call(r,d,o.normalize(),a?a.status:void 0)}),o.normalize(),d}function sy(t){return!!(t&&t.__CANCEL__)}function el(t,a,r){_e.call(this,t??"canceled",_e.ERR_CANCELED,a,r),this.name="CanceledError"}ce.inherits(el,_e,{__CANCEL__:!0});function ay(t,a,r){const l=r.config.validateStatus;!r.status||!l||l(r.status)?t(r):a(new _e("Request failed with status code "+r.status,[_e.ERR_BAD_REQUEST,_e.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function jC(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function NC(t,a){t=t||10;const r=new Array(t),l=new Array(t);let o=0,d=0,m;return a=a!==void 0?a:1e3,function(h){const p=Date.now(),g=l[d];m||(m=p),r[o]=h,l[o]=p;let y=d,j=0;for(;y!==o;)j+=r[y++],y=y%t;if(o=(o+1)%t,o===d&&(d=(d+1)%t),p-m<a)return;const E=g&&p-g;return E?Math.round(j*1e3/E):void 0}}function SC(t,a){let r=0,l=1e3/a,o,d;const m=(p,g=Date.now())=>{r=g,o=null,d&&(clearTimeout(d),d=null),t.apply(null,p)};return[(...p)=>{const g=Date.now(),y=g-r;y>=l?m(p,g):(o=p,d||(d=setTimeout(()=>{d=null,m(o)},l-y)))},()=>o&&m(o)]}const cc=(t,a,r=3)=>{let l=0;const o=NC(50,250);return SC(d=>{const m=d.loaded,x=d.lengthComputable?d.total:void 0,h=m-l,p=o(h),g=m<=x;l=m;const y={loaded:m,total:x,progress:x?m/x:void 0,bytes:h,rate:p||void 0,estimated:p&&x&&g?(x-m)/p:void 0,event:d,lengthComputable:x!=null,[a?"download":"upload"]:!0};t(y)},r)},d0=(t,a)=>{const r=t!=null;return[l=>a[0]({lengthComputable:r,total:t,loaded:l}),a[1]]},u0=t=>(...a)=>ce.asap(()=>t(...a)),CC=zt.hasStandardBrowserEnv?((t,a)=>r=>(r=new URL(r,zt.origin),t.protocol===r.protocol&&t.host===r.host&&(a||t.port===r.port)))(new URL(zt.origin),zt.navigator&&/(msie|trident)/i.test(zt.navigator.userAgent)):()=>!0,kC=zt.hasStandardBrowserEnv?{write(t,a,r,l,o,d){const m=[t+"="+encodeURIComponent(a)];ce.isNumber(r)&&m.push("expires="+new Date(r).toGMTString()),ce.isString(l)&&m.push("path="+l),ce.isString(o)&&m.push("domain="+o),d===!0&&m.push("secure"),document.cookie=m.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function EC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function AC(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function ny(t,a,r){let l=!EC(a);return t&&(l||r==!1)?AC(t,a):a}const m0=t=>t instanceof as?{...t}:t;function Kn(t,a){a=a||{};const r={};function l(p,g,y,j){return ce.isPlainObject(p)&&ce.isPlainObject(g)?ce.merge.call({caseless:j},p,g):ce.isPlainObject(g)?ce.merge({},g):ce.isArray(g)?g.slice():g}function o(p,g,y,j){if(ce.isUndefined(g)){if(!ce.isUndefined(p))return l(void 0,p,y,j)}else return l(p,g,y,j)}function d(p,g){if(!ce.isUndefined(g))return l(void 0,g)}function m(p,g){if(ce.isUndefined(g)){if(!ce.isUndefined(p))return l(void 0,p)}else return l(void 0,g)}function x(p,g,y){if(y in a)return l(p,g);if(y in t)return l(void 0,p)}const h={url:d,method:d,data:d,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:x,headers:(p,g,y)=>o(m0(p),m0(g),y,!0)};return ce.forEach(Object.keys(Object.assign({},t,a)),function(g){const y=h[g]||o,j=y(t[g],a[g],g);ce.isUndefined(j)&&y!==x||(r[g]=j)}),r}const ry=t=>{const a=Kn({},t);let{data:r,withXSRFToken:l,xsrfHeaderName:o,xsrfCookieName:d,headers:m,auth:x}=a;a.headers=m=as.from(m),a.url=Jb(ny(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),x&&m.set("Authorization","Basic "+btoa((x.username||"")+":"+(x.password?unescape(encodeURIComponent(x.password)):"")));let h;if(ce.isFormData(r)){if(zt.hasStandardBrowserEnv||zt.hasStandardBrowserWebWorkerEnv)m.setContentType(void 0);else if((h=m.getContentType())!==!1){const[p,...g]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];m.setContentType([p||"multipart/form-data",...g].join("; "))}}if(zt.hasStandardBrowserEnv&&(l&&ce.isFunction(l)&&(l=l(a)),l||l!==!1&&CC(a.url))){const p=o&&d&&kC.read(d);p&&m.set(o,p)}return a},OC=typeof XMLHttpRequest<"u",RC=OC&&function(t){return new Promise(function(r,l){const o=ry(t);let d=o.data;const m=as.from(o.headers).normalize();let{responseType:x,onUploadProgress:h,onDownloadProgress:p}=o,g,y,j,E,b;function k(){E&&E(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(g),o.signal&&o.signal.removeEventListener("abort",g)}let w=new XMLHttpRequest;w.open(o.method.toUpperCase(),o.url,!0),w.timeout=o.timeout;function C(){if(!w)return;const N=as.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!x||x==="text"||x==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:N,config:t,request:w};ay(function($){r($),k()},function($){l($),k()},P),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(l(new _e("Request aborted",_e.ECONNABORTED,t,w)),w=null)},w.onerror=function(){l(new _e("Network Error",_e.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let T=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const P=o.transitional||ey;o.timeoutErrorMessage&&(T=o.timeoutErrorMessage),l(new _e(T,P.clarifyTimeoutError?_e.ETIMEDOUT:_e.ECONNABORTED,t,w)),w=null},d===void 0&&m.setContentType(null),"setRequestHeader"in w&&ce.forEach(m.toJSON(),function(T,P){w.setRequestHeader(P,T)}),ce.isUndefined(o.withCredentials)||(w.withCredentials=!!o.withCredentials),x&&x!=="json"&&(w.responseType=o.responseType),p&&([j,b]=cc(p,!0),w.addEventListener("progress",j)),h&&w.upload&&([y,E]=cc(h),w.upload.addEventListener("progress",y),w.upload.addEventListener("loadend",E)),(o.cancelToken||o.signal)&&(g=N=>{w&&(l(!N||N.type?new el(null,t,w):N),w.abort(),w=null)},o.cancelToken&&o.cancelToken.subscribe(g),o.signal&&(o.signal.aborted?g():o.signal.addEventListener("abort",g)));const v=jC(o.url);if(v&&zt.protocols.indexOf(v)===-1){l(new _e("Unsupported protocol "+v+":",_e.ERR_BAD_REQUEST,t));return}w.send(d||null)})},TC=(t,a)=>{const{length:r}=t=t?t.filter(Boolean):[];if(a||r){let l=new AbortController,o;const d=function(p){if(!o){o=!0,x();const g=p instanceof Error?p:this.reason;l.abort(g instanceof _e?g:new el(g instanceof Error?g.message:g))}};let m=a&&setTimeout(()=>{m=null,d(new _e(`timeout ${a} of ms exceeded`,_e.ETIMEDOUT))},a);const x=()=>{t&&(m&&clearTimeout(m),m=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),t=null)};t.forEach(p=>p.addEventListener("abort",d));const{signal:h}=l;return h.unsubscribe=()=>ce.asap(x),h}},PC=function*(t,a){let r=t.byteLength;if(r<a){yield t;return}let l=0,o;for(;l<r;)o=l+a,yield t.slice(l,o),l=o},MC=async function*(t,a){for await(const r of LC(t))yield*PC(r,a)},LC=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:r,value:l}=await a.read();if(r)break;yield l}}finally{await a.cancel()}},f0=(t,a,r,l)=>{const o=MC(t,a);let d=0,m,x=h=>{m||(m=!0,l&&l(h))};return new ReadableStream({async pull(h){try{const{done:p,value:g}=await o.next();if(p){x(),h.close();return}let y=g.byteLength;if(r){let j=d+=y;r(j)}h.enqueue(new Uint8Array(g))}catch(p){throw x(p),p}},cancel(h){return x(h),o.return()}},{highWaterMark:2})},Lc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ly=Lc&&typeof ReadableStream=="function",_C=Lc&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),iy=(t,...a)=>{try{return!!t(...a)}catch{return!1}},FC=ly&&iy(()=>{let t=!1;const a=new Request(zt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),h0=64*1024,rf=ly&&iy(()=>ce.isReadableStream(new Response("").body)),dc={stream:rf&&(t=>t.body)};Lc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!dc[a]&&(dc[a]=ce.isFunction(t[a])?r=>r[a]():(r,l)=>{throw new _e(`Response type '${a}' is not supported`,_e.ERR_NOT_SUPPORT,l)})})})(new Response);const DC=async t=>{if(t==null)return 0;if(ce.isBlob(t))return t.size;if(ce.isSpecCompliantForm(t))return(await new Request(zt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(t)||ce.isArrayBuffer(t))return t.byteLength;if(ce.isURLSearchParams(t)&&(t=t+""),ce.isString(t))return(await _C(t)).byteLength},qC=async(t,a)=>{const r=ce.toFiniteNumber(t.getContentLength());return r??DC(a)},zC=Lc&&(async t=>{let{url:a,method:r,data:l,signal:o,cancelToken:d,timeout:m,onDownloadProgress:x,onUploadProgress:h,responseType:p,headers:g,withCredentials:y="same-origin",fetchOptions:j}=ry(t);p=p?(p+"").toLowerCase():"text";let E=TC([o,d&&d.toAbortSignal()],m),b;const k=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let w;try{if(h&&FC&&r!=="get"&&r!=="head"&&(w=await qC(g,l))!==0){let P=new Request(a,{method:"POST",body:l,duplex:"half"}),D;if(ce.isFormData(l)&&(D=P.headers.get("content-type"))&&g.setContentType(D),P.body){const[$,q]=d0(w,cc(u0(h)));l=f0(P.body,h0,$,q)}}ce.isString(y)||(y=y?"include":"omit");const C="credentials"in Request.prototype;b=new Request(a,{...j,signal:E,method:r.toUpperCase(),headers:g.normalize().toJSON(),body:l,duplex:"half",credentials:C?y:void 0});let v=await fetch(b);const N=rf&&(p==="stream"||p==="response");if(rf&&(x||N&&k)){const P={};["status","statusText","headers"].forEach(H=>{P[H]=v[H]});const D=ce.toFiniteNumber(v.headers.get("content-length")),[$,q]=x&&d0(D,cc(u0(x),!0))||[];v=new Response(f0(v.body,h0,$,()=>{q&&q(),k&&k()}),P)}p=p||"text";let T=await dc[ce.findKey(dc,p)||"text"](v,t);return!N&&k&&k(),await new Promise((P,D)=>{ay(P,D,{data:T,headers:as.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:b})})}catch(C){throw k&&k(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new _e("Network Error",_e.ERR_NETWORK,t,b),{cause:C.cause||C}):_e.from(C,C&&C.code,t,b)}}),lf={http:eC,xhr:RC,fetch:zC};ce.forEach(lf,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const x0=t=>`- ${t}`,UC=t=>ce.isFunction(t)||t===null||t===!1,oy={getAdapter:t=>{t=ce.isArray(t)?t:[t];const{length:a}=t;let r,l;const o={};for(let d=0;d<a;d++){r=t[d];let m;if(l=r,!UC(r)&&(l=lf[(m=String(r)).toLowerCase()],l===void 0))throw new _e(`Unknown adapter '${m}'`);if(l)break;o[m||"#"+d]=l}if(!l){const d=Object.entries(o).map(([x,h])=>`adapter ${x} `+(h===!1?"is not supported by the environment":"is not available in the build"));let m=a?d.length>1?`since :
`+d.map(x0).join(`
`):" "+x0(d[0]):"as no adapter specified";throw new _e("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return l},adapters:lf};function Cm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new el(null,t)}function p0(t){return Cm(t),t.headers=as.from(t.headers),t.data=Sm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),oy.getAdapter(t.adapter||Si.adapter)(t).then(function(l){return Cm(t),l.data=Sm.call(t,t.transformResponse,l),l.headers=as.from(l.headers),l},function(l){return sy(l)||(Cm(t),l&&l.response&&(l.response.data=Sm.call(t,t.transformResponse,l.response),l.response.headers=as.from(l.response.headers))),Promise.reject(l)})}const cy="1.9.0",_c={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{_c[t]=function(l){return typeof l===t||"a"+(a<1?"n ":" ")+t}});const g0={};_c.transitional=function(a,r,l){function o(d,m){return"[Axios v"+cy+"] Transitional option '"+d+"'"+m+(l?". "+l:"")}return(d,m,x)=>{if(a===!1)throw new _e(o(m," has been removed"+(r?" in "+r:"")),_e.ERR_DEPRECATED);return r&&!g0[m]&&(g0[m]=!0,console.warn(o(m," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(d,m,x):!0}};_c.spelling=function(a){return(r,l)=>(console.warn(`${l} is likely a misspelling of ${a}`),!0)};function $C(t,a,r){if(typeof t!="object")throw new _e("options must be an object",_e.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let o=l.length;for(;o-- >0;){const d=l[o],m=a[d];if(m){const x=t[d],h=x===void 0||m(x,d,t);if(h!==!0)throw new _e("option "+d+" must be "+h,_e.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _e("Unknown option "+d,_e.ERR_BAD_OPTION)}}const nc={assertOptions:$C,validators:_c},Xs=nc.validators;let Hn=class{constructor(a){this.defaults=a||{},this.interceptors={request:new o0,response:new o0}}async request(a,r){try{return await this._request(a,r)}catch(l){if(l instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const d=o.stack?o.stack.replace(/^.+\n/,""):"";try{l.stack?d&&!String(l.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+d):l.stack=d}catch{}}throw l}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=Kn(this.defaults,r);const{transitional:l,paramsSerializer:o,headers:d}=r;l!==void 0&&nc.assertOptions(l,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1),o!=null&&(ce.isFunction(o)?r.paramsSerializer={serialize:o}:nc.assertOptions(o,{encode:Xs.function,serialize:Xs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),nc.assertOptions(r,{baseUrl:Xs.spelling("baseURL"),withXsrfToken:Xs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let m=d&&ce.merge(d.common,d[r.method]);d&&ce.forEach(["delete","get","head","post","put","patch","common"],b=>{delete d[b]}),r.headers=as.concat(m,d);const x=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(r)===!1||(h=h&&k.synchronous,x.unshift(k.fulfilled,k.rejected))});const p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let g,y=0,j;if(!h){const b=[p0.bind(this),void 0];for(b.unshift.apply(b,x),b.push.apply(b,p),j=b.length,g=Promise.resolve(r);y<j;)g=g.then(b[y++],b[y++]);return g}j=x.length;let E=r;for(y=0;y<j;){const b=x[y++],k=x[y++];try{E=b(E)}catch(w){k.call(this,w);break}}try{g=p0.call(this,E)}catch(b){return Promise.reject(b)}for(y=0,j=p.length;y<j;)g=g.then(p[y++],p[y++]);return g}getUri(a){a=Kn(this.defaults,a);const r=ny(a.baseURL,a.url,a.allowAbsoluteUrls);return Jb(r,a.params,a.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(a){Hn.prototype[a]=function(r,l){return this.request(Kn(l||{},{method:a,url:r,data:(l||{}).data}))}});ce.forEach(["post","put","patch"],function(a){function r(l){return function(d,m,x){return this.request(Kn(x||{},{method:a,headers:l?{"Content-Type":"multipart/form-data"}:{},url:d,data:m}))}}Hn.prototype[a]=r(),Hn.prototype[a+"Form"]=r(!0)});let IC=class dy{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const l=this;this.promise.then(o=>{if(!l._listeners)return;let d=l._listeners.length;for(;d-- >0;)l._listeners[d](o);l._listeners=null}),this.promise.then=o=>{let d;const m=new Promise(x=>{l.subscribe(x),d=x}).then(o);return m.cancel=function(){l.unsubscribe(d)},m},a(function(d,m,x){l.reason||(l.reason=new el(d,m,x),r(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=l=>{a.abort(l)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new dy(function(o){a=o}),cancel:a}}};function BC(t){return function(r){return t.apply(null,r)}}function HC(t){return ce.isObject(t)&&t.isAxiosError===!0}const of={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(of).forEach(([t,a])=>{of[a]=t});function uy(t){const a=new Hn(t),r=$b(Hn.prototype.request,a);return ce.extend(r,Hn.prototype,a,{allOwnKeys:!0}),ce.extend(r,a,null,{allOwnKeys:!0}),r.create=function(o){return uy(Kn(t,o))},r}const Qe=uy(Si);Qe.Axios=Hn;Qe.CanceledError=el;Qe.CancelToken=IC;Qe.isCancel=sy;Qe.VERSION=cy;Qe.toFormData=Mc;Qe.AxiosError=_e;Qe.Cancel=Qe.CanceledError;Qe.all=function(a){return Promise.all(a)};Qe.spread=BC;Qe.isAxiosError=HC;Qe.mergeConfig=Kn;Qe.AxiosHeaders=as;Qe.formToJSON=t=>ty(ce.isHTMLForm(t)?new FormData(t):t);Qe.getAdapter=oy.getAdapter;Qe.HttpStatusCode=of;Qe.default=Qe;const{Axios:z3,AxiosError:U3,CanceledError:$3,isCancel:I3,CancelToken:B3,VERSION:H3,all:Q3,Cancel:G3,isAxiosError:K3,spread:V3,toFormData:Y3,AxiosHeaders:W3,HttpStatusCode:X3,formToJSON:Z3,getAdapter:J3,mergeConfig:eP}=Qe;function Mt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var QC=typeof Symbol=="function"&&Symbol.observable||"@@observable",b0=QC,km=()=>Math.random().toString(36).substring(7).split("").join("."),GC={INIT:`@@redux/INIT${km()}`,REPLACE:`@@redux/REPLACE${km()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${km()}`},uc=GC;function Rf(t){if(typeof t!="object"||t===null)return!1;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a||Object.getPrototypeOf(t)===null}function my(t,a,r){if(typeof t!="function")throw new Error(Mt(2));if(typeof a=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof a=="function"&&typeof r>"u"&&(r=a,a=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Mt(1));return r(my)(t,a)}let l=t,o=a,d=new Map,m=d,x=0,h=!1;function p(){m===d&&(m=new Map,d.forEach((w,C)=>{m.set(C,w)}))}function g(){if(h)throw new Error(Mt(3));return o}function y(w){if(typeof w!="function")throw new Error(Mt(4));if(h)throw new Error(Mt(5));let C=!0;p();const v=x++;return m.set(v,w),function(){if(C){if(h)throw new Error(Mt(6));C=!1,p(),m.delete(v),d=null}}}function j(w){if(!Rf(w))throw new Error(Mt(7));if(typeof w.type>"u")throw new Error(Mt(8));if(typeof w.type!="string")throw new Error(Mt(17));if(h)throw new Error(Mt(9));try{h=!0,o=l(o,w)}finally{h=!1}return(d=m).forEach(v=>{v()}),w}function E(w){if(typeof w!="function")throw new Error(Mt(10));l=w,j({type:uc.REPLACE})}function b(){const w=y;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Mt(11));function v(){const T=C;T.next&&T.next(g())}return v(),{unsubscribe:w(v)}},[b0](){return this}}}return j({type:uc.INIT}),{dispatch:j,subscribe:y,getState:g,replaceReducer:E,[b0]:b}}function KC(t){Object.keys(t).forEach(a=>{const r=t[a];if(typeof r(void 0,{type:uc.INIT})>"u")throw new Error(Mt(12));if(typeof r(void 0,{type:uc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function VC(t){const a=Object.keys(t),r={};for(let d=0;d<a.length;d++){const m=a[d];typeof t[m]=="function"&&(r[m]=t[m])}const l=Object.keys(r);let o;try{KC(r)}catch(d){o=d}return function(m={},x){if(o)throw o;let h=!1;const p={};for(let g=0;g<l.length;g++){const y=l[g],j=r[y],E=m[y],b=j(E,x);if(typeof b>"u")throw x&&x.type,new Error(Mt(14));p[y]=b,h=h||b!==E}return h=h||l.length!==Object.keys(m).length,h?p:m}}function mc(...t){return t.length===0?a=>a:t.length===1?t[0]:t.reduce((a,r)=>(...l)=>a(r(...l)))}function YC(...t){return a=>(r,l)=>{const o=a(r,l);let d=()=>{throw new Error(Mt(15))};const m={getState:o.getState,dispatch:(h,...p)=>d(h,...p)},x=t.map(h=>h(m));return d=mc(...x)(o.dispatch),{...o,dispatch:d}}}function WC(t){return Rf(t)&&"type"in t&&typeof t.type=="string"}var fy=Symbol.for("immer-nothing"),y0=Symbol.for("immer-draftable"),ps=Symbol.for("immer-state");function $s(t,...a){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Vr=Object.getPrototypeOf;function Vn(t){return!!t&&!!t[ps]}function Ea(t){var a;return t?hy(t)||Array.isArray(t)||!!t[y0]||!!((a=t.constructor)!=null&&a[y0])||Dc(t)||qc(t):!1}var XC=Object.prototype.constructor.toString();function hy(t){if(!t||typeof t!="object")return!1;const a=Vr(t);if(a===null)return!0;const r=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===XC}function fc(t,a){Fc(t)===0?Reflect.ownKeys(t).forEach(r=>{a(r,t[r],t)}):t.forEach((r,l)=>a(l,r,t))}function Fc(t){const a=t[ps];return a?a.type_:Array.isArray(t)?1:Dc(t)?2:qc(t)?3:0}function cf(t,a){return Fc(t)===2?t.has(a):Object.prototype.hasOwnProperty.call(t,a)}function xy(t,a,r){const l=Fc(t);l===2?t.set(a,r):l===3?t.add(r):t[a]=r}function ZC(t,a){return t===a?t!==0||1/t===1/a:t!==t&&a!==a}function Dc(t){return t instanceof Map}function qc(t){return t instanceof Set}function Ln(t){return t.copy_||t.base_}function df(t,a){if(Dc(t))return new Map(t);if(qc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=hy(t);if(a===!0||a==="class_only"&&!r){const l=Object.getOwnPropertyDescriptors(t);delete l[ps];let o=Reflect.ownKeys(l);for(let d=0;d<o.length;d++){const m=o[d],x=l[m];x.writable===!1&&(x.writable=!0,x.configurable=!0),(x.get||x.set)&&(l[m]={configurable:!0,writable:!0,enumerable:x.enumerable,value:t[m]})}return Object.create(Vr(t),l)}else{const l=Vr(t);if(l!==null&&r)return{...t};const o=Object.create(l);return Object.assign(o,t)}}function Tf(t,a=!1){return zc(t)||Vn(t)||!Ea(t)||(Fc(t)>1&&(t.set=t.add=t.clear=t.delete=JC),Object.freeze(t),a&&Object.entries(t).forEach(([r,l])=>Tf(l,!0))),t}function JC(){$s(2)}function zc(t){return Object.isFrozen(t)}var e1={};function Yn(t){const a=e1[t];return a||$s(0,t),a}var xi;function py(){return xi}function t1(t,a){return{drafts_:[],parent_:t,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function w0(t,a){a&&(Yn("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=a)}function uf(t){mf(t),t.drafts_.forEach(s1),t.drafts_=null}function mf(t){t===xi&&(xi=t.parent_)}function v0(t){return xi=t1(xi,t)}function s1(t){const a=t[ps];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function j0(t,a){a.unfinalizedDrafts_=a.drafts_.length;const r=a.drafts_[0];return t!==void 0&&t!==r?(r[ps].modified_&&(uf(a),$s(4)),Ea(t)&&(t=hc(a,t),a.parent_||xc(a,t)),a.patches_&&Yn("Patches").generateReplacementPatches_(r[ps].base_,t,a.patches_,a.inversePatches_)):t=hc(a,r,[]),uf(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),t!==fy?t:void 0}function hc(t,a,r){if(zc(a))return a;const l=a[ps];if(!l)return fc(a,(o,d)=>N0(t,l,a,o,d,r)),a;if(l.scope_!==t)return a;if(!l.modified_)return xc(t,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let d=o,m=!1;l.type_===3&&(d=new Set(o),o.clear(),m=!0),fc(d,(x,h)=>N0(t,l,o,x,h,r,m)),xc(t,o,!1),r&&t.patches_&&Yn("Patches").generatePatches_(l,r,t.patches_,t.inversePatches_)}return l.copy_}function N0(t,a,r,l,o,d,m){if(Vn(o)){const x=d&&a&&a.type_!==3&&!cf(a.assigned_,l)?d.concat(l):void 0,h=hc(t,o,x);if(xy(r,l,h),Vn(h))t.canAutoFreeze_=!1;else return}else m&&r.add(o);if(Ea(o)&&!zc(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;hc(t,o),(!a||!a.scope_.parent_)&&typeof l!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,l)&&xc(t,o)}}function xc(t,a,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Tf(a,r)}function a1(t,a){const r=Array.isArray(t),l={type_:r?1:0,scope_:a?a.scope_:py(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=l,d=Pf;r&&(o=[l],d=pi);const{revoke:m,proxy:x}=Proxy.revocable(o,d);return l.draft_=x,l.revoke_=m,x}var Pf={get(t,a){if(a===ps)return t;const r=Ln(t);if(!cf(r,a))return n1(t,r,a);const l=r[a];return t.finalized_||!Ea(l)?l:l===Em(t.base_,a)?(Am(t),t.copy_[a]=hf(l,t)):l},has(t,a){return a in Ln(t)},ownKeys(t){return Reflect.ownKeys(Ln(t))},set(t,a,r){const l=gy(Ln(t),a);if(l!=null&&l.set)return l.set.call(t.draft_,r),!0;if(!t.modified_){const o=Em(Ln(t),a),d=o==null?void 0:o[ps];if(d&&d.base_===r)return t.copy_[a]=r,t.assigned_[a]=!1,!0;if(ZC(r,o)&&(r!==void 0||cf(t.base_,a)))return!0;Am(t),ff(t)}return t.copy_[a]===r&&(r!==void 0||a in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[a])||(t.copy_[a]=r,t.assigned_[a]=!0),!0},deleteProperty(t,a){return Em(t.base_,a)!==void 0||a in t.base_?(t.assigned_[a]=!1,Am(t),ff(t)):delete t.assigned_[a],t.copy_&&delete t.copy_[a],!0},getOwnPropertyDescriptor(t,a){const r=Ln(t),l=Reflect.getOwnPropertyDescriptor(r,a);return l&&{writable:!0,configurable:t.type_!==1||a!=="length",enumerable:l.enumerable,value:r[a]}},defineProperty(){$s(11)},getPrototypeOf(t){return Vr(t.base_)},setPrototypeOf(){$s(12)}},pi={};fc(Pf,(t,a)=>{pi[t]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});pi.deleteProperty=function(t,a){return pi.set.call(this,t,a,void 0)};pi.set=function(t,a,r){return Pf.set.call(this,t[0],a,r,t[0])};function Em(t,a){const r=t[ps];return(r?Ln(r):t)[a]}function n1(t,a,r){var o;const l=gy(a,r);return l?"value"in l?l.value:(o=l.get)==null?void 0:o.call(t.draft_):void 0}function gy(t,a){if(!(a in t))return;let r=Vr(t);for(;r;){const l=Object.getOwnPropertyDescriptor(r,a);if(l)return l;r=Vr(r)}}function ff(t){t.modified_||(t.modified_=!0,t.parent_&&ff(t.parent_))}function Am(t){t.copy_||(t.copy_=df(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var r1=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,r,l)=>{if(typeof a=="function"&&typeof r!="function"){const d=r;r=a;const m=this;return function(h=d,...p){return m.produce(h,g=>r.call(this,g,...p))}}typeof r!="function"&&$s(6),l!==void 0&&typeof l!="function"&&$s(7);let o;if(Ea(a)){const d=v0(this),m=hf(a,void 0);let x=!0;try{o=r(m),x=!1}finally{x?uf(d):mf(d)}return w0(d,l),j0(o,d)}else if(!a||typeof a!="object"){if(o=r(a),o===void 0&&(o=a),o===fy&&(o=void 0),this.autoFreeze_&&Tf(o,!0),l){const d=[],m=[];Yn("Patches").generateReplacementPatches_(a,o,d,m),l(d,m)}return o}else $s(1,a)},this.produceWithPatches=(a,r)=>{if(typeof a=="function")return(m,...x)=>this.produceWithPatches(m,h=>a(h,...x));let l,o;return[this.produce(a,r,(m,x)=>{l=m,o=x}),l,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ea(t)||$s(8),Vn(t)&&(t=l1(t));const a=v0(this),r=hf(t,void 0);return r[ps].isManual_=!0,mf(a),r}finishDraft(t,a){const r=t&&t[ps];(!r||!r.isManual_)&&$s(9);const{scope_:l}=r;return w0(l,a),j0(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,a){let r;for(r=a.length-1;r>=0;r--){const o=a[r];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}r>-1&&(a=a.slice(r+1));const l=Yn("Patches").applyPatches_;return Vn(t)?l(t,a):this.produce(t,o=>l(o,a))}};function hf(t,a){const r=Dc(t)?Yn("MapSet").proxyMap_(t,a):qc(t)?Yn("MapSet").proxySet_(t,a):a1(t,a);return(a?a.scope_:py()).drafts_.push(r),r}function l1(t){return Vn(t)||$s(10,t),by(t)}function by(t){if(!Ea(t)||zc(t))return t;const a=t[ps];let r;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,r=df(t,a.scope_.immer_.useStrictShallowCopy_)}else r=df(t,!0);return fc(r,(l,o)=>{xy(r,l,by(o))}),a&&(a.finalized_=!1),r}var gs=new r1,yy=gs.produce;gs.produceWithPatches.bind(gs);gs.setAutoFreeze.bind(gs);gs.setUseStrictShallowCopy.bind(gs);gs.applyPatches.bind(gs);gs.createDraft.bind(gs);gs.finishDraft.bind(gs);function wy(t){return({dispatch:r,getState:l})=>o=>d=>typeof d=="function"?d(r,l,t):o(d)}var i1=wy(),o1=wy,c1=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mc:mc.apply(null,arguments)};function S0(t,a){function r(...l){if(a){let o=a(...l);if(!o)throw new Error(Sa(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:l[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=l=>WC(l)&&l.type===t,r}var vy=class ci extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,ci.prototype)}static get[Symbol.species](){return ci}concat(...a){return super.concat.apply(this,a)}prepend(...a){return a.length===1&&Array.isArray(a[0])?new ci(...a[0].concat(this)):new ci(...a.concat(this))}};function C0(t){return Ea(t)?yy(t,()=>{}):t}function Yo(t,a,r){return t.has(a)?t.get(a):t.set(a,r(a)).get(a)}function d1(t){return typeof t=="boolean"}var u1=()=>function(a){const{thunk:r=!0,immutableCheck:l=!0,serializableCheck:o=!0,actionCreatorCheck:d=!0}=a??{};let m=new vy;return r&&(d1(r)?m.push(i1):m.push(o1(r.extraArgument))),m},m1="RTK_autoBatch",k0=t=>a=>{setTimeout(a,t)},f1=(t={type:"raf"})=>a=>(...r)=>{const l=a(...r);let o=!0,d=!1,m=!1;const x=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:k0(10):t.type==="callback"?t.queueNotification:k0(t.timeout),p=()=>{m=!1,d&&(d=!1,x.forEach(g=>g()))};return Object.assign({},l,{subscribe(g){const y=()=>o&&g(),j=l.subscribe(y);return x.add(g),()=>{j(),x.delete(g)}},dispatch(g){var y;try{return o=!((y=g==null?void 0:g.meta)!=null&&y[m1]),d=!o,d&&(m||(m=!0,h(p))),l.dispatch(g)}finally{o=!0}}})},h1=t=>function(r){const{autoBatch:l=!0}=r??{};let o=new vy(t);return l&&o.push(f1(typeof l=="object"?l:void 0)),o};function x1(t){const a=u1(),{reducer:r=void 0,middleware:l,devTools:o=!0,preloadedState:d=void 0,enhancers:m=void 0}=t||{};let x;if(typeof r=="function")x=r;else if(Rf(r))x=VC(r);else throw new Error(Sa(1));let h;typeof l=="function"?h=l(a):h=a();let p=mc;o&&(p=c1({trace:!1,...typeof o=="object"&&o}));const g=YC(...h),y=h1(g);let j=typeof m=="function"?m(y):y();const E=p(...j);return my(x,d,E)}function jy(t){const a={},r=[];let l;const o={addCase(d,m){const x=typeof d=="string"?d:d.type;if(!x)throw new Error(Sa(28));if(x in a)throw new Error(Sa(29));return a[x]=m,o},addMatcher(d,m){return r.push({matcher:d,reducer:m}),o},addDefaultCase(d){return l=d,o}};return t(o),[a,r,l]}function p1(t){return typeof t=="function"}function g1(t,a){let[r,l,o]=jy(a),d;if(p1(t))d=()=>C0(t());else{const x=C0(t);d=()=>x}function m(x=d(),h){let p=[r[h.type],...l.filter(({matcher:g})=>g(h)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[o]),p.reduce((g,y)=>{if(y)if(Vn(g)){const E=y(g,h);return E===void 0?g:E}else{if(Ea(g))return yy(g,j=>y(j,h));{const j=y(g,h);if(j===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return j}}return g},x)}return m.getInitialState=d,m}var b1=Symbol.for("rtk-slice-createasyncthunk");function y1(t,a){return`${t}/${a}`}function w1({creators:t}={}){var r;const a=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[b1];return function(o){const{name:d,reducerPath:m=d}=o;if(!d)throw new Error(Sa(11));const x=(typeof o.reducers=="function"?o.reducers(j1()):o.reducers)||{},h=Object.keys(x),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(T,P){const D=typeof T=="string"?T:T.type;if(!D)throw new Error(Sa(12));if(D in p.sliceCaseReducersByType)throw new Error(Sa(13));return p.sliceCaseReducersByType[D]=P,g},addMatcher(T,P){return p.sliceMatchers.push({matcher:T,reducer:P}),g},exposeAction(T,P){return p.actionCreators[T]=P,g},exposeCaseReducer(T,P){return p.sliceCaseReducersByName[T]=P,g}};h.forEach(T=>{const P=x[T],D={reducerName:T,type:y1(d,T),createNotation:typeof o.reducers=="function"};S1(P)?k1(D,P,g,a):N1(D,P,g)});function y(){const[T={},P=[],D=void 0]=typeof o.extraReducers=="function"?jy(o.extraReducers):[o.extraReducers],$={...T,...p.sliceCaseReducersByType};return g1(o.initialState,q=>{for(let H in $)q.addCase(H,$[H]);for(let H of p.sliceMatchers)q.addMatcher(H.matcher,H.reducer);for(let H of P)q.addMatcher(H.matcher,H.reducer);D&&q.addDefaultCase(D)})}const j=T=>T,E=new Map,b=new WeakMap;let k;function w(T,P){return k||(k=y()),k(T,P)}function C(){return k||(k=y()),k.getInitialState()}function v(T,P=!1){function D(q){let H=q[T];return typeof H>"u"&&P&&(H=Yo(b,D,C)),H}function $(q=j){const H=Yo(E,P,()=>new WeakMap);return Yo(H,q,()=>{const he={};for(const[K,B]of Object.entries(o.selectors??{}))he[K]=v1(B,q,()=>Yo(b,q,C),P);return he})}return{reducerPath:T,getSelectors:$,get selectors(){return $(D)},selectSlice:D}}const N={name:d,reducer:w,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:C,...v(m),injectInto(T,{reducerPath:P,...D}={}){const $=P??m;return T.inject({reducerPath:$,reducer:w},D),{...N,...v($,!0)}}};return N}}function v1(t,a,r,l){function o(d,...m){let x=a(d);return typeof x>"u"&&l&&(x=r()),t(x,...m)}return o.unwrapped=t,o}var tl=w1();function j1(){function t(a,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...r}}return t.withTypes=()=>t,{reducer(a){return Object.assign({[a.name](...r){return a(...r)}}[a.name],{_reducerDefinitionType:"reducer"})},preparedReducer(a,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:r}},asyncThunk:t}}function N1({type:t,reducerName:a,createNotation:r},l,o){let d,m;if("reducer"in l){if(r&&!C1(l))throw new Error(Sa(17));d=l.reducer,m=l.prepare}else d=l;o.addCase(t,d).exposeCaseReducer(a,d).exposeAction(a,m?S0(t,m):S0(t))}function S1(t){return t._reducerDefinitionType==="asyncThunk"}function C1(t){return t._reducerDefinitionType==="reducerWithPrepare"}function k1({type:t,reducerName:a},r,l,o){if(!o)throw new Error(Sa(18));const{payloadCreator:d,fulfilled:m,pending:x,rejected:h,settled:p,options:g}=r,y=o(t,d,g);l.exposeAction(a,y),m&&l.addCase(y.fulfilled,m),x&&l.addCase(y.pending,x),h&&l.addCase(y.rejected,h),p&&l.addMatcher(y.settled,p),l.exposeCaseReducer(a,{fulfilled:m||Wo,pending:x||Wo,rejected:h||Wo,settled:p||Wo})}function Wo(){}function Sa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const E0={userId:"",userName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ny=tl({name:"ownerprofile",initialState:E0,reducers:{setOwnerProfileData:(t,a)=>{const{userId:r,userName:l,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,userId:r,userName:l,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetOwnerProfile:()=>E0}}),{setOwnerProfileData:pc,setAuth:Om,resetOwnerProfile:gc}=Ny.actions,E1=Ny.reducer,A0={staffId:"",staffName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Sy=tl({name:"staffprofile",initialState:A0,reducers:{setStaffProfileData:(t,a)=>{const{staffId:r,staffName:l,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,staffId:r,staffName:l,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetStaffProfile:()=>A0}}),{setStaffProfileData:Uc,setAuth:Rm,resetStaffProfile:bc}=Sy.actions,A1=Sy.reducer,O0={workerId:"",workerName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Cy=tl({name:"workerprofile",initialState:O0,reducers:{setWorkerProfileData:(t,a)=>{const{workerId:r,workerName:l,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,workerId:r,workerName:l,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetWorkerProfile:()=>O0}}),{setWorkerProfileData:$c,setAuth:Tm,resetWorkerProfile:yc}=Cy.actions,O1=Cy.reducer,R1={role:null,isauthenticated:!1,_id:null},ky=tl({name:"auth",initialState:R1,reducers:{setRole:(t,a)=>a.payload,logout:t=>{t.role=null,t.isauthenticated=!1,t._id=null}}}),{setRole:Lt,logout:wc}=ky.actions,T1=ky.reducer,R0={CTOId:"",CTOName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ey=tl({name:"CTOprofile",initialState:R0,reducers:{setCTOProfileData:(t,a)=>{const{CTOId:r,CTOName:l,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,CTOId:r,CTOName:l,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetCTOProfile:()=>R0}}),{setCTOProfileData:Ic,setAuth:Pm,resetCTOProfile:vc}=Ey.actions,P1=Ey.reducer,T0={clientId:"",clientName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ay=tl({name:"clientprofile",initialState:T0,reducers:{setClientProfileData:(t,a)=>{const{clientId:r,clientName:l,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,clientId:r,clientName:l,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetClientProfile:()=>T0}}),{setClientProfileData:Bc,setAuth:Mm,resetClientProfile:jc}=Ay.actions,M1=Ay.reducer,Ut=x1({reducer:{userProfileStore:E1,workerProfileStore:O1,staffProfileStore:A1,CTOProfileStore:P1,clientProfileStore:M1,authStore:T1}}),L1=async()=>{try{let{data:t}=await sa.get("/auth/staff/refreshtoken");return Ut.dispatch(Rm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Rm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Rm({isAuthenticated:!1})),{ok:!1}}},sa=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});sa.interceptors.request.use(t=>t,t=>Promise.reject(t));sa.interceptors.response.use(t=>t,async t=>{var r,l;const a=t.config;if(a.url.includes("/auth/staff/isauthenticated"))return Promise.reject(t);if(((r=t.response)==null?void 0:r.status)===401||((l=t.response)==null?void 0:l.status)===403){a._retry=!0;try{console.log("gettingcalled infingite time from staff api servive");const{ok:o}=await L1();if(o)return console.log("ok entering into it",o),sa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const _1=async()=>{try{let{data:t}=await sa.get("/auth/CTO/refreshtoken");return Ut.dispatch(Pm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Pm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Pm({isAuthenticated:!1})),{ok:!1}}};let fn=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});fn.interceptors.request.use(t=>t,t=>Promise.reject(t));fn.interceptors.response.use(t=>t,async t=>{var r,l;const a=t.config;if(a.url.includes("/auth/CTO/isauthenticated"))return Promise.reject(t);if((((r=t.response)==null?void 0:r.status)===401||((l=t.response)==null?void 0:l.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO CTOApi servive");try{const{ok:o}=await _1();if(o)return fn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const F1=async({email:t,password:a})=>{const{data:r}=await fn.post("/auth/CTO/login",{email:t,password:a});if(!r.ok)throw new Error(r.message);return r},D1=()=>ie({mutationFn:F1,onSuccess:()=>{Ae.invalidateQueries({queryKey:["CTOProfile"]})}}),q1=async t=>{const{data:a}=await fn.post("/auth/CTO/registerCTO",t);if(!a.ok)throw new Error(a.message);return a},z1=()=>ie({mutationFn:q1}),U1=async()=>{const{data:t}=await fn.post("/auth/CTO/logout");if(!t.ok)throw new Error(t.message);return t},Oy=()=>ie({mutationFn:U1,onSuccess:()=>{Ae.clear()}}),$1=async()=>{try{let{data:t}=await Aa.get("/auth/client/refreshtoken");return Ut.dispatch(Mm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Mm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Mm({isAuthenticated:!1})),{ok:!1}}};let Aa=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});Aa.interceptors.request.use(t=>t,t=>Promise.reject(t));Aa.interceptors.response.use(t=>t,async t=>{var r,l;const a=t.config;if(a.url.includes("/auth/client/isauthenticated"))return Promise.reject(t);if((((r=t.response)==null?void 0:r.status)===401||((l=t.response)==null?void 0:l.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO clientApi servive");try{const{ok:o}=await $1();if(o)return Aa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const I1=async({email:t,password:a})=>{const{data:r}=await Aa.post("/auth/client/login",{email:t,password:a});if(!r.ok)throw new Error(r.message);return r},B1=()=>ie({mutationFn:I1,onSuccess:()=>{Ae.invalidateQueries({queryKey:["clientprofile"]})}}),H1=async({token:t,payload:a})=>{const{data:r}=await Aa.post(`/auth/client/registerclient?invite=${t}`,a);if(!r.ok)throw new Error(r.message);return r},Q1=()=>ie({mutationFn:H1}),G1=async()=>{const{data:t}=await Aa.post("/auth/client/logout");if(!t.ok)throw new Error(t.message);return t},Ry=()=>ie({mutationFn:G1,onSuccess:()=>{Ae.clear()}}),K1=async({email:t,password:a})=>{const{data:r}=await sa.post("/auth/staff/login",{email:t,password:a});if(!r.ok)throw new Error(r.message);return r},V1=()=>ie({mutationFn:K1,onSuccess:()=>{Ae.invalidateQueries({queryKey:["staffProfile"]})}}),Y1=async t=>{const{data:a}=await sa.post("/auth/staff/registerstaff",t);if(!a.ok)throw new Error(a.message);return a},W1=()=>ie({mutationFn:Y1}),X1=async()=>{const{data:t}=await sa.post("/auth/staff/logout");if(!t.ok)throw new Error(t.message);return t},Ty=()=>ie({mutationFn:X1,onSuccess:()=>{Ae.clear()}}),Z1=async()=>{try{let{data:t}=await Is.get("/auth/refreshtoken");return Ut.dispatch(Om({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Om({isAuthenticated:t.response.data.ok})):Ut.dispatch(Om({isAuthenticated:!1})),{ok:!1}}};let Is=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});Is.interceptors.request.use(t=>t,t=>Promise.reject(t));Is.interceptors.response.use(t=>t,async t=>{var r,l;const a=t.config;if((((r=t.response)==null?void 0:r.status)===401||((l=t.response)==null?void 0:l.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await Z1();if(o)return Is(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const J1=async({email:t,password:a,userName:r,phoneNo:l})=>{try{const o={email:t,password:a,username:r,phoneNo:l,role:"owner"};let{data:d}=await Is.post("/auth/registeruser",o);if(d.ok)return d}catch(o){throw o}},ek=async({email:t,password:a})=>{try{let{data:r}=await Is.post("/auth/login",{email:t,password:a});if(console.log("data from login user",r),r.ok)return r}catch(r){throw r}},tk=async()=>{try{let{data:t}=await Is.post("/auth/logout");if(t.ok)return t.data}catch(t){throw t}},sk=()=>ie({mutationFn:J1}),ak=()=>ie({mutationFn:ek}),Py=()=>ie({mutationFn:tk}),nk=async()=>{try{let{data:t}=await hn.get("/auth/worker/refreshtoken");return Ut.dispatch(Tm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Tm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Tm({isAuthenticated:!1})),{ok:!1}}},hn=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});hn.interceptors.response.use(t=>t,async t=>{var r,l;const a=t.config;if(a.url.includes("/auth/worker/isauthenticated"))return Promise.reject(t);if((((r=t.response)==null?void 0:r.status)===401||((l=t.response)==null?void 0:l.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await nk();if(o)return hn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const rk=async t=>{const{data:a}=await hn.post("/auth/worker/login",t);if(!a.ok)throw new Error(a.message);return a.data},lk=async({invite:t,payload:a})=>{const{data:r}=await hn.post(`/auth/worker/registerworker?invite=${t}`,a);if(console.log("data form register worker",r),!r.ok)throw new Error(r.message);return r.data},ik=async()=>{const{data:t}=await hn.post("/auth/worker/logout");if(!t.ok)throw new Error(t.message);return t.data},ok=()=>ie({mutationFn:rk}),ck=()=>ie({mutationFn:lk}),My=()=>ie({mutationFn:ik}),L=({variant:t="primary",size:a="md",children:r,isLoading:l=!1,className:o="",disabled:d,...m})=>{const x="inline-flex cursor-pointer items-center justify-center font-medium transition-colors focus:outline-none",h={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm",secondary:"bg-blue-100 hover:bg-blue-200 text-blue-700",outline:"border border-blue-200 hover:bg-blue-50 text-blue-600",danger:"border border-red-200 hover:bg-red-500 text-red-600",ghost:"hover:bg-gray-100 text-gray-700",link:"text-blue-600 hover:underline p-0 h-auto"},p={sm:"text-xs px-2.5 py-1.5 rounded-lg",md:"text-sm px-4 py-2 rounded-xl",lg:"text-base px-6 py-3 rounded-xl",icon:"p-2 rounded-lg"},j=`
    ${x} 
    ${h[t]} 
    ${p[a]} 
    ${d?"opacity-50 cursor-not-allowed":""} 
    ${l?"opacity-80 cursor-wait":""}
    ${o}
  `.trim();return e.jsxs("button",{className:j,disabled:d||l,...m,children:[l&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})};let Lm=null;function _(t){const{title:a,description:r,variant:l="default",duration:o=3e3}=t,d=document.getElementById("toast-container");d&&(document.body.removeChild(d),Lm&&window.clearTimeout(Lm));const m=document.createElement("div");m.id="toast-container",m.className="fixed bottom-4 right-4 z-50 max-w-xs";const x=document.createElement("div");x.className=`p-4 rounded-lg shadow-lg border ${l==="destructive"?"bg-red-50 border-red-200":"bg-white border-blue-100"}`;let h="";a&&(h+=`<h4 class="${l==="destructive"?"text-red-800":"text-blue-800"} font-medium">${a}</h4>`),h+=`<p class="${l==="destructive"?"text-red-600":"text-gray-600"} text-sm">${r}</p>`,x.innerHTML=h,m.appendChild(x),document.body.appendChild(m),Lm=window.setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},o)}const dk=({labels:t,icons:a,path:r})=>{const[l,o]=A.useState(!0),d=Me(),{organizationId:m}=Re(),x=ys(),{role:h}=xs(K=>K.authStore),{mutateAsync:p,isPending:g}=Oy(),{mutateAsync:y,isPending:j}=Ry(),{mutateAsync:E,isPending:b}=Ty(),{mutateAsync:k,isPending:w}=Py(),{mutateAsync:C,isPending:v}=My(),N=()=>{o(!1)},T=()=>{o(!0)},P=location.pathname.split("/"),D=P[2]==="projectdetails",$=()=>{D&&d(`/organizations/${m}/projects`)},[q,H]=A.useState("");A.useEffect(()=>{const B=location.pathname.split("/")[4];H(l?()=>O2[B]:()=>R2[B])},[location.pathname,l]),F2(T,N);const he=async()=>{var K,B;try{h==="CTO"?await p():h==="client"?await y():h==="staff"?await E():h==="owner"?await k():h==="worker"&&await C(),x(gc()),x(jc()),x(yc()),x(vc()),x(bc()),x(wc()),_({title:"Success",description:"logout successfull"}),(!g||!j||!b||!w||!v)&&d("/")}catch(te){_({title:"Error",description:((B=(K=te==null?void 0:te.response)==null?void 0:K.data)==null?void 0:B.message)||"Failed to logout",variant:"destructive"})}};return e.jsx(e.Fragment,{children:l?e.jsxs("aside",{className:"relative flex flex-col bg-[#2f303a] w-[17%] min-h-screen max-h-screen text-[#9ca3af] select-none transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-col flex-grow overflow-y-auto overflow-x-hidden custom-scrollbar p-2",children:[e.jsxs("div",{onClick:$,className:`flex ${D?"cursor-pointer":""} justify-between items-center border-b-1 py-2`,children:[e.jsx("span",{className:"text-xl",children:bt.COMPANY_NAME}),e.jsx("div",{className:"w-[30px] h-[30px]",children:e.jsx("img",{className:"w-full h-full",src:bt.COMPANY_LOGO,alt:"LOGO"})})]}),e.jsxs("section",{className:"py-2 space-y-2",children:[" ",Object.entries(t).map(([K,B])=>r[K]&&e.jsx($t,{to:r[K],className:"outline-none",children:e.jsxs("div",{onClick:()=>H(B),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${q===B?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:[e.jsx("span",{className:"text-lg",children:B}),e.jsx("span",{children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]})},B))]})]}),e.jsxs("div",{className:"flex flex-col p-2 border-t border-[#3a3b45]",children:[P[1]!=="login"&&e.jsxs(L,{isLoading:g||j||b||w||v,onClick:he,className:"flex items-center gap-2 px-4 py-3 rounded-lg !bg-[#3a3b45] !text-[#9ca3af] hover:!bg-[#464751] hover:!text-white transition",children:[e.jsx("i",{className:"fa-solid fa-right-from-bracket"}),e.jsx("span",{children:"Logout"})]}),e.jsx("button",{title:"Ctrl+] to close",onClick:N,className:"mt-2 flex items-center justify-center outline-none border border-blue-600 text-blue-500 hover:bg-[#3a3b45] rounded-lg w-full py-2",children:e.jsx("i",{className:"fa-solid fa-chevron-left"})})]})]}):e.jsxs("aside",{className:"flex flex-col relative justify-between bg-[#2f303a] w-[6%]  max-h-full  text-[#9ca3af] transition-all duration-300 ",children:[e.jsx("div",{className:"max-h-[95%] overflow-y-auto overflow-x-hidden custom-scrollbar",children:e.jsx("div",{className:"flex items-center flex-col justify-between w-full",children:Object.entries(a).map(([K,B])=>r[K]?e.jsx($t,{to:r[K],className:`${r[K]?"":"cursor-not-allowed"}`,children:e.jsx("div",{onClick:()=>H(K),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${(q==null?void 0:q.toLowerCase())===K.toLowerCase()?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:e.jsx("i",{className:`${B} ${(q==null?void 0:q.toLowerCase())===K.toLowerCase()?"text-[#4a86f7]":"text-[#9ca3af]"} `})})}):e.jsx("div",{className:"cursor-not-allowed flex justify-between max-w-[95%] py-4 px-4",children:e.jsx("i",{className:`${B}`})}))})}),e.jsxs("div",{className:"flex flex-col items-center p-2 border-t border-[#3a3b45]",children:[P[1]!=="login"&&e.jsx(L,{isLoading:g||j||b||w||v,title:"logout",onClick:he,className:"w-[40px] h-[40px] flex items-center justify-center !bg-[#3a3b45] !text-[#9ca3af] hover:!text-red-500 transition",children:e.jsx("i",{className:"fa-solid fa-right-from-bracket"})}),e.jsx("button",{title:"Ctrl+[ to open",onClick:T,className:"mt-2 cursor-pointer outline-none border-[#9ca3af] h-[40px] w-[40px] flex items-center justify-center border rounded-lg",children:e.jsx("i",{className:"fa-solid fa-chevron-right text-[#4a86f7]"})})]})]})})},Ci=A.memo(dk),ki=({isOpen:t,onClose:a,labels:r,path:l})=>{const o=Me(),{organizationId:d}=Re(),m=ys(),{role:x}=xs($=>$.authStore),{mutateAsync:h,isPending:p}=Oy(),{mutateAsync:g,isPending:y}=Ry(),{mutateAsync:j,isPending:E}=Ty(),{mutateAsync:b,isPending:k}=Py(),{mutateAsync:w,isPending:C}=My(),v=async()=>{var $,q;try{x==="CTO"?await h():x==="client"?await g():x==="staff"?await j():x==="owner"?await b():x==="worker"&&await w(),m(gc()),m(jc()),m(yc()),m(vc()),m(bc()),m(wc()),_({title:"Success",description:"logout successfull"}),(!p||!y||!E||!k||!C)&&o("/")}catch(H){_({title:"Error",description:((q=($=H==null?void 0:H.response)==null?void 0:$.data)==null?void 0:q.message)||"Failed to logout",variant:"destructive"})}},N=Object.entries(r),T=location.pathname.split("/"),P=T[2]==="projectdetails",D=()=>{P&&o(`/organizations/${d}/projects`)};return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:a}),e.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${t?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{onClick:D,className:`flex items-center gap-3 ${P?"cursor-pointer":""}`,children:[e.jsx("img",{src:bt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:bt.COMPANY_NAME})]}),e.jsx("button",{onClick:a,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("nav",{className:"flex flex-col flex-grow overflow-y-auto p-4",children:N.map(([$,q],H)=>e.jsxs(ct.Fragment,{children:[l[$]?e.jsx($t,{to:l[$],onClick:a,className:"text-gray-800 hover:bg-gray-100 p-3 rounded block",children:q}):e.jsx("span",{className:"text-gray-400 p-3 rounded cursor-not-allowed block",children:q}),H<N.length-1&&e.jsx("hr",{className:"border-t border-gray-200 my-1"})]},$))}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:T[1]!=="login"&&e.jsxs(L,{className:"w-full flex items-center justify-center gap-2",isLoading:p||y||E||k||C,onClick:v,children:[e.jsx("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})]})},uk=({projectId:t,setProjectId:a})=>{const{organizationId:r}=Re(),[l,o]=A.useState(!1),[d,m]=A.useState(window.innerWidth<470),x={PROJECTS:`/organizations/${r}/projects`,ORGANIZATION:`/organizations/${r}/invitecto`};return A.useEffect(()=>{const h=()=>{m(window.innerWidth<470)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-full h-full",children:[d?e.jsx(ki,{labels:Im,path:x,isOpen:l,onClose:()=>o(!1)}):e.jsx(Ci,{path:x,labels:Im,icons:k2}),e.jsx("main",{className:"!w-[100%] h-full p-4",children:e.jsx(Vt,{context:{projectId:t,setProjectId:a,organizationId:r,isMobile:d,isMobileSidebarOpen:l,openMobileSidebar:()=>o(!0),closeMobileSidebar:()=>o(!1)}})})]})})},P0=t=>{var r;const a={};return console.log("projectData",t),(r=t.projectName)!=null&&r.trim()||(a.projectName="project name is required"),t.startDate||(a.startDate="start date is required"),t.dueDate||(a.dueDate="Due date is Required"),t.startDate&&t.endDate&&t.endDate<=t.startDate&&(a.endDate="End date must be after start date."),t.startDate&&t.dueDate&&t.dueDate<=t.startDate&&(a.endDate="Due date must be after start date."),a},mk=t=>{var r;const a={};return(r=t.email)!=null&&r.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",a},fk=t=>{var r;const a={};return(r=t.email)!=null&&r.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",t.userName||(a.userName="user name is not provided"),t.phoneNo||(a.phoneNo="phone Number is required"),/^\d{10}$/.test(t.phoneNo.trim())||(a.phoneNo="Phone number should contain exactly 10 digits"),t.confirmPassword.trim()?t.password!==t.confirmPassword&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="please confirm your password",a},Pe=({className:t="",children:a})=>e.jsx("div",{className:`bg-white/70 backdrop-blur-sm border-0 rounded-2xl shadow-lg ${t}`,children:a}),bs=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-3 ${t}`,children:a}),Gt=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pt-3 ${t}`,children:a}),Ps=({className:t="",children:a})=>e.jsx("h3",{className:`text-xl font-semibold text-blue-900 ${t}`,children:a}),aa=({className:t="",children:a})=>e.jsx("p",{className:`text-sm text-gray-500 ${t}`,children:a}),de=({className:t="",error:a,...r})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("input",{className:d,...r}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},me=({className:t="",...a})=>e.jsx("label",{className:`text-sm font-medium text-gray-700 ${t}`,...a}),M0=()=>{const[t,a]=A.useState({email:"",password:""}),[r,l]=A.useState({email:"",password:"",userName:"",phoneNo:"",confirmPassword:""}),[o,d]=A.useState({}),[m,x]=A.useState({}),[h,p]=A.useState(!1),g=ys(),y=Me(),[j,E]=A.useState(!1),{isMobile:b,openMobileSidebar:k}=We(),{mutateAsync:w,isPending:C}=ak(),{mutateAsync:v,isPending:N}=sk(),T=q=>{a(H=>({...H,[q.target.name]:q.target.value}))},P=q=>{l(H=>({...H,[q.target.name]:q.target.value}))},D=async q=>{var H,he;q.preventDefault();try{d({});const K=mk(t);if(d(K),Object.keys(K).length===0&&!C){const B=await w(t);if(B.ok){const te=B==null?void 0:B.data;g(Lt({_id:te==null?void 0:te.userId,role:te==null?void 0:te.role,isauthenticated:!0})),g(pc({userId:te==null?void 0:te.userId,userName:te==null?void 0:te.userName,email:te==null?void 0:te.email,phoneNo:te==null?void 0:te.phoneNo,role:te==null?void 0:te.role,isauthenticated:!0})),_({title:"Success",description:"Login successfull"}),y("/organizations")}}}catch(K){_({title:"Error",description:((he=(H=K==null?void 0:K.response)==null?void 0:H.data)==null?void 0:he.message)||"Failed to login",variant:"destructive"})}},$=async q=>{var H,he;q.preventDefault();try{x({});const K=fk(r);if(x(K),Object.keys(K).length===0&&!C){const B=await v(r);if(B.ok){const te=B==null?void 0:B.data;g(Lt({_id:te==null?void 0:te.userId,role:te.role,isauthenticated:!0})),g(pc({userId:te.userId,userName:te.userName,email:te.email,phoneNo:te.phoneNo,role:te.role,isauthenticated:!0})),_({title:"Success",description:"Registraiton successfull"}),y("/organizations")}}}catch(K){_({title:"Error",description:((he=(H=K==null?void 0:K.response)==null?void 0:H.data)==null?void 0:he.message)||"Failed to Register",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen relative bg-gradient-to-br from-blue-50 p-4 via-white to-blue-100 flex items-center justify-center",children:[e.jsx("div",{className:"absolute top-2 left-2",children:b&&e.jsx("button",{onClick:k,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),j?e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sm:p-8 lg:p-10",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Registration"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Create your owner account to get started                            "})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"staffName",name:"staffName",type:"text",value:r.userName,onChange:P,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${m.userName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.userName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:r.email,onChange:P,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:r.phoneNo,onChange:P,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${m.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:h?"text":"password",value:r.password,onChange:P,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",value:r.confirmPassword,onChange:P,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>E(!1),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Sign In"})]})})]})}):e.jsx("div",{className:"w-full max-w-md ",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs("form",{onSubmit:D,className:"space-y-5 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:t.email,onChange:T,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${o.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.email})]})]}),e.jsxs("div",{children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:h?"text":"password",value:t.password,onChange:T,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${o.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.password}),e.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?e.jsx("i",{className:"fas fa-eye-slash"}):e.jsx("i",{className:"fas fa-eye"})})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:C,children:C?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Don't have an account? ",e.jsx("button",{onClick:()=>E(!0),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Register here"})]})})]})})]})},hk=({projectId:t,setProjectId:a,organizationId:r,setOrganizationId:l})=>{const o=yt(),[d,m]=A.useState(!1),[x,h]=A.useState(window.innerWidth<470);A.useLayoutEffect(()=>{const g=o.pathname.split("/");a(g[3]),l(g[1])},[o.pathname]),A.useEffect(()=>{const g=()=>{h(window.innerWidth<470)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const p={WORKERS:t?`/${r}/projectdetails/${t}/workers`:"",INVITECLIENT:t?`/${r}/projectdetails/${t}/inviteclient`:"",PREREQUIRETIES:t?`/${r}/projectdetails/${t}/prerequireties`:"",REQUIREMENTFORM:t?`/${r}/projectdetails/${t}/requirementform`:"",SITEMEASUREMENT:t?`/${r}/projectdetails/${t}/sitemeasurement`:"",SAMPLEDESIGN:t?`/${r}/projectdetails/${t}/sampledesign`:"",TECHNICALCONSULTANT:t?`/${r}/projectdetails/${t}/technicalconsultant`:"",MATERIALSELECTION:t?`/${r}/projectdetails/${t}/materialselection`:"",COSTESTIMATION:t?`/${r}/projectdetails/${t}/costestimation`:"",PAYMENTCONFIRMATION:t?`/${r}/projectdetails/${t}/paymentconfirmation`:"",ORDERMATERIALS:t?`/${r}/projectdetails/${t}/ordermaterial`:"",MATERIALARRIVED:t?`/${r}/projectdetails/${t}/materialarrival`:"",WORKSCHEDULE:t?`/${r}/projectdetails/${t}/workmainschedule`:"",INSTALLATION:t?`/${r}/projectdetails/${t}/installation`:"",QUALITYCHECK:t?`/${r}/projectdetails/${t}/qualitycheck`:"",CLEANINGSANITATION:t?`/${r}/projectdetails/${t}/cleaning`:"",PROJECTDELIVERY:t?`/${r}/projectdetails/${t}/projectdelivery`:""};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-screen h-screen",children:[x?e.jsx(ki,{labels:Kg,path:p,isOpen:d,onClose:()=>m(!1)}):e.jsx(Ci,{path:p,labels:Kg,icons:A2}),e.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:e.jsx(Vt,{context:{projectId:t,setProjectId:a,isMobile:x,isMobileSidebarOpen:d,openMobileSidebar:()=>m(!0),closeMobileSidebar:()=>m(!1)}})})]})})},xk=({tags:t,setState:a})=>{const[r,l]=A.useState(""),o=m=>{(m.key==="Enter"||m.key===",")&&r.trim()?(m.preventDefault(),t.includes(r.trim())||a(x=>({...x,tags:[...t,r.trim()]})),l("")):m.key==="Backspace"&&!r&&a(x=>({...x,tags:t.slice(0,-1)}))},d=m=>{a(x=>({...x,tags:t.filter((h,p)=>p!==m)}))};return e.jsxs("div",{className:"flex flex-wrap items-center border-b-1 border-[#565656] p-2 gap-2",children:[t.map((m,x)=>e.jsxs("div",{className:"bg-blue-600 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[m,e.jsx("span",{className:"cursor-pointer ml-1 text-xs",onClick:()=>d(x),children:""})]},x)),e.jsx("input",{type:"text",value:r,onChange:m=>l(m.target.value),onKeyDown:o,className:"input flex-1 outline-none text-sm border-none",placeholder:"Type and press Enter"})]})},pk=A.memo(xk),J=t=>t==="owner"?Is:t==="staff"?sa:t==="worker"?hn:t==="CTO"?fn:t==="client"?Aa:null,Z=()=>xs(t=>t.authStore),gk=async({api:t,projectData:a,orgsId:r})=>{try{let{data:l}=await t.post(`/project/createproject/${r}`,a);if(console.log("create project",l),l.ok)return l}catch(l){throw l}},bk=async({orgsId:t,api:a})=>{try{let{data:r}=await a.get(`/project/getprojects/${t}`);return r.ok?r.data:[]}catch(r){throw r}},yk=async(t,a)=>{try{let{data:r}=await a.delete(`/project/deleteproject/${t}`);if(r.ok)return r.data}catch(r){throw r}},wk=async({projectId:t,formData:a,api:r})=>{try{let{data:l}=await r.put(`/project/updateproject/${t}`,a);if(l.ok)return l}catch(l){throw l}},vk=t=>{const{role:a}=Z(),r=J(a),l=["owner","staff","CTO","worker","client"];return qe({queryKey:["project"],queryFn:async()=>{if(!a)throw new Error("Not Allowed");if(!l.includes(a))throw new Error("Not Allowed");if(!r)throw new Error("API not found");return await bk({orgsId:t,api:r})},enabled:!!a,refetchOnWindowFocus:!1,retry:!1,staleTime:1e3*60*10})},jk=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({projectData:l,orgsId:o})=>{if(!t)throw new Error("Not Authrorized");if(!r.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await gk({api:a,orgsId:o,projectData:l})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["project"]})}})},Nk=()=>{const{role:t}=Z(),a=J(t),r=["owner","CTO"];return ie({mutationFn:async l=>{if(!t)throw new Error("Not Authrorized");if(!r.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await yk(l,a)},onSuccess:()=>{Ae.invalidateQueries({queryKey:["project"]})}})},Sk=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({projectId:l,formData:o})=>{if(!t)throw new Error("Not Authrorized");if(!r.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await wk({projectId:l,formData:o,api:a})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["project"]})}})},L0=({message:t,onClick:a})=>{const[r,l]=A.useState(!0),[o,d]=A.useState("in"),m=()=>{d("out")},x=()=>{o==="out"&&(l(!1),a())};return r?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes bounceScaleIn {
          0% { transform: scale(0); }
          60% { transform: scale(1.1); }
          80% { transform: scale(0.95); }
          100% { transform: scale(1); }
        }
        @keyframes bounceScaleOut {
          0% { transform: scale(1); }
          20% { transform: scale(1.1); }
          100% { transform: scale(0); }
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-[#0a0a0a10] z-[1099] flex items-center justify-center px-4",onClick:()=>m(),children:e.jsxs("div",{onClick:h=>h.stopPropagation(),style:{animation:o==="in"?"bounceScaleIn 0.2s ease-out forwards":"bounceScaleOut 0.2s ease-in forwards"},onAnimationEnd:x,className:"bg-[#2f303a] text-gray-800 rounded-2xl !w-[30%] shadow-lg !px-6 max-w-lg sm:!px-3 sm:py-2 sm:w-full text-center !space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-red-500 pb-2",children:[e.jsx("span",{className:"text-white text-lg",children:"Error occured"}),e.jsx("span",{className:"cursor-pointer",onClick:m,children:e.jsx("i",{className:"fa-solid fa-xmark text-red-500 text-lg"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-lg",children:t[0].toUpperCase()+t.slice(1)}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:m,className:"cursor-pointer inline-block bg-red-500 hover:bg-red-800 duration-200 px-5 py-1 rounded-md text-white",children:"OK"})})]})]})})]}):null},Ck=["none","low","medium","high"],kk=["Active","Delayed","In Progress","In Testing","On Track","On Hold","Approved","Cancelled","Planning","Invoice"],Ek={Active:"bg-green-100 text-green-800",Delayed:"bg-red-100 text-red-800","In Progress":"bg-blue-100 text-blue-800","In Testing":"bg-yellow-100 text-yellow-800","On Track":"bg-emerald-100 text-emerald-800","On Hold":"bg-gray-100 text-gray-800",Approved:"bg-indigo-100 text-indigo-800",Cancelled:"bg-rose-100 text-rose-800",Planning:"bg-purple-100 text-purple-800",Invoice:"bg-pink-100 text-pink-800"},Ak=({onClose:t,refetch:a,setShowForm:r,organizationId:l,isEditing:o,setEditForm:d,editForm:m,editProjectId:x})=>{var q,H,he,K;const[h,p]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,y]=A.useState({}),j=(B,te)=>{let{name:V,value:oe}=B.target;if(V==="tags"){te(F=>({...F,tags:Array.from(new Set([...F.tags,oe]))}));return}if(V.includes("Date")){const F=oe?new Date(oe):null;te(W=>{const ue={...W,[V]:F};if(ue.startDate&&ue.dueDate){const re=ue.dueDate.getTime()-ue.startDate.getTime();re>=0?ue.duration=Math.ceil(re/(1e3*3600*24)):ue.duration=0}return ue});return}te(F=>({...F,[V]:oe}))},{mutateAsync:E,isPending:b,error:k,isError:w,reset:C}=jk(),{mutateAsync:v,isPending:N,error:T,isError:P,reset:D}=Sk(),$=async B=>{var te,V;B.preventDefault(),B.stopPropagation();try{const oe=P0(o?m:h);y(oe),Object.keys(oe).length===0&&(o&&x?N||(await v({projectId:x,formData:m}),_({title:"Success",description:"Project Edited Successfully"})):b||(await E({projectData:h,orgsId:l}),_({title:"Success",description:"Project Created Successfully"})),a(),r(!1))}catch(oe){_({title:"Error",description:((V=(te=oe==null?void 0:oe.response)==null?void 0:te.data)==null?void 0:V.message)||(oe==null?void 0:oe.message)||"Operation Failed",variant:"destructive"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{onClick:B=>B.stopPropagation(),className:"bg-white w-full h-full overflow-y-auto custom-scrollbar max-w-3xl mx-auto rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 border border-gray-200 relative",children:[!b&&w&&e.jsx(L0,{message:((H=(q=k==null?void 0:k.response)==null?void 0:q.data)==null?void 0:H.message)||(k==null?void 0:k.message)||"Something went wrong",onClick:()=>C()}),!N&&P&&e.jsx(L0,{message:((K=(he=T==null?void 0:T.response)==null?void 0:he.data)==null?void 0:K.message)||(T==null?void 0:T.message)||"Something went wrong",onClick:()=>D()}),e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-edit"})," Edit Project"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-plus"})," Create Project"]})}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-red-500 text-xl",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),e.jsx("input",{autoFocus:!0,name:"projectName",value:o?m.projectName:h.projectName,onChange:B=>j(B,o?d:p),type:"text",placeholder:"Enter name",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.projectName&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.projectName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (days)"}),e.jsx("input",{disabled:!0,type:"number",name:"duration",onChange:B=>j(B,o?d:p),value:o?m.duration:h.duration,placeholder:"Ex: 15",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{rows:3,name:"description",onChange:B=>j(B,o?d:p),value:o?m.description:h.description,placeholder:"Brief project overview",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx(pk,{tags:o?m.tags:h.tags,setState:o?d:p})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",onChange:B=>j(B,o?d:p),value:o?m.startDate?m.startDate.toISOString().split("T")[0]:"":h.startDate?h.startDate.toISOString().split("T")[0]:"",name:"startDate",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.startDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",onChange:B=>j(B,o?d:p),value:o?m.endDate?m.endDate.toISOString().split("T")[0]:"":h.endDate?h.endDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.endDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.endDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",onChange:B=>j(B,o?d:p),value:o?m.dueDate?m.dueDate.toISOString().split("T")[0]:"":h.dueDate?h.dueDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.dueDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.dueDate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("select",{name:"priority",onChange:B=>j(B,o?d:p),value:o?m.priority:h.priority,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:Ck.map(B=>e.jsx("option",{value:B,children:B},B))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{name:"status",onChange:B=>j(B,o?d:p),value:o?m.status:h.status,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:kk.map(B=>e.jsx("option",{value:B,children:B},B))})]})]}),e.jsx("div",{className:"text-end",children:e.jsx(L,{isLoading:b||N,type:"submit",disabled:b||N,className:"bg-blue-600 text-white px-6 w-full sm:w-40 py-2 rounded-xl hover:bg-blue-700 transition-all",children:b||N?e.jsx("div",{className:"mx-auto w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):o?"Edit Project":"Create Project"})})]})]})})},Ok=A.memo(Ak);function ui(t){if(!t)return"N/A";const a=new Date(t).getFullYear(),r=new Date(t).getMonth()+1;return`${new Date(t).getDate()}-${r}-${a}`}const Rk=({project:t,onEdit:a,organizationId:r,refetch:l})=>{const{setProjectId:o}=We(),{mutateAsync:d,isPending:m}=Nk(),x=E=>{o(E)},h=E=>{switch(E){case"high":return"bg-red-100 text-red-500";case"medium":return"bg-yellow-100 text-yellow-600";case"low":return"bg-green-100 text-green-600";default:return"bg-white shadow-sm"}},p=A.useMemo(()=>{var E;return(E=t.projectInformation)!=null&&E.startDate?ui(t.projectInformation.startDate):null},[]),g=A.useMemo(()=>{var E;return(E=t.projectInformation)!=null&&E.endDate?ui(t.projectInformation.endDate):null},[]),y=A.useMemo(()=>{var E;return(E=t.projectInformation)!=null&&E.dueDate?ui(t.projectInformation.dueDate):null},[]),j=async()=>{var E,b;try{if(!window.confirm("Are you sure you want to delete this project?"))return;await d(t._id),_({title:"Success",description:"Project Deleted Successfully"}),l()}catch(k){_({title:"Error",description:((b=(E=k==null?void 0:k.response)==null?void 0:E.data)==null?void 0:b.message)||(k==null?void 0:k.message)||"Failed to Delete",variant:"destructive"})}};return e.jsxs("div",{className:"p-2 sm:p-5 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xl font-semibold text-[#1f2d3d]",children:[e.jsx("i",{className:"fa-solid fa-folder-open text-blue-600"}),t.projectName]}),e.jsxs("span",{className:`text-sm px-3 py-1 rounded-full font-medium ${h(t.projectInformation.priority)}`,children:[t.projectInformation.priority," priority"]})]}),e.jsxs("div",{className:"text-sm text-gray-700 grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-y-1 sm:gap-y-2 gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-day text-gray-500"}),e.jsx("strong",{children:"Start:"})," ",p||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"End:"})," ",g||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"Due:"})," ",y||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Duration: ",t.projectInformation.duration," days"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Status: ",e.jsx("span",{className:`${Ek[t.projectInformation.status]} !bg-transparent`,children:t.projectInformation.status})," "]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Progress"}),e.jsx("div",{className:"mt-1 w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600",style:{width:`${t.completionPercentage}%`}})}),e.jsxs("div",{className:"text-sm text-right text-gray-600 mt-1",children:[t.completionPercentage,"% Complete"]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-2 text-sm text-blue-600",children:[e.jsxs($t,{to:`/${r}/projectdetails/${t._id}/requirementform`,onClick:()=>x(t._id),className:"hover:underline cursor-pointer flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-eye"}),"View"]}),e.jsxs(L,{isLoading:m,variant:"outline",onClick:j,className:"hover:underline cursor-pointer flex items-center gap-1 text-red-500 !border-0",children:[e.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),e.jsxs("button",{onClick:()=>a(t,t._id),className:"hover:underline cursor-pointer flex items-center gap-1 text-amber-500",children:[e.jsx("i",{className:"fa-solid fa-pencil"}),"edit"]})]})]})},Tk=A.memo(Rk);function Pk(t){return{projectName:t.projectName,description:t.description??"",duration:t.projectInformation.duration??0,tags:t.projectInformation.tags??[],startDate:t.projectInformation.startDate?new Date(t.projectInformation.startDate):null,endDate:t.projectInformation.endDate?new Date(t.projectInformation.endDate):null,dueDate:t.projectInformation.dueDate?new Date(t.projectInformation.dueDate):null,priority:t.projectInformation.priority??"none",status:t.projectInformation.status??"Active"}}const _0=()=>e.jsxs("div",{className:"animate-pulse bg-white border-l-8 border-blue-600 shadow-md rounded-xl p-4 flex flex-col justify-between min-h-[250px] w-full max-w-[500px]",children:[e.jsx("div",{className:"h-5 w-1/2 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"})]})]}),Mk=()=>{var P,D;const{organizationId:t}=Re(),{openMobileSidebar:a,isMobile:r}=We(),{role:l}=xs($=>$.authStore),[o,d]=A.useState(!1),[m,x]=A.useState(!1),[h,p]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,y]=A.useState(null);let{data:j,refetch:E,isPending:b,error:k,isLoading:w}=vk(t);const C=["owner","CTO","staff"],v=A.useCallback(($,q)=>{const H=Pk($);p(H),y(q),x(!0),d(!0)},[]),N=A.useCallback(()=>{d(!1),x(!1)},[]),T=A.useCallback(($,q)=>{v($,q)},[v]);return w?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map($=>e.jsx(_0,{},$))}):e.jsxs("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex ",children:[r&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border-none border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-[#1f2d3d] flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-diagram-project text-blue-600 text-2xl"}),e.jsx("p",{children:Im.PROJECTS})]})]}),C.includes(l)&&e.jsx("div",{onClick:()=>{d(!o)},className:"bg-blue-600  cursor-pointer !h-[40px] !w-[40px] flex justify-center items-center rounded-full",children:e.jsx("i",{className:`fa-solid fa-plus text-white transition-transform duration-300 ${o?"rotate-135":"rotate-0"}`})})]}),e.jsx("hr",{className:"my-2 border-b-1 border-gray-300"}),!b&&((j==null?void 0:j.length)??0)===0&&e.jsxs("div",{className:"flex h-full flex-col items-center justify-center w-full py-16 text-center text-gray-500",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Projects Found"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 max-w-md",children:"Looks like you havent added any projects yet. Click the + button to get started and create your first project."}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 cursor-pointer hover:bg-blue-700 text-white px-4 py-2 rounded-md transition",children:"Create New Project"})]}),k&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((D=(P=k==null?void 0:k.response)==null?void 0:P.data)==null?void 0:D.message)||"Failed to load the projects"}),e.jsx(L,{onClick:()=>E(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!k&&e.jsxs("div",{className:"h-full flex-1 !overflow-y-auto custom-scrollbar grid md:grid-cols-2 gap-6",children:[b&&[...Array(6)].map(($,q)=>e.jsx(A.Fragment,{children:e.jsx(_0,{})},q)),!b&&(j==null?void 0:j.length)>0&&(j==null?void 0:j.map(($,q)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-[256px] sm:!h-[270px] md:!h-[330px] lg:!h-[282px] flex flex-col shadow-md rounded-xl overflow-hidden border-l-8 border-blue-600 bg-white",children:e.jsx(Tk,{refetch:E,onEdit:T,index:q,project:$,organizationId:t})},$._id)})))]}),o&&e.jsx("div",{onClick:N,className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx(Ok,{onClose:N,refetch:E,setShowForm:d,organizationId:t,isEditing:m,setEditForm:p,editForm:h,editProjectId:g})})]})},Lk=()=>{const t=Me();return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center px-4 py-10 bg-gray-100",children:e.jsxs("div",{className:"max-w-lg w-full text-center bg-white rounded-xl shadow-md p-8 space-y-6 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-6xl sm:text-7xl font-extrabold text-blue-700",children:"404"}),e.jsx("p",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mt-2",children:"Page Not Found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sorry! The page youre looking for doesnt exist or has been moved."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:()=>t("/organizations"),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-house mr-2"}),"Go to Home"]}),e.jsxs("button",{onClick:()=>t(-1),className:"w-full sm:w-auto px-6 py-3 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-2"}),"Go Back"]})]})]})})},_k=async t=>{const{data:a}=await Is.post("/orgs/createorganziation",t);if(!a.ok)throw new Error(a.message);return a.data},Fk=async t=>{const{data:a}=await t.get("/orgs/getorganizations");return a.ok?a.data:null},Dk=async(t,a)=>{const{data:r}=await a.get(`/orgs/getsingleorganization/${t}`);return r.ok?r.data:{}},qk=async({updateField:t,orgsId:a,api:r})=>{const{data:l}=await r.put(`/orgs/updateorganization/${a}`,t);if(!l.ok)throw new Error(l.message);return l.data},zk=async(t,a)=>{const{data:r}=await a.put(`/orgs/deleteorganization/${t}`);if(!r.ok)throw new Error(r.message);return r},Uk=()=>{const t=["owner","staff","CTO","client","worker"],{role:a}=Z(),r=J(a);return qe({queryKey:["myOrgs"],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await Fk(r)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},$k=t=>{const a=["owner","staff","CTO","client","worker"],{role:r}=Z(),l=J(r);return qe({queryKey:["myOrgs"],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await Dk(t,l)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},Ik=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async l=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await _k(l)},onSuccess:()=>{Ae.invalidateQueries({queryKey:["myOrgs"]})}})},Bk=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({updateField:l,orgsId:o})=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await qk({updateField:l,orgsId:o,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["myOrgs"]})}})},Hk=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async l=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await zk(l,r)},onSuccess:()=>{Ae.invalidateQueries({queryKey:["myOrgs"]})}})},Qk=async(t,a)=>{const{data:r}=await a.get(`/orgs/getstaffsoforganization/${t}`);return r.ok,r.data},Gk=async(t,a)=>{const{data:r}=await a.post("/orgs/invitestafftoorganization",t);if(!r.ok)throw new Error(r.message);return r.data},Kk=async({staffId:t,orgId:a,api:r})=>{const{data:l}=await r.patch(`/orgs/removestafffromorganziation?staffId=${t}&orgId=${a}`);if(!l.ok)throw new Error(l.message);return l.data},Vk=t=>{const a=["owner","staff","CTO"],{role:r}=Z(),l=J(r);return qe({queryKey:["staffs",t],queryFn:async()=>{if(!r)throw new Error("Not authrized");if(!a.includes(r))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Qk(t,l)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},Yk=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async l=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await Gk(l,r)}})},Wk=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({staffId:l,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await Kk({staffId:l,orgId:o,api:r})},onSuccess:(l,o)=>{Ae.invalidateQueries({queryKey:["staffs",o.orgId]})}})},Xk=async(t,a)=>{const{data:r}=await a.get(`/orgs/getctooforganization/${t}`);return r.ok,r.data},Zk=async(t,a)=>{const{data:r}=await a.post("/orgs/invitectotoorganization",t);if(!r.ok)throw new Error(r.message);return r.data},Jk=async({CTOId:t,orgId:a,api:r})=>{const{data:l}=await r.patch(`/orgs/removectofromorganziation?CTOId=${t}&orgId=${a}`);if(!l.ok)throw new Error(l.message);return l.data},eE=t=>{const a=["owner","staff","CTO"],{role:r}=Z(),l=J(r);return qe({queryKey:["CTO",t],queryFn:async()=>{if(!r)throw new Error("Not authrized");if(!a.includes(r))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Xk(t,l)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},tE=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async l=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await Zk(l,r)}})},sE=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({CTOId:l,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await Jk({CTOId:l,orgId:o,api:r})},onSuccess:(l,o)=>{Ae.invalidateQueries({queryKey:["CTO",o.orgId]})}})},aE=async({projectId:t,api:a,organizationId:r})=>{const{data:l}=await a.post("orgs/inviteclienttoproject",{projectId:t,organizationId:r});if(!l.ok)throw new Error(l.message);return l.data},nE=()=>{const t=["owner","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,organizationId:o})=>{if(!a)throw new Error("not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await aE({projectId:l,api:r,organizationId:o})}})},rE=async(t,a)=>{const{data:r}=await Is.get(`/orgs/getclientsofproject/${t}/${a}`);return r.ok,console.log("data",r),r.data},lE=(t,a)=>{const r=["owner","staff","CTO"],{role:l}=Z(),o=J(l);return qe({queryKey:["CTO",t],queryFn:async()=>{if(!l||!r.includes(l))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await rE(t,a)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},iE=async({payload:t,api:a})=>{console.log("payload",t);const{data:r}=await a.post("orgs/inviteworker",t);if(!r.ok)throw new Error(r.message);return r.data},oE=async(t,a)=>{const{data:r}=await a.get(`orgs/getworker/${t}`);if(!r.ok)throw new Error(r.message);return r.data},cE=async({workerId:t,projectId:a,api:r})=>{const{data:l}=await r.put(`orgs/removeworker/${t}/${a}`);if(!l.ok)throw new Error(l.message);return l.data},dE=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async l=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await iE({api:r,payload:l})}})},uE=t=>{const a=["owner","staff","CTO"],{role:r}=Z(),l=J(r);return qe({queryKey:["workers",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not Allowed to Make this api Call");if(!l)throw new Error("API instance not found for role");return await oE(t,l)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},mE=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({workerId:l,projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await cE({workerId:l,projectId:o,api:r})},onSuccess:()=>Ae.invalidateQueries({queryKey:["workers"]})})},fE=({children:t})=>{const[a,r]=A.useState(!1),l=A.useRef(null);return A.useEffect(()=>{const o=d=>{l.current&&!l.current.contains(d.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]),e.jsx("div",{ref:l,className:"relative inline-block text-left",children:ct.Children.map(t,o=>{if(ct.isValidElement(o)){if(o.type===Ly)return ct.cloneElement(o,{onClick:()=>r(!a)});if(o.type===_y)return ct.cloneElement(o,{isOpen:a,onClose:()=>r(!1)})}return o})})},Ly=({asChild:t=!1,children:a,onClick:r})=>t&&ct.isValidElement(a)?ct.cloneElement(a,{onClick:l=>{var o;if(l.stopPropagation(),r==null||r(),ct.isValidElement(a)){const d=(o=a.props)==null?void 0:o.onClick;typeof d=="function"&&d(l)}}}):e.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),r==null||r()},className:"inline-flex items-center justify-center",children:a}),_y=({align:t="start",className:a="",children:r,isOpen:l=!1,onClose:o})=>{if(!l)return null;const d=t==="end"?"right-0":"left-0";return e.jsx("div",{className:`absolute ${d} mt-2 w-48 rounded-xl bg-white shadow-lg border border-gray-200 py-1 z-50 ${a}`,children:ct.Children.map(r,m=>ct.isValidElement(m)&&m.type===Fy?ct.cloneElement(m,{onClose:o}):m)})},Fy=({className:t="",children:a,onClick:r,onClose:l})=>{const o=()=>{r==null||r(),l==null||l()};return e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center ${t}`,onClick:o,children:a})},sl=({variant:t="default",className:a="",children:r})=>{const d=`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${{default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",outline:"border border-blue-200 text-blue-700"}[t]} ${a}`.trim();return e.jsx("span",{className:d,children:r})};var Dy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},F0=ct.createContext&&ct.createContext(Dy),hE=["attr","size","title"];function xE(t,a){if(t==null)return{};var r=pE(t,a),l,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(o=0;o<d.length;o++)l=d[o],!(a.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(r[l]=t[l])}return r}function pE(t,a){if(t==null)return{};var r={};for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){if(a.indexOf(l)>=0)continue;r[l]=t[l]}return r}function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},Nc.apply(this,arguments)}function D0(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);a&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,l)}return r}function Sc(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?D0(Object(r),!0).forEach(function(l){gE(t,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D0(Object(r)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(r,l))})}return t}function gE(t,a,r){return a=bE(a),a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function bE(t){var a=yE(t,"string");return typeof a=="symbol"?a:a+""}function yE(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var l=r.call(t,a);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function qy(t){return t&&t.map((a,r)=>ct.createElement(a.tag,Sc({key:r},a.attr),qy(a.child)))}function Ei(t){return a=>ct.createElement(wE,Nc({attr:Sc({},t.attr)},a),qy(t.child))}function wE(t){var a=r=>{var{attr:l,size:o,title:d}=t,m=xE(t,hE),x=o||r.size||"1em",h;return r.className&&(h=r.className),t.className&&(h=(h?h+" ":"")+t.className),ct.createElement("svg",Nc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,l,m,{className:h,style:Sc(Sc({color:t.color||r.color},r.style),t.style),height:x,width:x,xmlns:"http://www.w3.org/2000/svg"}),d&&ct.createElement("title",null,d),t.children)};return F0!==void 0?ct.createElement(F0.Consumer,null,r=>a(r)):a(Dy)}function vE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function jE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function NE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function SE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function CE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function kE({organization:t}){const a=Hk(),r=Me(),l=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await a.mutateAsync(t._id),_({title:"Success",description:"Organization deleted successfully"})}catch(o){_({title:"Error",description:o.message||"Failed to delete organization",variant:"destructive"})}};return e.jsxs(Pe,{className:"group hover:shadow-2xl transition-all duration-300 hover:bg-white hover:scale-105",children:[e.jsx(bs,{className:"pb-4 bg-gradient-to-br from-blue-50 to-blue-100/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t!=null&&t.logoUrl?e.jsx("img",{src:t.logoUrl||"/placeholder.svg",alt:t.organizationName,className:"w-8 h-8 rounded-lg object-cover"}):e.jsx(CE,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-blue-900 text-lg truncate",children:t==null?void 0:t.organizationName}),t.type&&e.jsx(sl,{variant:"default",className:"mt-1",children:t.type})]})]}),e.jsxs(fE,{children:[e.jsx(Ly,{asChild:!0,children:e.jsx(L,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(jE,{className:"h-4 w-4"})})}),e.jsx(_y,{align:"end",children:e.jsxs(Fy,{onClick:l,className:"text-red-600 focus:text-red-600",children:[e.jsx(SE,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]})}),e.jsx(Gt,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx(vE,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),(t==null?void 0:t.address)||"N/A"]}),(t==null?void 0:t.organizationPhoneNo)&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(NE,{className:"w-4 h-4 mr-2 text-blue-500"}),t.organizationPhoneNo]}),e.jsx("div",{className:"flex items-center justify-end pt-3 border-t border-blue-100",children:e.jsx(L,{variant:"outline",size:"sm",onClick:()=>r(`/organizations/${t._id}`),className:"border-blue-200 text-blue-600 hover:bg-blue-50",children:"View Details"})})]})})]})}const Ls=({className:t="",error:a,...r})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("textarea",{className:d,...r}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},zy=({open:t,onOpenChange:a,children:r})=>{const l=A.useRef(null);return A.useEffect(()=>{const o=m=>{m.key==="Escape"&&a(!1)},d=m=>{l.current&&!l.current.contains(m.target)&&a(!1)};return t&&(document.addEventListener("keydown",o),document.addEventListener("mousedown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.removeEventListener("mousedown",d),document.body.style.overflow="unset"}},[t,a]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{ref:l,className:"relative z-50 w-full max-w-lg mx-4",children:r})]}):null},EE=({className:t="",children:a})=>e.jsx("div",{className:`bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto ${t}`,children:a}),AE=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-4 ${t}`,children:a}),OE=({className:t="",children:a})=>e.jsx("h2",{className:`text-xl font-semibold text-gray-900 ${t}`,children:a});function RE({isOpen:t,onClose:a}){const[r,l]=A.useState({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),o=Ik(),d=async x=>{var h,p;if(x.preventDefault(),!r.organizationName.trim()){_({title:"Error",description:"Organization name is required",variant:"destructive"});return}try{await o.mutateAsync(r),_({title:"Success",description:"Organization created successfully"}),l({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),a()}catch(g){_({title:"Error",description:((p=(h=g==null?void 0:g.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to create organization",variant:"destructive"})}},m=x=>{l(h=>({...h,[x.target.name]:x.target.value}))};return e.jsx(zy,{open:t,onOpenChange:a,children:e.jsxs(EE,{className:"sm:max-w-md p-4",children:[e.jsx(AE,{children:e.jsx(OE,{className:"text-blue-900",children:"Create New Organization"})}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"organizationName",className:"text-blue-800",children:"Organization Name *"}),e.jsx(de,{id:"organizationName",name:"organizationName",value:r.organizationName,onChange:m,placeholder:"Enter organization name",className:"border-blue-200 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"type",className:"text-blue-800",children:"Type"}),e.jsx(de,{id:"type",name:"type",value:r.type,onChange:m,placeholder:"e.g., Company, NGO, Startup",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"organizationPhoneNo",className:"text-blue-800",children:"Phone Number"}),e.jsx(de,{id:"organizationPhoneNo",name:"organizationPhoneNo",value:r.organizationPhoneNo,onChange:m,placeholder:"Enter phone number",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"address",className:"text-blue-800",children:"Address"}),e.jsx(Ls,{id:"address",name:"address",value:r.address,onChange:m,placeholder:"Enter organization address",className:"border-blue-200 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"logoUrl",className:"text-blue-800",children:"Logo URL"}),e.jsx(de,{id:"logoUrl",name:"logoUrl",value:r.logoUrl,onChange:m,placeholder:"Enter logo URL",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(L,{type:"button",variant:"outline",onClick:a,className:"border-blue-200 text-blue-600",children:"Cancel"}),e.jsx(L,{type:"submit",disabled:o.isPending,className:"bg-blue-600 hover:bg-blue-700",children:o.isPending?"Creating...":"Create Organization"})]})]})]})})}const Fe=({className:t=""})=>e.jsx("div",{className:`animate-pulse rounded-md bg-gray-200 ${t}`});function TE(){var E,b;const[t,a]=A.useState(!1),[r,l]=A.useState(!1),[o,d]=A.useState(window.innerWidth<470),m=Me();let{data:x,isLoading:h,error:p,refetch:g}=Uk();const y={ADMIN:"/login",STAFF:"/login/staff",CTO:"/login/cto",WORKER:"/login/worker",CLIENT:"/login/client"},j=()=>{l(!0)};return A.useEffect(()=>{const k=()=>{d(window.innerWidth<470)};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),h?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(Fe,{className:"h-8 w-48 mb-2"}),e.jsx(Fe,{className:"h-4 w-64"})]}),e.jsx(Fe,{className:"h-10 w-40"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(k=>e.jsx(Fe,{className:"h-24 w-full rounded-2xl"},k))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6].map(k=>e.jsx(Fe,{className:"h-64 w-full rounded-2xl"},k))})]})]}):p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Organizations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:((b=(E=p==null?void 0:p.response)==null?void 0:E.data)==null?void 0:b.message)||(p==null?void 0:p.message)||"Something happened try again please"}),e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[e.jsxs(L,{onClick:()=>g(),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]}),e.jsxs(L,{onClick:()=>m("/login/staff"),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Login"]})]})]})}):e.jsxs("main",{className:"w-screen h-screen flex flex:1",children:[o?e.jsx(ki,{labels:lc,path:y,isOpen:r,onClose:()=>l(!1)}):e.jsx(Ci,{path:y,labels:lc,icons:Sb}),e.jsxs("section",{className:"w-full h-full",children:[e.jsx("div",{className:"max-w-full min-h-[10%] bg-white/90 backdrop-blur-sm border-b border-blue-200",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 py-3",children:e.jsxs("div",{className:"flex  sm:flex-row items-center sm:items-center justify-between gap-3 sm:gap-6",children:[e.jsxs("div",{className:"flex flex:1 items-center",children:[o&&e.jsx("button",{onClick:j,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"flex flex-col gap-1 w-[50vw]",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-blue-800",children:[e.jsx("i",{className:"fas fa-building mr-2 text-blue-600"}),"Organization"]}),e.jsx("p",{className:"text-sm sm:inline hidden text-blue-500",children:"Manage your organization and teams"})]})]}),!x&&e.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3 sm:gap-4 w-full sm:w-auto",children:e.jsxs(L,{onClick:()=>a(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Organization"}),e.jsx("span",{className:"inline sm:hidden",children:"Create"})]})})]})})}),e.jsx("div",{className:" min-h-[calc(100vh-10%)] sm:min-h-[calc(100vh-11%)] bg-gradient-to-br from-blue-50 via-white to-blue-100",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 py-6 relative",children:[x?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Your Organization"})}),e.jsx("div",{className:" xl:!w-[30%] lg:w-[50%] sm:w-[60%] w-[100%]",children:e.jsx(kE,{organization:x})})]}):e.jsx("div",{className:"text-center py-16 overflow-y-auto max-h-[90%]",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-4xl"})}),e.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:"No Organizations Yet"}),e.jsx("p",{className:"text-blue-600 mb-6 text-sm sm:text-base",children:"Create your first organization to start managing your teams and projects effectively"}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-6 text-left",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-4 text-center",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Getting Started"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Create your organization with basic details"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Invite team members to join your organization"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Start managing tasks and projects together"})]})]})]}),e.jsxs(L,{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Create Your First Organization"]})]})}),e.jsx(RE,{isOpen:t,onClose:()=>a(!1)})]})})]})]})}const PE=async(t,a,r)=>(await r.get(`/getusers/${t}/${a}`)).data.data,di=(t,a)=>{const{role:r}=Z(),l=J(r),o=["owner","staff","CTO"];return qe({queryKey:["get-users",t,a],queryFn:async()=>{if(!r||!o.includes(r))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return await PE(t,a,l)},retry:!1,refetchOnMount:!1})},Xo=({title:t,icon:a,list:r,isLoading:l})=>{const[o,d]=A.useState(""),m=A.useMemo(()=>r!=null&&r.length?r==null?void 0:r.filter(x=>{var h,p;return((h=x.name)==null?void 0:h.toLowerCase().includes(o.toLowerCase()))||((p=x.email)==null?void 0:p.toLowerCase().includes(o.toLowerCase()))}):[],[r,o]);return e.jsxs("div",{className:"bg-white border rounded-xl !min-h-[50%] !max-h-[93%] overflow-hidden border-blue-100 shadow-sm px-4 py-5 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-blue-800 font-semibold flex items-center gap-2 text-base",children:[e.jsx("i",{className:`fas ${a} text-blue-600 text-lg`}),t]}),r&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs font-medium px-2 py-0.5 rounded-full",children:[r==null?void 0:r.length," total"]})]}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search name or email",value:o,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 border border-blue-200 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-400"})}),e.jsx("div",{className:"max-h-[100%] overflow-y-auto custom-scrollbar pr-1 scroll-smooth scrollbar-thin scrollbar-thumb-blue-300 hover:scrollbar-thumb-blue-400 scrollbar-track-blue-100",children:l?e.jsx(Fe,{className:"h-4 w-1/2 mx-2 mb-2"}):(m==null?void 0:m.length)>0?e.jsx("ul",{className:"space-y-3 pt-1",children:m==null?void 0:m.map(x=>e.jsxs("li",{className:"flex items-start gap-3 px-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mt-0.5",children:e.jsx("i",{className:"fas fa-user"})}),e.jsxs("div",{className:"text-sm text-gray-700 leading-tight",children:[e.jsx("p",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:x.email})]})]},x._id))}):e.jsxs("p",{className:"text-sm text-gray-500 text-center py-6",children:["No ",t.toLowerCase()," found."]})})]})};function ME(){const{organizationId:t}=Re(),{openMobileSidebar:a,isMobile:r}=We(),l=Me(),[o,d]=A.useState(!1),[m,x]=A.useState(""),[h,p]=A.useState(!1),[g,y]=A.useState(!1),[j,E]=A.useState(""),[b,k]=A.useState("");let{data:w,isLoading:C,error:v}=$k(t);Array.isArray(w)&&(w=w[0]);const N=Bk(),{data:T,isLoading:P}=di(t,"staff"),{data:D,isLoading:$}=di(t,"CTO"),{data:q,isLoading:H}=di(t,"worker"),{data:he,isLoading:K}=di(t,"client"),B=async()=>{if(!m.trim()){_({title:"Error",description:"Organization name cannot be empty",variant:"destructive"});return}try{await N.mutateAsync({updateField:{organizationName:m},orgsId:t}),_({title:"Success",description:"Organization name updated successfully"}),d(!1)}catch(z){_({title:"Error",description:z.message||"Failed to update organization name",variant:"destructive"})}},te=()=>{x((w==null?void 0:w.organizationName)||""),d(!0)},V=()=>{x(""),d(!1)},oe=()=>{E((w==null?void 0:w.organizationPhoneNo)||""),p(!0)},F=()=>{k((w==null?void 0:w.address)||""),y(!0)},W=async()=>{var z,M;if(!j.trim()){_({title:"Error",description:"Phone number cannot be empty",variant:"destructive"});return}if(!/^\d{10}$/.test(j)){_({title:"Error",description:"Phone number should contain 10 digits number",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{organizationPhoneNo:j}}),_({title:"Success",description:"Phone number updated successfully"}),p(!1)}catch(G){_({title:"Error",description:((M=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:M.message)||(G==null?void 0:G.message)||"Failed to update phone number",variant:"destructive"})}},ue=async()=>{var z,M;if(!b.trim()){_({title:"Error",description:"Address cannot be empty",variant:"destructive"});return}if(b.length>150){_({title:"Error",description:"Address cannot be more than 150 characters",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{address:b}}),_({title:"Success",description:"Address updated successfully"}),y(!1)}catch(G){_({title:"Error",description:((M=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:M.message)||(G==null?void 0:G.message)||"Failed to update address",variant:"destructive"})}},re=()=>{E(""),p(!1)},R=()=>{k(""),y(!1)};return C?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(Fe,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(Fe,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(Fe,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(Fe,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(Fe,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Fe,{className:"h-96 w-full rounded-2xl"})})]})})]}):v||!w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(L,{onClick:()=>l("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsx("div",{className:"flex w-full h-full ",children:e.jsxs("div",{className:"min-h-full w-full max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white bg-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10 w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-3 flex flex-row sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-6",children:e.jsxs("div",{className:"flex flex-row sm:items-center justify-between  w-full gap-3 sm:gap-4",children:[r?e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}):e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>l("/organizations"),className:"text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Back to Organizations"}),e.jsx("span",{className:"md:hidden",children:"Back"})]}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:w!=null&&w.logoUrl?e.jsx("img",{src:(w==null?void 0:w.logoUrl)||bt.COMPANY_LOGO,alt:w==null?void 0:w.organizationName,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"}):e.jsx("img",{src:bt.COMPANY_LOGO,alt:"Company Logo",className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"})}),e.jsx("div",{className:"min-w-0 flex-1 ",children:o?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx(de,{value:m,onChange:z=>x(z.target.value),onKeyPress:z=>z.key==="Enter"&&B(),placeholder:"Organization name",className:"w-full text-lg sm:text-xl font-bold border-2 border-blue-300 focus:border-blue-500 rounded-xl bg-white/90 backdrop-blur-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{size:"sm",variant:"primary",onClick:B,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:V,className:"border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-blue-900 truncate",children:(w==null?void 0:w.organizationName)||"N/A"}),(w==null?void 0:w.type)&&e.jsx(sl,{className:"mt-1 bg-blue-100 text-blue-700 text-xs",children:w==null?void 0:w.type})]})})]}),!o&&e.jsx("div",{className:"flex justify-end sm:justify-start  w-fit flex-shrink-0",children:e.jsxs(L,{variant:"outline",onClick:te,className:"border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl bg-white/80 backdrop-blur-sm",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Name"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})})]})})}),e.jsx("div",{className:"max-w-full mx-auto p-4 sm:p-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm h-fit",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx(de,{value:j,type:"tel",onChange:z=>E(z.target.value),placeholder:"Enter phone number",className:"text-sm border-blue-200 focus:border-blue-500 bg-white flex-1",onKeyPress:z=>z.key==="Enter"&&W()})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:re,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(L,{size:"sm",variant:"primary",onClick:W,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:(w==null?void 0:w.organizationPhoneNo)||"N/A"})]}),e.jsx(L,{size:"sm",variant:"ghost",onClick:oe,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm ",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:b,onChange:z=>k(z.target.value),placeholder:"Enter address",className:"w-full text-sm border-2 border-blue-200 focus:border-blue-500 bg-white rounded-lg p-2 resize-none focus:outline-none",rows:3,onKeyDown:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),ue())}}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-600",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-[13px]"}),e.jsx("span",{className:"text-[12px] sm:text-sm",children:"Press Shift + Enter for next line"})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:R,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(L,{size:"sm",variant:"primary",onClick:ue,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-start gap-3  w-full",children:[e.jsxs("div",{className:"flex items-start gap-3 ",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsx("div",{className:"max-w-[90%] overflow-h-auto !max-h-[150px] ",children:e.jsx("span",{className:"text-gray-700 text-sm sm:text-base break-words whitespace-pre-wrap",children:(w==null?void 0:w.address)||"N/A"})})]}),e.jsx(L,{size:"sm",variant:"ghost",onClick:F,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto flex-shrink-0",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})})]})})})}),e.jsxs("div",{className:"px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-3  sm:min-h-[65vh] sm:max-h-[100%]",children:[e.jsx(Xo,{title:"Staffs",icon:"fa-user-tie",list:T,isLoading:P}),e.jsx(Xo,{title:"CTOs",icon:"fa-user-cog",list:D,isLoading:$}),e.jsx(Xo,{title:"Workers",icon:"fa-user-hard-hat",list:q,isLoading:H}),e.jsx(Xo,{title:"Clients",icon:"fa-user-friends",list:he,isLoading:K})]})]})})}function LE(){const t=Me(),[a]=Ac(),r=a.get("invite"),[l,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",staffName:""}),[d,m]=A.useState(!1),[x,h]=A.useState(!1),[p,g]=A.useState({}),y=W1(),j=ys();A.useEffect(()=>{r||(_({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[r,t]);const E=()=>{const w={};return l.staffName.trim()?l.staffName.trim().length<2&&(w.staffName="Name must be at least 2 characters"):w.staffName="Full name is required",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(w.email="Please enter a valid email address"):w.email="Email is required",l.phoneNo.trim()?/^\d{10}$/.test(l.phoneNo.trim())||(w.phoneNo="Please enter a valid phone number"):w.phoneNo="Phone number is required",l.password.trim()?l.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",l.confirmPassword.trim()?l.password!==l.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",g(w),Object.keys(w).length===0},b=w=>{const{name:C,value:v}=w.target;o(N=>({...N,[C]:v})),p[C]&&g(N=>({...N,[C]:""}))},k=async w=>{if(w.preventDefault(),!r){_({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(E())try{const C=await y.mutateAsync({invite:r,email:l.email,password:l.password,phoneNo:l.phoneNo,staffName:l.staffName});_({title:"Success",description:"Registration successful! You can now login with your credentials."});const v=C.data;j(Lt({_id:v._id,role:v.role,isauthenticated:!0})),j(Uc({staffId:v._id,staffName:v.staffName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),setTimeout(()=>{t("/")},2e3)}catch(C){_({title:"Registration Failed",description:C.message||"Failed to register. Please try again.",variant:"destructive"})}};return r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(L,{variant:"primary",onClick:()=>t(-1),className:"!absolute z-[10] top-[5%]  right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-plus text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as staff member"})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"staffName",name:"staffName",type:"text",value:l.staffName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${p.staffName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.staffName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:l.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${p.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:l.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${p.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:d?"text":"password",value:l.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:l.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${l.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${l.password===l.confirmPassword&&l.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/stafflogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Gt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function q0(){const t=Me(),[a,r]=A.useState({email:"",password:""}),[l,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:x,openMobileSidebar:h}=We(),p=ys(),g=V1(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",m(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;r(C=>({...C,[k]:w})),d[k]&&m(C=>({...C,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const v=(await g.mutateAsync(a)).data;p(Lt({_id:v.staffId,role:v.role,isauthenticated:!0})),p(Uc({staffId:v.staffId,staffName:v.staffName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),_({title:"Success",description:"Registration successful"}),t("/organizations")}catch(C){_({title:"Login Failed",description:((w=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:x&&e.jsx("button",{onClick:h,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Staff Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:l?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!l),children:e.jsx("i",{className:`fas ${l?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}const Hc=({className:t="",children:a})=>e.jsx("div",{className:`relative inline-block rounded-full overflow-hidden ${t}`,children:a}),Uy=({className:t="",...a})=>e.jsx("img",{className:`h-full w-full object-cover ${t}`,...a}),Qc=({className:t="",children:a})=>e.jsx("div",{className:`flex h-full w-full items-center justify-center bg-blue-100 text-blue-800 ${t}`,children:a});function z0(){const{projectId:t,organizationId:a}=Re(),{openMobileSidebar:r,isMobile:l}=We(),[o,d]=A.useState(""),[m,x]=A.useState(!1),{data:h,isLoading:p}=uE(t||""),g=dE(),y=mE(),j=async()=>{var v,N;try{const T=await g.mutateAsync({projectId:t||"",role:"worker",organizationId:a});d((T==null?void 0:T.inviteLink)||T),_({title:"Success",description:"Worker invitation link generated successfully"})}catch(T){_({title:"Error",description:((N=(v=T==null?void 0:T.response)==null?void 0:v.data)==null?void 0:N.message)||(T==null?void 0:T.message)||"Failed to generate invitation link",variant:"destructive"})}},E=async()=>{try{await navigator.clipboard.writeText(o),x(!0),_({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{_({title:"Error",description:"Failed to copy link",variant:"destructive"})}},b=()=>{const v=`You're invited to work with us Click this link to join: ${o}`,N=`https://wa.me/?text=${encodeURIComponent(v)}`;window.open(N,"_blank")},k=async(v,N)=>{if(window.confirm(`Are you sure you want to remove ${N} from this project?`))try{await y.mutateAsync({workerId:v,projectId:t||""}),_({title:"Success",description:`${N} has been removed from the project`})}catch(T){_({title:"Error",description:T.message||"Failed to remove worker",variant:"destructive"})}},w=v=>v?v.split(" ").map(N=>N[0]).join("").toUpperCase():"WK",C=v=>({carpenter:"bg-amber-100 text-amber-800 border-amber-200",plumber:"bg-blue-100 text-blue-800 border-blue-200",electrician:"bg-yellow-100 text-yellow-800 border-yellow-200",painter:"bg-green-100 text-green-800 border-green-200",mason:"bg-gray-100 text-gray-800 border-gray-200",welder:"bg-red-100 text-red-800 border-red-200"})[v.toLowerCase()]||"bg-purple-100 text-purple-800 border-purple-200";return e.jsxs("div",{className:"max-h-full sm:overflow-y-hidden custom-scrollbar",children:[e.jsx("div",{className:"bg-white ",children:e.jsx("div",{className:"max-w-full mx-auto  py-2",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Workers"]})})})]})})})}),e.jsx("div",{className:"max-w-full !max-h-[100%] overflow-y-auto custom-scrollbar mx-auto p-2",children:e.jsxs("div",{className:"grid grid-cols-1 max-h-full lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-1 h-fit space-y-6",children:e.jsxs(Pe,{className:"bg-white backdrop-blur-sm rounded-2xl shadow-md border-l-4 border-green-600 ",children:[e.jsx(bs,{children:e.jsxs(Ps,{className:"text-gray-800 flex items-center text-lg",children:[e.jsx("i",{className:"fas fa-user-plus mr-2 text-green-600"}),"Invite Workers"]})}),e.jsx(Gt,{className:"space-y-4",children:o?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{className:"text-gray-700 font-medium",children:"Invitation Link"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(de,{value:o,readOnly:!0,className:"border-green-200 bg-green-50 text-sm flex-1 min-w-0"}),e.jsx(L,{onClick:E,variant:"outline",size:"icon",className:"border-green-200 text-green-600 hover:bg-green-50 rounded-xl flex-shrink-0",children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(L,{onClick:E,variant:"outline",className:"w-full border-green-200 text-green-600 hover:bg-green-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-copy mr-2"}),"Copy Link"]}),e.jsxs(L,{onClick:b,className:"w-full bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"}),"Share on WhatsApp"]}),e.jsxs(L,{onClick:()=>{d("")},variant:"outline",className:"w-full border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Generate Another"]})]})]}):e.jsxs(L,{onClick:j,isLoading:g.isPending,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-link mr-2"}),g.isPending?"Generating...":"Generate Invitation Link"]})})]})}),e.jsx("div",{className:"lg:col-span-2 sm:max-h-[43%] rounded-2xl border-l-4 border-orange-600  overflow-y-auto shadow-md custom-scrollbar",children:e.jsxs(Pe,{className:"bg-white/70 backdrop-blur-sm border-0  shadow-xl",children:[e.jsx(bs,{children:e.jsx(Ps,{className:"text-gray-800 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-hard-hat mr-2 text-orange-600"}),e.jsxs("span",{className:"text-lg",children:["Project Workers (",(h==null?void 0:h.length)||0,")"]})]})})}),e.jsx(Gt,{children:p?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-blue-100 rounded-xl",children:[e.jsx(Fe,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Fe,{className:"h-4 w-32"}),e.jsx(Fe,{className:"h-3 w-48"})]}),e.jsx(Fe,{className:"h-8 w-20"})]},v))}):h&&h.length>0?e.jsx("div",{className:"space-y-4",children:h.map(v=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border border-blue-100 rounded-xl hover:bg-blue-50/50 transition-all duration-200 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[e.jsx(Hc,{className:"w-12 h-12 border-2 border-blue-200 flex-shrink-0",children:e.jsx(Qc,{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white font-semibold",children:w(v==null?void 0:v.workerName)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 truncate",children:(v==null?void 0:v.workerName)||(v==null?void 0:v.name)}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-gray-600 gap-1 sm:gap-0",children:[v.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-envelope text-xs"}),e.jsx("span",{className:"truncate",children:v.email})]}),v.phoneNo&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-phone text-xs"}),e.jsx("span",{children:v.phoneNo})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs(sl,{className:`text-xs ${C((v==null?void 0:v.specifiedRole)||(v==null?void 0:v.role)||"worker")}`,children:[e.jsx("i",{className:"fas fa-tools mr-1"}),(v==null?void 0:v.specifiedRole)||(v==null?void 0:v.role)||"Worker"]})})]})]}),e.jsxs(L,{onClick:()=>k(v._id,(v==null?void 0:v.workerName)||(v==null?void 0:v.name)),variant:"danger",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50 rounded-xl w-full sm:w-auto",isLoading:y.isPending,children:[e.jsx("i",{className:"fas fa-user-minus mr-1"}),"Remove"]})]},v._id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-hard-hat text-orange-500 text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Workers Assigned"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm sm:text-base",children:"Start building your team by inviting skilled workers to this project"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6"}),e.jsxs(L,{onClick:()=>{j()},className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Invite First Worker"]})]})})]})})]})})]})}function _E(){const t=Me(),[a]=Ac(),r=a.get("invite"),l=ys(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",workerName:""}),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState(null),b=ck();A.useEffect(()=>{if(!r){_({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3);return}try{const v=JSON.parse(atob(r));E(v)}catch{_({title:"Invalid Invitation",description:"The invitation link is corrupted or invalid.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3)}},[r,t]);const k=()=>{const v={};return o.workerName.trim()?o.workerName.trim().length<2&&(v.workerName="workerName must be at least 2 characters"):v.workerName="workerName is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(v.email="Please enter a valid email address"):v.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(v.phoneNo="Please enter a valid phone number"):v.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(v.password="Password must be at least 6 characters"):v.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(v.confirmPassword="Passwords do not match"):v.confirmPassword="Please confirm your password",y(v),Object.keys(v).length===0},w=v=>{const{name:N,value:T}=v.target;d(P=>({...P,[N]:T})),g[N]&&y(P=>({...P,[N]:""}))},C=async v=>{var N,T;try{if(v.preventDefault(),!r){_({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(!k())return;const P=await b.mutateAsync({invite:r,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,workerName:o.workerName}}),D=P==null?void 0:P.data;l(Lt({role:D==null?void 0:D.role,isauthenticated:!0,_id:D==null?void 0:D._id})),l($c({workerId:D==null?void 0:D._id,workerName:D==null?void 0:D.workerName,email:D==null?void 0:D.email,phoneNo:D==null?void 0:D.phoneNo,role:D==null?void 0:D.role,isauthenticated:!0})),_({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(P){_({title:"Registration Failed",description:((T=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:T.message)||"Failed to register. Please try again.",variant:"destructive"})}};return r?e.jsxs("div",{className:"min-h-full bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:[e.jsx(L,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full max-w-lg",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-800 bg-clip-text text-transparent",children:"Join as Worker"}),e.jsxs(aa,{className:"text-blue-700 text-base",children:[(j==null?void 0:j.specifiedRole)&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mb-2",children:["Role: ",j.specifiedRole]}),e.jsx("br",{}),"Complete your registration to join the project"]})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"workerName",className:"text-blue-800 font-medium",children:"workerName *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"workerName",name:"workerName",type:"text",value:o.workerName,onChange:w,placeholder:"Enter your workerName",className:`pl-10 border-2 transition-all duration-200 ${g.workerName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.workerName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:o.email,onChange:w,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:w,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:w,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",value:o.confirmPassword,onChange:w,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-green-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-green-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:b.isPending,children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/workerlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Gt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function U0(){const t=Me(),[a,r]=A.useState({email:"",password:""}),l=ys(),{isMobile:o,openMobileSidebar:d}=We(),[m,x]=A.useState(!1),[h,p]=A.useState({}),g=ok(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",p(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;r(C=>({...C,[k]:w})),h[k]&&p(C=>({...C,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const C=await g.mutateAsync(a),v=C==null?void 0:C.data;l(Lt({role:v.role,isauthenticated:!0,_id:v._id})),l($c({workerId:v._id,workerName:v.workerName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),t("/organizations"),_({title:"Success",description:"Login successfull"})}catch(C){_({title:"Login Failed",description:((w=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:o&&e.jsx("button",{onClick:d,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Worker Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your projects and tasks"})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${h.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:m?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your project manager for an invitation"})]})})]})]})})]})}const $y=()=>{const t=ys(),[a,r]=A.useState(!0),[l,o]=A.useState(null),[d,m]=A.useState({role:null,isauthenticated:!1,_id:null});return A.useEffect(()=>{(async()=>{r(!0),o(null);try{const[h,p,g,y,j]=await Promise.allSettled([Is.get("/auth/isauthenticated"),sa.get("/auth/staff/isauthenticated"),hn.get("/auth/worker/isauthenticated"),fn.get("/auth/CTO/isauthenticated"),Aa.get("/auth/client/isauthenticated")]);if(h.status==="fulfilled"&&h.value.data.ok){const E={role:"owner",isauthenticated:!0,_id:h.value.data.data.userId};return t(Lt(E)),t(pc(h.value.data.data)),m({...E,_id:h.value.data.data.userId}),r(!1)}if(p.status==="fulfilled"&&p.value.data.ok){const E={role:"staff",isauthenticated:!0,_id:p.value.data.data.staffId};return t(Lt(E)),t(Uc(p.value.data.data)),m({...E,_id:p.value.data.data.staffId}),r(!1)}if(g.status==="fulfilled"&&g.value.data.ok){const E={role:"worker",isauthenticated:!0,_id:g.value.data.data.workerId};return t(Lt(E)),t($c(g.value.data.data)),m({...E,_id:g.value.data.data.workerId}),r(!1)}if(y.status==="fulfilled"&&y.value.data.ok){const E={role:"CTO",isauthenticated:!0,_id:y.value.data.data.CTOId};return t(Lt(E)),t(Ic(y.value.data.data)),m({...E,_id:y.value.data.data.CTOId}),r(!1)}if(j.status==="fulfilled"&&j.value.data.ok){const E={role:"client",isauthenticated:!0,_id:j.value.data.data.clientId};return t(Lt(E)),t(Bc(j.value.data.data)),m({...E,_id:j.value.data.data.clientId}),r(!1)}t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),t(gc()),t(bc()),t(yc()),t(vc()),t(jc()),t(wc()),r(!1)}catch{t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),o("Something went wrong while checking authentication."),t(gc()),t(bc()),t(yc()),t(vc()),t(jc()),t(wc()),r(!1)}})()},[]),{loading:a,error:l,...d}},Iy=()=>{const t=Me(),a=()=>{t(-1)};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 bg-gray-100 text-center",children:e.jsx("div",{className:"w-full max-w-md p-6 md:p-8 bg-white rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation text-red-500 text-6xl md:text-7xl"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 text-base md:text-lg",children:"Sorry, you don't have permission to view this page."}),e.jsx("button",{onClick:a,className:"mt-4 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-full transition",children:"Go Back"})]})})})},Le=({allowedRoles:t,children:a})=>{const{loading:r,error:l,role:o,isauthenticated:d}=$y(),m=yt();return!d&&r===!1?e.jsx(zm,{to:`${o==="owner"||o===null?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):r||o===void 0||o===null?e.jsx("div",{className:"p-6 text-center",children:" Loading..."}):t.includes(o)?l||!d?e.jsx(zm,{to:`${o==="owner"?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):e.jsx(e.Fragment,{children:a}):e.jsx(Iy,{})},FE=()=>{const{organizationId:t}=Re(),{openMobileSidebar:a,isMobile:r}=We(),l=Me(),[o,d]=A.useState(""),[m,x]=A.useState(!1),{data:h,isLoading:p,error:g,isError:y}=Vk(t),j=Wk(),E=Yk(),b=async(N,T)=>{if(window.confirm(`Are you sure you want to remove ${T} from this organization?`))try{await j.mutateAsync({staffId:N,orgId:t}),_({title:"Success",description:`${T} has been removed from the organization`})}catch(P){_({title:"Error",description:P.message||"Failed to remove staff member",variant:"destructive"})}},k=async()=>{try{const N=await E.mutateAsync({organizationId:t,role:"staff"});d(N.inviteLink||N),_({title:"Success",description:"Invitation link generated successfully"})}catch(N){_({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},w=async()=>{try{await navigator.clipboard.writeText(o),x(!0),_({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{_({title:"Error",description:"Failed to copy link",variant:"destructive"})}},C=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,T=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(T,"_blank")},v=N=>N.split(" ").map(T=>T[0]).join("").toUpperCase();return p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(Fe,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(Fe,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(Fe,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(Fe,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(Fe,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Fe,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||y||!h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(L,{onClick:()=>l("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 lg:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"Staff Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),h==null?void 0:h.length," ",(h==null?void 0:h.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh] h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite Staffs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite Staffs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(L,{onClick:w,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{onClick:C,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(L,{onClick:w,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(L,{onClick:k,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(L,{onClick:k,isLoading:E.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full  !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2 rounded-2xl shadow-lg overflow-y-auto max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Staff Members (",h==null?void 0:h.length,")"]}),h.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No Staffs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:h==null?void 0:h.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Hc,{className:"w-12 h-12",children:[e.jsx(Uy,{src:N.avatarUrl||bt.COMPANY_LOGO}),e.jsx(Qc,{className:"bg-blue-600 text-white",children:v(N.staffName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N==null?void 0:N.staffName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(sl,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsxs(L,{variant:"danger",onClick:()=>b(N._id,N.staffName),isLoading:E.isPending,className:"text-white bg-red-600 border border-red-200 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-user-minus mr-1"})," Remove"]})]},N._id))})]})]})]})},DE=()=>{const{organizationId:t}=Re(),a=Me(),{openMobileSidebar:r,isMobile:l}=We(),[o,d]=A.useState(""),[m,x]=A.useState(!1),{data:h,isLoading:p,error:g,isError:y}=eE(t),j=sE(),E=tE(),b=async(N,T)=>{if(window.confirm(`Are you sure you want to remove ${T} from this organization?`))try{await j.mutateAsync({CTOId:N,orgId:t}),_({title:"Success",description:`${T} has been removed from the organization`})}catch(P){_({title:"Error",description:P.message||"Failed to remove CTO member",variant:"destructive"})}},k=async()=>{try{const N=await E.mutateAsync({organizationId:t,role:"CTO"});d(N.inviteLink||N),_({title:"Success",description:"Invitation link generated successfully"})}catch(N){_({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},w=async()=>{try{await navigator.clipboard.writeText(o),x(!0),_({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{_({title:"Error",description:"Failed to copy link",variant:"destructive"})}},C=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,T=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(T,"_blank")},v=N=>N.split(" ").map(T=>T[0]).join("").toUpperCase();return p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(Fe,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(Fe,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(Fe,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(Fe,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(Fe,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Fe,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||y||!h?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-white",children:e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-md w-full max-w-md",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-building text-blue-600 text-xl"})}),e.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You either do not have access or the organization does not exist."}),e.jsxs(L,{onClick:()=>a("/organizations"),className:"bg-blue-600 text-white w-full",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto  min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"CTO Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user-tie text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),h==null?void 0:h.length," ",(h==null?void 0:h.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh]  h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite CTOs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite CTOs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(L,{onClick:w,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{onClick:C,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(L,{onClick:w,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(L,{onClick:k,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(L,{onClick:k,isLoading:E.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2  rounded-2xl shadow-lg overflow-y-auto  max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," CTO Members (",h.length,")"]}),h.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No CTOs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:h.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Hc,{className:"w-12 h-12",children:[e.jsx(Uy,{src:N.avatarUrl||bt.COMPANY_LOGO}),e.jsx(Qc,{className:"bg-blue-600 text-white",children:v(N.CTOName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N.CTOName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(sl,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsx(L,{onClick:()=>b(N._id,N.CTOName),isLoading:j.isPending,variant:"danger",className:" text-white bg-red-600 border border-red-200 hover:bg-red-700",children:e.jsx("i",{className:"fas fa-trash-can mr-1 text-white"})})]},N._id))})]})]})]})},qE=()=>{const{organizationId:t}=Re(),[a,r]=A.useState(!1),[l,o]=A.useState(window.innerWidth<470),d={PROJECTS:`/organizations/${t}/projects`,DETAILS:`/organizations/${t}`,INVITECTO:`/organizations/${t}/invitecto`,INVITESTAFFS:`/organizations/${t}/invitestaff`,PLAN:`/organizations/${t}/subscriptionplan`,PROFILE:`/organizations/${t}/userprofile`};return A.useEffect(()=>{const m=()=>{o(window.innerWidth<470)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[l?e.jsx(ki,{labels:Gg,path:d,isOpen:a,onClose:()=>r(!1)}):e.jsx(Ci,{path:d,labels:Gg,icons:E2}),e.jsx("main",{className:"!w-[100%] h-full",children:e.jsx(Vt,{context:{isMobile:l,isMobileSidebarOpen:a,openMobileSidebar:()=>r(!0),closeMobileSidebar:()=>r(!1)}})})]})};function zE(){const t=Me(),[a]=Ac(),r=a.get("invite"),[l,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",CTOName:""}),[d,m]=A.useState(!1),[x,h]=A.useState(!1),[p,g]=A.useState({}),y=z1(),j=ys();A.useEffect(()=>{r||(_({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[r,t]);const E=()=>{const w={};return l.CTOName.trim()?l.CTOName.trim().length<2&&(w.CTOName="Name must be at least 2 characters"):w.CTOName="Full name is required",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(w.email="Please enter a valid email address"):w.email="Email is required",l.phoneNo.trim()?/^\d{10}$/.test(l.phoneNo.trim())||(w.phoneNo="Please enter a valid phone number"):w.phoneNo="Phone number is required",l.password.trim()?l.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",l.confirmPassword.trim()?l.password!==l.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",g(w),Object.keys(w).length===0},b=w=>{const{name:C,value:v}=w.target;o(N=>({...N,[C]:v})),p[C]&&g(N=>({...N,[C]:""}))},k=async w=>{var C,v;if(w.preventDefault(),!r){_({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(E())try{const T=(await y.mutateAsync({invite:r,email:l.email,password:l.password,phoneNo:l.phoneNo,CTOName:l.CTOName})).data;j(Lt({role:T.role,isauthenticated:!0,_id:T._id})),j(Ic({CTOId:T._id,CTOName:T.CTOName,email:T.email,phoneNo:T.phoneNo,role:T.role,isauthenticated:!0})),_({title:"Success",description:"Registration successful"}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){_({title:"Registration Failed",description:((v=(C=N==null?void 0:N.response)==null?void 0:C.data)==null?void 0:v.message)||"Failed to register. Please try again.",variant:"destructive"})}};return r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(L,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as CTO"})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"CTOName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"CTOName",name:"CTOName",type:"text",value:l.CTOName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${p.CTOName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.CTOName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:l.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${p.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:l.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${p.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:d?"text":"password",value:l.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:l.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${l.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${l.password===l.confirmPassword&&l.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/ctologin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Gt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function $0(){const t=Me(),[a,r]=A.useState({email:"",password:""}),[l,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:x,openMobileSidebar:h}=We(),p=D1(),g=ys(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",m(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;r(C=>({...C,[k]:w})),d[k]&&m(C=>({...C,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const v=(await p.mutateAsync(a)).data;g(Lt({role:v.role,isauthenticated:!0,_id:v.CTOId})),g(Ic({CTOId:v.CTOId,CTOName:v.CTOName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),_({title:"Success",description:"Login successful! Welcome back."}),t("/")}catch(C){_({title:"Login Failed",description:((w=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:x&&e.jsx("button",{onClick:h,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Cheif Technical Officer Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:l?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!l),children:e.jsx("i",{className:`fas ${l?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:p.isPending,children:p.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}function I0(){const t=Me(),[a,r]=A.useState({email:"",password:""}),l=ys(),[o,d]=A.useState(!1),[m,x]=A.useState({}),{isMobile:h,openMobileSidebar:p}=We(),g=B1(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",x(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;r(C=>({...C,[k]:w})),m[k]&&x(C=>({...C,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const v=(await g.mutateAsync(a)).data;l(Lt({role:v.role,isauthenticated:!0,_id:v.clientId})),l(Bc({clientId:v.clientId,clientName:v.clientName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),_({title:"Success",description:"Login successful! Welcome back."}),t("/organizations")}catch(C){_({title:"Login Failed",description:((w=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:h&&e.jsx("button",{onClick:p,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Client Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your project Dashboard"})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:o?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>d(!o),children:e.jsx("i",{className:`fas ${o?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your admin for an invitation"})]})})]})]})})]})}function UE(){const t=Me(),[a]=Ac(),r=a.get("invite"),l=ys(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",clientName:""}),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),j=Q1();A.useEffect(()=>{r||(_({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/organizations")},3e3))},[r,t]);const E=()=>{const w={};return o.clientName.trim()?o.clientName.trim().length<2&&(w.clientName="Name must be at least 2 characters"):w.clientName="Full name is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(w.email="Please enter a valid email address"):w.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(w.phoneNo="Please enter a valid phone number with 10 digits"):w.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",y(w),Object.keys(w).length===0},b=w=>{const{name:C,value:v}=w.target;d(N=>({...N,[C]:v})),g[C]&&y(N=>({...N,[C]:""}))},k=async w=>{var C,v;if(w.preventDefault(),!r){_({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(E())try{const T=(await j.mutateAsync({token:r,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,clientName:o.clientName}})).data;l(Lt({role:T.role,isauthenticated:!0,_id:T._id})),l(Bc({clientId:T._id,clientName:T.clientName,email:T.email,phoneNo:T.phoneNo,role:T.role,isauthenticated:!0})),_({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){_({title:"Registration Failed",description:((v=(C=N==null?void 0:N.response)==null?void 0:C.data)==null?void 0:v.message)||"Failed to register. Please try again.",variant:"destructive"})}};return r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(L,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as Client"})]}),e.jsxs(Gt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"clientName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"clientName",name:"clientName",type:"text",value:o.clientName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${g.clientName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.clientName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:o.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",value:o.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(L,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:j.isPending,children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/clientlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Pe,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Gt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}const _m=[{clientName:"Arun Kumar",email:"arun.kumar@example.com",phoneNo:"9876543210",projectId:"project123",ownerId:"ownerA"},{clientName:"Priya Raj",email:"priya.raj@example.com",phoneNo:"9876543211",projectId:"project123",ownerId:"ownerA"},{clientName:"Suresh",email:"arun.kumar@example.com",phoneNo:"9876543210",projectId:"project456",ownerId:"ownerA"},{clientName:"Meena",email:"meena@example.com",phoneNo:"9998887777",projectId:"project456",ownerId:"ownerA"},{clientName:"Priya Raj",email:"priya.raj@example.com",phoneNo:"9876543211",projectId:"project123",ownerId:"ownerA"},{clientName:"Suresh",email:"arun.kumar@example.com",phoneNo:"9876543210",projectId:"project456",ownerId:"ownerA"},{clientName:"Meena",email:"meena@example.com",phoneNo:"9998887777",projectId:"project456",ownerId:"ownerA"}],$E=()=>{const{projectId:t,organizationId:a}=Re(),[r,l]=A.useState(""),[o,d]=A.useState(!1),{openMobileSidebar:m,isMobile:x}=We(),h=nE(),{data:p,isLoading:g,isError:y}=lE(a,t),j=async()=>{var w,C;try{const v=await h.mutateAsync({projectId:t,organizationId:a});l(v.inviteLink||v),_({title:"Success",description:"Invitation link generated successfully"})}catch(v){_({title:"Error",description:((C=(w=v==null?void 0:v.response)==null?void 0:w.data)==null?void 0:C.message)||"Failed to generate invitation link",variant:"destructive"})}},E=async()=>{try{await navigator.clipboard.writeText(r),d(!0),_({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>d(!1),2e3)}catch{_({title:"Error",description:"Failed to copy link",variant:"destructive"})}},b=()=>{const w=`You're invited to join in the project! Click this link to register: ${r}`,C=`https://wa.me/?text=${encodeURIComponent(w)}`;window.open(C,"_blank")},k=w=>{var C,v;return(v=(C=w==null?void 0:w.split(" ").map(N=>N[0]))==null?void 0:C.join(""))==null?void 0:v.toUpperCase()};return e.jsxs("div",{className:"min-h-full min-w-full ",children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"max-w-full mx-auto",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[x&&e.jsx("button",{onClick:m,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block  w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Client"]})})})]})})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full ",children:[e.jsx("div",{className:"flex-1 border-l-4 border-blue-600  bg-white p-4 max-h-[45vh] overflow-y-auto rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-2 flex items-center",children:"Generate Client"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite a client by generating a link."}),r?e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{value:r,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(L,{onClick:E,children:e.jsx("i",{className:`fas ${o?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{onClick:b,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(L,{onClick:E,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(L,{onClick:j,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(L,{onClick:j,isLoading:h.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"flex-1 bg-white border-2 border-blue-200 p-6 rounded-2xl shadow-lg py-4 max-h-[70vh] sm:!max-h-[63vh] md:!max-h-[100vh]  lg:!max-h-[85vh] xl:!max-h-[90vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Clients (",(p==null?void 0:p.length)||0,")"]}),g?e.jsx("p",{className:"text-blue-700",children:"Loading clients..."}):y?e.jsx("p",{className:"text-red-600",children:"Failed to get clients."}):(p==null?void 0:p.length)===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No clients have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite them."})]}):e.jsx("div",{className:"space-y-4 h-[85%]",children:_m==null?void 0:_m.map(w=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Hc,{className:"w-12 h-12",children:e.jsx(Qc,{className:"bg-blue-600 text-white font-bold",children:k(w.clientName)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:w.clientName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"})," ",w.email]}),w.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"})," ",w.phoneNo]})]})]})},w._id))})]})]})]})},lt=({value:t,onValueChange:a,children:r})=>{const[l,o]=A.useState(!1),[d,m]=A.useState(t||""),x=A.useRef(null);A.useEffect(()=>{const p=g=>{x.current&&!x.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const h=p=>{m(p),a==null||a(p),o(!1)};return e.jsx("div",{ref:x,className:"relative",children:ct.Children.map(r,p=>{if(ct.isValidElement(p)){if(p.type===at)return ct.cloneElement(p,{isOpen:l,onClick:()=>o(!l),selectedValue:d});if(p.type===nt)return ct.cloneElement(p,{isOpen:l,onValueChange:h})}return p})})},at=({className:t="",children:a,isOpen:r=!1,onClick:l})=>e.jsxs("button",{type:"button",className:`w-full px-3 py-2 border border-blue-200 rounded-xl bg-white text-left flex items-center justify-between focus:outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 ${t}`,onClick:l,children:[a,e.jsx("svg",{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),it=({placeholder:t="Select...",selectedValue:a})=>e.jsx("span",{className:"text-gray-900",children:a||t}),nt=({className:t="",children:a,isOpen:r=!1,onValueChange:l})=>r?e.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-50 py-1 ${t}`,children:ct.Children.map(a,o=>ct.isValidElement(o)&&o.type===ye?ct.cloneElement(o,{onSelect:l}):o)}):null,ye=({value:t,children:a,onSelect:r})=>e.jsx("button",{type:"button",className:"w-full cursor-pointer text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700",onClick:()=>r==null?void 0:r(t),children:a}),IE=({formData:t,setFormData:a})=>{var d,m,x,h,p,g,y,j,E,b,k;const r=w=>{const C=w.target,{name:v,type:N,value:T}=C;let P=T;if(N==="checkbox")P=C.checked;else if(N==="number"){const D=parseFloat(T);P=isNaN(D)?0:Math.max(0,D)}["top","left","right"].includes(v)?a(D=>{var $;return{...D,kitchen:{...D.kitchen,measurements:{...($=D.kitchen)==null?void 0:$.measurements,[v]:P}}}}):a(D=>({...D,kitchen:{...D.kitchen,[v]:P}}))},l=(w,C)=>{a(v=>({...v,kitchen:{...v.kitchen,[w]:C}}))},o=()=>{a(w=>({...w,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Kitchen Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Layout Type"}),e.jsxs(lt,{onValueChange:w=>l("layoutType",w),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select layout",selectedValue:((d=t==null?void 0:t.kitchen)==null?void 0:d.layoutType)||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Kitchen Package"}),e.jsxs(lt,{onValueChange:w=>l("kitchenPackage",w),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:((m=t==null?void 0:t.kitchen)==null?void 0:m.kitchenPackage)||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:(x=t==null?void 0:t.kitchen)==null?void 0:x.numberOfShelves,onChange:r,placeholder:"e.g., 3"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Measurement Top (ft)"}),e.jsx(de,{type:"number",name:"top",value:((p=(h=t==null?void 0:t.kitchen)==null?void 0:h.measurements)==null?void 0:p.top)??0,onChange:r,placeholder:"Length Top"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Measurement Left (ft)"}),e.jsx(de,{type:"number",name:"left",value:(y=(g=t==null?void 0:t.kitchen)==null?void 0:g.measurements)==null?void 0:y.left,onChange:r,placeholder:"Length Left"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Measurement Right (ft)"}),e.jsx(de,{type:"number",name:"right",value:(E=(j=t==null?void 0:t.kitchen)==null?void 0:j.measurements)==null?void 0:E.right,onChange:r,placeholder:"Length right"})]}),e.jsxs("div",{className:"flex  items-center",children:[e.jsx("input",{id:"graniteCountertop",type:"checkbox",name:"graniteCountertop",checked:((b=t==null?void 0:t.kitchen)==null?void 0:b.graniteCountertop)||!1,onChange:r,className:"!w-[10%]"}),e.jsx(me,{htmlFor:"graniteCountertop",children:"Granite Countertop?"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((k=t==null?void 0:t.kitchen)==null?void 0:k.notes)||"",onChange:r,placeholder:"Mention any additional kitchen preferences",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(L,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Kitchen Section"]})})]})},BE=A.memo(IE),HE=({formData:t,setFormData:a})=>{const r=d=>{const{name:m,value:x,type:h}=d.target;let p=x;if(h==="number"){const g=parseFloat(x);p=isNaN(g)?0:Math.max(0,g)}a(g=>({...g,livingHall:{...g.livingHall,[m]:p}}))},l=(d,m)=>{a(x=>({...x,livingHall:{...x.livingHall,[d]:m}}))},o=()=>{a(d=>({...d,livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Living Hall Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Seating Style"}),e.jsxs(lt,{onValueChange:d=>l("seatingStyle",d),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select seating style",selectedValue:t.livingHall.seatingStyle||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"TV Unit Design Required"}),e.jsxs(lt,{onValueChange:d=>l("tvUnitDesignRequired",d==="Yes"),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select option",selectedValue:t.livingHall.tvUnitDesignRequired===!0?"Yes":t.livingHall.tvUnitDesignRequired===!1?"No":""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"False Ceiling Required"}),e.jsxs(lt,{onValueChange:d=>l("falseCeilingRequired",d==="Yes"),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select option",selectedValue:t.livingHall.falseCeilingRequired===!0?"Yes":t.livingHall.falseCeilingRequired===!1?"No":""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Wall Decor Style"}),e.jsxs(lt,{onValueChange:d=>l("wallDecorStyle",d),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select wall decor",selectedValue:t.livingHall.wallDecorStyle||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Fans"}),e.jsx(de,{name:"numberOfFans",type:"number",value:t.livingHall.numberOfFans,onChange:r,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Lights"}),e.jsx(de,{name:"numberOfLights",type:"number",value:t.livingHall.numberOfLights,onChange:r,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Living Hall Package"}),e.jsxs(lt,{onValueChange:d=>l("livingHallPackage",d),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:t.livingHall.livingHallPackage||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(de,{name:"notes",value:t.livingHall.notes||"",onChange:r,placeholder:"Any special preferences or notes"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(L,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset LivingHall Section"]})})]})},QE=({formData:t,setFormData:a})=>{var d,m,x,h,p,g,y,j;const r=E=>{const b=E.target,{name:k,type:w,value:C}=b;let v=C;if(w==="checkbox")v=b.checked;else if(w==="number"){const N=parseFloat(C);v=isNaN(N)?0:Math.max(0,N)}a(N=>({...N,bedroom:{...N.bedroom,[k]:v}}))},l=(E,b)=>{a(k=>({...k,bedroom:{...k.bedroom,[E]:b}}))},o=()=>{a(E=>({...E,bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Bedroom Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Number of Bedrooms"}),e.jsx(de,{type:"number",name:"numberOfBedrooms",value:(d=t==null?void 0:t.bedroom)==null?void 0:d.numberOfBedrooms,onChange:r,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Bed Type"}),e.jsxs(lt,{onValueChange:E=>l("bedType",E),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select bed type",selectedValue:((m=t==null?void 0:t.bedroom)==null?void 0:m.bedType)||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",id:"wardrobeIncluded",checked:((x=t==null?void 0:t.bedroom)==null?void 0:x.wardrobeIncluded)||!1,onChange:r}),e.jsx(me,{htmlFor:"wardrobeIncluded",children:"Wardrobe Included?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"falseCeilingRequired",type:"checkbox",name:"falseCeilingRequired",checked:((h=t==null?void 0:t.bedroom)==null?void 0:h.falseCeilingRequired)||!1,onChange:r}),e.jsx(me,{htmlFor:"falseCeilingRequired",children:"False Ceiling Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"tvUnitRequired",type:"checkbox",name:"tvUnitRequired",checked:((p=t==null?void 0:t.bedroom)==null?void 0:p.tvUnitRequired)||!1,onChange:r}),e.jsx(me,{htmlFor:"tvUnitRequired",children:"TV Unit Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",id:"studyTableRequired",checked:((g=t==null?void 0:t.bedroom)==null?void 0:g.studyTableRequired)||!1,onChange:r}),e.jsx(me,{htmlFor:"studyTableRequired",children:"Study Table Required?"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Bedroom Package"}),e.jsxs(lt,{onValueChange:E=>l("bedroomPackage",E),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:((y=t==null?void 0:t.bedroom)==null?void 0:y.bedroomPackage)||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((j=t==null?void 0:t.bedroom)==null?void 0:j.notes)||"",onChange:r,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(L,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Bedroom Section"]})})]})},GE=A.memo(QE),KE=({formData:t,setFormData:a})=>{var d,m,x,h,p,g,y,j;const r=E=>{const{name:b,value:k,type:w}=E.target;let C=k;if(w==="checkbox")C=E.target.checked;else if(w==="number"){const v=parseFloat(k);C=isNaN(v)?0:Math.max(0,v)}a(v=>({...v,wardrobe:{...v.wardrobe,[b]:C}}))},l=(E,b)=>{a(k=>({...k,wardrobe:{...k.wardrobe,[E]:b}}))},o=()=>{a(E=>({...E,wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Wardrobe Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Wardrobe Type"}),e.jsxs(lt,{onValueChange:E=>l("wardrobeType",E),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select type",selectedValue:((d=t==null?void 0:t.wardrobe)==null?void 0:d.wardrobeType)||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Length (ft)"}),e.jsx(de,{type:"number",name:"lengthInFeet",value:(m=t==null?void 0:t.wardrobe)==null?void 0:m.lengthInFeet,onChange:r,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Height (ft)"}),e.jsx(de,{type:"number",name:"heightInFeet",value:(x=t==null?void 0:t.wardrobe)==null?void 0:x.heightInFeet,onChange:r,placeholder:"e.g., 8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"mirrorIncluded",type:"checkbox",name:"mirrorIncluded",checked:((h=t==null?void 0:t.wardrobe)==null?void 0:h.mirrorIncluded)||!1,onChange:r}),e.jsx(me,{htmlFor:"mirrorIncluded",children:"Mirror Included?"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:(p=t==null?void 0:t.wardrobe)==null?void 0:p.numberOfShelves,onChange:r,placeholder:"e.g., 4"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Drawers"}),e.jsx(de,{type:"number",name:"numberOfDrawers",value:(g=t==null?void 0:t.wardrobe)==null?void 0:g.numberOfDrawers,onChange:r,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Wardrobe Package"}),e.jsxs(lt,{onValueChange:E=>l("wardrobePackage",E),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:((y=t==null?void 0:t.wardrobe)==null?void 0:y.wardrobePackage)||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((j=t==null?void 0:t.wardrobe)==null?void 0:j.notes)||"",onChange:r,placeholder:"Mention any preferences or requirements",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(L,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Wardrobe Section"]})})]})},VE=A.memo(KE),YE=async({projectId:t,payload:a,token:r,api:l})=>{const{data:o}=await l.post(`/requirementform/createrequirement/${t}?token=${r}`,a);if(!o.ok)throw new Error(o.message);return o.data},WE=async({projectId:t,api:a})=>{const{data:r}=await a.get(`/requirementform/getrequirementform/${t}`);if(!r.ok)throw new Error(r.message);return r.data},XE=async({projectId:t,api:a})=>{const{data:r}=await a.post(`/requirementform/formsharelink/${t}`);if(!r.ok)throw new Error(r.message);return r.data},ZE=async({formId:t,projectId:a,api:r})=>{console.log("formId",t);const{data:l}=await r.patch(`/requirementform/formcompleted/${a}/${t}`);if(!l.ok)throw new Error(l.message);return l.data},JE=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.patch(`/requirementform/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},eA=async({formId:t,projectId:a,files:r,api:l})=>{console.log("getig iside 1");const o=new FormData;r.forEach(m=>o.append("file",m)),console.log("getig iside 1");const d=await l.post(`/requirementform/upload/multiple/${a}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}});return console.log("reposen",d),d.data},tA=async(t,a,r)=>{const{data:l}=await r.patch(`/requirementform/${t}/deleteuploadedfile/${a}`);if(!l.ok)throw new Error(l.message);return l.data},sA=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({projectId:l,fileId:o})=>{if(!t||!r.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await tA(l,o,a)},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["requirementForm",o]})}})},aA=async({projectId:t,api:a,updateData:r})=>{const{data:l}=await a.put(`/requirementform/${t}/updatekitchen`,{kitchen:r});if(!l.ok)throw new Error(l.message);return l.data},nA=async({projectId:t,api:a,updateData:r})=>{const{data:l}=await a.put(`/requirementform/${t}/updatebedroom`,{bedroom:r});if(!l.ok)throw new Error(l.message);return l.data},rA=async({projectId:t,api:a,updateData:r})=>{const{data:l}=await a.put(`/requirementform/${t}/updatewardrobe`,{wardrobe:r});if(!l.ok)throw new Error(l.message);return l.data},lA=async({projectId:t,api:a,updateData:r})=>{const{data:l}=await a.put(`/requirementform/${t}/updatelivinghall`,{livingHall:r});if(!l.ok)throw new Error(l.message);return l.data},iA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,payload:o,token:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await YE({projectId:l,payload:o,token:d,api:r})}})},oA=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:r}=Z(),l=J(r);return qe({queryKey:["requirementForm"],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await WE({projectId:t,api:l})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},cA=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await XE({projectId:l,api:r})}})},dA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,projectId:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await ZE({formId:l,projectId:o,api:r})}})},uA=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,deadLine:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you dont have the access to make this api");if(!r)throw new Error("api is not available");return await JE({formId:l,deadLine:o,projectId:d,api:r})}})},mA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await eA({formId:l,projectId:d,files:o,api:r})}})},fA=()=>{const t=["client","owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await aA({projectId:l,api:r,updateData:o})}})},hA=()=>{const t=["client","owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await nA({projectId:l,api:r,updateData:o})}})},xA=()=>{const t=["client","owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await rA({projectId:l,api:r,updateData:o})}})},pA=()=>{const t=["client","owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await lA({projectId:l,api:r,updateData:o})}})},gA=()=>{var C,v;const{token:t,projectId:a}=Re(),[r,l]=A.useState({clientData:{clientName:null,email:null,whatsapp:null,location:null},isEditable:!0,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null},livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null},bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null},wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null},additionalNotes:null}),[o,d]=A.useState({}),[m,x]=A.useState(0),{mutateAsync:h,isPending:p,isSuccess:g,isError:y,error:j}=iA(),E=N=>{let{name:T,value:P}=N.target;T==="whatsapp"&&(P=P.replace(/[^0-9]/g,"")),l(D=>({...D,clientData:{...D.clientData,[T]:P}}))},b=N=>{let T={};const{clientName:P,email:D,whatsapp:$}=N.clientData;return(!P||P.trim()==="")&&(T.clientName="Client name is required"),(!D||D.trim()==="")&&(T.email="Email is required"),!$||$.trim()===""?T.whatsapp="WhatsApp number is required":$.trim().length!==10&&(T.whatsapp="Number should be 10 digits long"),T},k=async()=>{var N,T;try{if(d({}),!a)return;const P=b(r);if(Object.keys(P).length){d(P);return}await h({projectId:a,payload:r,token:t}),_({title:"Success",description:"form data submitted successfully"})}catch(P){_({title:"Error",description:((T=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:T.message)||(P==null?void 0:P.message)||"Failed to generate invitation link",variant:"destructive"})}},w=[{label:"Kitchen",content:e.jsx(BE,{formData:r,setFormData:l})},{label:"Living Hall",content:e.jsx(HE,{formData:r,setFormData:l})},{label:"Bedroom",content:e.jsx(GE,{formData:r,setFormData:l})},{label:"Wardrobe",content:e.jsx(VE,{formData:r,setFormData:l})},{label:"Client Info",content:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Client Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Client Name"}),e.jsx(de,{name:"clientName",value:r.clientData.clientName??"",onChange:E,required:!0,error:o.clientName||""})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Email"}),e.jsx(de,{type:"email",name:"email",value:r.clientData.email??"",onChange:E,required:!0,error:o.email||""})]}),e.jsxs("div",{children:[e.jsx(me,{children:"WhatsApp Number"}),e.jsx(de,{name:"whatsapp",type:"text",inputMode:"numeric",pattern:"[0-9]{10}",value:r.clientData.whatsapp??"",onChange:E,required:!0,error:o.whatsapp||"",maxLength:10})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Location"}),e.jsx(de,{name:"location",value:r.clientData.location??"",onChange:E})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"additionalNotes",value:r.additionalNotes||"",onChange:N=>l(T=>({...T,additionalNotes:N.target.value})),className:"w-full px-3 py-2 border rounded-xl focus:outline-none focus:ring focus:ring-blue-200",rows:4})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(L,{variant:"primary",size:"lg",onClick:k,isLoading:p,children:"Submit Requirement Form"})}),g&&e.jsx("p",{className:"text-green-600 mt-4",children:"Form submitted successfully!"}),y&&e.jsx("p",{className:"text-red-600 mt-4",children:((v=(C=j==null?void 0:j.response)==null?void 0:C.data)==null?void 0:v.message)||j.message||"Form Submission Failed"})]})}];return e.jsx("div",{className:"space-y-8  max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white to-blue-100 !p-6 h-full w-full",children:e.jsxs("div",{className:"max-w-5xl max-h-full mx-auto space-y-5",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-blue-800",children:"House Requirements Form"}),e.jsx("div",{className:"max-w-5xl  mx-auto",children:w[m].content}),e.jsxs("div",{className:`flex ${m>0?"justify-between":"justify-end"} mt-2`,children:[m>0&&e.jsx(L,{variant:"secondary",onClick:()=>x(N=>N-1),children:"Previous"}),m<w.length-1&&e.jsx(L,{variant:"primary",onClick:()=>x(N=>N+1),children:"Skip & Continue"})]})]})})},bA=({data:t,setVisibleSection:a})=>{var g,y,j;const{projectId:r}=Re(),[l,o]=A.useState({layoutType:(t==null?void 0:t.layoutType)||"L-shaped",measurements:(t==null?void 0:t.measurements)||{top:0,left:0,right:0},kitchenPackage:(t==null?void 0:t.kitchenPackage)||"Essentials",graniteCountertop:(t==null?void 0:t.graniteCountertop)||!1,numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=fA(),x=E=>{const b=E.target,{name:k,type:w,value:C}=b;let v=C;if(w==="checkbox")v=b.checked;else if(w==="number"){const N=parseFloat(C);v=isNaN(N)?0:Math.max(0,N)}["top","left","right"].includes(k)?o(N=>({...N,measurements:{...N==null?void 0:N.measurements,[k]:v}})):o(N=>({...N,[k]:v}))},h=(E,b)=>{o(k=>({...k,[E]:b}))},p=async()=>{var E,b;try{if(!r)return;await d({projectId:r,updateData:l}),_({title:"Success",description:"Kitchen data updated successfully"})}catch(k){_({title:"Error",description:((b=(E=k==null?void 0:k.response)==null?void 0:E.data)==null?void 0:b.message)||(k==null?void 0:k.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Kitchen Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Layout Type"}),e.jsxs(lt,{onValueChange:E=>h("layoutType",E),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select layout",selectedValue:l.layoutType||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Kitchen Package"}),e.jsxs(lt,{onValueChange:E=>h("kitchenPackage",E),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:l.kitchenPackage||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"graniteCountertop",checked:l.graniteCountertop??void 0,onChange:x}),e.jsx(me,{children:"Granite Countertop"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:l.numberOfShelves||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Measurement - Top (in feet)"}),e.jsx(de,{type:"number",name:"top",value:((g=l.measurements)==null?void 0:g.top)||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Measurement - Left (in feet)"}),e.jsx(de,{type:"number",name:"left",value:((y=l.measurements)==null?void 0:y.left)||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Measurement - Right (in feet)"}),e.jsx(de,{type:"number",name:"right",value:((j=l.measurements)==null?void 0:j.right)||"",onChange:x,min:0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:l.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(L,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Kitchen Requirements"})})]})},yA=({data:t,setVisibleSection:a})=>{const{projectId:r}=Re(),[l,o]=A.useState({seatingStyle:(t==null?void 0:t.seatingStyle)||"Sofa Set",tvUnitDesignRequired:(t==null?void 0:t.tvUnitDesignRequired)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,wallDecorStyle:(t==null?void 0:t.wallDecorStyle)||"Paint",numberOfFans:(t==null?void 0:t.numberOfFans)||0,numberOfLights:(t==null?void 0:t.numberOfLights)||0,livingHallPackage:(t==null?void 0:t.livingHallPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=pA(),x=g=>{const y=g.target,{name:j,type:E,value:b}=y;let k=b;if(E==="checkbox")k=y.checked;else if(E==="number"){const w=parseFloat(b);k=isNaN(w)?0:Math.max(0,w)}o(w=>({...w,[j]:k}))},h=(g,y)=>{o(j=>({...j,[g]:y}))},p=async()=>{var g,y;try{if(!r)return;await d({projectId:r,updateData:l}),_({title:"Success",description:"Living Hall data updated successfully"})}catch(j){_({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Living Hall Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Seating Style"}),e.jsxs(lt,{onValueChange:g=>h("seatingStyle",g),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select seating style",selectedValue:l.seatingStyle||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Wall Decor Style"}),e.jsxs(lt,{onValueChange:g=>h("wallDecorStyle",g),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select wall decor",selectedValue:l.wallDecorStyle||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Fans"}),e.jsx(de,{type:"number",name:"numberOfFans",value:l.numberOfFans||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Lights"}),e.jsx(de,{type:"number",name:"numberOfLights",value:l.numberOfLights||"",onChange:x,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitDesignRequired",checked:l.tvUnitDesignRequired||void 0,onChange:x}),e.jsx(me,{children:"TV Unit Design Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:l.falseCeilingRequired||void 0,onChange:x}),e.jsx(me,{children:"False Ceiling Required"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Package"}),e.jsxs(lt,{onValueChange:g=>h("livingHallPackage",g),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:l.livingHallPackage||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:l.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(L,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Living Hall Requirements"})})]})},wA=({data:t,setVisibleSection:a})=>{const{projectId:r}=Re(),[l,o]=A.useState({numberOfBedrooms:(t==null?void 0:t.numberOfBedrooms)||1,bedType:(t==null?void 0:t.bedType)||"Queen",wardrobeIncluded:(t==null?void 0:t.wardrobeIncluded)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,tvUnitRequired:(t==null?void 0:t.tvUnitRequired)||!1,studyTableRequired:(t==null?void 0:t.studyTableRequired)||!1,bedroomPackage:(t==null?void 0:t.bedroomPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=hA(),x=g=>{const y=g.target,{name:j,type:E,value:b}=y;let k=b;if(E==="checkbox")k=y.checked;else if(E==="number"){const w=parseFloat(b);k=isNaN(w)?0:Math.max(0,w)}o(w=>({...w,[j]:k}))},h=(g,y)=>{o(j=>({...j,[g]:y}))},p=async()=>{var g,y;try{if(!r)return;await d({projectId:r,updateData:l}),_({title:"Success",description:"bedroom data updated successfully"})}catch(j){_({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Bedroom Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Number of Bedrooms"}),e.jsx(de,{type:"number",name:"numberOfBedrooms",value:l.numberOfBedrooms??"",onChange:x,min:1})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Bed Type"}),e.jsxs(lt,{onValueChange:g=>h("bedType",g),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select bed type",selectedValue:l.bedType||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",checked:l.wardrobeIncluded??void 0,onChange:x}),e.jsx(me,{children:"Wardrobe Included"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:l.falseCeilingRequired??void 0,onChange:x}),e.jsx(me,{children:"False Ceiling Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitRequired",checked:l.tvUnitRequired??void 0,onChange:x}),e.jsx(me,{children:"TV Unit Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",checked:l.studyTableRequired??void 0,onChange:x}),e.jsx(me,{children:"Study Table Required"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Package"}),e.jsxs(lt,{onValueChange:g=>h("bedroomPackage",g),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:l.bedroomPackage||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:l.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(L,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Bedroom Requirements"})})]})},vA=({data:t,setVisibleSection:a})=>{const{projectId:r}=Re(),[l,o]=A.useState({wardrobeType:(t==null?void 0:t.wardrobeType)||"Sliding",lengthInFeet:(t==null?void 0:t.lengthInFeet)||0,heightInFeet:(t==null?void 0:t.heightInFeet)||0,mirrorIncluded:(t==null?void 0:t.mirrorIncluded)||!1,wardrobePackage:(t==null?void 0:t.wardrobePackage)||"Essentials",numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,numberOfDrawers:(t==null?void 0:t.numberOfDrawers)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=xA(),x=g=>{const y=g.target,{name:j,type:E,value:b}=y;let k=b;if(E==="checkbox")k=y.checked;else if(E==="number"){const w=parseFloat(b);k=isNaN(w)?0:Math.max(0,w)}o(w=>({...w,[j]:k}))},h=(g,y)=>{o(j=>({...j,[g]:y}))},p=async()=>{var g,y;try{if(!r)return;await d({projectId:r,updateData:l}),_({title:"Success",description:"Wardrobe data updated successfully"})}catch(j){_({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Wardrobe Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{children:"Wardrobe Type"}),e.jsxs(lt,{onValueChange:g=>h("wardrobeType",g),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select wardrobe type",selectedValue:l.wardrobeType||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Length (in feet)"}),e.jsx(de,{type:"number",name:"lengthInFeet",value:l.lengthInFeet||0,onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Height (in feet)"}),e.jsx(de,{type:"number",name:"heightInFeet",value:l.heightInFeet||0,onChange:x,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"mirrorIncluded",checked:l.mirrorIncluded??void 0,onChange:x}),e.jsx(me,{children:"Mirror Included"})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:l.numberOfShelves||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Number of Drawers"}),e.jsx(de,{type:"number",name:"numberOfDrawers",value:l.numberOfDrawers||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Package"}),e.jsxs(lt,{onValueChange:g=>h("wardrobePackage",g),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select package",selectedValue:l.wardrobePackage||""})}),e.jsxs(nt,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(me,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:l.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(L,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Wardrobe Requirements"})})]})},jA=async({stageName:t,projectId:a,api:r,startedAt:l})=>{const o=l?{startedAt:l}:{},{data:d}=await r.post(`/starttimer/start/${t}/${a}`,o);if(!d.ok)throw new Error(d.message);return d.data},NA=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({stageName:o,projectId:d,startedAt:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to start timer.");if(!r)throw new Error("API instance missing.");return await jA({stageName:o,projectId:d,api:r,startedAt:m})},onSuccess:(o,d)=>{l.invalidateQueries({queryKey:["stage",d.stageName,d.projectId]})}})},Fm=t=>{const a=Math.floor(t/1e3),r=Math.floor(a/(3600*24)),l=Math.floor(a%(3600*24)/3600),o=Math.floor(a%3600/60),d=a%60;return`${r}d ${l}h ${o}m ${d}s`},ns=({startedAt:t,stageName:a,projectId:r,completedAt:l,deadLine:o,formId:d,deadLineMutate:m,isPending:x,refetchStageMutate:h})=>{const[p,g]=A.useState(new Date),[y,j]=A.useState(o?new Date(o).toISOString().split("T")[0]:""),[E,b]=A.useState(!1),[k,w]=A.useState(!1),[C,v]=A.useState(""),{mutateAsync:N,isPending:T}=NA();A.useEffect(()=>{const B=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(B)},[]);const P=t?new Date(t):null,D=l?new Date(l):null,$=o?new Date(o):null,q=()=>{if(!P)return"Not started yet";if(P&&D){const te=D.getTime()-P.getTime();return` Completed in: ${Fm(te)}`}if($){const te=$.getTime()-p.getTime();return te<=0?e.jsx("span",{className:"text-red-600 font-semibold",children:" Deadline has reached"}):` Remaining: ${Fm(te)}`}const B=p.getTime()-P.getTime();return` Running: ${Fm(B)}`},H=B=>B?B.toLocaleString("en-IN",{timeZone:"Asia/Kolkata",dateStyle:"medium",timeStyle:"short"}):"Not Available",he=async()=>{var B,te;try{if(!d||!y)return;const V=y.length===10?`${y}T00:00:00`:y,oe=new Date(V);if(isNaN(oe.getTime()))return _({title:"Invalid Date",description:"Please pick a valid date & time",variant:"destructive"});if(oe<new Date)return _({title:"Invalid Date",description:"Deadline cannot be in the past",variant:"destructive"});await m({formId:d,projectId:r,deadLine:V}),h(),b(!1),_({title:"Success",description:"Deadline updated successfully"})}catch(V){_({title:"Error",description:((te=(B=V==null?void 0:V.response)==null?void 0:B.data)==null?void 0:te.message)||"Failed to update deadline",variant:"destructive"})}},K=async()=>{var B,te;try{if(!C)return _({title:"Error",description:"Please pick a date"});const V=new Date(C);if(isNaN(V.getTime()))return _({title:"Invalid Date",description:"Please provide a valid date & time.",variant:"destructive"});if(V<new Date)return _({title:"Invalid Date",description:"The started time cannot be in the past.",variant:"destructive"});await N({projectId:r,stageName:a,startedAt:V.toISOString()}),await h(),_({title:"Success",description:"Started time updated"}),w(!1)}catch(V){_({title:"Error",description:((te=(B=V==null?void 0:V.response)==null?void 0:B.data)==null?void 0:te.message)||(V==null?void 0:V.message)||"Failed to update started time",variant:"destructive"})}};return e.jsxs("div",{className:"text-sm w-full text-blue-900 space-y-3",children:[e.jsxs("div",{className:"flex w-full justify-between flex-wrap gap-x-6 gap-y-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-play text-blue-500"}),e.jsx("strong",{children:"Started On:"})," ",H(P),!k&&e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>w(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-flag-checkered text-green-500"}),e.jsx("strong",{children:"Completed On:"})," ",H(D)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar text-purple-600"}),e.jsx("strong",{children:"Deadline:"})," ",H($),!E&&e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>b(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]})]}),e.jsx("div",{className:"font-semibold text-blue-700",children:q()}),k&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(de,{type:"datetime-local",value:C,min:new Date().toISOString().slice(0,16),onChange:B=>v(B.target.value),className:"max-w-xs"}),e.jsx(L,{onClick:K,isLoading:T,variant:"primary",children:"Update StartedAt"}),e.jsx(L,{onClick:()=>w(!1),variant:"ghost",children:"Cancel"})]}),E&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(de,{type:"datetime-local",value:y,min:new Date().toISOString().slice(0,16),onChange:B=>j(B.target.value),className:"max-w-xs"}),e.jsx(L,{onClick:he,isLoading:x,className:"bg-blue-600 text-white",children:"Update Deadline"}),e.jsx(L,{onClick:()=>b(!1),variant:"ghost",children:"Cancel"})]})]})},Kt=async({src:t,alt:a})=>{var r,l;try{console.log("im donwloadin");const o=t.split(".com/")[1],{data:d}=await Qe.get(`https://houseofram.in/api/download-url?key=${encodeURIComponent(o)}&filename=${encodeURIComponent(a)}`),m=document.createElement("a");m.href=d.url,m.download="",document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(o){_({title:"Error",description:((l=(r=o==null?void 0:o.response)==null?void 0:r.data)==null?void 0:l.message)||"failed to download"})}},By=({formId:t,projectId:a,refetch:r,existingUploads:l=[],onUploadComplete:o,uploadFilesMutate:d,uploadPending:m,onDeleteUpload:x,deleteFilePending:h})=>{const[p,g]=A.useState([]),[y,j]=A.useState(null),E=v=>{v.target.files&&g(Array.from(v.target.files))},b=async()=>{var v,N;if(!(!t||p.length===0))try{await d({formId:t,files:p,projectId:a}),_({title:"Success",description:"Files uploaded successfully."}),g([]),o==null||o()}catch(T){_({title:"Upload Failed",description:((N=(v=T==null?void 0:T.response)==null?void 0:v.data)==null?void 0:N.message)||"Try again later.",variant:"destructive"})}},k=async v=>{var N,T;try{await(x==null?void 0:x({fileId:v,projectId:a})),_({title:"Success",description:"Files Deleted successfully."}),r()}catch(P){_({title:"Upload Failed",description:((T=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:T.message)||"Try again later.",variant:"destructive"})}},w=l.filter(v=>v.type==="pdf"),C=l.filter(v=>v.type==="image");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(de,{type:"file",multiple:!0,onChange:E,accept:"image/jpeg,image/png,application/pdf"}),e.jsx(L,{onClick:b,isLoading:m,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px]  rounded-lg  border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto ",children:[w.length===0&&e.jsx("div",{className:"min-h-[145px]   flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),w==null?void 0:w.map((v,N)=>e.jsxs("li",{className:"flex justify-between items-center  bg-blue-50 p-2 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:v.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(L,{onClick:()=>Kt({src:v==null?void 0:v.url,alt:(v==null?void 0:v.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",isLoading:h,onClick:()=>k(v==null?void 0:v._id),className:"text-green-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]}),e.jsxs("div",{className:"overflow-y-auto",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2  max-h-[180px] rounded-lg border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto custom-scrollbar",children:[C.length===0&&e.jsx("div",{className:"min-h-[145px]  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),C.map((v,N)=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 sm:p-2 p-1 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:v.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>j(v==null?void 0:v.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(L,{size:"sm",onClick:()=>Kt({src:v.url,alt:v.originalName||"file.pdf"}),className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",isLoading:h,onClick:()=>k(v==null?void 0:v._id),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]})]}),y&&e.jsx("div",{onClick:()=>j(null),className:"fixed inset-0 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:v=>v.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>j(null)}),e.jsx("img",{src:y,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},SA=async({projectId:t,stageNumber:a,stagePath:r,api:l})=>{const{data:o}=await l.put(`/stage${a}/${r}/${t}`);if(!o.ok)throw new Error(o.message);return o},CA=()=>{const{role:t}=Z(),a=J(t),r=["staff","owner","CTO"];return ie({mutationFn:async({projectId:l,stageNumber:o,stagePath:d})=>{if(!t||!r.includes(t))throw new Error("You are not authorized to reset this stage.");if(!a)throw new Error("API instance not available.");return await SA({projectId:l,stageNumber:o,stagePath:d,api:a})}})},ws=({projectId:t,stageNumber:a,stagePath:r,buttonClass:l="bg-red-600 text-white",iconClass:o="fas fa-rotate-left",disabled:d=!1,className:m=""})=>{const{mutateAsync:x,isPending:h}=CA(),p=async()=>{var g,y;try{await x({projectId:t,stageNumber:a,stagePath:r}),_({description:"Stage Reset successfully",title:"Success"})}catch(j){_({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||"Failed to Reset the stage",variant:"destructive"})}};return e.jsx("div",{className:`space-y-1 w-full ${m}`,children:e.jsxs(L,{onClick:p,variant:"danger",disabled:h||d,className:`${l} flex items-center gap-2 !p-2 w-full`,children:[e.jsx("i",{className:o}),e.jsx("span",{children:h?"Resetting...":"Reset Stage"})]})})},jt=()=>{const t=Array.from({length:13});return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(Fe,{className:"h-8 w-40 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map((a,r)=>e.jsxs("div",{className:"bg-white p-4 shadow rounded-lg",children:[e.jsx(Fe,{className:"h-6 w-32 mb-2"}),e.jsx(Fe,{className:"h-4 w-24 mb-4"}),e.jsx(Fe,{className:"h-4 w-16"})]},r))})]})},kA=({client:t})=>e.jsxs(Pe,{className:"p-4 bg-white shadow border-l-4 border-blue-500",children:[e.jsxs("h2",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-user-tie mr-2"})," Client Info"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(Zo,{label:"Name",value:t==null?void 0:t.clientName,icon:"fa-user"}),e.jsx(Zo,{label:"Email",value:t==null?void 0:t.email,icon:"fa-envelope"}),e.jsx(Zo,{label:"WhatsApp",value:t==null?void 0:t.whatsapp,icon:"fa-phone"}),e.jsx(Zo,{label:"Location",value:t==null?void 0:t.location,icon:"fa-location-dot"})]})]}),Zo=({label:t,value:a,icon:r})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${r} text-gray-600`}),e.jsxs("strong",{children:[t,":"]})," ",a||"No data"]}),EA=A.memo(kA),AA=({sections:t,setVisibleSection:a})=>e.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(({key:r,label:l,icon:o})=>e.jsx("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer group",onClick:()=>a(r),children:e.jsxs("div",{className:"flex items-center justify-between p-5 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-3 rounded-full text-xl",children:e.jsx("i",{className:o})}),e.jsx("span",{className:"text-sm font-medium text-gray-800 group-hover:text-blue-700",children:l})]}),e.jsx("i",{className:"fa-solid fa-chevron-right text-blue-400 group-hover:text-blue-600"})]})},r))}),OA=ct.memo(AA),RA=async(t,a,r,l)=>(console.log("staffId",a),(await l.put(`/assignstafftostage/${t}/${a}/${r}`)).data),TA=()=>{const{role:t}=Z(),a=J(t),r=["owner","CTO","staff"];return ie({mutationFn:async({projectId:l,staffId:o,stageName:d})=>{if(!t)throw new Error("Not Authorized");if(!t||!r.includes(t))throw new Error("Not allowed to Access this api");if(!a)throw new Error("API not found");return RA(l,o,d,a)}})};function rs({stageName:t,projectId:a,organizationId:r,currentAssignedStaff:l,className:o=""}){const[d,m]=A.useState(!1),[x,h]=A.useState(l),{data:p,isLoading:g}=di(r,"staff"),{mutateAsync:y}=TA(),j=p,E=async b=>{var k,w;try{await y({projectId:a,staffId:b._id,stageName:t}),h(b),_({title:"Success",description:`${b.staffName} assigned to ${t}`}),m(!1)}catch(C){_({title:"Error",description:((w=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:w.message)||(C==null?void 0:C.message)||"Failed to assign staff",variant:"destructive"})}};return e.jsxs("div",{className:`relative inline-flex items-center px-2 py-2 sm:py-1 rounded-lg text-sm shadow-sm border-[#92abc4] sm:border-none ${o} `,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-700 whitespace-nowrap",children:[e.jsx("span",{className:"font-medium hidden sm:inline text-blue-800",children:"Staff:"})," ",e.jsx("span",{className:"font-medium inline sm:hidden text-blue-800",children:"Staff Member:"})," ",x?e.jsx("span",{className:"text-gray-800 font-semibold",children:x==null?void 0:x.staffName}):e.jsx("span",{className:"text-gray-400 text-[12px]  italic",children:"Not Assigned"})]}),e.jsx(L,{size:"sm",variant:"ghost",className:"text-blue-600 hover:bg-blue-50 px-2 py-1 text-xs",onClick:()=>m(!d),children:d?e.jsx("i",{className:"fas fa-xmark text-red-600"}):e.jsx("i",{className:"fas fa-pencil text-blue-600"})})]}),d&&e.jsx("div",{className:"absolute z-10 top-full left-[0%] sm:left-[-20%] mt-2 w-[200px] bg-white border border-blue-200 rounded-md shadow-lg max-h-48 overflow-auto text-sm",children:g?e.jsx("div",{className:"p-3 text-gray-500 text-center",children:"Loading..."}):j.length===0?e.jsx("div",{className:"p-3 text-gray-400 text-center",children:"No staff available"}):e.jsx("ul",{className:"divide-y divide-blue-100 max-h-40 overflow-y-auto custom-scrollbar",children:j==null?void 0:j.map(b=>e.jsxs("li",{onClick:()=>E(b),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",children:[e.jsx("span",{className:"font-medium text-blue-700 block truncate",children:(b==null?void 0:b.staffName)||(b==null?void 0:b.name)}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:b==null?void 0:b.email})]},b==null?void 0:b._id))})})]})}const B0=[{Component:wA,icon:"fa-solid fa-bed",label:"Bedroom Section",key:"bedroom"},{Component:bA,icon:"fa-solid fa-kitchen-set",label:"Kitchen Section",key:"kitchen"},{Component:yA,icon:"fa-solid fa-house",label:"Living Hall Section",key:"livingHall"},{Component:vA,icon:"fa-solid fa-shirt",label:"Wardrobe Section",key:"wardrobe"}];function PA(){var V,oe,F,W,ue;const{projectId:t,organizationId:a}=Re(),{role:r}=Z(),{isMobile:l,openMobileSidebar:o}=We(),[d,m]=A.useState(""),[x,h]=A.useState(!1),[p,g]=A.useState(null),{data:y,isLoading:j,error:E,refetch:b}=oA({projectId:t}),{mutateAsync:k,isPending:w}=cA(),{mutateAsync:C,isPending:v}=dA(),{mutateAsync:N,isPending:T}=uA(),{mutateAsync:P,isPending:D}=mA(),{mutateAsync:$,isPending:q}=sA();if(j)return e.jsx(jt,{});const H=async()=>{var re,R;if(window.confirm("Are you sure want to mark it as completed?"))try{v||(await C({formId:y._id,projectId:t}),_({title:"Success",description:"completion updated successfully"}))}catch(z){_({title:"Error",description:((R=(re=z==null?void 0:z.response)==null?void 0:re.data)==null?void 0:R.message)||"Failed to update to complete the form",variant:"destructive"})}},he=async re=>{try{const R=["owner","staff","CTO"];if(!r)throw new Error("Not Authorized");if(!R.includes(r))throw new Error("Dont have the access");await navigator.clipboard.writeText(re),h(!0),_({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>h(!1),4e3)}catch(R){_({title:"Error",description:R.message||"Failed to copy link",variant:"destructive"})}},K=async()=>{var re,R;try{const z=await k({projectId:t});m(z.inviteLink||z),_({title:"Success",description:"Invitation link generated successfully"})}catch(z){_({title:"Error",description:((R=(re=z==null?void 0:z.response)==null?void 0:re.data)==null?void 0:R.message)||z.message||"Failed to generate invitation link",variant:"destructive"})}},B=async()=>{try{await navigator.clipboard.writeText(d),h(!0),_({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>h(!1),2e3)}catch{_({title:"Error",description:"Failed to copy link",variant:"destructive"})}},te=()=>{const re=`You're requeted to fill the form, Click this link to fill the form: ${d}`,R=`https://wa.me/?text=${encodeURIComponent(re)}`;window.open(R,"_blank")};return e.jsx("div",{className:"h-full w-full overflow-y-auto ",children:p?e.jsx("div",{className:"min-h-screen",children:B0.map(({Component:re,key:R})=>p===R&&e.jsx("div",{className:"pt-6",children:e.jsx(re,{data:y==null?void 0:y[R],isEditable:y==null?void 0:y.isEditable,setVisibleSection:g})},R))}):e.jsxs("div",{className:"h-full w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col w-full sm:flex-row justify-between sm:items-center items-start gap-4",children:[e.jsx("div",{className:"",children:e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})," ",e.jsx("i",{className:"fa-solid fa-pencil mr-2"})," Client Requirement"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-end lg:justify-end",children:[e.jsxs(L,{isLoading:v,onClick:H,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:1,stagePath:"requirementform",className:"sm:!max-w-[20%] w-full"}),e.jsx(rs,{stageName:"RequirementFormModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),E&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((oe=(V=E==null?void 0:E.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to load data"}),e.jsx(L,{onClick:()=>b(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!E&&e.jsxs("main",{className:"h-[calc(100vh-90px)] overflow-y-auto custom-scrollbar space-y-6",children:[e.jsxs(Pe,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{startedAt:(F=y==null?void 0:y.timer)==null?void 0:F.startedAt,projectId:t,stageName:"requirementform",refetchStageMutate:b,completedAt:(W=y==null?void 0:y.timer)==null?void 0:W.completedAt,deadLine:(ue=y==null?void 0:y.timer)==null?void 0:ue.deadLine,formId:y==null?void 0:y._id,deadLineMutate:N,isPending:T})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(EA,{client:y==null?void 0:y.clientData}),e.jsx(Pe,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(By,{formId:y==null?void 0:y._id,existingUploads:y==null?void 0:y.uploads,onUploadComplete:b,uploadFilesMutate:P,uploadPending:D,projectId:t,refetch:b,onDeleteUpload:$,deleteFilePending:q})})]}),e.jsx(OA,{sections:B0,setVisibleSection:g}),e.jsx("div",{className:"pb-6",children:y!=null&&y.projectId?e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(de,{value:`http://localhost:5173/requirementform/${t}/token=${y==null?void 0:y.shareToken}`,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(L,{onClick:()=>he(`http://localhost:5173/requirementform/${t}/token=${y==null?void 0:y.shareToken}`),className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${x?"fa-check":"fa-copy"}`})})]})]}):e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-lg space-y-4",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-blue-900 flex items-center",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request to fill the form by generating a link."}),d?e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(de,{value:d,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(L,{onClick:B,className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${x?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(L,{onClick:te,className:"w-full sm:w-auto bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(L,{onClick:B,className:"w-full sm:w-auto border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]})]}):e.jsxs(L,{onClick:K,isLoading:w,className:"w-full bg-blue-600 text-white py-2.5 sm:py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]})]})})]})]})})}const MA=async({projectId:t,siteDetails:a,api:r})=>{const{data:l}=await r.post(`/sitemeasurement/createmeasurement/${t}`,{siteDetails:a});if(!l.ok)throw new Error(l.message);return l.data},LA=async({projectId:t,room:a,api:r})=>{const{data:l}=await r.post(`/sitemeasurement/createroom/${t}`,{room:a});if(!l.ok)throw new Error(l.message);return l.data},_A=async({projectId:t,api:a})=>{const{data:r}=await a.get(`/sitemeasurement/getmeasurement/${t}`);if(!r.ok)throw new Error(r.message);return r.data},FA=async({projectId:t,api:a,payload:r})=>{const{data:l}=await a.put(`/sitemeasurement/updatecommonmeasurement/${t}`,r);if(!l.ok)throw new Error(l.message);return l.data},DA=async({projectId:t,api:a,roomId:r,room:l})=>{const{data:o}=await a.put(`/sitemeasurement/updateroommeasurement/${t}/${r}`,{room:l});if(!o.ok)throw new Error(o.message);return o.data},qA=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/sitemeasurement/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},zA=async({projectId:t,roomId:a,api:r})=>{const{data:l}=await r.patch(`/sitemeasurement/deleteroom/${t}/${a}`);if(!l.ok)throw new Error(l.message);return l.data},UA=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/sitemeasurement/deletesitemeasurement/${t}`);if(!r.ok)throw new Error(r.message);return r.data},$A=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/sitemeasurement/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},IA=async({formId:t,files:a,api:r,projectId:l})=>{const o=new FormData;a.forEach(m=>o.append("file",m));for(let[m,x]of o.entries())console.log(m,x);const d=await r.post(`/sitemeasurement/upload/multiple/${l}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}});return console.log("reposen",d),d.data},BA=async(t,a,r)=>{const{data:l}=await r.patch(`/sitemeasurement/${t}/deleteuploadedfile/${a}`);if(!l.ok)throw new Error(l.message);return l.data},HA=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO","client"];return ie({mutationFn:async({projectId:l,fileId:o})=>{if(!t||!r.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await BA(l,o,a)},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["siteMeasurement",o]})}})},QA=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:r}=Z(),l=J(r);return qe({queryKey:["siteMeasurement"],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await _A({projectId:t,api:l})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},GA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,siteDetails:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await MA({projectId:l,api:r,siteDetails:o})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},KA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,room:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await LA({projectId:l,api:r,room:o})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},VA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,payload:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await FA({projectId:l,api:r,payload:o})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},YA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,roomId:o,room:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await DA({projectId:l,api:r,roomId:o,room:d})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},WA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await qA({projectId:l,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},XA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await zA({projectId:l,api:r,roomId:o})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},ZA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await UA({projectId:l,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},JA=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await $A({formId:l,deadLine:d,projectId:o,api:r})}})},e4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await IA({formId:l,files:o,projectId:d,api:r})}})},t4=({room:t,onEdit:a,onDelete:r,deleteRoomLoading:l})=>{const o=t.length&&t.breadth?(t.length*t.breadth).toFixed(2):null;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:t.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(t),className:"text-blue-600 hover:text-blue-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(L,{isLoading:l,onClick:r,variant:"ghost",className:"!text-red-600 hover:text-red-800 bg-white shadow-none hover:!bg-none",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Length"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.length," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Breadth"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.breadth," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Height"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.height||"N/A"," ft"]})]})]}),o&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-blue-700 font-medium text-center",children:["Total Area: ",o," sq.ft"]})})]})},s4=({measurementData:t,handleDeleteSiteMeasurement:a,deleteRoomLoading:r,setShowSiteForm:l,setShowRoomForm:o,handleEditRoom:d,handleDeleteRoom:m})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Site Measurements"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(!0),className:"px-2 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit"}),e.jsx("button",{onClick:()=>a(),className:"px-2 sm:px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Plot Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.totalPlotAreaSqFt!==null?`${t.siteDetails.totalPlotAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Built-up Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.builtUpAreaSqFt!=null?`${t.siteDetails.builtUpAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Road Facing"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.roadFacing===!0?"YES":t.siteDetails.roadFacing===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Number of Floors"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.numberOfFloors!=null?t.siteDetails.numberOfFloors:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is having Slope"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.hasSlope===!0?"YES":t.siteDetails.hasSlope===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is Boundary Wall exists"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.boundaryWallExists===!0?"YES":t.siteDetails.boundaryWallExists===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Additional Notes"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.additionalNotes?t.siteDetails.additionalNotes:"Not mentioned"})]})]})]}),t.siteDetails.totalPlotAreaSqFt!==null&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Rooms"}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Add Room"})]}),t.rooms.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("p",{className:"text-gray-500",children:"No rooms added yet"})]}):e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.rooms.map((x,h)=>e.jsx(t4,{room:x,onEdit:()=>d(x),onDelete:()=>m(x._id),deleteRoomLoading:r},h))})]})]}),a4=A.memo(s4),n4=({roomDetails:t,setRoomDetails:a,handleRoomSubmit:r,setShowRoomForm:l,updateRoomLoading:o,createRoomLoading:d,editingRoomId:m})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:m?"Edit Room":"Add New Room"}),e.jsxs("select",{value:t.name||"",onChange:x=>a(h=>({...h,name:x.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",children:[e.jsx("option",{value:"",children:"Select Room Type"}),P2.map(x=>e.jsx("option",{value:x,children:x}))]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Length (ft)"}),e.jsx("input",{type:"number",placeholder:"Length (ft)",value:t.length||0,onChange:x=>a({...t,length:Number(x.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Breadth (ft)"}),e.jsx("input",{type:"number",placeholder:"Breadth (ft)",value:t.breadth||0,onChange:x=>a({...t,breadth:Number(x.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Height (ft)"}),e.jsx("input",{type:"number",placeholder:"Height (ft)",value:t.height||0,onChange:x=>a({...t,height:Number(x.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.length&&t.breadth&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-blue-700 font-medium",children:["Calculated Area: ",(Number(t.length)*Number(t.breadth)).toFixed(2)," sq.ft"]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(L,{isLoading:m?o:d,onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Edit Room":"Add Room"})]})]})}),r4=({siteDetails:t,updatePending:a,setSiteDetails:r,handleSiteSubmit:l,setShowSiteForm:o})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Site Measurements"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Total Plot Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Total Plot Area (sq.ft)",value:t.totalPlotAreaSqFt||0,onChange:d=>r({...t,totalPlotAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Built-up Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Built-up Area (sq.ft)",value:t.builtUpAreaSqFt||0,onChange:d=>r({...t,builtUpAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Number of Floors"}),e.jsx("input",{type:"number",placeholder:"Number of Floors",value:t.numberOfFloors||0,onChange:d=>r({...t,numberOfFloors:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.hasSlope??!1,onChange:d=>r({...t,hasSlope:d.target.checked}),className:"mr-2"}),"Has Slope"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.roadFacing??!1,onChange:d=>r({...t,roadFacing:d.target.checked}),className:"mr-2"}),"Road Facing"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.boundaryWallExists??!1,onChange:d=>r({...t,boundaryWallExists:d.target.checked}),className:"mr-2"}),"Boundary Wall Exists"]})]}),e.jsx("textarea",{placeholder:"Additional Notes",value:t.additionalNotes||"",onChange:d=>r({...t,additionalNotes:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",rows:4}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(L,{variant:"secondary",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(L,{variant:"primary",onClick:l,isLoading:a,children:"Save Details"})]})]})}),l4=A.memo(r4),i4={totalPlotAreaSqFt:null,builtUpAreaSqFt:null,roadFacing:null,numberOfFloors:null,hasSlope:!1,boundaryWallExists:!1,additionalNotes:null},H0={name:null,length:null,breadth:null,height:null};function o4(){var z,M,G,Y,ge;const{projectId:t,organizationId:a}=Re(),{isMobile:r,openMobileSidebar:l}=We();if(!t)return;const[o,d]=A.useState(!1),[m,x]=A.useState(!1),[h,p]=A.useState(i4),[g,y]=A.useState(H0),[j,E]=A.useState(null);let{data:b,isLoading:k,refetch:w,error:C}=QA({projectId:t});const v=GA(),N=KA(),T=VA(),P=YA(),D=XA(),$=ZA(),q=WA(),{mutateAsync:H,isPending:he}=JA(),{mutateAsync:K,isPending:B}=e4(),{mutateAsync:te,isPending:V}=HA(),oe=async()=>{var se,Ne;try{b?await T.mutateAsync({projectId:t,payload:h}):await v.mutateAsync({projectId:t,siteDetails:h}),d(!1),_({description:"Site details updated successfully",title:"Success"})}catch(be){_({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||be.message||"Failed to save site details",variant:"destructive"})}},F=async()=>{var se,Ne;try{if(!g.name)throw new Error("please select the name");const be=g.length&&g.breadth?(Number(g.length)*Number(g.breadth)).toFixed(2):null,Ke={...g,area:be};j?await P.mutateAsync({projectId:t,roomId:j,room:Ke}):await N.mutateAsync({projectId:t,room:Ke}),x(!1),E(null),y(H0),_({description:j?"Room updated":"Room added",title:"Success"})}catch(be){_({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Operation failed",variant:"destructive"})}},W=async se=>{var Ne,be;try{await D.mutateAsync({projectId:t,roomId:se}),_({description:"Room deleted",title:"Success"})}catch(Ke){_({title:"Error",description:((be=(Ne=Ke==null?void 0:Ke.response)==null?void 0:Ne.data)==null?void 0:be.message)||"Delete failed",variant:"destructive"})}},ue=async()=>{var se,Ne;try{await $.mutateAsync({projectId:t}),_({description:"Site measurement deleted",title:"Success"})}catch(be){_({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||"Delete failed",variant:"destructive"})}},re=async()=>{var se,Ne;try{await q.mutateAsync({projectId:t}),_({description:"Completion updated",title:"Success"})}catch(be){_({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||"Update failed",variant:"destructive"})}},R=se=>{y(se),E(se==null?void 0:se._id),x(!0)};return k?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-2 max-w-full h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"})," Site Measurement"]}),e.jsx("p",{className:"text-gray-600 hidden sm:block text-sm sm:text-base",children:"Plan your dream home"})]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-start lg:justify-end",children:[e.jsxs(L,{isLoading:q.isPending,onClick:re,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2  w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"})," Mark Complete"]}),e.jsx(ws,{projectId:t,stageNumber:2,stagePath:"sitemeasurement",className:"sm:!max-w-[20%] w-full"}),e.jsx(rs,{stageName:"SiteMeasurementModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),C&&e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((M=(z=C==null?void 0:C.response)==null?void 0:z.data)==null?void 0:M.message)||"Failed to load data"}),e.jsx(L,{onClick:()=>w(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!C&&e.jsxs(Pe,{className:"p-4 mb-4 shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(G=b==null?void 0:b.timer)==null?void 0:G.compltedAt,stageName:"sitemeasurement",formId:b==null?void 0:b._id,projectId:t,deadLine:(Y=b==null?void 0:b.timer)==null?void 0:Y.deadLine,startedAt:(ge=b==null?void 0:b.timer)==null?void 0:ge.startedAt,refetchStageMutate:w,deadLineMutate:H,isPending:he})]}),!C&&e.jsx("div",{className:"mb-6",children:e.jsx(Pe,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(By,{formId:b==null?void 0:b._id,refetch:w,existingUploads:b==null?void 0:b.uploads,onUploadComplete:w,uploadFilesMutate:K,uploadPending:B,projectId:t,onDeleteUpload:te,deleteFilePending:V})})}),!C&&e.jsxs(e.Fragment,{children:[!Object.values((b==null?void 0:b.siteDetails)||{}).some(se=>se!==null)&&!o?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No Site Details Added"}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add Site Details"})]}):e.jsx(a4,{measurementData:b,handleDeleteSiteMeasurement:ue,setShowSiteForm:d,setShowRoomForm:x,handleEditRoom:R,handleDeleteRoom:W,deleteRoomLoading:D.isPending}),o&&e.jsx(l4,{siteDetails:h,setSiteDetails:p,handleSiteSubmit:oe,setShowSiteForm:d,updatePending:T.isPending}),m&&e.jsx(n4,{handleRoomSubmit:F,setShowRoomForm:x,roomDetails:g,setRoomDetails:y,updateRoomLoading:P.isPending,createRoomLoading:N.isPending,editingRoomId:j})]})]})}const c4=async({projectId:t,roomName:a,api:r})=>{const{data:l}=await r.post(`/sampledesign/${t}/rooms`,{roomName:a});if(!l.ok)throw new Error(l.message);return l.data},d4=async({projectId:t,roomName:a,files:r,api:l})=>{const o=new FormData;r.forEach(m=>o.append("files",m));const{data:d}=await l.post(`/sampledesign/${t}/rooms/${a}/upload`,o,{headers:{"Content-Type":"multipart/form-data"}});if(!d.ok)throw new Error(d.message);return d.data},u4=async({projectId:t,api:a})=>{const{data:r}=await a.get(`/sampledesign/${t}/rooms`);if(!r.ok)throw new Error(r.message);return r.data},m4=async({projectId:t,roomName:a,fileIndex:r,api:l})=>{const{data:o}=await l.delete(`/sampledesign/${t}/rooms/${a}/delete/${r}`);if(!o.ok)throw new Error(o.message);return o.data},f4=async({projectId:t,api:a,roomId:r})=>{const{data:l}=await a.delete(`/sampledesign/${t}/${r}/deleteroom`);if(!l.ok)throw new Error(l.message);return l.data},h4=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/sampledesign/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},x4=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/sampledesign/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},p4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,roomName:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await c4({projectId:l,roomName:o,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["sampledesign","rooms"]})}})},g4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,roomName:o,files:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await d4({projectId:l,roomName:o,files:d,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},b4=t=>{const a=["owner","staff","CTO","client"],{role:r}=Z(),l=J(r);return qe({queryKey:["sampledesign","roomfiles",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await u4({projectId:t,api:l})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},y4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,roomName:o,fileIndex:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await m4({projectId:l,roomName:o,fileIndex:d,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},w4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await f4({projectId:l,roomId:o,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},v4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await h4({projectId:l,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},j4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await x4({formId:l,projectId:o,deadLine:d,api:r})}})},N4=({isOpen:t,onClose:a,onSubmit:r,addPending:l})=>{const[o,d]=A.useState(""),m=async x=>{x.preventDefault(),await r(o),d(""),a()};return t?e.jsx("div",{onClick:a,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{onClick:x=>x.stopPropagation(),className:"bg-white rounded-lg p-6 w-[80%] sm:w-[60%] lg:w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4",children:"Add New Room"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Room Name"}),e.jsx("input",{type:"text",value:o,onChange:x=>d(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx(L,{isLoading:l,type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Room"})]})]})]})}):null},S4=({files:t,onUpload:a,onDelete:r,uploadPending:l,deletePending:o})=>{const d=A.useRef(null),[m,x]=A.useState([]),h=t.filter(b=>b.type==="pdf"),p=t.filter(b=>b.type==="image"),[g,y]=A.useState(null),j=b=>{var k;(k=b.target.files)!=null&&k.length&&x(Array.from(b.target.files))},E=async()=>{var b,k;if(m.length!==0)try{await a(m),_({description:"File uploaded successfully",title:"Success"})}catch(w){_({title:"Error",description:((k=(b=w==null?void 0:w.response)==null?void 0:b.data)==null?void 0:k.message)||w.message||" Failed to upload the files",variant:"destructive"})}};return e.jsxs("div",{className:"bg-white h-auto rounded-lg p-2 sm:p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs("div",{className:"w-full space-x-2",children:[e.jsx("input",{id:"fileInput",ref:d,type:"file",accept:".pdf,image/*",multiple:!0,className:"mb-1 sm:mb-0 w-[55%] sm:w-[80%] h-full py-2 border-1 px-2 rounded-lg",onChange:j}),e.jsxs(L,{variant:"primary",onClick:()=>{var b;return(b=d.current)==null?void 0:b.click()},className:"",children:[e.jsx("span",{className:"hidden sm:block",children:" Select Files"}),e.jsx("span",{className:"block sm:hidden",children:" Select"})]}),e.jsx(L,{isLoading:l,onClick:E,className:"px-2 sm:px-4 py-2 rounded-lg",variant:"primary",children:"upload"})]})}),e.jsxs("div",{className:"grid h-auto grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-file-pdf text-lg"}),e.jsx("h3",{className:"font-medium",children:"PDF Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:h.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No PDF files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%]",children:h.map((b,k)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[100%] flex-1 ",children:b.originalName||"Unnamed PDF"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{onClick:()=>Kt({src:b==null?void 0:b.url,alt:(b==null?void 0:b.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",isLoading:o,onClick:()=>r(k),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},k))})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-images text-lg"}),e.jsx("h3",{className:"font-medium",children:"Image Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:p.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No image files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%] ",children:p.map((b,k)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[80%] ",children:b.originalName||"Unnamed Image"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>y(b==null?void 0:b.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(L,{onClick:()=>Kt({src:b==null?void 0:b.url,alt:(b==null?void 0:b.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",isLoading:o,onClick:()=>r(k),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},k))})})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:b=>b.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},C4=()=>{var q,H,he,K,B;const{projectId:t,organizationId:a}=Re(),{isMobile:r,openMobileSidebar:l}=We();if(!t)return null;const[o,d]=A.useState(!1),m=p4(),x=g4(),h=y4(),{mutateAsync:p,isPending:g}=w4(),{data:y,isLoading:j,refetch:E,error:b}=b4(t),{mutateAsync:k,isPending:w}=v4(),{mutateAsync:C,isPending:v}=j4(),N=async()=>{var te,V;try{w||await k({projectId:t}),_({description:"Completion status updated successfully",title:"Success"})}catch(oe){_({title:"Error",description:((V=(te=oe==null?void 0:oe.response)==null?void 0:te.data)==null?void 0:V.message)||"Failed to update completion status",variant:"destructive"})}},T=async te=>{var V,oe;try{await m.mutateAsync({projectId:t,roomName:te}),_({description:"Room Created successfully",title:"Success"})}catch(F){_({title:"Error",description:((oe=(V=F==null?void 0:F.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to create room status",variant:"destructive"})}},P=async te=>{var V,oe;try{w||await p({projectId:t,roomId:te}),_({description:"Room section Deleted successfully",title:"Success"})}catch(F){_({title:"Error",description:((oe=(V=F==null?void 0:F.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to delete the room",variant:"destructive"})}},D=async(te,V)=>{var oe,F;try{await x.mutateAsync({projectId:t,roomName:te,files:V}),_({description:"File uploaded successfully",title:"Success"}),E()}catch(W){_({title:"Error",description:((F=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:F.message)||" Failed to upload the files",variant:"destructive"})}},$=async(te,V)=>{var oe,F;try{await h.mutateAsync({projectId:t,roomName:te,fileIndex:V}),_({description:"File deleted successfully",title:"Success"}),E()}catch(W){_({title:"Error",description:((F=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:F.message)||"Failed to delete the files",variant:"destructive"})}};return j?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full min-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md  border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-object-group mr-2"}),"Sample Design Files"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsxs(L,{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!b,children:[e.jsx("i",{className:"fas fa-plus mr-2"}),e.jsx("span",{className:"",children:"Add room"})]}),e.jsxs(L,{isLoading:w,onClick:N,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!b,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:3,stagePath:"sampledesign",className:"flex-1 sm:flex-initial min-w-max",disabled:!!b}),e.jsx(rs,{stageName:"SampleDesignModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),b&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((H=(q=b==null?void 0:b.response)==null?void 0:q.data)==null?void 0:H.message)||"Failed to load data"}),e.jsx(L,{onClick:()=>E(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"sampledesign",completedAt:(he=y==null?void 0:y.timer)==null?void 0:he.compltedAt,formId:y==null?void 0:y._id,projectId:t,deadLine:(K=y==null?void 0:y.timer)==null?void 0:K.deadLine,startedAt:(B=y==null?void 0:y.timer)==null?void 0:B.startedAt,refetchStageMutate:E,deadLineMutate:C,isPending:v})]}),!(y!=null&&y.rooms)||y.rooms.length===0?e.jsxs("div",{className:"text-center py-10 sm:py-16 bg-white rounded-lg shadow-sm",children:[e.jsx("i",{className:"fas fa-home text-blue-200 text-5xl sm:text-6xl mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Start by adding a room to upload design files"}),e.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 min-w-[200px]",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Your First Room"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:max-h-[60vh] md:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[65vh] overflow-y-auto custom-scrollbar gap-6",children:y.rooms.map(te=>e.jsxs("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-sm p-1 sm:p-6 flex flex-col",children:[e.jsxs("div",{className:"flex sm:flex-row items-center justify-between gap-3 mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-700 truncate",children:[e.jsx("i",{className:"fas fa-door-open mr-2"}),te.roomName]}),e.jsxs(L,{isLoading:g,onClick:()=>P(te._id),variant:"danger",className:"bg-red-600 text-white  sm:w-auto mt-2 sm:mt-0",children:[e.jsx("i",{className:"fa-solid fa-trash mr-2"}),"Delete"]})]}),e.jsx("div",{className:"flex-grow",children:e.jsx(S4,{files:te.files,onUpload:V=>D(te.roomName,V),onDelete:V=>$(te.roomName,V),uploadPending:x.isPending,deletePending:h.isPending})})]},te.roomName))})]}),e.jsx(N4,{isOpen:o,onClose:()=>d(!1),onSubmit:T,addPending:m.isPending})]})},k4=async({projectId:t,formData:a,api:r})=>{for(const[o,d]of a.entries())console.log("form data",o,d);const{data:l}=await r.post(`/technicalconsultation/createmessage/${t}`,a);if(!l.ok)throw new Error(l.message);return l.data},E4=async({projectId:t,api:a})=>{const{data:r}=await a.get(`/technicalconsultation/getmessages/${t}`);if(console.log("data form the message",r),!r.ok)throw new Error(r.message);return r.data},A4=async({projectId:t,messageId:a,message:r,senderId:l,senderRole:o,api:d})=>{const{data:m}=await d.put(`/technicalconsultation/editmessage/${t}/${a}`,{message:r,senderId:l,senderRole:o});if(!m.ok)throw new Error(m.message);return m.data},O4=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/technicalconsultation/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},R4=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/technicalconsultation/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},T4=t=>{const a=["owner","staff","CTO","worker"],{role:r}=Z(),l=J(r);return qe({queryKey:["consultationMessages",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await E4({projectId:t,api:l})},enabled:!!t,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1})},P4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,formData:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API not found");return await k4({projectId:l,formData:o,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["consultationMessages"]})}})},M4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,messageId:o,message:d,senderId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API not found");return await A4({projectId:l,messageId:o,message:d,senderId:m,senderRole:a,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["consultationMessages"]})}})},L4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await R4({projectId:l,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["siteMeasurement"]})}})},_4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!r)throw new Error("api is null");return await O4({formId:l,projectId:o,deadLine:d,api:r})}})},F4=()=>{var R,z,M,G,Y,ge;const{projectId:t,organizationId:a}=Re(),{isMobile:r,openMobileSidebar:l}=We(),{role:o,_id:d}=Z(),[m,x]=A.useState(""),[h,p]=A.useState([]),[g,y]=A.useState(null),[j,E]=A.useState(""),[b,k]=A.useState(null),[w,C]=A.useState(!1);let{data:v,isLoading:N,error:T,isError:P,refetch:D}=T4(t);const $=v,{mutateAsync:q,isPending:H}=P4(),{mutateAsync:he,isPending:K}=M4(),{mutateAsync:B,isPending:te}=_4(),V=L4(),oe=async()=>{var se,Ne;try{await V.mutateAsync({projectId:t}),_({description:"Completion status updated successfully",title:"Success"})}catch(be){_({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||be.message||"Failed to update completion status",variant:"destructive"})}},F=async()=>{var se,Ne;try{if(!m&&h.length===0)throw new Error("please write anything");const be=new FormData;m&&be.append("message",m),o&&be.append("senderRole",o),be.append("sender",d),h.forEach(Ke=>be.append("attachments",Ke)),await q({projectId:t,formData:be}),x(""),p([]),_({description:"message sent successfully",title:"Success"})}catch(be){_({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Failed to send the message",variant:"destructive"})}},W=(se,Ne)=>{y(se),E(Ne)},ue=()=>{y(null),E("")},re=async()=>{var se,Ne;try{if(!g||!j)throw new Error("please write anything");await he({projectId:t,messageId:g,message:j,senderId:d}),y(null),E(""),_({description:"message edited successfully",title:"Success"})}catch(be){_({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Failed to edit the message",variant:"destructive"})}};return N?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full max-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-2",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-comments mr-2"})," Technical Consultation"]}),e.jsxs("div",{className:"w-full lg:w-[60%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs(L,{isLoading:V.isPending,onClick:oe,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:4,stagePath:"technicalconsultation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"TechnicalConsultationModel",projectId:t,organizationId:a,currentAssignedStaff:($==null?void 0:$.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),e.jsxs(Pe,{className:"p-4 mb-3 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"technicalconsultation",completedAt:(R=$==null?void 0:$.timer)==null?void 0:R.completedAt,projectId:t,formId:$==null?void 0:$._id,deadLine:(z=$==null?void 0:$.timer)==null?void 0:z.deadLine,startedAt:(M=$==null?void 0:$.timer)==null?void 0:M.startedAt,refetchStageMutate:D,deadLineMutate:B,isPending:te})]}),e.jsx("div",{className:" flex flex-col bg-white rounded-xl p-2 shadow-md border custom-scrollbar min-h-[200px] sm:min-h-[170px] md:min-h-[190px] lg:min-h-[300px] border-gray-200 mb-2 flex-grow max-h-[70vh] sm:!max-h-[30vh] md:!max-h-[30vh] lg:!max-h-[42vh] xl:!max-h-[49vh] overflow-y-auto ",children:e.jsxs("div",{className:"flex flex-col-reverse overflow-y-auto custom-scrollbar  flex-grow p-2  md:!max-h-full space-y-reverse space-y-4",children:[(P||T)&&e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-ban text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:((Y=(G=T==null?void 0:T.response)==null?void 0:G.data)==null?void 0:Y.message)||(T==null?void 0:T.message)||"Failed to load messages, please try again"}),e.jsxs(L,{onClick:()=>D(),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx("i",{className:"fas fa-redo mr-2"})," Retry"]})]})}),N?e.jsxs("div",{className:"flex h-full items-center justify-center py-10",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-2xl"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Loading messages..."})]}):($==null?void 0:$.messages.length)===0?e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-envelope text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"No messages have been posted yet."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start the conversation using the box below."})]})}):e.jsx("div",{className:"overflow-y-auto custom-scrollbar flex flex-col-reverse space-y-reverse space-y-4",children:(ge=$==null?void 0:$.messages)==null?void 0:ge.slice().sort((se,Ne)=>new Date(Ne.createdAt).getTime()-new Date(se.createdAt).getTime()).map(se=>{var Ne;return e.jsxs("div",{className:"bg-blue-50 w-full group px-4 py-[5px] rounded-lg shadow flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs sm:text-[10px] text-gray-600",children:[se.senderRole.toUpperCase()," - ",new Date(se.createdAt).toLocaleString(),se.isEdited&&e.jsxs(sl,{className:"sm:ml-2 my-1 sm:my-0",children:[" ",e.jsxs("p",{className:"hidden sm:inline-block",children:["message is  "," "," "]}),"  edited by ",se.senderRole]})]}),e.jsx("div",{className:"opacity-0 scale-95 group-hover:opacity-100 transition-all duration-300",children:(se.sender===d||o==="owner"||o==="CTO")&&e.jsx("div",{className:"flex gap-2",children:e.jsx(L,{variant:"secondary",onClick:()=>W(se._id,se.message),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fas fa-edit"})})})})]}),g===se._id?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mt-2",children:[e.jsx(de,{value:j,onChange:be=>E(be.target.value),className:"flex-grow"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(L,{isLoading:K,onClick:re,className:"w-full sm:w-auto",children:"Save"}),e.jsx(L,{variant:"danger",className:"w-full sm:w-auto border-red-200 hover:bg-red-700 bg-red-600 text-white",onClick:ue,children:"Cancel"})]})]}):e.jsx("p",{className:"text-gray-900 text-sm",children:se.message}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-3",children:(Ne=se.attachments)==null?void 0:Ne.map((be,Ke)=>e.jsxs("div",{className:"flex items-center gap-2 bg-white border px-3 py-2 rounded shadow-sm w-full max-w-[280px]",children:[e.jsx("i",{className:`fas ${be.type==="pdf"?"fa-file-pdf text-red-500":"fa-image text-blue-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 truncate flex-grow min-w-0",children:be.originalName}),be.type==="image"&&e.jsx(L,{size:"sm",variant:"primary",onClick:()=>{k(be.url),C(!0)},children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(L,{onClick:()=>Kt({src:be==null?void 0:be.url,alt:(be==null?void 0:be.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})})]},Ke))})]},se._id)})})]})}),e.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl shadow-md",children:[e.jsx(me,{htmlFor:"message",children:"Your Message"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-3",children:[e.jsx(de,{id:"message",placeholder:"Write something...",value:m,onChange:se=>x(se.target.value),onKeyDown:se=>{se.key==="Enter"&&F()},className:"flex-grow"}),e.jsxs(L,{isLoading:H,onClick:F,className:"w-full sm:w-auto",children:["Send ",e.jsx("i",{className:"ml-2 fa-solid fa-paper-plane"})]})]}),e.jsx(me,{children:"Attach Files (PDF or Image)"}),e.jsx(de,{type:"file",multiple:!0,accept:".pdf,image/*",onChange:se=>p(Array.from(se.target.files||[])),className:""})]}),b&&e.jsx("div",{onClick:()=>k(null),className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{onClick:se=>se.stopPropagation(),className:"bg-white p-2 sm:p-4 rounded-lg shadow-lg max-w-[90%] max-h-[90%] overflow-auto relative",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:()=>k(null),className:"text-red-500 text-xl",children:e.jsx("i",{className:"fas fa-times"})})}),e.jsxs("div",{className:"relative min-w-80 ",children:[w&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-gray-600"})}),e.jsx("img",{src:b,onLoad:()=>C(!1),loading:"lazy",alt:"Preview",className:`max-h-[80vh] rounded transition duration-500 ${w?"blur-sm scale-105":""}`})]})]})})]})};function Q0({room:t,projectId:a,organizationId:r}){var o;const l=Me();return e.jsxs("div",{onClick:()=>l(`/${r}/projectdetails/${a}/materialselection/materialroom/${t._id}`),className:"cursor-pointer border-l-6 border-blue-600 shadow-md hover:border-blue-400 transition-all duration-200 rounded-lg p-5 bg-white hover:shadow-lg flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-sm  text-blue-500",children:["No of Fields:",(o=Object.keys(t.roomFields))==null?void 0:o.length]})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium underline hover:no-underline",children:"View "})]})}const D4=async({projectId:t,api:a})=>{const{data:r}=await a.get(`/materialconfirmation/${t}`);if(!r.ok)throw new Error(r.message);return console.log(r),r.data},q4=async({projectId:t,roomId:a,api:r})=>{const{data:l}=await r.get(`/materialconfirmation/${t}/predefinedroom/${a}`);if(!l.ok)throw new Error(l.message);return l.data},z4=async({projectId:t,roomId:a,fieldKey:r,updates:l,api:o})=>{const{data:d}=await o.put(`/materialconfirmation/${t}/predefinedroom/${a}/field/${r}`,l);if(!d.ok)throw new Error(d.message);return d.data},U4=async({projectId:t,name:a,api:r})=>{const{data:l}=await r.post(`/materialconfirmation/${t}/customroom`,{name:a});if(!l.ok)throw new Error(l.message);return l.data},$4=async({projectId:t,roomId:a,fieldKey:r,api:l})=>{const{data:o}=await l.delete(`/materialconfirmation/${t}/customroom/${a}/field/${r}`);if(!o.ok)throw new Error(o.message);return o.data},I4=async({projectId:t,roomId:a,formData:r,api:l})=>{const{data:o}=await l.post(`/materialconfirmation/${t}/uploads/${a}`,r);if(!o.ok)throw new Error(o.message);return o.data},B4=async({projectId:t,roomId:a,fileId:r,api:l})=>{const{data:o}=await l.patch(`/materialconfirmation/${t}/deleteuploadedfile/${a}/${r}`);if(!o.ok)throw new Error(o.message);return o.data},H4=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/materialconfirmation/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},Q4=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/materialconfirmation/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},G4=t=>{const a=["owner","staff","CTO","client","worker"],{role:r}=Z(),l=J(r);return qe({queryKey:["material-confirmation",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await D4({projectId:t,api:l})},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},K4=({projectId:t,roomId:a})=>{const r=["owner","staff","CTO","client","worker"],{role:l}=Z(),o=J(l);return qe({queryKey:["material-room",t,a],queryFn:async()=>{if(!l||!r.includes(l))throw new Error("Not authorized");if(!o)throw new Error("API instance unavailable");return await q4({projectId:t,roomId:a,api:o})},enabled:!!t&&!!a,retry:!1,refetchOnWindowFocus:!1})},V4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomId:d,fieldKey:m,updates:x})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance not available");return await z4({projectId:o,roomId:d,fieldKey:m,updates:x,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["material-confirmation",d]})}})},Y4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,name:d})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance not available");return await U4({projectId:o,name:d,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["material-confirmation",d]})}})},W4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomId:d,fieldKey:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance not available");return await $4({projectId:o,roomId:d,fieldKey:m,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["material-confirmation",d]})}})},X4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomId:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance missing");return await I4({projectId:o,roomId:d,formData:m,api:r})},onSuccess:(o,{projectId:d,roomId:m})=>{l.invalidateQueries({queryKey:["material-room",d,m]})}})},Z4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomId:d,fileId:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance missing");return await B4({projectId:o,roomId:d,fileId:m,api:r})},onSuccess:(o,{projectId:d,roomId:m})=>{l.invalidateQueries({queryKey:["material-room",d,m]})}})},J4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance missing");return await H4({formId:o,projectId:d,deadLine:m,api:r})},onSuccess:()=>{l.invalidateQueries({queryKey:["material-rooms"]})}})},eO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance missing");return await Q4({projectId:o,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["material-rooms",d]})}})},tO=({onClose:t,projectId:a})=>{const[r,l]=A.useState(""),{mutateAsync:o,isPending:d}=Y4(),m=async()=>{var x,h;if(!r.trim()){_({title:"Error",description:"Room name is required",variant:"destructive"});return}try{await o({projectId:a,name:r}),_({title:"Success",description:"Room created successfully "}),t()}catch(p){_({title:"Error",description:((h=(x=p==null?void 0:p.response)==null?void 0:x.data)==null?void 0:h.message)||p.message||"Failed to create room",variant:"destructive"})}};return e.jsx("div",{onClick:t,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsxs("div",{children:[e.jsxs(me,{htmlFor:"roomName",className:"text-sm text-gray-700",children:["Room Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(de,{id:"roomName",value:r,onChange:x=>l(x.target.value),placeholder:"e.g., Master Bedroom, Kitchen",className:"mt-1"})]}),e.jsx(L,{onClick:m,disabled:d,className:"w-full bg-blue-600 text-white hover:bg-blue-700 transition rounded-xl",children:"Create Room"})]})})};function sO(){var P,D,$,q,H,he,K;const{projectId:t,organizationId:a}=Re(),{isMobile:r,openMobileSidebar:l}=We(),o=yt(),{data:d,isLoading:m,error:x,refetch:h}=G4(t),{mutateAsync:p,isPending:g}=J4(),{mutateAsync:y,isPending:j}=eO(),[E,b]=A.useState(!1);if(m)return e.jsx(jt,{});const k=!((P=d==null?void 0:d.customRooms)!=null&&P.length)&&!((D=d==null?void 0:d.rooms)!=null&&D.length),w=o.pathname.includes("/materialroom"),C=async()=>{var B,te;try{await y({projectId:t}),_({description:"Completion status updated successfully",title:"Success"})}catch(V){_({title:"Error",description:((te=(B=V==null?void 0:V.response)==null?void 0:B.data)==null?void 0:te.message)||V.message||"Failed to update completion status",variant:"destructive"})}},{rooms:v,customRooms:N}=d||{},T=((v==null?void 0:v.length)||0)+((N==null?void 0:N.length)||0);return e.jsx("div",{className:"flex flex-col h-full w-full  py-4",children:w?e.jsx(Vt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-box mr-2"})," Material Selection"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%]  flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap  md:flex-nowrap gap-2 justify-end",children:[e.jsxs(L,{isLoading:j,onClick:C,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),!w&&e.jsx(L,{variant:"primary",onClick:()=>b(!0),className:"bg-blue-600 text-white flex-1 sm:flex-initial min-w-max",children:"+ Add Room"})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:5,stagePath:"materialconfirmation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"MaterialRoomConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),x&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-4",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=($=x==null?void 0:x.response)==null?void 0:$.data)==null?void 0:q.message)||(x==null?void 0:x.message)||"Failed to load room data"}),e.jsx(L,{onClick:()=>h(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),e.jsx("div",{className:"flex-grow min-h-0 flex flex-col",children:!x&&e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(H=d==null?void 0:d.timer)==null?void 0:H.completedAt,stageName:"materialconfirmation",projectId:t,formId:d==null?void 0:d._id,deadLine:(he=d==null?void 0:d.timer)==null?void 0:he.deadLine,startedAt:(K=d==null?void 0:d.timer)==null?void 0:K.startedAt,refetchStageMutate:h,deadLineMutate:p,isPending:g})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold",children:["Total Rooms: ",T]})}),E&&e.jsx(zy,{open:E,onOpenChange:b,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-700",children:"Create New Room"}),e.jsx(tO,{onClose:()=>b(!1),projectId:t})]})}),e.jsx("div",{className:"flex-grow min-h-[100%] py-2 sm:!min-h-0  overflow-y-auto",children:k?e.jsx("div",{className:"h-full flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-door-open text-5xl sm:text-6xl text-blue-300 mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add rooms to start selecting materials"}),e.jsxs("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Your First Room"]})]})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[v==null?void 0:v.map(B=>e.jsx(Q0,{organizationId:a,room:B,projectId:t},B._id)),N==null?void 0:N.map(B=>e.jsx(Q0,{organizationId:a,room:B,projectId:t},B._id))]})})]})})]})})}const xn=()=>{const t=Array.from({length:11});return e.jsxs("div",{className:"w-full max-h-full overflow-hidden mx-auto mt-4 bg-white shadow rounded p-6",children:[e.jsx(Fe,{className:"h-6 w-40 mb-2"}),e.jsx(Fe,{className:"h-4 w-32 mb-6"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border border-gray-200 rounded-lg",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-100 text-left",children:["Item","Quantity","Unit","Remarks","Actions"].map((a,r)=>e.jsx("th",{className:"p-3",children:e.jsx(Fe,{className:"h-4 w-20"})},r))})}),e.jsx("tbody",{children:t.map((a,r)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx(Fe,{className:"h-4 w-32"})}),e.jsx("td",{className:"p-3",children:e.jsx(Fe,{className:"h-4 w-12"})}),e.jsx("td",{className:"p-3",children:e.jsx(Fe,{className:"h-4 w-10"})}),e.jsx("td",{className:"p-3",children:e.jsx(Fe,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-3",children:e.jsx(Fe,{className:"h-8 w-8 rounded-full"})})]},r))})]})})]})},G0={primary:"text-blue-400",danger:"text-red-400",success:"text-green-400",warning:"text-yellow-400",gray:"text-gray-400"},K0={envelope:"fas fa-envelope",box:"fas fa-box-open",message:"fas fa-comment-dots",chat:"fas fa-comments",warning:"fas fa-exclamation-triangle"},Hy=({message:t,icon:a="box",customIconClass:r,color:l="gray"})=>{const d=`${a==="custom"?r||"fas fa-question-circle":K0[a]||K0.box} text-7xl mb-4 ${G0[l]||G0.gray}`;return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center py-12 px-4 text-center",children:[e.jsx("i",{className:d}),e.jsx("p",{className:"text-lg text-gray-600",children:t})]})},aO=({projectId:t,roomId:a,initialFiles:r,refetch:l})=>{const[o,d]=A.useState([]),[m,x]=A.useState(r.filter(N=>N.type==="pdf")),[h,p]=A.useState(r.filter(N=>N.type==="image")),[g,y]=A.useState(null),{mutateAsync:j,isPending:E}=X4(),{mutateAsync:b,isPending:k}=Z4(),w=N=>{N.target.files&&d(Array.from(N.target.files))},C=async()=>{var T,P;if(o.length===0)return;const N=new FormData;o.forEach(D=>N.append("files",D));try{const D=await j({projectId:t,roomId:a,formData:N}),$=D.filter(H=>H.type==="pdf"),q=D.filter(H=>H.type==="image");x(H=>[...H,...$]),p(H=>[...H,...q]),d([]),_({title:"Success",description:"file uploaded successfully"}),l()}catch(D){_({title:"error",description:((P=(T=D==null?void 0:D.response)==null?void 0:T.data)==null?void 0:P.message)||"failed to upload file",variant:"destructive"})}},v=async(N,T)=>{var P,D;try{await b({projectId:t,roomId:a,fileId:N}),T==="pdf"?x($=>$.filter(q=>q._id!==N)):p($=>$.filter(q=>q._id!==N)),_({title:"Success",description:"deleted successfully"}),l()}catch($){_({title:"error",description:((D=(P=$==null?void 0:$.response)==null?void 0:P.data)==null?void 0:D.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 ",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(de,{type:"file",multiple:!0,onChange:w,accept:"image/*,application/pdf"}),e.jsx(L,{onClick:C,isLoading:E,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{onClick:()=>v(N._id,"pdf"),size:"sm",isLoading:k,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[h.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),h.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>y(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{onClick:()=>v(N._id,"image"),size:"sm",isLoading:k,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function nO(){const{projectId:t,roomId:a}=Re(),r=Me();if(!t||!a)return null;const{data:l,isLoading:o,refetch:d}=K4({projectId:t,roomId:a}),[m,x]=A.useState(null),[h,p]=A.useState({quantity:0,unit:"",remarks:""}),{mutateAsync:g,isPending:y}=V4(),{mutateAsync:j,isPending:E}=W4();if(o)return e.jsx(xn,{});if(!l)return e.jsx(Hy,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const b="items"in l,k=b?l.items.map(N=>[N.itemKey,N]):Object.entries(l.roomFields),w=(N,T)=>{x(N),p({quantity:T.quantity||0,unit:T.unit||"",remarks:T.remarks||""})},C=async N=>{var T,P;try{await g({projectId:t,roomId:a,fieldKey:N,updates:h}),x(null),_({description:"Field updated successfully",title:"Success"}),d()}catch(D){_({title:"Error",description:((P=(T=D==null?void 0:D.response)==null?void 0:T.data)==null?void 0:P.message)||D.message||"Failed to update field",variant:"destructive"})}},v=async N=>{var T,P;try{confirm("Are you sure you want to delete this field?")&&await j({projectId:t,roomId:a,fieldKey:N}),_({description:"Field deleted successfully",title:"Success"}),d()}catch(D){_({title:"Error",description:((P=(T=D==null?void 0:D.response)==null?void 0:T.data)==null?void 0:P.message)||D.message||"Failed to delete field",variant:"destructive"})}};return e.jsxs("div",{className:"flex flex-col h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:l.name}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Room Material Items"})]}),e.jsx(L,{variant:"primary",className:"h-10 text-sm sm:text-base",onClick:()=>r(-1),children:"Go Back"})]}),e.jsx("section",{className:"w-full min-h-[100%] flex flex-col",children:e.jsx("div",{className:"overflow-x-auto min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:"min-w-[700px] w-full flex flex-col border-2 border-gray-100 rounded-lg",children:[e.jsxs("div",{className:"rounded-md grid grid-cols-5 bg-gray-100 text-sm font-semibold text-gray-700 px-2 sm:px-4 py-3 sticky top-0 z-10",children:[e.jsx("div",{className:"truncate text-center",children:"Item"}),e.jsx("div",{className:"truncate text-center",children:"Quantity"}),e.jsx("div",{className:"truncate text-center",children:"Unit"}),e.jsx("div",{className:"truncate text-center",children:"Remarks"}),e.jsx("div",{className:"truncate text-center",children:"Actions"})]}),e.jsx("div",{className:"flex-grow min-h-0 overflow-y-auto custom-scrollbar",children:k.map(([N,T])=>e.jsxs("div",{className:"grid text-center mx-auto grid-cols-5 items-center px-2 sm:px-4 py-3 text-sm hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate pr-2",children:N}),m===N?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(de,{type:"number",value:h.quantity,onChange:P=>p({...h,quantity:+P.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(de,{value:h.unit,onChange:P=>p({...h,unit:P.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(de,{value:h.remarks,onChange:P=>p({...h,remarks:P.target.value}),className:"w-full text-sm"})}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(L,{variant:"primary",isLoading:y,onClick:()=>C(N),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(L,{variant:"secondary",onClick:()=>x(null),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"truncate pr-2",children:T.quantity??"N/A"}),e.jsx("div",{className:"truncate pr-2",children:T.unit||"N/A"}),e.jsx("div",{className:"max-h-[70px] overflow-y-auto custom-scrollbar cursor-grab pr-2",children:T.remarks||"N/A"}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(L,{variant:"primary",onClick:()=>w(N,T),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-pencil "})}),b&&e.jsx(L,{variant:"danger",isLoading:E,onClick:()=>v(N),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]})]},N))})]})})}),e.jsx("section",{className:"mt-4",children:e.jsx(aO,{projectId:t,roomId:a,initialFiles:l.uploads,refetch:d})})]})}const al=["owner","staff","CTO"],rO=async(t,a)=>{const{data:r}=await a.get(`/costestimation/${t}`);if(!r.ok)throw new Error(r.message);return r.data},lO=async(t,a,r)=>{const{data:l}=await r.get(`/costestimation/${t}/room/${a}`);if(!l.ok)throw new Error(l.message);return l.data},iO=async(t,a)=>{const{data:r}=await a.get(`/costestimation/${t}/labour/getlabour`);if(console.log(r,"data form labour estiamtion"),!r.ok)throw new Error(r.message);return r.data},oO=async(t,a,r,l)=>{const{data:o}=await l.patch(`/costestimation/${t}/material/${a}`,r);if(!o.ok)throw new Error(o.message);return o.data},cO=async(t,a,r)=>{console.log("labordata",a);const{data:l}=await r.post(`/costestimation/${t}/labour`,a);if(!l.ok)throw new Error(l.message);return l.data},dO=async(t,a,r,l)=>{const{data:o}=await l.patch(`/costestimation/${t}/labour/${a}`,r);if(!o.ok)throw new Error(o.message);return o.data},uO=async(t,a,r)=>{const{data:l}=await r.delete(`/costestimation/${t}/labour/${a}`);if(!l.ok)throw new Error(l.message);return l.data},mO=async(t,a,r,l)=>{const{data:o}=await l.post(`/costestimation/${t}/uploads/${a}`,r);if(!o.ok)throw new Error(o.message);return o.data},fO=async(t,a,r,l)=>{console.log(r);const{data:o}=await l.patch(`/costestimation/${t}/deleteuploadedfile/${a}/${r}`);if(!o.ok)throw new Error(o.message);return o.data},hO=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/costestimation/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},xO=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/costestimation/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},pO=t=>{const a=["staff","CTO","owner"],{role:r}=Z(),l=J(r);return qe({queryKey:["cost-estimation",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await rO(t,l)},enabled:!!r&&!!t&&!!l,retry:!1,refetchOnMount:!1})},gO=(t,a)=>{const{role:r}=Z(),l=J(r);return qe({queryKey:["cost-estimation-room",t,a],queryFn:async()=>{if(!r||!al.includes(r))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await lO(t,a,l)},enabled:!!r&&!!t&&!!a&&!!l,retry:!1,refetchOnMount:!1})},bO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,materialKey:d,updates:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API not available");return await oO(o,d,m,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["cost-estimation-room",d]})}})},yO=t=>{const a=["owner","staff","CTO"],{role:r}=Z(),l=J(r);return qe({queryKey:["labourEstimatation",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await iO(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1,staleTime:0})},wO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,labourData:o})=>{if(!t||!al.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await cO(l,o,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["labourEstimatation",o]})}})},vO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,labourId:o,updates:d})=>{if(!t||!al.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await dO(l,o,d,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["cost-estimation",o]})}})},jO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,labourId:o})=>{if(!t||!al.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await uO(l,o,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["cost-estimation",o]})}})},NO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomId:o,formData:d})=>{if(!t||!al.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await mO(l,o,d,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},SO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomId:o,fileId:d})=>{if(!t||!al.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await fO(l,o,d,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},CO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await hO({formId:o,projectId:d,deadLine:m,api:r})},onSuccess:()=>{l.invalidateQueries({queryKey:["cost-estimation"]})}})},kO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await xO({projectId:o,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["cost-estimation",d]})}})},EO=({room:t,projectId:a,organizationId:r})=>{var o;const l=Me();return e.jsxs("div",{onClick:()=>l(`/${r}/projectdetails/${a}/costestimation/roomdetails/${t._id}`),className:"cursor-pointer border-l-6 border-blue-600 shadow-md hover:border-blue-400 transition-all duration-200 rounded-lg p-5 bg-white hover:shadow-lg flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-sm text-blue-500",children:["No of Fields: ",((o=t.materials)==null?void 0:o.length)||0]})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium underline hover:no-underline",children:"View "})]})},AO=({data:t})=>{if(!t)return null;const{totalMaterialCost:a,totalLabourCost:r,totalEstimation:l}=t;return e.jsxs("section",{className:"mt-6 w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Cost Estimation Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-blue-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Material Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(a==null?void 0:a.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-green-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Labour Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(r==null?void 0:r.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-purple-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Grand Total Estimation"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(l==null?void 0:l.toLocaleString())||0]})]})]})]})},OO=A.memo(AO),RO=()=>{var C,v,N,T,P,D;const{projectId:t,organizationId:a}=Re(),{isMobile:r,openMobileSidebar:l}=We(),o=yt(),d=Me(),{data:m,isLoading:x,isError:h,error:p,refetch:g}=pO(t),{mutateAsync:y,isPending:j}=CO(),{mutateAsync:E,isPending:b}=kO(),k=async()=>{var $,q;try{await E({projectId:t}),_({description:"Completion status updated successfully",title:"Success"})}catch(H){_({title:"Error",description:((q=($=H==null?void 0:H.response)==null?void 0:$.data)==null?void 0:q.message)||H.message||"Failed to update completion status",variant:"destructive"})}},w=o.pathname.includes("/roomdetails");return x?e.jsx(jt,{}):e.jsx("div",{className:"container mx-auto px-2 py-2 w-full  max-h-full overflow-y-auto custom-scrollbar",children:w?e.jsx(Vt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-money-bill-1-wave mr-2"})," Cost Estimation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap  gap-2 justify-end",children:e.jsxs(L,{isLoading:b,onClick:k,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap  gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:6,stagePath:"costestimation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"CostEstimation",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),p&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((v=(C=p==null?void 0:p.response)==null?void 0:C.data)==null?void 0:v.message)||(p==null?void 0:p.message)||"Failed to load cost estimation data"}),e.jsx(L,{onClick:()=>g(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(N=m==null?void 0:m.timer)==null?void 0:N.completedAt,stageName:"costestimation",formId:m==null?void 0:m._id,projectId:t,deadLine:(T=m==null?void 0:m.timer)==null?void 0:T.deadLine,startedAt:(P=m==null?void 0:m.timer)==null?void 0:P.startedAt,refetchStageMutate:g,deadLineMutate:y,isPending:j})]}),e.jsxs("section",{className:"mb-6 ",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Material Cost Estimation"}),e.jsxs(L,{className:"bg-blue-600 text-white px-2 lg:px-4 py-2 w-full sm:w-auto",onClick:()=>d(`/${a}/projectdetails/${t}/costestimation/roomdetails/labour`),children:["Labour Cost Estimation ",e.jsx("i",{className:"ml-2 fa-solid fa-arrow-up-right-from-square"})]})]}),e.jsx("div",{className:"max-h-[100%] grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(D=m==null?void 0:m.materialEstimation)==null?void 0:D.map($=>e.jsx(EO,{room:$,projectId:t,organizationId:a},$.key))})]}),!x&&!h&&m&&e.jsx(OO,{data:m})]})]})})},TO=({projectId:t,roomId:a,initialFiles:r,refetch:l})=>{const[o,d]=A.useState([]),[m,x]=A.useState(r.filter(N=>N.type==="pdf")),[h,p]=A.useState(r.filter(N=>N.type==="image")),[g,y]=A.useState(null),{mutateAsync:j,isPending:E}=NO(),{mutateAsync:b,isPending:k}=SO(),w=N=>{N.target.files&&d(Array.from(N.target.files))},C=async()=>{var T,P;if(o.length===0)return;const N=new FormData;o.forEach(D=>N.append("files",D));try{const D=await j({projectId:t,roomId:a,formData:N}),$=D.filter(H=>H.type==="pdf"),q=D.filter(H=>H.type==="image");x(H=>[...H,...$]),p(H=>[...H,...q]),d([]),_({title:"Success",description:"file uploaded successfully"}),window.location.reload(),l()}catch(D){_({title:"error",description:((P=(T=D==null?void 0:D.response)==null?void 0:T.data)==null?void 0:P.message)||"failed to upload file",variant:"destructive"})}},v=async(N,T)=>{var P,D;try{await b({projectId:t,roomId:a,fileId:N}),T==="pdf"?x($=>$.filter(q=>q._id!==N)):p($=>$.filter(q=>q._id!==N)),_({title:"Success",description:"deleted successfully"}),l()}catch($){_({title:"error",description:((D=(P=$==null?void 0:$.response)==null?void 0:P.data)==null?void 0:D.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(de,{type:"file",multiple:!0,onChange:w,accept:"image/*,application/pdf"}),e.jsx(L,{onClick:C,isLoading:E,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{onClick:()=>v(N._id,"pdf"),disabled:k,variant:"primary",size:"sm",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] min-h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[h.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),h.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>y(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",onClick:()=>v(N._id,"image"),disabled:k,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function PO(){var k;const{projectId:t,roomId:a,organizationId:r}=Re(),l=Me();if(!t||!a)return null;const{data:o,isLoading:d,refetch:m}=gO(t,a),{mutateAsync:x,isPending:h}=bO(),[p,g]=A.useState(null),[y,j]=A.useState({areaSqFt:0,predefinedRate:0,overriddenRate:null});if(d)return e.jsx(xn,{});if(!o)return e.jsx(Hy,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const E=(w,C)=>{g(w),j({areaSqFt:C.areaSqFt||0,predefinedRate:C.predefinedRate||0,overriddenRate:C.overriddenRate??null})},b=async w=>{var C,v;try{await x({projectId:t,materialKey:w,updates:y}),g(null),_({description:"Field updated successfully",title:"Success"})}catch(N){_({title:"Error",description:((v=(C=N==null?void 0:N.response)==null?void 0:C.data)==null?void 0:v.message)||N.message||"Failed to update field",variant:"destructive"})}};return e.jsxs("div",{className:"max-w-full h-full overflow-y-scroll custom-scrollbar mx-auto mt-0 bg-white  rounded py-2 px-0",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.name}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Room Material Items"})]}),e.jsx(L,{variant:"primary",className:"h-10",onClick:()=>l(`/${r}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),e.jsxs("section",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-2 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Material Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["",(k=o==null?void 0:o.totalCost)==null?void 0:k.toLocaleString()]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-6 bg-blue-50 text-sm font-semibold text-gray-600 px-6 py-1 sm:py-3 ",children:[e.jsx("div",{className:"text-left px-3 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Sq.Ft"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Predefined Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overridden Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-gray-100 max-h-[70vh] overflow-y-auto custom-scrollbar bg-white",children:o.materials.map(w=>{var C,v,N;return e.jsxs("div",{className:`grid grid-cols-6 items-center px-6 py-4 text-sm ${p===w.key?"":"hover:bg-[#f7fbff]"}`,children:[e.jsx("div",{className:"font-medium text-gray-800",children:w.key}),p===w.key?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center",children:e.jsx(de,{className:"text-center",type:"number",value:y.areaSqFt,onChange:T=>j({...y,areaSqFt:+T.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(de,{className:"text-center",type:"number",value:y.predefinedRate,onChange:T=>j({...y,predefinedRate:+T.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(de,{className:"text-center",type:"number",value:y.overriddenRate??"",onChange:T=>j({...y,overriddenRate:+T.target.value})})}),e.jsx("div",{className:"text-center text-gray-900 font-semibold",children:typeof y.areaSqFt=="number"&&(typeof y.predefinedRate=="number"||typeof y.overriddenRate=="number")?""+(y.areaSqFt*(y.overriddenRate&&y.overriddenRate>0?y.overriddenRate:y.predefinedRate??0)).toLocaleString("en-IN"):"N/A"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(L,{variant:"primary",isLoading:h,onClick:()=>b(w.key),children:[" ",e.jsx("i",{className:"fas fa-check"})," "]}),e.jsx(L,{variant:"secondary",onClick:()=>g(null),children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-center  text-gray-700",children:w.areaSqFt??"N/A"}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["",((C=w.predefinedRate)==null?void 0:C.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["",((v=w.overriddenRate)==null?void 0:v.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"text-center text-black font-semibold",children:["",((N=w.totalCost)==null?void 0:N.toLocaleString("en-IN"))??"N/A"]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(L,{variant:"primary",onClick:()=>E(w.key,w),children:""})})]})]},w.key)})})]})})]}),e.jsx("section",{className:"mt-4",children:e.jsx(TO,{projectId:t,roomId:a,initialFiles:o.uploads,refetch:m})})]})}const MO=({handleAdd:t,newData:a,setNewData:r,addPending:l,setShowForm:o})=>e.jsxs("div",{className:"space-y-3 bg-white px-6 py-3 sm:w-[40%] w-[80%] rounded-2xl",children:[e.jsx("h2",{className:"font-medium text-gray-700 text-center",children:"Add Labour"}),e.jsxs("div",{children:[e.jsx(me,{children:"Work Type"}),e.jsx(de,{required:!0,placeholder:"Work Type",value:a.workType,onChange:d=>r({...a,workType:d.target.value})})]}),e.jsxs("div",{children:[e.jsx(me,{children:"No.Of People"}),e.jsx(de,{placeholder:"No of people",value:a.noOfPeople,onChange:d=>r({...a,noOfPeople:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(me,{children:"No of Days"}),e.jsx(de,{placeholder:"Days",type:"number",value:a.daysPlanned,onChange:d=>r({...a,daysPlanned:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(me,{children:"Per Day Salary"}),e.jsx(de,{placeholder:"Per Day Salary",type:"number",value:a.perdaySalary,onChange:d=>r({...a,perdaySalary:+d.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{children:"Weekly Cost:"}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["",a.perdaySalary*a.noOfPeople*7||0]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{children:"Total Cost:"}),":",e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["",a.daysPlanned*a.perdaySalary*a.noOfPeople||0]})]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(L,{onClick:t,isLoading:l,children:"Add"}),e.jsx(L,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]}),LO=()=>{var V,oe;const{projectId:t,organizationId:a}=Re(),r=Me(),[l,o]=A.useState(null),[d,m]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[x,h]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[p,g]=A.useState(!1),[y,j]=A.useState(!1),{data:E,isLoading:b,isError:k,error:w,refetch:C}=yO(t),{mutateAsync:v,isPending:N}=jO(),{mutateAsync:T,isPending:P}=vO(),{mutateAsync:D,isPending:$}=wO(),q=A.useMemo(()=>E==null?void 0:E.reduce((F,W)=>F+(W==null?void 0:W.totalCost),0),[E]);if(b)return e.jsx(jt,{});if(k)return e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((oe=(V=w==null?void 0:w.response)==null?void 0:V.data)==null?void 0:oe.message)||(w==null?void 0:w.message)||"Failed to load , please try again"}),e.jsx(L,{isLoading:b,onClick:()=>C(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]});const H=F=>{o(F._id),m({workType:F.workType,noOfPeople:F.noOfPeople,daysPlanned:F.daysPlanned,perdaySalary:F.perdaySalary})},he=()=>{o(null),m({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0})},K=async F=>{var W,ue;try{await v({projectId:t,labourId:F}),_({description:"Deleted successfully",title:"Success"}),C()}catch(re){_({title:"Error",description:((ue=(W=re==null?void 0:re.response)==null?void 0:W.data)==null?void 0:ue.message)||re.message||"Failed to update completion status",variant:"destructive"})}},B=async F=>{var W,ue;try{if(!d.workType)throw new Error("workType is mandatory");await T({projectId:t,labourId:F,updates:d}),_({description:"edited successfully",title:"Success"}),he(),C()}catch(re){_({title:"Error",description:((ue=(W=re==null?void 0:re.response)==null?void 0:W.data)==null?void 0:ue.message)||re.message||"Failed to update completion status",variant:"destructive"})}},te=async()=>{try{if(!x.workType)throw new Error("Please Enter the workType");await D({projectId:t,labourData:x}),h({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),g(!1),j(!1),_({title:"Success",description:"Labour estimation added"}),C()}catch(F){_({title:"Error",description:F.message,variant:"destructive"})}};return e.jsxs("main",{className:"h-full w-full",children:[e.jsxs("div",{className:"w-full flex justify-between ",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-600 mb-5",children:"Labour Estimation"}),e.jsx(L,{variant:"primary",className:"h-10",onClick:()=>r(`/${a}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),!(E!=null&&E.length)&&e.jsxs("div",{className:"w-full bg-white border border-gray-200 rounded-lg p-10 h-[60%] shadow-sm flex flex-col items-center justify-center text-center",children:[e.jsx("i",{className:"fa-solid fa-person-digging text-7xl text-gray-400 mb-6"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Labour Estimations"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Create your first labour estimation to start managing your workforce"}),e.jsxs(L,{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 text-lg font-medium rounded",children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"})," Create Labour Estimation"]})]}),e.jsx("section",{children:y&&e.jsx("div",{className:"fixed bg-black/70 flex justify-center items-center h-full w-full z-50 top-0 left-0",children:e.jsx(MO,{handleAdd:te,newData:x,setNewData:h,addPending:$,setShowForm:j})})}),(E==null?void 0:E.length)>0&&e.jsxs("div",{className:"bg-white rounded  overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Labour Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["",(q==null?void 0:q.toLocaleString())||e.jsx("span",{children:"0"})]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsx("div",{className:"min-w-[1000px]",children:e.jsxs("section",{className:"shadow-lg !rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-50 px-6 py-3 font-semibold text-gray-700 text-sm",children:[e.jsx("div",{className:"text-left px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Work Type"}),e.jsx("div",{className:"text-center px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No.Of People"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Planned"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Per Day Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("div",{className:"divide-y divide-gray-100 shadow-md  rounded-lg max-h-[65vh] overflow-y-auto bg-white",children:[E==null?void 0:E.map(F=>e.jsx("div",{className:`grid grid-cols-7 rounded-lg items-center gap-2 px-6 py-4 text-sm ${l===F._id?"":"hover:bg-[#f7fbff]"}`,children:l===F._id?e.jsxs(e.Fragment,{children:[e.jsx(de,{required:!0,value:d.workType,onChange:W=>m({...d,workType:W.target.value})}),e.jsx(de,{type:"number",value:d.noOfPeople,onChange:W=>m({...d,noOfPeople:+W.target.value})}),e.jsx(de,{type:"number",value:d.daysPlanned,onChange:W=>m({...d,daysPlanned:+W.target.value})}),e.jsx(de,{type:"number",value:d.perdaySalary,onChange:W=>m({...d,perdaySalary:+W.target.value})}),e.jsxs("div",{className:"text-gray-700",children:["",d.perdaySalary*7||0]}),e.jsxs("div",{className:"text-gray-700",children:["",d.daysPlanned*d.perdaySalary||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(L,{onClick:()=>B(F._id),isLoading:P,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(L,{variant:"ghost",onClick:()=>o(null),children:""})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-left   text-gray-700",children:F.workType||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:(F==null?void 0:F.noOfPeople)||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:F.daysPlanned||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`${F.perdaySalary}`||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`${F.weeklySalary}`||"N/A"}),e.jsxs("div",{className:"text-gray-800 font-medium text-center",children:["",F.totalCost||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(L,{onClick:()=>H(F),children:[" ",e.jsx("i",{className:"fas fa-pen"})]}),e.jsxs(L,{variant:"danger",className:"bg-red-500 text-white",isLoading:N,onClick:()=>K(F._id),children:[" ",e.jsx("i",{className:"fas fa-trash-can"})," "]})]})]})},F._id)),p&&e.jsxs("div",{className:"grid grid-cols-7 gap-2  px-6 py-4 text-sm  !bg-none",children:[e.jsx(de,{required:!0,placeholder:"Work Type",value:x.workType,onChange:F=>h({...x,workType:F.target.value})}),e.jsx(de,{placeholder:"No of people",value:x.noOfPeople,onChange:F=>h({...x,noOfPeople:+F.target.value})}),e.jsx(de,{placeholder:"Days",type:"number",value:x.daysPlanned,onChange:F=>h({...x,daysPlanned:+F.target.value})}),e.jsx(de,{placeholder:"Per Day Salary",type:"number",value:x.perdaySalary,onChange:F=>h({...x,perdaySalary:+F.target.value})}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["",x.perdaySalary*x.noOfPeople*7||0]}),e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["",x.daysPlanned*x.perdaySalary*x.noOfPeople||0]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(L,{onClick:te,isLoading:$,children:"Add"}),e.jsx(L,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(L,{variant:"primary",onClick:()=>g(!0),children:"+ Add Labour Estimation"})})]})})})]})]})},nl=["owner","staff","CTO"],_O=async(t,a,r)=>{const{data:l}=await r.put(`/orderingmaterial/${t}/shop`,a);if(!l.ok)throw new Error(l.message);return l.data},FO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,updates:o})=>{if(!t||!nl.includes(t))throw new Error("Not allowed to update shop details");if(!a)throw new Error("API instance not available");return await _O(l,o,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material",o]})}})},DO=async(t,a,r)=>{const{data:l}=await r.put(`/orderingmaterial/${t}/delivery-location`,a);if(!l.ok)throw new Error(l.message);return l.data},qO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,updates:o})=>{if(!t||!nl.includes(t))throw new Error("Not allowed to update delivery location");if(!a)throw new Error("API instance not available");return await DO(l,o,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material",o]})}})},zO=async(t,a,r,l,o)=>{const{data:d}=await o.put(`/orderingmaterial/${t}/room/${r}/${a}`,{items:l});if(!d.ok)throw new Error(d.message);return d.data},UO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomKey:o,itemId:d,updates:m})=>{if(!t||!nl.includes(t))throw new Error("Not allowed to update room materials");if(!a)throw new Error("API instance not available");return await zO(l,o,d,m,a)},onSuccess:(l,{projectId:o,roomKey:d})=>{r.invalidateQueries({queryKey:["ordering-material",o,d]})}})},$O=async(t,a,r,l)=>{const{data:o}=await l.post(`/orderingmaterial/${t}/room/${a}/add`,r);if(!o.ok)throw new Error(o.message);return o.data},IO=()=>{const{role:t}=Z(),a=J(t);return ie({mutationFn:async({projectId:r,roomKey:l,newItem:o})=>{if(!t||!nl.includes(t))throw new Error("Not allowed to add item");if(!a)throw new Error("API instance not available");return await $O(r,l,o,a)},onSuccess:(r,{projectId:l,roomKey:o})=>{Ae.invalidateQueries({queryKey:["ordering-material",l,o]})}})},BO=async(t,a,r,l)=>{const{data:o}=await l.delete(`/orderingmaterial/${t}/room/${a}/${r}`);if(!o.ok)throw new Error(o.message);return o.data},HO=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomKey:o,itemId:d})=>{if(!t||!nl.includes(t))throw new Error("Not allowed to delete item");if(!a)throw new Error("API instance not available");return await BO(l,o,d,a)},onSuccess:(l,{projectId:o,roomKey:d})=>{r.invalidateQueries({queryKey:["ordering-material",o,d]})}})},QO=async(t,a)=>{const{data:r}=await a.get(`/orderingmaterial/${t}`);if(!r.ok)throw new Error(r.message);return r.data},GO=t=>{const a=["owner","staff","CTO","worker","client"],{role:r}=Z(),l=J(r);return qe({queryKey:["ordering-material",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not allowed to fetch ordering material");if(!l)throw new Error("API not available");return await QO(t,l)},enabled:!!r&&!!t&&!!l,retry:!1,refetchOnMount:!1})},KO=async(t,a,r)=>{const{data:l}=await r.get(`/orderingmaterial/${t}/room/${a}`);if(!l.ok)throw new Error(l.message);return l.data},VO=(t,a)=>{const r=["owner","staff","CTO","worker","client"],{role:l}=Z(),o=J(l);return qe({queryKey:["ordering-material",t,a],queryFn:async()=>{if(!l||!r.includes(l))throw new Error("Not allowed to fetch room materials");if(!o)throw new Error("API not available");return await KO(t,a,o)},enabled:!!l&&!!t&&!!a&&!!o,retry:!1,refetchOnMount:!1})},YO=async(t,a)=>{const{data:r}=await a.post(`/orderingmaterial/${t}/generate-link`);if(!r.ok)throw new Error(r.message);return r.data},WO=async(t,a)=>{const{data:r}=await Qe.get(`https://houseofram.in/api/orderingmaterial/public/${t}/${a}`);if(console.log(r),!r.ok)throw new Error(r.message);return r.data},XO=()=>{const{role:t}=Z(),a=J(t);return ie({mutationFn:async({projectId:r})=>{if(!t||!nl.includes(t))throw new Error("Not allowed to generate link");if(!a)throw new Error("API instance not found");return await YO(r,a)}})},ZO=(t,a)=>qe({queryKey:["ordering-material-public",t,a],queryFn:async()=>await WO(t,a),enabled:!!t&&!!a,retry:!1,refetchOnMount:!1}),JO=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/orderingmaterial/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},eR=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/orderingmaterial/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},tR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await JO({formId:o,projectId:d,deadLine:m,api:r})},onSuccess:(o,d)=>{l.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},sR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await eR({projectId:o,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["ordering-material",d]})}})},Qy=({projectId:t,context:a,label:r,generateLink:l,isPending:o,data:d,stage:m})=>{const[x,h]=A.useState(""),[p,g]=A.useState(!1);A.useEffect(()=>{typeof d=="string"&&h(d)},[d]);const y=async()=>{try{await navigator.clipboard.writeText(`https://houseofram.in/${m}/public/${t}/${x}`),g(!0),setTimeout(()=>g(!1),1500)}catch{_({title:"Error",description:"Failed to copy link",variant:"destructive"})}},j=()=>{const b=encodeURIComponent(`Hey, please check this ${a} link:
https://houseofram.in/${m}/public/${t}/${x}`);window.open(`https://wa.me/?text=${b}`,"_blank")},E=async()=>{try{const b=await l({projectId:t});b!=null&&b.shareableUrl&&(h(b.shareableUrl),_({title:"Link generated",description:"You can now share the link",variant:"default"}))}catch(b){_({title:"Error",description:(b==null?void 0:b.message)||"Failed to generate link",variant:"destructive"})}};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 shadow-sm w-full max-w-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-link"})," ",r||"Generate Shareable Link"]})}),x?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[e.jsx(de,{readOnly:!0,value:`https://houseofram.in/${m}/public/${t}/${x}`,className:"flex-1 text-sm cursor-default"}),e.jsxs(L,{onClick:y,variant:"outline",className:"flex gap-2",children:[e.jsx("i",{className:`fas ${p?"fa-check-circle":"fa-copy"}`}),p?"Copied":"Copy"]}),e.jsxs(L,{onClick:j,className:"bg-green-500 hover:bg-green-600 text-white flex gap-2",children:[e.jsx("i",{className:"fab fa-whatsapp"}),"Share"]})]}):e.jsx(L,{onClick:E,disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:o?"Generating...":"Generate Link"})]})},aR=()=>{var re,R,z,M,G;const{projectId:t,organizationId:a}=Re(),r=Me(),{isMobile:l,openMobileSidebar:o}=We(),d=location.pathname.includes("/ordermaterialroom"),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState({}),{data:b,isLoading:k,isError:w,error:C,refetch:v}=GO(t),{mutateAsync:N,isPending:T}=XO(),{mutateAsync:P}=FO(),{mutateAsync:D}=qO(),{mutateAsync:$,isPending:q}=tR(),{mutateAsync:H,isPending:he}=sR(),K=async()=>{var Y,ge;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await P({projectId:t,updates:g}),_({title:"Success",description:"Shop Details Updated"}),x(!1),v()}catch(se){_({variant:"destructive",title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||(se==null?void 0:se.message)||"Update failed"})}},B=async()=>{var Y,ge;try{if(j.phoneNumber&&!/^\d{10}$/.test(j.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await D({projectId:t,updates:j}),p(!1),_({title:"Success",description:"Delivery Details Updated"}),v()}catch(se){_({variant:"destructive",title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||(se==null?void 0:se.message)||"Update failed"})}},te=async()=>{var Y,ge;try{await H({projectId:t}),_({description:"Completion status updated successfully",title:"Success"})}catch(se){_({title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||se.message||"Failed to update completion status",variant:"destructive"})}};if(k)return e.jsx(jt,{});const V=Object.keys((b==null?void 0:b.materialOrderingList)||{}),{shopDetails:oe,deliveryLocationDetails:F,generatedLink:W,materialOrderingList:ue}=b||{};return e.jsx("div",{className:"w-full h-full flex flex-col",children:d?e.jsx(Vt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-cart-shopping mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ordering Material"}),e.jsx("span",{className:"sm:hidden",children:"Order Material"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(L,{isLoading:he,onClick:te,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:8,stagePath:"orderingmaterial"}),e.jsx(rs,{stageName:"OrderingMaterialModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null})]})]}),w&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((R=(re=C==null?void 0:C.response)==null?void 0:re.data)==null?void 0:R.message)||"Failed to load ordering material"}),e.jsx(L,{isLoading:k,onClick:()=>v(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!w&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(Pe,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(z=b==null?void 0:b.timer)==null?void 0:z.completedAt,stageName:"orderingmaterial",formId:b==null?void 0:b._id,projectId:t,deadLine:(M=b==null?void 0:b.timer)==null?void 0:M.deadLine,startedAt:(G=b==null?void 0:b.timer)==null?void 0:G.startedAt,refetchStageMutate:v,deadLineMutate:$,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Shop Name",value:g.shopName||"",onChange:Y=>y({...g,shopName:Y.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:Y=>y({...g,contactPerson:Y.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",value:g.phoneNumber||"",type:"tel",maxLength:10,onChange:Y=>y({...g,phoneNumber:Y.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:g.address||"",onChange:Y=>y({...g,address:Y.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(L,{onClick:K,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(L,{variant:"outline",onClick:()=>x(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(oe==null?void 0:oe.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(oe==null?void 0:oe.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(oe==null?void 0:oe.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(oe==null?void 0:oe.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{y(oe),x(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),h?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Site Name",value:j.siteName||"",onChange:Y=>E({...j,siteName:Y.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Site Supervisor",value:j.siteSupervisor||"",onChange:Y=>E({...j,siteSupervisor:Y.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",type:"tel",maxLength:10,value:j.phoneNumber||"",onChange:Y=>E({...j,phoneNumber:Y.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:j.address||"",onChange:Y=>E({...j,address:Y.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(L,{onClick:B,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(L,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",(F==null?void 0:F.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",(F==null?void 0:F.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(F==null?void 0:F.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(F==null?void 0:F.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{E(F),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(Y=>{const ge=ue[Y]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white transform hover:scale-[1.02]",onClick:()=>r(`ordermaterialroom/${Y}`),children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold capitalize text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-door-open"}),Y.replace(/([A-Z])/g," $1")]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:[e.jsx("i",{className:"fa-solid fa-box mr-1"}),"Items: ",ge.length]}),e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-mouse-pointer"}),"Click to view details"]})]},Y)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Qy,{projectId:t,context:"order material",stage:"ordermaterial",data:W,isPending:T,generateLink:N})})]})]})})},nR=async({category:t})=>{const{data:a}=await Qe.get(`/api/ai/brands/${t}`);return a.data},rR=t=>{const r=["electricalFittings","ceramicSanitaryware","upholsteryCurtains","falseCeilingMaterials"].includes(t);return qe({queryKey:["brands",t],queryFn:()=>nR({category:t}),enabled:!!t&&!r})},lR=()=>{var te,V,oe,F,W;const{projectId:t,roomKey:a,organizationId:r}=Re(),l=Me();if(!a)return;const[o,d]=A.useState({}),[m,x]=A.useState(!1),[h,p]=A.useState(null),[g,y]=A.useState({}),{data:j,isLoading:E,isError:b,refetch:k,error:w}=VO(t,a),{mutateAsync:C,isPending:v}=IO(),{mutateAsync:N,isPending:T}=UO(),{mutateAsync:P,isPending:D}=HO(),{data:$}=rR(a);if(E)return e.jsx(xn,{});if(b)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((V=(te=w==null?void 0:w.response)==null?void 0:te.data)==null?void 0:V.message)||"Failed to load data"}),e.jsx(L,{onClick:()=>k(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const q=j||[],H=(ue,re)=>{y(R=>({...R,[ue]:re}))},he=async ue=>{try{const re=ya[a];if(!re||re.length===0)throw new Error("Invalid room type or no fields defined.");const R=re[0],z=g[R];if(!z||z.toString().trim()==="")throw new Error(`The field "${R}" is required.`);if(Object.values(g).every(Y=>!Y||Y.toString().trim()===""))throw new Error("At least one field must be filled.");await N({itemId:ue,projectId:t,roomKey:a,updates:[g]}),_({title:"Success",description:"Item updated."}),p(null),y({}),x(!1),k()}catch(re){_({title:"Error",description:(re==null?void 0:re.message)||"Failed",variant:"destructive"})}},K=async()=>{var ue,re;try{const R=ya[a];if(!R||R.length===0)throw new Error("Invalid room type or no fields defined.");const z=R[0],M=o[z];if(!M||M.toString().trim()==="")throw new Error(`The field "${z}" is required.`);if(Object.values(o).every(se=>!se||se.toString().trim()===""))throw new Error("At least one field must be filled.");if(q==null?void 0:q.some(se=>{var Ne;return((Ne=se[z])==null?void 0:Ne.toString().trim().toLowerCase())===M.toString().trim().toLowerCase()}))throw new Error(`"${M}" already exists. Please use a unique value.`);await C({projectId:t,roomKey:a,newItem:o}),_({title:"Success",description:"Item added."}),d({}),x(!1),k()}catch(R){_({title:"Error",description:((re=(ue=R==null?void 0:R.response)==null?void 0:ue.data)==null?void 0:re.message)||(R==null?void 0:R.message)||"Failed",variant:"destructive"})}},B=async ue=>{var re,R;try{await P({projectId:t,roomKey:a,itemId:ue}),_({title:"Deleted",description:"Item removed"}),k()}catch(z){_({title:"Error",description:((R=(re=z==null?void 0:z.response)==null?void 0:re.data)==null?void 0:R.message)||(z==null?void 0:z.message)||"Failed to delete",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-800 capitalize ",children:a}),e.jsxs("div",{className:" px-6 flex gap-2",children:[e.jsx(L,{onClick:()=>x(()=>!0),children:"Add Item"}),e.jsx(L,{variant:"primary",className:"h-10",onClick:()=>l(`/${r}/projectdetails/${t}/ordermaterial`),children:"Go Back"})]})]}),e.jsx("div",{className:"w-full !min-h-[85vh] rounded-lg ",children:e.jsx("div",{className:"overflow-x-auto custom-scrollbar min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:" w-full flex flex-col border-2 border-gray-100 rounded-lg",style:{minWidth:`${(((oe=ya[a])==null?void 0:oe.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid items-center px-6 py-3 bg-blue-100 text-blue-800 text-sm font-semibold",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(F=ya[a])==null?void 0:F.map((ue,re)=>e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:ue},re)),e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"text-sm text-blue-900 divide-y  !h-[75vh] overflow-y-auto divide-blue-100",children:!m&&q.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center text-gray-500 bg-gray-50",children:[e.jsx("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-700",children:["No ",a.replace(/([A-Z])/g," $1")," Items"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Add your first ",a.replace(/([A-Z])/g," $1").toLowerCase()," item to start tracking"]}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded font-medium",children:["Add ",a.replace(/([A-Z])/g," $1")," Item"]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[q==null?void 0:q.map((ue,re)=>e.jsxs("div",{className:"grid border text-center px-6 py-3 gap-2 border-b border-gray-200 hover:bg-gray-50 transition-colors",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[ya[a].map((R,z)=>{const M=R==="brandName"&&wm.brandName[a],G=R==="fabric"&&a==="upholsteryCurtains";return e.jsx("div",{className:"text-center px-6 py-3 gap-4 hover:bg-gray-50 transition-colors text-sm min-w-[120px]",children:h===re?M||G?e.jsxs(lt,{value:g[R]||"",onValueChange:Y=>H(R,Y),children:[e.jsx(at,{children:e.jsx(it,{selectedValue:g[R],placeholder:`Select ${R==="brandName"?"brand":"fabric"}`})}),e.jsx(nt,{children:$==null?void 0:$.map(Y=>e.jsx(ye,{value:Y,children:Y},Y))})]}):e.jsx(de,{className:"text-xs",value:g[R]||"",onChange:Y=>H(R,Y.target.value)}):ue[R]||"-"},z)}),e.jsx("div",{className:"flex justify-center gap-2 items-center",children:h===re?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:"sm",isLoading:T,onClick:()=>he(ue._id),children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>p(null),children:e.jsx("i",{className:"fas fa-xmark text-red-600"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{variant:"primary",children:e.jsx("i",{className:"fas fa-pen",onClick:()=>{y(ue),p(re)}})}),e.jsx(L,{isLoading:D,variant:"ghost",children:e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>B(ue._id)})})]})})]},ue._id)),m&&e.jsxs("div",{className:"grid items-center px-6 py-3 gap-2 bg-white mt-2",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(W=ya[a])==null?void 0:W.map((ue,re)=>{const R=ue==="brandName"&&wm.brandName[a];if(R||ue==="fabric"&&a==="upholsteryCurtains"){const M=R?T2[a]:wm.fabric[a];return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsxs(lt,{onValueChange:G=>d(Y=>({...Y,[ue]:G})),children:[e.jsx(at,{children:e.jsx(it,{selectedValue:o[ue],placeholder:`Select ${ue==="brandName"?"brand":"fabric"}`})}),e.jsx(nt,{children:M.map(G=>e.jsx(ye,{value:G,children:G},G))})]})},re)}return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsx(de,{className:"text-xs text-center",placeholder:ue,value:o[ue]||"",onChange:M=>d(G=>({...G,[ue]:M.target.value}))})},re)}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(L,{isLoading:v,onClick:K,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(L,{onClick:()=>x(()=>!1),children:e.jsx("i",{className:"fas fa-xmark"})})]})]})]})})})]})})})]})},Ai=["owner","staff","CTO"],iR=async(t,a,r)=>(await r.put(`/materialarrivalcheck/${t}/shop`,a)).data,oR=async(t,a,r)=>(await r.put(`/materialarrivalcheck/${t}/delivery-location`,a)).data,cR=async(t,a,r,l)=>(await l.put(`/materialarrivalcheck/${t}/room/${a}`,r)).data,dR=async(t,a,r,l)=>(await l.delete(`/materialarrivalcheck/${t}/room/${a}/${r}`)).data,uR=async(t,a)=>(await a.get(`/materialarrivalcheck/${t}`)).data.data,mR=async(t,a,r)=>{const l=await r.get(`/materialarrivalcheck/${t}/room/${a}`);return console.log("data form the get mateiralarrival room details",l.data.data),l.data.data},fR=async(t,a)=>(await a.post(`/materialarrivalcheck/${t}/generate-link`)).data.data,hR=async(t,a)=>(await Qe.get(`https://houseofram.in/api/materialarrivalcheck/public/${t}/${a}`)).data.data,xR=t=>{const a=["owner","staff","CTO","worker","client"],{role:r}=Z(),l=J(r);return qe({queryKey:["material-arrival",t],queryFn:()=>uR(t,l),enabled:!!t&&!!r&&a.includes(r),retry:!1,refetchOnMount:!1})},pR=(t,a)=>{const r=["owner","staff","CTO","worker","client"],{role:l}=Z(),o=J(l);return qe({queryKey:["material-arrival-room",t,a],queryFn:()=>mR(t,a,o),enabled:!!t&&!!a&&!!l&&r.includes(l),retry:!1,refetchOnMount:!1})},gR=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await iR(l,o,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["material-arrival",o]})}})},bR=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await oR(l,o,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["material-arrival",o]})}})},Gy=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomKey:o,formData:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await cR(l,o,d,a)},onSuccess:(l,{projectId:o,roomKey:d})=>{r.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},Ky=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomKey:o,itemId:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await dR(l,o,d,a)},onSuccess:(l,{projectId:o,roomKey:d})=>{r.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},yR=()=>{const{role:t}=Z(),a=J(t);return ie({mutationFn:async({projectId:r})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await fR(r,a)}})},wR=(t,a)=>qe({queryKey:["material-arrival-public",t,a],queryFn:async()=>await hR(t,a),enabled:!!t&&!!a}),vR=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/materialarrivalcheck/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},jR=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/materialarrivalcheck/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},NR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await vR({formId:o,projectId:d,deadLine:m,api:r})},onSuccess:(o,d)=>{l.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},SR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await jR({projectId:o,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["ordering-material",d]})}})},CR=()=>{var R,z;const{projectId:t,organizationId:a}=Re(),r=Me(),{isMobile:l,openMobileSidebar:o}=We(),d=location.pathname.includes("/materialarrivalroom/"),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState({}),{data:b,isLoading:k,isError:w,error:C,refetch:v}=xR(t),{mutateAsync:N}=gR(),{mutateAsync:T}=bR(),{mutateAsync:P,isPending:D}=yR(),{mutateAsync:$,isPending:q}=NR(),{mutateAsync:H,isPending:he}=SR();if(k)return e.jsx(jt,{});const{shopDetails:K,deliveryLocationDetails:B,materialArrivalList:te,timer:V,generatedLink:oe}=b||{},F=Object.keys(te||{}),W=async()=>{var M,G;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await N({projectId:t,updates:g}),_({title:"Success",description:"Shop details updated"}),x(!1),v()}catch(Y){_({variant:"destructive",title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||(Y==null?void 0:Y.message)||"Update failed"})}},ue=async()=>{var M,G;try{if(j.phoneNumber&&!/^\d{10}$/.test(j.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await T({projectId:t,updates:j}),_({title:"Success",description:"Delivery location updated"}),p(!1),v()}catch(Y){_({variant:"destructive",title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||(Y==null?void 0:Y.message)||"Update failed"})}},re=async()=>{var M,G;try{await H({projectId:t}),_({description:"Completion status updated successfully",title:"Success"})}catch(Y){_({title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||(Y==null?void 0:Y.message)||"Failed to update completion status",variant:"destructive"})}};return e.jsx("div",{className:"w-full h-full flex flex-col p-2 ",children:d?e.jsx(Vt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 pb-3 ",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Material Checking"}),e.jsx("span",{className:"sm:hidden",children:"Material Check"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(L,{isLoading:he,onClick:re,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:9,stagePath:"materialarrival"}),e.jsx(rs,{stageName:"MaterialArrivalModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null})]})]}),w&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((z=(R=C==null?void 0:C.response)==null?void 0:R.data)==null?void 0:z.message)||"Failed to load material arrival data"}),e.jsx(L,{onClick:()=>v(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!w&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(Pe,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"materialarrivalcheck",completedAt:V==null?void 0:V.completedAt,projectId:t,formId:b==null?void 0:b._id,deadLine:V==null?void 0:V.deadLine,startedAt:V==null?void 0:V.startedAt,refetchStageMutate:v,deadLineMutate:$,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Shop Name",value:g.shopName||"",onChange:M=>y({...g,shopName:M.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:M=>y({...g,contactPerson:M.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",type:"tel",maxLength:10,value:g.phoneNumber||"",onChange:M=>y({...g,phoneNumber:M.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:g.address||"",onChange:M=>y({...g,address:M.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(L,{onClick:W,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(L,{variant:"outline",onClick:()=>x(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(K==null?void 0:K.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(K==null?void 0:K.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(K==null?void 0:K.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(K==null?void 0:K.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{y(K),x(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),h?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Site Name",value:j.siteName||"",onChange:M=>E({...j,siteName:M.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Site Supervisor",value:j.siteSupervisor||"",onChange:M=>E({...j,siteSupervisor:M.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",type:"tel",maxLength:10,value:j.phoneNumber||"",onChange:M=>E({...j,phoneNumber:M.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:j.address||"",onChange:M=>E({...j,address:M.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(L,{onClick:ue,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(L,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",(B==null?void 0:B.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",(B==null?void 0:B.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(B==null?void 0:B.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(B==null?void 0:B.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{E(B),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(M=>{const G=te[M]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",onClick:()=>r(`materialarrivalroom/${M}`),children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:M.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Items: ",G.length]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},M)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Qy,{projectId:t,context:"Material",stage:"materialarrival",data:oe,isPending:D,generateLink:P})})]})]})})},kR=()=>{var V,oe,F,W,ue,re,R;const{projectId:t,roomKey:a,organizationId:r}=Re(),l=Me(),[o,d]=A.useState(null),[m,x]=A.useState(null),[h,p]=A.useState(null),[g,y]=A.useState({}),[j,E]=A.useState({}),[b,k]=A.useState(!1),[w,C]=A.useState(null),{data:v,isLoading:N,isError:T,error:P,refetch:D}=pR(t,a),{mutateAsync:$}=Gy(),{mutateAsync:q}=Ky();if(!a)return;if(N)return e.jsx(xn,{});if(T)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((oe=(V=P==null?void 0:P.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to load data"}),e.jsx(L,{onClick:()=>D(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const H=v||[],he=(z,M)=>{y(G=>({...G,[z]:M}))},K=async()=>{var z,M;try{const G=Zs[a];if(!G||G.length===0)throw new Error("No required fields defined for this section.");const Y=G[0],ge=g[Y];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${Y}" is required.`);if(G.every(be=>{const Ke=g[be];return!Ke||Ke.toString().trim()===""}))throw new Error("At least one field must be filled.");const Ne=new FormData;Ne.append("itemData",JSON.stringify(g)),m&&Ne.append("upload",m),await $({projectId:t,roomKey:a,formData:Ne}),_({title:"Success",description:"Item updated successfully"}),p(null),y({}),x(null),D()}catch(G){_({title:"Error",description:((M=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:M.message)||G.message||"Failed to update",variant:"destructive"})}},B=async()=>{var z,M;try{const G=Zs[a];if(!G||G.length===0)throw new Error("No required fields defined for this section.");const Y=G[0],ge=j[Y];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${Y}" is required.`);if(G.every(be=>{const Ke=j[be];return!Ke||Ke.toString().trim()===""}))throw new Error("At least one field must be filled.");const Ne=new FormData;Ne.append("itemData",JSON.stringify(j)),o&&Ne.append("upload",o),await $({projectId:t,roomKey:a,formData:Ne}),_({title:"Success",description:"Item added successfully"}),k(!1),E({}),D(),d(null)}catch(G){_({title:"Error",description:((M=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:M.message)||G.message||"Failed to add item",variant:"destructive"})}},te=async z=>{try{await q({projectId:t,roomKey:a,itemId:z}),_({title:"Deleted",description:"Item removed"}),D()}catch(M){_({title:"Error",description:(M==null?void 0:M.message)||"Failed",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-blue-800 capitalize",children:[e.jsx("span",{className:"text-black font-semibold",children:"Section:"})," ",a]}),e.jsx(L,{variant:"primary",className:"h-10",onClick:()=>l(`/${r}/projectdetails/${t}/materialarrival`),children:"Go Back"})]}),e.jsx("div",{className:"w-full overflow-x-auto roundex-lg mt-2 custom-scrollbar",children:e.jsxs("div",{style:{minWidth:`${(((F=Zs[a])==null?void 0:F.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid gap-2 bg-blue-100 text-blue-800 text-xs font-semibold uppercase px-4 py-2",style:{gridTemplateColumns:`repeat(${((W=Zs[a])==null?void 0:W.length)+1}, minmax(120px, 1fr))`},children:[(ue=Zs[a])==null?void 0:ue.map((z,M)=>e.jsx("div",{className:"text-center",children:z==="verifiedByAccountant"?"Verified":z},M)),e.jsx("div",{className:"text-center",children:"Actions"})]}),H==null?void 0:H.map((z,M)=>{var G,Y;return e.jsxs("div",{className:"grid gap-2 px-4 py-2 items-center hover:bg-gray-50",style:{gridTemplateColumns:`repeat(${((G=Zs[a])==null?void 0:G.length)+1}, minmax(120px, 1fr))`},children:[(Y=Zs[a])==null?void 0:Y.map((ge,se)=>{var Ne;return ge==="image"?e.jsx("div",{className:"flex justify-center items-center",children:h===M?e.jsx(de,{type:"file",accept:"image/*",onChange:be=>{var Ke;return x(((Ke=be.target.files)==null?void 0:Ke[0])||null)},className:"text-xs"}):(Ne=z==null?void 0:z.upload)!=null&&Ne.url?e.jsx("div",{className:"w-10 h-10 cursor-pointer",onClick:()=>C(z.upload.url),children:e.jsx("img",{src:z.upload.url,alt:"Preview",className:"w-full h-full object-cover rounded border shadow"})}):e.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})},se):ge==="verifiedByAccountant"?e.jsx("div",{className:"text-center",children:h===M?e.jsx("input",{type:"checkbox",checked:!!g[ge],onChange:be=>y(Ke=>({...Ke,[ge]:be.target.checked}))}):z[ge]?e.jsx("i",{className:"fas fa-check text-blue-600 text-lg"}):e.jsx("i",{className:"fas fa-times text-red-500 text-lg"})},se):ge==="remarks"?h===M?e.jsx(Ls,{value:g[ge]||"",className:"text-sm",onChange:be=>y(Ke=>({...Ke,remarks:be.target.value}))},ge):e.jsx("div",{className:"text-sm text-center px-2 overflow-x-auto max-w-[150px] custom-scrollbar whitespace-nowrap",children:z[ge]}):e.jsx("div",{className:"text-sm text-center px-2 max-w-[140px] overflow-auto whitespace-nowrap",children:h===M?e.jsx(de,{className:"text-xs w-full",value:g[ge]||"",onChange:be=>he(ge,be.target.value)}):z[ge]||"-"},se)}),e.jsx("div",{className:"flex justify-center gap-2 text-lg",children:h===M?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:"sm",onClick:K,children:"Save"}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>p(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-pen text-blue-600 cursor-pointer",onClick:()=>{y(z),p(M)}}),e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>te(z._id)})]})})]},z._id)}),b&&e.jsxs("div",{className:"grid gap-2 px-4 py-2  bg-blue-50 items-center",style:{gridTemplateColumns:`repeat(${((re=Zs[a])==null?void 0:re.length)+1}, minmax(120px, 1fr))`},children:[(R=Zs[a])==null?void 0:R.map((z,M)=>z==="image"?e.jsx("input",{type:"file",accept:"image/*",className:"text-xs w-full",onChange:G=>{var Y;return d(((Y=G.target.files)==null?void 0:Y[0])||null)}},M):z==="verified"?e.jsx("input",{type:"checkbox",checked:!!j[z],onChange:G=>E(Y=>({...Y,[z]:G.target.checked}))},M):e.jsx(de,{className:"text-xs text-center w-full",placeholder:z,value:j[z]||"",onChange:G=>E(Y=>({...Y,[z]:G.target.value}))},M)),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(L,{size:"sm",onClick:B,children:"Add"}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>k(!1),children:"Cancel"})]})]}),!b&&e.jsx("div",{className:"py-4 px-4",children:e.jsx(L,{onClick:()=>k(!0),children:"Add Item"})})]})}),w&&e.jsx("div",{onClick:()=>C(null),className:"fixed inset-0 bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:z=>z.stopPropagation,className:"relative bg-white rounded p-4 sm:p-8 shadow-lg max-w-[90vw] max-h-[80vh]",children:[e.jsx("i",{className:"fas fa-times absolute top-[0px] right-1 sm:top-2 sm:right-3 text-xl sm:text-2xl cursor-pointer text-gray-700 hover:text-red-500",onClick:()=>C(null)}),e.jsx("img",{src:w,alt:"Full View",className:"max-h-[70vh] max-w-[100%] sm:max-w-full object-contain rounded"})]})})]})},ER=()=>{const{projectId:t,token:a}=Re(),[r,l]=A.useState(null),{data:o,isLoading:d,isError:m}=ZO(t,a),x=h=>{l(p=>p===h?null:h)};return e.jsxs("div",{className:"min-h-screen  outline-none  w-full bg-gray-50 text-gray-800 flex flex-col",children:[e.jsx(Vy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[70%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ordered Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),d?e.jsx(Dm,{}):m||!(o!=null&&o.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.shopDetails).map(([h,p])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:h.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof p=="string"||typeof p=="number"?p:typeof p=="boolean"?p?"":"":"-"]})]},h))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),d?e.jsx(Dm,{}):m||!(o!=null&&o.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.deliveryLocationDetails).map(([h,p])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:h.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof p=="string"||typeof p=="number"?p:typeof p=="boolean"?p?"":"":"-"]})]},h))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),d?e.jsx(Dm,{}):m||!(o!=null&&o.materialOrderingList)?e.jsx("p",{className:"text-red-500",children:"Failed to load material data"}):Object.entries(o.materialOrderingList).map(([h,p])=>e.jsxs("div",{className:"mb-4 bg-white outline-noneh rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>x(h),className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:h.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${r===h?"up":"down"}`})]}),e.jsx("div",{className:`transition-all duration-300 overflow-hidden ${r===h?"max-h-[1000px] p-4":"max-h-0"}`,children:p.length===0?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No items needed for this section."})]}):e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] max-h-[400px] overflow-y-auto custom-scrollbar rounded border border-gray-200",children:[e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] bg-blue-50 text-xs text-blue-900 font-semibold border-b border-blue-200 py-2 px-2 sticky top-0",children:Object.keys(p[0]).filter(g=>g!=="_id").map(g=>e.jsx("div",{className:"text-center capitalize",children:g==="upload"?"Image":g.replace(/([A-Z])/g," $1")},g))}),p.map((g,y)=>e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] text-xs text-gray-800 border-b border-gray-100 py-2 px-2 hover:bg-gray-50",children:Object.entries(g).filter(([j])=>j!=="_id").map(([j,E],b)=>e.jsx("div",{className:"text-center break-words",children:typeof E=="boolean"?E?"":"":typeof E=="string"||typeof E=="number"?E:"-"},b))},y))]})})})]},h))]})]}),e.jsx(Yy,{})]})},Dm=()=>e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),Vy=()=>e.jsx("header",{className:"bg-white shadow sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-full w-full mx-auto flex items-center gap-4 px-4 py-3",children:[e.jsx("img",{src:bt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 object-contain"}),e.jsx("h1",{className:"text-xl font-bold",children:bt.COMPANY_NAME})]})}),Yy=()=>e.jsxs("footer",{className:"bg-gray-100 border-t border-gray-200 py-6 px-6 text-center text-sm text-gray-600",children:[" ",new Date().getFullYear()," ",bt.COMPANY_NAME,". All rights reserved."]});function AR(){var h,p;const{projectId:t,token:a}=Re(),{data:r,isLoading:l,isError:o,error:d,refetch:m}=wR(t,a);if(l)return e.jsx(jt,{});if(o||!r)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((p=(h=d==null?void 0:d.response)==null?void 0:h.data)==null?void 0:p.message)||(d==null?void 0:d.message)||"Failed to load cost estimation data"}),e.jsx(L,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const x=Object.entries(r.materialArrivalList||{});return e.jsxs("div",{className:"min-h-screen  bg-gray-50  space-y-6",children:[e.jsx(Vy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[90%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Arrived Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),l?e.jsx(Fe,{}):o||!(r!=null&&r.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(r.shopDetails).map(([g,y])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof y=="string"||typeof y=="number"?y:typeof y=="boolean"?y?"":"":"-"]})]},g))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),l?e.jsx(Fe,{}):o||!(r!=null&&r.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(r.deliveryLocationDetails).map(([g,y])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof y=="string"||typeof y=="number"?y:typeof y=="boolean"?y?"":"":"-"]})]},g))})]}),e.jsxs("section",{className:"max-w-full mx-auto space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),x.map(([g,y])=>e.jsx(OR,{projectId:t,token:a,roomKey:g,items:y,refetch:m},g))]})]}),e.jsx(Yy,{})]})}const OR=({projectId:t,roomKey:a,items:r,refetch:l})=>{const o=Gy(),d=Ky(),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState(null),[b,k]=A.useState(null),[w,C]=A.useState({}),[v,N]=A.useState(null),T=Zs[a],P=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(g)),j&&q.append("upload",j);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),_({title:"Added",description:"New item saved."}),p(!1),y({}),E(null),l()}catch(H){_({title:"Error",description:H.message,variant:"destructive"})}},D=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(w)),v&&q.append("upload",v);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),_({title:"Updated",description:"Item saved."}),l(),k(null),C({}),N(null)}catch(H){_({title:"Error",description:H.message,variant:"destructive"})}},$=async q=>{try{await d.mutateAsync({projectId:t,roomKey:a,itemId:q}),_({title:"Deleted",description:"Item removed."}),l()}catch(H){_({title:"Error",description:H.message,variant:"destructive"})}};return e.jsxs("div",{className:"mb-4 bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",onClick:()=>x(!m),children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:a==null?void 0:a.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${m?"up":"down"}`})]}),e.jsx("div",{className:`transition-max-h duration-300 ease-out overflow-hidden ${m?"max-h-[500px] p-4":"max-h-0 p-0"}`,children:T&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1200px] space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] bg-blue-50 text-xs sm:text-sm font-semibold text-blue-900 border-b border-blue-200 py-2 px-2 rounded-t mb-2",children:[T.map(q=>e.jsx("div",{className:"text-center capitalize truncate",children:q==="image"?"Upload":q==="verifiedByAccountant"?"Verified":q},q)),e.jsx("div",{className:"text-center truncate",children:"Actions"})]}),(r==null?void 0:r.length)===0&&!h?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Start by adding your first item to this room."}),e.jsxs(L,{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 text-sm rounded",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add One"]})]}):r==null?void 0:r.map((q,H)=>e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 py-2 border-b border-gray-100 hover:bg-gray-50 min-h-[60px]",children:[T.map(he=>{var K;return he==="image"?b===H?e.jsx(de,{type:"file",accept:"image/*",onChange:B=>{var te;return N(((te=B.target.files)==null?void 0:te[0])||null)},className:"w-full text-sm"},he):(K=q.upload)!=null&&K.url?e.jsx("img",{src:q.upload.url,alt:"",className:"w-12 h-12 object-cover rounded mx-auto"}):e.jsx("div",{className:"text-center",children:"No image"}):he==="verifiedByAccountant"?b===H?e.jsx(de,{type:"checkbox",className:"text-center",checked:!!w.verifiedByAccountant,onChange:B=>C(te=>({...te,verifiedByAccountant:B.target.checked}))},he):q!=null&&q.verifiedByAccountant?e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-check text-green-600 text-lg"})}):e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-xmark text-red-500 text-lg"})}):he==="remarks"?b===H?e.jsx(Ls,{value:w[he]||"",className:"text-center w-full text-sm",onChange:B=>C(te=>({...te,remarks:B.target.value}))},he):e.jsx("div",{className:"w-full text-center overflow-x-auto max-h-[70px] overflow-y-auto custom-scrollbar",children:q[he]||"N/A"}):b===H?e.jsx(de,{value:w[he]||"",onChange:B=>C(te=>({...te,[he]:B.target.value})),className:"w-full text-sm"},he):e.jsx("div",{className:"text-center truncate",children:q[he]??"-"})}),e.jsx("div",{className:"flex gap-2 justify-center",children:b===H?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:"sm",onClick:D,children:"Save"}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>k(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>{k(H),C(q)},children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>$(q._id),children:e.jsx("i",{className:"fas fa-trash text-red-500"})})]})})]},H)),!h&&r.length>0&&e.jsx("div",{className:"pt-3 text-center",children:e.jsx(L,{onClick:()=>p(!0),children:" Add Item"})}),h&&e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 bg-white p-2 rounded mb-4",children:[T.map(q=>q==="image"?e.jsx(de,{type:"file",accept:"image/*",onChange:H=>{var he;return E(((he=H.target.files)==null?void 0:he[0])||null)},className:"border-2 w-full text-sm"},q):q==="verifiedByAccountant"?e.jsx(de,{type:"checkbox",className:"text-center w-full text-sm",checked:!!g.verifiedByAccountant,onChange:H=>y(he=>({...he,verifiedByAccountant:H.target.checked}))},q):e.jsx(de,{placeholder:q,value:g[q]||"",onChange:H=>y(he=>({...he,[q]:H.target.value})),className:"w-full text-sm"},q)),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(L,{size:"sm",className:"h-10",onClick:P,children:"Add"}),e.jsx(L,{size:"sm",variant:"secondary",onClick:()=>p(!1),children:"Cancel"})]})]})]})})})]})},RR=async(t,a)=>(await a.get(`/worktasks/getworktaksmain/${t}`)).data.data,TR=async(t,a)=>(await a.get(`/worktasks/getworkschedule/${t}`)).data.data,PR=async(t,a)=>(await a.get(`/worktasks/getdailyschedule/${t}`)).data.data,MR=async(t,a)=>{const r=await a.get(`/worktasks/${t}/getworkers`);return console.log("res",r),r.data.data},LR=async(t,a,r,l)=>(await l.post(`/worktasks/${r}/daily-task/${t}`,a)).data,_R=async(t,a,r,l)=>(await l.post(`/worktasks/${r}/work-plan/${t}`,a)).data,FR=async(t,a,r,l,o)=>(await o.put(`/worktasks/${r}/daily-task/${t}/${a}`,l)).data,DR=async(t,a,r,l,o)=>(await o.put(`/worktasks/${r}/work-plan/${t}/${a}`,l)).data,qR=async(t,a,r,l)=>(await l.delete(`/worktasks/${r}/daily-task/${t}/${a}`)).data,zR=async(t,a,r,l)=>(await l.delete(`/worktasks/${r}/work-plan/${t}/${a}`)).data,UR=async(t,a,r,l)=>(await l.post(`/worktasks/${r}/md-approval/${t}`,a)).data,$R=async(t,a,r,l)=>(await l.patch(`/worktasks/${r}/daily-schedule/${t}/status`,a)).data,IR=async(t,a,r,l)=>(await l.patch(`/worktasks/${r}/work-schedule/${t}/status`,a)).data,BR=t=>{const{role:a}=Z(),r=J(a),l=["owner","staff","CTO","worker","client"];return qe({queryKey:["work-main-stage",t],queryFn:()=>{if(!a||!l.includes(a))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return RR(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1})},HR=t=>{const{role:a}=Z(),r=J(a),l=["owner","staff","CTO","worker","client"];return qe({queryKey:["work-schedule",t],queryFn:()=>{if(!a||!l.includes(a))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return TR(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1})},QR=t=>{const{role:a}=Z(),r=J(a),l=["owner","staff","CTO","worker","client"];return qe({queryKey:["daily-schedule",t],queryFn:()=>{if(!a||!l.includes(a))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return PR(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1})},Wy=t=>{const{role:a}=Z(),r=J(a),l=["owner","staff","CTO"];return qe({queryKey:["project-workers",t],queryFn:()=>{if(!a||!l.includes(a))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return MR(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1})},GR=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:l,projectId:o,formData:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return LR(l,d,o,a)}})},KR=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:l,formData:o,projectId:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return console.log("workschlksdflask",l),_R(l,o,d,a)}})},VR=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:l,taskId:o,formData:d,projectId:m})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return FR(l,o,m,d,a)}})},YR=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:l,planId:o,formData:d,projectId:m})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return DR(l,o,m,d,a)}})},WR=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:l,taskId:o,projectId:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return qR(l,o,d,a)}})},XR=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:l,planId:o,projectId:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return zR(l,o,d,a)}})},ZR=()=>{const{role:t}=Z(),a=J(t),r=["owner"];return ie({mutationFn:async({mainStageId:l,payload:o,projectId:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return UR(l,o,d,a)}})},JR=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:l,payload:o,projectId:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return $R(l,o,d,a)}})},e6=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:l,payload:o,projectId:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return IR(l,o,d,a)}})},t6=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/worktasks/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},s6=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/worktasks/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},a6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await t6({formId:l,projectId:o,deadLine:d,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["material-rooms"]})}})},n6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await s6({projectId:l,api:r})},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["material-rooms",o]})}})},r6=()=>{var $,q,H,he,K,B,te,V;const{projectId:t,organizationId:a}=Re(),r=yt(),{isMobile:l,openMobileSidebar:o}=We(),{data:d,isLoading:m,refetch:x,error:h}=BR(t),{mutateAsync:p,isPending:g}=a6(),{mutateAsync:y,isPending:j}=n6(),{mutateAsync:E,isPending:b}=ZR(),[k,w]=A.useState(!1),[C,v]=A.useState("pending"),N=r.pathname.includes("/workschedule")||r.pathname.includes("/dailyschedule"),T=()=>{w(!0)},P=async()=>{var oe,F;try{await y({projectId:t}),_({description:"Completion status updated successfully.",title:"Success"}),x()}catch(W){_({title:"Error",description:((F=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:F.message)||W.message||"Failed to update completion.",variant:"destructive"})}},D=async()=>{var oe,F;try{await E({projectId:t,mainStageId:d==null?void 0:d._id,payload:{action:C}}),_({description:"MD Approval updated successfully.",title:"Success"}),w(!1),x()}catch(W){_({title:"Error",description:((F=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:F.message)||W.message||"Failed to update Approval.",variant:"destructive"})}};return N?e.jsx(Vt,{}):m?e.jsx(jt,{}):e.jsxs("main",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-200 hover:bg-gray-100",title:"Open menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-digging mr-2"})," Work Schedule Overview"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(L,{isLoading:j,onClick:P,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:10,stagePath:"worktasks",className:"w-full sm:w-auto"}),e.jsx(rs,{className:"w-full sm:w-auto",stageName:"WorkMainStageScheduleModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null})]})]}),h?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=($=h==null?void 0:h.response)==null?void 0:$.data)==null?void 0:q.message)||(h==null?void 0:h.message)||"Couldn't load data."}),e.jsx(L,{isLoading:m,onClick:()=>x(),className:"bg-red-600 text-white hover:bg-red-700 px-4 py-2",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-6 w-full border-l-4 border-blue-600 shadow bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"worktasks",completedAt:(H=d==null?void 0:d.timer)==null?void 0:H.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(he=d==null?void 0:d.timer)==null?void 0:he.deadLine,startedAt:(K=d==null?void 0:d.timer)==null?void 0:K.startedAt,refetchStageMutate:x,deadLineMutate:p,isPending:g})]}),e.jsxs(Pe,{className:"p-2 mb-4 border-l-4 border-blue-600 bg-white border shadow-md rounded-xl",children:[e.jsxs("div",{className:"text-blue-600 rounded-t flex items-center gap-2 mb-4",children:[e.jsx("i",{className:"fas fa-user-shield"}),e.jsx("h2",{className:"text-lg font-semibold",children:"MD Approval"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 font-medium ",children:"Status:"}),k?e.jsxs(lt,{value:C,onValueChange:oe=>v(oe),children:[e.jsx(at,{children:e.jsx(it,{selectedValue:C,placeholder:"Select status"})}),e.jsx(nt,{children:["pending","approved","rejected"].map(oe=>e.jsx(ye,{value:oe,children:oe.charAt(0).toUpperCase()+oe.slice(1)},oe))})]}):e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${((B=d==null?void 0:d.mdApproval)==null?void 0:B.status)==="approved"?"bg-green-200 text-green-700":((te=d==null?void 0:d.mdApproval)==null?void 0:te.status)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-200 text-red-700"}`,children:((V=d==null?void 0:d.mdApproval)==null?void 0:V.status)||"N/A"}),k?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{size:"sm",variant:"primary",isLoading:b,onClick:D,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(L,{size:"sm",variant:"secondary",onClick:()=>w(!1),children:e.jsx("i",{className:"fas fa-xmark"})})]}):e.jsx(L,{size:"md",onClick:T,children:e.jsx("i",{className:"fas fa-pencil"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs($t,{to:`workschedule/${d==null?void 0:d.workScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-list-alt text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Work Plans"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Manage detailed work plans for the project."})]})]}),e.jsxs($t,{to:`dailyschedule/${d==null?void 0:d.dailyScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-calendar-check text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Daily Tasks"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Track daily activities and progress reports."})]})]})]})]})]})},l6=()=>{var V,oe,F,W,ue;const{sectionId:t,projectId:a,organizationId:r}=Re(),l=Me();if(!a)return;const{data:o,isLoading:d,refetch:m,error:x}=HR(a),{data:h}=Wy(a),{mutateAsync:p,isPending:g}=e6(),y=KR(),j=YR(),E=XR(),[b,k]=A.useState(null),[w,C]=A.useState(null),[v,N]=A.useState(null),[T,P]=A.useState("pending"),[D,$]=A.useState(!1);if(d)return e.jsx(xn,{});x&&(oe=(V=x==null?void 0:x.response)==null?void 0:V.data)!=null&&oe.message;const q=()=>{k({workType:"",startDate:"",endDate:"",assignedTo:"",notes:""})},H=()=>$(!0),he=async()=>{var re,R;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await p({projectId:a,workScheduleId:o._id,payload:{status:T}}),_({title:"Success",description:"Work Schedule status updated successfully."}),$(!1),m()}catch(z){_({title:"Error",description:((R=(re=z==null?void 0:z.response)==null?void 0:re.data)==null?void 0:R.message)||z.message||"Failed to update status.",variant:"destructive"})}},K=async()=>{var re,R,z;try{if(!b)return;if(!((re=b.workType)!=null&&re.trim()))throw new Error("work field is mandatory");await y.mutateAsync({workScheduleId:t,formData:b,projectId:a}),k(null),_({title:"Success",description:"Item Saved"}),m()}catch(M){_({variant:"destructive",title:"Error",description:((z=(R=M==null?void 0:M.response)==null?void 0:R.data)==null?void 0:z.message)||(M==null?void 0:M.message)||"failed to add"})}},B=async()=>{var re,R,z;try{if(!v||!w)return;if(!((re=v.workType)!=null&&re.trim()))throw new Error("work field is mandatory");await j.mutateAsync({workScheduleId:o._id,planId:w,formData:v,projectId:a}),C(null),N(null),_({title:"Success",description:"Item Saved"}),m()}catch(M){_({variant:"destructive",title:"Error",description:((z=(R=M==null?void 0:M.response)==null?void 0:R.data)==null?void 0:z.message)||(M==null?void 0:M.message)||"Update failed"})}},te=async re=>{var R,z;try{await E.mutateAsync({workScheduleId:o._id,planId:re,projectId:a}),_({title:"Success",description:"Item deleted"}),m()}catch(M){_({variant:"destructive",title:"Error",description:((z=(R=M==null?void 0:M.response)==null?void 0:R.data)==null?void 0:z.message)||(M==null?void 0:M.message)||"Update failed"})}};return e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-6 px-4",children:" Work Plans"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),D?e.jsxs(e.Fragment,{children:[e.jsxs(lt,{value:T,onValueChange:re=>P(re),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select status",selectedValue:T})}),e.jsx(nt,{children:["pending","completed"].map(re=>e.jsx(ye,{value:re,children:re},re))})]}),e.jsx(L,{size:"sm",variant:"primary",disabled:g,onClick:he,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(L,{size:"sm",onClick:H,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(L,{variant:"primary",className:"h-10",onClick:()=>l(`/${r}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1024px]",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 bg-blue-100 text-sm font-semibold text-blue-900 rounded-t-lg shadow-md",children:[e.jsx("div",{className:"text-center",children:"S.No"}),e.jsx("div",{className:"text-center",children:"Work Type"}),e.jsx("div",{className:"text-center",children:"Start Date"}),e.jsx("div",{className:"text-center",children:"End Date"}),e.jsx("div",{className:"text-center",children:"Assigned To"}),e.jsx("div",{className:"text-center",children:"Notes"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col divide-y",children:[((F=o==null?void 0:o.plans)==null?void 0:F.length)>0?o.plans.map((re,R)=>{var z;return e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 border-b border-[#5557584a] items-center bg-white hover:bg-blue-50 transition",children:[e.jsx("div",{className:"font-medium text-gray-700 text-center",children:R+1}),w===re._id?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.workType,onChange:M=>N({...v,workType:M.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.startDate,onChange:M=>N({...v,startDate:M.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.endDate,onChange:M=>N({...v,endDate:M.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.assignedTo,onChange:M=>N({...v,assignedTo:M.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(M=>e.jsx("option",{value:M==null?void 0:M._id,children:M.workerName},M==null?void 0:M._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.notes,onChange:M=>N({...v,notes:M.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(L,{variant:"primary",isLoading:j.isPending,onClick:B,children:"Save"}),e.jsx("button",{onClick:()=>{C(null),N(null)},className:"bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-gray-700 text-center",children:re.workType||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:re.startDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:re.endDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:((z=h==null?void 0:h.find(M=>{var G;return M._id===((G=re.assignedTo)==null?void 0:G._id)}))==null?void 0:z.workerName)||"Not Assigned"}),e.jsx("div",{className:"text-gray-700 text-center",children:re.notes||"N/A"}),e.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[e.jsx("button",{onClick:()=>{C(re._id),N(re)},className:"text-blue-600 hover:text-blue-800",title:"Edit",children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(L,{isLoading:E.isPending,onClick:()=>te(re._id),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]})]},re._id)}):!b&&e.jsxs("div",{className:"mt-6 text-center border border-blue-100 p-8 rounded-lg bg-blue-50",children:[e.jsx("p",{className:"text-blue-600 text-sm",children:"No work plans created yet."}),e.jsxs("button",{onClick:q,className:"mt-3 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Work Plan"]})]}),b&&e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 items-center bg-white",children:[e.jsx("div",{className:"text-center font-medium text-gray-700",children:(W=o==null?void 0:o.plans)!=null&&W.length?o.plans.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Work Type",value:b.workType,onChange:re=>k({...b,workType:re.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:b.startDate,onChange:re=>k({...b,startDate:re.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:b.endDate,onChange:re=>k({...b,endDate:re.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:b.assignedTo,onChange:re=>k({...b,assignedTo:re.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(re=>e.jsx("option",{value:re._id,children:re.workerName},re._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Notes",value:b.notes,onChange:re=>k({...b,notes:re.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(L,{variant:"primary",isLoading:y.isPending,onClick:K,children:"Save"}),e.jsx(L,{variant:"secondary",onClick:()=>k(null),children:"Cancel"})]})]})]}),!b&&((ue=o==null?void 0:o.plans)==null?void 0:ue.length)>0&&e.jsx("div",{className:"mt-5 text-left",children:e.jsxs(L,{size:"sm",variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Work"]})})]})})]})},i6=()=>{var W,ue,re,R,z;const{sectionId:t,projectId:a,organizationId:r}=Re(),l=Me();if(!t)return;const{data:o,isLoading:d,refetch:m,isError:x,error:h}=QR(a),{data:p,isLoading:g}=Wy(a),{mutateAsync:y,isPending:j}=JR(),E=GR(),b=VR(),k=WR(),[w,C]=A.useState(!1),[v,N]=A.useState({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),[T,P]=A.useState(null),[D,$]=A.useState(null),[q,H]=A.useState("pending"),[he,K]=A.useState(!1),B=()=>K(!0),te=async()=>{var M,G;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await y({projectId:a,dailyScheduleId:o._id,payload:{status:q}}),_({title:"Success",description:"Work Schedule status updated successfully."}),K(!1),m()}catch(Y){_({title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||Y.message||"Failed to update status.",variant:"destructive"})}},V=async()=>{var M,G,Y;try{if(!((M=v.taskName)!=null&&M.trim()))throw new Error("task Name field is mandatory");const ge=new FormData;ge.append("taskName",v.taskName),ge.append("description",v.description),ge.append("date",v.date),ge.append("status",v.status),ge.append("assignedTo",v.assignedTo),await E.mutateAsync({dailyScheduleId:t,formData:ge,projectId:a}),C(!1),N({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),_({title:"Success",description:"Item Saved"}),m()}catch(ge){_({variant:"destructive",title:"Error",description:((Y=(G=ge==null?void 0:ge.response)==null?void 0:G.data)==null?void 0:Y.message)||(ge==null?void 0:ge.message)||"failed to save"})}},oe=async M=>{var G,Y,ge;try{if(!((G=D.taskName)!=null&&G.trim()))throw new Error("task Name field is mandatory");const se=new FormData;se.append("taskName",D.taskName),se.append("description",D.description),se.append("date",D.date),se.append("status",D.status),se.append("assignedTo",D.assignedTo),await b.mutateAsync({dailyScheduleId:t,taskId:M,formData:se,projectId:a}),P(null),$(null),_({title:"Success",description:"Item updated"}),m()}catch(se){_({variant:"destructive",title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||(se==null?void 0:se.message)||"Update failed"})}},F=async M=>{var G,Y;try{await k.mutateAsync({dailyScheduleId:t,taskId:M,projectId:a}),_({title:"Deleted",description:"Item removed"}),m()}catch(ge){_({title:"Error",description:((Y=(G=ge==null?void 0:ge.response)==null?void 0:G.data)==null?void 0:Y.message)||(ge==null?void 0:ge.message)||"Failed to delete",variant:"destructive"})}};return d?e.jsx(xn,{}):(x&&(ue=(W=h==null?void 0:h.response)==null?void 0:W.data)!=null&&ue.message,g?e.jsx("p",{children:"getting the worksrs"}):e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4 px-4",children:" Daily Tasks"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),he?e.jsxs(e.Fragment,{children:[e.jsxs(lt,{value:q,onValueChange:M=>H(M),children:[e.jsx(at,{children:e.jsx(it,{placeholder:"Select status",selectedValue:q})}),e.jsx(nt,{children:["pending","completed"].map(M=>e.jsx(ye,{value:M,children:M},M))})]}),e.jsx(L,{size:"sm",variant:"primary",disabled:j,onClick:te,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(L,{size:"sm",onClick:B,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(L,{variant:"primary",className:"h-10",onClick:()=>l(`/${r}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"rounded-lg overflow-x-auto shadow-sm",children:e.jsxs("div",{className:"min-w-[1100px]",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-100 px-4 py-3 font-semibold text-blue-800 text-center text-sm",children:[e.jsx("div",{children:"S.No"}),e.jsx("div",{children:"Task Name"}),e.jsx("div",{children:"Description"}),e.jsx("div",{children:"Date"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Assigned To"}),e.jsx("div",{children:"Actions"})]}),((re=o==null?void 0:o.tasks)==null?void 0:re.length)>0?o.tasks.map((M,G)=>{var Y,ge;return e.jsxs("div",{className:"grid grid-cols-7 gap-1 items-center px-4 py-2 text-center hover:bg-blue-50 transition border-b border-[#81838556]",children:[e.jsx("div",{children:G+1}),T===G?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:D.taskName,onChange:se=>$({...D,taskName:se.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:D.description,onChange:se=>$({...D,description:se.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:D.date,onChange:se=>$({...D,date:se.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:D.status,onChange:se=>$({...D,status:se.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:D.assignedTo,onChange:se=>$({...D,assignedTo:se.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),p==null?void 0:p.map(se=>e.jsx("option",{value:se._id,children:se.workerName},se._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(L,{isLoading:b.isPending,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded",onClick:()=>oe(M._id),children:"Save"}),e.jsx("button",{className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded",onClick:()=>{P(null),$(null)},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:M.taskName||"N/A"}),e.jsx("div",{children:M.description||"N/A"}),e.jsx("div",{children:M.date||"N/A"}),e.jsx("div",{className:"capitalize",children:((Y=M==null?void 0:M.status)==null?void 0:Y.replace("_"," "))||"N/A"}),e.jsx("div",{children:((ge=p==null?void 0:p.find(se=>{var Ne;return(se==null?void 0:se._id)===((Ne=M==null?void 0:M.assignedTo)==null?void 0:Ne._id)}))==null?void 0:ge.workerName)||"Not Assigned"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded",onClick:()=>{P(G),$(M)},children:"Edit"}),e.jsx(L,{isLoading:k.isPending,onClick:()=>F(M._id),children:"Delete"})]})]})]},M._id)}):w?null:e.jsxs("div",{className:"text-center text-gray-600 py-6",children:["No tasks created yet.",e.jsx("br",{}),e.jsxs(L,{variant:"primary",className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",onClick:()=>C(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add First Task"]})]}),w&&e.jsxs("div",{className:"grid grid-cols-7 items-center gap-2 px-4 py-3 text-center bg-white",children:[e.jsx("div",{children:(R=o==null?void 0:o.tasks)!=null&&R.length?o.tasks.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:v.taskName,onChange:M=>N({...v,taskName:M.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:v.description,onChange:M=>N({...v,description:M.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:v.date,onChange:M=>N({...v,date:M.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:v.status,onChange:M=>N({...v,status:M.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:v.assignedTo,onChange:M=>N({...v,assignedTo:M.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),p==null?void 0:p.map(M=>e.jsx("option",{value:M==null?void 0:M._id,children:M.workerName},M==null?void 0:M._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(L,{variant:"primary",isLoading:E.isPending,onClick:V,children:"Add"}),e.jsx(L,{variant:"secondary",className:"",onClick:()=>C(!1),children:"Cancel"})]})]})]})}),!w&&((z=o==null?void 0:o.tasks)==null?void 0:z.length)>0&&e.jsx("div",{className:"text-left mt-6",children:e.jsxs(L,{size:"md",variant:"primary",onClick:()=>C(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Task"]})})]}))},o6=async(t,a,r,l)=>{console.log("formData",r);const{data:o}=await l.post(`/installation/${t}/${a}/item/create`,r);if(!o.ok)throw new Error(o.message);return o.data},c6=async(t,a,r,l)=>{const{data:o}=await l.put(`/installation/${t}/${a}/item/edit`,r);if(!o.ok)throw new Error(o.message);return o.data},d6=async(t,a)=>{const{data:r}=await a.delete(`/installation/${t.projectId}/item/delete`,{data:t});if(!r.ok)throw new Error(r.message);return r.message},u6=async(t,a)=>{const{data:r}=await a.get(`/installation/${t}/getalldetail`);if(!r.ok)throw new Error(r.message);return r.data},m6=()=>{const t=["CTO","owner","staff","worker"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!r)throw new Error("API instance not found.");return await o6(o,d,m,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["installation-details",d]})}})},f6=()=>{const t=["CTO","owner","staff","worker"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!r)throw new Error("API instance not found.");return await c6(o,d,m,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["installation-details",d]})}})},h6=()=>{const t=["CTO","owner","staff","worker"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async o=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!r)throw new Error("API instance not found.");return await d6(o,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["installation-details",d]})}})},Xy=t=>{const a=["CTO","owner","staff","worker","client"],{role:r}=Z(),l=J(r);return qe({queryKey:["installation-details",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await u6(t,l)},enabled:!!r&&!!t&&!!l,retry:!1,refetchOnMount:!1})},x6=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/installation/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},p6=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/installation/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},g6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await x6({formId:l,projectId:o,deadLine:d,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["installation-details"]})}})},b6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await p6({projectId:l,api:r})},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["installation-details",o]})}})},y6=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"];function w6(){var w,C,v,N,T;const{projectId:t,organizationId:a}=Re(),r=yt(),{isMobile:l,openMobileSidebar:o}=We(),d=r.pathname.includes("/installationroom"),{data:m,isLoading:x,isError:h,refetch:p,error:g}=Xy(t),{mutateAsync:y,isPending:j}=b6(),{mutateAsync:E,isPending:b}=g6(),k=async()=>{var P,D;try{await y({projectId:t}),_({title:"Success",description:"Completion status updated successfully"})}catch($){_({title:"Error",description:((D=(P=$==null?void 0:$.response)==null?void 0:P.data)==null?void 0:D.message)||$.message||"Failed to update status",variant:"destructive"})}};return x?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full",children:d?e.jsx(Vt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-tools mr-2"})," Installation Overview"]}),e.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:flex-row gap-2",children:[e.jsxs(L,{isLoading:j,onClick:k,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsx(ws,{projectId:t,stageNumber:11,stagePath:"installation",className:"w-full sm:w-auto"}),e.jsx(rs,{stageName:"InstallationModel",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),h?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((C=(w=g==null?void 0:g.response)==null?void 0:w.data)==null?void 0:C.message)||(g==null?void 0:g.message)||"Something went wrong"}),e.jsx(L,{isLoading:x,onClick:()=>p(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):m&&e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(v=m==null?void 0:m.timer)==null?void 0:v.completedAt,stageName:"installation",projectId:t,formId:m==null?void 0:m._id,deadLine:(N=m==null?void 0:m.timer)==null?void 0:N.deadLine,startedAt:(T=m==null?void 0:m.timer)==null?void 0:T.startedAt,refetchStageMutate:p,deadLineMutate:E,isPending:b})]}),e.jsx("div",{className:"sm:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[70vh] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:y6.map(P=>{var D;return e.jsxs($t,{to:`installationroom/${P}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:P}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((D=m==null?void 0:m[P])==null?void 0:D.length)||0," work items"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tap to view details"})]},P)})})]})]})})}function v6(){var B,te;const{roomkey:t,projectId:a,organizationId:r}=Re(),l=Me(),[o,d]=A.useState(null),{data:m,isLoading:x,refetch:h,error:p,isError:g}=Xy(a),{mutateAsync:y,isPending:j}=m6(),{mutateAsync:E,isPending:b}=f6(),{mutateAsync:k,isPending:w}=h6(),[C,v]=A.useState({workName:"",descritpion:"",completedDate:"",file:void 0}),[N,T]=A.useState(!1),[P,D]=A.useState(null),$=(m==null?void 0:m[t])||[],q=async()=>{var V,oe;try{if(!C.workName.trim())throw new Error("work Name field is mandatory");const F=new FormData;F.append("workName",C.workName),C.descritpion&&F.append("descritpion",C.descritpion),C.completedDate&&F.append("completedDate",C.completedDate),C.file&&F.append("file",C.file),await y({projectId:a,roomName:t,formData:F}),T(!1),_({description:"created successfully",title:"Success"})}catch(F){_({title:"Error",description:((oe=(V=F==null?void 0:F.response)==null?void 0:V.data)==null?void 0:oe.message)||F.message||"Failed to update completion status",variant:"destructive"})}},H=async()=>{var V,oe;try{if(!P)return;if(!C.workName.trim())throw new Error("work Name field is mandatory");const F=new FormData;F.append("itemId",P),C.workName&&F.append("workName",C.workName),C.descritpion&&F.append("descritpion",C.descritpion),C.completedDate&&F.append("completedDate",C.completedDate),C.file&&F.append("file",C.file),await E({projectId:a,roomName:t,formData:F},{onSuccess:()=>{v({workName:"",descritpion:"",completedDate:"",file:void 0}),D(null)}}),_({description:"edited successfully",title:"Success"})}catch(F){_({title:"Error",description:((oe=(V=F==null?void 0:F.response)==null?void 0:V.data)==null?void 0:oe.message)||F.message||"Failed to update completion status",variant:"destructive"})}},he=async V=>{var oe,F;try{await k({projectId:a,roomName:t,itemId:V}),_({description:"deleted successfully",title:"Success"}),h()}catch(W){_({title:"Error",description:((F=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:F.message)||W.message||"Failed to update completion status",variant:"destructive"})}},K=()=>{v({workName:"",descritpion:"",completedDate:"",file:void 0}),T(!1),D(null)};return x?e.jsx(xn,{}):(g&&(te=(B=p==null?void 0:p.response)==null?void 0:B.data)!=null&&te.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(L,{variant:"primary",className:"",onClick:()=>l(`/${r}/projectdetails/${a}/installation`),children:"Go Back"})]}),$.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-5 mb-2  gap-2 font-semibold bg-blue-100  text-blue-900 p-2 rounded ",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-tasks text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No works added yet for this room."}),e.jsxs(L,{onClick:()=>T(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]}):e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("section",{className:"!max-h-[100%] overflow-y-auto",children:[$.map(V=>{var oe,F;return P===V._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",value:C.workName,onChange:W=>v({...C,workName:W.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",value:C.descritpion,onChange:W=>v({...C,descritpion:W.target.value})}),e.jsx("input",{type:"date",className:"border-b p-1 focus:outline-none",value:C.completedDate,onChange:W=>v({...C,completedDate:W.target.value})}),e.jsx("input",{className:"border-b p-2 text-xs max-w-[80%] ",type:"file",accept:"image/*",onChange:W=>{var re;const ue=(re=W.target.files)==null?void 0:re[0];v({...C,file:ue})}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:"primary",isLoading:b,onClick:H,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(L,{variant:"secondary",onClick:K,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},V._id):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:V.workName||"N/A"}),e.jsx("div",{className:"text-center",children:V.descritpion||"N/A"}),e.jsx("div",{className:"text-center",children:V.completedDate?ui(V.completedDate.toLocaleString()):"N/A"}),e.jsx("div",{className:"text-center",children:((oe=V.upload)==null?void 0:oe.type)==="image"?e.jsx("img",{loading:"lazy",src:V.upload.url,alt:"preview",className:"w-10 mx-auto block h-10 object-cover border rounded shadow cursor-pointer",onClick:()=>{var W;return d((W=V.upload)==null?void 0:W.url)}}):((F=V.upload)==null?void 0:F.type)==="pdf"?e.jsx("a",{href:V.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(L,{onClick:()=>{D(V._id),T(!1),v({workName:V.workName||"",descritpion:V.descritpion||"",completedDate:V.completedDate?new Date(V.completedDate).toISOString().split("T")[0]:"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(L,{isLoading:w,variant:"danger",onClick:()=>he(V._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},V._id)}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-4 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Work Name",value:C.workName,onChange:V=>v({...C,workName:V.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Description",value:C.descritpion,onChange:V=>v({...C,descritpion:V.target.value})}),e.jsx("input",{type:"date",className:"border-b  p-1 focus:outline-none",value:C.completedDate,onChange:V=>v({...C,completedDate:V.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx("input",{className:"border-b max-w-[80%]",type:"file",accept:"image/*",onChange:V=>{var F;const oe=(F=V.target.files)==null?void 0:F[0];v({...C,file:oe})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(L,{isLoading:j,variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:K,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),!N&&e.jsxs(L,{onClick:()=>T(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]})}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0  bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:V=>V.stopPropagation(),className:"relative bg-white rounded p-4 lg:p-8 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-3 right-4 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{loading:"lazy",src:o,alt:"Full Preview",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const j6=async(t,a,r,l)=>{const{data:o}=await l.post(`/qualitycheck/${t}/${a}/item/create`,r);if(!o.ok)throw new Error(o.message);return o.data},N6=async(t,a,r,l,o)=>{const{data:d}=await o.put(`/qualitycheck/${t}/${a}/${r}/item/edit`,l);if(!d.ok)throw new Error(d.message);return d.data},S6=async(t,a,r,l)=>{const{data:o}=await l.delete(`/qualitycheck/${t}/${a}/${r}/item/delete`);if(!o.ok)throw new Error(o.message);return o},C6=async(t,a)=>{const{data:r}=await a.get(`/qualitycheck/${t}`);if(!r.ok)throw new Error(r.message);return r.data},k6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!r)throw new Error("can't make the call");return await j6(o,d,m,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["quality-checkup",d]})}})},E6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomName:d,itemId:m,formData:x})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!r)throw new Error("can't make the call");return await N6(o,d,m,x,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["quality-checkup",d]})}})},A6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomName:d,itemId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!r)throw new Error("can't make the call");return await S6(o,d,m,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["quality-checkup",d]})}})},Zy=t=>{const a=["owner","CTO","staff","worker"],{role:r}=Z(),l=J(r);return qe({queryKey:["quality-checkup",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await C6(t,l)},enabled:!!t,retry:!1,retryOnMount:!1})},O6=async({formId:t,deadLine:a,projectId:r,api:l})=>{const{data:o}=await l.put(`/qualitycheck/deadline/${r}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},R6=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/qualitycheck/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},T6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await O6({formId:l,projectId:d,deadLine:o,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["quality-checkup"]})}})},P6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await R6({projectId:l,api:r})},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["quality-checkup",o]})}})},M6=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"],L6=[{path:"adminwall",sectionName:"Admin Section"},{path:"workerwall",sectionName:"Worker Section"}];function _6(){var w,C,v,N,T;const{projectId:t,organizationId:a}=Re(),r=yt(),{isMobile:l,openMobileSidebar:o}=We();if(!t)return null;const{data:d,isLoading:m,isError:x,error:h,refetch:p}=Zy(t),{mutateAsync:g,isPending:y}=T6(),{mutateAsync:j,isPending:E}=P6(),b=r.pathname.includes("/qualitycheckroom/"),k=async()=>{var P,D;try{await j({projectId:t}),_({title:"Success",description:"Quality Check marked as complete."}),p()}catch($){_({title:"Error",description:((D=(P=$==null?void 0:$.response)==null?void 0:P.data)==null?void 0:D.message)||$.message||"Failed to update completion status",variant:"destructive"})}};return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full  overflow-y-auto custom-scrollbar",children:b?e.jsx(Vt,{context:{isMobile:l,openMobileSidebar:o}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[l&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-check-double"}),"Quality Check Overview"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-2 justify-end",children:[e.jsxs(L,{isLoading:E,onClick:k,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark as Complete"}),e.jsx("span",{className:"inline sm:hidden",children:"Complete"})]}),e.jsx(ws,{projectId:t,stageNumber:12,stagePath:"qualitycheck",className:"w-full sm:w-auto"}),e.jsx(rs,{stageName:"QualityCheckupModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((C=(w=h==null?void 0:h.response)==null?void 0:w.data)==null?void 0:C.message)||(h==null?void 0:h.message)||"Failed to load, please try again"}),e.jsx(L,{isLoading:m,onClick:()=>p(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"qualitycheck",completedAt:(v=d==null?void 0:d.timer)==null?void 0:v.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(T=d==null?void 0:d.timer)==null?void 0:T.startedAt,refetchStageMutate:p,deadLineMutate:g,isPending:y})]}),e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Rooms"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 mb-10",children:M6.map(P=>{var D;return e.jsxs($t,{to:`qualitycheckroom/${P}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:P.replace(/([A-Z])/g," $1").trim()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((D=d==null?void 0:d[P])==null?void 0:D.length)||0," works completed"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},P)})}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Walls SOP Section"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10",children:L6.map(P=>e.jsxs($t,{to:`qualitycheckroom/${P.path}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:P.sectionName.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},P.sectionName))})]})]})]})})}function F6(){var B,te;const{roomkey:t,projectId:a,organizationId:r}=Re(),l=Me(),[o,d]=A.useState(null),{data:m,isLoading:x,error:h,isError:p,refetch:g}=Zy(a),{mutateAsync:y,isPending:j}=k6(),{mutateAsync:E,isPending:b}=E6(),{mutateAsync:k,isPending:w}=A6(),[C,v]=A.useState({workName:"",status:"pending",remarks:"",file:void 0}),[N,T]=A.useState(!1),[P,D]=A.useState(null),$=(m==null?void 0:m[t])||[],q=async()=>{var V,oe;try{if(!C.workName.trim())throw new Error("Work name is mandatory");const F=new FormData;F.append("workName",C.workName),F.append("status",C.status),C.remarks&&F.append("remarks",C.remarks),C.file&&F.append("file",C.file),await y({projectId:a,roomName:t,formData:F}),_({description:"Created successfully",title:"Success"}),K(),g()}catch(F){_({title:"Error",description:((oe=(V=F==null?void 0:F.response)==null?void 0:V.data)==null?void 0:oe.message)||(F==null?void 0:F.message)||"Failed to create item",variant:"destructive"})}},H=async V=>{var oe,F;try{if(!P)return;if(!C.workName.trim())throw new Error("Work name is mandatory");const W=new FormData;W.append("itemId",P),C.workName&&W.append("workName",C.workName),W.append("status",C.status),C.remarks&&W.append("remarks",C.remarks),C.file&&W.append("file",C.file),await E({projectId:a,roomName:t,formData:W,itemId:V},{onSuccess:()=>{K()}}),_({description:"Edited successfully",title:"Success"}),g()}catch(W){_({title:"Error",description:((F=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:F.message)||(W==null?void 0:W.message)||"Failed to edit item",variant:"destructive"})}},he=async V=>{var oe,F;try{await k({projectId:a,roomName:t,itemId:V}),_({description:"Deleted successfully",title:"Success"}),g()}catch(W){_({title:"Error",description:((F=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:F.message)||W.message||"Failed to delete item",variant:"destructive"})}},K=()=>{v({workName:"",status:"pending",remarks:"",file:void 0}),T(!1),D(null)};return x?e.jsx(xn,{}):(p&&(te=(B=h==null?void 0:h.response)==null?void 0:B.data)!=null&&te.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(L,{variant:"primary",className:"h-10",onClick:()=>l(`/${r}/projectdetails/${a}/qualitycheck`),children:"Go Back"})]}),$.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] grid grid-cols-5 gap-2 font-semibold bg-blue-100 text-blue-900 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-check-double text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No items added yet for this room."}),e.jsxs(L,{onClick:()=>T(!0),variant:"primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded-t",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsx("div",{className:"overflow-y-auto relative z-[-10] max-h-[70vh] sm:max-h-[75vh] md:max-h-[80vh] lg:max-h-[45vh] xl:max-h-[77vh]",children:$.map((V,oe)=>{var F,W;return P===V._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx(de,{value:C.workName,placeholder:"Work Name",onChange:ue=>v({...C,workName:ue.target.value})}),e.jsx("div",{className:"relative z-50",children:e.jsxs(lt,{value:C.status,onValueChange:ue=>v({...C,status:ue}),children:[e.jsx(at,{children:e.jsx(it,{selectedValue:C.status,placeholder:"Select status"})}),e.jsx(nt,{children:["pass","fail","pending"].map(ue=>e.jsx(ye,{value:ue,children:ue},ue))})]})}),e.jsx(de,{value:C.remarks,placeholder:"Remarks",onChange:ue=>v({...C,remarks:ue.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(de,{type:"file",accept:"image/*",onChange:ue=>{var R;const re=(R=ue.target.files)==null?void 0:R[0];v({...C,file:re})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(L,{variant:"primary",isLoading:b,onClick:()=>H(V._id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(L,{variant:"secondary",onClick:K,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},V._id+oe):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:V.workName||"N/A"}),e.jsx("div",{className:"text-center",children:V.status||"N/A"}),e.jsx("div",{className:"text-center",children:V.remarks||"N/A"}),e.jsx("div",{className:"text-center",children:((F=V.upload)==null?void 0:F.type)==="image"?e.jsx("img",{src:V.upload.url,alt:"Preview",className:"w-10 h-10 object-cover rounded border cursor-pointer mx-auto",onClick:()=>d(V.upload.url)}):((W=V.upload)==null?void 0:W.type)==="pdf"?e.jsx("a",{href:V.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No Image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>{D(V._id),T(!1),v({workName:V.workName||"",status:V.status||"pending",remarks:V.remarks||"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(L,{variant:"primary",isLoading:w,onClick:()=>he(V._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},V._id+oe)})}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 bg-white border-b border-gray-200 items-center",children:[e.jsx(de,{placeholder:"Work Name",value:C.workName,onChange:V=>v({...C,workName:V.target.value})}),e.jsxs(lt,{value:C.status,onValueChange:V=>v({...C,status:V}),children:[e.jsx(at,{children:e.jsx(it,{selectedValue:C.status,placeholder:"Select status"})}),e.jsx(nt,{children:["pass","fail","pending"].map(V=>e.jsx(ye,{value:V,children:V},V))})]}),e.jsx(de,{placeholder:"Remarks",value:C.remarks,onChange:V=>v({...C,remarks:V.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(de,{type:"file",accept:"image/*",onChange:V=>{var F;const oe=(F=V.target.files)==null?void 0:F[0];v({...C,file:oe})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:q,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:K,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})]})}),!N&&$.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs(L,{isLoading:j,variant:"primary",onClick:()=>{T(!0),D(null),v({workName:"",status:"pending",remarks:"",file:void 0})},children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:V=>V.stopPropagation(),className:"relative bg-white rounded p-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const D6=async(t,a,r,l)=>{const{data:o}=await l.post(`/cleaning/${t}/${a}/upload`,r);if(!o.ok)throw new Error(o.message);return o.data},q6=async(t,a,r,l)=>{const{data:o}=await l.delete(`/cleaning/${t}/${a}/${r}/file`);if(!o.ok)throw new Error(o.message);return o},z6=async({projectId:t,roomId:a,notes:r,api:l})=>{const{data:o}=await l.put(`/cleaning/${t}/room/${a}/notes`,{notes:r});if(!o.ok)throw new Error(o.message);return o.data},U6=async(t,a,r,l)=>{const{data:o}=await l.put(`/cleaning/${t}/${a}/cleaning-status`,{completelyCleaned:r});if(!o.ok)throw new Error(o.message);return o},$6=async(t,a)=>{const{data:r}=await a.get(`/cleaning/${t}`);if(!r.ok)throw new Error(r.message);return r.data},I6=async(t,a,r)=>{const{data:l}=await r.get(`/cleaning/${t}/${a}`);if(!l.ok)throw new Error(l.message);return l.data},Mf=["owner","CTO","staff"],B6=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomId:o,formData:d})=>{if(!t||!Mf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await D6(l,o,d,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},H6=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomId:o,fileId:d})=>{if(!t||!Mf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await q6(l,o,d,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},Q6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,roomId:d,notes:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("Missing API instance");return await z6({projectId:o,roomId:d,notes:m,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",d]})}})},G6=()=>{const{role:t}=Z(),a=J(t),r=Ce();return ie({mutationFn:async({projectId:l,roomId:o,completelyCleaned:d})=>{if(!t||!Mf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await U6(l,o,d,a)},onSuccess:(l,{projectId:o})=>{r.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},K6=t=>{const{role:a}=Z(),r=J(a),l=["owner","CTO","staff","worker"];return qe({queryKey:["cleaning-and-sanitation",t],queryFn:async()=>{if(!a||!l.includes(a))throw new Error("Not allowed.");if(!r)throw new Error("No API instance available.");return await $6(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1})},V6=(t,a)=>{const{role:r}=Z(),l=J(r),o=["owner","CTO","staff","worker"];return qe({queryKey:["cleaning-and-sanitation",t,a],queryFn:async()=>{if(!r||!o.includes(r))throw new Error("Not allowed.");if(!l)throw new Error("No API instance available.");return await I6(t,a,l)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},Y6=async({formId:t,deadLine:a,projectId:r,api:l})=>{const{data:o}=await l.put(`/cleaning/deadline/${r}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},W6=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/cleaning/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},X6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await Y6({formId:l,deadLine:o,projectId:d,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["cleaning-and-sanitation"]})}})},Z6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await W6({projectId:l,api:r})},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})};function J6(){var w,C,v,N,T,P;const{projectId:t,organizationId:a}=Re(),r=yt(),{isMobile:l,openMobileSidebar:o}=We();if(!t)return null;const{data:d,isLoading:m,isError:x,refetch:h,error:p}=K6(t),{mutateAsync:g,isPending:y}=X6(),{mutateAsync:j,isPending:E}=Z6(),b=async()=>{var D,$;try{await j({projectId:t}),_({description:"Cleaning & Sanitation marked as complete.",title:"Success"}),h()}catch(q){_({title:"Error",description:(($=(D=q==null?void 0:q.response)==null?void 0:D.data)==null?void 0:$.message)||q.message||"Failed to update completion status",variant:"destructive"})}},k=r.pathname.includes("/cleaningroom/");return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar",children:k?e.jsx(Vt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-broom"}),e.jsx("span",{className:"hidden sm:inline text-2xl",children:" Cleaning & Sanitation Overview"}),e.jsx("span",{className:"inline sm:hidden text-2xl",children:" Cleaning Stage"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(L,{isLoading:E,onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white sm:w-auto w-full",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline-block",children:"Mark as Completed"}),e.jsx("span",{className:"inline sm:hidden",children:"Mark as Completed"})]}),e.jsxs("div",{className:"flex items-center justify-between w-full sm:gap-2",children:[e.jsx(ws,{projectId:t,stageNumber:13,stagePath:"cleaning",className:"!w-[48%] sm:!w-auto"}),e.jsx(rs,{stageName:"CleaningAndSanitationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"!w-[48%] sm:!w-auto"})]})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((C=(w=p==null?void 0:p.response)==null?void 0:w.data)==null?void 0:C.message)||(p==null?void 0:p.message)||"Failed to load, please try again"}),e.jsx(L,{isLoading:m,onClick:()=>h(),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-600 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"cleaning",completedAt:(v=d==null?void 0:d.timer)==null?void 0:v.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(T=d==null?void 0:d.timer)==null?void 0:T.startedAt,refetchStageMutate:h,deadLineMutate:g,isPending:y})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:(P=d==null?void 0:d.rooms)==null?void 0:P.map(D=>{var $;return e.jsx($t,{to:`cleaningroom/${D._id}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-md font-semibold capitalize text-blue-800 mb-1",children:D.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(($=D.uploads)==null?void 0:$.length)||0," uploads"]}),e.jsx("p",{className:"text-xs text-gray-500",children:D.completelyCleaned?" Completely Cleaned":" Not Cleaned"})]})},D._id)})})]})]})})}function eT(){var F,W,ue,re,R,z;const{projectId:t,roomId:a,organizationId:r}=Re(),l=Me(),{data:o,isLoading:d,refetch:m,isError:x,error:h}=V6(t,a),[p,g]=A.useState(null),{mutateAsync:y,isPending:j}=B6(),{mutateAsync:E,isPending:b}=H6(),{mutateAsync:k,isPending:w}=G6(),{mutateAsync:C,isPending:v}=Q6(),[N,T]=A.useState((o==null?void 0:o.completelyCleaned)||!1),[P,D]=A.useState((o==null?void 0:o.notes)||""),[$,q]=A.useState(!1),[H,he]=A.useState(null),K=M=>{var G;(G=M.target.files)!=null&&G.length&&he(M.target.files)},B=async()=>{var M,G;try{if(!H)throw new Error("select the files before uploading");const Y=new FormData;for(let ge=0;ge<H.length;ge++)Y.append("files",H[ge]);await y({projectId:t,roomId:a,formData:Y}),_({title:"Success",description:"Files uploaded successfully."}),he(null),m()}catch(Y){_({title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||Y.message,variant:"destructive"})}},te=async M=>{var G,Y;try{await E({projectId:t,roomId:a,fileId:M}),_({title:"Deleted",description:"File deleted successfully."}),m()}catch(ge){_({title:"Error",description:((Y=(G=ge==null?void 0:ge.response)==null?void 0:G.data)==null?void 0:Y.message)||ge.message,variant:"destructive"})}},V=async()=>{var M,G;try{if(!P.trim())throw new Error("please enter some notes");await C({projectId:t,roomId:a,notes:P}),_({title:"Notes updated!",description:"Room notes saved."}),q(!1)}catch(Y){_({title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||(Y==null?void 0:Y.message)||"Failed to update",variant:"destructive"})}},oe=async()=>{var M,G;try{await k({projectId:t,roomId:a,completelyCleaned:!N}),_({title:"Updated",description:`Marked as ${N?"not cleaned":"completely cleaned"}.`}),T(!N),m()}catch(Y){_({title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||Y.message,variant:"destructive"})}};return d?e.jsx(jt,{}):(x&&(W=(F=h==null?void 0:h.response)==null?void 0:F.data)!=null&&W.message,e.jsxs("div",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar-none sm:custom-scrollbar",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center w-full",children:[e.jsxs("h2",{className:"text-md sm:text-2xl font-semibold mb-4 text-blue-700 flex items-center",children:[e.jsx("i",{className:"fas fa-broom mr-2"})," ",o==null?void 0:o.roomName," - Details"]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(L,{isLoading:w,onClick:oe,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm !p-2 lg:p-4 ",children:N?"Mark as Not Cleaned":"Mark as Cleaned"}),e.jsx(L,{variant:"primary",className:"",onClick:()=>l(`/${r}/projectdetails/${t}/cleaning`),children:"Go Back"})]})]}),e.jsxs("div",{className:"mb-2 grid grid-cols-1 md:grid-cols-2 gap-1 items-center place-content-center",children:[e.jsxs(Pe,{className:"p-2 border-gray-100 border-2",children:[e.jsxs("div",{className:"w-full justify-between flex items-center",children:[e.jsx("h3",{className:"text-md font-semibold  text-blue-700",children:"Notes"}),!$&&e.jsxs(L,{onClick:()=>{D(o==null?void 0:o.notes),q(!0)},className:"bg-blue-600 text-white hover:bg-blue-700",children:["Edit ",e.jsx("i",{className:"fas fa-pencil ml-2 "})]})]}),$?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{rows:4,className:"w-full border rounded p-2",value:P,onChange:M=>D(M.target.value),placeholder:"Enter notes here..."}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(L,{onClick:V,disabled:v,className:"bg-blue-600 text-white hover:bg-blue-700",children:v?"Saving...":"Save"}),e.jsx(L,{onClick:()=>{q(!1),D((o==null?void 0:o.notes)??"")},variant:"outline",className:"border-gray-400",children:"Cancel"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative overflow-x-auto overflow-y-auto break-words h-[6rem] max-h-[6rem] leading-5 custom-scrollbar",children:[" ",e.jsx("p",{className:"text-gray-700 mb-2 ",children:(ue=o==null?void 0:o.notes)!=null&&ue.trim()?o==null?void 0:o.notes:"No notes present."})]})})]}),e.jsxs(Pe,{className:"p-2 h-full border-gray-100 border-2",children:[e.jsx(me,{className:"block mb-2 font-semibold !text-blue-700",children:"Upload Images or PDFs:"}),e.jsx(de,{type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:K,disabled:j,className:"border-b w-full"}),e.jsx(L,{onClick:B,isLoading:j,className:"mt-3 bg-blue-600 text-white hover:bg-blue-700",children:j?"Uploading...":`Upload ${H?H.length:""} file(s)`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 h-[95%] sm:h-[65%]",children:[e.jsxs(Pe,{className:"p-2 lg:p-4 max-h-full overflow-y-auto custom-scrollbar border-1 border-[#8485887a]",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"Images"}),((re=o==null?void 0:o.uploads)==null?void 0:re.filter(M=>M.type==="image").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No images uploaded."}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(R=o==null?void 0:o.uploads)==null?void 0:R.filter(M=>M.type==="image").map(M=>e.jsxs("div",{className:"relative group rounded overflow-hidden",children:[e.jsx("img",{src:M.url,alt:M.originalName,className:"w-full h-40 object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-3/4 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(L,{size:"sm",variant:"danger",isLoading:b,onClick:()=>te(M._id),disabled:b,className:"absolute  top-2 right-2 bg-red-600 text-white border-none rounded-full w-7 h-7 flex items-center justify-center text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("i",{className:"fas fa-trash"})}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>g(M.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:M==null?void 0:M.url,alt:(M==null?void 0:M.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})})]})]},M.url))})]}),e.jsxs(Pe,{className:"p-4 max-h-full overflow-y-auto border-1 border-[#8485887a] custom-scrollbar",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"PDFs"}),((z=o.uploads)==null?void 0:z.filter(M=>M.type==="pdf").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No PDFs uploaded."}):e.jsx("ul",{className:"space-y-2",children:o==null?void 0:o.uploads.filter(M=>M.type==="pdf").map(M=>e.jsxs("li",{className:"flex items-center justify-between shadow-md p-2 rounded h-full",children:[e.jsx("a",{href:M.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline truncate max-w-[50%]",children:M.originalName}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:M==null?void 0:M.url,alt:(M==null?void 0:M.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",isLoading:b,onClick:()=>te(M._id),disabled:b,variant:"danger",className:"bg-red-600 text-white rounded px-2 py-1 text-xs",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]},M.url))})]})]}),p&&e.jsx("div",{onClick:()=>g(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:M=>M.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>g(null)}),e.jsx("img",{src:p,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const tT=async(t,a,r)=>{const{data:l}=await r.post(`/projectdelivery/${t}/upload`,a);if(!l.ok)throw new Error(l.message);return l.data},sT=()=>{const{role:t}=Z(),a=J(t),r=["owner","CTO","staff"],l=Ce();return ie({mutationFn:async({projectId:o,formData:d})=>{if(!t||!r.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await tT(o,d,a)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["project-delivery",d]})}})},aT=async(t,a,r)=>{console.log("fielid",a);const{data:l}=await r.delete(`/projectdelivery/${t}/upload/${a}`);if(!l.ok)throw new Error(l.message);return l.data},nT=()=>{const{role:t}=Z(),a=J(t),r=["owner","CTO","staff"],l=Ce();return ie({mutationFn:async({projectId:o,fileId:d})=>{if(!t||!r.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await aT(o,d,a)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["project-delivery",d]})}})},rT=async(t,a,r)=>{const{data:l}=await r.put(`/projectdelivery/${t}/client-confirmation`,{confirmed:a});if(!l.ok)throw new Error(l.message);return l.data},lT=()=>{const{role:t}=Z(),a=J(t),r=["client"],l=Ce();return ie({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!r.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await rT(o,d,a)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["project-delivery",d]})}})},iT=async(t,a,r)=>{const{data:l}=await r.put(`/projectdelivery/${t}/owner-confirmation`,{confirmed:a});if(!l.ok)throw new Error(l.message);return l.data},oT=()=>{const{role:t}=Z(),a=J(t),r=["owner"],l=Ce();return ie({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!r.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await iT(o,d,a)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["project-delivery",d]})}})},cT=async(t,a)=>{const{data:r}=await a.get(`/projectdelivery/${t}`);if(!r.ok)throw new Error(r.message);return r.data},dT=t=>{const{role:a}=Z(),r=J(a),l=["owner","CTO","client","staff"];return qe({queryKey:["project-delivery",t],queryFn:async()=>{if(!a||!l.includes(a))throw new Error("Not allowed.");if(!r)throw new Error("API instance missing");return await cT(t,r)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},uT=async({formId:t,deadLine:a,projectId:r,api:l})=>{const{data:o}=await l.put(`/projectdelivery/deadline/${r}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},mT=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/projectdelivery/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},fT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({formId:l,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await uT({formId:l,projectId:d,deadLine:o,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["project-delivery"]})}})},hT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await mT({projectId:l,api:r})},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["project-delivery",o]})}})};function xT(){var oe,F,W,ue,re;const{projectId:t,organizationId:a}=Re(),{isMobile:r,openMobileSidebar:l}=We(),[o,d]=A.useState(null),{data:m,isLoading:x,error:h,refetch:p}=dT(t),{mutateAsync:g,isPending:y}=sT(),{mutateAsync:j,isPending:E,variables:b}=nT(),{mutateAsync:k}=lT(),{mutateAsync:w}=oT(),{mutateAsync:C,isPending:v}=fT(),{mutateAsync:N,isPending:T}=hT(),[P,D]=A.useState([]),$=A.useRef(null),q=async()=>{var R,z;try{await N({projectId:t}),_({description:"Project Delivery marked as complete.",title:"Success"}),p()}catch(M){_({title:"Error",description:((z=(R=M==null?void 0:M.response)==null?void 0:R.data)==null?void 0:z.message)||M.message||"Failed to update status",variant:"destructive"})}},H=R=>{R.target.files&&D(Array.from(R.target.files))},he=async()=>{var z,M;if(!P.length){_({title:"Error",description:"Please select at least one file.",variant:"destructive"});return}const R=new FormData;P.forEach(G=>{R.append("files",G)});try{await g({projectId:t,formData:R}),_({title:"Success",description:"Files uploaded successfully."}),p(),D([]),$.current&&($.current.value="")}catch(G){_({title:"Error",description:((M=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:M.message)||G.message||"Upload failed",variant:"destructive"})}},K=async R=>{var z,M;try{await j({projectId:t,fileId:R}),_({title:"Success",description:"File deleted."}),p()}catch(G){_({title:"Error",description:((M=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:M.message)||G.message||"Deletion failed",variant:"destructive"})}},B=async R=>{var M,G;const z=R==="client"?k:w;try{await z({projectId:t,confirm:!(m!=null&&m[`${R}Confirmation`])}),_({title:"Success",description:`${R==="client"?"Client":"Owner"} confirmation updated.`}),p()}catch(Y){_({title:"Error",description:((G=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:G.message)||Y.message||"Failed to update confirmation",variant:"destructive"})}};let te=((m==null?void 0:m.uploads)||[]).filter(R=>R.type==="pdf"),V=((m==null?void 0:m.uploads)||[]).filter(R=>R.type==="image");return x?e.jsx(jt,{}):e.jsxs("div",{className:"w-full sm:min-h-full sm:overflow-y-auto space-y-6 py-1 sm:py-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start lg:items-center gap-4pb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-handshake mr-2"}),"Project Delivery"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(L,{isLoading:T,onClick:q,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(rs,{projectId:t,organizationId:a,stageName:"ProjectDeliveryModel",currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),h?e.jsxs("div",{className:"max-w-xl mx-auto bg-red-50 border border-red-200 rounded-lg shadow p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-bold mb-2",children:" Error Loading Data"}),e.jsx("p",{className:"text-sm text-red-500 mb-4",children:((F=(oe=h==null?void 0:h.response)==null?void 0:oe.data)==null?void 0:F.message)||(h==null?void 0:h.message)||"Something went wrong while fetching project delivery details."}),e.jsx(L,{onClick:()=>p(),isLoading:x,className:"bg-red-600 hover:bg-red-700 text-white",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 border-l-[4px] border-blue-600 shadow w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(W=m==null?void 0:m.timer)==null?void 0:W.completedAt,stageName:"projectdelivery",projectId:t,formId:m==null?void 0:m._id,deadLine:(ue=m==null?void 0:m.timer)==null?void 0:ue.deadLine,startedAt:(re=m==null?void 0:m.timer)==null?void 0:re.startedAt,refetchStageMutate:p,deadLineMutate:C,isPending:v})]}),e.jsxs(Pe,{className:"p-6 border-2 border-blue-200 shadow w-full flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-blue-800 mb-3",children:[e.jsx("i",{className:"fas fa-paperclip mr-2 text-blue-600"}),"Upload Files"]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[e.jsx("input",{multiple:!0,ref:$,type:"file",onChange:H,accept:".pdf,image/*",className:"w-full sm:w-[300px] border border-blue-300 px-3 py-2 rounded text-sm"}),e.jsx(L,{onClick:he,isLoading:y,className:"bg-blue-600 text-white hover:bg-blue-700",children:"Upload Files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"min-h-[220px] sm:max-h-[150px] sm:min-h-[150px]  lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-pdf"}),"PDF Files"]}),te.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No PDF files uploaded."})}):e.jsx("ul",{className:"space-y-2",children:te.map(R=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:R.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:R==null?void 0:R.url,alt:(R==null?void 0:R.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",isLoading:(b==null?void 0:b.fileId)===R._id&&E,onClick:()=>K(R._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},R._id))})]}),e.jsxs("div",{className:" min-h-[220px] sm:max-h-[150px]  sm:min-h-[150px] lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-image"}),"Image Files"]}),V.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No images uploaded."})}):e.jsx("ul",{className:"space-y-2",children:V.map(R=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:R.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(L,{size:"sm",variant:"primary",onClick:()=>d(R==null?void 0:R.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(L,{size:"sm",variant:"primary",onClick:()=>Kt({src:R==null?void 0:R.url,alt:(R==null?void 0:R.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(L,{size:"sm",isLoading:(b==null?void 0:b.fileId)===R._id&&E,onClick:()=>K(R._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},R._id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-4",children:[e.jsxs(L,{onClick:()=>B("client"),className:`w-full ${m!=null&&m.clientConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.clientConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.clientConfirmation?"Client Confirmed":"Client not confirmed"]}),e.jsxs(L,{onClick:()=>B("owner"),className:`w-full ${m!=null&&m.ownerConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.ownerConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.ownerConfirmation?"Owner Confirmed":"Owner not confirmed"]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded px-4 py-3 flex items-center gap-3 text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-user-check text-blue-600 text-base"}),e.jsxs("p",{className:"font-medium",children:["Client Confirmed At:"," ",e.jsx("span",{className:"font-semibold text-blue-900",children:m!=null&&m.clientAcceptedAt?new Date(m.clientAcceptedAt).toLocaleDateString():"Not Confirmed Yet"})]})]})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:R=>R.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})]})}const pT=async(t,a)=>(await a.get(`/paymentconfirmation/getschedule/${t}`)).data.data,gT=async({projectId:t,dueDate:a,api:r})=>(await r.put(`/paymentconfirmation/dueDate/${t}`,{dueDate:a})).data.data,bT=async({projectId:t,status:a,api:r})=>(await r.put(`/paymentconfirmation/clientapprovalstatus/${t}`,{status:a})).data.data,yT=async({projectId:t,notes:a,api:r})=>(await r.put(`/paymentconfirmation/clientnotes/${t}`,{notes:a})).data.data,wT=async({projectId:t,status:a,api:r})=>(await r.put(`/paymentconfirmation/mdapprovalstatus/${t}`,{status:a})).data.data,vT=async({projectId:t,notes:a,api:r})=>(await r.put(`/paymentconfirmation/mdnotes/${t}`,{notes:a})).data.data,jT=t=>{const a=["owner","staff","CTO","client"],{role:r}=Z(),l=J(r);return qe({queryKey:["payment-schedule",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not allowed to fetch payment schedule");if(!l)throw new Error("API instance missing");return await pT(t,l)},enabled:!!t&&!!r,retry:!1,refetchOnMount:!1})},NT=()=>{const t=["CTO","owner","staff"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,dueDate:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await gT({projectId:o,dueDate:d,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-confirmation",d]})}})},ST=()=>{const t=["client"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await bT({projectId:o,status:d,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-schedule",d]})}})},CT=()=>{const t=["client"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await yT({projectId:o,notes:d,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-schedule",d]})}})},kT=()=>{const t=["owner"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await wT({projectId:o,status:d,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-schedule",d]})}})},ET=()=>{const t=["owner"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await vT({projectId:o,notes:d,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-schedule",d]})}})},V0=["pending","approved","rejected"],AT=()=>{var H,he;const{projectId:t,organizationId:a}=Re(),r=Me(),{data:l,isLoading:o,error:d,refetch:m}=jT(t),x=ST(),h=CT(),p=kT(),g=ET(),[y,j]=A.useState(""),[E,b]=A.useState(""),[k,w]=A.useState(l==null?void 0:l.dueDate),[C,v]=A.useState(!1),N=NT(),T=async()=>{var K,B;try{await N.mutateAsync({projectId:t,dueDate:k}),m(),_({title:"Success",description:"Due date updated successfully."}),v(!1)}catch(te){_({title:"Error",description:((B=(K=te==null?void 0:te.response)==null?void 0:K.data)==null?void 0:B.message)||te.message||"Failed to update due date.",variant:"destructive"})}},P=K=>{x.mutate({projectId:t,status:K},{onSuccess:()=>_({title:"Success",description:"Client approval status updated."}),onError:B=>{var te,V;return _({title:"Error",description:((V=(te=B==null?void 0:B.response)==null?void 0:te.data)==null?void 0:V.message)||B.message||"Failed to update client status",variant:"destructive"})}})},D=K=>{p.mutate({projectId:t,status:K},{onSuccess:()=>_({title:"Success",description:"MD approval status updated."}),onError:B=>{var te,V;return _({title:"Error",description:((V=(te=B==null?void 0:B.response)==null?void 0:te.data)==null?void 0:V.message)||B.message||"Failed to update MD status",variant:"destructive"})}})},$=()=>{h.mutate({projectId:t,notes:y},{onSuccess:()=>_({title:"Success",description:"Client note updated."}),onError:K=>{var B,te;return _({title:"Error",description:((te=(B=K==null?void 0:K.response)==null?void 0:B.data)==null?void 0:te.message)||K.message||"Failed to update notes",variant:"destructive"})}})},q=()=>{g.mutate({projectId:t,notes:E},{onSuccess:()=>_({title:"Success",description:"MD note updated."}),onError:K=>{var B,te;return _({title:"Error",description:((te=(B=K==null?void 0:K.response)==null?void 0:B.data)==null?void 0:te.message)||K.message||"Failed to update notes",variant:"destructive"})}})};return o?e.jsx("p",{children:e.jsx(jt,{})}):d?e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((he=(H=d==null?void 0:d.response)==null?void 0:H.data)==null?void 0:he.message)||(d==null?void 0:d.message)||"Failed to load, please try again"}),e.jsx(L,{onClick:()=>m(),isLoading:o,className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):e.jsxs("div",{className:"w-full max-w-full max-h-full overflow-y-auto custom-scrollbar mx-auto space-y-6 px-4 py-6",children:[e.jsxs("div",{className:"w-full justify-between flex",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-regular fa-calendar-check text-blue-600"}),e.jsx("span",{className:"hidden sm:inline",children:"  Step 2: Payment Schedule Approval"}),e.jsx("span",{className:"inline sm:hidden",children:"  Payment Schedule"})]}),e.jsx(L,{variant:"primary",onClick:()=>r(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]}),e.jsx(Pe,{className:"p-4 border border-gray-200 shadow-sm rounded mb-6",children:e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar-days"})," Payment Due Date"]}),C?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("input",{type:"date",value:k,onChange:K=>w(K.target.value),className:"border rounded px-3 py-1 text-sm"}),e.jsxs(L,{size:"sm",onClick:T,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-check mr-2"}),"Save"]}),e.jsxs(L,{size:"sm",onClick:()=>{var K;w((K=l==null?void 0:l.dueDate)==null?void 0:K.slice(0,10)),v(!1)},variant:"outline",className:"px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-xmark mr-1"}),"Cancel"]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-md font-medium text-gray-800",children:l!=null&&l.dueDate?ui(l==null?void 0:l.dueDate):"Not set"}),e.jsxs(L,{size:"sm",onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-regular fa-pen-to-square mr-2"}),"Edit"]})]})]})}),e.jsxs(Pe,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user"})," Client Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:V0.map(K=>{var B;return e.jsx(L,{isLoading:x.isPending&&((B=x.variables)==null?void 0:B.status)===K,size:"sm",onClick:()=>P(K),className:`text-white text-xs ${l.clientApprovalStatus===K?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:K.toUpperCase()},K)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:l.clientApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:l.clientNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add client notes...",value:y,onChange:K=>j(K.target.value),rows:3}),e.jsxs(L,{onClick:$,isLoading:h.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save Client Notes"]})]})]}),e.jsxs(Pe,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user-tie"})," MD Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:V0.map(K=>{var B;return e.jsx(L,{isLoading:p.isPending&&((B=p.variables)==null?void 0:B.status)===K,size:"sm",onClick:()=>D(K),className:`text-white text-xs ${l.mdApprovalStatus===K?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:K.toUpperCase()},K)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:l.mdApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:l.mdNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add MD notes...",value:E,onChange:K=>b(K.target.value),rows:3}),e.jsxs(L,{onClick:q,isLoading:g.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save MD Notes"]})]})]})]})},Jy=t=>new Promise(a=>{const r=document.createElement("script");r.src=t,r.onload=()=>{a(!0)},r.onerror=()=>{a(!1)},document.body.appendChild(r)}),OT=async({projectId:t,clientId:a,api:r})=>(await r.post(`/paymentconfirmation/createorder/${t}`,{clientId:a})).data.data,RT=async({projectId:t,razorpay_order_id:a,razorpay_payment_id:r,razorpay_signature:l,api:o})=>(await o.post(`/paymentconfirmation/verifypayment/${t}`,{razorpay_order_id:a,razorpay_payment_id:r,razorpay_signature:l})).data.data,TT=async({projectId:t,api:a})=>{const r=await a.get(`/paymentconfirmation/gettransaction/${t}`);return console.log(r,"drjklsjklfjsldfjasdjfsdj"),r.data.data},PT=()=>{const t=["client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,clientId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await OT({projectId:l,clientId:o,api:r})},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["payment-confirmation",o]})}})},MT=()=>{const t=["client"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({projectId:l,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await RT({projectId:l,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m,api:r})},onSuccess:(l,{projectId:o})=>{Ae.invalidateQueries({queryKey:["payment-confirmation",o]})}})},LT=t=>{const a=["client","staff","owner","CTO"],{role:r}=Z(),l=J(r);return qe({queryKey:["payment-confirmation",t,"transaction"],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await TT({projectId:t,api:l})},enabled:!!t&&!!l&&!!r,retry:!1,refetchOnMount:!1})},_T=()=>{var w,C;const{projectId:t,organizationId:a}=Re(),r=Me(),{data:l,refetch:o,isError:d,error:m,isLoading:x}=LT(t),h=l==null?void 0:l.paymentTransaction,p=l==null?void 0:l.totalAmount,{mutateAsync:g,isPending:y}=PT(),{mutateAsync:j,isPending:E}=MT(),b=xs(v=>v.clientProfileStore);if(x)return e.jsx(jt,{});if(d||!l)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((C=(w=m==null?void 0:m.response)==null?void 0:w.data)==null?void 0:C.message)||(m==null?void 0:m.message)||"Failed to load cost estimation data"}),e.jsx(L,{onClick:()=>o(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const k=async()=>{try{const v=await g({projectId:t,clientId:b.clientId});if(!await Jy("https://checkout.razorpay.com/v1/checkout.js")){_({title:"Error",description:"Failed to load Razorpay SDK.",variant:"destructive"});return}const T={key:"rzp_test_Lc5DxL3uS4I6F9",amount:v.amount,currency:"INR",name:"Vertical Living",description:"Project Payment",order_id:v.orderId,handler:async function(D){await j({projectId:t,razorpay_order_id:D.razorpay_order_id,razorpay_payment_id:D.razorpay_payment_id,razorpay_signature:D.razorpay_signature}),_({title:"Success",description:"Payment successful!"})},prefill:{name:b.clientName||"",email:b.email||"",contact:b.phoneNo||""},theme:{color:"#0050b3"}};new window.Razorpay(T).open()}catch(v){_({title:"Error",description:v.message||"Payment failed. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 p-2 sm:p-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4",children:[e.jsx("div",{className:"flex items-center gap-3 justify-between",children:e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-money-check-dollar"}),e.jsx("span",{className:"hidden sm:inline",children:"Payment Transaction"}),e.jsx("span",{className:"sm:hidden",children:"Payment"})]})}),e.jsxs(L,{onClick:()=>r(`/${a}/projectdetails/${t}/paymentconfirmation`),variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),"Go Back"]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-lg border border-gray-200 p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-blue-700 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600"}),"Secure Payment Gateway"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"Securely make your payment to proceed with the project."})]}),e.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 sm:p-5 bg-blue-50 text-center shadow-sm",children:[e.jsx("p",{className:"text-gray-700 text-xs sm:text-sm mb-1",children:"Amount Payable"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:[" ",(p==null?void 0:p.toLocaleString("en-IN"))||"0"]})]}),(h==null?void 0:h.status)&&e.jsxs("div",{className:"bg-gray-100 p-3 sm:p-4 rounded-lg border border-gray-300 space-y-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${h.status==="successful"?"fa-circle-check text-green-600":"fa-circle-xmark text-red-600"}`}),e.jsx("span",{className:"font-medium",children:"Status:"})]}),e.jsx("span",{className:`font-semibold ${h.status==="successful"?"text-green-700":"text-red-700"}`,children:h.status.toUpperCase()})]}),h.status==="successful"&&e.jsxs("p",{className:"text-green-700 break-words",children:[e.jsx("span",{className:"font-medium",children:"Paid At:"})," ",new Date(h.paidAt).toLocaleString()]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Order ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:h.gatewayOrderId})]}),h.gatewayPaymentId&&e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Payment ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:h.gatewayPaymentId})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:k,disabled:y||E||(h==null?void 0:h.status)==="successful",className:`w-full py-3 sm:py-4 rounded-md text-white text-base sm:text-lg font-medium transition ${y||E?"bg-blue-400 cursor-not-allowed":(h==null?void 0:h.status)==="successful"?"bg-green-600 cursor-default":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800"}`,children:(h==null?void 0:h.status)==="successful"?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-check"}),"Payment Completed"]}):y||E?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Processing Payment..."}),e.jsx("span",{className:"sm:hidden",children:"Processing..."})]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Pay Now"]})})}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center justify-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-green-600"}),"Secured by Razorpay"]})})]})})]})},FT=async(t,a)=>(await a.get(`/paymentconfirmation/getpaymentconfirmation/${t}`)).data.data,DT=async(t,a)=>(await a.put(`/paymentconfirmation/toggleconsent/${t}`)).data.data,qT=async(t,a)=>(await a.post(`/paymentconfirmation/generatepayementconsentlink/${t}`)).data.data,zT=async({projectId:t,token:a,api:r})=>(await r.post(`/paymentconfirmation/acceptconsent/${t}/${a}`)).data.data,ew=t=>{const a=["CTO","owner","staff","client"],{role:r}=Z(),l=J(r);return qe({enabled:!!t&&!!r,queryKey:["payment-confirmation",t],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await FT(t,l)},retry:!1,refetchOnMount:!1})},UT=()=>{const t=["CTO","owner","staff"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await DT(o,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-confirmation",d]})}})},$T=()=>{const t=["CTO","owner","staff"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await qT(o,r)},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-confirmation",d]})}})},IT=()=>{const t=["CTO","owner","client"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o,token:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await zT({projectId:o,token:d,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-confirmation",d]})}})},BT=async({formId:t,projectId:a,deadLine:r,api:l})=>{const{data:o}=await l.put(`/paymentconfirmation/deadline/${a}/${t}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},HT=async({projectId:t,api:a})=>{const{data:r}=await a.put(`/paymentconfirmation/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},QT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await BT({formId:o,projectId:d,deadLine:m,api:r})},onSuccess:()=>{l.invalidateQueries({queryKey:["payment-confirmation"]})}})},GT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),r=J(a),l=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await HT({projectId:o,api:r})},onSuccess:(o,{projectId:d})=>{l.invalidateQueries({queryKey:["payment-confirmation",d]})}})},KT=[{title:"Consent Form",description:"Review and accept client consent agreements.",icon:"",path:"consent"},{title:"Schedule Approval",description:"Manage milestone approvals from client & MD.",icon:"",path:"schedule"},{title:"Payment Transaction",description:"Track actual payment gateway transactions.",icon:"",path:"transaction"}],VT=()=>{var N,T;const{projectId:t,organizationId:a}=Re(),{isMobile:r,openMobileSidebar:l}=We(),o=yt(),d=Me(),{data:m,isLoading:x,isError:h,refetch:p}=ew(t),{mutateAsync:g,isPending:y}=GT(),{mutateAsync:j,isPending:E}=QT();if(o.pathname.includes("/consent")||o.pathname.includes("/schedule")||o.pathname.includes("/transaction"))return e.jsx(Vt,{});const b=async()=>{var P,D;try{await g({projectId:t}),_({title:"Success",description:"Completion status updated successfully"}),p()}catch($){_({title:"Error",description:((D=(P=$==null?void 0:$.response)==null?void 0:P.data)==null?void 0:D.message)||$.message||"Failed to update completion status",variant:"destructive"})}};if(x)return e.jsx(jt,{});const{assignedTo:k,timer:w,totalAmount:C,_id:v}=m||{};return e.jsxs("div",{className:"container mx-auto p-2 max-w-full max-h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-sack-dollar mr-2"})," Payment Confirmation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[80%] lg:w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:e.jsxs(L,{isLoading:y,onClick:b,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{stageNumber:7,stagePath:"paymentconfirmation",projectId:t,className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"PaymentConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:k||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),h&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((T=(N=h==null?void 0:h.response)==null?void 0:N.data)==null?void 0:T.message)||(h==null?void 0:h.message)||"Failed to load payment confirmation data"}),e.jsx(L,{onClick:()=>p(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:w==null?void 0:w.completedAt,stageName:"paymentconfirmation",formId:v,projectId:t,deadLine:w==null?void 0:w.deadLine,startedAt:w==null?void 0:w.startedAt,refetchStageMutate:p,deadLineMutate:j,isPending:E})]}),e.jsxs(Pe,{className:"p-4 mb-6 bg-blue-50 border-l-4 border-blue-600 shadow-md",children:[e.jsxs("div",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Total Payment Amount"]}),e.jsxs("p",{className:"text-3xl text-blue-700 mt-2 font-bold",children:[" ",(C==null?void 0:C.toLocaleString())||0]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:KT.map(P=>e.jsx("div",{onClick:()=>d(P.path),className:"cursor-pointer",children:e.jsxs(Pe,{className:"hover:shadow-xl border-l-6 border-blue-600 transition bg-blue-100 p-4 sm:p-6 !rounded-xl h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl",children:P.icon}),e.jsx("h3",{className:"text-xl mt-3 font-bold text-blue-800",children:P.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:P.description})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsxs("span",{className:"inline-block bg-blue-600 text-white text-xs px-3 py-1 rounded",children:["Go to ",P.title]})})]})},P.path))})]})]})},YT=()=>{var T,P;const{projectId:t,organizationId:a}=Re(),r=Me(),{data:l,isLoading:o,isError:d,refetch:m,error:x}=ew(t),h=UT(),p=$T(),g=D=>{navigator.clipboard.writeText(D),_({title:"Copied",description:"Link copied to clipboard."})},y=D=>{const $=`Please review and approve the payment consent:

${D}`,q=encodeURIComponent($);window.open(`https://wa.me/?text=${q}`,"_blank")},j=async()=>{var D,$;try{await h.mutateAsync({projectId:t}),_({title:"Success",description:"Consent requirement updated."}),m()}catch(q){_({title:"Error",description:(($=(D=q==null?void 0:q.response)==null?void 0:D.data)==null?void 0:$.message)||q.message,variant:"destructive"})}},E=async()=>{var D,$;try{await p.mutateAsync({projectId:t}),_({title:"Success",description:"Consent link generated."}),m()}catch(q){_({title:"Error",description:(($=(D=q==null?void 0:q.response)==null?void 0:D.data)==null?void 0:$.message)||q.message,variant:"destructive"})}};if(o)return e.jsx(jt,{});if(d||!l)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((P=(T=x==null?void 0:x.response)==null?void 0:T.data)==null?void 0:P.message)||(x==null?void 0:x.message)||"Failed to load cost estimation data"}),e.jsx(L,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const{isConsentRequired:b,paymentClientConsent:{content:k,agreedAt:w,isAgreed:C,agreementToken:v,link:N}}=l;return e.jsxs("div",{className:"space-y-6 w-full max-w-full max-h-full sm:overflow-y-auto mx-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl  lg:text-3xl font-bold text-blue-700 flex items-center",children:[e.jsx("i",{className:"hidden sm:block fa-solid fa-handshake-angle mr-[3px] sm:mr-2"})," Client Consent"]}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(L,{isLoading:h.isPending,size:"sm",onClick:j,className:`text-sm text-white px-2 py-2 rounded ${b?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Make Consent Optional"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Optional"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Require Client Consent"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Mandatory"})]})}),e.jsx(L,{variant:"primary",onClick:()=>r(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]})]}),e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-circle-info"}),"Consent Status"]})}),e.jsx("div",{className:"p-4",children:w?e.jsxs("div",{className:"bg-green-50 p-4 rounded text-green-800 text-sm border border-green-200 shadow-sm",children:[e.jsx("span",{className:"mr-2",children:"Client Status:"}),e.jsx("strong",{className:"mr-2",children:C?e.jsxs(e.Fragment,{children:["Agreed ",e.jsx("i",{className:"fa-solid fa-circle-check text-green-600 mr-2"})]}):C===null?"Not Agreed Yet":e.jsxs(e.Fragment,{children:["Not Agreed ",e.jsx("i",{className:"fa-solid fa-circle-xmark text-red-600 mr-2"})]})}),e.jsx("br",{}),e.jsxs("span",{children:["Agreed on: ",e.jsx("strong",{children:new Date(w).toLocaleDateString()})]})]}):v?e.jsxs("div",{className:"bg-yellow-50 p-4 rounded text-yellow-800 border border-yellow-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half mr-2"}),"Consent link was generated, waiting for client to approve."]}):e.jsxs("div",{className:"bg-red-50 p-4 rounded text-red-700 border border-red-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-times-circle mr-2"}),"Client has ",e.jsx("strong",{children:"Not yet agreed"}),".",e.jsx("br",{}),"No consent link generated."]})})]}),b&&!w&&e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-link"}),"Consent Link"]})}),e.jsx("div",{className:"p-4 space-y-3",children:!v&&!N?e.jsxs(L,{isLoading:p.isPending,onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded",children:[e.jsx("i",{className:"fa-solid fa-wand-magic-sparkles mr-2"}),"Generate Consent Link"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-100",children:[e.jsx("span",{className:"text-sm truncate",children:N}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(L,{variant:"outline",className:"bg-blue-600 text-white hover:bg-blue-700 px-3 py-1 text-sm",onClick:()=>g(N),children:[e.jsx("i",{className:"fa-regular fa-copy mr-1"}),"Copy"]}),e.jsxs(L,{variant:"outline",className:"bg-green-600 text-white hover:bg-green-700 px-3 py-1 text-sm",onClick:()=>y(N),children:[e.jsx("i",{className:"fa-brands fa-whatsapp mr-1"}),"Share"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Share this link with the client to collect consent."})]})})]}),e.jsxs("div",{className:`rounded-lg shadow border border-gray-200 max-h-70 overflow-y-auto custom-scrollbar ${w?"!max-h-[480px]":""} `,children:[e.jsxs("div",{className:"bg-gray-100 px-5 py-3 text-gray-700 font-medium text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-contract"}),"Consent Form Content"]}),e.jsx("div",{className:"prose prose-sm sm:prose base p-5",style:{fontFamily:"Segoe UI, sans-serif"},dangerouslySetInnerHTML:{__html:k||"<p>No content available.</p>"}})]})]})},WT=()=>{var b,k;const{projectId:t,token:a}=Re(),[r,l]=A.useState(""),[o,d]=A.useState(!1),[m,x]=A.useState(!0),{mutateAsync:h,isPending:p,isError:g,error:y}=IT();if(g)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((k=(b=y==null?void 0:y.response)==null?void 0:b.data)==null?void 0:k.message)||(y==null?void 0:y.message)||"Failed to load cost estimation data"}),e.jsx(L,{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const j=async()=>{var w,C,v,N;try{const{data:T}=await Qe.get(`https://houseofram.in/api/paymentconfirmation/getpaymentconfirmation/${t}`);l(((C=(w=T==null?void 0:T.data)==null?void 0:w.paymentClientConsent)==null?void 0:C.content)||"")}catch(T){_({title:"Error",description:((N=(v=T==null?void 0:T.response)==null?void 0:v.data)==null?void 0:N.message)||"Unable to fetch consent form.",variant:"destructive"})}finally{x(!1)}},E=async()=>{var w,C;if(!(!t||!a))try{await h({projectId:t,token:a}),_({title:"Thank you!",description:"Your consent has been submitted successfully."})}catch(v){_({title:"Error",description:((C=(w=v==null?void 0:v.response)==null?void 0:w.data)==null?void 0:C.message)||"Submission failed.",variant:"destructive"})}};return A.useEffect(()=>{j()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col items-center bg-gray-50 pb-10 ",children:[e.jsx("header",{className:"w-full max-w-full mx-auto border-b border-gray-200 bg-white px-4 py-4 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-start border-black md:justify-start text-center md:text-left",children:[e.jsx("img",{src:bt.COMPANY_LOGO,alt:"Company Logo",className:"h-14 w-14 rounded-md object-cover   border-gray-300"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-extrabold text-blue-700 leading-tight",children:bt.COMPANY_NAME}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-500 font-medium",children:"Secure Payment Consent Form"})]})]})}),e.jsxs("div",{className:"w-full bg-white p-4 max-w-3xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-white max-h-[500px] rounded-md border-2 border-[#4e51543a] custom-scrollbar  overflow-y-auto ",children:m?e.jsx("p",{className:"text-gray-600",children:"Loading form content..."}):r?e.jsx("div",{className:"prose prose-sm sm:prose max-w-none",dangerouslySetInnerHTML:{__html:r}}):e.jsx("p",{className:"text-red-500 text-sm",children:"Content not found."})}),e.jsxs("div",{className:"px-5 py-4 bg-white flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("label",{className:"flex items-start gap-2 text-sm text-gray-700 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",onChange:w=>d(w.target.checked),checked:o,className:"mt-1 w-4 h-4 accent-blue-600"}),"I confirm that I have read, understood, and accept the above terms."]}),e.jsxs(L,{disabled:!o,isLoading:p,onClick:E,className:`px-6 py-2 text-white ${o?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Submit Consent"]})]})]}),e.jsxs("footer",{className:"mt-10 w-full text-center text-sm text-gray-500 border-t border-black/70 px-4",children:[e.jsxs("div",{className:"mb-1 font-medium text-gray-600",children:[" ",new Date().getFullYear()," ",bt.COMPANY_NAME]}),e.jsx("div",{className:"text-xs",children:"All rights reserved. For queries, contact our team."})]})]})},XT=async({newPlanType:t,api:a})=>(await a.post("/subscriptionpayment/choosesubscriptionmode",{newPlanType:t})).data.data,ZT=async({razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:r,api:l})=>(await l.post("/subscriptionpayment/verify",{razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:r})).data.data,JT=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({newPlanType:l})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await XT({newPlanType:l,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["organization-subscription"]})}})},e3=()=>{const t=["owner"],{role:a}=Z(),r=J(a);return ie({mutationFn:async({razorpay_order_id:l,razorpay_payment_id:o,razorpay_signature:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await ZT({razorpay_order_id:l,razorpay_payment_id:o,razorpay_signature:d,api:r})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["organization-subscription"]})}})},tw=({openMobileSidebar:t,isMobile:a})=>{const r=yt(),[l,o]=A.useState(null),d=r.pathname.split("/").includes("organizations"),{mutateAsync:m,isPending:x}=JT(),{mutateAsync:h,isPending:p}=e3(),g=async y=>{var j,E;try{o(y);const b=await m({newPlanType:y});if(b!=null&&b.orderId){if(!await Jy("https://checkout.razorpay.com/v1/checkout.js")){_({title:"Error",description:"Razorpay failed to load",variant:"destructive"});return}const w={key:"rzp_test_Lc5DxL3uS4I6F9",amount:b.amount,currency:b.currency,name:"Vertical Living",description:"Subscription Payment",order_id:b.orderId,handler:async function(v){await h({razorpay_order_id:v.razorpay_order_id,razorpay_payment_id:v.razorpay_payment_id,razorpay_signature:v.razorpay_signature}),_({title:"Success",description:"Subscription payment verified."})},theme:{color:"#0A71F2"}};new window.Razorpay(w).open()}else _({title:"Plan Changed",description:"You have switched your plan successfully."})}catch(b){_({title:"Error",description:((E=(j=b==null?void 0:b.response)==null?void 0:j.data)==null?void 0:E.message)||b.message||"Failed to switch plan",variant:"destructive"})}finally{o(null)}};return e.jsxs("div",{className:"min-h-full bg-gray-100  flex flex-col items-center",children:[e.jsx(e.Fragment,{children:d&&a?e.jsxs("div",{className:"w-full flex items-center justify-center mb-2 py-2 px-2 bg-white",children:[e.jsx("button",{onClick:t,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"w-full",children:e.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold text-gray-800",children:"Upgrade Plan"})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-4xl w-full text-center py-5",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-[#2f303a] mb-2",children:d?"Upgrade your Plan":"Choose Plan"}),e.jsx("p",{className:"text-md text-gray-500",children:"Choose a subscription plan to match your needs"})]})})}),e.jsx("div",{className:" px-4 py-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Cb.map(y=>e.jsxs("div",{className:`group border-t-[6px] ${y.color} rounded-xl bg-white shadow-md p-6 flex flex-col justify-between transition hover:shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-2xl font-bold ${y.planNameColor}`,children:y.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Billed every 30 days"})]}),e.jsxs("div",{className:"text-center my-5",children:[e.jsx("h3",{className:`${y.price?"text-3xl":"text-xl"} font-extrabold text-gray-800`,children:y.price?` ${y.price}`:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-400",children:"/ month"})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:y.features.length>0?y.features.map((j,E)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${j.includes("")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:j.replace("","").replace("","")})]},E)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})}),y.price?e.jsx(L,{isLoading:p||x,onClick:()=>g(y.key),disabled:l===y.key||p,className:`w-full py-2 mt-auto text-white rounded-md font-medium ${l===y.key||p?"bg-gray-400 !cursor-not-allowed":y.btnColor} transition`,children:l===y.key||p?"Processing...":"Choose Plan"}):e.jsx(L,{disabled:!0,className:"w-full py-2 mt-auto text-white rounded-md font-medium bg-gray-400 hover:!bg-gray-400 !cursor-not-allowed",children:"Coming Soon"})]},y.key))})]})},Y0={ADMIN:"/login",CTO:"/login/cto",STAFF:"/login/staff",WORKER:"/login/worker",CLIENT:"/login/client"};function t3(){const[t,a]=A.useState(!1),[r,l]=A.useState(window.innerWidth<470),o=()=>{a(!0)};return A.useEffect(()=>{const d=()=>{l(window.innerWidth<470)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[r?e.jsx(ki,{labels:lc,path:Y0,isOpen:t,onClose:()=>a(!1)}):e.jsx(Ci,{path:Y0,labels:lc,icons:Sb}),e.jsx("main",{className:"flex-1 relative",children:e.jsx(Vt,{context:{isMobile:r,openMobileSidebar:o}})})]})}const s3=async(t,a)=>{var l;const r=await a.get(`/adminwall/${t}`);return(l=r==null?void 0:r.data)==null?void 0:l.data},a3=async(t,a,r)=>(await r.get(`/adminwall/${t}/step/${a}`)).data,n3=async(t,a,r,l)=>(await l.post(`/adminwall/${t}/step/${a}/correction`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,r3=async(t,a,r,l)=>(await l.patch(`/adminwall/${t}/step/${a}/approve`,r)).data,l3=t=>{const{role:a}=Z(),r=J(a),l=["owner","staff","CTO"];return qe({queryKey:["adminSOP",t],queryFn:()=>{if(!a||!l.includes(a))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return s3(t,r)}})},i3=(t,a)=>{const{role:r}=Z(),l=J(r),o=["owner","staff","CTO"];return qe({queryKey:["adminStep",t,a],queryFn:()=>{if(!r||!o.includes(r))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return a3(t,a,l)}})},o3=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({projectId:l,stepNumber:o,formData:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return n3(l,o,d,a)}})},c3=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({projectId:l,stepId:o,payload:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return r3(l,o,d,a)}})};function d3(){const{projectId:t}=Re(),{pathname:a}=yt(),r=Me(),{isMobile:l,openMobileSidebar:o}=We(),{data:d,isLoading:m,error:x}=l3(t),h=a.endsWith("/adminwall");return m?e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500",children:"Loading..."}):x?e.jsx("div",{className:"flex justify-center items-center h-40 text-red-500",children:x==null?void 0:x.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50 overflow-y-auto custom-scrollbar",children:h?e.jsxs("div",{className:"flex-1 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl text-left sm:text-center font-bold mb-2 text-gray-800",children:[l&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Admin Wall Painting Steps"]}),e.jsx("p",{className:"text-gray-600 text-base mb-2 text-center hidden sm:block",children:"Select a step to manage its details."})]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Eb.map(p=>{var y;const g=(y=d==null?void 0:d.steps)==null?void 0:y.find(j=>(j==null?void 0:j.stepNumber)===p.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs($t,{to:`step/${g==null?void 0:g._id}/${p.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:p.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",p.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},p.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4  bg-white border-b border-gray-200 shadow z-10",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl text-blue-600 font-semibold",children:"Admin Side"}),e.jsx(L,{onClick:()=>r(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(Vt,{context:{isMobile:l,openMobileSidebar:o}})})]})})}function u3(){var D,$;const{projectId:t,stepId:a,stepNumber:r}=Re(),[l,o]=A.useState(""),[d,m]=A.useState(null),[x,h]=A.useState(!1),[p,g]=A.useState(null),{mutate:y}=c3(),{mutate:j}=o3(),{data:E,isLoading:b}=i3(t,a),k=Eb.find(q=>q.stepNumber===Number(r)),w=()=>{h(!1)},C=()=>{h(!1)},v=(q,H)=>{g({url:q,alt:H})},N=()=>{g(null)},T=()=>{if((!d||(d==null?void 0:d.length)===0)&&!l){alert("Please select files or write something in notes");return}const q=new FormData;if(d&&d.length)for(let H=0;H<d.length;H++)q.append("files",d[H]);q.append("adminNote",l),j({projectId:t,stepNumber:r,formData:q})};if(b)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!k)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const P=({src:q,alt:H})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>v(q,H),children:[x&&e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gray-200 animate-pulse rounded-lg flex items-center justify-center z-10",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:q,alt:H,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400 cursor-pointer",onLoadStart:()=>h(!0),onLoad:w,onError:C}),e.jsx("button",{onClick:he=>{he.stopPropagation(),Kt({src:q,alt:H})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[p&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors z-10",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:p.url,alt:p.alt,className:"max-w-full max-h-full object-contain rounded-lg"})]}),e.jsx("div",{className:"absolute inset-0 -z-10",onClick:N})]}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${r})`," "," ",k.label]})}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:px-6 sm:py-3 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:k.rules.map((q,H)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:""}),e.jsx("span",{children:q})]},H))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Worker latest Uploads"]}),($=(D=E==null?void 0:E.step)==null?void 0:D.workerInitialUploads)!=null&&$.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:E.step.workerInitialUploads.map((q,H)=>e.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-3 shadow-sm",children:q.type==="image"?e.jsx(P,{src:q==null?void 0:q.url,alt:(q==null?void 0:q.originalName)||`Upload ${H+1}`}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 sm:h-40 md:h-48 bg-blue-50 rounded-lg border-2 border-dashed border-blue-300",children:[e.jsx("div",{className:"text-blue-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm text-center px-2 font-medium",children:q.originalName})]})},H))}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No initial uploads found."})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Review Actions"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:()=>y({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Approve Step"]}),e.jsxs("button",{onClick:()=>y({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Reject Step"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Add Correction"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Add Correction Note"}),e.jsx("textarea",{rows:4,value:l,onChange:q=>o(q.target.value),placeholder:"Provide detailed feedback and correction instructions...",className:"w-full p-3 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Correction Images:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:q=>m(q.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Submit Correction"})]})]})]})]})]})})]})})]})}const m3=async(t,a)=>{var l;return(l=(await a.get(`/workerwall/${t}`)).data)==null?void 0:l.data},f3=async(t,a,r)=>{const l=await r.get(`/workerwall/${t}/step/${a}`);return console.log("res form getsworkerdetialapi",l),l.data},h3=async(t,a,r,l)=>(await l.post(`/workerwall/${t}/step/${a}/initial`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,x3=async(t,a,r,l,o)=>(await o.post(`/workerwall/${t}/step/${a}/correction/${r}`,l,{headers:{"Content-Type":"multipart/form-data"}})).data,p3=t=>{const{role:a}=Z(),r=J(a),l=["worker","staff","owner","CTO"];return qe({queryKey:["workerSOP",t],queryFn:()=>{if(!a||!l.includes(a))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return m3(t,r)}})},g3=(t,a)=>{const{role:r}=Z(),l=J(r),o=["worker","staff","owner","CTO"];return qe({queryKey:["workerStep",t,a],queryFn:()=>{if(!r||!o.includes(r))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return f3(t,a,l)}})},b3=()=>{const{role:t}=Z(),a=J(t),r=["worker","staff"];return ie({mutationFn:async({projectId:l,stepNumber:o,formData:d})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return h3(l,o,d,a)}})},y3=()=>{const{role:t}=Z(),a=J(t),r=["worker","staff"];return ie({mutationFn:async({projectId:l,stepNumber:o,correctionRound:d,formData:m})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return x3(l,o,d,m,a)}})};function w3(){const{projectId:t}=Re(),{pathname:a}=yt(),r=Me(),{isMobile:l,openMobileSidebar:o}=We(),{data:d,isLoading:m,error:x}=p3(t),h=a.endsWith("/workerwall");return m?e.jsx("p",{className:"text-gray-600",children:"Loading..."}):x?e.jsx("p",{className:"text-red-500",children:x==null?void 0:x.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50",children:h?e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:[e.jsxs("h2",{className:"text-xl md:text-3xl text-left font-bold mb-6 sm:text-center text-gray-800",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Wall Painting Steps"]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:kb.map(p=>{var y;const g=(y=d==null?void 0:d.steps)==null?void 0:y.find(j=>(j==null?void 0:j.stepNumber)===p.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs($t,{to:`step/${g==null?void 0:g._id}/${p.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:p.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",p.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},p.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4 py-4 bg-white border-b border-gray-200 shadow z-10",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Side"]}),e.jsx(L,{onClick:()=>r(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(Vt,{})})]})})}function v3(){var $,q,H,he;const{projectId:t,stepId:a,stepNumber:r}=Re(),[l,o]=A.useState(null),[d,m]=A.useState(null),[x,h]=A.useState(!1),[p,g]=A.useState(null),{data:y,isLoading:j}=g3(t,a),{mutate:E}=b3(),{mutate:b}=y3(),k=kb.find(K=>K.stepNumber===Number(r)),w=()=>{h(!1)},C=()=>{h(!1)},v=(K,B)=>{g({url:K,alt:B})},N=()=>{g(null)};if(j)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!k)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const T=()=>{if(!l||l.length===0){alert("Please select files for initial upload.");return}const K=new FormData;for(let B=0;B<l.length;B++)K.append("files",l[B]);E({projectId:t,stepNumber:r,formData:K})},P=K=>{if(!d||d.length===0){alert("Please select files for correction upload.");return}const B=new FormData;for(let te=0;te<d.length;te++)B.append("files",d[te]);b({projectId:t,stepNumber:r,correctionRound:K,formData:B})},D=({src:K,alt:B})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>v(K,B),children:[x&&e.jsx("div",{className:" pointer-events-none absolute z-20 inset-0 bg-gray-900 animate-pulse rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:K,alt:B,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400",onLoadStart:()=>h(!0),onLoad:w,onError:C}),e.jsx("button",{onClick:te=>{te.stopPropagation(),Kt({src:K,alt:B})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[p&&e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:N,children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:p.url||"/placeholder.svg",alt:p.alt,className:"max-w-full max-h-full object-contain rounded-lg",onClick:K=>K.stopPropagation()})]})}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${r})`," "," ",k.label]}),e.jsxs("p",{className:"text-blue-600 hidden",children:["Step ",r]})]}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-6 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:k.rules.map((K,B)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:""}),e.jsx("span",{children:K})]},B))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Your Initial Uploads"]}),(q=($=y==null?void 0:y.data)==null?void 0:$.initialUploads)!=null&&q.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:y.data.initialUploads.map((K,B)=>e.jsx(e.Fragment,{children:e.jsx(D,{src:(K==null?void 0:K.url)||"/placeholder.svg",alt:`Initial Upload ${B+1}`},B)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No initial uploads yet."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Initial Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:K=>o(K.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Files"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Correction Rounds"]}),(he=(H=y==null?void 0:y.data)==null?void 0:H.correctionRounds)!=null&&he.length?e.jsx("div",{className:"space-y-6",children:y.data.correctionRounds.map(K=>{var B,te;return e.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-2 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-blue-800",children:["Correction Round ",K==null?void 0:K.roundNumber]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-2",children:[e.jsx("i",{className:"fas fa-circle-info mr-1 sm:mr-2 "}),"Admin Note:"]}),e.jsxs("p",{className:"text-blue-700",children:[K.adminNote," "]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Admin Reference Images:"}),K!=null&&K.adminUploads.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:(B=K==null?void 0:K.adminUploads)==null?void 0:B.map((V,oe)=>e.jsx(e.Fragment,{children:e.jsx(D,{src:V.url||"/placeholder.svg",alt:`Admin Upload ${oe+1}`},oe)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No Admin uploads"})]})]}),((te=K.workerCorrectedUploads)==null?void 0:te.length)>0?e.jsxs("div",{className:"mb-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Your Correction Uploads:"}),e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:K.workerCorrectedUploads.map((V,oe)=>e.jsx(e.Fragment,{children:e.jsx(D,{src:V.url||"/placeholder.svg",alt:`Worker Correction ${oe+1}`},oe)}))})})]}):e.jsxs("div",{className:"text-center py-8 border-t border-gray-200 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No Worker correction uploads"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Correction Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:V=>m(V.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:()=>P(K==null?void 0:K.roundNumber),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Corrections"})]})]})]},K.roundNumber)})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No corrections requested yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Your work is on track!"})]})]})]})})]})})]})}const j3=()=>{const{openMobileSidebar:t,isMobile:a}=We();return e.jsx(tw,{openMobileSidebar:t,isMobile:a})},N3=async({api:t,profileData:a})=>{try{const{data:r}=await t.put("/profile/update-profile",a);if(r.ok)return r;throw new Error((r==null?void 0:r.message)||"Profile update failed.")}catch(r){throw console.error("Profile update error:",r),r}},S3=()=>{const{role:t}=Z(),a=J(t),r=["owner","client","staff","CTO","worker"];return ie({mutationFn:async({name:l,email:o,phoneNo:d})=>{if(!t)throw new Error("Not authorized.");if(!r.includes(t))throw new Error("Role not allowed.");if(!a)throw new Error("API not found.");return await N3({api:a,profileData:{name:l,email:o,phoneNo:d}})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["user-profile"]})}})},W0={owner:{label:"Owner",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},staff:{label:"Staff",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},CTO:{label:"CTO",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},client:{label:"Client",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},worker:{label:"Worker",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""}};function C3(){const{openMobileSidebar:t,isMobile:a}=We(),{role:r,_id:l}=xs(v=>v.authStore),o=ys(),d=r==="owner"?xs(v=>v.userProfileStore):r==="staff"?xs(v=>v.staffProfileStore):r==="CTO"?xs(v=>v.CTOProfileStore):r==="client"?xs(v=>v.clientProfileStore):r==="worker"?xs(v=>v.workerProfileStore):null,m=()=>d?"userName"in d?d.userName:"staffName"in d?d.staffName:"CTOName"in d?d.CTOName:"clientName"in d?d.clientName:"workerName"in d?d.workerName:"-":"-",[x,h]=A.useState({name:m(),email:(d==null?void 0:d.email)||"",phoneNo:(d==null?void 0:d.phoneNo)||""}),{mutateAsync:p,isPending:g}=S3(),[y,j]=A.useState(!1),E=v=>{h(N=>({...N,[v.target.name]:v.target.value}))},b=async()=>{var v,N;try{const T=await p({name:x.name,email:x.email,phoneNo:x.phoneNo});_({title:"Success",description:"Completion status updated successfully"});const P={email:x.email,phoneNo:x.phoneNo,role:r,isauthenticated:!0};switch(r){case"owner":o(pc({...P,userId:T.data._id,userName:x.name}));break;case"staff":o(Uc({...P,staffId:T.data._id,staffName:x.name}));break;case"CTO":o(Ic({...P,CTOId:T.data._id,CTOName:x.name}));break;case"client":o(Bc({...P,clientId:T.data._id,clientName:x.name}));break;case"worker":o($c({...P,workerId:T.data._id,workerName:x.name}));break;default:throw new Error("Unknown role")}j(!1)}catch(T){_({title:"Error",description:((N=(v=T==null?void 0:T.response)==null?void 0:v.data)==null?void 0:N.message)||T.message||"Failed to update profile data",variant:"destructive"})}},k=()=>{h({name:m(),email:"",phoneNo:""}),j(!1)},w=W0[r]||W0.worker,C=m().charAt(0).toUpperCase();return e.jsxs("div",{className:"max-h-screen overflow-y-auto bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0 flex-1",children:[a&&e.jsx("button",{onClick:t,className:"p-2 rounded-lg border border-gray-700 hover:bg-gray-300 transition-colors lg:hidden flex-shrink-0",title:"Open Menu",children:e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-bars !text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-gray-100 rounded-lg flex-shrink-0",children:e.jsx("i",{className:"w-5 h-5 sm:w-6 sm:h-6 fas fa-user text-gray-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 truncate",children:"My Profile"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Manage your personal information"})]})]})]}),!y&&e.jsxs(L,{onClick:()=>j(!0),className:"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs sm:text-sm font-medium flex-shrink-0",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pen"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Profile"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})]})})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 px-4 sm:px-6 py-6 sm:py-8 text-white",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:flex-row",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-2xl sm:text-3xl font-bold text-white border-2 sm:border-3 border-white/30 shadow-lg flex-shrink-0",children:C}),e.jsxs("div",{className:"text-center md:text-left flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2 sm:mb-3 break-words",children:m()}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 sm:gap-3 mb-2 flex-wrap",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:w.icon}),e.jsx("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-semibold bg-white/90 text-gray-800 border border-white/30",children:w.label})]}),e.jsxs("p",{className:"text-white/80 text-xs sm:text-sm break-all",children:["ID: ",l]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[y&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pencil"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Edit Mode"})]}),e.jsx("p",{className:"text-blue-700 text-xs sm:text-sm mt-1",children:"Make your changes and click save when you're done."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-user inline mr-2"}),"Full Name"]}),e.jsx("input",{type:"text",name:"name",value:x.name,onChange:E,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-envelope inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:x.email,onChange:E,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your email address"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-phone inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phoneNo",value:x.phoneNo,onChange:E,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your phone number"})]})]}),y&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200",children:[e.jsxs(L,{isLoading:g,onClick:b,disabled:g,className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm sm:text-base order-1 sm:order-none",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-save"}),"Save Changes"]}),e.jsx("button",{onClick:k,disabled:g,className:"px-4 sm:px-6 py-2.5 sm:py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium text-sm sm:text-base order-2 sm:order-none",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-shield text-gray-600"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Account Summary"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"User ID:"}),e.jsx("span",{className:"text-gray-900 font-mono text-xs sm:text-sm bg-gray-100 px-2 py-1 rounded break-all",children:l||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"Role:"}),e.jsxs("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ${w.color} w-fit`,children:[w.icon," ",w.label]})]})]})]})]})})]})}const k3=async({api:t,id:a,section:r,notes:l})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/notes/${r}`,{notes:l});if(o.ok)return o;throw new Error(o.message||"Failed to update notes")},E3=async({api:t,id:a,section:r,isRequired:l})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/boolean/${r}`,{isRequired:l});if(o.ok)return o;throw new Error(o.message||"Failed to update boolean")},A3=async({api:t,projectId:a})=>{const{data:r}=await t.get(`/prerequireties/getalldetails/${a}`);if(r.ok)return r;throw new Error(r.message||"Failed to get all PreRequireties")},O3=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({id:l,section:o,notes:d})=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await k3({api:a,id:l,section:o,notes:d})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["preRequireties"]})}})},R3=()=>{const{role:t}=Z(),a=J(t),r=["owner","staff","CTO"];return ie({mutationFn:async({id:l,section:o,isRequired:d})=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await E3({api:a,id:l,section:o,isRequired:d})},onSuccess:()=>{Ae.invalidateQueries({queryKey:["preRequireties"]})}})},T3=t=>{const{role:a}=Z(),r=J(a),l=["owner","staff","CTO"];return qe({queryKey:["preRequireties",t],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!l.includes(a))throw new Error("Not allowed");if(!r)throw new Error("API not found");return await A3({api:r,projectId:t})},retry:!1,refetchOnMount:!1})},P3=({title:t,section:a,isRequired:r,notes:l,formId:o,onUpdate:d})=>{const[m,x]=A.useState(!1),[h,p]=A.useState(l),[g,y]=A.useState(!1),j=R3(),E=O3(),b=async v=>{try{await j.mutateAsync({id:o,section:a,isRequired:v}),_({title:"Success",description:`${t} requirement updated successfully`}),d()}catch(N){_({title:"Error",description:N instanceof Error?N.message:"Failed to update requirement",variant:"destructive"})}},k=async()=>{if(h!==l){y(!0);try{await E.mutateAsync({id:o,section:a,notes:h}),_({title:"Success",description:`${t} notes updated successfully`}),d()}catch(v){_({title:"Error",description:v instanceof Error?v.message:"Failed to update notes",variant:"destructive"}),p(l)}finally{y(!1)}}},w=()=>{k()},C=v=>{v.key==="Enter"&&v.ctrlKey&&k()};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100",onClick:()=>x(!m),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`fas ${m?"fa-chevron-down":"fa-chevron-right"} text-gray-400`}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),r?e.jsxs("span",{className:"flex items-center text-green-600 text-sm",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),"Required"]}):e.jsxs("span",{className:"flex items-center text-gray-500 text-sm",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-1"}),"Not Required"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:v=>{v.stopPropagation(),b(v.target.checked)},disabled:j.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${r?"bg-blue-600":"bg-gray-200"} ${j.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${r?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),j.isPending&&e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})]})]})}),m&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:v=>b(v.target.checked),disabled:j.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${r?"bg-blue-600":"bg-gray-200"} ${j.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${r?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"This work is required for the project"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes & Additional Details"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{placeholder:`Add notes about ${t.toLowerCase()}...`,value:h,onChange:v=>p(v.target.value),onBlur:w,onKeyDown:C,className:"w-full min-h-[100px] p-3 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:g}),g&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Press Ctrl+Enter to save or click outside the text area"})]})]})})]})},M3=()=>{var g,y,j,E,b;const{projectId:t}=Re(),{isMobile:a,openMobileSidebar:r}=We(),{data:l,isLoading:o,error:d,refetch:m}=T3(t),x=[{key:"modularWork",title:"Modular Work",description:"Prefabricated components and modular construction",_id:(g=l==null?void 0:l.data)==null?void 0:g._id},{key:"electricalWork",title:"Electrical Work",description:"Wiring, fixtures, and electrical installations",_id:(y=l==null?void 0:l.data)==null?void 0:y._id},{key:"plumbingWork",title:"Plumbing Work",dzescription:"Water supply, drainage, and plumbing fixtures",_id:(j=l==null?void 0:l.data)==null?void 0:j._id},{key:"civilWork",title:"Civil Work",description:"Structural work, foundations, and civil engineering",_id:(E=l==null?void 0:l.data)==null?void 0:E._id},{key:"decorationWork",title:"Decoration Work",description:"Interior design, painting, and finishing touches",_id:(b=l==null?void 0:l.data)==null?void 0:b._id}],h=()=>{m()};if(o)return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading project prerequisites..."})]})});if(d)return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:d instanceof Error?d.message:"Failed to load prerequisites"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Try Again"})})]});if(!(l!=null&&l.data))return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-yellow-600 mr-2"}),e.jsx("p",{className:"text-yellow-800",children:"No prerequisites data found for this project. Please ensure the project exists and try again."})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh"})})]});const p=l.data;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"max-h-full overflow-y-auto mx-auto px-4 py-4 custom-scrollbar",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center hidden sm:block space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-700",children:"Project Prerequisites"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Configure the required work types for your project. These prerequisites must be completed before proceeding to the 14-step process."})]}),e.jsx("header",{className:"block sm:hidden space-y-2",children:e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[a&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Project Prerequisites"]})}),e.jsx("div",{className:"space-y-4",children:x.map(k=>{const w=p[k.key];return e.jsx(P3,{title:k.title,section:k.key,isRequired:(w==null?void 0:w.isRequired)||!1,notes:(w==null?void 0:w.notes)||"",formId:k._id,onUpdate:h},k.key)})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prerequisites Summary"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:x.map(k=>{const w=p[k.key],C=(w==null?void 0:w.isRequired)||!1;return e.jsxs("div",{className:"flex items-center space-x-2",children:[C?e.jsx("i",{className:"fas fa-check-circle text-green-600"}):e.jsx("i",{className:"fas fa-exclamation-circle text-gray-400"}),e.jsx("span",{className:`text-sm ${C?"text-green-600 font-medium":"text-gray-500"}`,children:k.title})]},k.key)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(L,{variant:"ghost",onClick:()=>m(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh Data"}),e.jsx(L,{onClick:()=>{_({title:"Success",description:"Prerequisites configured successfully. You can now proceed to the 14-step process."})},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Continue to Next Steps"})]})]})})})};function L3(){const[t,a]=A.useState(null),[r,l]=A.useState(null),{isauthenticated:o}=xs(d=>d.authStore);return $y(),e.jsx(e.Fragment,{children:e.jsxs(kN,{children:[e.jsx(we,{path:"/",element:o?e.jsx(zm,{to:"/organizations",replace:!0}):e.jsx(Yg,{})}),e.jsxs(we,{path:"/login",element:e.jsx(t3,{}),children:[e.jsx(we,{index:!0,element:e.jsx(M0,{})})," ",e.jsx(we,{path:"cto",element:e.jsx($0,{})}),e.jsx(we,{path:"staff",element:e.jsx(q0,{})}),e.jsx(we,{path:"worker",element:e.jsx(U0,{})}),e.jsx(we,{path:"client",element:e.jsx(I0,{})})]}),e.jsx(we,{path:"/home",element:e.jsx(Yg,{})}),e.jsx(we,{path:"/unauthorized",element:e.jsx(Iy,{})}),e.jsx(we,{path:"/stafflogin",element:e.jsx(q0,{})}),e.jsx(we,{path:"/login",element:e.jsx(M0,{})}),e.jsx(we,{path:"/workerlogin",element:e.jsx(U0,{})}),e.jsx(we,{path:"/ctologin",element:e.jsx($0,{})}),e.jsx(we,{path:"/clientlogin",element:e.jsx(I0,{})}),e.jsx(we,{path:"/staffregister",element:e.jsx(LE,{})}),e.jsx(we,{path:"/workerregister",element:e.jsx(_E,{})}),e.jsx(we,{path:"/ctoregister",element:e.jsx(zE,{})}),e.jsx(we,{path:"/clientregister",element:e.jsx(UE,{})}),e.jsx(we,{path:"/subscription",element:e.jsx(tw,{})}),e.jsx(we,{path:"/organizations",element:e.jsx(Le,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(TE,{})})}),e.jsxs(we,{path:"/organizations/:organizationId",element:e.jsx(Le,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(qE,{})}),children:[e.jsx(we,{index:!0,element:e.jsx(Le,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(ME,{})})}),e.jsx(we,{path:"invitestaff",element:e.jsx(Le,{allowedRoles:["CTO","owner","staff"],children:e.jsx(FE,{})})}),e.jsx(we,{path:"invitecto",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(DE,{})})}),e.jsx(we,{path:"subscriptionplan",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(j3,{})})}),e.jsx(we,{path:"userprofile",element:e.jsx(Le,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(C3,{})})})]}),e.jsx(we,{path:"/organizations/:organizationId/projects",element:e.jsx(uk,{projectId:t,setProjectId:a}),children:e.jsx(we,{index:!0,element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(Mk,{})})})}),e.jsxs(we,{path:"/:organizationId/projectdetails/:projectId",element:e.jsx(Le,{allowedRoles:["owner","client","CTO","worker","staff"],children:e.jsx(hk,{projectId:t,setProjectId:a,setOrganizationId:l,organizationId:r})}),children:[e.jsx(we,{path:"prerequireties",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(M3,{})})}),e.jsx(we,{path:"workers",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(z0,{})})}),e.jsx(we,{path:"inviteclient",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx($E,{})})}),e.jsx(we,{path:"requirementform",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(PA,{})})}),e.jsx(we,{path:"sitemeasurement",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(o4,{})})}),e.jsx(we,{path:"sampledesign",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(C4,{})})}),e.jsx(we,{path:"technicalconsultant",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(F4,{})})}),e.jsx(we,{path:"materialselection",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(sO,{})}),children:e.jsx(we,{path:"materialroom/:roomId",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(nO,{})})})}),e.jsxs(we,{path:"costestimation",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(RO,{})}),children:[e.jsx(we,{path:"roomdetails/:roomId",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(PO,{})})}),e.jsx(we,{path:"roomdetails/labour",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(LO,{})})})]}),e.jsxs(we,{path:"paymentconfirmation",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(VT,{})}),children:[e.jsx(we,{path:"consent",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(YT,{})})}),e.jsx(we,{path:"schedule",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(AT,{})})}),e.jsx(we,{path:"transaction",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(_T,{})})})]}),e.jsx(we,{path:"ordermaterial",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(aR,{})}),children:e.jsx(we,{path:"ordermaterialroom/:roomKey",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(lR,{})})})}),e.jsx(we,{path:"materialarrival",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(CR,{})}),children:e.jsx(we,{path:"materialarrivalroom/:roomKey",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(kR,{})})})}),e.jsxs(we,{path:"workmainschedule",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(r6,{})}),children:[e.jsx(we,{path:"workschedule/:sectionId",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(l6,{})})}),e.jsx(we,{path:"dailyschedule/:sectionId",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(i6,{})})})]}),e.jsx(we,{path:"installation",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(w6,{})}),children:e.jsx(we,{path:"installationroom/:roomkey",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(v6,{})})})}),e.jsxs(we,{path:"qualitycheck",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff"],children:e.jsx(_6,{})}),children:[e.jsx(we,{path:"qualitycheckroom/:roomkey",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(F6,{})})}),e.jsx(we,{path:"qualitycheckroom/adminwall",element:e.jsx(d3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(u3,{})})}),e.jsx(we,{path:"qualitycheckroom/workerwall",element:e.jsx(w3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(v3,{})})})]}),e.jsx(we,{path:"cleaning",element:e.jsx(J6,{}),children:e.jsx(we,{path:"cleaningroom/:roomId",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(eT,{})})})}),e.jsx(we,{path:"projectdelivery",element:e.jsx(Le,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(xT,{})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(we,{path:"/phase",element:e.jsx(Le,{allowedRoles:["owner"],children:e.jsx(L2,{})})}),e.jsx(we,{path:"/issues",element:e.jsx(Le,{allowedRoles:["owner"],children:e.jsx(M2,{})})}),e.jsx(we,{path:"/tasks",element:e.jsx(Le,{allowedRoles:["owner"],children:e.jsx(_2,{})})})]}),e.jsx(we,{path:"/workers",element:e.jsx(Le,{allowedRoles:["staff"],children:e.jsx(z0,{})})}),e.jsx(we,{path:"/requirementform/:projectId/:token",element:e.jsx(gA,{})}),e.jsx(we,{path:"/ordermaterial/public/:projectId/:token",element:e.jsx(ER,{})}),e.jsx(we,{path:"/materialarrival/public/:projectId/:token",element:e.jsx(AR,{})}),e.jsx(we,{path:"/clientconsent/public/:projectId/:token",element:e.jsx(WT,{})}),e.jsx(we,{path:"*",element:e.jsx(Lk,{})})]})})}Lj.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(v2,{store:Ut,children:e.jsx(aS,{client:Ae,children:e.jsx(XN,{children:e.jsx(L3,{})})})})}));
