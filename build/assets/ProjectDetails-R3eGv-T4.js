import{e as w,b as P,r as a,j as i,O as U}from"./index-BYTWf4fI.js";import{P as N,c as v}from"./constants-4IFJeChr.js";import{M as D,S as x}from"./MobileSidebar-C-OfiQeA.js";import"./CTOApi-CMNKof4Y.js";import"./useMutation-sTZCeqmg.js";import"./clientApi-DAoI0t8F.js";import"./staffApi-B40r53N8.js";import"./userApi-BiOJoXsM.js";import"./workerApi-DXrGAGg8.js";import"./Button-aRmNljle.js";import"./toast-BSC5QTk1.js";import"./currentActiveStageApi-CZmDG3AW.js";import"./useQuery-DFVFWtWl.js";import"./roleCheck-DhBlwT6t.js";import"./notificationApi-6vPrGvHl.js";import"./useInfiniteQuery-BdEWgiGc.js";import"./issueDiscussionApi-BT_wbjl4.js";const V={INVENTORY:"inventory",WORKERS:"inviteworker",INVITECLIENT:"inviteclient",PREREQUISTIES:"prerequisites",REQUIREMENTFORM:"clientrequirement",SITEMEASUREMENT:"sitemeasurement",SAMPLEDESIGN:"sampledesign",WORKSCHEDULE:"workschedule",TECHNICALCONSULTANT:"technicalconsultant",PAYMENTCONFIRMATION:"paymentconfirmation",MODULARUNIT:"modularunit",ORDERMATERIALS:"ordermaterial",MATERIALARRIVED:"materialarrival",INSTALLATION:"installation",QUALITYCHECK:"qualitycheck",CLEANINGSANITATION:"cleaning",PROJECTDELIVERY:"projectdelivery"},g=({projectId:e,setProjectId:R,organizationId:t,setOrganizationId:h})=>{const o=w(),{role:r,permission:n}=P(),C=(r==null?void 0:r.toLowerCase())||"",[T,m]=a.useState(!1),[A,p]=a.useState(window.innerWidth<470),[S,O]=a.useState("Vertical Living");a.useLayoutEffect(()=>{const s=o.pathname.split("/");R(s[3]),h(s[1])},[o.pathname]),a.useEffect(()=>{const s=()=>{p(window.innerWidth<470)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const L={INVENTORY:e?`/${t}/projectdetails/${e}/inventory`:"",WORKERS:e?`/${t}/projectdetails/${e}/workers`:"",INVITECLIENT:e?`/${t}/projectdetails/${e}/inviteclient`:"",PREREQUISTIES:e?`/${t}/projectdetails/${e}/prerequisites`:"",REQUIREMENTFORM:e?`/${t}/projectdetails/${e}/requirementform`:"",SITEMEASUREMENT:e?`/${t}/projectdetails/${e}/sitemeasurement`:"",SAMPLEDESIGN:e?`/${t}/projectdetails/${e}/sampledesign`:"",WORKSCHEDULE:e?`/${t}/projectdetails/${e}/workmainschedule`:"",TECHNICALCONSULTANT:e?`/${t}/projectdetails/${e}/technicalconsultant`:"",PAYMENTCONFIRMATION:e?`/${t}/projectdetails/${e}/paymentconfirmation`:"",MODULARUNIT:e?`/${t}/projectdetails/${e}/modularunitsnew`:"",ORDERMATERIALS:e?`/${t}/projectdetails/${e}/ordermaterial`:"",MATERIALARRIVED:e?`/${t}/projectdetails/${e}/materialarrival`:"",INSTALLATION:e?`/${t}/projectdetails/${e}/installation`:"",QUALITYCHECK:e?`/${t}/projectdetails/${e}/qualitycheck`:"",CLEANINGSANITATION:e?`/${t}/projectdetails/${e}/cleaning`:"",PROJECTDELIVERY:e?`/${t}/projectdetails/${e}/projectdelivery`:""},f=Object.keys(N);let u=[];u=f;let l={},c={},E={};return u.forEach(s=>{N[s]&&L[s]&&(l[s]=N[s],c[s]=v[s],E[s]=L[s])}),C!=="owner"&&Object.keys(l).forEach(s=>{const $=V[s];if($){const M=n==null?void 0:n[$];M&&Object.values(M).some(b=>b===!0)||(delete l[s],delete c[s],delete E[s])}}),i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex w-screen h-screen",children:[A?i.jsx(D,{labels:l,path:E,isOpen:T,onClose:()=>m(!1)}):i.jsx(x,{path:E,labels:l,icons:c,setProjectName:O,projectName:S}),i.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:i.jsx(U,{context:{projectId:e,setProjectId:R,isMobile:A,isMobileSidebarOpen:T,openMobileSidebar:()=>m(!0),closeMobileSidebar:()=>m(!1),setProjectName:O,projectName:S}})})]})})};export{g as default};
