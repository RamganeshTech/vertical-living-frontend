import{h as s,i as c,A as l,k as u,l as i}from"./index-sOEqqOOm.js";const d=async(t,o)=>{const{data:e}=await o.post(`/selectedmodularunits/${t.projectId}/add`,t);if(!e.ok)throw new Error(e.message);return e.data},w=async(t,o)=>{const{data:e}=await o.get(`/selectedmodularunits/get/${t}`);if(!e.ok)throw new Error(e.message);return e.data},f=async(t,o,e)=>{const{data:r}=await e.delete(`/selectedmodularunits/delete/${t}/${o}`);if(!r.ok)throw new Error(r.message);return r.data},m=async(t,o)=>{const{data:e}=await o.post(`/selectedmodularunits/projects/${t}/modular-unit/complete`);if(!e.ok)throw new Error(e.message);return e.data},h=()=>{const t=["owner","CTO","staff"],{role:o}=s(),e=i(o),r=l();return u({mutationFn:async n=>{if(!o)throw new Error("Not Authorized");if(!t.includes(o))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await d(n,e)},onSuccess:(n,a)=>{r.invalidateQueries({queryKey:["selected-modular-units",a.projectId]})}})},A=t=>{const o=["owner","CTO","staff","client","worker"],{role:e}=s(),r=i(e);return c({queryKey:["selected-modular-units",t],queryFn:async()=>{if(!e)throw new Error("Not Authorized");if(!o.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await w(t,r)},enabled:!!t&&!!e,retry:!1,refetchOnMount:!1})},E=()=>{const{role:t}=s(),o=i(t),e=l(),r=["owner","CTO","staff"];return u({mutationFn:async n=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await f(n.projectId,n.unitId,o)},onSuccess:(n,a)=>{e.invalidateQueries({queryKey:["selected-modular-units",a.projectId]})}})},p=()=>{const{role:t}=s(),o=i(t),e=l(),r=["owner","CTO","staff"];return u({mutationFn:async({projectId:n})=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await m(n,o)},onSuccess:(n,a)=>{e.invalidateQueries({queryKey:["selected-modular-units",a]}),e.invalidateQueries({queryKey:["payment-confirmation",a]}),e.invalidateQueries({queryKey:["cost-estimation",a]}),e.invalidateQueries({queryKey:["material-room-confirmation",a]})}})};export{h as a,E as b,p as c,A as u};
