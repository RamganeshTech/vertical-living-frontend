import{c as s,k as w,d as c,q as d,g as i}from"./index-CUvv9ev0.js";const n=["owner","staff","CTO"],f=async({organizationId:t,projectId:e,productId:a,quantity:r,specification:o,api:l})=>{const u=await l.post("/materialinventory/cart/add",{organizationId:t,projectId:e,productId:a,quantity:r,specification:o});if(!u.data.ok)throw new Error(u.data.message);return u.data.data},m=async({organizationId:t,projectId:e,api:a})=>{const r=await a.get(`/materialinventory/cart/get?organizationId=${t}&projectId=${e}`);if(!r.data.ok)throw new Error(r.data.message);return r.data.data},y=async({cartId:t,itemCode:e,quantity:a,api:r})=>{const o=await r.put("/materialinventory/cart/update-quantity",{cartId:t,itemCode:e,quantity:a});if(!o.data.ok)throw new Error(o.data.message);return o.data.data},h=async({cartId:t,itemCode:e,api:a})=>{const r=await a.delete("/materialinventory/cart/remove-item",{data:{cartId:t,itemCode:e}});if(!r.data.ok)throw new Error(r.data.message);return r.data.data},p=async({id:t,projectId:e,api:a})=>{const r=await a.post(`/materialinventory/cart/generatematerial/pdf/${e}/${t}`);if(!r.data.ok)throw new Error(r.data.message);return r.data.data},I=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async a=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return f({...a,api:e})},onSuccess:(a,{organizationId:r,projectId:o})=>{d.invalidateQueries({queryKey:["cart",r,o]})}})},v=({organizationId:t,projectId:e})=>{const{role:a}=s(),r=i(a);return w({queryKey:["cart",t,e],queryFn:async()=>{if(!a||!n.includes(a))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return m({organizationId:t,projectId:e,api:r})},enabled:!!(t&&e&&a&&n.includes(a))})},A=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async a=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return y({...a,api:e})},onSuccess:()=>{d.invalidateQueries({queryKey:["cart"]})}})},P=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async a=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return h({...a,api:e})},onSuccess:()=>{d.invalidateQueries({queryKey:["cart"]})}})},g=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async({id:a,projectId:r})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return p({id:a,projectId:r,api:e})}})};export{I as a,A as b,P as c,g as d,v as u};
