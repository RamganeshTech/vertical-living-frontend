import{c as n,e as i,d as l,q as c,g as s}from"./index-MXS_gbde.js";const w=async({api:r,organizationId:o,id:t})=>{const{data:e}=await r.get(`quote/quotegenerate/getquotesingle/${o}/${t}`);if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},f=async({api:r,organizationId:o,filters:t})=>{const{data:e}=await r.get(`quote/quotegenerate/getquotes/${o}`,{params:t});if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},d=async({api:r,projectId:o})=>{const{data:t}=await r.get(`quote/quotegenerate/getquotepdf/quote/${o}`);if(!t.ok)throw new Error((t==null?void 0:t.message)||"Failed to fetch materials");return t.data},q=async({api:r,id:o})=>{const{data:t}=await r.delete(`quote/quotegenerate/deletequote/${o}`);if(!t.ok)throw new Error((t==null?void 0:t.message)||"Failed to delete materials");return t.data},g=async({api:r,quoteId:o,data:t})=>{var a;const e=await r.post(`quote/quotegenerate/generatepdf/${o}/create`,t);if(console.log("res form api",e.data),!(e!=null&&e.data.ok))throw new Error(((a=e==null?void 0:e.data)==null?void 0:a.message)||"Failed to delete materials");return e==null?void 0:e.data.data},y=async({api:r,quoteId:o,type:t,projectId:e})=>{var u;const a=await r.put(`quote/quotegenerate/clientquote/generatepdf/${e}/${o}`,{type:t});if(console.log("res form api",a.data),!(a!=null&&a.data.ok))throw new Error(((u=a==null?void 0:a.data)==null?void 0:u.message)||"Failed to generate pdf");return a==null?void 0:a.data.data},E=(r,o)=>{const t=["owner","staff","CTO"],{role:e}=n(),a=s(e);return l({queryKey:["quote-variant-single",r,o],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return await w({api:a,organizationId:r,id:o})},enabled:!!r})},p=(r,o)=>{const t=["owner","staff","CTO"],{role:e}=n(),a=s(e);return l({queryKey:["quote-material-items",r,o],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return await f({api:a,organizationId:r,filters:o})},enabled:!!r})},F=r=>{const o=["owner","staff","CTO"],{role:t}=n(),e=s(t);return l({queryKey:["quote-pdfs",r],queryFn:async()=>{if(!t||!o.includes(t))throw new Error("Not allowed to create quotes");if(!e)throw new Error("API instance for role not found");return await d({api:e,projectId:r})},enabled:!!r})},m=async({api:r,organizationId:o,categoryName:t})=>{const{data:e}=await r.get(`quote/quotegenerate/getmaterials/${o}/${t}`);if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},P=(r,o)=>{const t=["owner","staff","CTO"],{role:e}=n(),a=s(e);return l({queryKey:["quote-brand",r,o],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return console.log("categrouName",o),await m({api:a,organizationId:r,categoryName:o})},enabled:!!r})},Q=()=>{const r=["owner","staff","CTO"],{role:o}=n(),t=s(o);return i({mutationFn:async({id:e})=>{if(!o||!r.includes(o))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await q({api:t,id:e})},onSuccess:(e,{organizationId:a})=>{c.invalidateQueries({queryKey:["quote-material-items",a]})}})},C=()=>{const r=["owner","staff","CTO"],{role:o}=n(),t=s(o);return i({mutationFn:async({quoteId:e,data:a})=>{if(!o||!r.includes(o))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await g({api:t,quoteId:e,data:a})},onSuccess:(e,{organizationId:a})=>{c.invalidateQueries({queryKey:["quote-material-items",a]})}})},$=()=>{const r=["owner","staff","CTO"],{role:o}=n(),t=s(o);return i({mutationFn:async({quoteId:e,projectId:a,type:u})=>{if(!o||!r.includes(o))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await y({api:t,quoteId:e,projectId:a,type:u})}})};export{F as a,E as b,P as c,C as d,Q as e,p as f,m as g,$ as u};
