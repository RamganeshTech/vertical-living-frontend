import{u as d,q as m}from"./index-BnxfhzlG.js";import{g}from"./roleCheck-B2ZABSQw.js";import{u as y}from"./useQuery-DQ8spYHd.js";import{u as v}from"./useMutation-BcezwzYU.js";import{u as h}from"./useInfiniteQuery-DjbdwBFi.js";const R=async({organizationId:t,customerId:n,page:e,limit:o,fromInvoiceDate:s,toInvoiceDate:l,createdFromDate:c,createdToDate:u,search:p,api:w,sortBy:f,sortOrder:i})=>{const a=new URLSearchParams;t&&a.append("organizationId",t),n&&a.append("customerId",n),e&&a.append("page",e.toString()),o&&a.append("limit",o.toString()),s&&a.append("fromInvoiceDate",s),l&&a.append("toInvoiceDate",l),c&&a.append("createdFromDate",c),u&&a.append("createdToDate",u),f&&a.append("sortBy",f),i&&a.append("sortOrder",i),p&&a.append("search",p);const{data:r}=await w.get(`/department/accounting/retailinvoice/getallinvoice?${a.toString()}`);if(!r.ok)throw new Error(r.message);return r},P=async({invoiceData:t,api:n})=>{const{data:e}=await n.post("/department/accounting/retailinvoice/createinvocie",t);if(!e.ok)throw new Error(e.message);return e.data},E=async({invoiceId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/retailinvoice/deleteinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},A=async({invoiceId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/retailinvoice/getsingleinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},N=({organizationId:t,customerId:n,limit:e=10,search:o,fromInvoiceDate:s,toInvoiceDate:l,createdFromDate:c,createdToDate:u,sortBy:p,sortOrder:w})=>{const f=["owner","staff","CTO"],{role:i}=d(),a=g(i);return h({queryKey:["retailinvoices",t,n,e,s,l,c,u,o,p,w],queryFn:async({pageParam:r=1})=>{if(!i||!f.includes(i))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await R({organizationId:t,customerId:n,page:r,limit:e,fromInvoiceDate:s,toInvoiceDate:l,createdFromDate:c,createdToDate:u,search:o,api:a,sortBy:p,sortOrder:w})},getNextPageParam:r=>{if(r.pagination.page<r.pagination.totalPages)return r.pagination.page+1},getPreviousPageParam:r=>{if(r.pagination.page>1)return r.pagination.page-1},initialPageParam:1,enabled:!!i&&f.includes(i)&&!!t})},F=()=>{const t=["owner","staff","CTO"],{role:n}=d(),e=g(n);return v({mutationFn:async({invoiceData:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await P({invoiceData:o,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["retailinvoices"]})}})},K=()=>{const t=["owner","staff","CTO"],{role:n}=d(),e=g(n);return v({mutationFn:async({invoiceId:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await E({invoiceId:o,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["retailinvoices"]})}})},Q=t=>{const n=["owner","staff","CTO"],{role:e}=d(),o=g(e);return y({queryKey:["retailinvoice",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await A({invoiceId:t,api:o})},enabled:!!t&&!!e&&n.includes(e)})};export{K as a,F as b,Q as c,N as u};
