import{j as e,b as Qe,u as Ze,r as n,O as Xe}from"./index-BzUhBKjh.js";import{C as $e,a as Je,b as ea,d as aa,c as sa}from"./Card-kz-Izex-.js";import{I as y}from"./Input-CpN4wyxp.js";import{B as j}from"./Button-G0_5Lr1e.js";import{B as Ee}from"./Badge-BfTUxDIm.js";import{t as u}from"./toast-BSC5QTk1.js";import{u as la,a as ta,b as ra,c as na}from"./materialInventoryApi-Bxi2ah0v.js";import{t as U}from"./dateFormator-BGKi5rfZ.js";import oa from"./MaterialOverviewLoading-DH5TyW_t.js";import{u as se,S as ca}from"./useDebounce-DkM57wX6.js";import{u as ia}from"./projectApi-BXK_coPx.js";import{u as da,a as ua,b as ma,c as xa}from"./MaterialInventoryCartApi-BAL1qRVT.js";import{S as ba}from"./SearchSelectNew-BdRJkB8g.js";import{L as ga}from"./Label-BNlSQjL3.js";import"./roleCheck-Dfs5Z9Fe.js";import"./useQuery-DVRx6O1f.js";import"./useMutation-CBXZTi2Z.js";import"./useInfiniteQuery-CeMIkBnK.js";import"./Skeleton-DrpFGjA3.js";import"./index-BdSp7Fbz.js";const Ce={primary:"text-blue-400",danger:"text-red-400",success:"text-green-400",warning:"text-yellow-400",gray:"text-gray-400"},Ae={envelope:"fas fa-envelope",box:"fas fa-box-open",message:"fas fa-comment-dots",chat:"fas fa-comments",warning:"fas fa-exclamation-triangle"},ha=({message:c,icon:v="box",customIconClass:g,color:E="gray"})=>{const C=`${v==="custom"?g||"fas fa-question-circle":Ae[v]||Ae.box} text-7xl mb-4 ${Ce[E]||Ce.gray}`;return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center py-12 px-4 text-center",children:[e.jsx("i",{className:C}),e.jsx("p",{className:"text-lg text-gray-600",children:c})]})},O={brand:[{value:"",label:"All Brand"},{value:"jaquar",label:"Jaquar"}],categories:[{value:"",label:"All Categories"},{value:"light",label:"Light"},{value:"socket",label:"Socket"},{value:"switches",label:"Switch"},{value:"regulator",label:"Regulators"}],subcategories:[{value:"",label:"All Subcategories"},{value:"Downlights",label:"Downlights"},{value:"COB Downlights",label:"COB Downlights"},{value:"Designer Lights",label:"Designer Lights"},{value:"Panels",label:"Panels"},{value:"Battens-Tubes",label:"Battens-Tubes"},{value:"Magnetic Lights",label:"Magnetic Lights"},{value:"Retail Lights",label:"Retail Lights"},{value:"Industrial Lights",label:"Industrial Lights"}],types:[{value:"",label:"All Types"},{value:"socket",label:"socket"},{value:"card-switch",label:"card-switch"},{value:"computer-socket",label:"computer-socket"},{value:"dimmer-switch",label:"dimmer-switch"},{value:"doorbell",label:"doorbell"},{value:"motion-sensor-switch",label:"motion-sensor-switch"},{value:"notify-switch",label:"notify-switch"},{value:"regulator",label:"regulator"},{value:"switch",label:"switch"},{value:"telephone-socket",label:"telephone-socket"},{value:"television-computer-socket",label:"television-computer-socket"},{value:"television-socket",label:"television-socket"},{value:"television-telephone-socket",label:"television-telephone-socket"}],models:[{value:"",label:"All Models"},{value:"ENSAVE PLUS",label:"ENSAVE PLUS"},{value:"AREVA PRIME",label:"AREVA PRIME"},{value:"NERO SURFACE",label:"NERO SURFACE"},{value:"LUCENT",label:"LUCENT"},{value:"LUCENT SQUARE",label:"LUCENT SQUARE"},{value:"2 IN 1 STANDALONE",label:"2 IN 1 STANDALONE"},{value:"ERIS FIXED (LOW BORDER DEEP RECESSED)",label:"ERIS FIXED (LOW BORDER DEEP RECESSED)"},{value:"ESTUS SWIVEL",label:"ESTUS SWIVEL"},{value:"ERIS SWIVEL",label:"ERIS SWIVEL"},{value:"ERIS REFLECTO",label:"ERIS REFLECTO"},{value:"ERIS FIXED",label:"ERIS FIXED"},{value:"EMINA",label:"EMINA"},{value:"EMINA TILTABLE",label:"EMINA TILTABLE"},{value:"DIMAS",label:"DIMAS"},{value:"GLIDE",label:"GLIDE"},{value:"ERIS SURFACE ROUND",label:"ERIS SURFACE ROUND"},{value:"EPITO",label:"EPITO"},{value:"EMPHA",label:"EMPHA"},{value:"RENE",label:"RENE"},{value:"CYNO",label:"CYNO"},{value:"ULTIMA SLIM",label:"ULTIMA SLIM"},{value:"ACCESSORIES FOR ULTIMA SLIM",label:"ACCESSORIES FOR ULTIMA SLIM"},{value:"ULTIMA ULTRA SLIM 1x4",label:"ULTIMA ULTRA SLIM 1x4"},{value:"ULTIMA ULTRA SLIM 1x1",label:"ULTIMA ULTRA SLIM 1x1"},{value:"ULTIMA ULTRA PRO (2x2)",label:"ULTIMA ULTRA PRO (2x2)"},{value:"ULTIMA MULTI-COLOUR",label:"ULTIMA MULTI-COLOUR"},{value:"GLAZE",label:"GLAZE"},{value:"GLAZE ULTRA ALUMINIUM",label:"GLAZE ULTRA ALUMINIUM"},{value:"KUBIK SMART",label:"KUBIK SMART"},{value:"KUBIK ULTRA",label:"KUBIK ULTRA"},{value:"T8 RETRO",label:"T8 RETRO"},{value:"T8 RETRO ACCESSSORIES",label:"T8 RETRO ACCESSSORIES"},{value:"PRIDE",label:"PRIDE"},{value:"ORELLI SLIM",label:"ORELLI SLIM"},{value:"ORELLI SLIM HANGING",label:"ORELLI SLIM HANGING"},{value:"INSTARAY SLIM LINEAR WITH LENS",label:"INSTARAY SLIM LINEAR WITH LENS"},{value:"INSTARAY SLIM LINEAR",label:"INSTARAY SLIM LINEAR"},{value:"INSTARAY ROUND SLIM",label:"INSTARAY ROUND SLIM"},{value:"INSTARAY SLIM LINEAR DIFFUSED",label:"INSTARAY SLIM LINEAR DIFFUSED"},{value:"INSTARAY SLIM TILTABLE & DIFFUSED",label:"INSTARAY SLIM TILTABLE & DIFFUSED"},{value:"MAGNETIC TRACK LIGHT ACCESSORIES",label:"MAGNETIC TRACK LIGHT ACCESSORIES"},{value:"MULTIBLE ZOOM LIGHT",label:"MULTIBLE ZOOM LIGHT"},{value:"TRACK LIGHT WHITE",label:"TRACK LIGHT WHITE"},{value:"TRACK LIGHT BLACK",label:"TRACK LIGHT BLACK"},{value:"TRACK LIGHT ACCESSORIES",label:"TRACK LIGHT ACCESSORIES"},{value:"IP20 STRIP LIGHT (24V DC)",label:"IP20 STRIP LIGHT (24V DC)"},{value:"IP65 STRIP LIGHT (24V DC)",label:"IP65 STRIP LIGHT (24V DC)"},{value:"COB STRIP LIGHT",label:"COB STRIP LIGHT"},{value:"POWER SUPPLY FOR IP20 STRIP LIGHT",label:"POWER SUPPLY FOR IP20 STRIP LIGHT"},{value:"POWER SUPPLY FOR IP65 STRIP LIGHT",label:"POWER SUPPLY FOR IP65 STRIP LIGHT"},{value:"BULK HEAD",label:"BULK HEAD"},{value:"PIT LIGHT",label:"PIT LIGHT"},{value:"WELL GLASS",label:"WELL GLASS"},{value:"HIGHBAY (>100 Lm/W)",label:"HIGHBAY (>100 Lm/W)"},{value:"ULTRALITE HIGHBAY (>130 Lm/W)",label:"ULTRALITE HIGHBAY (>130 Lm/W)"}]},Fa=()=>{var ge,he,ve,pe,fe;const{organizationId:c}=Qe(),v=Ze(),[g,E]=n.useState(""),[r,C]=n.useState(""),[L,p]=n.useState(""),[b,f]=n.useState(""),[I,q]=n.useState(""),[P,H]=n.useState(""),[z,Te]=n.useState(""),[V,Re]=n.useState(""),[A,Q]=n.useState("0"),[T,Z]=n.useState("100000"),[Me,le]=n.useState(!1),[R,te]=n.useState(null),[re,G]=n.useState(null),[N,ne]=n.useState(""),k=se(g,500),F=se(A,800),D=se(T,800),{data:M}=ia(c),B=M==null?void 0:M.map(a=>({_id:a._id,projectName:a.projectName})),we=n.useMemo(()=>{var a;return(a=M||[])==null?void 0:a.map(s=>({value:s._id,label:s.projectName}))},[M]);n.useEffect(()=>{B&&B.length>0&&!N&&ne(B[0]._id)},[B,N]);const{data:m,refetch:X}=da({organizationId:c,projectId:N}),oe=ua(),ce=ma(),ie=xa();n.useEffect(()=>{p(""),f("")},[r]);const W=r&&r.toLowerCase()==="light",Y=r&&["switches","socket"].includes(r.toLowerCase()),$=r&&r.toLowerCase()==="regulator",K=!r||r==="",Ue=Y,Oe=W||K;n.useEffect(()=>{W?f(""):Y?(p(""),H("")):$?(f(""),p(""),H("")):K&&f("")},[r]);const Pe=n.useMemo(()=>{const a={search:k,category:r,minMrp:F?Number(F):void 0,maxMrp:D?Number(D):void 0,brand:I,watt:z,itemCode:V};return W||K?{...a,subcategory:L,model:P}:Y?{...a,type:b}:a},[k,r,L,b,P,z,V,F,D,I,W,Y,$,K]),{data:w,isLoading:He,isError:Ge,error:J,fetchNextPage:de,hasNextPage:ee,isFetchingNextPage:ae,refetch:ke}=la(c,Pe),ue=ta(),me=ra(),xe=na(),Fe=a=>{var l;const s=(a==null?void 0:a.specification)||{};if(s!=null&&s.variants&&Array.isArray(s==null?void 0:s.variants)&&((l=s==null?void 0:s.variants)==null?void 0:l.length)>0){const t=s==null?void 0:s.variants[0];return{image:(t==null?void 0:t.image)||null,mrp:(t==null?void 0:t.mrp)||0,itemCode:(t==null?void 0:t.itemCode)||"",color:t.color||"",hasVariants:!0,variants:s==null?void 0:s.variants}}return{image:s.imageUrl||s.image||null,mrp:s.mrp||0,itemCode:s.itemCode||"",color:null,hasVariants:!1,variants:[]}},De=a=>{var s,l,t,i,d,o,h,S,Ie,Ne,Se,je,ye,Le;if((s=a==null?void 0:a.specification)!=null&&s.variants&&((t=(l=a==null?void 0:a.specification)==null?void 0:l.variants)==null?void 0:t.length)>0){const x=(i=a==null?void 0:a.specification)==null?void 0:i.variants[0];return{itemCode:x==null?void 0:x.itemCode,mrp:x==null?void 0:x.mrp,color:x==null?void 0:x.color,image:((d=x.images)==null?void 0:d[0])||x.image,...x,hsn:((o=a==null?void 0:a.specification)==null?void 0:o.HSN)||"",brand:((h=a==null?void 0:a.specification)==null?void 0:h.brand)||"",description:((S=a==null?void 0:a.specification)==null?void 0:S.description)||"",styleType:((Ie=a==null?void 0:a.specification)==null?void 0:Ie.styleType)||"",type:((Ne=a==null?void 0:a.specification)==null?void 0:Ne.type)||"",materialType:((Se=a==null?void 0:a.specification)==null?void 0:Se.materialType)||"",category:((je=a==null?void 0:a.specification)==null?void 0:je.category)||(a==null?void 0:a.category)||"",subcategory:((ye=a==null?void 0:a.specification)==null?void 0:ye.subcategory)||(a==null?void 0:a.subcategory)||"",model:((Le=a==null?void 0:a.specification)==null?void 0:Le.model)||a.model||""}}return a.specification},Be=a=>{var s,l,t,i,d,o;return(s=a==null?void 0:a.specification)!=null&&s.variants&&((t=(l=a==null?void 0:a.specification)==null?void 0:l.variants)==null?void 0:t.length)>0?(d=(i=a==null?void 0:a.specification)==null?void 0:i.variants[0])==null?void 0:d.itemCode:((o=a==null?void 0:a.specification)==null?void 0:o.itemCode)||(a==null?void 0:a.itemCode)},We=a=>{if(!(m!=null&&m.items))return 0;const s=m.items.find(l=>l.productId===a);return s?s.quantity:0},Ye=async a=>{var s,l;if(!N){u({title:"Error",description:"Please select a project first",variant:"destructive"});return}try{const t=De(a);await oe.mutateAsync({organizationId:c,projectId:N,productId:a._id,quantity:1,specification:t}),u({title:"Success",description:"Item added to cart successfully"}),X()}catch(t){u({title:"Error",description:((l=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:l.message)||"Failed to add item to cart",variant:"destructive"})}},be=async(a,s)=>{var l,t,i,d;if(m!=null&&m._id){if(s===0){try{await ie.mutateAsync({cartId:m._id,itemCode:a}),u({title:"Success",description:"Item removed from cart"}),X()}catch(o){u({title:"Error",description:((t=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to remove item from cart",variant:"destructive"})}return}try{await ce.mutateAsync({cartId:m._id,itemCode:a,quantity:s}),u({title:"Success",description:"Cart updated successfully"}),X()}catch(o){u({title:"Error",description:((d=(i=o==null?void 0:o.response)==null?void 0:i.data)==null?void 0:d.message)||"Failed to update cart",variant:"destructive"})}}},Ke=async a=>{try{await ue.mutateAsync({organizationId:c,specification:a}),u({title:"Added",description:"Material inventory added successfully"}),le(!1)}catch(s){G(s.message),u({title:"Error",description:s.message,variant:"destructive"})}},_e=async(a,s)=>{try{await me.mutateAsync({id:a,specification:s}),u({title:"Updated",description:"Material inventory updated successfully"}),te(null)}catch(l){G(l.message),u({title:"Error",description:l.message,variant:"destructive"})}},qe=async a=>{try{await xe.mutateAsync({id:a}),u({title:"Deleted",description:"Material inventory deleted"})}catch(s){G(s.message),u({title:"Error",description:s.message,variant:"destructive"})}},_=n.useRef(null);n.useEffect(()=>{const a=()=>{if(console.log("has next page",ee),!_.current||ae||!ee)return;const l=_.current,{scrollTop:t,scrollHeight:i,clientHeight:d}=l;i>d+50&&t+d>=i-300&&(console.log("Fetching next page..."),de())},s=_.current;if(s)return s.addEventListener("scroll",a),()=>s.removeEventListener("scroll",a)},[de,ae,ee]);const ze=g!==k||A!==F||T!==D;if(location.pathname.includes("single")||location.pathname.includes("cart"))return e.jsx(Xe,{});const Ve=a=>{const s=a.specification||{},l=Fe(a),t=Be(a),i=We(a._id),d=i>0,o=oe.isPending||ce.isPending||ie.isPending;return e.jsxs($e,{className:"mb-4 shadow-xl border border-gray-100",children:[e.jsx(Je,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[l.image&&e.jsx("img",{src:l==null?void 0:l.image,alt:"img",className:"w-16 h-16 object-cover rounded-lg border border-gray-400"}),e.jsxs("div",{children:[e.jsx(ea,{className:"text-lg font-bold text-blue-900",children:U((s==null?void 0:s.subcategory)||s.name||s.model||(s==null?void 0:s.category)||"Unnamed",22)}),e.jsxs(aa,{className:"text-xs text-gray-500 mt-1",children:[(s==null?void 0:s.category)&&e.jsx("span",{className:"mr-2",children:e.jsx(Ee,{children:s.category})}),(s==null?void 0:s.model)&&e.jsxs("span",{className:"mr-2",children:["Model: ",e.jsx("span",{className:"font-semibold",children:U(s.model,14)})]}),l.hasVariants&&l.color&&e.jsx("span",{className:"mr-2",children:e.jsx(Ee,{variant:"secondary",children:l.color})}),(l==null?void 0:l.itemCode)&&e.jsxs("span",{className:"mr-2",children:["Code: ",e.jsx("span",{className:"font-semibold",children:l.itemCode})]}),(s==null?void 0:s.itemCode)&&e.jsxs("span",{className:"mr-2",children:["Code: ",e.jsx("span",{className:"font-semibold",children:s.itemCode})]})]})]})]})}),e.jsxs(sa,{children:[e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-700",children:[Object.entries(s).map(([h,S])=>["image","imageUrl","_id","organizationId","series","cct","mrp","itemCode","variants"].includes(h)||typeof S=="object"||S===void 0||S===null?null:h==="description"?e.jsxs("div",{className:"bg-gray-50 rounded px-2 py-1 border border-gray-100",children:[e.jsxs("span",{className:"font-semibold capitalize",children:[U(h,12),":"]}),S]},h):e.jsxs("div",{className:"bg-gray-50 rounded px-2 py-1 border border-gray-100",children:[e.jsxs("span",{className:"font-semibold capitalize",children:[U(h,12),":"]})," ",U(String(S),18)]},h)),l.hasVariants&&l.variants.length>1&&e.jsxs("div",{className:"bg-blue-50 rounded px-2 py-1 border border-blue-200",children:[e.jsx("span",{className:"font-semibold",children:"Variants:"})," ",l.variants.length," colors available"]}),l.mrp&&e.jsxs("div",{className:"text-blue-700 font-bold ml-auto text-[16px]",children:["₹",l.mrp]})]}),e.jsxs("section",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(j,{size:"sm",variant:"primary",onClick:()=>v(`single/${a._id}`),children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"View"]}),e.jsxs(j,{size:"sm",isLoading:xe.isPending,variant:"danger",onClick:()=>qe(a._id),className:"text-white bg-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]}),e.jsx("div",{className:"flex gap-2 items-center",children:d?e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 rounded-lg p-1 border border-green-200",children:[e.jsx(j,{size:"sm",onClick:()=>be(t,i-1),disabled:o,variant:"danger",className:"w-8 h-8 p-0 bg-red-600 text-white rounded-md shadow-sm",children:e.jsx("i",{className:"fas fa-minus text-sm"})}),e.jsx("span",{className:"w-10 text-center font-bold text-green-700",children:i}),e.jsx(j,{size:"sm",variant:"primary",onClick:()=>be(t,i+1),disabled:o,className:"w-8 h-8 p-0  rounded-md shadow-sm",children:e.jsx("i",{className:"fas fa-plus text-sm"})})]}):e.jsxs(j,{size:"sm",variant:"primary",onClick:()=>Ye(a),isLoading:o,disabled:!N||o,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fas fa-cart-plus mr-1"}),"Add to Cart"]})})]})]})]},a._id)};return e.jsxs("div",{className:"max-h-full overflow-y-auto bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-2",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-list mr-3 text-blue-600"}),"Product Inventory List"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Discover the product that you want for you work here"})]}),e.jsxs("div",{className:"flex gap-2",children:[ze&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[e.jsx("i",{className:"fas fa-clock animate-pulse"}),e.jsx("span",{children:"Updating results..."})]}),e.jsxs("div",{className:"w-full sm:w-64",children:[e.jsx(ga,{children:"Select project for the displaying the cart items"}),e.jsx(ba,{options:we,placeholder:"Select project",searchPlaceholder:"Search projects...",value:N||void 0,onValueChange:a=>ne(a||""),searchBy:"name",displayFormat:"simple",className:"w-full"})]}),e.jsxs(j,{onClick:()=>v("cart"),variant:"primary",className:"relative w-full sm:w-auto",children:[e.jsx("i",{className:"fas fa-shopping-cart text-xl"}),m&&((ge=m.items)==null?void 0:ge.length)>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold",children:m.items.length})]})]})]})})}),e.jsx("div",{className:"px-2 sm:px-4 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsx("div",{className:"xl:w-80 w-full flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-filter mr-2 text-blue-600"}),"Filters"]}),(r||L||P||z||V||A||T||g||b)&&e.jsx("button",{onClick:()=>{C(""),f(""),p(""),H(""),Te(""),Re(""),Z("100000"),Q("0"),E("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear All"})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Search",g!==k&&e.jsx("span",{className:"ml-2 text-xs text-amber-600",children:e.jsx("i",{className:"fas fa-circle animate-pulse"})})]}),e.jsx(y,{placeholder:"Search by Brand, Subcategory, Model, ItemCode...",value:g,onChange:a=>E(a.target.value.trim())})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("select",{value:r,onChange:a=>C(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.categories.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),e.jsx("select",{value:I,onChange:a=>q(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.brand.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),Oe&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory"}),e.jsx("select",{value:L,onChange:a=>p(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.subcategories.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),e.jsx("select",{value:P,onChange:a=>H(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.models.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),Ue&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:b,onChange:a=>f(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Types"}),(he=O.types)==null?void 0:he.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),e.jsx("div",{className:"px-2 mb-3",children:e.jsx(ca,{range:!0,min:0,max:1e5,step:500,value:[Number(A),Number(T)],onChange:a=>{const[s,l]=a;Q(String(s)),Z(String(l))},trackStyle:[{backgroundColor:"#3b82f6",height:6}],handleStyle:[{borderColor:"#3b82f6",backgroundColor:"#fff",boxShadow:"0 2px 6px rgba(59, 130, 246, 0.4)",width:18,height:18,marginTop:-6},{borderColor:"#3b82f6",backgroundColor:"#fff",boxShadow:"0 2px 6px rgba(59, 130, 246, 0.4)",width:18,height:18,marginTop:-6}],railStyle:{backgroundColor:"#e5e7eb",height:6}})}),e.jsxs("div",{className:"flex justify-between items-center gap-2 text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Min"}),e.jsxs("div",{className:"bg-blue-50 px-3 py-2 rounded-lg font-semibold text-blue-700 text-center",children:["₹",Number(A).toLocaleString("en-IN")]})]}),e.jsx("div",{className:"text-gray-400 mt-5",children:"—"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Max"}),e.jsxs("div",{className:"bg-blue-50 px-3 py-2 rounded-lg font-semibold text-blue-700 text-center",children:["₹",Number(T).toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 items-center mt-2",children:[e.jsx(y,{className:"",type:"number",value:A,onChange:a=>Q(a.target.value)}),e.jsx(y,{className:"",type:"number",value:T,onChange:a=>Z(a.target.value)})]})]})]})]})}),e.jsx("div",{className:"flex-1 !max-h-[95vh] overflow-y-auto custom-scrollbar",children:e.jsxs("div",{ref:_,className:"h-full overflow-y-auto custom-scrollbar pr-2",children:[!N&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 rounded-lg p-4 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-3 text-xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Select a project to add items to cart"}),e.jsx("p",{className:"text-sm",children:"Choose a project from the dropdown above to enable cart functionality"})]})]}),re&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-4 mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),re]}),e.jsx("button",{onClick:()=>G(null),className:"ml-4 text-red-400 hover:text-red-700",children:e.jsx("i",{className:"fas fa-times"})})]}),Ge&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-4 mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),(J==null?void 0:J.message)||"Failed to load data"]}),e.jsx("button",{onClick:()=>ke(),className:"ml-4 text-red-400 hover:text-red-700",children:e.jsx("i",{className:"fas fa-redo"})})]}),e.jsxs("div",{className:"max-h-[110%]  pr-2",children:[He?e.jsx(oa,{}):!((ve=w==null?void 0:w.pages)!=null&&ve.length)||!((fe=(pe=w.pages[0])==null?void 0:pe.data)!=null&&fe.length)?e.jsx(ha,{message:"No material inventory found.",icon:"box",color:"gray"}):w.pages.map(a=>a.data.map(Ve)),ae&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-lg text-blue-400"})})]})]})})]})}),(Me||R)&&e.jsx(va,{initialData:R==null?void 0:R.specification,onClose:()=>{le(!1),te(null)},onSubmit:async a=>{R?await _e(R._id,a):await Ke(a)},isLoading:ue.status==="pending"||me.status==="pending"})]})},va=({initialData:c={},onClose:v,onSubmit:g,isLoading:E})=>{const[r,C]=n.useState({name:c.name||"",type:c.type||"",quantity:c.quantity||"",unit:c.unit||"",location:c.location||""}),[L,p]=n.useState(null),b=I=>{C(q=>({...q,[I.target.name]:I.target.value}))},f=async I=>{if(I.preventDefault(),!r.name)return p("Name is required");p(null),await g(r)};return e.jsx("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center",children:e.jsxs("form",{onSubmit:f,className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md space-y-4 relative",children:[e.jsx("button",{type:"button",className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700",onClick:v,children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:c!=null&&c.name?"Edit Material":"Add Material"}),e.jsx(y,{name:"name",placeholder:"Name",value:r.name,onChange:b}),e.jsx(y,{name:"type",placeholder:"Type",value:r.type,onChange:b}),e.jsx(y,{name:"quantity",placeholder:"Quantity",value:r.quantity,onChange:b,type:"number"}),e.jsx(y,{name:"unit",placeholder:"Unit",value:r.unit,onChange:b}),e.jsx(y,{name:"location",placeholder:"Location",value:r.location,onChange:b}),L&&e.jsx("div",{className:"text-red-500 text-sm",children:L}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(j,{type:"button",variant:"secondary",onClick:v,children:"Cancel"}),e.jsx(j,{type:"submit",variant:"primary",isLoading:E,children:"Save"})]})]})})};export{Fa as default};
