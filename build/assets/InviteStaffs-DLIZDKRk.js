import{b as I,d as L,a as z,r as h,j as e}from"./index-e8sHY52i.js";import{S as r}from"./Skeleton-C9CSd2lw.js";import{B as A}from"./Badge-DznRk0uT.js";import{B as t}from"./Button-45UYJ-Fj.js";import{h as O,i as E,j as M}from"./orgApi-MObN4mvE.js";import{t as l}from"./toast-BSC5QTk1.js";import{L as B}from"./Label-BjppT9Cq.js";import{I as F}from"./Input-BH7aLFkl.js";import{A as G,b as P,a as R}from"./Avatar-Bmom2umW.js";import{C as T}from"./constants-swM5MxG6.js";import"./useQuery-CqjHwNP0.js";import"./useMutation-BqjQ-Xv_.js";import"./roleCheck-DbhaipVR.js";const Z=()=>{const{organizationId:o}=I(),{openMobileSidebar:u,isMobile:b}=L(),f=z(),[n,p]=h.useState(""),[g,m]=h.useState(!1),{data:a,isLoading:j,error:v,isError:N}=O(o),w=E(),c=M(),y=async(s,i)=>{if(window.confirm(`Are you sure you want to remove ${i} from this organization?`))try{await w.mutateAsync({staffId:s,orgId:o}),l({title:"Success",description:`${i} has been removed from the organization`})}catch(C){l({title:"Error",description:C.message||"Failed to remove staff member",variant:"destructive"})}},d=async()=>{try{const s=await c.mutateAsync({organizationId:o,role:"staff"});p(s.inviteLink||s),l({title:"Success",description:"Invitation link generated successfully"})}catch(s){l({title:"Error",description:s.message||"Failed to generate invitation link",variant:"destructive"})}},x=async()=>{try{await navigator.clipboard.writeText(n),m(!0),l({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>m(!1),2e3)}catch{l({title:"Error",description:"Failed to copy link",variant:"destructive"})}},k=()=>{const s=`You're invited to join in the organization! Click this link to register: ${n}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(i,"_blank")},S=s=>s.split(" ").map(i=>i[0]).join("").toUpperCase();return j?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(r,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(r,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(r,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(r,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(r,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(r,{className:"h-96 w-full rounded-2xl"})})]})})]}):v||N||!a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(t,{onClick:()=>f("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 lg:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[b&&e.jsx("button",{onClick:u,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"Staff Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),a==null?void 0:a.length," ",(a==null?void 0:a.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh] h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite Staffs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite Staffs to your organization by generating a link."}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{value:n,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(t,{onClick:x,children:e.jsx("i",{className:`fas ${g?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{onClick:k,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(t,{onClick:x,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(t,{onClick:d,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(t,{onClick:d,isLoading:c.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full  !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2 rounded-2xl shadow-lg overflow-y-auto max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Staff Members (",a==null?void 0:a.length,")"]}),a.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No Staffs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:a==null?void 0:a.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(G,{className:"w-12 h-12",children:[e.jsx(P,{src:s.avatarUrl||T.COMPANY_LOGO}),e.jsx(R,{className:"bg-blue-600 text-white",children:S(s.staffName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:s==null?void 0:s.staffName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),s.email]}),s.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),s.phoneNo]}),e.jsx(A,{className:"mt-1 text-blue-800 border-blue-300",children:s.role})]})]}),e.jsxs(t,{variant:"danger",onClick:()=>y(s._id,s.staffName),isLoading:c.isPending,className:"text-white bg-red-600 border border-red-200 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-user-minus mr-1"})," Remove"]})]},s._id))})]})]})]})};export{Z as default};
