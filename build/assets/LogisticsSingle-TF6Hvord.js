import{b as B,u as z,r as S,j as e}from"./index-g9v5L7eS.js";import{b as O,c as U,f as x,L as G}from"./LogisticsShipmentForm-BDXxbo-f.js";import{C as R,a as $}from"./Card-BZ8fgwGK.js";import{S as d}from"./Seperator-Bd4jAce9.js";import{B as q}from"./Badge-C-PUOdTK.js";import{B as w}from"./Button-DXzmpjtA.js";import{t as D}from"./toast-BSC5QTk1.js";import M from"./MaterialOverviewLoading-DtCbU8U1.js";import{I as Q}from"./InfoToolTip-DwbMc9Qo.js";import"./Label-DuBPv0AI.js";import"./Input-BX0V0pOd.js";import"./projectApi-Cv-ayXKU.js";import"./useQuery-BlDIWKCM.js";import"./useMutation-CAsfcLt-.js";import"./roleCheck-vn63l46q.js";import"./Skeleton-1GHmvOlA.js";const t=({label:r,value:n})=>e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[e.jsxs("span",{children:[r,":"]})," ",e.jsx("span",{className:"text-gray-900",children:n||"-"})]}),i=({title:r,children:n})=>e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-700 border-b border-blue-200 pb-1",children:r}),n]}),_=r=>{switch(r){case"pending":return"secondary";case"assigned":return"outline";case"in_transit":case"pickedup":return"default";case"delivered":return"default";case"cancelled":return"secondary";default:return"default"}},de=()=>{var u,j,g,b,h,f,p,v,N,y;const{id:r,organizationId:n}=B(),C=z(),{data:s,isLoading:I,refetch:T}=O(r),{mutateAsync:L,isPending:A}=U(),[P,F]=S.useState(null),[E,m]=S.useState(!1),V=async()=>{var l,o,k;try{await L({fromDept:"logistics",organizationId:n,projectId:s==null?void 0:s.projectId,upiId:(s==null?void 0:s.vehicleDetails.driverUpiId)||null,totalCost:(l=s==null?void 0:s.vehicleDetails)==null?void 0:l.driverCharge}),D({title:"Success",description:"Details sent to Accounts Department"})}catch(c){D({variant:"destructive",title:"Error",description:((k=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:k.message)||(c==null?void 0:c.message)||"operation failed"})}};if(I)return e.jsx(M,{});const a=s==null?void 0:s.vehicleDetails;return s?e.jsxs("div",{className:"max-h-full overflow-y-auto max-w-full space-y-4",children:[e.jsxs("header",{className:"sticky top-0 z-20 bg-white border-b border-gray-200 pb-4 pt-2 mb-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{onClick:()=>C(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:["Shipment: ",(s==null?void 0:s.shipmentNumber)||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsxs("div",{className:"flex items-center space-y-1",children:[e.jsx(w,{variant:"primary",isLoading:A,onClick:V,children:"Send To Accounts Dept"}),e.jsx(Q,{content:"Click the button to send the details to accounts department",type:"info",position:"bottom"})]}),e.jsxs(w,{size:"md",variant:"primary",onClick:()=>{F(s),m(!0)},children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("section",{className:"flex w-full gap-2",children:[e.jsx(R,{className:"w-1/2",children:e.jsxs($,{className:"space-y-8 p-6",children:[e.jsx(i,{title:"Shipment Info",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{label:"Scheduled Date",value:x(s==null?void 0:s.scheduledDate)}),e.jsx(t,{label:"Shipment Status",value:e.jsx(q,{variant:_(s==null?void 0:s.shipmentStatus),children:s==null?void 0:s.shipmentStatus})}),(s==null?void 0:s.trackingId)&&e.jsx(t,{label:"Tracking ID",value:e.jsx("span",{className:"font-mono bg-blue-50 px-2 py-1 rounded text-blue-700",children:s.trackingId})}),(s==null?void 0:s.eta)&&e.jsx(t,{label:"ETA",value:`${s.eta} minutes`})]})}),e.jsx(d,{}),e.jsx(i,{title:"Vehicle Info",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(t,{label:"Vehicle Number",value:a==null?void 0:a.vehicleNumber}),e.jsx(t,{label:"Vehicle Type",value:a==null?void 0:a.vehicleType}),e.jsx(t,{label:"Driver Name",value:(u=a==null?void 0:a.driver)==null?void 0:u.name}),e.jsx(t,{label:"Driver Phone",value:(j=a==null?void 0:a.driver)==null?void 0:j.phone}),e.jsx(t,{label:"License Number",value:(g=a==null?void 0:a.driver)==null?void 0:g.licenseNumber}),e.jsx(t,{label:"Driver Charge",value:`â‚¹ ${a==null?void 0:a.driverCharge}`}),e.jsx(t,{label:"Upi Id",value:a==null?void 0:a.driverUpiId})]})}),e.jsx(d,{}),e.jsx(i,{title:"Origin & Destination",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-600 font-bold mb-1",children:"Origin"}),e.jsx(t,{label:"Address",value:(b=s==null?void 0:s.origin)==null?void 0:b.address}),e.jsx(t,{label:"Contact Person",value:(h=s==null?void 0:s.origin)==null?void 0:h.contactPerson}),e.jsx(t,{label:"Contact Phone",value:(f=s==null?void 0:s.origin)==null?void 0:f.contactPhone})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-600 font-bold mb-1",children:"Destination"}),e.jsx(t,{label:"Address",value:(p=s==null?void 0:s.destination)==null?void 0:p.address}),e.jsx(t,{label:"Contact Person",value:(v=s==null?void 0:s.destination)==null?void 0:v.contactPerson}),e.jsx(t,{label:"Contact Phone",value:(N=s==null?void 0:s.destination)==null?void 0:N.contactPhone})]})]})}),e.jsx(d,{}),e.jsx(i,{title:"Timing Schedule",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(t,{label:"Actual Pickup Time",value:x(s==null?void 0:s.actualPickupTime)}),e.jsx(t,{label:"Actual Delivery Time",value:x(s==null?void 0:s.actualDeliveryTime)})]})}),((y=s==null?void 0:s.items)==null?void 0:y.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(i,{title:"Shipment Items",children:e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-sm font-semibold text-gray-700",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Item Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Quantity"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:s.items.map((l,o)=>e.jsxs("tr",{className:"text-sm text-gray-800",children:[e.jsx("td",{className:"px-4 py-2",children:l==null?void 0:l.name}),e.jsx("td",{className:"px-4 py-2",children:l==null?void 0:l.quantity})]},o))})]})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(i,{title:"Tracking Link",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.trackingLink||"No Tracking link provided"})})]}),e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(i,{title:"Notes",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.notes||"No Notes"})})]})]})}),e.jsx("div",{className:"flex-1 w-1/2",children:s.trackingLink?e.jsx("iframe",{src:s.trackingLink,width:"100%",height:"600px"}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center py-12 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-300",children:e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-location text-5xl text-slate-300 mb-4 animate-pulse"}),e.jsx("h4",{className:"text-lg font-semibold text-slate-700",children:"Track the Vehicle by pasting the link"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"paste the porter or rapido tracking link by clicking edit option"}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-slate-400",children:[e.jsx("div",{className:"h-2 w-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0s"}}),e.jsx("div",{className:"h-2 w-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"h-2 w-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})]})})})})]}),E&&e.jsx(G,{shipment:P,onClose:()=>{m(!1),T()},organizationId:n})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white rounded-xl text-center p-6",children:[e.jsx("i",{className:"fas fa-dolly text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Shipment Found"})]})};export{de as default};
