import{f as s,b as i,h as c,s as f,i as u}from"./index-BAM0eJUz.js";const d=async({api:r,organizationId:o,id:t})=>{const{data:e}=await r.get(`quote/quotegenerate/getquotesingle/${o}/${t}`);if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},q=async({api:r,organizationId:o,filters:t})=>{const{data:e}=await r.get(`quote/quotegenerate/getquotes/${o}`,{params:t});if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},g=async({api:r,projectId:o})=>{const{data:t}=await r.get(`quote/quotegenerate/getquotepdf/quote/${o}`);if(!t.ok)throw new Error((t==null?void 0:t.message)||"Failed to fetch materials");return t.data},y=async({api:r,id:o})=>{const{data:t}=await r.delete(`quote/quotegenerate/deletequote/${o}`);if(!t.ok)throw new Error((t==null?void 0:t.message)||"Failed to delete materials");return t.data},m=async({api:r,quoteId:o,data:t})=>{var a;const e=await r.post(`quote/quotegenerate/generatepdf/${o}/create`,t);if(console.log("res form api",e.data),!(e!=null&&e.data.ok))throw new Error(((a=e==null?void 0:e.data)==null?void 0:a.message)||"Failed to delete materials");return e==null?void 0:e.data.data},h=async({api:r,quoteId:o,type:t,projectId:e,isBlurred:a,quoteType:w})=>{var l;const n=await r.put(`quote/quotegenerate/clientquote/generatepdf/${e}/${o}`,{type:t,isBlurred:a,quoteType:w});if(console.log("res form api",n.data),!(n!=null&&n.data.ok))throw new Error(((l=n==null?void 0:n.data)==null?void 0:l.message)||"Failed to generate pdf");return n==null?void 0:n.data.data},E=async({api:r,quoteId:o})=>{var e;const t=await r.post(`quote/quotegenerate/extract/createordermaterial/${o}`);if(!(t!=null&&t.data.ok))throw new Error(((e=t==null?void 0:t.data)==null?void 0:e.message)||"Failed to generate pdf");return t==null?void 0:t.data.data},Q=(r,o)=>{const t=["owner","staff","CTO"],{role:e}=s(),a=u(e);return i({queryKey:["quote-variant-single",r,o],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return await d({api:a,organizationId:r,id:o})},enabled:!!r})},P=(r,o)=>{const t=["owner","staff","CTO"],{role:e}=s(),a=u(e);return i({queryKey:["quote-material-items",r,o],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return await q({api:a,organizationId:r,filters:o})},enabled:!!r})},C=r=>{const o=["owner","staff","CTO"],{role:t}=s(),e=u(t);return i({queryKey:["quote-pdfs",r],queryFn:async()=>{if(!t||!o.includes(t))throw new Error("Not allowed to create quotes");if(!e)throw new Error("API instance for role not found");return await g({api:e,projectId:r})},enabled:!!r})},p=async({api:r,organizationId:o,categoryName:t})=>{const{data:e}=await r.get(`quote/quotegenerate/getmaterials/${o}/${t}`);if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},$=(r,o)=>{const t=["owner","staff","CTO"],{role:e}=s(),a=u(e);return i({queryKey:["quote-brand",r,o],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return await p({api:a,organizationId:r,categoryName:o})},enabled:!!r})},O=()=>{const r=["owner","staff","CTO"],{role:o}=s(),t=u(o);return c({mutationFn:async({id:e})=>{if(!o||!r.includes(o))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await y({api:t,id:e})},onSuccess:(e,{organizationId:a})=>{f.invalidateQueries({queryKey:["quote-material-items",a]})}})},R=()=>{const r=["owner","staff","CTO"],{role:o}=s(),t=u(o);return c({mutationFn:async({quoteId:e,data:a})=>{if(!o||!r.includes(o))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await m({api:t,quoteId:e,data:a})},onSuccess:(e,{organizationId:a})=>{f.invalidateQueries({queryKey:["quote-material-items",a]})}})},A=()=>{const r=["owner","staff","CTO"],{role:o}=s(),t=u(o);return c({mutationFn:async({quoteId:e,projectId:a,type:w,isBlurred:n,quoteType:l})=>{if(!o||!r.includes(o))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await h({api:t,quoteId:e,projectId:a,type:w,isBlurred:n,quoteType:l})}})},M=()=>{const r=["owner","staff","CTO"],{role:o}=s(),t=u(o);return c({mutationFn:async({quoteId:e})=>{if(!o||!r.includes(o))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await E({api:t,quoteId:e})}})};export{A as a,M as b,C as c,Q as d,R as e,O as f,p as g,P as h,$ as u};
