import{u as f}from"./useQuery-C1eLZ9CZ.js";import{u as d}from"./useMutation-Dbtyr3lY.js";import{u as m}from"./useInfiniteQuery-vrH4x_Ex.js";import{u as a,q as i}from"./index-ImEMNTCY.js";import{g as s}from"./roleCheck-CTzQsMpA.js";const g=async({payload:t,api:n})=>{const e=new FormData,{files:r,phone:w,...p}=t;Object.entries(p).forEach(([u,l])=>{l!=null&&e.append(u,String(l))}),w&&e.append("phone",JSON.stringify(w)),r&&r.length>0&&r.forEach(u=>{e.append("files",u)});const{data:c}=await n.post("/department/accounting/vendor/createvendor",e,{headers:{"Content-Type":"multipart/form-data"}});if(!c.ok)throw new Error(c.message);return c.data},y=async({params:t,api:n})=>{const{data:e}=await n.get("/department/accounting/vendor/getallvendor",{params:t});if(!e.ok)throw new Error(e.message);return e},h=async({VendorId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/vendor/singlevendor/${t}`);if(!e.ok)throw new Error(e.message);return e.data},v=async({organizationId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/vendor/getallvendorname/${t}`);if(!e.ok)throw new Error(e.message);return e.data},P=async({vendorId:t,payload:n,api:e})=>{const{data:r}=await e.put(`/department/accounting/vendor/updatevendor/${t}`,n);if(!r.ok)throw new Error(r.message);return r.data},E=async({api:t,formData:n,id:e})=>(await t.put(`/department/accounting/vendor/updatevendor/${e}/document`,n,{headers:{"Content-Type":"multipart/form-data"}})).data,A=async({VendorId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/vendor/deletevendor/${t}`);if(!e.ok)throw new Error(e.message)},o=["owner","staff","CTO"],V=()=>{const{role:t}=a(),n=s(t);return d({mutationFn:async e=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await g({payload:e,api:n})},onSuccess:(e,r)=>{i.invalidateQueries({queryKey:["vendors","list",r.organizationId]}),i.invalidateQueries({queryKey:["vendors","list",r.organizationId,r.projectId]})}})},N=t=>{const{role:n}=a(),e=s(n);return m({queryKey:["vendors","list",t.organizationId,t.search,t.sortBy,t.sortOrder,t.createdFromDate,t.createdToDate],queryFn:async({pageParam:r=1})=>{if(!n||!o.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await y({params:{...t,page:r},api:e})},getNextPageParam:r=>{if(r.pagination.hasNextPage)return r.pagination.currentPage+1},getPreviousPageParam:r=>{if(r.pagination.hasPrevPage)return r.pagination.currentPage-1},initialPageParam:1,enabled:!!n&&o.includes(n)&&!!t.organizationId})},K=(t,n=!0)=>{const{role:e}=a(),r=s(e);return f({queryKey:["vendors","single",t],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await h({VendorId:t,api:r})},enabled:n&&!!e&&o.includes(e)&&!!t})},Q=(t,n=!0)=>{const{role:e}=a(),r=s(e);return f({queryKey:["allvendorsname",t],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await v({organizationId:t,api:r})},enabled:n&&!!e&&o.includes(e)&&!!t})},C=()=>{const{role:t}=a(),n=s(t);return d({mutationFn:async({vendorId:e,payload:r})=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await P({vendorId:e,payload:r,api:n})},onSuccess:e=>{i.invalidateQueries({queryKey:["vendors","single",e.vendorId]}),i.invalidateQueries({queryKey:["vendors","list"]})}})},O=()=>{const{role:t}=a(),n=s(t);return d({mutationFn:async({id:e,formData:r})=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await E({id:e,formData:r,api:n})}})},S=()=>{const{role:t}=a(),n=s(t);return d({mutationFn:async e=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await A({VendorId:e,api:n})},onSuccess:()=>{i.invalidateQueries({queryKey:["vendors","list"]})}})};export{N as a,S as b,K as c,C as d,O as e,V as f,Q as u};
