import{u as c}from"./useQuery-Cc7pLKfK.js";import{u}from"./useMutation-7YLqc7VE.js";import{u as l}from"./useInfiniteQuery-DQF0m-E9.js";import{u as n,q as i}from"./index-By5P0A7l.js";import{g as a}from"./roleCheck-YGaMnK_P.js";const w=async(t,o)=>{const{data:e}=await o.post("/toolmaster/create",t);if(!e.ok)throw new Error(e.message);return e.data},d=async({id:t,updateData:o,api:e})=>{const{data:r}=await e.patch(`/toolmaster/updatecontent/${t}`,o);if(!r.ok)throw new Error(r.message);return r.data},m=async({id:t,formData:o,api:e})=>{const{data:r}=await e.patch(`/toolmaster/updateimages/${t}`,o);if(!r.ok)throw new Error(r.message);return r.data},f=async({params:t,api:o})=>{const{data:e}=await o.get("/toolmaster/getall",{params:t});if(!e.ok)throw new Error(e.message);return e},y=async(t,o)=>{const{data:e}=await o.get(`/toolmaster/get/${t}`);if(!e.ok)throw new Error(e.message);return e.data},p=async(t,o)=>{const{data:e}=await o.delete(`/toolmaster/delete/${t}`);if(!e.ok)throw new Error(e.message);return e},s=["owner","staff","CTO"],I=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async e=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await w(e,o)},onSuccess:()=>{i.invalidateQueries({queryKey:["toolmaster"]})}})},q=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async({id:e,updateData:r})=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await d({id:e,updateData:r,api:o})},onSuccess:(e,{id:r})=>{i.invalidateQueries({queryKey:["toolmaster"]}),i.invalidateQueries({queryKey:["toolmaster",r]})}})},P=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async({id:e,formData:r})=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await m({id:e,formData:r,api:o})},onSuccess:(e,{id:r})=>{i.invalidateQueries({queryKey:["toolmaster",r]})}})},U=t=>{const{role:o}=n(),e=a(o);return l({queryKey:["toolmaster","all",t],queryFn:async({pageParam:r=1})=>{if(!o||!s.includes(o))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await f({params:{...t,page:r,limit:10},api:e})},getNextPageParam:r=>{if(r.currentPage<r.totalPages)return r.currentPage+1},initialPageParam:1,enabled:!!o&&!!e})},F=t=>{const{role:o}=n(),e=a(o);return c({queryKey:["toolmaster",t],queryFn:async()=>{if(!o||!s.includes(o))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await y(t,e)},enabled:!!t&&!!o&&!!e})},K=()=>{const{role:t}=n(),o=a(t);return u({mutationFn:async e=>{if(!t||!s.includes(t))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await p(e,o)},onSuccess:()=>{i.invalidateQueries({queryKey:["toolmaster"]})}})};export{K as a,F as b,q as c,P as d,I as e,U as u};
