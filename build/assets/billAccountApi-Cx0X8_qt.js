import{c as w,q as p}from"./index-C2yypHlC.js";import{g as f}from"./roleCheck-ZvNAcsbM.js";import{u as g}from"./useQuery-CXWUgeEV.js";import{u as d}from"./useMutation-5BwurMj6.js";import{u as m}from"./useInfiniteQuery-BGm1jTd_.js";const y=async({organizationId:n,vendorId:t,page:e,limit:a,date:l,search:s,sortBy:c,sortOrder:u,api:i})=>{const r=new URLSearchParams;n&&r.append("organizationId",n),t&&r.append("vendorId",t),e&&r.append("page",e.toString()),a&&r.append("limit",a.toString()),l&&r.append("date",l),c&&r.append("sortBy",c),u&&r.append("sortOrder",u),s&&r.append("search",s);const{data:o}=await i.get(`/department/accounting/bill/getallbill?${r.toString()}`);if(!o.ok)throw new Error(o.message);return o},h=async({billData:n,api:t})=>{const{data:e}=await t.post("/department/accounting/bill/createbill",n);if(!e.ok)throw new Error(e.message);return e.data},P=async({billId:n,api:t})=>{const{data:e}=await t.delete(`/department/accounting/bill/deletebill/${n}`);if(!e.ok)throw new Error(e.message);return e.data},b=async({billId:n,api:t})=>{const{data:e}=await t.get(`/department/accounting/bill/getsinglebill/${n}`);if(!e.ok)throw new Error(e.message);return e.data},B=({organizationId:n,vendorId:t,limit:e=10,search:a,date:l,sortBy:s,sortOrder:c})=>{const u=["owner","staff","CTO"],{role:i}=w(),r=f(i);return m({queryKey:["bills",n,t,e,l,a,s,c],queryFn:async({pageParam:o=1})=>{if(!i||!u.includes(i))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await y({organizationId:n,vendorId:t,page:o,limit:e,date:l,search:a,sortBy:s,sortOrder:c,api:r})},getNextPageParam:o=>{if(o.pagination.page<o.pagination.totalPages)return o.pagination.page+1},getPreviousPageParam:o=>{if(o.pagination.page>1)return o.pagination.page-1},initialPageParam:1,enabled:!!i&&u.includes(i)&&!!n})},R=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=f(t);return d({mutationFn:async({billData:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await h({billData:a,api:e})},onSuccess:()=>{p.invalidateQueries({queryKey:["bills"]})}})},C=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=f(t);return d({mutationFn:async({billId:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await P({billId:a,api:e})},onSuccess:()=>{p.invalidateQueries({queryKey:["bills"]})}})},F=n=>{const t=["owner","staff","CTO"],{role:e}=w(),a=f(e);return g({queryKey:["bill",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await b({billId:n,api:a})},enabled:!!n&&!!e&&t.includes(e)})};export{C as a,F as b,R as c,B as u};
