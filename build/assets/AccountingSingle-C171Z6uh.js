import{u as C,a as D,r as h,j as e,M as w,B as d,C as S,g as I,t as j}from"./index-sOEqqOOm.js";import{I as o}from"./Input-BLVPl92q.js";import{b as k,c as E}from"./accountingApi-DamzCI2n.js";const M=()=>{var x,u,g,p;const{id:m}=C(),{data:s,isLoading:v}=k(m),{mutateAsync:f}=E(),y=D(),[n,r]=h.useState(s||{}),[l,c]=h.useState(!1),N=async()=>{var t,a;try{await f({id:m,payload:n}),j({title:"success",description:"shipment has generated"}),c(!1)}catch(i){j({title:"Error",description:((a=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:a.message)||"Operation Failed",variant:"destructive"})}},b=()=>{var t,a;s&&r({transactionType:s.transactionType,fromDept:s.fromDept,totalAmount:{amount:((t=s.totalAmount)==null?void 0:t.amount)??0,taxAmount:((a=s.totalAmount)==null?void 0:a.taxAmount)??0},upiId:s==null?void 0:s.upiId,status:s.status,dueDate:s.dueDate?new Date(s.dueDate).toISOString().split("T")[0]:"",notes:s.notes??""})},A=()=>{l||b(),c(t=>!t)};return v?e.jsx("p",{className:"p-6",children:e.jsx(w,{})}):e.jsxs("div",{className:"p-4 max-h-full overflow-y-auto max-w-full space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-4",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{onClick:()=>y(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-center w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:["Transaction: ",(s==null?void 0:s.transactionNumber)??"N/A"]})]}),!l&&e.jsxs(d,{size:"md",variant:"primary",onClick:A,children:[e.jsx("i",{className:"fas fa-edit mr-1"}),l?"Cancel":"Edit"]})]}),e.jsx(S,{children:e.jsxs(I,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Amount"}),l?e.jsx(o,{value:(x=n==null?void 0:n.totalAmount)==null?void 0:x.amount,type:"number",onChange:t=>{const a=+t.target.value;a>=0&&r(i=>({...i,totalAmount:{...i.totalAmount,amount:a||0}}))}}):e.jsxs("p",{className:"text-lg text-gray-900 font-medium",children:["₹ ",(u=s==null?void 0:s.totalAmount)==null?void 0:u.amount]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Tax"}),l?e.jsx(o,{value:(g=n==null?void 0:n.totalAmount)==null?void 0:g.taxAmount,type:"number",onChange:t=>{const a=+t.target.value;a>=0&&r(i=>({...i,totalAmount:{...i.totalAmount,taxAmount:a||0}}))}}):e.jsxs("p",{className:"text-lg text-gray-900 font-medium",children:["₹ ",(p=s==null?void 0:s.totalAmount)==null?void 0:p.taxAmount]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Upi ID"}),l?e.jsx(o,{value:n.upiId,type:"text",onChange:t=>r(a=>({...a,upiId:t.target.value}))}):e.jsx("p",{className:"text-lg text-gray-800",children:(s==null?void 0:s.upiId)||"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Status"}),l?e.jsxs("select",{value:n.status,onChange:t=>r(a=>({...a,status:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}):e.jsx("p",{className:"text-sm font-medium text-blue-700 capitalize",children:s.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Due Date"}),l?e.jsx(o,{value:n==null?void 0:n.dueDate,type:"date",onChange:t=>r(a=>({...a,dueDate:t.target.value}))}):e.jsx("p",{className:"text-sm text-gray-800",children:s!=null&&s.dueDate?new Date(s==null?void 0:s.dueDate).toLocaleDateString():"-"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Notes"}),l?e.jsx("textarea",{className:"w-full px-3 py-2 border rounded-lg",value:n.notes||"",onChange:t=>r(a=>({...a,notes:t.target.value}))}):e.jsx("p",{className:"text-sm text-gray-800",children:s.notes||"-"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block font-medium text-gray-700",children:"From Department"}),e.jsx("span",{className:"text-gray-800 capitalize",children:(s==null?void 0:s.fromDept)||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-medium text-gray-700",children:"Paid At"}),e.jsx("span",{className:"text-gray-800",children:s!=null&&s.paidAt?new Date(s==null?void 0:s.paidAt).toLocaleString():"-"})]})]}),l&&e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(d,{onClick:N,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save Changes"]}),e.jsxs(d,{variant:"secondary",onClick:()=>c(!1),children:[e.jsx("i",{className:"fas fa-save mr-1"}),"  Cancel"]})]})]})})]})};export{M as default};
