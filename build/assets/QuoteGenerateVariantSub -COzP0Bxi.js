import{r as l,j as e,u as ie,d as de,N as xe,R as me,B as ue,C as Z,M as pe,t as ae}from"./index-BbUIXOOD.js";import{a as he,b as ne,c as ge}from"./quoteVariantApi-CoNtxHsg.js";import{N as fe}from"./constants-DTyOAfyo.js";import{d as Ne}from"./downloadFile-B3lnAwEb.js";const ee=({options:s,placeholder:B="Select an option",searchPlaceholder:R="Search...",onSelect:p,selectedValue:y,className:L=""})=>{const[W,w]=l.useState(!1),[C,S]=l.useState(""),[q,x]=l.useState(null),v=l.useRef(null),g=s.filter(m=>m.toLowerCase().includes(C.toLowerCase()));l.useEffect(()=>{const m=P=>{v.current&&!v.current.contains(P.target)&&w(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),l.useEffect(()=>{if(y){const m=s.find(P=>P===y);x(m||null)}else x(null)},[y,s]);const A=m=>{x(m),p(m),w(!1),S("")},D=()=>{w(!0),S("")},_=m=>{S(m.target.value)};return e.jsxs("div",{className:`relative ${L}`,ref:v,children:[e.jsxs("div",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white cursor-pointer hover:border-gray-400 transition-colors",onClick:D,children:[q?e.jsx("span",{className:"text-gray-800",children:q}):e.jsx("span",{className:"text-gray-500",children:B}),e.jsx("span",{className:"absolute right-3 top-3 text-gray-400",children:"▼"})]}),W&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{type:"text",placeholder:R,value:C,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),e.jsx("div",{className:"py-1",children:g.length>0?g.map(m=>e.jsx("div",{className:`px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors ${q===m?"bg-blue-50 text-blue-600":""}`,onClick:()=>A(m),children:m},m)):e.jsx("div",{className:"px-4 py-2 text-gray-500 text-center",children:"No options found"})})]})]})},H=(s,B,R)=>{const p=String(s).toLowerCase().replace("mm","").trim(),y=B.find(L=>String(L.thickness).toLowerCase().replace("mm","").trim()===p);return(y==null?void 0:y.rs)!==void 0?y.rs:R==="laminate"?je:0},be=l.forwardRef(({data:s,index:B,brandOptions:R,laminateBrandOptions:p,laminateRatesByBrand:y,brandRatesByName:L,labourCost:W,selectedBrand:w,selectedLaminateBrand:C,onFurnitureChange:S},q)=>{var u,k;const[x,v]=l.useState(null),[g,A]=l.useState(null),D=x?L[x]||[]:[],_=g?y[g]||[]:[],m=l.useRef(C),P=l.useRef(w),[o,F]=l.useState((s==null?void 0:s.coreMaterials)||[]);l.useEffect(()=>{F((s==null?void 0:s.coreMaterials)||[])},[s==null?void 0:s.coreMaterials]),l.useEffect(()=>{P.current!==w&&(v(w),P.current=w)},[w]),l.useEffect(()=>{m.current!==C&&(A(C),m.current=C)},[C]),l.useEffect(()=>{!x&&(R==null?void 0:R.length)>0&&v(R[0])},[R]),l.useEffect(()=>{!g&&(p==null?void 0:p.length)>0&&A(p[0])},[p]);const te=()=>{let a=0;const f=x?L[x]||[]:[],M=g?y[g]||[]:[],j=o,d=j[0],N=((d==null?void 0:d.carpenters)||0)*((d==null?void 0:d.days)||0)*1300,I=j.length>0?N/j.length:0;for(const b of j){const G=H(b.plywoodNos.thickness,f,"plywood"),ce=H(b.laminateNos.thickness,M,"laminate"),le=b.plywoodNos.quantity*32*G,oe=b.laminateNos.quantity*32*ce;a+=le+oe+I}const h=b=>(b.quantity||0)*(b.cost||0),T=b=>b.cost||0,E=s.fittingsAndAccessories.reduce((b,G)=>b+h(G),0),X=s.glues.reduce((b,G)=>b+T(G),0),Y=s.nonBrandMaterials.reduce((b,G)=>b+h(G),0);return a+=E+X+Y,Math.round(a)},Q=(t,r)=>{if(!g&&!g)return t.rowTotal||0;const f=H(t.plywoodNos.thickness,D,"plywood"),M=H(t.laminateNos.thickness,_,"laminate");console.log("ply Rate",f),console.log("lami Rate",M);const j=32,d=t.plywoodNos.quantity*(f*j),N=t.laminateNos.quantity*(M*j);console.log("plyCost",d),console.log("lamiCost",N);const I=d+N;console.log("baseMaterialCost",I);const h=I*(t.profitOnMaterial/100);console.log("profitOnMaterial",h);const T=r.length,E=r[0],b=E.carpenters*E.days*W*(1+(E.profitOnLabour||0)/100)/T,G=I+h+b;return Math.round(G)},V=t=>t.quantity*t.cost,U=t=>t.cost,O=o.reduce((t,r)=>t+Q(r,o),0),z=s.fittingsAndAccessories.reduce((t,r)=>t+V(r),0),$=s.glues.reduce((t,r)=>t+U(r),0),J=s.nonBrandMaterials.reduce((t,r)=>t+V(r),0),se=O+z+$+J;l.useImperativeHandle(q,()=>({getUpdatedFurniture:()=>{const r=o.map(d=>({...d,rowTotal:Q(d,o)})).reduce((d,N)=>d+(N.rowTotal||0),0),a=s.fittingsAndAccessories.reduce((d,N)=>d+(N.quantity||0)*(N.cost||0),0),f=s.glues.reduce((d,N)=>d+(N.cost||0),0),M=s.nonBrandMaterials.reduce((d,N)=>d+(N.quantity||0)*(N.cost||0),0),j=r+a+f+M;return{furnitureName:s.furnitureName,plywoodBrand:x,laminateBrand:g,coreMaterials:o.map(d=>({...d,rowTotal:Q(d,o)})),fittingsAndAccessories:s.fittingsAndAccessories,glues:s.glues,nonBrandMaterials:s.nonBrandMaterials,coreMaterialsTotal:r,fittingsAndAccessoriesTotal:a,gluesTotal:f,nonBrandMaterialsTotal:M,furnitureTotal:j,totals:{core:r,fittings:a,glues:f,nbms:M,furnitureTotal:j}}}}));const re=(t,r)=>{const a=[...o];a[t]={...a[t],profitOnMaterial:r||0},F(a),S==null||S()},K=t=>{if(!o[0])return;const r=[...o];r[0]={...r[0],profitOnLabour:t||0},F(r),S==null||S()};l.useEffect(()=>{S==null||S()},[x,g,o,s.fittingsAndAccessories,s.glues]);const i=()=>e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold text-md text-gray-800 mb-2",children:["Core Materials (Total: ₹",O.toLocaleString("en-IN"),")"]}),e.jsx("div",{className:"overflow-x-auto rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsxs("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plywood"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Laminate"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Carpenters / Day"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Days"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Material"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Labour"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"})]})]}),e.jsx("tbody",{children:(o==null?void 0:o.length)>0&&(o==null?void 0:o.map((t,r)=>{var f,M,j,d,N,I,h,T;const a=Q(t,o);return e.jsxs("tr",{className:"group border",children:[r===0&&e.jsx("td",{rowSpan:(f=s==null?void 0:s.coreMaterials)==null?void 0:f.length,className:"text-center border-r-1 p-2",children:t!=null&&t.imageUrl?e.jsx("img",{src:(t==null?void 0:t.imageUrl)||fe,className:"h-10 mx-auto"}):e.jsx(e.Fragment,{children:"—"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(t==null?void 0:t.itemName)||"—"}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((M=t==null?void 0:t.plywoodNos)==null?void 0:M.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((j=t==null?void 0:t.plywoodNos)==null?void 0:j.thickness)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((d=t==null?void 0:t.laminateNos)==null?void 0:d.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((N=t==null?void 0:t.laminateNos)==null?void 0:N.thickness)??0}),r===0&&e.jsxs(e.Fragment,{children:[e.jsx("td",{rowSpan:(I=s==null?void 0:s.coreMaterials)==null?void 0:I.length,className:"text-center border-r-1 p-2",children:(t==null?void 0:t.carpenters)||0}),e.jsx("td",{rowSpan:(h=s==null?void 0:s.coreMaterials)==null?void 0:h.length,className:"text-center border-r-1 p-2",children:(t==null?void 0:t.days)||0})]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:o[r].profitOnMaterial,onChange:E=>re(r,parseFloat(E.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),r===0&&e.jsx("td",{rowSpan:(T=s==null?void 0:s.coreMaterials)==null?void 0:T.length,className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:o[0].profitOnLabour,onChange:E=>K(parseFloat(E.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(t==null?void 0:t.remarks)||"—"}),e.jsxs("td",{className:"text-center border-r-1 p-2 text-green-700 font-bold",children:["₹",a==null?void 0:a.toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:"—"})]},r)}))})]})})]}),n=t=>t==="Fittings & Accessories"?z:t==="Glues"?$:t==="Non-Branded Materials"?J:0,c=(t,r)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2 text-gray-800",children:[t,"(Total: ₹",n(t).toLocaleString("en-IN"),")"]}),e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsx("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:r.length>0&&r.map((a,f)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.itemName)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.description)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.quantity)||0}),e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.cost)||0}),t==="Fittings & Accessories"||t==="Non-Branded Materials"?e.jsxs("td",{className:"text-center border p-2 text-green-700 font-bold",children:["₹",V(a).toLocaleString("en-IN")]}):e.jsxs("td",{className:"text-center border p-2 text-green-700 font-bold",children:["₹",U(a).toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border p-2",children:"—"})]},f))})]})]});return e.jsxs("div",{className:"shadow-md p-4 my-4 border rounded-lg bg-white",children:[e.jsxs("div",{className:" flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold  text-blue-600",children:["Product ",B+1,": ",s.furnitureName]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-right text-xl font-bold text-green-700",children:["Product Total: ₹",se.toLocaleString("en-IN")]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Raw Cost (no profit)"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-700",children:["₹",te().toLocaleString("en-IN")]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Plwyood Brand:"}),e.jsx(ee,{options:R,placeholder:"-- Choose Plwyood Brand --",searchPlaceholder:"Search Plywood brands...",onSelect:v,selectedValue:x||"",className:"mt-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Laminate Brand:"}),e.jsx(ee,{options:p,placeholder:"-- Choose Laminate Brand --",searchPlaceholder:"Search laminate brands...",onSelect:A,selectedValue:g||"",className:"mt-1"})]})]}),e.jsxs("div",{children:[x&&((u=L[x])==null?void 0:u.length)>0&&e.jsxs("div",{className:"mt-6 border border-gray-200 bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Available Thickness & Rates for ",e.jsx("span",{className:"text-blue-600",children:x})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left border border-gray-100",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:L[x].map((t,r)=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-r text-gray-700 font-medium",children:t.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",t.rs.toFixed(2)]})]},r))})]})})]}),g&&((k=y[g])==null?void 0:k.length)>0&&e.jsxs("div",{className:"mt-4 border bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Laminate Rates for ",e.jsx("span",{className:"text-blue-600",children:g})]}),e.jsxs("table",{className:"min-w-full text-sm border",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:y[g].map((t,r)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2 border-r font-medium",children:t.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",t.rs.toFixed(2)]})]},r))})]})]})]})]}),i(),c("Fittings & Accessories",s.fittingsAndAccessories),c("Glues",s.glues),c("Non-Branded Materials",s.nonBrandMaterials)]})}),je=10,we=()=>{var K;const{organizationId:s,quoteId:B}=ie(),R=de(),{data:p,isLoading:y}=he(s,B);let{data:L,isLoading:W}=ne(s,"plywood"),{data:w}=ne(s,"Laminate"),{data:C=0}=xe(s);const{mutateAsync:S,isPending:q}=ge(),x=l.useRef([]),[v,g]=l.useState(null),[A,D]=l.useState(null),_=l.useMemo(()=>{if(!L)return{};const i={};return L.forEach(n=>{const c=(n==null?void 0:n.data)||{},u=c.Brand??c.brand,k=c["thickness (mm)"]||c.thickness||c.Thickness;let t=c.Rs||c.rs;if(u&&k&&t){const r=String(u).trim(),a=String(k).trim(),f=parseFloat(t);i[r]||(i[r]=[]),i[r].push({thickness:a,rs:f})}}),i},[L]),m=l.useMemo(()=>Object.keys(_),[_]),P=l.useMemo(()=>{if(!w)return{};const i={};return w.forEach(n=>{const c=(n==null?void 0:n.data)||{},u=c.Brand??c.brand,k=c["thickness (mm)"]||c.thickness||c.Thickness,t=c.Rs||c.rs;if(u&&k&&t){const r=String(u).trim(),a=String(k).trim(),f=parseFloat(t);i[r]||(i[r]=[]),i[r].push({thickness:a,rs:f})}}),i},[w]),o=l.useMemo(()=>Object.keys(P),[P]),[F,te]=l.useState([]),[Q,V]=l.useState(0),[U,O]=l.useState(0),z=()=>{const i=x.current.map(c=>c.current).filter(c=>c!==null).map(c=>c.getUpdatedFurniture());console.log("updatedFurnitures",i);const n=i.reduce((c,u)=>c+u.totals.furnitureTotal,0);console.log("total",n),V(n),O(se())},{profitDifference:$,profitPercentage:J}=l.useMemo(()=>{const i=Q-U,n=U>0?i/U*100:0;return{profitDifference:Math.round(i),profitPercentage:n}},[Q,U]),se=()=>{const i=x.current.map(u=>u.current).filter(u=>u!==null).map(u=>u.getUpdatedFurniture()),n=32;let c=0;return i.forEach(u=>{const k=u.plywoodBrand?_[u.plywoodBrand]||[]:[],t=u.laminateBrand?P[u.laminateBrand]||[]:[],r=u.coreMaterials,a=r[0],f=((a==null?void 0:a.carpenters)||0)*((a==null?void 0:a.days)||0)*C,M=r.length>0?f/r.length:0;r.forEach(h=>{const T=H(h.plywoodNos.thickness,k,"plywood"),E=H(h.laminateNos.thickness,t,"laminate"),X=h.plywoodNos.quantity*(T*n),Y=h.laminateNos.quantity*(E*n),b=X+Y;c+=b+M});const j=h=>h.quantity*h.cost,d=u.fittingsAndAccessories.reduce((h,T)=>h+j(T),0),N=u.glues.reduce((h,T)=>h+(T.cost||0),0),I=u.nonBrandMaterials.reduce((h,T)=>h+j(T),0);c+=d+N+I}),Math.round(c)},re=async()=>{var i,n;try{if(!s||!B||!p||!v){ae({title:"Missing info",description:"Please ensure brand and all details are selected",variant:"destructive"});return}const c=x.current.map(t=>t.current).filter(t=>t!==null).map(t=>t.getUpdatedFurniture()),u=c.reduce((t,r)=>t+r.totals.furnitureTotal,0),k=await S({quoteId:B,organizationId:s,data:{quoteId:B,organizationId:s,projectId:p.projectId,brandName:v,laminateBrand:A,furnitures:c,grandTotal:u,notes:"Generated with brand variant"}});Ne({src:k.url,alt:k.fileName}),ae({title:"success",description:"scuesssfully vrated"})}catch(c){ae({title:"Error",description:((n=(i=c==null?void 0:c.response)==null?void 0:i.data)==null?void 0:n.message)??"Operation failed"})}};return l.useEffect(()=>{if(!(p!=null&&p.furnitures))return;const i=p.furnitures.map(n=>({furnitureName:n.furnitureName,coreMaterials:n.coreMaterials||[],fittingsAndAccessories:n.fittingsAndAccessories||[],glues:n.glues||[],nonBrandMaterials:n.nonBrandMaterials||[],totals:{core:n.coreMaterialsTotal||0,fittings:n.fittingsAndAccessoriesTotal||0,glues:n.gluesTotal||0,nbms:n.nonBrandMaterialsTotal||0,furnitureTotal:n.furnitureTotal||0},plywoodBrand:v,laminateBrand:A}));te(i)},[p]),x.current.length!==F.length&&(x.current=F.map((i,n)=>x.current[n]??me.createRef())),l.useEffect(()=>{console.log("furnitureRefs Array",x),x.current=F.map((i,n)=>x.current[n]??l.createRef())},[F]),l.useEffect(()=>{!v&&(m==null?void 0:m.length)>0&&g(m[0])},[m]),l.useEffect(()=>{!A&&(o==null?void 0:o.length)>0&&D(o[0])},[o]),e.jsxs("div",{className:"p-2 max-h-full overflow-y-auto",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 pb-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("button",{onClick:()=>R(-1),className:"flex items-center justify-center w-8 h-8 bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-md transition-colors flex-shrink-0",children:e.jsx("i",{className:"fas fa-arrow-left text-gray-600 text-sm"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:((K=p==null?void 0:p.projectId)==null?void 0:K.projectName)||"Project"}),e.jsxs("p",{className:"text-md text-gray-500",children:["Quote: #",(p==null?void 0:p.quoteNo)||"-"]})]})]}),e.jsx(ue,{onClick:re,disabled:q,className:"flex-shrink-0",children:q?"Generating...":"Generate Quote"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Plywood Brand:"}),e.jsx(ee,{options:m,placeholder:"Select Plywood Brand",searchPlaceholder:"Search brands...",onSelect:g,selectedValue:v||"",className:"flex-1"})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Laminate Brand:"}),e.jsx(ee,{options:o,placeholder:"Select Laminate Brand",searchPlaceholder:"Search brands...",onSelect:D,selectedValue:A||"",className:"flex-1"})]})})]}),e.jsxs("div",{className:" grid grid-cols-4 gap-2",children:[e.jsx(Z,{className:"px-2 py-4 border-l-4 border-blue-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Project Cost "," "," ",e.jsx("span",{className:"font-bold",children:"(without profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-blue-600",children:["₹",U.toLocaleString("en-IN")]})]})}),e.jsx(Z,{className:"px-2 py-4 border-l-4 border-green-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Client Quote Amount "," "," ",e.jsx("span",{className:"font-bold",children:"(with profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-green-600",children:["₹",Q.toLocaleString("en-IN")]})]})}),e.jsx(Z,{className:"px-2 py-4 border-l-4 border-violet-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-md text-gray-600",children:"Profit Amount"}),e.jsxs("p",{className:"text-md font-bold text-violet-600",children:["₹",$.toLocaleString("en-IN")," ",e.jsxs("span",{className:"text-black !text-[12px] ml-[5px] font-semibold",children:["(",J.toFixed(2),"%)"]})]})]})}),e.jsx(Z,{className:"px-2 py-4 border-l-4 border-orange-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-md text-gray-600",children:"Single Labour Cost"}),e.jsxs("p",{className:"text-md font-bold text-orange-600",children:["₹",C]})]})})]})]}),y||W?e.jsx(pe,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[F.map((i,n)=>e.jsx(be,{index:n,data:i,labourCost:C,ref:x.current[n],laminateRatesByBrand:P,brandRatesByName:_,selectedBrand:v,selectedLaminateBrand:A,brandOptions:m,laminateBrandOptions:o,onFurnitureChange:z},n)),e.jsx("div",{className:"mt-10 text-right",children:e.jsxs("div",{className:"inline-block bg-green-50 border border-green-200 rounded-md px-6 py-4",children:[e.jsx("p",{className:"text-md font-medium text-gray-700 mb-1",children:"Total Estimate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["₹",Q.toLocaleString("en-IN")]})]})})]})})]})};export{je as DEFAULT_LAMINATE_RATE_PER_SQFT,we as default};
