import{r as u,j as e,R as l,a as k,C as _,o as T,B as x,g as U,t as p,_ as b}from"./index-ogMTmcqi.js";import{u as A,a as B,b as R}from"./orgApi-D2P0S6e4.js";import{B as W}from"./Badge-BeYXfPZ4.js";import{I as N}from"./Input-Bl8lW2bK.js";import{L as g}from"./Label-C-xV5DF7.js";import{T as G}from"./TextArea-DyaTVUXf.js";import{D as V,a as H,b as $,c as Y}from"./Dialog-DGe1KMqY.js";import{M as q,S as K}from"./MobileSidebar-Swg-uC5H.js";import{L as z,d as J}from"./constants-BoN4q75_.js";import"./CTOApi-AqugB15K.js";import"./clientApi-Bm5o0Hmq.js";import"./staffApi-BVtzq88e.js";import"./userApi-xFtNT7SR.js";import"./workerApi-MmsHUaVi.js";import"./stageSelectionApi-B7pZfvf8.js";const Q=({children:t})=>{const[a,s]=u.useState(!1),r=u.useRef(null);return u.useEffect(()=>{const n=i=>{r.current&&!r.current.contains(i.target)&&s(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[]),e.jsx("div",{ref:r,className:"relative inline-block text-left",children:l.Children.map(t,n=>{if(l.isValidElement(n)){if(n.type===L)return l.cloneElement(n,{onClick:()=>s(!a)});if(n.type===S)return l.cloneElement(n,{isOpen:a,onClose:()=>s(!1)})}return n})})},L=({asChild:t=!1,children:a,onClick:s})=>t&&l.isValidElement(a)?l.cloneElement(a,{onClick:r=>{var n;if(r.stopPropagation(),s==null||s(),l.isValidElement(a)){const i=(n=a.props)==null?void 0:n.onClick;typeof i=="function"&&i(r)}}}):e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),s==null||s()},className:"inline-flex items-center justify-center",children:a}),S=({align:t="start",className:a="",children:s,isOpen:r=!1,onClose:n})=>{if(!r)return null;const i=t==="end"?"right-0":"left-0";return e.jsx("div",{className:`absolute ${i} mt-2 w-48 rounded-xl bg-white shadow-lg border border-gray-200 py-1 z-50 ${a}`,children:l.Children.map(s,o=>l.isValidElement(o)&&o.type===M?l.cloneElement(o,{onClose:n}):o)})},M=({className:t="",children:a,onClick:s,onClose:r})=>{const n=()=>{s==null||s(),r==null||r()};return e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center ${t}`,onClick:n,children:a})};var D={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},E=l.createContext&&l.createContext(D),X=["attr","size","title"];function Z(t,a){if(t==null)return{};var s=ee(t,a),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function ee(t,a){if(t==null)return{};var s={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(a.indexOf(r)>=0)continue;s[r]=t[r]}return s}function v(){return v=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},v.apply(this,arguments)}function P(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function w(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?P(Object(s),!0).forEach(function(r){te(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function te(t,a,s){return a=se(a),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function se(t){var a=ae(t,"string");return typeof a=="symbol"?a:a+""}function ae(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function I(t){return t&&t.map((a,s)=>l.createElement(a.tag,w({key:s},a.attr),I(a.child)))}function j(t){return a=>l.createElement(re,v({attr:w({},t.attr)},a),I(t.child))}function re(t){var a=s=>{var{attr:r,size:n,title:i}=t,o=Z(t,X),d=n||s.size||"1em",c;return s.className&&(c=s.className),t.className&&(c=(c?c+" ":"")+t.className),l.createElement("svg",v({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,r,o,{className:c,style:w(w({color:t.color||s.color},s.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&l.createElement("title",null,i),t.children)};return E!==void 0?l.createElement(E.Consumer,null,s=>a(s)):a(D)}function ne(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function le(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function ie(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function oe(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function ce(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function de({organization:t}){const a=A(),s=k(),r=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await a.mutateAsync(t._id),p({title:"Success",description:"Organization deleted successfully"})}catch(n){p({title:"Error",description:n.message||"Failed to delete organization",variant:"destructive"})}};return e.jsxs(_,{className:"group hover:shadow-2xl transition-all duration-300 hover:bg-white hover:scale-105",children:[e.jsx(T,{className:"pb-4 bg-gradient-to-br from-blue-50 to-blue-100/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t!=null&&t.logoUrl?e.jsx("img",{src:t.logoUrl||"/placeholder.svg",alt:t.organizationName,className:"w-8 h-8 rounded-lg object-cover"}):e.jsx(ce,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-blue-900 text-lg truncate",children:t==null?void 0:t.organizationName}),t.type&&e.jsx(W,{variant:"default",className:"mt-1",children:t.type})]})]}),e.jsxs(Q,{children:[e.jsx(L,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsx(S,{align:"end",children:e.jsxs(M,{onClick:r,className:"text-red-600 focus:text-red-600",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]})}),e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx(ne,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),(t==null?void 0:t.address)||"N/A"]}),(t==null?void 0:t.organizationPhoneNo)&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(ie,{className:"w-4 h-4 mr-2 text-blue-500"}),t.organizationPhoneNo]}),e.jsx("div",{className:"flex items-center justify-end pt-3 border-t border-blue-100",children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>s(`/organizations/${t._id}`),className:"border-blue-200 text-blue-600 hover:bg-blue-50",children:"View Details"})})]})})]})}function me({isOpen:t,onClose:a}){const[s,r]=u.useState({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),n=B(),i=async d=>{var c,m;if(d.preventDefault(),!s.organizationName.trim()){p({title:"Error",description:"Organization name is required",variant:"destructive"});return}try{await n.mutateAsync(s),p({title:"Success",description:"Organization created successfully"}),r({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),a()}catch(f){p({title:"Error",description:((m=(c=f==null?void 0:f.response)==null?void 0:c.data)==null?void 0:m.message)||"Failed to create organization",variant:"destructive"})}},o=d=>{r(c=>({...c,[d.target.name]:d.target.value}))};return e.jsx(V,{open:t,onOpenChange:a,children:e.jsxs(H,{className:"sm:max-w-md p-4 custom-scrollbar",children:[e.jsx($,{children:e.jsx(Y,{className:"text-blue-900",children:"Create New Organization"})}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"organizationName",className:"text-blue-800",children:"Organization Name *"}),e.jsx(N,{id:"organizationName",name:"organizationName",value:s.organizationName,onChange:o,placeholder:"Enter organization name",className:"border-blue-200 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"type",className:"text-blue-800",children:"Type"}),e.jsx(N,{id:"type",name:"type",value:s.type,onChange:o,placeholder:"e.g., Company, NGO, Startup",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"organizationPhoneNo",className:"text-blue-800",children:"Phone Number"}),e.jsx(N,{id:"organizationPhoneNo",name:"organizationPhoneNo",value:s.organizationPhoneNo,onChange:o,placeholder:"Enter phone number",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"address",className:"text-blue-800",children:"Address"}),e.jsx(G,{id:"address",name:"address",value:s.address,onChange:o,placeholder:"Enter organization address",className:"border-blue-200 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"logoUrl",className:"text-blue-800",children:"Logo URL"}),e.jsx(N,{id:"logoUrl",name:"logoUrl",value:s.logoUrl,onChange:o,placeholder:"Enter logo URL",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:a,className:"border-blue-200 text-blue-600",children:"Cancel"}),e.jsx(x,{type:"submit",disabled:n.isPending,className:"bg-blue-600 hover:bg-blue-700",children:n.isPending?"Creating...":"Create Organization"})]})]})]})})}function Ee(){var O,C;const[t,a]=u.useState(!1),[s,r]=u.useState(!1),[n,i]=u.useState(window.innerWidth<470),o=k();let{data:d,isLoading:c,error:m,refetch:f}=R();const y={ADMIN:"/login",STAFF:"/login/staff",CTO:"/login/cto",WORKER:"/login/worker",CLIENT:"/login/client"},F=()=>{r(!0)};return u.useEffect(()=>{const h=()=>{i(window.innerWidth<470)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),c?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{className:"h-8 w-48 mb-2"}),e.jsx(b,{className:"h-4 w-64"})]}),e.jsx(b,{className:"h-10 w-40"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(h=>e.jsx(b,{className:"h-24 w-full rounded-2xl"},h))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6].map(h=>e.jsx(b,{className:"h-64 w-full rounded-2xl"},h))})]})]}):m?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Organizations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:((C=(O=m==null?void 0:m.response)==null?void 0:O.data)==null?void 0:C.message)||(m==null?void 0:m.message)||"Something happened try again please"}),e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[e.jsxs(x,{onClick:()=>f(),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]}),e.jsxs(x,{onClick:()=>o("/login/staff"),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Login"]})]})]})}):e.jsxs("main",{className:"w-screen h-screen flex flex:1",children:[n?e.jsx(q,{labels:z,path:y,isOpen:s,onClose:()=>r(!1)}):e.jsx(K,{path:y,labels:z,icons:J}),e.jsxs("section",{className:"w-full h-full",children:[e.jsx("div",{className:"max-w-full min-h-[10%] bg-white/90 backdrop-blur-sm border-b border-blue-200",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 py-3",children:e.jsxs("div",{className:"flex  sm:flex-row items-center sm:items-center justify-between gap-3 sm:gap-6",children:[e.jsxs("div",{className:"flex flex:1 items-center",children:[n&&e.jsx("button",{onClick:F,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"flex flex-col gap-1 w-[50vw]",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-blue-800",children:[e.jsx("i",{className:"fas fa-building mr-2 text-blue-600"}),"Organization"]}),e.jsx("p",{className:"text-sm sm:inline hidden text-blue-500",children:"Manage your organization and teams"})]})]}),!d&&e.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3 sm:gap-4 w-full sm:w-auto",children:e.jsxs(x,{onClick:()=>a(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Organization"}),e.jsx("span",{className:"inline sm:hidden",children:"Create"})]})})]})})}),e.jsx("div",{className:" min-h-[calc(100vh-10%)] sm:min-h-[calc(100vh-11%)] bg-gradient-to-br from-blue-50 via-white to-blue-100",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 py-6 relative",children:[d?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Your Organization"})}),e.jsx("div",{className:" xl:!w-[30%] lg:w-[50%] sm:w-[60%] w-[100%]",children:e.jsx(de,{organization:d})})]}):e.jsx("div",{className:"text-center py-2 overflow-y-auto max-h-[calc(100vh-15vh)]",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-4xl"})}),e.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:"No Organizations Yet"}),e.jsx("p",{className:"text-blue-600 mb-6 text-sm sm:text-base",children:"Create your first organization to start managing your teams and projects effectively"}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-6 text-left",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-4 text-center",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Getting Started"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Create your organization with basic details"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Invite team members to join your organization"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Start managing tasks and projects together"})]})]})]}),e.jsxs(x,{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Create Your First Organization"]})]})}),e.jsx(me,{isOpen:t,onClose:()=>a(!1)})]})})]})]})}export{Ee as default};
