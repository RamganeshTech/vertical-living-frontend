import{g,q as y}from"./index-BZjlY-2Z.js";import{g as v}from"./roleCheck-DuKNZHKs.js";import{u as R}from"./useQuery-Coz1VCY2.js";import{u as h}from"./useMutation-BRRIqsxx.js";import{u as P}from"./useInfiniteQuery--LmPAkvr.js";const E=async({organizationId:n,customerId:t,page:e,limit:a,fromInvoiceDate:s,toInvoiceDate:c,createdFromDate:l,createdToDate:u,search:p,minAmount:w,maxAmount:d,api:m,sortBy:f,sortOrder:i})=>{const o=new URLSearchParams;n&&o.append("organizationId",n),t&&o.append("customerId",t),e&&o.append("page",e.toString()),a&&o.append("limit",a.toString()),s&&o.append("fromInvoiceDate",s),c&&o.append("toInvoiceDate",c),l&&o.append("createdFromDate",l),u&&o.append("createdToDate",u),w&&o.append("minAmount",w.toString()),d&&o.append("maxAmount",d.toString()),f&&o.append("sortBy",f),i&&o.append("sortOrder",i),p&&o.append("search",p);const{data:r}=await m.get(`/department/accounting/retailinvoice/getallinvoice?${o.toString()}`);if(!r.ok)throw new Error(r.message);return r},I=async({invoiceData:n,api:t})=>{const{data:e}=await t.post("/department/accounting/retailinvoice/createinvocie",n);if(!e.ok)throw new Error(e.message);return e.data},A=async({invoiceData:n,invoiceId:t,api:e})=>{const{data:a}=await e.put(`/department/accounting/retailinvoice/updateinvoice/${t}`,n);if(!a.ok)throw new Error(a.message);return a.data},S=async({invoiceId:n,api:t})=>{const{data:e}=await t.delete(`/department/accounting/retailinvoice/deleteinvoice/${n}`);if(!e.ok)throw new Error(e.message);return e.data},k=async({invoiceId:n,api:t})=>{const{data:e}=await t.get(`/department/accounting/retailinvoice/getsingleinvoice/${n}`);if(!e.ok)throw new Error(e.message);return e.data},Q=({organizationId:n,customerId:t,limit:e=10,search:a,fromInvoiceDate:s,minAmount:c,maxAmount:l,toInvoiceDate:u,createdFromDate:p,createdToDate:w,sortBy:d,sortOrder:m})=>{const f=["owner","staff","CTO"],{role:i}=g(),o=v(i);return P({queryKey:["retailinvoices",n,t,e,s,u,p,c,l,w,a,d,m],queryFn:async({pageParam:r=1})=>{if(!i||!f.includes(i))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await E({organizationId:n,customerId:t,page:r,limit:e,fromInvoiceDate:s,toInvoiceDate:u,createdFromDate:p,createdToDate:w,minAmount:c,maxAmount:l,search:a,api:o,sortBy:d,sortOrder:m})},getNextPageParam:r=>{if(r.pagination.page<r.pagination.totalPages)return r.pagination.page+1},getPreviousPageParam:r=>{if(r.pagination.page>1)return r.pagination.page-1},initialPageParam:1,enabled:!!i&&f.includes(i)&&!!n})},O=()=>{const n=["owner","staff","CTO"],{role:t}=g(),e=v(t);return h({mutationFn:async({invoiceData:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await I({invoiceData:a,api:e})},onSuccess:()=>{y.invalidateQueries({queryKey:["retailinvoices"]})}})},T=()=>{const n=["owner","staff","CTO"],{role:t}=g(),e=v(t);return h({mutationFn:async({invoiceData:a,invoiceId:s})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({invoiceData:a,invoiceId:s,api:e})},onSuccess:()=>{y.invalidateQueries({queryKey:["retailinvoices"]})}})},$=()=>{const n=["owner","staff","CTO"],{role:t}=g(),e=v(t);return h({mutationFn:async({invoiceId:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await S({invoiceId:a,api:e})},onSuccess:()=>{y.invalidateQueries({queryKey:["retailinvoices"]})}})},b=n=>{const t=["owner","staff","CTO"],{role:e}=g(),a=v(e);return R({queryKey:["retailinvoice",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await k({invoiceId:n,api:a})},enabled:!!n&&!!e&&t.includes(e)})};export{$ as a,O as b,b as c,T as d,Q as u};
