import{c as s,f as w,q as m}from"./index-PP9bwaFb.js";import{g as l}from"./roleCheck-BSRkLz35.js";import{u as d}from"./useQuery-Crlnn1zB.js";import{u as c}from"./useMutation-CnbKwdgs.js";const y=async({projectId:r,api:e})=>{const{data:t}=await e.get(`/materialconfirmation/${r}`);if(!t.ok)throw new Error(t.message);return t.data},h=async({projectId:r,roomId:e,packageId:t,api:o})=>{const{data:a}=await o.get(`/materialconfirmation/${r}/singleroom/${t}/${e}`);if(!a.ok)throw new Error(a.message);return a.data},p=async({projectId:r,roomId:e,packageId:t,fieldId:o,formData:a,api:n})=>{const{data:i}=await n.put(`/materialconfirmation/additems/${r}/${t}/${e}/${o}`,a);if(!i.ok)throw new Error(i.message);return i.data},g=async({projectId:r,roomId:e,packageId:t,api:o})=>{const{data:a}=await o.patch(`/materialconfirmation/${r}/${t}/${e}/deleteroom`);if(!a.ok)throw new Error(a.message);return a.data},E=async({projectId:r,roomId:e,packageId:t,formData:o,api:a})=>{const{data:n}=await a.post(`/materialconfirmation/${r}/uploads/${t}/${e}`,o);if(!n.ok)throw new Error(n.message);return n.data},$=async({projectId:r,itemId:e,packageId:t,roomId:o,fieldId:a,api:n})=>{const{data:i}=await n.delete(`/materialconfirmation/deletesubitem/${r}/${t}/${o}/${e}/${a}`);if(!i.ok)throw new Error(i.message);return i.data},C=async({projectId:r,roomId:e,packageId:t,fileId:o,api:a})=>{const{data:n}=await a.patch(`/materialconfirmation/${r}/deleteuploadedfile/${t}/${e}/${o}`);if(!n.ok)throw new Error(n.message);return n.data},q=async({formId:r,projectId:e,deadLine:t,api:o})=>{const{data:a}=await o.put(`/materialconfirmation/deadline/${e}/${r}`,{deadLine:t});if(!a.ok)throw new Error(a.message);return a.data},A=async({projectId:r,api:e})=>{const{data:t}=await e.put(`/materialconfirmation/completionstatus/${r}`);if(!t.ok)throw new Error(t.message);return t.data},R=async({projectId:r,api:e})=>{const{data:t}=await e.patch(`/materialconfirmation/generatepdfcomparison/${r}`);if(!t.ok)throw new Error(t.message);return t.data},O=r=>{const e=["owner","staff","CTO","client","worker"],{role:t}=s(),o=l(t);return d({queryKey:["material-confirmation",r],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("Not authorized");if(!o)throw new Error("API instance not available");return await y({projectId:r,api:o})},enabled:!!r,refetchOnWindowFocus:!1,retry:!1})},v=({projectId:r,roomId:e,packageId:t})=>{const o=["owner","staff","CTO","client","worker"],{role:a}=s(),n=l(a);return d({queryKey:["material-room",r,e],queryFn:async()=>{if(!a||!o.includes(a))throw new Error("Not authorized");if(!n)throw new Error("API instance unavailable");return await h({projectId:r,packageId:t,roomId:e,api:n})},enabled:!!r&&!!e,retry:!1,refetchOnWindowFocus:!1})},M=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e),o=w();return c({mutationFn:async({projectId:a,roomId:n,fieldId:i,packageId:u,formData:f})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance not available");return await p({projectId:a,roomId:n,fieldId:i,packageId:u,formData:f,api:t})},onSuccess:(a,{projectId:n})=>{o.invalidateQueries({queryKey:["material-confirmation",n]})}})},b=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e);return c({mutationFn:async({projectId:o,itemId:a,roomId:n,packageId:i,fieldId:u})=>{if(!e||!r.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await $({projectId:o,itemId:a,packageId:i,roomId:n,fieldId:u,api:t})},onSuccess:(o,{projectId:a})=>{m.invalidateQueries({queryKey:["material-confirmation",a]})}})},T=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e),o=w();return c({mutationFn:async({projectId:a,roomId:n,packageId:i})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance not available");return await g({projectId:a,roomId:n,packageId:i,api:t})},onSuccess:(a,{projectId:n})=>{o.invalidateQueries({queryKey:["material-confirmation",n]})}})},K=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e),o=w();return c({mutationFn:async({projectId:a,roomId:n,packageId:i,formData:u})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await E({projectId:a,roomId:n,packageId:i,formData:u,api:t})},onSuccess:(a,{projectId:n,roomId:i})=>{o.invalidateQueries({queryKey:["material-room",n,i]})}})},Q=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e),o=w();return c({mutationFn:async({projectId:a,roomId:n,packageId:i,fileId:u})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await C({projectId:a,roomId:n,fileId:u,packageId:i,api:t})},onSuccess:(a,{projectId:n,roomId:i})=>{o.invalidateQueries({queryKey:["material-room",n,i]})}})},z=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e),o=w();return c({mutationFn:async({formId:a,projectId:n,deadLine:i})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await q({formId:a,projectId:n,deadLine:i,api:t})},onSuccess:()=>{o.invalidateQueries({queryKey:["material-rooms"]})}})},I=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e),o=w();return c({mutationFn:async({projectId:a})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await A({projectId:a,api:t})},onSuccess:(a,{projectId:n})=>{o.invalidateQueries({queryKey:["material-confirmation",n]})}})},N=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=l(e);return c({mutationFn:async({projectId:o})=>{if(!e||!r.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await R({projectId:o,api:t})},onSuccess:(o,{projectId:a})=>{m.invalidateQueries({queryKey:["common-order-single",a]})}})};export{Q as a,v as b,M as c,b as d,T as e,O as f,z as g,I as h,N as i,K as u};
