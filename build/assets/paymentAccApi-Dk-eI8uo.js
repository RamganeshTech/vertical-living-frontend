import{u as c}from"./useQuery-Coz1VCY2.js";import{g as r,h as u,q as l}from"./index-BZjlY-2Z.js";import{u as i}from"./useMutation-BRRIqsxx.js";import{u as y}from"./useInfiniteQuery--LmPAkvr.js";import{g as s}from"./roleCheck-DuKNZHKs.js";const m=async({api:t,filters:n,pageParam:e=1})=>{const{data:a}=await t.get("/department/accounting/payments/section/getallpayments",{params:{...n,page:e,limit:10}});if(!a.success)throw new Error("Failed to fetch payments");return a},w=async({api:t,id:n})=>{const{data:e}=await t.get(`/department/accounting/payments/section/getsinglepayments/${n}`);if(!e.success&&!e.ok)throw new Error(e.message||"Failed to fetch payment");return e.data},f=async({api:t,id:n})=>{const{data:e}=await t.delete(`/department/accounting/payments/section/deletepayments/${n}`);if(!e.success&&!e.ok)throw new Error(e.message||"Failed to delete payment");return e},p=async({id:t,api:n})=>{const{data:e}=await n.post(`/department/accounting/payments/section/syncpaymenttoaccounts/${t}`);if(!e.success)throw new Error(e.message);return e.data},q=(t={})=>{const n=["owner","staff","CTO"],{role:e}=r(),a=s(e);return y({queryKey:["accounting","payments","infinite",t],queryFn:async({pageParam:o=1})=>{if(!e||!n.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not found");return await m({api:a,filters:t,pageParam:o})},initialPageParam:1,getNextPageParam:o=>o.pagination.nextPage??void 0,enabled:!!e&&!!a})},A=t=>{const n=["owner","staff","CTO"],{role:e}=r(),a=s(e);return c({queryKey:["accounting","payments","single",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this api call");if(!a)throw new Error("API instance not found for role");if(!t)throw new Error("Payment ID is required");return await w({api:a,id:t})},enabled:!!e&&!!a&&!!t})},F=()=>{const t=["owner","staff","CTO"],{role:n}=r(),e=s(n),a=u();return i({mutationFn:async o=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await f({api:e,id:o})},onSuccess:()=>{a.invalidateQueries({queryKey:["accounting","payments","all"]})}})},I=()=>{const t=["owner","staff","CTO"],{role:n}=r(),e=s(n);return i({mutationFn:async({id:a})=>{if(!n||!t.includes(n))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await p({id:a,api:e})},onSuccess:()=>{l.invalidateQueries({queryKey:["bills"]})}})};export{F as a,A as b,I as c,q as u};
