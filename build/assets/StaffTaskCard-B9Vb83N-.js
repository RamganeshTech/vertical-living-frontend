import{u as N,M as y,j as e}from"./index-DLaY3p7d.js";import{C,a as S,d as b,c as T}from"./Card-BHri7Z1r.js";import{e as v}from"./staffTaskApi-BgK9Wb6g.js";import{B as w}from"./Button-B7O4a2pZ.js";import{d as D,f as _}from"./dateFormator-BGKi5rfZ.js";import{t as c}from"./toast-BSC5QTk1.js";const B=({task:s})=>{var d,l;const m=N(),{_id:f,role:t}=y(a=>a.authStore),u=t==="staff",{mutateAsync:p,isPending:x}=v(),g=async a=>{var n,o;try{await p({mainTaskId:a}),c({description:"Task Deleted Successfully",title:"Success"})}catch(i){c({title:"Error",description:((o=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to delete task",variant:"destructive"})}},r=f===((d=s.assigneeId)==null?void 0:d._id),h=a=>{t==="staff"&&!r||m(`single/${a}`)},j=a=>{switch(a){case"queued":case"puased":case"done":return a;case"in_progress":return"In Progress";default:return"queued"}};return e.jsxs(C,{onClick:()=>h(s._id),className:`${t!=="staff"||r?"cursor-pointer":"cursor-not-allowed"} p-0 border-l-4 border-blue-600`,children:[e.jsx(S,{children:e.jsx(b,{children:(s==null?void 0:s.title.trim())||"No title"})}),e.jsxs(T,{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("i",{className:"fa-solid fa-calendar-days mr-2 text-blue-600"}),"Due: ",s.due?e.jsxs(e.Fragment,{children:[D(s.due)," - ",_(s==null?void 0:s.due)," "]}):e.jsx(e.Fragment,{children:"N/A"})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("i",{className:"fa-solid fa-layer-group mr-2 text-purple-600"}),"assignee: ",((l=s==null?void 0:s.assigneeId)==null?void 0:l.staffName)||"N/A"]}),e.jsxs("p",{className:"text-sm capitalize",children:[e.jsx("i",{className:"fa-solid fa-chart-line mr-2 text-yellow-500"}),"Status: ",j(s.status)]}),e.jsxs("p",{className:"text-sm capitalize",children:[e.jsx("i",{className:"fa-solid fa-building mr-2 text-indigo-500"}),"Department: ",s.department]}),e.jsx("div",{className:"flex gap-2 mt-3 justify-end",children:!u&&e.jsxs(w,{size:"sm",onClick:a=>{a.stopPropagation(),g(s._id)},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm",isLoading:x,children:[e.jsx("i",{className:"fa-solid fa-trash mr-1"}),"Delete"]})})]})]},s._id)};export{B as S};
