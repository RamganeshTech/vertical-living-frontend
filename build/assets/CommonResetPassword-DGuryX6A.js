import{E as y,a as j,r as a,j as e,B as N,t as r}from"./index-BAM0eJUz.js";import{L as m}from"./Label-C8i6KaZe.js";import{I as u}from"./Input-1UBXZqEj.js";import{b as P}from"./commonAuthApi-CB1-7Whz.js";const L=()=>{const[x]=y(),c=j(),d=x.get("token"),[o,h]=a.useState(""),[n,f]=a.useState(""),[i,w]=a.useState(!1),[l,p]=a.useState(!1),{mutateAsync:b,isPending:g}=P();a.useEffect(()=>{const s=t=>{t.key==="Escape"&&c("/login")};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[]);const v=async s=>{if(s.preventDefault(),!o||!n){r({title:"Error",variant:"destructive",description:"Both fields are required."});return}if(o!==n){r({title:"Error",variant:"destructive",description:"Passwords do not match."});return}if(!d){r({title:"Error",variant:"destructive",description:"Invalid or expired reset token."});return}try{(await b({token:d,password:o})).ok&&(r({title:"Success",description:"Password updated successfully. You can now login."}),c("/login"))}catch(t){r({title:"Reset Failed",description:(t==null?void 0:t.message)||"Something went wrong.",variant:"destructive"})}};return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 px-4",children:e.jsxs("form",{onSubmit:v,className:"bg-white shadow-lg rounded-xl p-8 w-full max-w-md border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-lock-open text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Set New Password"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Please choose a strong password"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"mb-1.5 block text-sm font-semibold text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{type:i?"text":"password",value:o,onChange:s=>h(s.target.value),placeholder:"••••••••",className:"pr-10"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-500 transition-colors",onClick:()=>w(!i),children:e.jsx("i",{className:`fas ${i?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"mb-1.5 block text-sm font-semibold text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{type:l?"text":"password",value:n,onChange:s=>f(s.target.value),placeholder:"••••••••",className:"pr-10"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-500 transition-colors",onClick:()=>p(!l),children:e.jsx("i",{className:`fas ${l?"fa-eye-slash":"fa-eye"}`})})]})]})]}),e.jsx(N,{isLoading:g,type:"submit",className:"w-full mt-8 bg-blue-600 text-white hover:bg-blue-700 py-6 rounded-xl font-bold",children:"Update Password"})]})})};export{L as default};
