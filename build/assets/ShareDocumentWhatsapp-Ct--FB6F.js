import{j as m}from"./index-Di9fivK2.js";import{u as x,a as v}from"./documentationApi-B3-CzFxq.js";import{e as $}from"./requirementFormApi-CxXF4l-y.js";import{B as C}from"./Button-CVj9LlQY.js";import{t as W}from"./toast-BSC5QTk1.js";const G=({projectId:t,stageNumber:h,isStageCompleted:n,className:l=""})=>{var r;const{data:e,isLoading:d}=x(t),{data:s,isLoading:u}=v({projectId:t,stageNumber:h}),{data:o}=$({projectId:t});let c=`Hello *${(e==null?void 0:e.clientName)||((r=o==null?void 0:o.clientData)==null?void 0:r.clientName)||"Client"}*,

${s==null?void 0:s.message}`;const f=()=>e!=null&&e.phoneNo?n!=="completed"?"complete the stage":"":"client's phone number not provided",g=()=>{var p,i;const N=(p=e==null?void 0:e.phoneNo)!=null&&p.startsWith("+91")?e==null?void 0:e.phoneNo:e!=null&&e.phoneNo?`+91${e==null?void 0:e.phoneNo}`:null,b=((i=o==null?void 0:o.clientData)==null?void 0:i.whatsapp)||null,a=N||b;if(!a){W({title:"Error",description:"Client WhatsApp number not provided",variant:"destructive"});return}const w=`https://wa.me/${a.replace("+","")}?text=${encodeURIComponent(c)}`;window.open(w,"_blank")};return m.jsxs(C,{variant:"outline",disabled:d||u||n!=="completed",title:f(),onClick:g,className:`bg-green-600 hover:bg-green-700 text-white px-4 py-2 min-w-30 rounded items-center ${l}`,children:[m.jsx("i",{className:"fab fa-whatsapp mr-1 "}),"Share Doc"]})};export{G as S};
