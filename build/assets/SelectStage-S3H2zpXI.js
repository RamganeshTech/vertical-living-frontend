import{b as S,e as k,a as $,r as M,j as e,B as x,t as u}from"./index-JxDlpqED.js";import{u as F,a as Y}from"./stageSelectionApi-SlVkRLHV.js";import{c as z,d as P}from"./Card-k7cnv6-m.js";function I(){const{projectId:r,organizationId:d}=S(),{isMobile:n,openMobileSidebar:h}=k(),o=$(),{data:c,isLoading:f,refetch:j}=F(r),{mutateAsync:b,isPending:l}=Y(),[i,m]=M.useState(null),g=s=>{l||m(s)},p=async()=>{var s,a;if(!(!i||l))try{const t=await b({projectId:r,mode:i});u({title:"Success",description:`${i} has been selected.`}),j(),t==="Manual Flow"?o(`/${d}/projectdetails/${r}/materialselection`):t==="Modular Units"&&o(`/${d}/projectdetails/${r}/modularunits`)}catch(t){u({title:"Error",description:((a=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:a.message)||t.message||"Failed to update stage selection",variant:"destructive"})}},N=s=>(c==null?void 0:c.mode)===s,v=s=>i===s,w=[{id:"Modular Units",title:"Modular Units",description:"Streamlined approach with pre-configured units and standardized pricing",icon:"fas fa-cube",colorClass:"bg-blue-500",features:["Pre-defined unit pricing","Quick configuration","Standardized components","skips 2 stages"],badge:"Recommended"},{id:"Manual Flow",title:"Manual Flow",description:"Complete customization with detailed material selection and cost estimation",icon:"fas fa-sliders-h",colorClass:"bg-purple-500",features:["Full customization","Material selection","Cost estimation","Detailed configuration"],badge:"Advanced"}];return e.jsx("div",{className:"h-full overflow-y-auto bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsx("div",{className:"min-h-full p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[n&&e.jsx("button",{onClick:h,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full shadow-lg mb-6",children:e.jsx("i",{className:"fas fa-layer-group text-2xl text-slate-700"})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"Select Your Project Stage"}),e.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Choose the approach that best fits your project requirements and timeline"})]}),f?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading stage selection..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center mb-12",children:e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 items-start sm:items-center sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-semibold",children:"1"}),e.jsx("span",{className:"sm:ml-2 text-sm font-medium text-slate-700",children:"Stage Selection"})]}),n?e.jsx("i",{className:"mx-auto fas fa-arrow-down text-slate-400"}):e.jsx("i",{className:"mx-auto fas fa-arrow-right text-slate-400"}),e.jsxs("div",{className:"flex items-center sm:ml-2",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 text-slate-600 rounded-full flex items-center justify-center text-sm font-semibold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-slate-500",children:"Configuration"})]}),n?e.jsx("i",{className:"mx-auto fas fa-arrow-down text-slate-400"}):e.jsx("i",{className:"mx-auto fas fa-arrow-right text-slate-400"}),e.jsxs("div",{className:"flex items-center sm:ml-2",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 text-slate-600 rounded-full flex items-center justify-center text-sm font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-slate-500",children:"Implementation"})]})]})}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-medium",children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("span",{children:"Step 1: Select an option below, then confirm your choice"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:w.map(s=>{const a=N(s.id),t=v(s.id);return e.jsx("div",{onClick:()=>g(s.id),className:`cursor-pointer transition-all duration-300 hover:-translate-y-1 relative ${l?"pointer-events-none opacity-75":""}`,children:e.jsxs(z,{className:`overflow-hidden border-2 transition-all duration-300 ${a?"border-green-500 bg-green-50 shadow-lg ring-2 ring-green-200":t?"border-blue-500 bg-blue-50 shadow-lg ring-2 ring-blue-200":"border-slate-200 hover:border-slate-300 hover:shadow-lg"}`,children:[e.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[a&&e.jsxs("div",{className:"flex items-center space-x-1 bg-green-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"fas fa-check"}),e.jsx("span",{children:"Confirmed"})]}),t&&!a&&e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"fas fa-hand-pointer"}),e.jsx("span",{children:"Selected"})]})]}),e.jsxs(P,{className:"p-8",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:`w-12 h-12 ${s.colorClass} rounded-lg flex items-center justify-center transition-all duration-300 ${t||a?"scale-110 shadow-lg":""}`,children:e.jsx("i",{className:`${s.icon} text-white text-xl`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ${a?"text-green-800":t?"text-blue-800":"text-slate-900"}`,children:s.title})}),e.jsx("p",{className:`leading-relaxed transition-colors duration-300 ${a?"text-green-700":t?"text-blue-700":"text-slate-600"}`,children:s.description})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:`text-sm font-semibold mb-3 transition-colors duration-300 ${a?"text-green-800":t?"text-blue-800":"text-slate-700"}`,children:"Key Features:"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:s.features.map((y,C)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${a?"bg-green-500":t?"bg-blue-500":"bg-slate-400"}`}),e.jsx("span",{className:`text-sm transition-colors duration-300 ${a?"text-green-700":t?"text-blue-700":"text-slate-600"}`,children:y})]},C))})]}),a&&e.jsx("div",{className:"mt-6 p-3 bg-green-100 rounded-lg border border-green-200",children:e.jsxs("p",{className:"text-sm text-green-800 font-medium",children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),"This option is currently active"]})}),t&&!a&&e.jsx("div",{className:"mt-6 p-3 bg-blue-100 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[e.jsx("i",{className:"fas fa-hand-pointer mr-2"}),'Click "Confirm Selection" below to proceed']})})]})]})},s.id)})}),i&&e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-2 border-blue-200 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:[e.jsx("i",{className:"fas fa-check-double mr-2 text-blue-600"}),"Confirm Your Selection"]}),e.jsxs("p",{className:"text-slate-600 mb-4",children:["You have selected ",e.jsx("span",{className:"font-semibold text-blue-600",children:i}),". Click confirm to proceed to the next stage."]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs(x,{onClick:()=>m(null),variant:"outline",disabled:l,className:"px-6",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(x,{onClick:p,disabled:l,className:"px-6 bg-blue-600 hover:bg-blue-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Confirm Selection"]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:[e.jsx("i",{className:"fas fa-question-circle mr-2 text-blue-500"}),"Need help choosing?"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-slate-600",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-slate-800 mb-2",children:[e.jsx("i",{className:"fas fa-cube mr-2 text-blue-500"}),"Choose Modular Units if:"]}),e.jsxs("ul",{className:"space-y-1 ml-6",children:[e.jsx("li",{children:"• You want to get started quickly"}),e.jsx("li",{children:"• Standard configurations meet your needs"}),e.jsx("li",{children:"• You prefer predictable pricing"}),e.jsx("li",{children:"• You can skip 2 stages"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-slate-800 mb-2",children:[e.jsx("i",{className:"fas fa-sliders-h mr-2 text-purple-500"}),"Choose Manual Flow if:"]}),e.jsxs("ul",{className:"space-y-1 ml-6",children:[e.jsx("li",{children:"• You need complete customization"}),e.jsx("li",{children:"• You want detailed cost breakdowns"}),e.jsx("li",{children:"• You have specific material requirements"}),e.jsx("li",{children:"• You prefer granular control"})]})]})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 flex items-center space-x-3",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-xl"}),e.jsx("span",{className:"text-slate-700 font-medium",children:"Processing your selection..."})]})})]})]})})})}export{I as default};
