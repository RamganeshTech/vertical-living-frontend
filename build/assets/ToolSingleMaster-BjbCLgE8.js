import{c as x,j as o,M as y,T as w,t as s}from"./index-CBsAK0nv.js";import{b as T,c as v,d as D}from"./toolMasterApi-DCpkme1Y.js";import{T as j}from"./ToolMasterForm-B3yxbM1D.js";import"./TextArea-CXePV1lw.js";const I=()=>{const{id:e,organizationId:d}=x(),{data:l,isLoading:m,isError:p,error:u,refetch:i}=T(e),c=v(),r=D(),g=async(n,t)=>{try{if(await c.mutateAsync({id:e,updateData:n}),t.length>0){const a=new FormData;t.forEach(h=>a.append("files",h)),await r.mutateAsync({id:e,formData:a})}await i(),s({title:"Success",description:"Tool details updated"})}catch(a){s({title:"Update Failed",description:a.message,variant:"destructive"})}},f=async n=>{try{const t=new FormData;n.forEach(a=>t.append("files",a)),await r.mutateAsync({id:e,formData:t}),await i(),s({title:"Success",description:"images updloaded"})}catch(t){s({title:"Update Failed",description:t.message,variant:"destructive"})}};return m?o.jsx(y,{}):p?o.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",u.message]}):o.jsxs("main",{className:"max-h-full space-y-2 overflow-y-auto p-2 !bg-white/20",children:[o.jsx(j,{mode:"view",initialData:l,organizationId:d,onSubmit:g,refetch:i,onQuickUpload:f,isSubmitting:c.isPending||r.isPending}),o.jsx(w,{toolId:e,organizationId:d})]})};export{I as default};
