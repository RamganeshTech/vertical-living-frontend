import{f as i,q as w,g as u,h as g}from"./index-CqEiDvr_.js";import{g as s}from"./roleCheck-BJ07f95N.js";import{u as m}from"./useQuery-DyvuN1xf.js";import{u as l}from"./useMutation-DDHgQq3T.js";const h=async({projectId:a,api:e})=>{const{data:t}=await e.get(`/orderingmaterial/getalldetails/${a}`);if(!t.ok)throw new Error(t.message);return t.data},R=a=>{const e=["owner","staff","CTO","worker","client"],{role:t}=i(),r=s(t);return m({queryKey:["ordering-material-history",a],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("Not allowed to fetch ordering material");if(!r)throw new Error("API not available");return await h({projectId:a,api:r})},enabled:!!t&&!!a&&!!r,retry:!1,refetchOnMount:!1})},p=async({formId:a,projectId:e,deadLine:t,api:r})=>{const{data:n}=await r.put(`/orderingmaterial/deadline/${e}/${a}`,{deadLine:t});if(!n.ok)throw new Error(n.message);return n.data},E=async({projectId:a,api:e})=>{const{data:t}=await e.put(`/orderingmaterial/completionstatus/${a}`);if(!t.ok)throw new Error(t.message);return t.data},O=async(a,e,t)=>{const{data:r}=await t.put(`/orderingmaterial/${a}/delivery-location`,e);if(!r.ok)throw new Error(r.message);return r.data},D=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=u();return l({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update delivery location");if(!t)throw new Error("API instance not available");return await O(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material",o]})}})},_=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return l({mutationFn:async({formId:r,projectId:n,deadLine:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await p({formId:r,projectId:n,deadLine:o,api:t})},onSuccess:(r,n)=>{w.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})},j=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return l({mutationFn:async({projectId:r})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await E({projectId:r,api:t})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},I=async({projectId:a})=>{const{data:e}=await g.get(`https://houseofram.in/api/orderingmaterial/getpublic/${a}`);if(console.log("data",e),!e.ok)throw new Error(e.message);return e.data},H=a=>m({queryKey:["ordering-material-public",a],queryFn:async()=>await I({projectId:a}),enabled:!!a,retry:!1,refetchOnMount:!1}),k=async({projectId:a,organizationId:e,api:t})=>{const{data:r}=await t.patch(`/orderingmaterial/generatelink/${a}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},q=async({projectId:a,pdfId:e,status:t,api:r})=>{const{data:n}=await r.patch(`/orderingmaterial/upddatepdfstatus/${a}/${e}`,{status:t});if(!n.ok)throw new Error(n.message);return n.data},U=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return l({mutationFn:async({projectId:r,organizationId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await k({projectId:r,api:t,organizationId:n})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},N=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return l({mutationFn:async({projectId:r,pdfId:n,status:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await q({projectId:r,pdfId:n,status:o,api:t})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},v=async({projectId:a,files:e,api:t})=>{const r=new FormData;e.forEach(o=>r.append("files",o));const{data:n}=await t.post(`/orderingmaterial/${a}/upload`,r);if(!n.ok)throw new Error(n.message);return n.data},G=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return l({mutationFn:async({projectId:r,files:n})=>{if(!e||!a.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await v({projectId:r,files:n,api:t})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},A=async({projectId:a,imageId:e,api:t})=>{const{data:r}=await t.delete(`/orderingmaterial/${a}/deleteimage/${e}`);if(!r.ok)throw new Error(r.message);return r.data},L=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return l({mutationFn:async({projectId:r,imageId:n})=>{if(!e||!a.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await A({projectId:r,api:t,imageId:n})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},S=async({projectId:a,unitId:e,subItemName:t,quantity:r,unit:n,api:o})=>{const{data:c}=await o.post(`/orderingmaterial/${a}/unit/${e}/addsubitem`,{subItemName:t,quantity:r,unit:n});if(!c.ok)throw new Error(c.message);return c.data},x=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=u();return l({mutationFn:async({projectId:n,unitId:o,subItemName:c,quantity:d,unit:y})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await S({projectId:n,unitId:o,subItemName:c,quantity:d,unit:y,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},$=async({projectId:a,unitId:e,subItemId:t,api:r})=>{const{data:n}=await r.delete(`/orderingmaterial/${a}/unit/${e}/deletesubitem/${t}`);if(!n.ok)throw new Error(n.message);return n.data},b=async(a,e)=>{const{data:t}=await e.delete(`/orderingmaterial/deleteallsubunits/${a}`);if(!t.ok)throw new Error(t.message);return t.data},Y=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=u();return l({mutationFn:async({projectId:n,unitId:o,subItemId:c})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await $({projectId:n,unitId:o,subItemId:c,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},z=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=u();return l({mutationFn:async({projectId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await b(n,t)},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},C=async({projectId:a,unitId:e,subItemId:t,subItemName:r,quantity:n,unit:o,api:c})=>{const{data:d}=await c.put(`/orderingmaterial/${a}/unit/${e}/updatesubitem/${t}`,{subItemName:r,quantity:n,unit:o});if(!d.ok)throw new Error(d.message);return d.data},B=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=u();return l({mutationFn:async({projectId:n,unitId:o,subItemId:c,subItemName:d,quantity:y,unit:f})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await C({projectId:n,unitId:o,subItemId:c,subItemName:d,quantity:y,unit:f,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},P=async(a,e,t)=>{const{data:r}=await t.put(`/orderingmaterial/${a}/shop`,e);if(!r.ok)throw new Error(r.message);return r.data},J=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=u();return l({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update shop details");if(!t)throw new Error("API instance not available");return await P(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material-history",o]})}})},K=async(a,e,t)=>{const{data:r}=await t.delete(`/orderingmaterial/delete/${a}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},V=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=u();return l({mutationFn:async({projectId:n,pdfId:o})=>{if(!e||!a.includes(e))throw new Error("Youre not allowed to delete pdf");if(!t)throw new Error("API instance not available");return await K(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material-history",o]})}})};export{U as a,N as b,x as c,Y as d,B as e,G as f,L as g,_ as h,j as i,D as j,J as k,z as l,V as m,H as n,R as u};
