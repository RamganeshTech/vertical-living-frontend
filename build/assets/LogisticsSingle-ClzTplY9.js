import{u as G,a as M,r as D,b as R,j as e,M as $,B as C,t as I}from"./index-hYGmCEO1.js";import{b as q,c as Q,f as u,L as _}from"./LogisticsShipmentForm-BuvdhfmR.js";import{C as H,a as J}from"./Card-ChYAICVg.js";import{S as d}from"./Seperator-Bxl1sWSH.js";import{B as K}from"./Badge-V8H1e5s5.js";import{I as W}from"./InfoToolTip-CYQWUzDM.js";import"./Label-hkBviWcw.js";import"./projectApi-Gwage_AH.js";const t=({label:i,value:n})=>e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[e.jsxs("span",{children:[i,":"]})," ",e.jsx("span",{className:"text-gray-900",children:n||"-"})]}),r=({title:i,children:n})=>e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-700 border-b border-blue-200 pb-1",children:i}),n]}),X=i=>{switch(i){case"pending":return"secondary";case"assigned":return"outline";case"in_transit":case"pickedup":return"default";case"delivered":return"default";case"cancelled":return"secondary";default:return"default"}},re=()=>{var j,g,b,h,f,v,p,N,y,k,w;const{id:i,organizationId:n}=G(),T=M(),{data:s,isLoading:A,refetch:L}=q(i),{mutateAsync:P,isPending:F}=Q(),[E,V]=D.useState(null),[B,m]=D.useState(!1),{role:z,permission:x}=R(),O=z==="owner"||((j=x==null?void 0:x.logistics)==null?void 0:j.edit),U=async()=>{var l,o,S;try{await P({fromDept:"logistics",organizationId:n,projectId:s==null?void 0:s.projectId,upiId:(s==null?void 0:s.vehicleDetails.driverUpiId)||null,totalCost:(l=s==null?void 0:s.vehicleDetails)==null?void 0:l.driverCharge}),I({title:"Success",description:"Details sent to Accounts Department"})}catch(c){I({variant:"destructive",title:"Error",description:((S=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:S.message)||(c==null?void 0:c.message)||"operation failed"})}};if(A)return e.jsx($,{});const a=s==null?void 0:s.vehicleDetails;return s?e.jsxs("div",{className:"max-h-full overflow-y-auto max-w-full space-y-4",children:[e.jsxs("header",{className:"sticky top-0 z-20 bg-white border-b border-gray-200 pb-4 pt-2 mb-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{onClick:()=>T(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:["Shipment: ",(s==null?void 0:s.shipmentNumber)||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsxs("div",{className:"flex items-center space-y-1",children:[e.jsx(C,{variant:"primary",isLoading:F,onClick:U,children:"Send To Accounts Dept"}),e.jsx(W,{content:"Click the button to send the details to accounts department",type:"info",position:"bottom"})]}),O&&e.jsxs(C,{size:"md",variant:"primary",onClick:()=>{V(s),m(!0)},children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("section",{className:"flex w-full gap-2",children:[e.jsx(H,{className:"w-1/2",children:e.jsxs(J,{className:"space-y-8 p-6",children:[e.jsx(r,{title:"Shipment Info",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{label:"Scheduled Date",value:u(s==null?void 0:s.scheduledDate)}),e.jsx(t,{label:"Shipment Status",value:e.jsx(K,{variant:X(s==null?void 0:s.shipmentStatus),children:s==null?void 0:s.shipmentStatus})}),(s==null?void 0:s.trackingId)&&e.jsx(t,{label:"Tracking ID",value:e.jsx("span",{className:"font-mono bg-blue-50 px-2 py-1 rounded text-blue-700",children:s.trackingId})}),(s==null?void 0:s.eta)&&e.jsx(t,{label:"ETA",value:`${s.eta} minutes`})]})}),e.jsx(d,{}),e.jsx(r,{title:"Vehicle Info",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(t,{label:"Vehicle Number",value:a==null?void 0:a.vehicleNumber}),e.jsx(t,{label:"Vehicle Type",value:a==null?void 0:a.vehicleType}),e.jsx(t,{label:"Driver Name",value:(g=a==null?void 0:a.driver)==null?void 0:g.name}),e.jsx(t,{label:"Driver Phone",value:(b=a==null?void 0:a.driver)==null?void 0:b.phone}),e.jsx(t,{label:"License Number",value:(h=a==null?void 0:a.driver)==null?void 0:h.licenseNumber}),e.jsx(t,{label:"Driver Charge",value:`â‚¹ ${a==null?void 0:a.driverCharge}`}),e.jsx(t,{label:"Upi Id",value:a==null?void 0:a.driverUpiId})]})}),e.jsx(d,{}),e.jsx(r,{title:"Origin & Destination",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-600 font-bold mb-1",children:"Origin"}),e.jsx(t,{label:"Address",value:(f=s==null?void 0:s.origin)==null?void 0:f.address}),e.jsx(t,{label:"Contact Person",value:(v=s==null?void 0:s.origin)==null?void 0:v.contactPerson}),e.jsx(t,{label:"Contact Phone",value:(p=s==null?void 0:s.origin)==null?void 0:p.contactPhone})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-600 font-bold mb-1",children:"Destination"}),e.jsx(t,{label:"Address",value:(N=s==null?void 0:s.destination)==null?void 0:N.address}),e.jsx(t,{label:"Contact Person",value:(y=s==null?void 0:s.destination)==null?void 0:y.contactPerson}),e.jsx(t,{label:"Contact Phone",value:(k=s==null?void 0:s.destination)==null?void 0:k.contactPhone})]})]})}),e.jsx(d,{}),e.jsx(r,{title:"Timing Schedule",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(t,{label:"Actual Pickup Time",value:u(s==null?void 0:s.actualPickupTime)}),e.jsx(t,{label:"Actual Delivery Time",value:u(s==null?void 0:s.actualDeliveryTime)})]})}),((w=s==null?void 0:s.items)==null?void 0:w.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(r,{title:"Shipment Items",children:e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-sm font-semibold text-gray-700",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Item Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Quantity"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:s.items.map((l,o)=>e.jsxs("tr",{className:"text-sm text-gray-800",children:[e.jsx("td",{className:"px-4 py-2",children:l==null?void 0:l.name}),e.jsx("td",{className:"px-4 py-2",children:l==null?void 0:l.quantity})]},o))})]})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(r,{title:"Tracking Link",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.trackingLink||"No Tracking link provided"})})]}),e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(r,{title:"Notes",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.notes||"No Notes"})})]})]})}),e.jsx("div",{className:"flex-1 w-1/2",children:s.trackingLink?e.jsx("iframe",{src:s.trackingLink,width:"100%",height:"600px"}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center py-12 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-300",children:e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-location text-5xl text-slate-300 mb-4 animate-pulse"}),e.jsx("h4",{className:"text-lg font-semibold text-slate-700",children:"Track the Vehicle by pasting the link"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"paste the porter or rapido tracking link by clicking edit option"}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-slate-400",children:[e.jsx("div",{className:"h-2 w-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0s"}}),e.jsx("div",{className:"h-2 w-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"h-2 w-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})]})})})})]}),B&&e.jsx(_,{shipment:E,onClose:()=>{m(!1),L()},organizationId:n})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white rounded-xl text-center p-6",children:[e.jsx("i",{className:"fas fa-dolly text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Shipment Found"})]})};export{re as default};
