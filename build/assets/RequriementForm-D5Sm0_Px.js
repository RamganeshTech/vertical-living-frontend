import{r as F,j as e,I as y,B as w,t as h,a as A,L as d,S as R,h as L,i as q,k as I,l as a,R as le,d as ne,n as ie}from"./index-Bp58Hj9Q.js";import{a as re,b as te,c as ae,d as ce,e as oe,f as de,g as ue,h as me,i as he,j as xe,k as ge,l as pe}from"./requirementFormApi-D2YIsqAi.js";import{C as M}from"./Card-CcBYg6qB.js";import{T as V}from"./TextArea-B2QRqQfH.js";import{d as B}from"./downloadFile-Du65bAj5.js";import{N as je}from"./constants-BhfkdIAq.js";import{A as be,S as ve}from"./AssignStaff--dWpVw8S.js";import{R as fe}from"./StageFileUploader-D-wQA_WT.js";import{R as we}from"./ResetStageButton-DnFRz2AD.js";import ye from"./MaterialOverviewLoading-DJzlKxep.js";import{S as Ne}from"./ShareDocumentWhatsapp-D5J7m5cD.js";import"./getAllUsersApi-DLOj95NN.js";import"./Skeleton-OQa7E2V5.js";import"./documentationApi-Bzf-WBuk.js";const E=({projectId:s,sectionName:p,existingUploads:j})=>{const[m,r]=F.useState(null),{mutateAsync:x,isPending:N}=re(),{mutateAsync:k,isPending:o}=te(),b=async l=>{var c,i;try{const n=l.target.files;if(!n||n.length===0)return;const t=new FormData;for(const u of Array.from(n))t.append("file",u);await x({projectId:s,sectionName:p,files:t}),h({title:"Success",description:"file uploaded successfully"})}catch(n){h({title:"Error",description:((i=(c=n==null?void 0:n.response)==null?void 0:c.data)==null?void 0:i.message)||"Failed to upload",variant:"destructive"})}},f=async l=>{var c,i;try{await k({projectId:s,sectionName:p,fileId:l}),h({title:"Success",description:"file deleted successfully"})}catch(n){h({title:"Error",description:((i=(c=n==null?void 0:n.response)==null?void 0:c.data)==null?void 0:i.message)||"Failed to delete",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsxs("div",{className:"flex relative items-center justify-between w-full",children:[e.jsx(y,{type:"file",multiple:!0,placeholder:"select files",onChange:b,disabled:N,className:N?"pr-10 opacity-70 cursor-not-allowed w-full":""}),N&&e.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-t-transparent rounded-full border-2 border-gray-500"})})]}),["pdf","image"].map(l=>{const c=j.filter(n=>n.type===l),i=l==="pdf";return e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:i?"PDFs":"Images"}),c.length===0?e.jsxs("div",{className:"text-gray-500 text-sm italic bg-gray-50 p-8 rounded-lg text-center border-2 border-dashed border-gray-200",children:["No ",i?"PDFs":"Images"," uploaded yet."]}):e.jsx("div",{className:i?"space-y-4":"grid grid-cols-2 md:grid-cols-6 lg:grid-cols-8 gap-3  bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:c.map(n=>e.jsx("div",{className:`relative group ${i?"flex justify-between items-center px-4 py-3 border rounded-lg shadow-sm bg-white":"transition-all duration-300 hover:scale-105 hover:z-10"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-3 w-[190px] sm:w-3/2 lg:w-full",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 flex items-center justify-center rounded-lg text-red-600",children:e.jsx("i",{className:"fas fa-file-pdf text-xl"})}),e.jsx("span",{className:"text-sm font-medium !truncate max-w-[100%] whitespace-wrap",children:n.originalName})]}),e.jsx("div",{className:"flex ",children:["eye","trash","download"].map(t=>e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>t==="eye"?window.open(n.url,"_blank"):t==="trash"?f(n._id):B({src:n==null?void 0:n.url,alt:(n==null?void 0:n.originalName)||"file.pdf"}),disabled:t==="trash"&&o,className:"hover:bg-gray-100 shadow-sm",children:e.jsx("i",{className:` fas fa-${t} ${t==="trash"?"text-red-500":t==="download"?"text-blue-500":"text-gray-600"}`})},t))})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative w-full bg-white rounded-lg shadow-md  border-4 border-white group-hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>r(n==null?void 0:n.url),children:[e.jsx("div",{className:"h-[100px] min-w-fit sm:w-full",children:e.jsx("img",{src:n.url||je,alt:n.originalName,className:"!w-full h-full transition-transform duration-300 group-hover:scale-110"})}),e.jsx("div",{className:"absolute inset-6 bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 items-center justify-center hidden sm:flex",children:e.jsx("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-8 group-hover:translate-y-8",children:["eye","trash","download"].map(t=>e.jsx(w,{variant:"secondary",size:"sm",onClick:u=>{u.stopPropagation(),t==="eye"?r(n==null?void 0:n.url):t==="trash"?f(n._id):B({src:n==null?void 0:n.url,alt:(n==null?void 0:n.originalName)||"image"})},disabled:t==="trash"&&o,className:`rounded-full bg-white hover:bg-gray-100 shadow-lg transition-all duration-200 ${t==="trash"?"hover:bg-red-50":""}`,children:e.jsx("i",{className:` fas fa-${t} ${t==="trash"?"text-red-500":t==="download"?"text-blue-500":"text-gray-600"}`})},t))})}),e.jsx("div",{className:"absolute top-2 right-[2px] flex flex-col space-y-1 sm:hidden",children:["eye","trash","download"].map(t=>e.jsx(w,{variant:"secondary",size:"sm",onClick:u=>{u.stopPropagation(),t==="eye"?r(n==null?void 0:n.url):t==="trash"?f(n._id):B({src:n==null?void 0:n.url,alt:(n==null?void 0:n.originalName)||"image"})},disabled:t==="trash"&&o,className:` rounded-full bg-white/90 backdrop-blur-sm border shadow-sm transition-all duration-200 ${t==="trash"?"border-red-200 hover:border-red-300 hover:bg-red-50":t==="download"?"border-blue-200 hover:border-blue-300 hover:bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsx("i",{className:`w-3 h-3 fas fa-${t} ${t==="trash"?"text-red-500":t==="download"?"text-blue-500":"text-gray-600"}`})},t))})]})})},n._id))})]},l)}),m&&e.jsx("div",{onClick:()=>r(null),className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsx("div",{onClick:l=>l.stopPropagation(),className:"relative bg-black/70 rounded-lg shadow-lg max-w-[80%] max-h-[80%] p-2",children:e.jsx("img",{src:m,alt:"preview image",className:"w-[80vw] max-h-[70vh] object-cpntain mx-auto"})})})]})},ke=({data:s,setVisibleSection:p,sectionName:j})=>{var l,c,i;const{projectId:m}=A(),[r,x]=F.useState({layoutType:(s==null?void 0:s.layoutType)||"",measurements:(s==null?void 0:s.measurements)||{top:0,left:0,right:0},kitchenPackage:(s==null?void 0:s.kitchenPackage)||"",graniteCountertop:(s==null?void 0:s.graniteCountertop)||!1,numberOfShelves:(s==null?void 0:s.numberOfShelves)||0,notes:(s==null?void 0:s.notes)||""}),{mutateAsync:N,isPending:k}=ae(),o=n=>{const t=n.target,{name:u,type:g,value:T}=t;let O=T;if(g==="checkbox")O=t.checked;else if(g==="number"){const C=parseFloat(T);O=isNaN(C)?0:Math.max(0,C)}["top","left","right"].includes(u)?x(C=>({...C,measurements:{...C==null?void 0:C.measurements,[u]:O}})):x(C=>({...C,[u]:O}))},b=(n,t)=>{x(u=>({...u,[n]:t}))},f=async()=>{var n,t;try{if(!m)return;await N({projectId:m,updateData:r}),h({title:"Success",description:"Kitchen data updated successfully"})}catch(u){h({title:"Error",description:((t=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:t.message)||(u==null?void 0:u.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Kitchen Requirements"}),e.jsxs("button",{onClick:()=>p(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Layout Type"}),e.jsxs(R,{onValueChange:n=>b("layoutType",n),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select layout",selectedValue:r.layoutType||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select Layout"}),e.jsx(a,{value:"L-shaped",children:"L-shaped"}),e.jsx(a,{value:"Straight",children:"Straight"}),e.jsx(a,{value:"U-shaped",children:"U-shaped"}),e.jsx(a,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Kitchen Package"}),e.jsxs(R,{onValueChange:n=>b("kitchenPackage",n),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select package",selectedValue:r.kitchenPackage||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select Package"}),e.jsx(a,{value:"Essentials",children:"Essentials"}),e.jsx(a,{value:"Premium",children:"Premium"}),e.jsx(a,{value:"Luxury",children:"Luxury"}),e.jsx(a,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"graniteCountertop",checked:r.graniteCountertop??void 0,onChange:o}),e.jsx(d,{children:"Granite Countertop"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Number of Shelves"}),e.jsx(y,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:o,min:0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Measurement - Top (in feet)"}),e.jsx(y,{type:"number",name:"top",value:((l=r.measurements)==null?void 0:l.top)||0,onChange:o,min:0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Measurement - Left (in feet)"}),e.jsx(y,{type:"number",name:"left",value:((c=r.measurements)==null?void 0:c.left)||0,onChange:o,min:0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Measurement - Right (in feet)"}),e.jsx(y,{type:"number",name:"right",value:((i=r.measurements)==null?void 0:i.right)||0,onChange:o,min:0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{children:"Additional Notes"}),e.jsx(V,{name:"notes",value:r.notes||"",onChange:o,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx(E,{projectId:m,sectionName:j,existingUploads:(s==null?void 0:s.uploads)||[]}),e.jsx("div",{className:"pt-4",children:e.jsx(w,{onClick:f,isLoading:k,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Kitchen Requirements"})})]})},Se=({data:s,setVisibleSection:p,sectionName:j})=>{const{projectId:m}=A(),[r,x]=F.useState({seatingStyle:(s==null?void 0:s.seatingStyle)||"",tvUnitDesignRequired:(s==null?void 0:s.tvUnitDesignRequired)||!1,falseCeilingRequired:(s==null?void 0:s.falseCeilingRequired)||!1,wallDecorStyle:(s==null?void 0:s.wallDecorStyle)||"",numberOfFans:(s==null?void 0:s.numberOfFans)||0,numberOfLights:(s==null?void 0:s.numberOfLights)||0,livingHallPackage:(s==null?void 0:s.livingHallPackage)||"",notes:(s==null?void 0:s.notes)||""}),{mutateAsync:N,isPending:k}=ce(),o=l=>{const c=l.target,{name:i,type:n,value:t}=c;let u=t;if(n==="checkbox")u=c.checked;else if(n==="number"){const g=parseFloat(t);u=isNaN(g)?0:Math.max(0,g)}x(g=>({...g,[i]:u}))},b=(l,c)=>{x(i=>({...i,[l]:c}))},f=async()=>{var l,c;try{if(!m)return;await N({projectId:m,updateData:r}),h({title:"Success",description:"Living Hall data updated successfully"})}catch(i){h({title:"Error",description:((c=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:c.message)||(i==null?void 0:i.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Living Hall Requirements"}),e.jsxs("button",{onClick:()=>p(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Seating Style"}),e.jsxs(R,{onValueChange:l=>b("seatingStyle",l),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select seating style",selectedValue:r.seatingStyle||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select seating style"}),e.jsx(a,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(a,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(a,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(a,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Wall Decor Style"}),e.jsxs(R,{onValueChange:l=>b("wallDecorStyle",l),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select wall decoration",selectedValue:r.wallDecorStyle||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select wall decoration"}),e.jsx(a,{value:"Paint",children:"Paint"}),e.jsx(a,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(a,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(a,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Number of Fans"}),e.jsx(y,{type:"number",name:"numberOfFans",value:r.numberOfFans||"",onChange:o,min:0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Number of Lights"}),e.jsx(y,{type:"number",name:"numberOfLights",value:r.numberOfLights||"",onChange:o,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitDesignRequired",checked:r.tvUnitDesignRequired||void 0,onChange:o}),e.jsx(d,{children:"TV Unit Design Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired||void 0,onChange:o}),e.jsx(d,{children:"False Ceiling Required"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Package"}),e.jsxs(R,{onValueChange:l=>b("livingHallPackage",l),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select package",selectedValue:r.livingHallPackage||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select package"}),e.jsx(a,{value:"Essentials",children:"Essentials"}),e.jsx(a,{value:"Premium",children:"Premium"}),e.jsx(a,{value:"Luxury",children:"Luxury"}),e.jsx(a,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{children:"Additional Notes"}),e.jsx(V,{name:"notes",value:r.notes||"",onChange:o,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx(E,{projectId:m,sectionName:j,existingUploads:(s==null?void 0:s.uploads)||[]}),e.jsx("div",{className:"pt-4",children:e.jsx(w,{onClick:f,isLoading:k,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Living Hall Requirements"})})]})},Ce=({data:s,setVisibleSection:p,sectionName:j})=>{const{projectId:m}=A(),[r,x]=F.useState({numberOfBedrooms:(s==null?void 0:s.numberOfBedrooms)||0,bedType:(s==null?void 0:s.bedType)||"",wardrobeIncluded:(s==null?void 0:s.wardrobeIncluded)||!1,falseCeilingRequired:(s==null?void 0:s.falseCeilingRequired)||!1,tvUnitRequired:(s==null?void 0:s.tvUnitRequired)||!1,studyTableRequired:(s==null?void 0:s.studyTableRequired)||!1,bedroomPackage:(s==null?void 0:s.bedroomPackage)||"",notes:(s==null?void 0:s.notes)||""}),{mutateAsync:N,isPending:k}=oe(),o=l=>{const c=l.target,{name:i,type:n,value:t}=c;let u=t;if(n==="checkbox")u=c.checked;else if(n==="number"){const g=parseFloat(t);u=isNaN(g)?0:Math.max(0,g)}x(g=>({...g,[i]:u}))},b=(l,c)=>{x(i=>({...i,[l]:c}))},f=async()=>{var l,c;try{if(!m)return;await N({projectId:m,updateData:r}),h({title:"Success",description:"bedroom data updated successfully"})}catch(i){h({title:"Error",description:((c=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:c.message)||(i==null?void 0:i.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Bedroom Requirements"}),e.jsxs("button",{onClick:()=>p(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Number of Bedrooms"}),e.jsx(y,{type:"number",name:"numberOfBedrooms",value:r.numberOfBedrooms??"",onChange:o,min:1})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Bed Type"}),e.jsxs(R,{onValueChange:l=>b("bedType",l),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select bed type",selectedValue:r.bedType||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select bed type"}),e.jsx(a,{value:"Single",children:"Single"}),e.jsx(a,{value:"Double",children:"Double"}),e.jsx(a,{value:"Queen",children:"Queen"}),e.jsx(a,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",checked:r.wardrobeIncluded??void 0,onChange:o}),e.jsx(d,{children:"Wardrobe Included"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired??void 0,onChange:o}),e.jsx(d,{children:"False Ceiling Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitRequired",checked:r.tvUnitRequired??void 0,onChange:o}),e.jsx(d,{children:"TV Unit Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",checked:r.studyTableRequired??void 0,onChange:o}),e.jsx(d,{children:"Study Table Required"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Package"}),e.jsxs(R,{onValueChange:l=>b("bedroomPackage",l),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select package",selectedValue:r.bedroomPackage||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select package"}),e.jsx(a,{value:"Essentials",children:"Essentials"}),e.jsx(a,{value:"Premium",children:"Premium"}),e.jsx(a,{value:"Luxury",children:"Luxury"}),e.jsx(a,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{children:"Additional Notes"}),e.jsx(V,{name:"notes",value:r.notes||"",onChange:o,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx(E,{projectId:m,sectionName:j,existingUploads:(s==null?void 0:s.uploads)||[]}),e.jsx("div",{className:"pt-4",children:e.jsx(w,{onClick:f,isLoading:k,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Bedroom Requirements"})})]})},Pe=({data:s,setVisibleSection:p,sectionName:j})=>{const{projectId:m}=A(),[r,x]=F.useState({wardrobeType:(s==null?void 0:s.wardrobeType)||"",lengthInFeet:(s==null?void 0:s.lengthInFeet)||0,heightInFeet:(s==null?void 0:s.heightInFeet)||0,mirrorIncluded:(s==null?void 0:s.mirrorIncluded)||!1,wardrobePackage:(s==null?void 0:s.wardrobePackage)||"",numberOfShelves:(s==null?void 0:s.numberOfShelves)||0,numberOfDrawers:(s==null?void 0:s.numberOfDrawers)||0,notes:(s==null?void 0:s.notes)||""}),{mutateAsync:N,isPending:k}=de(),o=l=>{const c=l.target,{name:i,type:n,value:t}=c;let u=t;if(n==="checkbox")u=c.checked;else if(n==="number"){const g=parseFloat(t);u=isNaN(g)?0:Math.max(0,g)}x(g=>({...g,[i]:u}))},b=(l,c)=>{x(i=>({...i,[l]:c}))},f=async()=>{var l,c;try{if(!m)return;await N({projectId:m,updateData:r}),h({title:"Success",description:"Wardrobe data updated successfully"})}catch(i){h({title:"Error",description:((c=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:c.message)||(i==null?void 0:i.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Wardrobe Requirements"}),e.jsxs("button",{onClick:()=>p(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Wardrobe Type"}),e.jsxs(R,{onValueChange:l=>b("wardrobeType",l),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select wardrobe type",selectedValue:r.wardrobeType||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select Type"}),e.jsx(a,{value:"Sliding",children:"Sliding"}),e.jsx(a,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Length (in feet)"}),e.jsx(y,{type:"number",name:"lengthInFeet",value:r.lengthInFeet||0,onChange:o,min:0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Height (in feet)"}),e.jsx(y,{type:"number",name:"heightInFeet",value:r.heightInFeet||0,onChange:o,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"mirrorIncluded",checked:r.mirrorIncluded??void 0,onChange:o}),e.jsx(d,{children:"Mirror Included"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Number of Shelves"}),e.jsx(y,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:o,min:0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Number of Drawers"}),e.jsx(y,{type:"number",name:"numberOfDrawers",value:r.numberOfDrawers||"",onChange:o,min:0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Package"}),e.jsxs(R,{onValueChange:l=>b("wardrobePackage",l),children:[e.jsx(L,{children:e.jsx(q,{placeholder:"Select package",selectedValue:r.wardrobePackage||""})}),e.jsxs(I,{children:[e.jsx(a,{value:"",children:"Select package"}),e.jsx(a,{value:"Essentials",children:"Essentials"}),e.jsx(a,{value:"Premium",children:"Premium"}),e.jsx(a,{value:"Luxury",children:"Luxury"}),e.jsx(a,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{children:"Additional Notes"}),e.jsx(V,{name:"notes",value:r.notes||"",onChange:o,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx(E,{projectId:m,sectionName:j,existingUploads:(s==null?void 0:s.uploads)||[]}),e.jsx("div",{className:"pt-4",children:e.jsx(w,{onClick:f,isLoading:k,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Wardrobe Requirements"})})]})},Fe=({client:s,className:p})=>e.jsxs(M,{className:` ${p} p-4 bg-white shadow border-l-4 border-blue-500`,children:[e.jsxs("h2",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-user-tie mr-2"})," Client Info"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(U,{label:"Name",value:s==null?void 0:s.clientName,icon:"fa-user"}),e.jsx(U,{label:"Email",value:s==null?void 0:s.email,icon:"fa-envelope"}),e.jsx(U,{label:"WhatsApp",value:s==null?void 0:s.whatsapp,icon:"fa-phone"}),e.jsx(U,{label:"Location",value:s==null?void 0:s.location,icon:"fa-location-dot"})]})]}),U=({label:s,value:p,icon:j})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${j} text-gray-600`}),e.jsxs("strong",{children:[s,":"]})," ",p||"N/A"]}),Re=F.memo(Fe),Le=({sections:s,setVisibleSection:p})=>e.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(({key:j,label:m,icon:r})=>e.jsx("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer group",onClick:()=>p(j),children:e.jsxs("div",{className:"flex items-center justify-between p-5 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-3 rounded-full text-xl",children:e.jsx("i",{className:r})}),e.jsx("span",{className:"text-sm font-medium text-gray-800 group-hover:text-blue-700",children:m})]}),e.jsx("i",{className:"fa-solid fa-chevron-right text-blue-400 group-hover:text-blue-600"})]})},j))}),qe=le.memo(Le),Y=[{Component:Ce,icon:"fa-solid fa-bed",label:"Bedroom Section",key:"bedroom"},{Component:ke,icon:"fa-solid fa-kitchen-set",label:"Kitchen Section",key:"kitchen"},{Component:Se,icon:"fa-solid fa-house",label:"Living Hall Section",key:"livingHall"},{Component:Pe,icon:"fa-solid fa-shirt",label:"Wardrobe Section",key:"wardrobe"}];function Ke(){var $,D,H,_,K;const{projectId:s,organizationId:p}=A(),{role:j}=ne(),{isMobile:m,openMobileSidebar:r}=ie(),[x,N]=F.useState(""),[k,o]=F.useState(!1),[b,f]=F.useState(null),{data:l,isLoading:c,error:i,refetch:n}=ue({projectId:s}),{mutateAsync:t,isPending:u}=me(),{mutateAsync:g,isPending:T}=he(),{mutateAsync:O,isPending:C}=xe(),{mutateAsync:G,isPending:z}=ge(),{mutateAsync:Q,isPending:J}=pe();if(c)return e.jsx(ye,{});const X=async()=>{var S,v;if(window.confirm("Are you sure want to mark it as completed?"))try{T||(await g({formId:l._id,projectId:s}),h({title:"Success",description:"completion updated successfully"}))}catch(P){h({title:"Error",description:((v=(S=P==null?void 0:P.response)==null?void 0:S.data)==null?void 0:v.message)||"Failed to update to complete the form",variant:"destructive"})}},Z=async S=>{try{const v=["owner","staff","CTO"];if(!j)throw new Error("Not Authorized");if(!v.includes(j))throw new Error("Dont have the access");await navigator.clipboard.writeText(S),o(!0),h({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>o(!1),4e3)}catch(v){h({title:"Error",description:v.message||"Failed to copy link",variant:"destructive"})}},ee=async()=>{var S,v;try{const P=await t({projectId:s});N(P.inviteLink||P),h({title:"Success",description:"Invitation link generated successfully"})}catch(P){h({title:"Error",description:((v=(S=P==null?void 0:P.response)==null?void 0:S.data)==null?void 0:v.message)||P.message||"Failed to generate invitation link",variant:"destructive"})}},W=async()=>{try{await navigator.clipboard.writeText(x),o(!0),h({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>o(!1),2e3)}catch{h({title:"Error",description:"Failed to copy link",variant:"destructive"})}},se=()=>{const S=`You're requested to fill the form, Click this link to fill the form: ${x}`,v=`https://wa.me/?text=${encodeURIComponent(S)}`;window.open(v,"_blank")};return e.jsx("div",{className:"h-full w-full overflow-y-auto ",children:b?e.jsx("div",{className:"min-h-screen",children:Y.map(({Component:S,key:v})=>b===v&&e.jsx("div",{className:"pt-6",children:e.jsx(S,{sectionName:v,data:l==null?void 0:l[v],isEditable:l==null?void 0:l.isEditable,setVisibleSection:f})},v))}):e.jsxs("div",{className:"h-full w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col w-full sm:flex-row justify-between sm:items-center items-start gap-4",children:[e.jsx("div",{className:"",children:e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[m&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})," ",e.jsx("i",{className:"fa-solid fa-pencil mr-2"})," Client Requirement"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] lg:!w-[60%] justify-end lg:justify-end",children:[e.jsxs(w,{isLoading:T,onClick:X,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(we,{projectId:s,stageNumber:1,stagePath:"requirementform",className:"sm:!max-w-[20%] w-full"}),!i&&e.jsx(Ne,{projectId:s,stageNumber:"1",className:"w-full sm:w-fit",isStageCompleted:l==null?void 0:l.status}),e.jsx(be,{stageName:"RequirementFormModel",projectId:s,organizationId:p,currentAssignedStaff:(l==null?void 0:l.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),i&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((D=($=i==null?void 0:i.response)==null?void 0:$.data)==null?void 0:D.message)||"Failed to load data"}),e.jsx(w,{onClick:()=>n(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!i&&e.jsxs("main",{className:"h-[calc(100vh-90px)] overflow-y-auto custom-scrollbar space-y-6",children:[e.jsxs(M,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ve,{startedAt:(H=l==null?void 0:l.timer)==null?void 0:H.startedAt,projectId:s,stageName:"requirementform",refetchStageMutate:n,completedAt:(_=l==null?void 0:l.timer)==null?void 0:_.completedAt,deadLine:(K=l==null?void 0:l.timer)==null?void 0:K.deadLine,formId:l==null?void 0:l._id,deadLineMutate:O,isPending:C})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 sm:gap-6",children:[e.jsx(Re,{className:"w-[100%] md:w-[50%]",client:l==null?void 0:l.clientData}),e.jsx(M,{className:"p-4 w-[100%] md:w-[50%] shadow border-l-4 border-blue-500 bg-white",children:e.jsx(fe,{formId:l==null?void 0:l._id,existingUploads:l==null?void 0:l.uploads,onUploadComplete:n,uploadFilesMutate:G,uploadPending:z,projectId:s,refetch:n,onDeleteUpload:Q,deleteFilePending:J})})]}),e.jsx(qe,{sections:Y,setVisibleSection:f}),e.jsx("div",{className:"pb-6",children:l!=null&&l.shareToken?e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(y,{value:l==null?void 0:l.shareToken,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(w,{onClick:()=>Z(l==null?void 0:l.shareToken),className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${k?"fa-check":"fa-copy"}`})})]})]}):e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-lg space-y-4",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-blue-900 flex items-center",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request to fill the form by generating a link."}),x?e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(y,{value:x,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(w,{onClick:W,className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${k?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(w,{onClick:se,className:"w-full sm:w-auto bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(w,{onClick:W,className:"w-full sm:w-auto border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]})]}):e.jsxs(w,{onClick:ee,isLoading:u,className:"w-full bg-blue-600 text-white py-2.5 sm:py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]})]})})]})]})})}export{Ke as default};
