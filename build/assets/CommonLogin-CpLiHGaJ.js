import{r as d,v as j,a as I,j as s,L as y,B as k,w as C,x as R,y as q,z as G,A as P,D as L,t as h}from"./index-BAM0eJUz.js";import{h as O}from"./validation-u7TNeOxm.js";import{b as S,c as T,d as E}from"./Card-CdxfjEr-.js";import{I as p}from"./Input-1UBXZqEj.js";import{L as b}from"./Label-C8i6KaZe.js";import{u as F}from"./commonAuthApi-CB1-7Whz.js";const H=()=>{const[o,x]=d.useState({email:"",password:""}),[t,m]=d.useState({}),[n,N]=d.useState(!1),r=j(),w=I(),{mutateAsync:g,isPending:c}=F(),u=a=>{x(i=>({...i,[a.target.name]:a.target.value}))},v=async a=>{a.preventDefault();try{m({});const i=O(o);if(Object.keys(i).length>0){m(i);return}const l=await g(o);if(l.ok){const e=l==null?void 0:l.data,f=e==null?void 0:e.role;switch(r(C({_id:(e==null?void 0:e.userId)||(e==null?void 0:e.staffId)||(e==null?void 0:e.workerId)||(e==null?void 0:e.CTOId)||(e==null?void 0:e.clientId),role:e==null?void 0:e.role,isauthenticated:!0,userName:(e==null?void 0:e.userName)||(e==null?void 0:e.staffName)||(e==null?void 0:e.workerName)||(e==null?void 0:e.CTOName)||(e==null?void 0:e.clientName),permission:(e==null?void 0:e.permission)||{},isGuideRequired:e==null?void 0:e.isGuideRequired,ownerId:e.ownerId})),f){case"owner":r(L({userId:e.userId,userName:e.userName,email:e.email,phoneNo:e.phoneNo,role:e.role,isauthenticated:!0,isGuideRequired:e.isGuideRequired,ownerId:e==null?void 0:e.ownerId}));break;case"staff":r(P({staffId:e.staffId,staffName:e.staffName,email:e.email,phoneNo:e.phoneNo,role:e.role,isauthenticated:!0,permission:e.permission||{},isGuideRequired:e.isGuideRequired,ownerId:e==null?void 0:e.ownerId}));break;case"CTO":r(G({CTOId:e.CTOId,CTOName:e.CTOName,email:e.email,phoneNo:e.phoneNo,role:e.role,isauthenticated:!0,permission:e.permission||{},isGuideRequired:e.isGuideRequired,ownerId:e==null?void 0:e.ownerId}));break;case"worker":r(q({workerId:e.workerId||e._id,workerName:e.workerName,email:e.email,phoneNo:e.phoneNo,role:e.role,isauthenticated:!0,permission:e.permission||{},isGuideRequired:e.isGuideRequired,ownerId:e==null?void 0:e.ownerId}));break;case"client":r(R({clientId:e.clientId,clientName:e.clientName,email:e.email,phoneNo:e.phoneNo,role:e.role,isauthenticated:!0,permission:e.permission||{},isGuideRequired:e.isGuideRequired,ownerId:e==null?void 0:e.ownerId}));break;default:console.warn("Unknown role detected:",f)}h({title:"Success",description:"Login successful"}),w("/organizations")}}catch(i){h({title:"Login Failed",description:(i==null?void 0:i.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return s.jsx("div",{className:"min-h-screen overflow-y-auto relative bg-gradient-to-br from-blue-50 p-4 via-white to-blue-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-md  shadow-xl border border-gray-100",children:[s.jsxs(S,{className:"text-center pb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx("i",{className:"fas fa-shield-halved text-white text-2xl"})}),s.jsx(T,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Login"}),s.jsx(E,{className:"text-blue-600 text-base mt-2",children:"Sign in to access your organization dashboard"})]}),s.jsxs("form",{onSubmit:v,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(b,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("i",{className:"fas fa-envelope text-blue-400"})}),s.jsx(p,{id:"email",name:"email",type:"email",value:o.email,onChange:u,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${t.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:t.email})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(b,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("i",{className:"fas fa-lock text-blue-400"})}),s.jsx(p,{id:"password",name:"password",type:n?"text":"password",value:o.password,onChange:u,placeholder:"••••••••",className:`pl-10 pr-12 border-2 transition-all duration-200 ${t.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:t.password}),s.jsx("button",{type:"button",onClick:()=>N(!n),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("i",{className:`fas ${n?"fa-eye-slash":"fa-eye"}`})})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(y,{to:"/common/forgotpassword",className:"text-blue-600 text-sm font-medium hover:underline",children:"Forgot Password?"})}),s.jsx(k,{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.01]",children:c?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-spinner fa-spin"})," Authenticating..."]}):s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-sign-in-alt"})," Sign In"]})})]})]})})};export{H as default};
