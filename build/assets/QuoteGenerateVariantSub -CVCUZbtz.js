import{r as o,j as e,X as fe,u as ge,a as Ne,b as be,R as ye,B as je,M as Se,t as xe}from"./index-hYGmCEO1.js";import{b as Me,c as me,d as Te}from"./quoteVariantApi-DvPnd4Sz.js";import{S as re}from"./SearchSelect-BD0C67Q6.js";import{C as se}from"./Card-ChYAICVg.js";import{c as ke,u as ve}from"./labourRateconfigApi-BiMEe7s8.js";import{S as we}from"./SearchSelectNew-DgVrwo5b.js";const W=(n,B,w)=>{const m=String(n).toLowerCase().replace("mm","").trim(),T=B.find(L=>String(L.thickness).toLowerCase().replace("mm","").trim()===m);return(T==null?void 0:T.rs)!==void 0?T.rs:w==="laminate"?Re:0},Le=o.forwardRef(({data:n,index:B,brandOptions:w,laminateBrandOptions:m,laminateRatesByBrand:T,brandRatesByName:L,labourCost:Y,selectedBrand:P,selectedLaminateBrand:I,onFurnitureChange:g},z)=>{var J,K;const[j,U]=o.useState(null),[y,V]=o.useState(null),S=j?L[j]||[]:[],q=y?T[y]||[]:[],X=o.useRef(I),G=o.useRef(P),[u,D]=o.useState((n==null?void 0:n.coreMaterials)||[]),[k,Z]=o.useState((n==null?void 0:n.fittingsAndAccessories)||[]),[H,F]=o.useState((n==null?void 0:n.glues)||[]),[M,_]=o.useState((n==null?void 0:n.nonBrandMaterials)||[]);o.useEffect(()=>{D((n==null?void 0:n.coreMaterials)||[])},[n==null?void 0:n.coreMaterials]),o.useEffect(()=>{G.current!==P&&(U(P),G.current=P)},[P]),o.useEffect(()=>{X.current!==I&&(V(I),X.current=I)},[I]),o.useEffect(()=>{!j&&(w==null?void 0:w.length)>0&&U(w[0])},[w]),o.useEffect(()=>{!y&&(m==null?void 0:m.length)>0&&V(m[0])},[m]);const E=()=>{let t=0;const s=j?L[j]||[]:[],a=y?T[y]||[]:[],c=u,l=c[0],p=((l==null?void 0:l.carpenters)||0)*((l==null?void 0:l.days)||0)*Y,i=c.length>0?p/c.length:0;for(const N of c){const v=W(N.plywoodNos.thickness,s,"plywood"),b=W(N.laminateNos.thickness,a,"laminate"),A=N.plywoodNos.quantity*32*v,de=N.laminateNos.quantity*32*b;t+=A+de+i}const x=N=>(N.quantity||0)*(N.cost||0),d=N=>N.cost||0,h=n.fittingsAndAccessories.reduce((N,v)=>N+x(v),0),f=n.glues.reduce((N,v)=>N+d(v),0),C=n.nonBrandMaterials.reduce((N,v)=>N+x(v),0);return t+=h+f+C,Math.round(t)},R=(r,t)=>{if(!y&&!y)return r.rowTotal||0;const a=W(r.plywoodNos.thickness,S,"plywood"),c=W(r.laminateNos.thickness,q,"laminate");console.log("ply Rate",a),console.log("lami Rate",c);const l=32,p=r.plywoodNos.quantity*(a*l),i=r.laminateNos.quantity*(c*l);console.log("plyCost",p),console.log("lamiCost",i);const x=p+i;console.log("baseMaterialCost",x);const d=x*(r.profitOnMaterial/100);console.log("profitOnMaterial",d);const h=t.length,f=t[0],v=f.carpenters*f.days*Y*(1+(f.profitOnLabour||0)/100)/h,b=x+d+v;return Math.round(b)},ee=u.reduce((r,t)=>r+R(t,u),0),O=k.reduce((r,t)=>{const s=(t.quantity||0)*(t.cost||0),a=s*((t.profitOnMaterial||0)/100);return r+s+a},0),te=H.reduce((r,t)=>{const s=t.cost||0,a=s*((t.profitOnMaterial||0)/100);return r+s+a},0),Q=M.reduce((r,t)=>{const s=(t.quantity||0)*(t.cost||0),a=s*((t.profitOnMaterial||0)/100);return r+s+a},0),ae=ee+O+te+Q;o.useImperativeHandle(z,()=>({getUpdatedFurniture:()=>{const r=u.map(d=>({...d,rowTotal:R(d,u)})),t=[...k],s=[...H],a=[...M],c=t.reduce((d,h)=>{const f=(h.quantity||0)*(h.cost||0),C=f*((h.profitOnMaterial||0)/100);return d+f+C},0),l=s.reduce((d,h)=>{const f=h.cost||0,C=f*((h.profitOnMaterial||0)/100);return d+f+C},0),p=a.reduce((d,h)=>{const f=(h.quantity||0)*(h.cost||0),C=f*((h.profitOnMaterial||0)/100);return d+f+C},0),i=r.reduce((d,h)=>d+(h.rowTotal||0),0),x=i+c+l+p;return{furnitureName:n.furnitureName,plywoodBrand:j,laminateBrand:y,coreMaterials:u.map(d=>({...d,rowTotal:R(d,u)})),fittingsAndAccessories:t,glues:s,nonBrandMaterials:a,coreMaterialsTotal:i,fittingsAndAccessoriesTotal:c,gluesTotal:l,nonBrandMaterialsTotal:p,furnitureTotal:x,totals:{core:i,fittings:c,glues:l,nbms:p,furnitureTotal:x}}}}));const ce=(r,t)=>{const s=[...u];if(s[r]={...s[r],profitOnMaterial:t||0},D(s),r!==0){g==null||g();return}const a=t,c=(l,p=!1)=>l.map(i=>{const x=p?i.cost||0:(i.quantity||0)*(i.cost||0),d=x*((a||0)/100);return{...i,profitOnMaterial:a,rowTotal:Math.round(x+d)}});Z(l=>c(l)),F(l=>c(l,!0)),_(l=>c(l)),g==null||g()},ne=r=>{if(!u[0])return;const t=[...u];t[0]={...t[0],profitOnLabour:r||0},D(t),g==null||g()},le=(r,t,s)=>{if(r==="Fittings & Accessories"){const a=[...k],c=(a[t].quantity||0)*(a[t].cost||0),l=c*((s||0)/100);a[t]={...a[t],profitOnMaterial:s,rowTotal:Math.round(c+l)},Z(a)}if(r==="Glues"){const a=[...H],c=a[t].cost||0,l=c*((s||0)/100);a[t]={...a[t],profitOnMaterial:s,rowTotal:Math.round(c+l)},F(a)}if(r==="Non-Branded Materials"){const a=[...M],c=(a[t].quantity||0)*(a[t].cost||0),l=c*((s||0)/100);a[t]={...a[t],profitOnMaterial:s,rowTotal:Math.round(c+l)},_(a)}g==null||g()};o.useEffect(()=>{g==null||g()},[j,y,u,n.fittingsAndAccessories,n.glues]);const oe=()=>e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold text-md text-gray-800 mb-2",children:["Core Materials (Total: ₹",ee.toLocaleString("en-IN"),")"]}),e.jsx("div",{className:"overflow-x-auto rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsxs("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plywood"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Laminate"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Carpenters / Day"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Days"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Material"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Labour"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"})]})]}),e.jsx("tbody",{children:(u==null?void 0:u.length)>0&&(u==null?void 0:u.map((r,t)=>{var a,c,l,p,i,x,d,h;const s=R(r,u);return e.jsxs("tr",{className:"group border",children:[t===0&&e.jsx("td",{rowSpan:(a=n==null?void 0:n.coreMaterials)==null?void 0:a.length,className:"text-center border-r-1 p-2",children:r!=null&&r.imageUrl?e.jsx("img",{src:(r==null?void 0:r.imageUrl)||fe,className:"h-10 mx-auto"}):e.jsx(e.Fragment,{children:"—"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(r==null?void 0:r.itemName)||"—"}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((c=r==null?void 0:r.plywoodNos)==null?void 0:c.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((l=r==null?void 0:r.plywoodNos)==null?void 0:l.thickness)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((p=r==null?void 0:r.laminateNos)==null?void 0:p.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((i=r==null?void 0:r.laminateNos)==null?void 0:i.thickness)??0}),t===0&&e.jsxs(e.Fragment,{children:[e.jsx("td",{rowSpan:(x=n==null?void 0:n.coreMaterials)==null?void 0:x.length,className:"text-center border-r-1 p-2",children:(r==null?void 0:r.carpenters)||0}),e.jsx("td",{rowSpan:(d=n==null?void 0:n.coreMaterials)==null?void 0:d.length,className:"text-center border-r-1 p-2",children:(r==null?void 0:r.days)||0})]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:u[t].profitOnMaterial,onChange:f=>ce(t,parseFloat(f.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),t===0&&e.jsx("td",{rowSpan:(h=n==null?void 0:n.coreMaterials)==null?void 0:h.length,className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:u[0].profitOnLabour,onChange:f=>ne(parseFloat(f.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(r==null?void 0:r.remarks)||"—"}),e.jsxs("td",{className:"text-center border-r-1 p-2 text-green-700 font-bold",children:["₹",s==null?void 0:s.toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:"—"})]},t)}))})]})})]}),ie=r=>r==="Fittings & Accessories"?Math.round(O):r==="Glues"?Math.round(te):r==="Non-Branded Materials"?Math.round(Q):0,$=(r,t)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2 text-gray-800",children:[r,"(Total: ₹",ie(r).toLocaleString("en-IN"),")"]}),e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsx("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Profit On Materials"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:t.length>0&&t.map((s,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.itemName)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.description)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.quantity)||0}),e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.cost)||0}),e.jsx("td",{className:"text-center border p-2",children:e.jsx("input",{type:"number",value:s.profitOnMaterial||0,onChange:c=>le(r,a,parseFloat(c.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),e.jsxs("td",{className:"text-center border p-2 text-green-700 font-bold",children:["₹",(s.rowTotal||0).toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border p-2",children:"—"})]},a))})]})]});return e.jsxs("div",{className:"shadow-md p-4 my-4 border rounded-lg bg-white",children:[e.jsxs("div",{className:" flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold  text-blue-600",children:["Product ",B+1,": ",n.furnitureName]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-right text-xl font-bold text-green-700",children:["Product Total: ₹",ae.toLocaleString("en-IN")]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Raw Cost (no profit)"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-700",children:["₹",E().toLocaleString("en-IN")]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Plwyood Brand:"}),e.jsx(re,{options:w,placeholder:"-- Choose Plwyood Brand --",searchPlaceholder:"Search Plywood brands...",onSelect:U,selectedValue:j||"",className:"mt-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Laminate Brand:"}),e.jsx(re,{options:m,placeholder:"-- Choose Laminate Brand --",searchPlaceholder:"Search laminate brands...",onSelect:V,selectedValue:y||"",className:"mt-1"})]})]}),e.jsxs("div",{children:[j&&((J=L[j])==null?void 0:J.length)>0&&e.jsxs("div",{className:"mt-6 border border-gray-200 bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Available Thickness & Rates for ",e.jsx("span",{className:"text-blue-600",children:j})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left border border-gray-100",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:L[j].map((r,t)=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-r text-gray-700 font-medium",children:r.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",r.rs.toFixed(2)]})]},t))})]})})]}),y&&((K=T[y])==null?void 0:K.length)>0&&e.jsxs("div",{className:"mt-4 border bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Laminate Rates for ",e.jsx("span",{className:"text-blue-600",children:y})]}),e.jsxs("table",{className:"min-w-full text-sm border",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:T[y].map((r,t)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2 border-r font-medium",children:r.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",r.rs.toFixed(2)]})]},t))})]})]})]})]}),oe(),$("Fittings & Accessories",k),$("Glues",H),$("Non-Branded Materials",M)]})}),Re=0,qe=()=>{var J,K,r;const{organizationId:n,quoteId:B}=ge(),w=Ne(),{data:m,isLoading:T}=Me(n,B);let{data:L,isLoading:Y}=me(n,"plywood"),{data:P}=me(n,"Laminate");const[I,g]=o.useState({categoryId:"",categoryName:""});let{data:z=0}=ke({organizationId:n,categoryId:I.categoryId}),{data:j=[]}=ve(n);const U=(j||[]).map(t=>({value:t._id,label:t.name})),{mutateAsync:y,isPending:V}=Te(),S=o.useRef([]),[q,X]=o.useState(null),[G,u]=o.useState(null),{role:D,permission:k}=be(),Z=D==="owner"||((J=k==null?void 0:k.quotevariant)==null?void 0:J.create),H=D==="owner"||((K=k==null?void 0:k.quotevariant)==null?void 0:K.edit),F=o.useMemo(()=>{if(!L)return{};const t={};return L.forEach(s=>{const a=(s==null?void 0:s.data)||{},c=a.Brand??a.brand,l=a["thickness (mm)"]||a.thickness||a.Thickness;let p=a.Rs||a.rs;if(c&&l&&p){const i=String(c).trim(),x=String(l).trim(),d=parseFloat(p);t[i]||(t[i]=[]),t[i].push({thickness:x,rs:d})}}),t},[L]),M=o.useMemo(()=>Object.keys(F),[F]),_=o.useMemo(()=>{if(!P)return{};const t={};return P.forEach(s=>{const a=(s==null?void 0:s.data)||{},c=a.Brand??a.brand,l=a["thickness (mm)"]||a.thickness||a.Thickness,p=a.Rs||a.rs;if(c&&l&&p){const i=String(c).trim(),x=String(l).trim(),d=parseFloat(p);t[i]||(t[i]=[]),t[i].push({thickness:x,rs:d})}}),t},[P]),E=o.useMemo(()=>Object.keys(_),[_]),[R,ee]=o.useState([]),[O,te]=o.useState(0),[Q,ae]=o.useState(0),ce=()=>{const t=S.current.map(a=>a.current).filter(a=>a!==null).map(a=>a.getUpdatedFurniture());console.log("updatedFurnitures",t);const s=t.reduce((a,c)=>a+c.totals.furnitureTotal,0);console.log("total",s),te(s),ae(ie())},ne=t=>{const s=U.find(a=>a.value===t);g(s?{categoryId:s.value,categoryName:s.label}:{categoryId:"",categoryName:""})},{profitDifference:le,profitPercentage:oe}=o.useMemo(()=>{const t=O-Q,s=Q>0?t/Q*100:0;return{profitDifference:Math.round(t),profitPercentage:s}},[O,Q]),ie=()=>{const t=S.current.map(c=>c.current).filter(c=>c!==null).map(c=>c.getUpdatedFurniture()),s=32;let a=0;return t.forEach(c=>{const l=c.plywoodBrand?F[c.plywoodBrand]||[]:[],p=c.laminateBrand?_[c.laminateBrand]||[]:[],i=c.coreMaterials,x=i[0],d=((x==null?void 0:x.carpenters)||0)*((x==null?void 0:x.days)||0)*z,h=i.length>0?d/i.length:0;i.forEach(b=>{const A=W(b.plywoodNos.thickness,l,"plywood"),de=W(b.laminateNos.thickness,p,"laminate"),ue=b.plywoodNos.quantity*(A*s),pe=b.laminateNos.quantity*(de*s),he=ue+pe;a+=he+h});const f=b=>b.quantity*b.cost,C=c.fittingsAndAccessories.reduce((b,A)=>b+f(A),0),N=c.glues.reduce((b,A)=>b+(A.cost||0),0),v=c.nonBrandMaterials.reduce((b,A)=>b+f(A),0);a+=C+N+v}),Math.round(a)},$=async()=>{var t,s;try{if(!n||!B||!m||!q){xe({title:"Missing info",description:"Please ensure brand and all details are selected",variant:"destructive"});return}const a=S.current.map(l=>l.current).filter(l=>l!==null).map(l=>l.getUpdatedFurniture()),c=a.reduce((l,p)=>l+p.totals.furnitureTotal,0);await y({quoteId:B,organizationId:n,data:{quoteId:B,organizationId:n,projectId:m.projectId,brandName:q,laminateBrand:G,furnitures:a,grandTotal:c,notes:"Generated with brand variant"}}),xe({title:"success",description:"Successfully created, check it in the Quote for clients section"})}catch(a){xe({title:"Error",description:((s=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:s.message)??"Operation failed"})}};return o.useEffect(()=>{if(!(m!=null&&m.furnitures))return;const t=m.furnitures.map(s=>({furnitureName:s.furnitureName,coreMaterials:s.coreMaterials||[],fittingsAndAccessories:s.fittingsAndAccessories||[],glues:s.glues||[],nonBrandMaterials:s.nonBrandMaterials||[],totals:{core:s.coreMaterialsTotal||0,fittings:s.fittingsAndAccessoriesTotal||0,glues:s.gluesTotal||0,nbms:s.nonBrandMaterialsTotal||0,furnitureTotal:s.furnitureTotal||0},plywoodBrand:q,laminateBrand:G}));ee(t)},[m]),S.current.length!==R.length&&(S.current=R.map((t,s)=>S.current[s]??ye.createRef())),o.useEffect(()=>{console.log("furnitureRefs Array",S),S.current=R.map((t,s)=>S.current[s]??o.createRef())},[R]),o.useEffect(()=>{!q&&(M==null?void 0:M.length)>0&&X(M[0])},[M]),o.useEffect(()=>{!G&&(E==null?void 0:E.length)>0&&u(E[0])},[E]),e.jsxs("div",{className:"p-2 max-h-full overflow-y-auto",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 pb-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("button",{onClick:()=>w(-1),className:"flex items-center justify-center w-8 h-8 bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-md transition-colors flex-shrink-0",children:e.jsx("i",{className:"fas fa-arrow-left text-gray-600 text-sm"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:((r=m==null?void 0:m.projectId)==null?void 0:r.projectName)||"Project"}),e.jsx("p",{className:"text-md text-gray-500",children:m!=null&&m.quoteNo?`Quote: #${m==null?void 0:m.quoteNo}`:""})]})]}),(Z||H)&&e.jsx(je,{onClick:$,disabled:V,className:"flex-shrink-0",children:V?"Generating...":"Generate Quote for Client"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Plywood Brand:"}),e.jsx(re,{options:M,placeholder:"Select Plywood Brand",searchPlaceholder:"Search brands...",onSelect:X,selectedValue:q||"",className:"flex-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Laminate Brand:"}),e.jsx(re,{options:E,placeholder:"Select Laminate Brand",searchPlaceholder:"Search brands...",onSelect:u,selectedValue:G||"",className:"flex-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Select Salary Category"}),e.jsx(we,{options:U,placeholder:"Choose Labour Category",searchPlaceholder:"Search by name...",value:I.categoryId,onValueChange:ne,searchBy:"name",displayFormat:"detailed",className:"flex-1"})]})]}),e.jsxs("div",{className:" grid grid-cols-4 gap-2",children:[e.jsx(se,{className:"px-2 py-4 border-l-4 border-blue-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Project Cost "," "," ",e.jsx("span",{className:"font-bold",children:"(without profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-blue-600",children:["₹",Q.toLocaleString("en-IN")]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-green-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Client Quote Amount "," "," ",e.jsx("span",{className:"font-bold",children:"(with profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-green-600",children:["₹",O.toLocaleString("en-IN")]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-violet-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-md text-gray-600",children:"Profit Amount"}),e.jsxs("p",{className:"text-md font-bold text-violet-600",children:["₹",le.toLocaleString("en-IN")," ",e.jsxs("span",{className:"text-black !text-[12px] ml-[5px] font-semibold",children:["(",oe.toFixed(2),"%)"]})]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-orange-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-md text-gray-600",children:"Single Labour Cost"}),e.jsxs("p",{className:"text-md font-bold text-orange-600",children:["₹",z]})]})})]})]}),T||Y?e.jsx(Se,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[R.map((t,s)=>e.jsx(Le,{index:s,data:t,labourCost:z,ref:S.current[s],laminateRatesByBrand:_,brandRatesByName:F,selectedBrand:q,selectedLaminateBrand:G,brandOptions:M,laminateBrandOptions:E,onFurnitureChange:ce},s)),e.jsx("div",{className:"mt-10 text-right",children:e.jsxs("div",{className:"inline-block bg-green-50 border border-green-200 rounded-md px-6 py-4",children:[e.jsx("p",{className:"text-md font-medium text-gray-700 mb-1",children:"Total Estimate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["₹",O.toLocaleString("en-IN")]})]})})]})})]})};export{Re as DEFAULT_LAMINATE_RATE_PER_SQFT,qe as default};
