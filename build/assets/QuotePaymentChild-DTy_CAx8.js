import{u as N,a as v,r,j as s,M as T,B as w}from"./index-MXS_gbde.js";import{a as y}from"./paymentQuoteApi-CdIUoULg.js";import{C as B}from"./ClientFurnitures-C1t6bDOY.js";const E=()=>{var d,c;const{projectId:m,id:x}=N(),u=v();let{data:i,isLoading:f,isError:g,error:a,refetch:p}=y(m,x);const e=i==null?void 0:i.quoteId,h=r.useRef([]),[l,j]=r.useState([]),[o,b]=r.useState((e==null?void 0:e.grandTotal)||0);return r.useEffect(()=>{e!=null&&e.grandTotal&&b(e.grandTotal)},[e==null?void 0:e.grandTotal]),r.useEffect(()=>{if(!(e!=null&&e.furnitures))return;const n=e.furnitures.map(t=>({furnitureName:t.furnitureName,coreMaterials:t.coreMaterials||[],fittingsAndAccessories:t.fittingsAndAccessories||[],glues:t.glues||[],nonBrandMaterials:t.nonBrandMaterials||[],totals:{core:t.coreMaterialsTotal||0,fittings:t.fittingsAndAccessoriesTotal||0,glues:t.gluesTotal||0,nbms:t.nonBrandMaterialsTotal||0,furnitureTotal:t.furnitureTotal||0},plywoodBrand:"",laminateBrand:""}));j(n)},[e]),f?s.jsx(T,{}):g?s.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[s.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),s.jsx("p",{className:"text-red-500 text-sm mb-4",children:((c=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:c.message)||(a==null?void 0:a.message)||"Failed to load payment confirmation data"}),s.jsx(w,{onClick:()=>p(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}):(console.log("quotes",e),s.jsxs("div",{className:"mt-2 max-h-full overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{onClick:()=>u(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:s.jsx("i",{className:"fas fa-arrow-left"})}),s.jsxs("h1",{className:"text-2xl text-blue-600 font-semibold",children:["Quote Details - ",e==null?void 0:e.quoteNo]})]}),s.jsxs("div",{className:"px-4 text-center flex gap-2 text-[20px]",children:[s.jsx("p",{className:"text-md text-gray-600",children:"Total Cost"}),s.jsxs("p",{className:"text-md font-bold text-green-600",children:["₹",o==null?void 0:o.toLocaleString("en-in")]})]})]}),s.jsx("div",{children:l==null?void 0:l.map((n,t)=>s.jsx(B,{data:n,index:t,isBlurred:!1,ref:h.current[t]},n._id))})]}))};export{E as default};
