import{c,q as g}from"./index-C2KHEypQ.js";import{g as u}from"./roleCheck-DBD7VNWv.js";import{u as v}from"./useQuery-BmC89CNR.js";import{u as y}from"./useMutation-DaAue-fW.js";import{u as h}from"./useInfiniteQuery-Ce_ii5sB.js";const I=async({organizationId:t,customerId:n,page:e,limit:o,fromInvoiceDate:i,toInvoiceDate:l,createdFromDate:w,createdToDate:f,search:d,sortBy:p,sortOrder:m,api:s})=>{const r=new URLSearchParams;t&&r.append("organizationId",t),n&&r.append("customerId",n),e&&r.append("page",e.toString()),o&&r.append("limit",o.toString()),i&&r.append("fromInvoiceDate",i),l&&r.append("toInvoiceDate",l),w&&r.append("createdFromDate",w),f&&r.append("createdToDate",f),p&&r.append("sortBy",p),m&&r.append("sortOrder",m),d&&r.append("search",d);const{data:a}=await s.get(`/department/accounting/invoice/getallinvoice?${r.toString()}`);if(!a.ok)throw new Error(a.message);return a},E=async({invoiceData:t,api:n})=>{const{data:e}=await n.post("/department/accounting/invoice/createinvoice",t);if(!e.ok)throw new Error(e.message);return e.data},P=async({invoiceData:t,invoiceId:n,api:e})=>{const{data:o}=await e.put(`/department/accounting/invoice/updateinvoice/${n}`,t);if(!o.ok)throw new Error(o.message);return o.data},A=async({invoiceId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/invoice/deleteinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},k=async({invoiceId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/invoice/getsingleinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},S=async({id:t,api:n})=>{const{data:e}=await n.post(`/department/accounting/invoice/synctoaccounts/${t}`);if(!e.ok)throw new Error(e.message);return e.data},K=({organizationId:t,customerId:n,limit:e=10,search:o,fromInvoiceDate:i,toInvoiceDate:l,createdFromDate:w,createdToDate:f,sortBy:d,sortOrder:p})=>{const m=["owner","staff","CTO"],{role:s}=c(),r=u(s);return h({queryKey:["invoices",t,n,e,i,l,w,f,o,d,p],queryFn:async({pageParam:a=1})=>{if(!s||!m.includes(s))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await I({organizationId:t,customerId:n,page:a,limit:e,fromInvoiceDate:i,toInvoiceDate:l,createdFromDate:w,createdToDate:f,search:o,sortBy:d,sortOrder:p,api:r})},getNextPageParam:a=>{if(a.pagination.page<a.pagination.totalPages)return a.pagination.page+1},getPreviousPageParam:a=>{if(a.pagination.page>1)return a.pagination.page-1},initialPageParam:1,enabled:!!s&&m.includes(s)&&!!t})},Q=()=>{const t=["owner","staff","CTO"],{role:n}=c(),e=u(n);return y({mutationFn:async({invoiceData:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await E({invoiceData:o,api:e})},onSuccess:()=>{g.invalidateQueries({queryKey:["invoices"]})}})},T=()=>{const t=["owner","staff","CTO"],{role:n}=c(),e=u(n);return y({mutationFn:async({invoiceData:o,invoiceId:i})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await P({invoiceData:o,invoiceId:i,api:e})},onSuccess:()=>{g.invalidateQueries({queryKey:["invoices"]})}})},O=()=>{const t=["owner","staff","CTO"],{role:n}=c(),e=u(n);return y({mutationFn:async({invoiceId:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({invoiceId:o,api:e})},onSuccess:()=>{g.invalidateQueries({queryKey:["invoices"]})}})},$=t=>{const n=["owner","staff","CTO"],{role:e}=c(),o=u(e);return v({queryKey:["invoice",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await k({invoiceId:t,api:o})},enabled:!!t&&!!e&&n.includes(e)})},b=()=>{const t=["owner","staff","CTO"],{role:n}=c(),e=u(n);return y({mutationFn:async({id:o})=>{if(!n||!t.includes(n))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await S({id:o,api:e})},onSuccess:()=>{g.invalidateQueries({queryKey:["invoices"]})}})},x=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t);export{O as a,$ as b,T as c,b as d,Q as e,x as f,K as u};
