import{g as m,q as v}from"./index-Dkf7SbMA.js";import{g as y}from"./roleCheck-CXq1v0D5.js";import{u as I}from"./useQuery-h0LZ4b8f.js";import{u as h}from"./useMutation-DtRxugN4.js";import{u as P}from"./useInfiniteQuery-BUWQcrvt.js";const E=async({organizationId:t,customerId:n,page:e,limit:o,fromInvoiceDate:i,toInvoiceDate:c,createdFromDate:u,minAmount:l,maxAmount:p,createdToDate:f,search:w,sortBy:d,sortOrder:g,api:s})=>{const a=new URLSearchParams;t&&a.append("organizationId",t),n&&a.append("customerId",n),e&&a.append("page",e.toString()),o&&a.append("limit",o.toString()),i&&a.append("fromInvoiceDate",i),c&&a.append("toInvoiceDate",c),u&&a.append("createdFromDate",u),f&&a.append("createdToDate",f),l&&a.append("minAmount",l.toString()),p&&a.append("maxAmount",p.toString()),d&&a.append("sortBy",d),g&&a.append("sortOrder",g),w&&a.append("search",w);const{data:r}=await s.get(`/department/accounting/invoice/getallinvoice?${a.toString()}`);if(!r.ok)throw new Error(r.message);return r},A=async({invoiceData:t,api:n})=>{const{data:e}=await n.post("/department/accounting/invoice/createinvoice",t);if(!e.ok)throw new Error(e.message);return e.data},S=async({invoiceData:t,invoiceId:n,api:e})=>{const{data:o}=await e.put(`/department/accounting/invoice/updateinvoice/${n}`,t);if(!o.ok)throw new Error(o.message);return o.data},k=async({invoiceId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/invoice/deleteinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},q=async({invoiceId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/invoice/getsingleinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},Q=({organizationId:t,customerId:n,limit:e=10,search:o,minAmount:i,maxAmount:c,fromInvoiceDate:u,toInvoiceDate:l,createdFromDate:p,createdToDate:f,sortBy:w,sortOrder:d})=>{const g=["owner","staff","CTO"],{role:s}=m(),a=y(s);return P({queryKey:["invoices",t,n,e,u,l,p,f,o,w,d,i,c],queryFn:async({pageParam:r=1})=>{if(!s||!g.includes(s))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await E({organizationId:t,customerId:n,page:r,limit:e,fromInvoiceDate:u,toInvoiceDate:l,createdFromDate:p,createdToDate:f,minAmount:i,maxAmount:c,search:o,sortBy:w,sortOrder:d,api:a})},getNextPageParam:r=>{if(r.pagination.page<r.pagination.totalPages)return r.pagination.page+1},getPreviousPageParam:r=>{if(r.pagination.page>1)return r.pagination.page-1},initialPageParam:1,enabled:!!s&&g.includes(s)&&!!t})},b=()=>{const t=["owner","staff","CTO"],{role:n}=m(),e=y(n);return h({mutationFn:async({invoiceData:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({invoiceData:o,api:e})},onSuccess:()=>{v.invalidateQueries({queryKey:["invoices"]})}})},O=()=>{const t=["owner","staff","CTO"],{role:n}=m(),e=y(n);return h({mutationFn:async({invoiceData:o,invoiceId:i})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await S({invoiceData:o,invoiceId:i,api:e})},onSuccess:()=>{v.invalidateQueries({queryKey:["invoices"]})}})},T=()=>{const t=["owner","staff","CTO"],{role:n}=m(),e=y(n);return h({mutationFn:async({invoiceId:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await k({invoiceId:o,api:e})},onSuccess:()=>{v.invalidateQueries({queryKey:["invoices"]})}})},$=t=>{const n=["owner","staff","CTO"],{role:e}=m(),o=y(e);return I({queryKey:["invoice",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await q({invoiceId:t,api:o})},enabled:!!t&&!!e&&n.includes(e)})},G=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t);export{T as a,$ as b,O as c,b as d,G as f,Q as u};
