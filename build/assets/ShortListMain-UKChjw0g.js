import{a as f,j as e,d as T,q as V,I as ae,c as le,e as re}from"./index-ftjmZ4WH.js";import{t as R}from"./toast-BSC5QTk1.js";import{N as Y}from"./constants-BQ9tBty9.js";import{d as U}from"./downloadFile-Dr-Jygm_.js";import{r as ne}from"./index-wPO2sgbh.js";import{g as A}from"./roleCheck-BuedAs3v.js";import{d as H}from"./useQuery-DmDT-v30.js";import{u as J}from"./useMutation-CSGCjuCw.js";import K from"./MaterialOverviewLoading-D7Qp4omS.js";import{B as I}from"./Button-BhpUbe89.js";import{C as ie,a as oe}from"./Card-BB2WhPtT.js";const ce=({tags:t,setState:s,suggestions:a=[],suggestionFetcher:r,disableSuggestion:n=!1})=>{const[u,v]=f.useState(""),[w,j]=f.useState([]),[D,k]=f.useState(!1),[o,x]=f.useState("");f.useEffect(()=>{if(n)return;const d=setTimeout(()=>{x(u.trim())},500);return()=>{clearTimeout(d)}},[u,n]),f.useEffect(()=>{if(!u){j([]);return}},[u]),f.useEffect(()=>{if(n||!o)return;(async()=>{try{if(k(!0),r){const _=(await r(o)).filter(S=>!t.includes(S));j(_)}else{const c=a.filter(_=>_.toLowerCase().includes(o.toLowerCase())&&!t.includes(_)).slice(0,10);j(c)}}catch(c){console.error("Suggestion fetch error:",c),j([])}finally{k(!1)}})()},[o,n]);const P=d=>{(d.key==="Enter"||d.key===",")&&u.trim()?(d.preventDefault(),t.includes(u.trim())||s([...t,u.trim()]),v("")):d.key==="Backspace"&&!u&&s(t.slice(0,-1))},g=d=>{t.includes(d)||s([...t,d]),v(""),j([])},y=d=>{s(t.filter((c,_)=>_!==d))};return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center border-b-1 border-[#565656] p-2 gap-2 rounded",children:[t.map((d,c)=>e.jsxs("div",{className:"bg-blue-600 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[d,e.jsx("span",{className:"cursor-pointer ml-1 text-xs",onClick:()=>y(c),children:"Ã—"})]},c)),e.jsx("input",{type:"text",value:u,onChange:d=>v(d.target.value),onKeyDown:P,className:"input flex-1 outline-none text-sm border-none",placeholder:"Type and press Enter"})]}),!n&&(w==null?void 0:w.length)>0&&e.jsxs("div",{className:"absolute left-0 right-0 z-10 mt-1 bg-white border border-gray-300 rounded shadow max-h-40 overflow-auto text-sm",children:[w.map((d,c)=>e.jsxs("div",{onClick:()=>g(d),className:"p-2 py-4 hover:bg-gray-100 cursor-pointer",children:[e.jsx("i",{className:"fa-solid fa-arrow-trend-up hover:bg-gray-50 p-3 rounded-full"}),"                            ",d]},c)),D&&e.jsx("div",{className:"p-8 place-items-center",children:e.jsx("div",{className:"p-2  text-gray-400 text-xs italic animate-spin rounded-full h-5 w-5 border-3 border-b-transparent border-black"})})]})]})},de=f.memo(ce);function xe({images:t,onDelete:s,onDownload:a,isDeleting:r=!1,refetch:n,className:u="",minWidth:v=100,maxWidth:w=100,heightClass:j=0,showSelectButton:D,onToggleSelect:k,isSelected:o,onImageClick:x,portalId:P,controlledType:g,activePopupType:y,setActivePopupType:d,selectedSiteImage:c,showSiteSelectButton:_,onSiteImageConfirm:S,onPopupOpenChange:E}){const[N,L]=f.useState(null),[F,G]=f.useState(!1),[z,q]=f.useState({}),M=(l,C,O)=>{const W=O/C,te=Math.max(150,Math.min(400,200*W));q(se=>({...se,[l]:te}))},i=l=>{L(l),G(!0),E==null||E(!0)},m=()=>{G(!1),L(null),E==null||E(!1)},h=()=>{N!==null&&L((N-1+t.length)%t.length)},p=()=>{N!==null&&L((N+1)%t.length)};f.useEffect(()=>{if(!F||g!==y)return;const l=C=>{C.key==="Escape"?m():C.key==="ArrowRight"?p():C.key==="ArrowLeft"&&h()};return F&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[F,p,h,m]);const $=async l=>{if(s)try{await s(l),n&&await n(),t.length<=1?m():N!==null&&N>=t.length-1&&L(Math.max(0,t.length-2))}catch(C){console.error("Error deleting image:",C)}},Z=l=>{a({src:l==null?void 0:l.url,alt:(l==null?void 0:l.originalName)||"image"})},ee=()=>{m()},b=N!==null&&N>=0&&N<t.length?t[N]:null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`gap-1 flex flex-wrap ${u}`,children:t==null?void 0:t.map((l,C)=>{const O=z[l._id]||200;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"relative cursor-pointer bg-gray-100  mb-1 break-inside-avoid ",style:{flex:`0 1 ${v}px`,minWidth:`${v}px`,maxWidth:`${w}px`,height:`${j||O}px`},onClick:()=>{i(C),x==null||x(l),d("reference")},children:e.jsx("img",{src:(l==null?void 0:l.url)||Y,alt:(l==null?void 0:l.originalName)||`Image ${C+1}`,className:"w-full cursor-pointer h-full object-cover",loading:"lazy",onLoad:W=>{const B=W.target;M(l._id,B.naturalWidth,B.naturalHeight)}})},l._id)})})}),F&&b&&ne.createPortal(e.jsxs("div",{className:"absolute inset-0 bg-black/90 text-white p-4 z-50 flex items-center justify-center",onClick:ee,style:{margin:0,padding:0,zIndex:1e3},children:[e.jsxs("div",{className:"absolute top-6 right-6 z-[10000] flex items-center gap-4",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),Z(b)},className:"bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",title:"Download",children:e.jsx("i",{className:"fas fa-download text-lg"})}),s&&e.jsx("button",{onClick:l=>{l.stopPropagation(),$(b._id)},className:"bg-black/50 hover:bg-red-600/70 text-white rounded-full p-3 transition-all duration-200",title:"Delete",disabled:r,children:e.jsx("i",{className:`fas ${r?"fa-spinner fa-spin":"fa-trash-can"} text-lg`})}),D&&k&&b&&e.jsx("button",{onClick:l=>{l.stopPropagation();const C=(o==null?void 0:o(b))??!1;k(b,!C)},className:`bg-${o!=null&&o(b)?"red":"green"}-600 hover:bg-${o!=null&&o(b)?"red":"green"}-700 text-white rounded-full p-3 transition-all duration-200`,title:o!=null&&o(b)?"Unselect this image":"Select this image",children:e.jsx("i",{className:`fas ${o!=null&&o(b)?"fa-xmark":"fa-check"} text-lg`})}),_&&e.jsx("button",{onClick:l=>S==null?void 0:S(l,b),className:`${(c==null?void 0:c._id)===b._id?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white rounded-full p-3 transition-all duration-200`,title:(c==null?void 0:c._id)===b._id?"Unselect this site image":"Select this site image",children:e.jsx("i",{className:`fas ${(c==null?void 0:c._id)===b._id?"fa-xmark":"fa-check"} text-lg`})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),m()},className:"bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",title:"Close",children:e.jsx("i",{className:"fas fa-times text-xl"})})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),h()},className:"absolute left-6 top-1/2 transform -translate-y-1/2 z-[10000] bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",children:e.jsx("i",{className:"fas fa-chevron-left text-2xl"})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),p()},className:"absolute right-6 top-1/2 transform -translate-y-1/2 z-[10000] bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",children:e.jsx("i",{className:"fas fa-chevron-right text-2xl"})}),e.jsx("div",{className:"relative flex items-center justify-center",style:{width:"70vw",height:"70vh",maxWidth:"70vw",maxHeight:"70vh"},onClick:l=>{l.stopPropagation(),d(g)},children:e.jsx("img",{src:(b==null?void 0:b.url)||Y,alt:b.originalName||`Image ${N!==null?N+1:1}`,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 text-white text-sm bg-black/50 px-4 py-2 rounded-full",children:[N!==null?N+1:1," of ",t.length]})]}),document.getElementById(P))]})}function Q({imageFiles:t=[],height:s,refetch:a,handleDeleteFile:r,className:n="",minWidth:u,maxWidth:v,isSelected:w,onToggleSelect:j,showSelectButton:D,onImageClick:k,portalId:o,setActivePopupType:x,activePopupType:P,controlledType:g,showSiteSelectButton:y,onSiteImageConfirm:d,selecteSiteImage:c,onPopupOpenChange:_}){return e.jsx(e.Fragment,{children:e.jsx(xe,{images:t,onDelete:r,onDownload:U,refetch:a,isDeleting:!1,className:n,heightClass:s,minWidth:u,maxWidth:v,showSelectButton:D,onToggleSelect:j,isSelected:w,onImageClick:k,portalId:o,setActivePopupType:x,activePopupType:P,controlledType:g,selectedSiteImage:c,showSiteSelectButton:y,onSiteImageConfirm:d,onPopupOpenChange:_})})}const me=async({projectId:t,api:s})=>{const{data:a}=await s.get(`/shortlisteddesign/getshortlisteddesigns/${t}`);if(!a.ok)throw new Error(a.message);return a.data},ue=async({projectId:t,selections:s,api:a})=>{const{data:r}=await a.post(`/shortlisteddesign/upload/${t}`,{selections:s});if(!r.ok)throw new Error(r.message);return r.data},he=async({projectId:t,api:s})=>{const{data:a}=await s.get(`/shortlisteddesign/getsiteimages/${t}`);if(!a.ok)throw new Error(a.message);return a.data},fe=async({organizationId:t,api:s,tags:a})=>{let r="";a&&a.length>0?r=`?${a.map(v=>`tags=${encodeURIComponent(v)}`).join("&")}`:r="?tags=all";const{data:n}=await s.get(`/shortlisteddesign/getreferencedesigns/${t}${r}`);if(!n.ok)throw new Error(n.message);return n.data},ge=async(t,s)=>{const{data:a}=await s.delete(`/shortlisteddesign/deletepdf/${t}`);if(!a.ok)throw new Error(a.message);return a.data},pe=t=>{const s=["owner","staff","CTO"],{role:a}=T(),r=A(a);return H({queryKey:["shortlistedDesigns",t],queryFn:async()=>{if(!a||!s.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance missing");return await me({projectId:t,api:r})},enabled:!!t&&!!a,retry:!1})},be=()=>{const t=["owner","staff","CTO"],{role:s}=T(),a=A(s);return J({mutationFn:async({projectId:r,selections:n})=>{if(!s||!t.includes(s))throw new Error("Not authorized");if(!a)throw new Error("API instance missing");return await ue({projectId:r,selections:n,api:a})},onSuccess:(r,{projectId:n})=>{V.invalidateQueries({queryKey:["shortlistedDesigns",n]})}})},we=()=>{const t=["owner","staff","CTO"],{role:s}=T(),a=A(s);return J({mutationFn:async({id:r})=>{if(!s||!t.includes(s))throw new Error("Youre not allowed to delete pdf");if(!a)throw new Error("API instance not available");return await ge(r,a)},onSuccess:(r,{projectId:n})=>{V.invalidateQueries({queryKey:["shortlistedDesigns",n]})}})},je=t=>{const s=["owner","staff","CTO"],{role:a}=T(),r=A(a);return H({queryKey:["siteImages",t],queryFn:async()=>{if(!a||!s.includes(a))throw new Error("Not authorized");if(!r)throw new Error("API instance missing");return await he({projectId:t,api:r})},enabled:!!t&&!!a,retry:!1})},Ne=(t,s)=>{const a=["owner","staff","CTO"],{role:r}=T(),n=A(r);return H({queryKey:["reference-shortlist",t,s],queryFn:async()=>{if(!r||!a.includes(r))throw new Error("Not authorized");if(!n)throw new Error("API instance missing");return await fe({organizationId:t,api:n,tags:s})},enabled:!!t&&!!r,retry:!1})},ye=({projectId:t})=>{var j,D,k,o;const{data:s,isLoading:a,isError:r,error:n}=pe(t),{mutateAsync:u,isPending:v}=we(),w=async x=>{var P,g;try{await u({id:x,projectId:t}),R({title:"Success",description:"PDF deleted"})}catch(y){R({variant:"destructive",title:"Error",description:((g=(P=y==null?void 0:y.response)==null?void 0:P.data)==null?void 0:g.message)||(y==null?void 0:y.message)||"failed to delete"})}};return a?e.jsx("div",{className:"max-h-50 overflow-y-auto w-full",children:e.jsx(K,{})}):(r&&((D=(j=n==null?void 0:n.response)==null?void 0:j.data)!=null&&D.message||n!=null&&n.message&&((o=(k=n==null?void 0:n.response)==null?void 0:k.data)!=null&&o.message||n!=null&&n.message)),e.jsxs("div",{className:"max-w-full px-4 mx-auto py-2",children:[e.jsx("header",{className:"flex gap-2 items-center justify-between",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{children:e.jsx("h1",{className:"text-xl md:text-3xl font-bold text-gray-900 mb-1",children:"Shortlisted Pdf's"})})})}),e.jsx("section",{className:"gap-4 flex flex-col",children:(s==null?void 0:s.length)>0?s==null?void 0:s.map(x=>{var P;return e.jsx(ie,{className:"border-green-200 bg-green-50",children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-check-circle text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-1",children:(P=x==null?void 0:x.pdfLink)==null?void 0:P.originalName}),e.jsx("p",{className:"text-sm text-green-700",children:"Your Design PDF is ready to view or download"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(I,{variant:"outline",onClick:()=>{var g;return window.open((g=x==null?void 0:x.pdfLink)==null?void 0:g.url,"_blank")},className:"border-green-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400",children:[e.jsx("i",{className:"fas mr-2 fa-external-link-alt"}),"View in New Tab"]}),e.jsx(I,{variant:"secondary",onClick:()=>{var g;return U({src:(g=x==null?void 0:x.pdfLink)==null?void 0:g.url,alt:"Shortlisted designs"})},className:"border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400",children:"Download PDF"}),e.jsx(I,{variant:"danger",isLoading:v,onClick:()=>w(x._id),className:"border-red-300 bg-red-600 text-white hover:bg-red-600 hover:border-red-400",children:"Delete PDF"})]})]})})},x._id)}):e.jsxs("div",{className:"flex flex-col items-center  justify-center min-h-[300px] w-full bg-white rounded-xl text-center p-6",children:[e.jsx("i",{className:"fa-solid fa-file-lines text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Pdf Found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No PDF Generated"})]})})]}))},X=t=>ae.get(`https://houseofram.in/api/shortlisteddesign/getsuggestedtags?q=${encodeURIComponent(t)}`).then(s=>{var a;return Array.isArray((a=s==null?void 0:s.data)==null?void 0:a.tags)?s.data.tags:[]});function ve(){const{projectId:t,organizationId:s}=le(),[a,r]=f.useState(null),n=re(),{data:u=[],isLoading:v}=je(t),[w,j]=f.useState(null),[D,k]=f.useState([]),[o,x]=f.useState(!1),[P,g]=f.useState(!1),[y,d]=f.useState([]),{data:c,isLoading:_}=Ne(s,y);f.useEffect(()=>{j(null),k([]),r(null),g(!1),x(!1)},[c]);const[S,E]=f.useState([]),{mutateAsync:N,isPending:L}=be();f.useEffect(()=>{const i=o||P;return document.body.style.overflow=i?"hidden":"unset",()=>{document.body.style.overflow="unset"}},[o,P]);const F=(i,m)=>{i.stopPropagation(),j(h=>(h==null?void 0:h._id)===m._id?(R({title:"Success",description:"Unselected, You can now select another one."}),null):(R({title:"Success",description:"Site Image selected"}),m))},G=(i,m)=>{if(!w){R({title:"Error",description:"Please select a Site Image first",variant:"destructive"});return}k(h=>{const p=h.some($=>$._id===i._id);return m&&!p?[...h,i]:m?h:h.filter($=>$._id!==i._id)})},z=(i,m)=>{E(h=>h.map(p=>p.siteImage._id===i?{...p,referenceImages:p.referenceImages.filter($=>$._id!==m)}:p).filter(p=>p.referenceImages.length>0))},q=i=>{E(m=>m.filter(h=>h.siteImage._id!==i))},M=async()=>{if(S.length===0){R({title:"Error",description:"No selections to generate",variant:"destructive"});return}try{const i=await N({projectId:t,selections:S});U({src:i.url,alt:i.fileName}),R({title:"Sucess",description:"Designs Generated Successfully!"}),E([])}catch(i){R({title:"Error",description:i==null?void 0:i.message,variant:"destructive"})}};return e.jsxs("div",{className:"max-w-full overflow-y-auto max-h-full px-4 mx-auto py-2",children:[e.jsxs("header",{className:"flex gap-2 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{onClick:()=>n(-1),className:"flex bg-gray-200 h-fit rounded-full items-center gap-2 backdrop-blur-sm px-4 py-2 cursor-pointer",children:[e.jsx("i",{className:"fas fa-arrow-left text-sm"}),e.jsx("span",{className:"text-sm hidden sm:inline-block font-medium",children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-3xl font-bold text-gray-900 mb-1",children:"Shortlisting Reference Designs"}),e.jsx("p",{className:"text-gray-600 hidden sm:inline-block text-sm md:text-md",children:"Select and organize your favorite design references for easy access"})]})]}),(w||D.length>0)&&e.jsx("button",{className:"mt-6 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg cursor-pointer",onClick:()=>{if(!w||D.length===0){R({title:"Error",description:"Select site image & at least 1 reference",variant:"destructive"});return}E(i=>[...i.filter(h=>h.siteImage._id!==w._id),{siteImage:w,referenceImages:D}]),j(null),k([])},children:"Confirm Selection"})]}),e.jsx("hr",{className:"my-3 bg-gray-500"}),e.jsxs("div",{className:"mb-4 flex gap-4 w-full  items-end",children:[e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Categories"}),e.jsx(de,{tags:y,setState:d,suggestionFetcher:X})]}),e.jsx("div",{children:e.jsx(I,{variant:"outline",onClick:()=>d([]),className:"text-sm ml-2 flex",children:"Reset Filter"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 border-gray-300 border-2 rounded-2xl p-2",children:[e.jsxs("div",{className:"border-r-1 border-gray-300 pr-8",children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Reference Designs"}),e.jsx("div",{className:"my-3 w-full h-[1px] bg-gray-200"}),_?e.jsx("div",{children:e.jsx(K,{})}):e.jsx("div",{className:"relative  h-[80vh]",id:"reference-popup-container",children:(c==null?void 0:c.length)>0?e.jsx(Q,{imageFiles:c||[],portalId:"reference-popup-container",height:190,refetch:()=>Promise.resolve(),minWidth:140,maxWidth:190,handleDeleteFile:void 0,showSelectButton:!0,setActivePopupType:r,activePopupType:a,controlledType:"reference",onToggleSelect:(i,m)=>G(i,m),isSelected:i=>D.some(m=>m._id===i._id),onPopupOpenChange:g,className:"overflow-y-auto max-h-[550px] "}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white   text-center p-6",children:[e.jsx("i",{className:"fas fa-box-open text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Reference Images Available"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Upload the Images in the ",e.jsx("span",{className:"cursor-pointer font-semibold text-blue-600",onClick:()=>n(`/organizations/${s}/projects/shortlistdesign`),children:"Reference Design"})," section",e.jsx("br",{}),"Select multiple Reference images",e.jsx("br",{}),"after selecting ",e.jsx("strong",{children:'"Confirm Selection"'})," to add images ðŸš€"]})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Site Images"}),e.jsx("div",{className:"my-3 w-full h-[1px] bg-gray-200"}),v?e.jsx("div",{children:e.jsx(K,{})}):e.jsx("div",{className:"relative  h-[80vh]",id:"site-popup-container",children:(u==null?void 0:u.length)>0?e.jsx(Q,{portalId:"site-popup-container",imageFiles:u,height:190,refetch:()=>Promise.resolve(),minWidth:140,maxWidth:190,setActivePopupType:r,activePopupType:a,controlledType:"site",showSiteSelectButton:!0,onSiteImageConfirm:F,selecteSiteImage:w,onImageClick:i=>{j(i),r("site")},onPopupOpenChange:x,className:"overflow-y-auto max-h-[550px] "}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white   text-center p-6",children:[e.jsx("i",{className:"fas fa-box-open text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Site Images Available"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Upload the Images in the Site Measurement Stage",e.jsx("br",{}),"Select multiple Reference images for single Site Image ",e.jsx("br",{}),"after selection ",e.jsx("strong",{children:'"Confirm Selection"'})," to add images ðŸš€"]})]})})]})]}),S.length>0?e.jsxs("div",{className:"mt-10 space-y-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-xl mb-4",children:"Selected Designs"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{isLoading:L,onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded shadow disabled:opacity-50",children:L?"Generating...":"Generate Pdf"}),e.jsx(I,{onClick:()=>{E([])},variant:"danger",className:"bg-red-600  text-white px-6 py-2 rounded shadow disabled:opacity-50",children:"Clear List"})]})]}),S.map(({siteImage:i,referenceImages:m},h)=>e.jsxs("div",{className:"p-4 py-6 border border-gray-300 rounded-lg bg-white shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-700 min-w-[110px]",children:["Site Image ",h+1]}),e.jsx("br",{}),e.jsx("img",{src:i==null?void 0:i.url,alt:i.originalName||`Site ${h+1}`,className:"h-28 w-auto object-contain border rounded-md"})]}),e.jsxs(I,{variant:"danger",onClick:()=>q(i._id),className:"text-white bg-red-600 text-sm whitespace-nowrap",children:[e.jsx("i",{className:"fas fa-trash !mr-2 "}),"Remove Site + References"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 flex-col",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-700 min-w-[110px]",children:"Referece Images"}),e.jsx("div",{className:"flex flex-wrap gap-4 ",children:m.map(p=>e.jsxs("div",{className:"relative  w-[120px] h-[120px] ",children:[e.jsx("img",{src:p.url,alt:p.originalName,className:"w-full h-full object-cover rounded  shadow-sm"}),e.jsx("button",{onClick:()=>z(i._id,p._id),className:"absolute top-1 right-1 bg-red-600 text-white p-1 px-2 text-xs rounded-full",children:"âœ•"}),e.jsx("p",{className:"text-xs mt-1 text-center max-w-[120px] truncate",children:p.originalName})]},p._id))})]})]},i._id))]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold text-black-800 my-3",children:"Youre Selections will appear below"}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white rounded-xl shadow-xl border border-gray-100  text-center p-6",children:[e.jsx("i",{className:"fas fa-box-open text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Selections Created"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Your Selection will appear here.",e.jsx("br",{}),"Select multiple Reference images for single Site Image ",e.jsx("br",{}),"after selection ",e.jsx("strong",{children:'"Confirm Selection"'})," to add images ðŸš€"]})]})]}),e.jsx("section",{className:"mt-6",children:e.jsx(ye,{projectId:t})})]})}const Fe=Object.freeze(Object.defineProperty({__proto__:null,default:ve,fetchSuggestions:X},Symbol.toStringTag,{value:"Module"}));export{de as S,Fe as a,X as f};
