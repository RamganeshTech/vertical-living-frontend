import{u as w,b as h,g as R,j as r,B as m,t as d}from"./index-D5hl8ps7.js";const x=async({projectId:e,stageNumber:s,stagePath:a,api:n})=>{const{data:t}=await n.put(`/stage${s}/${a}/${e}`);if(!t.ok)throw new Error(t.message);return t},y=()=>{const{role:e}=w(),s=R(e),a=["staff","owner","CTO"];return h({mutationFn:async({projectId:n,stageNumber:t,stagePath:o})=>{if(!e||!a.includes(e))throw new Error("You are not authorized to reset this stage.");if(!s)throw new Error("API instance not available.");return await x({projectId:n,stageNumber:t,stagePath:o,api:s})}})},S=({projectId:e,stageNumber:s,stagePath:a,buttonClass:n="bg-red-600 text-white",iconClass:t="fas fa-rotate-left",disabled:o=!1,className:g=""})=>{const{mutateAsync:f,isPending:c}=y(),p=async()=>{var l,u;try{await f({projectId:e,stageNumber:s,stagePath:a}),d({description:"Stage Reset successfully",title:"Success"})}catch(i){d({title:"Error",description:((u=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:u.message)||"Failed to Reset the stage",variant:"destructive"})}};return r.jsx("div",{className:`space-y-1 w-full ${g}`,children:r.jsxs(m,{onClick:p,variant:"danger",disabled:c||o,className:`${n} flex items-center gap-2 !p-2 w-full`,children:[r.jsx("i",{className:t}),r.jsx("span",{children:c?"Resetting...":"Reset Stage"})]})})};export{S as R};
