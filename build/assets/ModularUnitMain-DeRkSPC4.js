import{d as C,b as k,r as o,a as P,i as $,j as e,O as S,B as n,L}from"./index-N5JcrWW5.js";import{u as M,m as O}from"./fieldConfigs-D8rzC0F2.js";import{S as A}from"./SingleModularUnitCard-OTgHJo4n.js";import"./useQuery-sYFIGfif.js";import"./roleCheck-B8-FOucE.js";import"./selectedModularUnitApi-DFCbi1VK.js";function B(){const{isMobile:c,openMobileSidebar:x}=C(),{organizationId:m,projectId:b}=k(),[a,p]=o.useState(""),[u,j]=o.useState(""),[h,l]=o.useState(!1),r=P(),d=$(),i=d.pathname.includes("projectdetails"),{data:s,isLoading:g,isError:N}=M(m);if(g)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Loading products..."})]})});const y=d.pathname.includes("add")||d.pathname.includes("category")||d.pathname.includes("selectedunits"),v=Object.keys(O).filter(t=>t.toLowerCase().includes(u.toLowerCase()));return e.jsx(e.Fragment,{children:y?e.jsx("div",{className:`${i?"max-h-full":"h-screen"}  bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto`,children:e.jsx(S,{context:{isMobile:c,openMobileSidebar:x}})}):e.jsxs("div",{className:`${i?"max-h-full":"h-screen"} bg-gradient-to-br from-gray-50 to-blue-50 flex flex-col overflow-hidden `,children:[e.jsx("div",{className:"bg-white shadow-lg border-b z-40 flex-shrink-0",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex ",children:[c&&e.jsx("button",{onClick:x,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx("i",{className:"fas fa-cube text-white text-xl"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl  font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Product Catalog"}),e.jsx("p",{className:"text-sm text-gray-500 sm:block hidden",children:"Manage your modular units"})]})]}),e.jsxs("div",{className:"flex sm:none",children:[i?e.jsx("div",{className:"p-2 border-2 border-gray-300 rounded-lg",children:e.jsx(L,{to:`/${m}/projectdetails/${b}/modularunits/selectedunits`,children:e.jsx("i",{className:"fas fa-shopping-cart text-xl text-blue-600 "})})}):e.jsxs(n,{onClick:()=>r("add"),className:"hidden md:flex  sm:px-4 py-2  items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-plus"}),"Add ",e.jsx("span",{className:"hidden sm:inline",children:"New Product"})]}),e.jsx("button",{onClick:()=>l(!h),className:"md:hidden border-2 border-gray-300  ml-1 cursor-pointer p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors",children:e.jsx("i",{className:"fas fa-box text-lg text-blue-600"})})]})]})})}),e.jsx("div",{className:"flex-1 flex overflow-hidden ",children:e.jsxs("div",{onClick:()=>l(!1),className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex gap-6 w-full overflow-hidden",children:[e.jsxs("aside",{className:`
                  fixed md:static inset-y-0 left-0 !z-50 w-80 md:w-72 bg-white md:bg-white/90 md:backdrop-blur-sm
                  transform ${h?"translate-x-0":"-translate-x-full"} md:translate-x-0
                  transition-transform duration-300 ease-in-out md:transition-none
                  shadow-2xl md:shadow-lg rounded-r-2xl md:rounded-2xl border-r md:border
                  flex flex-col md:h-full
                `,children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:hidden",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Categories"}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:u,onChange:t=>j(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-gray-50 focus:bg-white"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4 flex items-center gap-2 sticky top-0 bg-white py-2",children:[e.jsx("i",{className:"fas fa-layer-group"}),"Product Categories"]}),e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${a===""?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{p(""),l(!1)},children:[e.jsx("i",{className:"fas fa-th-large"}),e.jsx("span",{className:"font-medium",children:"All Products"}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${a===""?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:(s==null?void 0:s.length)||0})]}),v.map(t=>{var f;return e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${a===t?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{r(`category/${t}`),l(!1)},children:[e.jsx("i",{className:"fas fa-cube"}),e.jsx("span",{className:"font-medium capitalize",children:t}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${a===t?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:((f=s==null?void 0:s.filter(w=>w.unitType===t))==null?void 0:f.length)||0})]},t)})]})}),e.jsx("div",{className:"flex-shrink-0 p-2 sm:p-6 border-t md:hidden",children:e.jsxs(n,{onClick:()=>{r("add"),l(!1)},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-4 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus"}),"Add New Product"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 mb-3",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl sm:p-6 p-2 px-4 shadow-lg border",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between ",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 sm:mb-2 mb-1",children:a?`${a} Products`:"All Products"}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-info-circle"}),s!=null&&s.length?`${s.length} products available`:"No products found"]})]})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto ",children:g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):N?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(s==null?void 0:s.length)===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-cube text-gray-400 text-5xl mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first product to the catalog."}),e.jsxs(n,{onClick:()=>r("add"),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Product"]})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 pb-6 overflow-y-auto",children:s==null?void 0:s.map(t=>e.jsx(e.Fragment,{children:e.jsx(A,{unit:t},`${t._id}-5`)}))})})})]})]})})]})})}export{B as default};
