import{c as i,i as d,d as u,q as w,k as f,g as s}from"./index-CUvv9ev0.js";const m=async({organizationId:t,specification:r,api:e})=>{const{data:a}=await e.post(`/materialinventory?organizationId=${t}`,r);if(!a.ok)throw new Error(a.message);return a.data},g=async({id:t,specification:r,api:e})=>{const{data:a}=await e.put(`/materialinventory/${t}/updatematerial`,{specification:r});if(!a.ok)throw new Error(a.message);return a.data},v=async({id:t,api:r})=>{const{data:e}=await r.delete(`/materialinventory/${t}/deletematerial`);if(!e.ok)throw new Error(e.message);return e.data},p=async({id:t,api:r})=>{const{data:e}=await r.get(`/materialinventory/${t}/getsingle`);if(!e.ok)throw new Error(e.message);return e.data},h=async({organizationId:t,pageParam:r=1,filters:e={},api:a})=>{const o=new URLSearchParams({organizationId:t,page:String(r),...e}),{data:n}=await a.get(`/materialinventory/getallmaterial?${o.toString()}`);if(!n.ok)throw new Error(n.message);return n},l=["owner","staff","CTO"],E=()=>{const{role:t}=i(),r=s(t);return u({mutationFn:async({organizationId:e,specification:a})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await m({organizationId:e,specification:a,api:r})},onSuccess:(e,{organizationId:a})=>{w.invalidateQueries({queryKey:["materialinventory",a]})}})},k=()=>{const{role:t}=i(),r=s(t);return u({mutationFn:async({id:e,specification:a})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await g({id:e,specification:a,api:r})},onSuccess:(e,{id:a})=>{w.invalidateQueries({queryKey:["materialinventory",a]})}})},P=()=>{const{role:t}=i(),r=s(t);return u({mutationFn:async({id:e})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await v({id:e,api:r})},onSuccess:(e,{id:a})=>{w.invalidateQueries({queryKey:["materialinventory",a]})}})},M=t=>{const{role:r}=i(),e=s(r);return f({queryKey:["materialinventory",t],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await p({id:t,api:e})},enabled:!!t&&!!r,retry:!1,refetchOnWindowFocus:!1})},q=(t,r={})=>{const{role:e}=i(),a=s(e);return d({queryKey:["materialinventory",t,r],enabled:!!t&&!!e,initialPageParam:1,queryFn:async({pageParam:o=1})=>{if(!e||!l.includes(e))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await h({organizationId:t,pageParam:o,filters:r,api:a})},getNextPageParam:o=>{console.log("ğŸ” Last page received:",o),console.log("ğŸ” Available properties:",Object.keys(o));const n=o.page,c=o.totalPages;console.log("ğŸ” Pagination calculation:",{currentPage:n,totalPages:c,condition:`${n} < ${c}`,result:n<c});const y=n<c?n+1:void 0;return console.log("ğŸ” Next page will be:",y),y},retry:!1,refetchOnWindowFocus:!1})};export{E as a,k as b,P as c,M as d,q as u};
