import{u as C,r,j as e,C as i,B as b,v as k,t as d}from"./index-MXS_gbde.js";import{e as A}from"./paymentConfirmationApi-C4F9xnGm.js";const E=()=>{var u,h;const{projectId:o,token:c}=C(),[m,p]=r.useState(""),[l,f]=r.useState(!1),[g,j]=r.useState(!0),{mutateAsync:y,isPending:w,isError:x,error:a}=A(),N=async()=>{var s,n;try{const{data:t}=await k.get(`https://houseofram.in/api/paymentconfirmation/getconsentcontent/${o}/${c}`);p((t==null?void 0:t.data)||"")}catch(t){d({title:"Error",description:((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.message)||"Unable to fetch consent form.",variant:"destructive"})}finally{j(!1)}},v=async()=>{var s,n;if(!(!o||!c))try{await y({projectId:o,token:c}),d({title:"Thank you!",description:"Your consent has been submitted successfully."})}catch(t){d({title:"Error",description:((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.message)||"Submission failed.",variant:"destructive"})}};return r.useEffect(()=>{N()},[]),e.jsxs("div",{className:" w-full min-h-screen flex flex-col items-center bg-gray-50 pb-10 ",children:[e.jsx("header",{className:"w-full max-w-full mx-auto border-b border-gray-200 bg-white px-4 py-4 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-start border-black md:justify-start text-center md:text-left",children:[e.jsx("img",{src:i.COMPANY_LOGO,alt:"Company Logo",className:"h-14 w-14 rounded-md object-cover   border-gray-300"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-extrabold text-blue-700 leading-tight",children:i.COMPANY_NAME}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-500 font-medium",children:"Secure Payment Consent Form"})]})]})}),x&&e.jsxs("div",{className:"min-w-md my-4 mx-auto p-4 bg-slate-50 border border-slate-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-slate-600 font-semibold mb-2",children:"⚠️ Error Occured"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:((h=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:h.message)||(a==null?void 0:a.message)||"Failed to load cost estimation data"}),e.jsx(b,{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2",children:"Retry"})]}),!x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full bg-white p-4 max-w-3xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-white max-h-[500px] rounded-md border-2 border-[#4e51543a] custom-scrollbar  overflow-y-auto ",children:g?e.jsx("p",{className:"text-gray-600",children:"Loading form content..."}):m?e.jsx("div",{className:"prose prose-sm sm:prose max-w-none",dangerouslySetInnerHTML:{__html:m}}):e.jsx("p",{className:"text-slate-500 text-sm",children:"Content not found."})}),e.jsxs("div",{className:"px-5 py-4 bg-white flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("label",{className:"flex items-start gap-2 text-sm text-gray-700 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",onChange:s=>f(s.target.checked),checked:l,className:"mt-1 w-4 h-4 accent-blue-600"}),"I confirm that I have read, understood, and accept the above terms."]}),e.jsxs(b,{disabled:!l,isLoading:w,onClick:v,className:`px-6 py-2 text-white ${l?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Submit Consent"]})]})]}),e.jsxs("footer",{className:"mt-10 w-full text-center text-sm text-gray-500 border-t border-black/70 px-4",children:[e.jsxs("div",{className:"mb-1 font-medium text-gray-600",children:["© ",new Date().getFullYear()," ",i.COMPANY_NAME]}),e.jsx("div",{className:"text-xs",children:"All rights reserved. For queries, contact our team."})]})]})]})};export{E as default};
