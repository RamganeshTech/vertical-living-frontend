import{f as l,b as u,h as c,s,i}from"./index-BAM0eJUz.js";const w=async({projectId:n,quantity:t,singleUnitCost:e,product:o,api:r})=>{const{data:a}=await r.post(`/selectedmodularunitsnew/${n}/add`,{quantity:t,singleUnitCost:e,product:o});if(!a.ok)throw new Error(a.message);return a.data},f=async({projectId:n,api:t})=>{const{data:e}=await t.get(`/selectedmodularunitsnew/get/${n}`);if(!e.ok)throw new Error(e.message);return e.data},y=async({projectId:n,unitId:t,api:e})=>{const{data:o}=await e.delete(`/selectedmodularunitsnew/delete/${n}/${t}`);if(!o.ok)throw new Error(o.message);return o.data},h=async({projectId:n,api:t})=>{const{data:e}=await t.post(`/selectedmodularunitsnew/${n}/pdfgenerate`);if(!e.ok)throw new Error(e.message);return e.data},p=()=>{const n=["owner","CTO","staff"],{role:t}=l(),e=i(t);return c({mutationFn:async({projectId:o,quantity:r,singleUnitCost:a,product:d})=>{if(!t||!n.includes(t))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await w({projectId:o,quantity:r,singleUnitCost:a,product:d,api:e})},onSuccess:(o,{projectId:r})=>{s.invalidateQueries({queryKey:["selectedModularUnitsNew",r]})}})},E=n=>{const t=["owner","CTO","staff","client","worker"],{role:e}=l(),o=i(e);return u({queryKey:["selectedModularUnitsNew",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await f({projectId:n,api:o})},enabled:!!n&&!!e&&t.includes(e)})},U=()=>{const n=["owner","CTO","staff"],{role:t}=l(),e=i(t);return c({mutationFn:async({projectId:o,unitId:r})=>{if(!t||!n.includes(t))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await y({projectId:o,unitId:r,api:e})},onSuccess:(o,{projectId:r})=>{s.invalidateQueries({queryKey:["selectedModularUnitsNew",r]})}})},g=()=>{const n=["owner","CTO","staff"],{role:t}=l(),e=i(t);return c({mutationFn:async({projectId:o})=>{if(!t||!n.includes(t))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await h({projectId:o,api:e})},onSuccess:(o,{projectId:r})=>{s.invalidateQueries({queryKey:["selectedModularUnitsNew",r]}),s.invalidateQueries({queryKey:["projects",r]})}})};export{U as a,g as b,p as c,E as u};
