import{d as u}from"./useQuery-DmDT-v30.js";import{u as l}from"./useMutation-CSGCjuCw.js";import{g as n}from"./roleCheck-BuedAs3v.js";import{d as s,q as i}from"./index-ftjmZ4WH.js";const c=async({api:o,organizationId:r,id:t})=>{const{data:e}=await o.get(`quote/quotegenerate/getquotesingle/${r}/${t}`);if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},w=async({api:o,organizationId:r,filters:t})=>{const{data:e}=await o.get(`quote/quotegenerate/getquotes/${r}`,{params:t});if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},f=async({api:o,projectId:r})=>{const{data:t}=await o.get(`quote/quotegenerate/getquotepdf/quote/${r}`);if(!t.ok)throw new Error((t==null?void 0:t.message)||"Failed to fetch materials");return t.data},d=async({api:o,id:r})=>{const{data:t}=await o.delete(`quote/quotegenerate/deletequote/${r}`);if(!t.ok)throw new Error((t==null?void 0:t.message)||"Failed to delete materials");return t.data},q=async({api:o,quoteId:r,data:t})=>{var a;const e=await o.post(`quote/quotegenerate/generatepdf/${r}/create`,t);if(console.log("res form api",e.data),!(e!=null&&e.data.ok))throw new Error(((a=e==null?void 0:e.data)==null?void 0:a.message)||"Failed to delete materials");return e==null?void 0:e.data.data},p=(o,r)=>{const t=["owner","staff","CTO"],{role:e}=s(),a=n(e);return u({queryKey:["quote-variant-single",o,r],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return await c({api:a,organizationId:o,id:r})},enabled:!!o})},F=(o,r)=>{const t=["owner","staff","CTO"],{role:e}=s(),a=n(e);return u({queryKey:["quote-material-items",o,r],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return await w({api:a,organizationId:o,filters:r})},enabled:!!o})},Q=o=>{const r=["owner","staff","CTO"],{role:t}=s(),e=n(t);return u({queryKey:["quote-pdfs",o],queryFn:async()=>{if(!t||!r.includes(t))throw new Error("Not allowed to create quotes");if(!e)throw new Error("API instance for role not found");return await f({api:e,projectId:o})},enabled:!!o})},m=async({api:o,organizationId:r,categoryName:t})=>{const{data:e}=await o.get(`quote/quotegenerate/getmaterials/${r}/${t}`);if(!e.ok)throw new Error((e==null?void 0:e.message)||"Failed to fetch materials");return e.data},P=(o,r)=>{const t=["owner","staff","CTO"],{role:e}=s(),a=n(e);return u({queryKey:["quote-brand",o,r],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to create quotes");if(!a)throw new Error("API instance for role not found");return console.log("categrouName",r),await m({api:a,organizationId:o,categoryName:r})},enabled:!!o})},R=()=>{const o=["owner","staff","CTO"],{role:r}=s(),t=n(r);return l({mutationFn:async({id:e})=>{if(!r||!o.includes(r))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await d({api:t,id:e})},onSuccess:(e,{organizationId:a})=>{i.invalidateQueries({queryKey:["quote-material-items",a]})}})},$=()=>{const o=["owner","staff","CTO"],{role:r}=s(),t=n(r);return l({mutationFn:async({quoteId:e,data:a})=>{if(!r||!o.includes(r))throw new Error("Not allowed to create quotes");if(!t)throw new Error("API instance for role not found");return await q({api:t,quoteId:e,data:a})},onSuccess:(e,{organizationId:a})=>{i.invalidateQueries({queryKey:["quote-material-items",a]})}})};export{Q as a,p as b,P as c,$ as d,F as e,R as u};
