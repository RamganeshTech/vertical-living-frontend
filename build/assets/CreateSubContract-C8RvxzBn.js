import{a as b,u as j,r as m,j as e,B as C,t}from"./index-BAM0eJUz.js";import{b as g}from"./subContractNewApi-DIkhNt_Y.js";import{S as N}from"./SubContractForm-DVkmsuvh.js";import{C as k,b as v,c as y,a as S}from"./Card-CdxfjEr-.js";import{I as w}from"./Input-1UBXZqEj.js";import"./useInfiniteQuery-BGz0VllC.js";import"./Label-C8i6KaZe.js";import"./projectApi-D7-uwdh2.js";import"./SearchSelectNew-IGAHiELy.js";import"./ImageGalleryMain-B3g6b13d.js";import"./downloadFile-BbGV_BaX.js";import"./index-C8BdbktQ.js";import"./ShortListMain-CkHPlJB3.js";const O=()=>{const r=b(),{organizationId:i}=j(),c=g(),[d,n]=m.useState(!1),[a,x]=m.useState(""),u=async h=>{var o,l;try{const s=await c.mutateAsync({organizationId:i,...h});t({title:"Success",description:"Sub Contract created successfully"}),console.log("result",s);const f=`https://houseofram.in/subcontract/share/${s==null?void 0:s.contractId}?token=${s==null?void 0:s.token}`;x(f)}catch(s){t({title:"Error",description:((l=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:l.message)||(s==null?void 0:s.message)||"Failed to create sub contract",variant:"destructive"})}},p=()=>{navigator.clipboard.writeText(a),n(!0),t({title:"Copied!",description:"Link copied to clipboard"}),setTimeout(()=>n(!1),2e3)};return e.jsxs("div",{className:"space-y-6 max-h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{onClick:()=>r(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center mb-2",children:[e.jsx("i",{className:"fas fa-hard-hat mr-3 text-blue-600"}),"Create Sub Contract"]})]}),e.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[e.jsx(N,{organizationId:i,mode:"create",onSubmit:u,isLoading:c.isPending,onCancel:()=>r(-1)}),a&&e.jsxs(k,{children:[e.jsx(v,{children:e.jsxs(y,{className:"flex items-center text-lg",children:[e.jsx("i",{className:"fas fa-link mr-2 text-blue-600"}),"Generate Shareable Link"]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Generate a shareable link for workers to submit their information for this sub contract."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:a,readOnly:!0,className:"flex-1"}),e.jsx(C,{onClick:p,variant:"outline",children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-copy mr-2"}),"Copy"]})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Link generated successfully! Share this with workers."})]})]})]})})]})]})]})};export{O as default};
