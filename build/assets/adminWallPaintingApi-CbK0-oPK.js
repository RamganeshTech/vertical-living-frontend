import{u}from"./useQuery-CXWUgeEV.js";import{u as c}from"./useMutation-5BwurMj6.js";import{c as a}from"./index-C2yypHlC.js";import{g as s}from"./roleCheck-ZvNAcsbM.js";const d=async(t,n)=>{var o;const r=await n.get(`/adminwall/${t}`);return(o=r==null?void 0:r.data)==null?void 0:o.data},w=async(t,n,r)=>(await r.get(`/adminwall/${t}/step/${n}`)).data,l=async(t,n,r,o)=>(await o.post(`/adminwall/${t}/step/${n}/correction`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,p=async(t,n,r,o)=>(await o.patch(`/adminwall/${t}/step/${n}/approve`,r)).data,y=t=>{const{role:n}=a(),r=s(n),o=["owner","staff","CTO"];return u({queryKey:["adminSOP",t],queryFn:()=>{if(!n||!o.includes(n))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return d(t,r)}})},E=(t,n)=>{const{role:r}=a(),o=s(r),e=["owner","staff","CTO"];return u({queryKey:["adminStep",t,n],queryFn:()=>{if(!r||!e.includes(r))throw new Error("Unauthorized");if(!o)throw new Error("API not found");return w(t,n,o)}})},S=()=>{const{role:t}=a(),n=s(t),r=["owner","staff","CTO"];return c({mutationFn:async({projectId:o,stepNumber:e,formData:i})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!n)throw new Error("API not found");return l(o,e,i,n)}})},C=()=>{const{role:t}=a(),n=s(t),r=["owner","staff","CTO"];return c({mutationFn:async({projectId:o,stepId:e,payload:i})=>{if(!t||!r.includes(t))throw new Error("Unauthorized");if(!n)throw new Error("API not found");return p(o,e,i,n)}})};export{C as a,S as b,E as c,y as u};
