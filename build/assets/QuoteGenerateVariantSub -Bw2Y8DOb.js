import{r as o,j as e,ai as fe,c as ge,d as Ne,ar as ye,as as me,at as be,an as je,au as Se,e as Me,R as Te,B as ke,S as we,C as se,M as ve,t as xe,h as Le}from"./index-CBsAK0nv.js";import{S as ae}from"./SearchSelect-Ck0SY1nI.js";const W=(n,B,v)=>{const u=String(n).toLowerCase().replace("mm","").trim(),T=B.find(L=>String(L.thickness).toLowerCase().replace("mm","").trim()===u);return(T==null?void 0:T.rs)!==void 0?T.rs:v==="laminate"?Ce:0},Re=o.forwardRef(({data:n,index:B,brandOptions:v,laminateBrandOptions:u,laminateRatesByBrand:T,brandRatesByName:L,labourCost:Y,selectedBrand:P,selectedLaminateBrand:I,onFurnitureChange:g},z)=>{var K,X;const[j,U]=o.useState(null),[b,V]=o.useState(null),S=j?L[j]||[]:[],q=b?T[b]||[]:[],$=o.useRef(I),G=o.useRef(P),[p,D]=o.useState((n==null?void 0:n.coreMaterials)||[]),[k,Z]=o.useState((n==null?void 0:n.fittingsAndAccessories)||[]),[H,F]=o.useState((n==null?void 0:n.glues)||[]),[M,_]=o.useState((n==null?void 0:n.nonBrandMaterials)||[]);o.useEffect(()=>{D((n==null?void 0:n.coreMaterials)||[])},[n==null?void 0:n.coreMaterials]),o.useEffect(()=>{G.current!==P&&(U(P),G.current=P)},[P]),o.useEffect(()=>{$.current!==I&&(V(I),$.current=I)},[I]),o.useEffect(()=>{!j&&(v==null?void 0:v.length)>0&&U(v[0])},[v]),o.useEffect(()=>{!b&&(u==null?void 0:u.length)>0&&V(u[0])},[u]);const E=()=>{let t=0;const s=j?L[j]||[]:[],r=b?T[b]||[]:[],c=p,l=c[0],d=((l==null?void 0:l.carpenters)||0)*((l==null?void 0:l.days)||0)*Y,i=c.length>0?d/c.length:0;for(const N of c){const w=W(N.plywoodNos.thickness,s,"plywood"),y=W(N.laminateNos.thickness,r,"laminate"),A=N.plywoodNos.quantity*32*w,de=N.laminateNos.quantity*32*y;t+=A+de+i}const m=N=>(N.quantity||0)*(N.cost||0),x=N=>N.cost||0,h=n.fittingsAndAccessories.reduce((N,w)=>N+m(w),0),f=n.glues.reduce((N,w)=>N+x(w),0),C=n.nonBrandMaterials.reduce((N,w)=>N+m(w),0);return t+=h+f+C,Math.round(t)},R=(a,t)=>{if(!b&&!b)return a.rowTotal||0;const r=W(a.plywoodNos.thickness,S,"plywood"),c=W(a.laminateNos.thickness,q,"laminate");console.log("ply Rate",r),console.log("lami Rate",c);const l=32,d=a.plywoodNos.quantity*(r*l),i=a.laminateNos.quantity*(c*l);console.log("plyCost",d),console.log("lamiCost",i);const m=d+i;console.log("baseMaterialCost",m);const x=m*(a.profitOnMaterial/100);console.log("profitOnMaterial",x);const h=t.length,f=t[0],w=f.carpenters*f.days*Y*(1+(f.profitOnLabour||0)/100)/h,y=m+x+w;return Math.round(y)},ee=p.reduce((a,t)=>a+R(t,p),0),O=k.reduce((a,t)=>{const s=(t.quantity||0)*(t.cost||0),r=s*((t.profitOnMaterial||0)/100);return a+s+r},0),te=H.reduce((a,t)=>{const s=t.cost||0,r=s*((t.profitOnMaterial||0)/100);return a+s+r},0),Q=M.reduce((a,t)=>{const s=(t.quantity||0)*(t.cost||0),r=s*((t.profitOnMaterial||0)/100);return a+s+r},0),re=ee+O+te+Q;o.useImperativeHandle(z,()=>({getUpdatedFurniture:()=>{const a=p.map(x=>({...x,rowTotal:R(x,p)})),t=[...k],s=[...H],r=[...M],c=t.reduce((x,h)=>{const f=(h.quantity||0)*(h.cost||0),C=f*((h.profitOnMaterial||0)/100);return x+f+C},0),l=s.reduce((x,h)=>{const f=h.cost||0,C=f*((h.profitOnMaterial||0)/100);return x+f+C},0),d=r.reduce((x,h)=>{const f=(h.quantity||0)*(h.cost||0),C=f*((h.profitOnMaterial||0)/100);return x+f+C},0),i=a.reduce((x,h)=>x+(h.rowTotal||0),0),m=i+c+l+d;return{furnitureName:n.furnitureName,plywoodBrand:j,laminateBrand:b,coreMaterials:p.map(x=>({...x,rowTotal:R(x,p)})),fittingsAndAccessories:t,glues:s,nonBrandMaterials:r,coreMaterialsTotal:i,fittingsAndAccessoriesTotal:c,gluesTotal:l,nonBrandMaterialsTotal:d,furnitureTotal:m,totals:{core:i,fittings:c,glues:l,nbms:d,furnitureTotal:m}}}}));const ce=(a,t)=>{const s=[...p];if(s[a]={...s[a],profitOnMaterial:t||0},D(s),a!==0){g==null||g();return}const r=t,c=(l,d=!1)=>l.map(i=>{const m=d?i.cost||0:(i.quantity||0)*(i.cost||0),x=m*((r||0)/100);return{...i,profitOnMaterial:r,rowTotal:Math.round(m+x)}});Z(l=>c(l)),F(l=>c(l,!0)),_(l=>c(l)),g==null||g()},ne=a=>{if(!p[0])return;const t=[...p];t[0]={...t[0],profitOnLabour:a||0},D(t),g==null||g()},le=(a,t,s)=>{if(a==="Fittings & Accessories"){const r=[...k],c=(r[t].quantity||0)*(r[t].cost||0),l=c*((s||0)/100);r[t]={...r[t],profitOnMaterial:s,rowTotal:Math.round(c+l)},Z(r)}if(a==="Glues"){const r=[...H],c=r[t].cost||0,l=c*((s||0)/100);r[t]={...r[t],profitOnMaterial:s,rowTotal:Math.round(c+l)},F(r)}if(a==="Non-Branded Materials"){const r=[...M],c=(r[t].quantity||0)*(r[t].cost||0),l=c*((s||0)/100);r[t]={...r[t],profitOnMaterial:s,rowTotal:Math.round(c+l)},_(r)}g==null||g()};o.useEffect(()=>{g==null||g()},[j,b,p,n.fittingsAndAccessories,n.glues]);const oe=()=>e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold text-md text-gray-800 mb-2",children:["Core Materials (Total: ₹",ee.toLocaleString("en-IN"),")"]}),e.jsx("div",{className:"overflow-x-auto rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsxs("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plywood"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Laminate"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Carpenters / Day"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Days"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Material"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Labour"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"})]})]}),e.jsx("tbody",{children:(p==null?void 0:p.length)>0&&(p==null?void 0:p.map((a,t)=>{var r,c,l,d,i,m,x,h;const s=R(a,p);return e.jsxs("tr",{className:"group border",children:[t===0&&e.jsx("td",{rowSpan:(r=n==null?void 0:n.coreMaterials)==null?void 0:r.length,className:"text-center border-r-1 p-2",children:a!=null&&a.imageUrl?e.jsx("img",{src:(a==null?void 0:a.imageUrl)||fe,className:"h-10 mx-auto"}):e.jsx(e.Fragment,{children:"—"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(a==null?void 0:a.itemName)||"—"}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((c=a==null?void 0:a.plywoodNos)==null?void 0:c.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((l=a==null?void 0:a.plywoodNos)==null?void 0:l.thickness)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((d=a==null?void 0:a.laminateNos)==null?void 0:d.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((i=a==null?void 0:a.laminateNos)==null?void 0:i.thickness)??0}),t===0&&e.jsxs(e.Fragment,{children:[e.jsx("td",{rowSpan:(m=n==null?void 0:n.coreMaterials)==null?void 0:m.length,className:"text-center border-r-1 p-2",children:(a==null?void 0:a.carpenters)||0}),e.jsx("td",{rowSpan:(x=n==null?void 0:n.coreMaterials)==null?void 0:x.length,className:"text-center border-r-1 p-2",children:(a==null?void 0:a.days)||0})]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:p[t].profitOnMaterial,onChange:f=>ce(t,parseFloat(f.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),t===0&&e.jsx("td",{rowSpan:(h=n==null?void 0:n.coreMaterials)==null?void 0:h.length,className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:p[0].profitOnLabour,onChange:f=>ne(parseFloat(f.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(a==null?void 0:a.remarks)||"—"}),e.jsxs("td",{className:"text-center border-r-1 p-2 text-green-700 font-bold",children:["₹",s==null?void 0:s.toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:"—"})]},t)}))})]})})]}),ie=a=>a==="Fittings & Accessories"?Math.round(O):a==="Glues"?Math.round(te):a==="Non-Branded Materials"?Math.round(Q):0,J=(a,t)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2 text-gray-800",children:[a,"(Total: ₹",ie(a).toLocaleString("en-IN"),")"]}),e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsx("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Profit On Materials"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:t.length>0&&t.map((s,r)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.itemName)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.description)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.quantity)||0}),e.jsx("td",{className:"text-center border p-2",children:(s==null?void 0:s.cost)||0}),e.jsx("td",{className:"text-center border p-2",children:e.jsx("input",{type:"number",value:s.profitOnMaterial||0,onChange:c=>le(a,r,parseFloat(c.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),e.jsxs("td",{className:"text-center border p-2 text-green-700 font-bold",children:["₹",(s.rowTotal||0).toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border p-2",children:"—"})]},r))})]})]});return e.jsxs("div",{className:"shadow-md p-4 my-4 border rounded-lg bg-white",children:[e.jsxs("div",{className:" flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold  text-blue-600",children:["Product ",B+1,": ",n.furnitureName]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-right text-xl font-bold text-green-700",children:["Product Total: ₹",re.toLocaleString("en-IN")]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Raw Cost (no profit)"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-700",children:["₹",E().toLocaleString("en-IN")]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Plwyood Brand:"}),e.jsx(ae,{options:v,placeholder:"-- Choose Plwyood Brand --",searchPlaceholder:"Search Plywood brands...",onSelect:U,selectedValue:j||"",className:"mt-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Laminate Brand:"}),e.jsx(ae,{options:u,placeholder:"-- Choose Laminate Brand --",searchPlaceholder:"Search laminate brands...",onSelect:V,selectedValue:b||"",className:"mt-1"})]})]}),e.jsxs("div",{children:[j&&((K=L[j])==null?void 0:K.length)>0&&e.jsxs("div",{className:"mt-6 border border-gray-200 bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Available Thickness & Rates for ",e.jsx("span",{className:"text-blue-600",children:j})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left border border-gray-100",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:L[j].map((a,t)=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-r text-gray-700 font-medium",children:a.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",a.rs.toFixed(2)]})]},t))})]})})]}),b&&((X=T[b])==null?void 0:X.length)>0&&e.jsxs("div",{className:"mt-4 border bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Laminate Rates for ",e.jsx("span",{className:"text-blue-600",children:b})]}),e.jsxs("table",{className:"min-w-full text-sm border",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:T[b].map((a,t)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2 border-r font-medium",children:a.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",a.rs.toFixed(2)]})]},t))})]})]})]})]}),oe(),J("Fittings & Accessories",k),J("Glues",H),J("Non-Branded Materials",M)]})}),Ce=0,Ae=()=>{var K,X,a;const{organizationId:n,quoteId:B}=ge(),v=Ne(),{data:u,isLoading:T}=ye(n,B);let{data:L,isLoading:Y}=me(n,"plywood"),{data:P}=me(n,"Laminate");const[I,g]=o.useState({categoryId:"",categoryName:""});let{data:z=0}=be({organizationId:n,categoryId:I.categoryId}),{data:j=[]}=je(n);const U=(j||[]).map(t=>({value:t._id,label:t.name})),{mutateAsync:b,isPending:V}=Se(),S=o.useRef([]),[q,$]=o.useState(null),[G,p]=o.useState(null),{role:D,permission:k}=Me(),Z=D==="owner"||((K=k==null?void 0:k.materialquote)==null?void 0:K.create),H=D==="owner"||((X=k==null?void 0:k.materialquote)==null?void 0:X.edit),F=o.useMemo(()=>{if(!L)return{};const t={};return L.forEach(s=>{const r=(s==null?void 0:s.data)||{},c=r.Brand??r.brand,l=r["thickness (mm)"]||r.thickness||r.Thickness;let d=r.Rs||r.rs;if(c&&l&&d){const i=String(c).trim(),m=String(l).trim(),x=parseFloat(d);t[i]||(t[i]=[]),t[i].push({thickness:m,rs:x})}}),t},[L]),M=o.useMemo(()=>Object.keys(F),[F]),_=o.useMemo(()=>{if(!P)return{};const t={};return P.forEach(s=>{const r=(s==null?void 0:s.data)||{},c=r.Brand??r.brand,l=r["thickness (mm)"]||r.thickness||r.Thickness,d=r.Rs||r.rs;if(c&&l&&d){const i=String(c).trim(),m=String(l).trim(),x=parseFloat(d);t[i]||(t[i]=[]),t[i].push({thickness:m,rs:x})}}),t},[P]),E=o.useMemo(()=>Object.keys(_),[_]),[R,ee]=o.useState([]),[O,te]=o.useState(0),[Q,re]=o.useState(0),ce=()=>{const t=S.current.map(r=>r.current).filter(r=>r!==null).map(r=>r.getUpdatedFurniture());console.log("updatedFurnitures",t);const s=t.reduce((r,c)=>r+c.totals.furnitureTotal,0);console.log("total",s),te(s),re(ie())},ne=t=>{const s=U.find(r=>r.value===t);g(s?{categoryId:s.value,categoryName:s.label}:{categoryId:"",categoryName:""})},{profitDifference:le,profitPercentage:oe}=o.useMemo(()=>{const t=O-Q,s=Q>0?t/Q*100:0;return{profitDifference:Math.round(t),profitPercentage:s}},[O,Q]),ie=()=>{const t=S.current.map(c=>c.current).filter(c=>c!==null).map(c=>c.getUpdatedFurniture()),s=32;let r=0;return t.forEach(c=>{const l=c.plywoodBrand?F[c.plywoodBrand]||[]:[],d=c.laminateBrand?_[c.laminateBrand]||[]:[],i=c.coreMaterials,m=i[0],x=((m==null?void 0:m.carpenters)||0)*((m==null?void 0:m.days)||0)*z,h=i.length>0?x/i.length:0;i.forEach(y=>{const A=W(y.plywoodNos.thickness,l,"plywood"),de=W(y.laminateNos.thickness,d,"laminate"),ue=y.plywoodNos.quantity*(A*s),pe=y.laminateNos.quantity*(de*s),he=ue+pe;r+=he+h});const f=y=>y.quantity*y.cost,C=c.fittingsAndAccessories.reduce((y,A)=>y+f(A),0),N=c.glues.reduce((y,A)=>y+(A.cost||0),0),w=c.nonBrandMaterials.reduce((y,A)=>y+f(A),0);r+=C+N+w}),Math.round(r)},J=async()=>{var t,s;try{if(!n||!B||!u||!q){xe({title:"Missing info",description:"Please ensure brand and all details are selected",variant:"destructive"});return}const r=S.current.map(d=>d.current).filter(d=>d!==null).map(d=>d.getUpdatedFurniture()),c=r.reduce((d,i)=>d+i.totals.furnitureTotal,0),l=await b({quoteId:B,organizationId:n,data:{quoteId:B,organizationId:n,projectId:u.projectId,brandName:q,laminateBrand:G,furnitures:r,grandTotal:c,notes:"Generated with brand variant"}});Le({src:l.url,alt:l.fileName}),xe({title:"success",description:"Successfully created, check it in the Quote for clients section"})}catch(r){xe({title:"Error",description:((s=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:s.message)??"Operation failed"})}};return o.useEffect(()=>{if(!(u!=null&&u.furnitures))return;const t=u.furnitures.map(s=>({furnitureName:s.furnitureName,coreMaterials:s.coreMaterials||[],fittingsAndAccessories:s.fittingsAndAccessories||[],glues:s.glues||[],nonBrandMaterials:s.nonBrandMaterials||[],totals:{core:s.coreMaterialsTotal||0,fittings:s.fittingsAndAccessoriesTotal||0,glues:s.gluesTotal||0,nbms:s.nonBrandMaterialsTotal||0,furnitureTotal:s.furnitureTotal||0},plywoodBrand:q,laminateBrand:G}));ee(t)},[u]),S.current.length!==R.length&&(S.current=R.map((t,s)=>S.current[s]??Te.createRef())),o.useEffect(()=>{console.log("furnitureRefs Array",S),S.current=R.map((t,s)=>S.current[s]??o.createRef())},[R]),o.useEffect(()=>{!q&&(M==null?void 0:M.length)>0&&$(M[0])},[M]),o.useEffect(()=>{!G&&(E==null?void 0:E.length)>0&&p(E[0])},[E]),e.jsxs("div",{className:"p-2 max-h-full overflow-y-auto",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 pb-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("button",{onClick:()=>v(-1),className:"flex items-center justify-center w-8 h-8 bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-md transition-colors flex-shrink-0",children:e.jsx("i",{className:"fas fa-arrow-left text-gray-600 text-sm"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:((a=u==null?void 0:u.projectId)==null?void 0:a.projectName)||"Project"}),e.jsx("p",{className:"text-md text-gray-500",children:u!=null&&u.quoteNo?`Quote: #${u==null?void 0:u.quoteNo}`:""})]})]}),(Z||H)&&e.jsx(ke,{onClick:J,disabled:V,className:"flex-shrink-0",children:V?"Generating...":"Generate Quote for Client"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Plywood Brand:"}),e.jsx(ae,{options:M,placeholder:"Select Plywood Brand",searchPlaceholder:"Search brands...",onSelect:$,selectedValue:q||"",className:"flex-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Laminate Brand:"}),e.jsx(ae,{options:E,placeholder:"Select Laminate Brand",searchPlaceholder:"Search brands...",onSelect:p,selectedValue:G||"",className:"flex-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Select Salary Category"}),e.jsx(we,{options:U,placeholder:"Choose Labour Category",searchPlaceholder:"Search by name...",value:I.categoryId,onValueChange:ne,searchBy:"name",displayFormat:"detailed",className:"flex-1"})]})]}),e.jsxs("div",{className:" grid grid-cols-4 gap-2",children:[e.jsx(se,{className:"px-2 py-4 border-l-4 border-blue-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Project Cost "," "," ",e.jsx("span",{className:"font-bold",children:"(without profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-blue-600",children:["₹",Q.toLocaleString("en-IN")]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-green-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Client Quote Amount "," "," ",e.jsx("span",{className:"font-bold",children:"(with profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-green-600",children:["₹",O.toLocaleString("en-IN")]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-violet-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-md text-gray-600",children:"Profit Amount"}),e.jsxs("p",{className:"text-md font-bold text-violet-600",children:["₹",le.toLocaleString("en-IN")," ",e.jsxs("span",{className:"text-black !text-[12px] ml-[5px] font-semibold",children:["(",oe.toFixed(2),"%)"]})]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-orange-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-md text-gray-600",children:"Single Labour Cost"}),e.jsxs("p",{className:"text-md font-bold text-orange-600",children:["₹",z]})]})})]})]}),T||Y?e.jsx(ve,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[R.map((t,s)=>e.jsx(Re,{index:s,data:t,labourCost:z,ref:S.current[s],laminateRatesByBrand:_,brandRatesByName:F,selectedBrand:q,selectedLaminateBrand:G,brandOptions:M,laminateBrandOptions:E,onFurnitureChange:ce},s)),e.jsx("div",{className:"mt-10 text-right",children:e.jsxs("div",{className:"inline-block bg-green-50 border border-green-200 rounded-md px-6 py-4",children:[e.jsx("p",{className:"text-md font-medium text-gray-700 mb-1",children:"Total Estimate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["₹",O.toLocaleString("en-IN")]})]})})]})})]})};export{Ce as DEFAULT_LAMINATE_RATE_PER_SQFT,Ae as default};
