import{c as b,d as f,j as t,M as w,B as c,t as m}from"./index-CBsAK0nv.js";import{c as C,d as j,e as v}from"./customerAccountApi-B9DHAai9.js";import{C as y}from"./CustomerAccountForm-BcwDStHV.js";const F=()=>{const{id:s}=b(),r=f(),{data:d,isLoading:u,isError:l,error:a,refetch:x}=C(s),i=j(),n=v(),p=async(g,o)=>{try{if(await i.mutateAsync({customerId:s,payload:g}),o&&o.length>0){const e=new FormData;o.forEach(h=>{e.append("files",h)}),await n.mutateAsync({id:s,formData:e})}m({title:"Success",description:"Customer updated successfully"}),x()}catch(e){throw m({title:"Error",description:e.message||"Failed to update customer"}),e}};return u?t.jsx(w,{}):l?t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl",children:"⚠️ Error Occurred"}),t.jsx("p",{className:"text-red-500 mb-4",children:(a==null?void 0:a.message)||"Failed to load customer"}),t.jsx(c,{onClick:()=>r(-1),children:"Go Back"})]}):d?t.jsx(y,{mode:"view",initialData:d,onSubmit:p,isSubmitting:i.isPending||n.isPending}):t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-yellow-600 font-semibold mb-2 text-xl",children:"Customer Not Found"}),t.jsx(c,{onClick:()=>r(-1),children:"Go Back"})]})};export{F as default};
