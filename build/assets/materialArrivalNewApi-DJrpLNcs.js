import{u as d}from"./useQuery-h0LZ4b8f.js";import{g as o,h as u,i as f}from"./index-Dkf7SbMA.js";import{u as l}from"./useMutation-DtRxugN4.js";import{g as c}from"./roleCheck-CXq1v0D5.js";const m=async(e,a,r,i)=>(await f.put(`https://houseofram.in/api/materialarrivalcheck/updateImage/${e}/${a}/${r}`,i)).data,y=async(e,a,r,i,t)=>(await t.put(`/materialarrivalcheck/updatequantity/${e}/${a}/${r}`,{arrivedQuantity:i})).data,p=async(e,a,r,i,t)=>(await t.put(`/materialarrivalcheck/uploadimage/staff/${e}/${a}/${r}`,i)).data,S=()=>{const e=u();return l({mutationFn:async({projectId:a,orderNumber:r,subItemId:i,formData:t})=>await m(a,r,i,t),onSuccess:(a,{projectId:r})=>{e.invalidateQueries({queryKey:["material-arrival",r]})}})},b=()=>{const{role:e}=o(),a=c(e),r=u(),i=["owner","staff","CTO"];return l({mutationFn:async({projectId:t,orderNumber:n,subItemId:s,formData:w})=>{if(!e||!i.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not available");return await p(t,n,s,w,a)},onSuccess:(t,{projectId:n})=>{r.invalidateQueries({queryKey:["material-arrival",n]})}})},F=()=>{const{role:e}=o(),a=c(e),r=u(),i=["owner","staff","CTO"];return l({mutationFn:async({projectId:t,orderNumber:n,subItemId:s,arrivedQuantity:w})=>{if(!e||!i.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not available");return await y(t,n,s,w,a)},onSuccess:(t,{projectId:n})=>{r.invalidateQueries({queryKey:["material-arrival",n]})}})},v=async(e,a,r,i,t)=>(await t.put(`/materialarrivalcheck/updateverification/${e}/${a}/${r}`,{isVerified:i})).data,I=()=>{const{role:e}=o(),a=c(e),r=u(),i=["owner","staff","CTO"];return l({mutationFn:async({projectId:t,orderNumber:n,subItemId:s,toggle:w})=>{if(!e||!i.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not available");return await v(t,n,s,w,a)},onSuccess:(t,{projectId:n})=>{r.invalidateQueries({queryKey:["material-arrival",n]})}})},h=async(e,a)=>(await a.get(`/materialarrivalcheck/getalldetails/${e}`)).data.data,N=e=>{const{role:a}=o(),r=c(a),i=["owner","staff","CTO","worker"];return d({queryKey:["material-arrival",e],queryFn:async()=>{if(!a||!i.includes(a))throw new Error("Not allowed");return await h(e,r)},enabled:!!e&&!!a,retry:!1,refetchOnMount:!1})},A=async(e,a)=>(await a.post(`/materialarrivalcheck/${e}/generate-link`)).data.data,g=async(e,a)=>(await f.get(`https://houseofram.in/api/materialarrivalcheck/public/${e}/${a}`)).data.data,Q=()=>{const{role:e}=o(),a=c(e),r=["owner","staff","CTO"];return l({mutationFn:async({projectId:i})=>{if(!e||!r.includes(e))throw new Error("Not allowed");return await A(i,a)}})},R=(e,a)=>d({queryKey:["material-arrival-public",e,a],queryFn:async()=>await g(e,a),enabled:!!e&&!!a}),$=async({formId:e,projectId:a,deadLine:r,api:i})=>{const{data:t}=await i.put(`/materialarrivalcheck/deadline/${a}/${e}`,{deadLine:r});if(!t.ok)throw new Error(t.message);return t.data},M=async({projectId:e,api:a})=>{const{data:r}=await a.put(`/materialarrivalcheck/completionstatus/${e}`);if(!r.ok)throw new Error(r.message);return r.data},K=()=>{const e=["owner","staff","CTO"],{role:a}=o(),r=c(a),i=u();return l({mutationFn:async({formId:t,projectId:n,deadLine:s})=>{if(!a||!e.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await $({formId:t,projectId:n,deadLine:s,api:r})},onSuccess:(t,n)=>{i.invalidateQueries({queryKey:["ordering-material",n.formId]})}})},O=()=>{const e=["owner","staff","CTO"],{role:a}=o(),r=c(a),i=u();return l({mutationFn:async({projectId:t})=>{if(!a||!e.includes(a))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await M({projectId:t,api:r})},onSuccess:(t,{projectId:n})=>{i.invalidateQueries({queryKey:["material-arrival",n]})}})};export{F as a,b,N as c,Q as d,K as e,O as f,R as g,S as h,I as u};
