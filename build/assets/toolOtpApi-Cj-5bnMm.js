import{u as w}from"./useQuery-Cc7pLKfK.js";import{u as s}from"./useMutation-7YLqc7VE.js";import{u as p}from"./useInfiniteQuery-DQF0m-E9.js";import{u as e,q as f}from"./index-By5P0A7l.js";import{g as n}from"./roleCheck-YGaMnK_P.js";const y=async(o,r)=>{const{data:t}=await o.get(`/tool/getalltool/${r}`);if(!t.ok)throw new Error(t.message);return t.data},m=async(o,r)=>{const{data:t}=await o.get(`/tool/getalltoolroom/${r}`);if(!t.ok)throw new Error(t.message);return t.data},g=async(o,r)=>{const{data:t}=await r.post("/tool/issue/generateotp",o);if(!t.ok)throw new Error(t.message);return t.data},E=async(o,r)=>{const{data:t}=await r.patch("/tool/issue/enterotp",o);if(!t.ok)throw new Error(t.message);return t.data},T=async(o,r)=>{const{data:t}=await r.post("/tool/issue/resendotp",o);if(!t.ok)throw new Error(t.message);return t.data},A=async(o,r)=>{const{data:t}=await r.post("/tool/return/generateotp",o);if(!t.ok)throw new Error(t.message);return t.data},I=async(o,r)=>{const{data:t}=await r.patch("/tool/return/enterotp",o);if(!t.ok)throw new Error(t.message);return t.data},P=async(o,r)=>{const{data:t}=await r.post("/tool/return/resendotp",o);if(!t.ok)throw new Error(t.message);return t.data},i=["owner","staff","CTO"],d=["owner","staff","CTO","worker"],O=o=>{const{role:r}=e(),t=n(r);return w({queryKey:["toolmaster","withoutpagination",o],queryFn:async()=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!t)throw new Error("API instance not found for role");return await y(t,o)},enabled:!!o})},K=o=>{const{role:r}=e(),t=n(r);return w({queryKey:["toolroom","withoutpagination",o],queryFn:async()=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!t)throw new Error("API instance not found for role");return await m(t,o)},enabled:!!o})},b=()=>{const{role:o}=e(),r=n(o);return s({mutationFn:async t=>{if(!o||!i.includes(o))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await g(t,r)}})},z=()=>{const{role:o}=e(),r=n(o);return s({mutationFn:async t=>{if(!o||!d.includes(o))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await E(t,r)},onSuccess:()=>{f.invalidateQueries({queryKey:["toolmaster"]})}})},C=()=>{const{role:o}=e(),r=n(o);return s({mutationFn:async t=>{if(!o||!i.includes(o))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await A(t,r)}})},D=()=>{const{role:o}=e(),r=n(o);return s({mutationFn:async t=>{if(!o||!d.includes(o))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await I(t,r)},onSuccess:()=>{f.invalidateQueries({queryKey:["toolmaster"]})}})},G=()=>{const{role:o}=e(),r=n(o);return s({mutationFn:async t=>{if(!o||!i.includes(o))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await T(t,r)}})},Q=()=>{const{role:o}=e(),r=n(o);return s({mutationFn:async t=>{if(!o||!i.includes(o))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await P(t,r)}})},R=async({toolId:o,params:r,api:t})=>{const{data:a}=await t.get(`/tool/history/${o}`,{params:r});if(!a.ok)throw new Error(a.message);return a},$=(o,r)=>{const t=["owner","staff","CTO","worker"],{role:a}=e(),u=n(a);return p({queryKey:["tool","history",o,r],queryFn:async({pageParam:c=1})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!u)throw new Error("API instance not found for role");return await R({toolId:o,params:{...r,page:c,limit:10},api:u})},initialPageParam:1,getNextPageParam:c=>{const{currentPage:l,totalPages:h}=c.pagination||{};if(l<h)return l+1},enabled:!!a&&!!u&&!!o})};export{$ as a,G as b,Q as c,O as d,b as e,C as f,z as g,D as h,K as u};
