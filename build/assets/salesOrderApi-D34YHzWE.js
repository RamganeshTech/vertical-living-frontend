import{c as p,q as f}from"./index-C2yypHlC.js";import{g as w}from"./roleCheck-ZvNAcsbM.js";import{u as m}from"./useQuery-CXWUgeEV.js";import{u as g}from"./useMutation-5BwurMj6.js";import{u as y}from"./useInfiniteQuery-BGm1jTd_.js";const h=async({organizationId:a,customerId:r,page:e,limit:n,date:i,salesOrderDate:l,search:c,api:u,sortBy:d,sortOrder:s})=>{const t=new URLSearchParams;a&&t.append("organizationId",a),r&&t.append("customerId",r),e&&t.append("page",e.toString()),n&&t.append("limit",n.toString()),i&&t.append("date",i),l&&t.append("salesOrderDate",l),c&&t.append("search",c),s&&t.append("sortOrder",s),d&&t.append("sortBy",d);const{data:o}=await u.get(`/department/accounting/salesorder/getallorder?${t.toString()}`);if(!o.ok)throw new Error(o.message);return o},S=async({salesData:a,api:r})=>{const{data:e}=await r.post("/department/accounting/salesorder/createorder",a);if(!e.ok)throw new Error(e.message);return e.data},P=async({salesId:a,api:r})=>{const{data:e}=await r.delete(`/department/accounting/salesorder/deleteorder/${a}`);if(!e.ok)throw new Error(e.message);return e.data},E=async({salesId:a,api:r})=>{const{data:e}=await r.get(`/department/accounting/salesorder/getsingleorder/${a}`);if(!e.ok)throw new Error(e.message);return e.data},C=({organizationId:a,customerId:r,limit:e=10,search:n,salesOrderDate:i,date:l,sortBy:c,sortOrder:u})=>{const d=["owner","staff","CTO"],{role:s}=p(),t=w(s);return y({queryKey:["salesorder",a,r,e,l,n,i,c,u],queryFn:async({pageParam:o=1})=>{if(!s||!d.includes(s))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await h({organizationId:a,customerId:r,page:o,limit:e,date:l,salesOrderDate:i,search:n,api:t,sortBy:c,sortOrder:u})},getNextPageParam:o=>{if(o.pagination.page<o.pagination.totalPages)return o.pagination.page+1},getPreviousPageParam:o=>{if(o.pagination.page>1)return o.pagination.page-1},initialPageParam:1,enabled:!!s&&d.includes(s)&&!!a})},v=()=>{const a=["owner","staff","CTO"],{role:r}=p(),e=w(r);return g({mutationFn:async({salesData:n})=>{if(!r||!a.includes(r))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await S({salesData:n,api:e})},onSuccess:()=>{f.invalidateQueries({queryKey:["salesorder"]})}})},F=()=>{const a=["owner","staff","CTO"],{role:r}=p(),e=w(r);return g({mutationFn:async({salesId:n})=>{if(!r||!a.includes(r))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await P({salesId:n,api:e})},onSuccess:()=>{f.invalidateQueries({queryKey:["salesorder"]})}})},N=a=>{const r=["owner","staff","CTO"],{role:e}=p(),n=w(e);return m({queryKey:["salesordersingle",a],queryFn:async()=>{if(!e||!r.includes(e))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await E({salesId:a,api:n})},enabled:!!a&&!!e&&r.includes(e)})};export{F as a,N as b,v as c,C as u};
