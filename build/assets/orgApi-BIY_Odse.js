import{u}from"./useQuery-h0LZ4b8f.js";import{u as c}from"./useMutation-DtRxugN4.js";import{g as a,q as i,A as w}from"./index-Dkf7SbMA.js";import{g as s}from"./roleCheck-CXq1v0D5.js";const d=async t=>{const{data:e}=await w.post("/orgs/createorganziation",t);if(!e.ok)throw new Error(e.message);return e.data},y=async t=>{const{data:e}=await t.get("/orgs/getorganizations");return e.ok?e.data:null},g=async(t,e)=>{const{data:r}=await e.get(`/orgs/getsingleorganization/${t}`);return r.ok?r.data:{}},h=async({updateField:t,orgsId:e,api:r})=>{const{data:o}=await r.put(`/orgs/updateorganization/${e}`,t);if(!o.ok)throw new Error(o.message);return o.data},p=async(t,e)=>{const{data:r}=await e.delete(`/orgs/deleteorganization/${t}`);if(!r.ok)throw new Error(r.message);return r},W=()=>{const t=["owner","staff","CTO","client","worker"],{role:e}=a(),r=s(e);return u({queryKey:["myOrgs"],queryFn:async()=>{if(!e)throw new Error("Not Authorized");if(!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await y(r)},refetchOnWindowFocus:!1,retry:!1})},B=t=>{const e=["owner","staff","CTO","client","worker"],{role:r}=a(),o=s(r);return u({queryKey:["myOrgs-single"],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await g(t,o)},refetchOnWindowFocus:!1,retry:!1})},G=()=>{const t=["owner"],{role:e}=a(),r=s(e);return c({mutationFn:async o=>{if(!e)throw new Error("Not authorized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await d(o)},onSuccess:()=>{i.invalidateQueries({queryKey:["myOrgs"]}),i.invalidateQueries({queryKey:["myOrgs-single"]})}})},b=()=>{const t=["owner"],{role:e}=a(),r=s(e);return c({mutationFn:async({updateField:o,orgsId:n})=>{if(!e)throw new Error("Not authorized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await h({updateField:o,orgsId:n,api:r})},onSuccess:()=>{i.invalidateQueries({queryKey:["myOrgs"]}),i.invalidateQueries({queryKey:["myOrgs-single"]})}})},_=()=>{const t=["owner"],{role:e}=a(),r=s(e);return c({mutationFn:async o=>{if(!e)throw new Error("Not authorized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await p(o,r)},onSuccess:()=>{i.invalidateQueries({queryKey:["myOrgs"]}),i.invalidateQueries({queryKey:["myOrgs-single"]})}})},m=async(t,e)=>{const{data:r}=await e.get(`/orgs/getstaffsoforganization/${t}`);return r.ok,r.data},E=async(t,e)=>{const{data:r}=await e.post("/orgs/invitestafftoorganization",t);if(!r.ok)throw new Error(r.message);return r.data},O=async({staffId:t,orgId:e,api:r})=>{const{data:o}=await r.patch(`/orgs/removestafffromorganziation?staffId=${t}&orgId=${e}`);if(!o.ok)throw new Error(o.message);return o.data},j=t=>{const e=["owner","staff","CTO"],{role:r}=a(),o=s(r);return u({queryKey:["staffs",t],queryFn:async()=>{if(!r)throw new Error("Not authrized");if(!e.includes(r))throw new Error("youre not allowed to access this api");if(!o)throw new Error("api is null");return await m(t,o)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},M=()=>{const t=["owner","CTO"],{role:e}=a(),r=s(e);return c({mutationFn:async o=>{if(!e)throw new Error("Not authrized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await E(o,r)},onSuccess:(o,n)=>{i.invalidateQueries({queryKey:["staffs",n.organizationId]})}})},Y=()=>{const t=["owner"],{role:e}=a(),r=s(e);return c({mutationFn:async({staffId:o,orgId:n})=>{if(!e)throw new Error("Not authrized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await O({staffId:o,orgId:n,api:r})},onSuccess:(o,n)=>{i.invalidateQueries({queryKey:["staffs",n.orgId]})}})},z=async(t,e)=>{const{data:r}=await e.get(`/orgs/getctooforganization/${t}`);return r.ok,r.data},k=async(t,e)=>{const{data:r}=await e.post("/orgs/invitectotoorganization",t);if(!r.ok)throw new Error(r.message);return r.data},F=async({CTOId:t,orgId:e,api:r})=>{const{data:o}=await r.patch(`/orgs/removectofromorganziation?CTOId=${t}&orgId=${e}`);if(!o.ok)throw new Error(o.message);return o.data},D=t=>{const e=["owner","staff","CTO"],{role:r}=a(),o=s(r);return u({queryKey:["CTO",t],queryFn:async()=>{if(!r)throw new Error("Not authrized");if(!e.includes(r))throw new Error("youre not allowed to access this api");if(!o)throw new Error("api is null");return await z(t,o)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},x=()=>{const t=["owner"],{role:e}=a(),r=s(e);return c({mutationFn:async o=>{if(!e)throw new Error("Not authrized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await k(o,r)}})},L=()=>{const t=["owner"],{role:e}=a(),r=s(e);return c({mutationFn:async({CTOId:o,orgId:n})=>{if(!e)throw new Error("Not authrized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await F({CTOId:o,orgId:n,api:r})},onSuccess:(o,n)=>{i.invalidateQueries({queryKey:["CTO",n.orgId]})}})},v=async({projectId:t,api:e,organizationId:r})=>{const{data:o}=await e.post("orgs/inviteclienttoproject",{projectId:t,organizationId:r});if(!o.ok)throw new Error(o.message);return o.data},H=()=>{const t=["owner","CTO"],{role:e}=a(),r=s(e);return c({mutationFn:async({projectId:o,organizationId:n})=>{if(!e)throw new Error("not authrized");if(!t.includes(e))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await v({projectId:o,api:r,organizationId:n})}})},q=async(t,e)=>{const{data:r}=await w.get(`/orgs/getclientsofproject/${t}/${e}`);return r.ok,r.data},J=(t,e)=>{const r=["owner","staff","CTO"],{role:o}=a(),n=s(o);return u({queryKey:["CTO",t],queryFn:async()=>{if(!o||!r.includes(o))throw new Error("not allowed to make this api call");if(!n)throw new Error("API instance not found for role");return await q(t,e)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},A=async({payload:t,api:e})=>{const{data:r}=await e.post("orgs/inviteworker",t);if(!r.ok)throw new Error(r.message);return r.data},C=async(t,e)=>{const{data:r}=await e.get(`orgs/getworker/${t}`);if(!r.ok)throw new Error(r.message);return r.data},S=async({workerId:t,orgId:e,projectId:r,api:o})=>{const{data:n}=await o.put(`orgs/removeworker/${e}/${t}/${r}`);if(!n.ok)throw new Error(n.message);return n.data},V=()=>{const t=["owner","staff","CTO"],{role:e}=a(),r=s(e);return c({mutationFn:async o=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await A({api:r,payload:o})}})},X=t=>{const e=["owner","staff","CTO"],{role:r}=a(),o=s(r);return u({queryKey:["workers",t],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("Not Allowed to Make this api Call");if(!o)throw new Error("API instance not found for role");return await C(t,o)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},Z=()=>{const t=["owner","staff","CTO"],{role:e}=a(),r=s(e);return c({mutationFn:async({workerId:o,orgId:n,projectId:f})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await S({workerId:o,orgId:n,projectId:f,api:r})},onSuccess:()=>i.invalidateQueries({queryKey:["workers"]})})},T=async({api:t,organizationId:e,roleToCreate:r,payload:o})=>{const{data:n}=await t.post(`orgs/registeruser/${e}/${r}`,o);if(!n.ok)throw new Error(n.message||"Failed to register");return n},R=async({api:t,userId:e,permission:r})=>{const{data:o}=await t.put(`orgs/updatepermission/${e}`,{permission:r});if(!o.ok)throw new Error(o.message||"Failed to update permissions");return o},K=async({api:t,organizationId:e})=>{const{data:r}=await t.get(`orgs/getalluser/${e}`);if(!r.ok)throw new Error(r.message||"Failed to fetch users");return r.data},$=async({userId:t,api:e})=>{const{data:r}=await e.get(`orgs/getsingleuser/${t}`);if(!r.ok)throw new Error(r.message||"Failed to fetch users");return r.data},P=async({api:t,userId:e})=>{const{data:r}=await t.delete(`orgs/deleteuser/${e}`);if(!r.ok)throw new Error(r.message||"Failed to delete user");return r},l=["owner"],rr=()=>{const{role:t}=a(),e=s(t);return c({mutationFn:async({organizationId:r,roleToCreate:o,payload:n})=>{if(!t||!l.includes(t))throw new Error("You are not authorized to perform this action");if(!e)throw new Error("API instance not found for role");return await T({api:e,organizationId:r,roleToCreate:o,payload:n})},onSuccess:(r,o)=>{i.invalidateQueries({queryKey:["orgUsers",o.organizationId]})}})},er=()=>{const{role:t}=a(),e=s(t);return c({mutationFn:async({userId:r,permission:o})=>{if(!t||!l.includes(t))throw new Error("You are not authorized to update permissions");if(!e)throw new Error("API instance not found");return await R({api:e,userId:r,permission:o})},onSuccess:(r,o)=>{i.invalidateQueries({queryKey:["orgUsers","single",o.userId]})}})},tr=t=>{const{role:e}=a(),r=s(e);return u({queryKey:["orgUsers",t],queryFn:async()=>{if(!e||!l.includes(e))throw new Error("You are not authorized to view users");if(!r)throw new Error("API instance not found");return await K({api:r,organizationId:t})},enabled:!!t&&!!e&&l.includes(e)})},or=t=>{const{role:e}=a(),r=s(e);return u({queryKey:["orgUsers","single",t],queryFn:async()=>{if(!e||!l.includes(e))throw new Error("You are not authorized to view users");if(!r)throw new Error("API instance not found");return await $({api:r,userId:t})},enabled:!!t&&!!e&&l.includes(e)})},nr=()=>{const{role:t}=a(),e=s(t);return c({mutationFn:async({userId:r,organizationId:o})=>{if(console.log(o),!t||!l.includes(t))throw new Error("You are not authorized to delete users");if(!e)throw new Error("API instance not found");return await P({api:e,userId:r})},onSuccess:(r,o)=>{i.invalidateQueries({queryKey:["orgUsers",o.organizationId]})}})};export{tr as a,nr as b,er as c,or as d,_ as e,G as f,W as g,B as h,b as i,X as j,V as k,Z as l,j as m,Y as n,M as o,D as p,L as q,x as r,H as s,J as t,rr as u};
