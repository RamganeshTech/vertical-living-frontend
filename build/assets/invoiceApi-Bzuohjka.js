import{u as w,q as p}from"./index-CVfwS1G2.js";import{g as f}from"./roleCheck-DROzFqxW.js";import{u as g}from"./useQuery-BBoMICzh.js";import{u as d}from"./useMutation-DuqS-NT9.js";import{u as m}from"./useInfiniteQuery-Cd2DStse.js";const v=async({organizationId:t,customerId:n,page:e,limit:o,date:s,search:c,sortBy:l,sortOrder:u,api:i})=>{const a=new URLSearchParams;t&&a.append("organizationId",t),n&&a.append("customerId",n),e&&a.append("page",e.toString()),o&&a.append("limit",o.toString()),s&&a.append("date",s),l&&a.append("sortBy",l),u&&a.append("sortOrder",u),c&&a.append("search",c);const{data:r}=await i.get(`/department/accounting/invoice/getallinvoice?${a.toString()}`);if(!r.ok)throw new Error(r.message);return r},y=async({invoiceData:t,api:n})=>{const{data:e}=await n.post("/department/accounting/invoice/createinvoice",t);if(!e.ok)throw new Error(e.message);return e.data},h=async({invoiceId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/invoice/deleteinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},P=async({invoiceId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/invoice/getsingleinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},S=({organizationId:t,customerId:n,limit:e=10,search:o,date:s,sortBy:c,sortOrder:l})=>{const u=["owner","staff","CTO"],{role:i}=w(),a=f(i);return m({queryKey:["invoices",t,n,e,s,o,c,l],queryFn:async({pageParam:r=1})=>{if(!i||!u.includes(i))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await v({organizationId:t,customerId:n,page:r,limit:e,date:s,search:o,sortBy:c,sortOrder:l,api:a})},getNextPageParam:r=>{if(r.pagination.page<r.pagination.totalPages)return r.pagination.page+1},getPreviousPageParam:r=>{if(r.pagination.page>1)return r.pagination.page-1},initialPageParam:1,enabled:!!i&&u.includes(i)&&!!t})},R=()=>{const t=["owner","staff","CTO"],{role:n}=w(),e=f(n);return d({mutationFn:async({invoiceData:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await y({invoiceData:o,api:e})},onSuccess:()=>{p.invalidateQueries({queryKey:["invoices"]})}})},C=()=>{const t=["owner","staff","CTO"],{role:n}=w(),e=f(n);return d({mutationFn:async({invoiceId:o})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await h({invoiceId:o,api:e})},onSuccess:()=>{p.invalidateQueries({queryKey:["invoices"]})}})},F=t=>{const n=["owner","staff","CTO"],{role:e}=w(),o=f(e);return g({queryKey:["invoice",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await P({invoiceId:t,api:o})},enabled:!!t&&!!e&&n.includes(e)})};export{C as a,F as b,R as c,S as u};
