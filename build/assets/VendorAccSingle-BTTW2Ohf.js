import{b as v,u as j,j as e}from"./index-C2KHEypQ.js";import{V as b}from"./VendorAccountForm-_6qPB4-J.js";import{t as c}from"./toast-BSC5QTk1.js";import{c as y,d as N,e as V}from"./vendorAccApi-BvmDi00_.js";import"./Card-C6pBT2vm.js";import"./Button-Cz-akwNZ.js";import"./ImageGalleryMain-CIOgQIO1.js";import"./constants-ZBpAFlne.js";import"./downloadFile--yCVHHwF.js";import"./index-D5MZ_Dqb.js";import"./dateFormator-BGKi5rfZ.js";import"./useQuery-BmC89CNR.js";import"./useMutation-DaAue-fW.js";import"./useInfiniteQuery-Ce_ii5sB.js";import"./roleCheck-DBD7VNWv.js";const R=()=>{const{id:a}=v(),m=j(),{data:p,isLoading:l,isError:u,error:s,refetch:x}=y(a||""),n=N(),r=V(),f=async(g,i)=>{var o,d;try{if(!a)return;if(await n.mutateAsync({vendorId:a,payload:g}),i&&i.length>0){const t=new FormData;i.forEach(h=>{t.append("files",h)}),await r.mutateAsync({id:a,formData:t})}c({title:"Success",description:"Vendor updated successfully"}),await x()}catch(t){throw console.error("Update failed",t),c({title:"Error",description:((d=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:d.message)||(t==null?void 0:t.message)||"Failed to update vendor",variant:"destructive"}),t}};return l?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-4xl mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading vendor details..."})]})}):u?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-xl mb-2",children:"Error Loading Vendor"}),e.jsx("p",{className:"text-gray-500 mb-4",children:s==null?void 0:s.message}),e.jsx("button",{onClick:()=>m(-1),className:"text-blue-600 hover:underline",children:"Go Back"})]}):e.jsx(b,{mode:"view",initialData:p,onSubmit:f,isSubmitting:n.isPending||r.isPending})};export{R as default};
