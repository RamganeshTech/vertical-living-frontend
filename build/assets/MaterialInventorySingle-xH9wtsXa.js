import{a as R,u as U,r as m,j as e}from"./index-IX_jUi_Z.js";import{C as S,d as F,a as O,b as T,c as G}from"./Card-DYFZZWO8.js";import{I as H}from"./Input-DbCzT9sN.js";import{L as h}from"./Label-CTWkJgEj.js";import{B as I}from"./Badge-DGC9tvRt.js";import{B as l}from"./Button-D7Kb4xIQ.js";import{t as P}from"./toast-BSC5QTk1.js";import{d as V,b as W}from"./materialInventoryApi-CTNDdMy9.js";import z from"./MaterialOverviewLoading-65JYNlHA.js";import"./roleCheck-yWEzJ9f0.js";import"./useQuery-BBgvqOK0.js";import"./useMutation-oVcqBODs.js";import"./useInfiniteQuery-CoVfmFiF.js";import"./Skeleton-BKzIbh6x.js";const le=()=>{var N,y,w,C,k,M,E;const D=R(),{id:x}=U(),[n,f]=m.useState(!1),[t,c]=m.useState({}),[g,L]=m.useState(null),{data:s,isLoading:B,error:d,isError:$}=V(x),o=W();m.useEffect(()=>{s!=null&&s.specification&&c(s==null?void 0:s.specification)},[s]);const p=()=>{f(!0),s!=null&&s.specification&&c({...s.specification})},v=()=>{f(!1),s!=null&&s.specification&&c({...s.specification})},A=a=>{c(i=>({...i,[a.target.name]:a.target.value}))},b=async()=>{var a,i;if(!(!x||!t))try{await o.mutateAsync({id:x,specification:t}),P({title:"✓ Updated",description:"Material inventory updated successfully",variant:"default"}),f(!1)}catch(r){P({title:"Error",description:((i=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:i.message)||(r==null?void 0:r.message)||"something has went wrong",variant:"destructive"})}};if(B)return e.jsx(z,{});if($||g||d)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-blue-50 to-white p-6 flex items-center justify-center",children:e.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 rounded-2xl p-6 shadow-lg max-w-xl w-full",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Error Loading Data"}),e.jsx("p",{className:"text-sm text-red-600",children:g||(d==null?void 0:d.message)||"Failed to load data"})]})]}),e.jsx("button",{onClick:()=>L(null),className:"text-red-400 hover:text-red-700 transition-colors",children:e.jsx("i",{className:"fas fa-times text-xl"})})]})})});if(!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-blue-50 to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsx("i",{className:"fas fa-box-open text-6xl mb-4"}),e.jsx("p",{className:"text-xl",children:"No data found"})]})});const j=t==null?void 0:t.image,u=[{key:"mrp",label:"MRP",icon:"fa-indian-rupee-sign",type:"number"},{key:"category",label:"Category",icon:"fa-tag",type:"text"},{key:"subcategory",label:"Sub Category",icon:"fa-tags",type:"text"},{key:"model",label:"Model",icon:"fa-cube",type:"text"},{key:"description",label:"Description",icon:"fa-align-left",type:"text"},{key:"watt",label:"Watt",icon:"fa-bolt",type:"number"},{key:"itemCode",label:"Item Code",icon:"fa-barcode",type:"text"},{key:"cct",label:"CCT",icon:"fa-lightbulb",type:"text"}];return e.jsx("div",{className:"max-h-full min-h-full overflow-y-auto bg-gradient-to-br from-violet-50 via-blue-50 to-white p-4 ",children:e.jsxs("div",{className:"max-w-full mx-auto",children:[e.jsxs("header",{className:"mb-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{onClick:()=>D(-1),className:"bg-white hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-violet-600 to-blue-600 bg-clip-text text-transparent",children:(N=s==null?void 0:s.specification)!=null&&N.subcategory?(y=s==null?void 0:s.specification)==null?void 0:y.subcategory:"Material Details"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage material inventory information"})]})]}),e.jsx("div",{className:"flex gap-3",children:n?e.jsxs(e.Fragment,{children:[e.jsxs(l,{onClick:v,variant:"outline",className:"border-2 border-gray-300 hover:bg-gray-50",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(l,{onClick:b,disabled:o.isPending,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save Changes"]})})]}):e.jsxs(l,{onClick:p,className:"bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white shadow-lg",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),"Edit Details"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(S,{className:"overflow-hidden border-2 border-violet-100 shadow-xl hover:shadow-2xl transition-shadow duration-300",children:e.jsxs(F,{className:"p-0",children:[j?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:j,alt:t.itemCode||"Material",className:"w-full h-auto object-cover rounded-t-xl",onError:a=>{a.target.src="https://via.placeholder.com/400x400?text=No+Image"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-t-xl"})]}):e.jsx("div",{className:"bg-gradient-to-br from-violet-100 to-blue-100 h-80 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-violet-300",children:[e.jsx("i",{className:"fas fa-image text-6xl mb-3"}),e.jsx("p",{className:"text-sm",children:"No Image Available"})]})}),e.jsx("div",{className:"p-6 bg-gradient-to-br from-violet-50 to-blue-50",children:e.jsxs("div",{className:"space-y-4",children:[((w=s==null?void 0:s.specification)==null?void 0:w.mrp)&&e.jsx("div",{children:e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-3",children:["₹",s.specification.mrp,e.jsx("span",{className:"text-xs font-normal text-gray-500 ml-2",children:"MRP"})]})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[((C=s==null?void 0:s.specification)==null?void 0:C.category)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-gray-500",children:"Category"}),e.jsx(I,{variant:"default",children:(k=s==null?void 0:s.specification)==null?void 0:k.category})]}),((M=s==null?void 0:s.specification)==null?void 0:M.itemCode)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-gray-500",children:"Code"}),e.jsx(I,{variant:"success",className:"font-mono",children:(E=s==null?void 0:s.specification)==null?void 0:E.itemCode})]})]})]})})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(S,{className:"border-2 border-violet-100 shadow-xl",children:[e.jsxs(O,{className:"bg-gradient-to-r from-violet-50 to-blue-50 border-b-2 border-violet-100",children:[e.jsxs(T,{className:"text-2xl text-violet-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-info-circle"}),"Specifications"]}),e.jsx(G,{children:n?"Edit material specifications below":"Detailed material information"})]}),e.jsxs(F,{className:"p-6",children:[n?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{htmlFor:a.key,className:"flex items-center gap-2 text-violet-700",children:[e.jsx("i",{className:`fas ${a.icon} text-sm`}),a.label]}),e.jsx(H,{id:a.key,name:a.key,type:a.type,value:t[a.key]||"",onChange:A,placeholder:`Enter ${a.label.toLowerCase()}`,className:"transition-all duration-200 hover:border-violet-300"})]},a.key))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(a=>{const i=t[a.key];return i?e.jsx("div",{className:"bg-gradient-to-br from-white to-violet-50 p-4 rounded-xl border border-violet-100 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:`fas ${a.icon} text-violet-600`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:a.label}),e.jsx("p",{className:"text-gray-900 font-semibold truncate",children:a.key==="mrp"?`₹${i}`:i})]})]})},a.key):null})}),!n&&Object.keys(t).filter(a=>a!=="image").length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-inbox text-3xl text-violet-400"})}),e.jsx("p",{className:"text-gray-500",children:"No specifications available"}),e.jsxs(l,{onClick:p,className:"mt-4 bg-violet-600 hover:bg-violet-700 text-white",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Specifications"]})]})]})]})})]}),n&&e.jsx("div",{className:"mt-8 lg:hidden",children:e.jsx("div",{className:"bg-white border-2 border-violet-100 rounded-xl p-4 shadow-xl",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(l,{onClick:v,variant:"outline",className:"flex-1 border-2 border-gray-300 hover:bg-gray-50",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(l,{onClick:b,disabled:o.isPending,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save"]})})]})})})]})})};export{le as default};
