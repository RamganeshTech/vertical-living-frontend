import{u as c}from"./useQuery-Cc7pLKfK.js";import{u}from"./useMutation-7YLqc7VE.js";import{u as w}from"./useInfiniteQuery-DQF0m-E9.js";import{u as a,q as l}from"./index-By5P0A7l.js";import{g as s}from"./roleCheck-YGaMnK_P.js";const m=async(r,e)=>{const{data:o}=await e.post("/toolroom/create",r);if(!o.ok)throw new Error(o.message);return o.data},d=async({id:r,updateData:e,api:o})=>{const{data:t}=await o.patch(`/toolroom/update/${r}`,e);if(!t.ok)throw new Error(t.message);return t.data},f=async({params:r,api:e})=>{const{data:o}=await e.get("/toolroom/getall",{params:r});if(!o.ok)throw new Error(o.message);return o},y=async(r,e)=>{const{data:o}=await e.get(`/toolroom/get/${r}`);if(!o.ok)throw new Error(o.message);return o.data},p=async(r,e)=>{const{data:o}=await e.delete(`/toolroom/delete/${r}`);if(!o.ok)throw new Error(o.message);return o},i=["owner","staff","CTO"],T=()=>{const{role:r}=a(),e=s(r);return u({mutationFn:async o=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await m(o,e)},onSuccess:()=>{l.invalidateQueries({queryKey:["toolroom"]})}})},P=()=>{const{role:r}=a(),e=s(r);return u({mutationFn:async({id:o,updateData:t})=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await d({id:o,updateData:t,api:e})},onSuccess:()=>{l.invalidateQueries({queryKey:["toolroom"]})}})},q=r=>{const e=["owner","staff","CTO","worker"],{role:o}=a(),t=s(o);return w({queryKey:["toolroom","all",r],queryFn:async({pageParam:n=1})=>{if(!o||!e.includes(o))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await f({params:{...r,page:n,limit:10},api:t})},initialPageParam:1,getNextPageParam:n=>{if(n.currentPage<n.totalPages)return n.currentPage+1},enabled:!!o&&!!t})},I=r=>{const{role:e}=a(),o=s(e);return c({queryKey:["toolroom",r],queryFn:async()=>{if(!e||!i.includes(e))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await y(r,o)},enabled:!!r&&!!e&&!!o})},k=()=>{const{role:r}=a(),e=s(r);return u({mutationFn:async o=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await p(o,e)},onSuccess:()=>{l.invalidateQueries({queryKey:["toolroom"]})}})};export{k as a,I as b,P as c,T as d,q as u};
