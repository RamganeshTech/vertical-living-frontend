import{b as k,c as Os,d as Rs,e as R,q as _,g as A,u as Ms,r as y,j as e}from"./index-DCvjwNGU.js";const $s=async({organizationId:i,page:r=1,limit:o=10,name:c,email:h,phone:f,empRole:I,api:b})=>{const{data:S}=await b.get("/department/hr/getallemployee",{params:{organizationId:i,page:r,limit:o,name:c,email:h,phone:f,empRole:I}});if(!S.ok)throw new Error(S.message);return S},Us=async({empId:i,api:r})=>{const{data:o}=await r.get(`/department/hr/getsingle/${i}`);if(!o.ok)throw new Error(o.message);return o.data},zs=async({empId:i,updates:r,api:o})=>{const{data:c}=await o.put(`/department/hr/update/${i}`,r);if(!c.ok)throw new Error(c.message);return c.data},qs=async({empId:i,api:r})=>{const{data:o}=await r.delete(`/department/hr/deleteemployee/${i}`);if(!o.ok)throw new Error(o.message);return o.data},Bs=async({empId:i,type:r,file:o,api:c})=>{const h=new FormData;h.append("file",o),h.append("type",r);const{data:f}=await c.post(`/department/hr/${i}/uploaddocument`,h,{headers:{"Content-Type":"multipart/form-data"}});if(!f.ok)throw new Error(f.message);return f.data},Qs=async({empId:i,docId:r,api:o})=>{const{data:c}=await o.delete(`/department/hr/${i}/deletedocument/${r}`);if(!c.ok)throw new Error(c.message);return c.data},E=["owner","staff","CTO"],Ks=(i,r)=>{const{role:o}=k(),c=A(o);return Os({queryKey:["hr","employees",i,r],enabled:!!i&&!!o,initialPageParam:1,queryFn:async({pageParam:h=1})=>{if(!o||!E.includes(o))throw new Error("Not allowed");if(!c)throw new Error("API instance not found for role");return await $s({organizationId:i,api:c,...r})},getNextPageParam:h=>{const{page:f,totalPages:I}=h.pagination;return f<I?f+1:void 0},retry:!1,refetchOnWindowFocus:!1})},Ds=i=>{const{role:r}=k(),o=A(r);return Rs({queryKey:["hr","employee",i],queryFn:async()=>{if(!r||!E.includes(r))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await Us({empId:i,api:o})},enabled:!!i&&!!r,retry:!1,refetchOnWindowFocus:!1})},Gs=()=>{const{role:i}=k(),r=A(i);return R({mutationFn:async({empId:o,updates:c})=>{if(!i||!E.includes(i))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await zs({empId:o,updates:c,api:r})},onSuccess:(o,{empId:c})=>{_.invalidateQueries({queryKey:["hr","employee",c]}),_.invalidateQueries({queryKey:["hr","employees"]})}})},Vs=()=>{const{role:i}=k(),r=A(i);return R({mutationFn:async({empId:o})=>{if(!i||!E.includes(i))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await qs({empId:o,api:r})},onSuccess:()=>{_.invalidateQueries({queryKey:["hr","employees"]})}})},Ws=()=>{const{role:i}=k(),r=A(i);return R({mutationFn:async({empId:o,type:c,file:h})=>{if(!i||!E.includes(i))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await Bs({empId:o,type:c,file:h,api:r})},onSuccess:(o,{empId:c})=>{_.invalidateQueries({queryKey:["hr","employee",c]})}})},Hs=()=>{const{role:i}=k(),r=A(i);return R({mutationFn:async({empId:o,docId:c})=>{if(!i||!E.includes(i))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await Qs({empId:o,docId:c,api:r})},onSuccess:(o,{empId:c})=>{_.invalidateQueries({queryKey:["hr","employee",c]})}})},Xs=()=>{var ee,se,ae,te,le,re,ne,oe,ie,ce,de,me,xe,ue,pe,ge,fe,he,ye,be,je,Ne,ve,we,Ie,Ce,ke,Ae,Ee,Se,Fe,Pe,_e,Te,Le,Oe,Re,Me,$e,Ue,ze,qe,Be,Qe,Ke,De,Ge,Ve,We,He,Je,Xe,Ye,Ze,es,ss,as,ts,ls,rs,ns,os,is,cs,ds,ms,xs,us,ps,gs,fs,hs,ys,bs,js;const{organizationId:i}=Ms(),[r,o]=y.useState(null),[c,h]=y.useState(!1),[f,I]=y.useState({}),[b,S]=y.useState(""),[M,D]=y.useState("grid"),[T,G]=y.useState("personal"),[m,C]=y.useState(!1),[t,d]=y.useState(null),[$,V]=y.useState(null),{data:L,fetchNextPage:ws,hasNextPage:W,isFetchingNextPage:U,isLoading:Is,error:H,refetch:Cs}=Ks(i,f),{data:ks,isLoading:As}=Ds((r==null?void 0:r._id)||""),F=Gs(),w=Vs(),Es=Ws(),z=Hs(),j=y.useMemo(()=>(L==null?void 0:L.pages.flatMap(s=>s.data))||[],[L]),q=y.useMemo(()=>b?j.filter(s=>{var a,l,x,u,p,g,N,v;return((l=(a=s.personalInfo)==null?void 0:a.empName)==null?void 0:l.toLowerCase().includes(b.toLowerCase()))||((u=(x=s.personalInfo)==null?void 0:x.email)==null?void 0:u.toLowerCase().includes(b.toLowerCase()))||((g=(p=s.personalInfo)==null?void 0:p.phoneNo)==null?void 0:g.includes(b))||((v=(N=s.employment)==null?void 0:N.designation)==null?void 0:v.toLowerCase().includes(b.toLowerCase()))}):j,[j,b]),J=s=>{o(s),d(s),h(!0),C(!1),G("personal")},Ss=()=>{W&&!U&&ws()},X=async()=>{if(!(!t||!r))try{await F.mutateAsync({empId:r._id,updates:t}),C(!1),o(t)}catch(s){console.error("Error updating employee:",s),alert("Failed to update employee. Please try again.")}},B=async s=>{if(window.confirm("Are you sure you want to delete this employee? This action cannot be undone."))try{await w.mutateAsync({empId:s}),h(!1),o(null),alert("Employee deleted successfully")}catch(a){console.error("Error deleting employee:",a),alert("Failed to delete employee. Please try again.")}},Fs=async(s,a)=>{var x;const l=(x=s.target.files)==null?void 0:x[0];if(!(!l||!r)){V(a);try{await Es.mutateAsync({empId:r._id,type:a,file:l}),alert("Document uploaded successfully")}catch(u){console.error("Error uploading document:",u),alert("Failed to upload document. Please try again.")}finally{V(null)}}},Ps=async s=>{if(!(!r||!window.confirm("Are you sure you want to delete this document?")))try{await z.mutateAsync({empId:r._id,docId:s}),alert("Document deleted successfully")}catch(a){console.error("Error deleting document:",a),alert("Failed to delete document. Please try again.")}},Q=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"terminated":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Y=s=>{switch(s){case"full_time":return"bg-blue-100 text-blue-800";case"part_time":return"bg-purple-100 text-purple-800";case"contract":return"bg-orange-100 text-orange-800";case"intern":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},O=s=>s?new Date(s).toLocaleDateString():"N/A",_s=s=>s!=null&&s.total?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(s.total):"N/A",K=(s,a)=>{I(l=>({...l,[s]:a||void 0}))},Ts=()=>{I({})},Z=Object.values(f).filter(Boolean).length,n=ks||r;return Is?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Employees"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the employee data..."})]})}):H?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-6xl mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Employees"}),e.jsx("p",{className:"text-gray-600 mb-4",children:H.message}),e.jsxs("button",{onClick:()=>Cs(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-3 text-blue-600"}),"Human Resources"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your organization's employees and their information"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search employees...",value:b,onChange:s=>S(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-80"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>D("grid"),className:`p-2 rounded-lg transition-colors ${M==="grid"?"bg-blue-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:e.jsx("i",{className:"fas fa-th-large"})}),e.jsx("button",{onClick:()=>D("list"),className:`p-2 rounded-lg transition-colors ${M==="list"?"bg-blue-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:e.jsx("i",{className:"fas fa-list"})})]})]})]})})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsx("div",{className:"xl:w-80 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-filter mr-2 text-blue-600"}),"Filters"]}),Z>0&&e.jsxs("button",{onClick:Ts,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:["Clear All (",Z,")"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Role"}),e.jsxs("select",{value:f.empRole||"",onChange:s=>K("empRole",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"organization_staff",children:"Organization Staff"}),e.jsx("option",{value:"nonorganization_staff",children:"Non-Organization Staff"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:f.status||"",onChange:s=>K("status",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"terminated",children:"Terminated"}),e.jsx("option",{value:"on_leave",children:"On Leave"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",placeholder:"Enter department",value:f.department||"",onChange:s=>K("department",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Employees"}),e.jsx("span",{className:"font-semibold text-gray-900",children:j.length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Active"}),e.jsx("span",{className:"font-semibold text-green-600",children:j.filter(s=>s.status==="active").length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"On Leave"}),e.jsx("span",{className:"font-semibold text-yellow-600",children:j.filter(s=>s.status==="on_leave").length})]})]})]})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"fas fa-users text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Employees"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx("i",{className:"fas fa-user-check text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.filter(s=>s.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx("i",{className:"fas fa-user-clock text-yellow-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"On Leave"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.filter(s=>s.status==="on_leave").length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"fas fa-briefcase text-purple-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Departments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Set(j.map(s=>{var a;return(a=s.employment)==null?void 0:a.department}).filter(Boolean)).size})]})]})})]}),q.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[e.jsx("i",{className:"fas fa-users text-gray-300 text-6xl mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No employees found"}),e.jsx("p",{className:"text-gray-600",children:b||Object.keys(f).length>0?"Try adjusting your search or filters":"Start by adding your first employee"})]}):e.jsxs(e.Fragment,{children:[M==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-6",children:q.map(s=>{var a,l,x,u,p,g,N,v,P,Ns,vs;return e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 hover:border-blue-200 group",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:((x=(l=(a=s.personalInfo)==null?void 0:a.empName)==null?void 0:l.charAt(0))==null?void 0:x.toUpperCase())||"N"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:((u=s.personalInfo)==null?void 0:u.empName)||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",s._id.slice(-6)]})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Q(s.status)}`,children:s.status||"N/A"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("i",{className:"fas fa-briefcase text-gray-400 w-4"}),e.jsx("span",{className:"ml-2 text-gray-600",children:((p=s.employment)==null?void 0:p.designation)||"N/A"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("i",{className:"fas fa-building text-gray-400 w-4"}),e.jsx("span",{className:"ml-2 text-gray-600",children:((g=s.employment)==null?void 0:g.department)||"N/A"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("i",{className:"fas fa-envelope text-gray-400 w-4"}),e.jsx("span",{className:"ml-2 text-gray-600 truncate",children:((N=s.personalInfo)==null?void 0:N.email)||"N/A"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("i",{className:"fas fa-phone text-gray-400 w-4"}),e.jsx("span",{className:"ml-2 text-gray-600",children:((v=s.personalInfo)==null?void 0:v.phoneNo)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[((P=s.employment)==null?void 0:P.employmentType)&&e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Y(s.employment.employmentType)}`,children:s.employment.employmentType.replace("_"," ")}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Salary"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_s((Ns=s.employment)==null?void 0:Ns.salary)})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Joined"}),e.jsx("span",{className:"text-gray-900 font-medium",children:O((vs=s.employment)==null?void 0:vs.joinDate)})]})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex gap-2",children:[e.jsxs("button",{onClick:()=>J(s),className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"View Details"]}),e.jsx("button",{onClick:Ls=>{Ls.stopPropagation(),B(s._id)},className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm",disabled:w.isPending,children:w.isPending?e.jsx("i",{className:"fas fa-spinner fa-spin"}):e.jsx("i",{className:"fas fa-trash"})})]})]})},s._id)})}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:q.map(s=>{var a,l,x,u,p,g,N,v,P;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:((x=(l=(a=s.personalInfo)==null?void 0:a.empName)==null?void 0:l.charAt(0))==null?void 0:x.toUpperCase())||"N"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((u=s.personalInfo)==null?void 0:u.empName)||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s._id.slice(-6)]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:((p=s.personalInfo)==null?void 0:p.email)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((g=s.personalInfo)==null?void 0:g.phoneNo)||"N/A"})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:((N=s.employment)==null?void 0:N.designation)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((v=s.employment)==null?void 0:v.department)||"N/A"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Q(s.status)}`,children:s.status||"N/A"}),((P=s.employment)==null?void 0:P.employmentType)&&e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Y(s.employment.employmentType)}`,children:s.employment.employmentType.replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>J(s),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>B(s._id),className:"text-red-600 hover:text-red-800 font-medium text-sm",disabled:w.isPending,children:[w.isPending?e.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}):e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})})]},s._id)})})]})})}),W&&e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:Ss,disabled:U,className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:U?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Load More Employees"]})})})]})]})]})}),c&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[95vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4",children:((ae=(se=(ee=n.personalInfo)==null?void 0:ee.empName)==null?void 0:se.charAt(0))==null?void 0:ae.toUpperCase())||"N"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:((te=n.personalInfo)==null?void 0:te.empName)||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Employee ID: ",n._id.slice(-6)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[m?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:X,disabled:F.isPending,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors text-sm font-medium",children:F.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save Changes"]})}),e.jsxs("button",{onClick:()=>{C(!1),d(n)},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]})]}):e.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),"Edit Employee"]}),e.jsx("button",{onClick:()=>B(n._id),disabled:w.isPending,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors text-sm font-medium",children:w.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-trash mr-2"}),"Delete"]})}),e.jsx("button",{onClick:()=>{h(!1),o(null),C(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"fas fa-times text-xl"})})]})]}),As&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading employee details..."})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"personal",label:"Personal Info",icon:"fas fa-user"},{id:"employment",label:"Employment",icon:"fas fa-briefcase"},{id:"documents",label:"Documents",icon:"fas fa-file-alt"}].map(s=>e.jsxs("button",{onClick:()=>G(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${T===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${s.icon} mr-2`}),s.label]},s.id))})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-200px)]",children:[T==="personal"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),m?e.jsx("input",{type:"text",value:((le=t==null?void 0:t.personalInfo)==null?void 0:le.empName)||"",onChange:s=>d(a=>a?{...a,personalInfo:{...a.personalInfo,empName:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((re=n.personalInfo)==null?void 0:re.empName)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m?e.jsx("input",{type:"email",value:((ne=t==null?void 0:t.personalInfo)==null?void 0:ne.email)||"",onChange:s=>d(a=>a?{...a,personalInfo:{...a.personalInfo,email:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((oe=n.personalInfo)==null?void 0:oe.email)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),m?e.jsx("input",{type:"tel",value:((ie=t==null?void 0:t.personalInfo)==null?void 0:ie.phoneNo)||"",onChange:s=>d(a=>a?{...a,personalInfo:{...a.personalInfo,phoneNo:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((ce=n.personalInfo)==null?void 0:ce.phoneNo)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),m?e.jsxs("select",{value:((de=t==null?void 0:t.personalInfo)==null?void 0:de.gender)||"",onChange:s=>d(a=>a?{...a,personalInfo:{...a.personalInfo,gender:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((me=n.personalInfo)==null?void 0:me.gender)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),m?e.jsx("input",{type:"date",value:(xe=t==null?void 0:t.personalInfo)!=null&&xe.dateOfBirth?new Date(t.personalInfo.dateOfBirth).toISOString().split("T")[0]:"",onChange:s=>d(a=>a?{...a,personalInfo:{...a.personalInfo,dateOfBirth:new Date(s.target.value)}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:O((ue=n.personalInfo)==null?void 0:ue.dateOfBirth)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marital Status"}),m?e.jsxs("select",{value:((pe=t==null?void 0:t.personalInfo)==null?void 0:pe.maritalStatus)||"",onChange:s=>d(a=>a?{...a,personalInfo:{...a.personalInfo,maritalStatus:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"}),e.jsx("option",{value:"divorced",children:"Divorced"}),e.jsx("option",{value:"widowed",children:"Widowed"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((ge=n.personalInfo)==null?void 0:ge.maritalStatus)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Address & Emergency Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Address"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street"}),m?e.jsx("input",{type:"text",value:((he=(fe=t==null?void 0:t.personalInfo)==null?void 0:fe.address)==null?void 0:he.street)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,address:{...(l=a.personalInfo)==null?void 0:l.address,street:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((be=(ye=n.personalInfo)==null?void 0:ye.address)==null?void 0:be.street)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),m?e.jsx("input",{type:"text",value:((Ne=(je=t==null?void 0:t.personalInfo)==null?void 0:je.address)==null?void 0:Ne.city)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,address:{...(l=a.personalInfo)==null?void 0:l.address,city:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((we=(ve=n.personalInfo)==null?void 0:ve.address)==null?void 0:we.city)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),m?e.jsx("input",{type:"text",value:((Ce=(Ie=t==null?void 0:t.personalInfo)==null?void 0:Ie.address)==null?void 0:Ce.state)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,address:{...(l=a.personalInfo)==null?void 0:l.address,state:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ae=(ke=n.personalInfo)==null?void 0:ke.address)==null?void 0:Ae.state)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),m?e.jsx("input",{type:"text",value:((Se=(Ee=t==null?void 0:t.personalInfo)==null?void 0:Ee.address)==null?void 0:Se.pincode)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,address:{...(l=a.personalInfo)==null?void 0:l.address,pincode:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Pe=(Fe=n.personalInfo)==null?void 0:Fe.address)==null?void 0:Pe.pincode)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),m?e.jsx("input",{type:"text",value:((Te=(_e=t==null?void 0:t.personalInfo)==null?void 0:_e.address)==null?void 0:Te.country)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,address:{...(l=a.personalInfo)==null?void 0:l.address,country:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Oe=(Le=n.personalInfo)==null?void 0:Le.address)==null?void 0:Oe.country)||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Emergency Contact"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),m?e.jsx("input",{type:"text",value:((Me=(Re=t==null?void 0:t.personalInfo)==null?void 0:Re.emergencyContact)==null?void 0:Me.name)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,emergencyContact:{...(l=a.personalInfo)==null?void 0:l.emergencyContact,name:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ue=($e=n.personalInfo)==null?void 0:$e.emergencyContact)==null?void 0:Ue.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship"}),m?e.jsx("input",{type:"text",value:((qe=(ze=t==null?void 0:t.personalInfo)==null?void 0:ze.emergencyContact)==null?void 0:qe.relationship)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,emergencyContact:{...(l=a.personalInfo)==null?void 0:l.emergencyContact,relationship:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Qe=(Be=n.personalInfo)==null?void 0:Be.emergencyContact)==null?void 0:Qe.relationship)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),m?e.jsx("input",{type:"tel",value:((De=(Ke=t==null?void 0:t.personalInfo)==null?void 0:Ke.emergencyContact)==null?void 0:De.phone)||"",onChange:s=>d(a=>{var l;return a?{...a,personalInfo:{...a.personalInfo,emergencyContact:{...(l=a.personalInfo)==null?void 0:l.emergencyContact,phone:s.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ve=(Ge=n.personalInfo)==null?void 0:Ge.emergencyContact)==null?void 0:Ve.phone)||"N/A"})]})]})]})]})}),T==="employment"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Job Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),m?e.jsx("input",{type:"text",value:((We=t==null?void 0:t.employment)==null?void 0:We.designation)||"",onChange:s=>d(a=>a?{...a,employment:{...a.employment,designation:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((He=n.employment)==null?void 0:He.designation)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),m?e.jsx("input",{type:"text",value:((Je=t==null?void 0:t.employment)==null?void 0:Je.department)||"",onChange:s=>d(a=>a?{...a,employment:{...a.employment,department:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Xe=n.employment)==null?void 0:Xe.department)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employment Type"}),m?e.jsxs("select",{value:((Ye=t==null?void 0:t.employment)==null?void 0:Ye.employmentType)||"",onChange:s=>d(a=>a?{...a,employment:{...a.employment,employmentType:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"full_time",children:"Full Time"}),e.jsx("option",{value:"part_time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((es=(Ze=n.employment)==null?void 0:Ze.employmentType)==null?void 0:es.replace("_"," "))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Join Date"}),m?e.jsx("input",{type:"date",value:(ss=t==null?void 0:t.employment)!=null&&ss.joinDate?new Date(t.employment.joinDate).toISOString().split("T")[0]:"",onChange:s=>d(a=>a?{...a,employment:{...a.employment,joinDate:new Date(s.target.value)}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:O((as=n.employment)==null?void 0:as.joinDate)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Location"}),m?e.jsx("input",{type:"text",value:((ts=t==null?void 0:t.employment)==null?void 0:ts.workLocation)||"",onChange:s=>d(a=>a?{...a,employment:{...a.employment,workLocation:s.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((ls=n.employment)==null?void 0:ls.workLocation)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Status"}),m?e.jsxs("select",{value:(t==null?void 0:t.status)||"",onChange:s=>d(a=>a?{...a,status:s.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"terminated",children:"Terminated"}),e.jsx("option",{value:"on_leave",children:"On Leave"})]}):e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${Q(n.status)}`,children:n.status||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Salary Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Basic Salary"}),m?e.jsx("input",{type:"number",value:((ns=(rs=t==null?void 0:t.employment)==null?void 0:rs.salary)==null?void 0:ns.basic)||"",onChange:s=>d(a=>{var l,x,u,p,g;return a?{...a,employment:{...a.employment,salary:{...(l=a.employment)==null?void 0:l.salary,basic:parseFloat(s.target.value)||0,total:(parseFloat(s.target.value)||0)+(((u=(x=a.employment)==null?void 0:x.salary)==null?void 0:u.hra)||0)+(((g=(p=a.employment)==null?void 0:p.salary)==null?void 0:g.allowances)||0)}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:(is=(os=n.employment)==null?void 0:os.salary)!=null&&is.basic?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(n.employment.salary.basic):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HRA"}),m?e.jsx("input",{type:"number",value:((ds=(cs=t==null?void 0:t.employment)==null?void 0:cs.salary)==null?void 0:ds.hra)||"",onChange:s=>d(a=>{var l,x,u,p,g;return a?{...a,employment:{...a.employment,salary:{...(l=a.employment)==null?void 0:l.salary,hra:parseFloat(s.target.value)||0,total:(((u=(x=a.employment)==null?void 0:x.salary)==null?void 0:u.basic)||0)+(parseFloat(s.target.value)||0)+(((g=(p=a.employment)==null?void 0:p.salary)==null?void 0:g.allowances)||0)}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:(xs=(ms=n.employment)==null?void 0:ms.salary)!=null&&xs.hra?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(n.employment.salary.hra):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allowances"}),m?e.jsx("input",{type:"number",value:((ps=(us=t==null?void 0:t.employment)==null?void 0:us.salary)==null?void 0:ps.allowances)||"",onChange:s=>d(a=>{var l,x,u,p,g;return a?{...a,employment:{...a.employment,salary:{...(l=a.employment)==null?void 0:l.salary,allowances:parseFloat(s.target.value)||0,total:(((u=(x=a.employment)==null?void 0:x.salary)==null?void 0:u.basic)||0)+(((g=(p=a.employment)==null?void 0:p.salary)==null?void 0:g.hra)||0)+(parseFloat(s.target.value)||0)}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:(fs=(gs=n.employment)==null?void 0:gs.salary)!=null&&fs.allowances?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(n.employment.salary.allowances):"N/A"})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Salary"}),e.jsx("p",{className:"text-xl font-bold text-green-600 py-2",children:(ys=(hs=n.employment)==null?void 0:hs.salary)!=null&&ys.total?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(n.employment.salary.total):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Role"}),m?e.jsxs("select",{value:(t==null?void 0:t.empRole)||"",onChange:s=>d(a=>a?{...a,empRole:s.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"organization_staff",children:"Organization Staff"}),e.jsx("option",{value:"nonorganization_staff",children:"Non-Organization Staff"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((bs=n.empRole)==null?void 0:bs.replace("_"," "))||"N/A"})]})]})]})}),T==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Employee Documents"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total Documents: ",((js=n.documents)==null?void 0:js.length)||0]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Upload New Document"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:["resume","aadhar","pan","passport","education","experience"].map(s=>e.jsx("div",{className:"text-center",children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:a=>Fs(a,s),className:"hidden",disabled:$===s}),e.jsx("div",{className:`p-4 border-2 border-dashed rounded-lg transition-colors ${$===s?"border-blue-300 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}`,children:$===s?e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-2xl mb-2"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Uploading..."})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-upload text-gray-400 text-2xl mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 capitalize",children:s})]})})]})},s))})]}),e.jsx("div",{className:"space-y-4",children:n.documents&&n.documents.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.documents.map(s=>{var a;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:e.jsx("i",{className:"fas fa-file-alt text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 capitalize",children:((a=s.type)==null?void 0:a.replace("_"," "))||"Document"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.fileName||"Unknown file"})]})]}),e.jsx("button",{onClick:()=>Ps(s._id),disabled:z.isPending,className:"text-red-600 hover:text-red-800 transition-colors p-1",title:"Delete document",children:z.isPending?e.jsx("i",{className:"fas fa-spinner fa-spin"}):e.jsx("i",{className:"fas fa-trash text-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["Uploaded: ",s.uploadedAt?O(s.uploadedAt):"N/A"]}),s.fileUrl&&e.jsxs("a",{href:s.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx("i",{className:"fas fa-external-link-alt mr-1"}),"View"]})]})]},s._id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fas fa-file-alt text-gray-300 text-6xl mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-gray-600",children:"Upload documents using the section above."})]})})]})]}),m&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{C(!1),d(n)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel Changes"}),e.jsx("button",{onClick:X,disabled:F.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:F.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save Changes"]})})]})})]})})]})};export{Xs as default};
