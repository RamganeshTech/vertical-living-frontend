import{a as C,d as k,u as V,r as i,k as L,j as e,O as S,B as h}from"./index-BAM0eJUz.js";import{a as A}from"./vendorAccApi-m3R96_-K.js";import"./useInfiniteQuery-BGz0VllC.js";const O=()=>{var x;const t=C(),g=k(),{organizationId:u}=V(),[l,n]=i.useState("grid"),[c,f]=i.useState(""),{role:p,permission:r}=L(),j=p==="owner"||((x=r==null?void 0:r.ordermaterial)==null?void 0:x.create),{data:a,isLoading:N,error:b,fetchNextPage:y,hasNextPage:v,isFetchingNextPage:d}=A({organizationId:u,search:c,sortBy:"createdAt",sortOrder:"desc"}),o=i.useMemo(()=>(a==null?void 0:a.pages.flatMap(s=>s.data))||[],[a]),w=s=>{t(`single/${s}`)};return N?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading Vendors..."})]})}):b?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-red-500",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-4xl mb-4"}),e.jsx("p",{children:"Failed to load vendor data."})]})}):g.pathname.includes("single")?e.jsx(S,{}):e.jsx("div",{className:"min-h-full overflow-y-auto bg-gray-50 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-full mx-auto",children:[e.jsxs("header",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 cursor-pointer hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"fas fa-arrow-left text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:[e.jsx("i",{className:"fas fa-warehouse mr-3 text-blue-500"}),"Vendor Library"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Consolidated vendor and shop management"})]})]}),j&&e.jsxs(h,{onClick:()=>t("/vendors/add"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-plus"}),e.jsx("span",{children:"Add New Vendor"})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by shop name, vendor or category...",value:c,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n("grid"),className:`px-4 py-2 rounded-lg ${l==="grid"?"bg-blue-500 text-white":"bg-gray-200"}`,children:e.jsx("i",{className:"fas fa-th-large"})}),e.jsx("button",{onClick:()=>n("table"),className:`px-4 py-2 rounded-lg ${l==="table"?"bg-blue-500 text-white":"bg-gray-200"}`,children:e.jsx("i",{className:"fas fa-list"})})]})]})]}),l==="grid"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>{var m;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer p-6",onClick:()=>w(s._id),children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-700 mb-1",children:s.shopDisplayName||"Unnamed Shop"}),e.jsx("span",{className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded-full uppercase font-bold",children:s.vendorCategory||"General"})]})}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-user-tie w-5 text-gray-400"}),e.jsx("span",{children:s.firstName})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone w-5 text-gray-400"}),e.jsx("span",{children:((m=s.phone)==null?void 0:m.mobile)||"No Phone"})]}),s.shopFullAddress&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-map-marker-alt w-5 text-gray-400"}),e.jsx("span",{className:"truncate",children:s.shopFullAddress})]})]})]},s._id)})}),v&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(h,{onClick:()=>y(),disabled:d,className:"bg-white border border-blue-500 text-blue-500 hover:bg-blue-50",children:d?"Loading more...":"Load More Vendors"})}),o.length===0&&e.jsxs("div",{className:"text-center py-20 bg-white rounded-lg",children:[e.jsx("i",{className:"fas fa-users-slash text-5xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No vendors found matching your criteria."})]})]})})};export{O as default};
