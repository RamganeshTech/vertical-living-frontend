import{g as w,e as l,f as u,q as d,h as c,E as g}from"./index-DBgPBgiq.js";const y=async({projectId:t,api:e})=>{const{data:r}=await e.get(`/orderingmaterial/getalldetails/${t}`);if(!r.ok)throw new Error(r.message);return r.data},S=t=>{const e=["owner","staff","CTO","worker","client"],{role:r}=l(),n=c(r);return w({queryKey:["ordering-material-history",t],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("Not allowed to fetch ordering material");if(!n)throw new Error("API not available");return await y({projectId:t,api:n})},enabled:!!r&&!!t&&!!n,retry:!1,refetchOnMount:!1})},f=async({formId:t,projectId:e,deadLine:r,api:n})=>{const{data:a}=await n.put(`/orderingmaterial/deadline/${e}/${t}`,{deadLine:r});if(!a.ok)throw new Error(a.message);return a.data},h=async({projectId:t,api:e})=>{const{data:r}=await e.put(`/orderingmaterial/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},$=()=>{const t=["owner","staff","CTO"],{role:e}=l(),r=c(e);return u({mutationFn:async({formId:n,projectId:a,deadLine:o})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await f({formId:n,projectId:a,deadLine:o,api:r})},onSuccess:(n,a)=>{d.invalidateQueries({queryKey:["ordering-material-history",a.projectId]})}})},M=()=>{const t=["owner","staff","CTO"],{role:e}=l(),r=c(e);return u({mutationFn:async({projectId:n})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await h({projectId:n,api:r})},onSuccess:(n,{projectId:a})=>{d.invalidateQueries({queryKey:["ordering-material-history",a]})}})},p=async({projectId:t})=>{const{data:e}=await g.get(`https://houseofram.in/api/orderingmaterial/getpublic/${t}`);if(console.log("data",e),!e.ok)throw new Error(e.message);return e.data},I=t=>w({queryKey:["ordering-material-public",t],queryFn:async()=>await p({projectId:t}),enabled:!!t,retry:!1,refetchOnMount:!1}),O=async({projectId:t,api:e})=>{const{data:r}=await e.patch(`/orderingmaterial/generatelink/${t}`);if(!r.ok)throw new Error(r.message);return r.data},q=()=>{const t=["owner","staff","CTO"],{role:e}=l(),r=c(e);return u({mutationFn:async({projectId:n})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await O({projectId:n,api:r})},onSuccess:(n,{projectId:a})=>{d.invalidateQueries({queryKey:["ordering-material-history",a]})}})},E=async({projectId:t,unitId:e,subItemName:r,quantity:n,unit:a,api:o})=>{const{data:i}=await o.post(`/orderingmaterial/${t}/unit/${e}/addsubitem`,{subItemName:r,quantity:n,unit:a});if(!i.ok)throw new Error(i.message);return i.data},P=()=>{const t=["owner","staff","CTO"],{role:e}=l(),r=c(e);return u({mutationFn:async({projectId:n,unitId:a,subItemName:o,quantity:i,unit:s})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await E({projectId:n,unitId:a,subItemName:o,quantity:i,unit:s,api:r})},onSuccess:(n,a)=>{d.invalidateQueries({queryKey:["ordering-material-history",a.projectId]})}})},b=async({projectId:t,unitId:e,subItemId:r,api:n})=>{const{data:a}=await n.delete(`/orderingmaterial/${t}/unit/${e}/deletesubitem/${r}`);if(!a.ok)throw new Error(a.message);return a.data},C=()=>{const t=["owner","staff","CTO"],{role:e}=l(),r=c(e);return u({mutationFn:async({projectId:n,unitId:a,subItemId:o})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await b({projectId:n,unitId:a,subItemId:o,api:r})},onSuccess:(n,a)=>{d.invalidateQueries({queryKey:["ordering-material-history",a.projectId]})}})},k=async({projectId:t,unitId:e,subItemId:r,subItemName:n,quantity:a,unit:o,api:i})=>{const{data:s}=await i.put(`/orderingmaterial/${t}/unit/${e}/updatesubitem/${r}`,{subItemName:n,quantity:a,unit:o});if(!s.ok)throw new Error(s.message);return s.data},F=()=>{const t=["owner","staff","CTO"],{role:e}=l(),r=c(e);return u({mutationFn:async({projectId:n,unitId:a,subItemId:o,subItemName:i,quantity:s,unit:m})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await k({projectId:n,unitId:a,subItemId:o,subItemName:i,quantity:s,unit:m,api:r})},onSuccess:(n,a)=>{d.invalidateQueries({queryKey:["ordering-material-history",a.projectId]})}})};export{q as a,P as b,C as c,F as d,$ as e,M as f,I as g,S as u};
