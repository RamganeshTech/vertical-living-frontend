import{m as s,n as c,o as l,q as u,p as i}from"./index-BO7-A9Kz.js";const d=async({projectId:r,organizationId:o,payload:e,api:t})=>{const{data:n}=await t.post(`/workreports/create/${r}/${o}`,e);if(!n.ok)throw new Error(n.message);return n.data},f=async({projectId:r,api:o})=>{const{data:e}=await o.get(`/workreports/getreports/${r}`);if(!e.ok)throw new Error(e.message);return e.data},p=async({projectId:r,id:o,dailyTaskId:e,date:t,api:n})=>{const{data:a}=await n.get(`/workreports/workimages/${r}/${o}/${t}/${e}`);if(!a.ok)throw new Error(a.message);return a.data},y=async({id:r,api:o})=>{const{data:e}=await o.delete(`/workreports/delete/${r}`);if(!e.ok)throw new Error(e.message);return e.data},h=()=>{const r=["owner","staff","CTO"],{role:o}=s(),e=i(o);return l({mutationFn:async({projectId:t,organizationId:n,payload:a})=>{if(!o||!r.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await d({projectId:t,organizationId:n,payload:a,api:e})},onSuccess:(t,{projectId:n})=>{u.invalidateQueries({queryKey:["workreports",n]})}})},m=r=>{const o=["owner","staff","CTO","client"],{role:e}=s(),t=i(e);return c({queryKey:["workreports",r],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("not allowed to fetch this data");if(!t)throw new Error("API instance not found for role");return await f({projectId:r,api:t})},enabled:!!r&&!!e})},g=()=>{const r=["owner","staff","CTO"],{role:o}=s(),e=i(o);return l({mutationFn:async({id:t})=>{if(!o||!r.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await y({id:t,api:e})},onSuccess:(t,{projectId:n})=>{u.invalidateQueries({queryKey:["workreports",n]})}})},R=(r,o,e,t)=>{const n=["owner","staff","CTO","client"],{role:a}=s(),w=i(a);return c({queryKey:["workreportimages",r],queryFn:async()=>{if(!a||!n.includes(a))throw new Error("not allowed to fetch this data");if(!w)throw new Error("API instance not found for role");return await p({projectId:r,id:o,date:e,dailyTaskId:t,api:w})},enabled:!!r&&!!a})};export{g as a,R as b,h as c,m as u};
