import{j as e,c as la,d as ta,r as n,e as ra,k as re,z as na,O as ca,S as oa,B as y,A as L,M as ia,C as da,J as ua,P as xa,al as P,K as ma,f as ba,t as u}from"./index-CBsAK0nv.js";import{B as Ue}from"./Badge-Dr7YIIuw.js";import{u as ga,a as ha,b as va,c as fa}from"./materialInventoryApi-Cf95OakV.js";import{u as pa,a as Ia,b as Na,c as ja}from"./MaterialInventoryCartApi-DdIlAF3_.js";import{S as Sa}from"./index-CCeqIA1C.js";import{S as ya}from"./StageGuide-DK1G5Ici.js";import{I as La}from"./InfoToolTip-Bzqq-lrW.js";const Pe={primary:"text-blue-400",danger:"text-red-400",success:"text-green-400",warning:"text-yellow-400",gray:"text-gray-400"},Oe={envelope:"fas fa-envelope",box:"fas fa-box-open",message:"fas fa-comment-dots",chat:"fas fa-comments",warning:"fas fa-exclamation-triangle"},Ea=({message:o,icon:f="box",customIconClass:g,color:C="gray"})=>{const A=`${f==="custom"?g||"fas fa-question-circle":Oe[f]||Oe.box} text-7xl mb-4 ${Pe[C]||Pe.gray}`;return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center py-12 px-4 text-center",children:[e.jsx("i",{className:A}),e.jsx("p",{className:"text-lg text-gray-600",children:o})]})},O={brand:[{value:"",label:"All Brand"},{value:"jaquar",label:"Jaquar"}],categories:[{value:"",label:"All Categories"},{value:"light",label:"Light"},{value:"socket",label:"Socket"},{value:"switches",label:"Switch"},{value:"regulator",label:"Regulators"}],subcategories:[{value:"",label:"All Subcategories"},{value:"Downlights",label:"Downlights"},{value:"COB Downlights",label:"COB Downlights"},{value:"Designer Lights",label:"Designer Lights"},{value:"Panels",label:"Panels"},{value:"Battens-Tubes",label:"Battens-Tubes"},{value:"Magnetic Lights",label:"Magnetic Lights"},{value:"Retail Lights",label:"Retail Lights"},{value:"Industrial Lights",label:"Industrial Lights"}],types:[{value:"",label:"All Types"},{value:"socket",label:"socket"},{value:"card-switch",label:"card-switch"},{value:"computer-socket",label:"computer-socket"},{value:"dimmer-switch",label:"dimmer-switch"},{value:"doorbell",label:"doorbell"},{value:"motion-sensor-switch",label:"motion-sensor-switch"},{value:"notify-switch",label:"notify-switch"},{value:"regulator",label:"regulator"},{value:"switch",label:"switch"},{value:"telephone-socket",label:"telephone-socket"},{value:"television-computer-socket",label:"television-computer-socket"},{value:"television-socket",label:"television-socket"},{value:"television-telephone-socket",label:"television-telephone-socket"}],models:[{value:"",label:"All Models"},{value:"ENSAVE PLUS",label:"ENSAVE PLUS"},{value:"AREVA PRIME",label:"AREVA PRIME"},{value:"NERO SURFACE",label:"NERO SURFACE"},{value:"LUCENT",label:"LUCENT"},{value:"LUCENT SQUARE",label:"LUCENT SQUARE"},{value:"2 IN 1 STANDALONE",label:"2 IN 1 STANDALONE"},{value:"ERIS FIXED (LOW BORDER DEEP RECESSED)",label:"ERIS FIXED (LOW BORDER DEEP RECESSED)"},{value:"ESTUS SWIVEL",label:"ESTUS SWIVEL"},{value:"ERIS SWIVEL",label:"ERIS SWIVEL"},{value:"ERIS REFLECTO",label:"ERIS REFLECTO"},{value:"ERIS FIXED",label:"ERIS FIXED"},{value:"EMINA",label:"EMINA"},{value:"EMINA TILTABLE",label:"EMINA TILTABLE"},{value:"DIMAS",label:"DIMAS"},{value:"GLIDE",label:"GLIDE"},{value:"ERIS SURFACE ROUND",label:"ERIS SURFACE ROUND"},{value:"EPITO",label:"EPITO"},{value:"EMPHA",label:"EMPHA"},{value:"RENE",label:"RENE"},{value:"CYNO",label:"CYNO"},{value:"ULTIMA SLIM",label:"ULTIMA SLIM"},{value:"ACCESSORIES FOR ULTIMA SLIM",label:"ACCESSORIES FOR ULTIMA SLIM"},{value:"ULTIMA ULTRA SLIM 1x4",label:"ULTIMA ULTRA SLIM 1x4"},{value:"ULTIMA ULTRA SLIM 1x1",label:"ULTIMA ULTRA SLIM 1x1"},{value:"ULTIMA ULTRA PRO (2x2)",label:"ULTIMA ULTRA PRO (2x2)"},{value:"ULTIMA MULTI-COLOUR",label:"ULTIMA MULTI-COLOUR"},{value:"GLAZE",label:"GLAZE"},{value:"GLAZE ULTRA ALUMINIUM",label:"GLAZE ULTRA ALUMINIUM"},{value:"KUBIK SMART",label:"KUBIK SMART"},{value:"KUBIK ULTRA",label:"KUBIK ULTRA"},{value:"T8 RETRO",label:"T8 RETRO"},{value:"T8 RETRO ACCESSSORIES",label:"T8 RETRO ACCESSSORIES"},{value:"PRIDE",label:"PRIDE"},{value:"ORELLI SLIM",label:"ORELLI SLIM"},{value:"ORELLI SLIM HANGING",label:"ORELLI SLIM HANGING"},{value:"INSTARAY SLIM LINEAR WITH LENS",label:"INSTARAY SLIM LINEAR WITH LENS"},{value:"INSTARAY SLIM LINEAR",label:"INSTARAY SLIM LINEAR"},{value:"INSTARAY ROUND SLIM",label:"INSTARAY ROUND SLIM"},{value:"INSTARAY SLIM LINEAR DIFFUSED",label:"INSTARAY SLIM LINEAR DIFFUSED"},{value:"INSTARAY SLIM TILTABLE & DIFFUSED",label:"INSTARAY SLIM TILTABLE & DIFFUSED"},{value:"MAGNETIC TRACK LIGHT ACCESSORIES",label:"MAGNETIC TRACK LIGHT ACCESSORIES"},{value:"MULTIBLE ZOOM LIGHT",label:"MULTIBLE ZOOM LIGHT"},{value:"TRACK LIGHT WHITE",label:"TRACK LIGHT WHITE"},{value:"TRACK LIGHT BLACK",label:"TRACK LIGHT BLACK"},{value:"TRACK LIGHT ACCESSORIES",label:"TRACK LIGHT ACCESSORIES"},{value:"IP20 STRIP LIGHT (24V DC)",label:"IP20 STRIP LIGHT (24V DC)"},{value:"IP65 STRIP LIGHT (24V DC)",label:"IP65 STRIP LIGHT (24V DC)"},{value:"COB STRIP LIGHT",label:"COB STRIP LIGHT"},{value:"POWER SUPPLY FOR IP20 STRIP LIGHT",label:"POWER SUPPLY FOR IP20 STRIP LIGHT"},{value:"POWER SUPPLY FOR IP65 STRIP LIGHT",label:"POWER SUPPLY FOR IP65 STRIP LIGHT"},{value:"BULK HEAD",label:"BULK HEAD"},{value:"PIT LIGHT",label:"PIT LIGHT"},{value:"WELL GLASS",label:"WELL GLASS"},{value:"HIGHBAY (>100 Lm/W)",label:"HIGHBAY (>100 Lm/W)"},{value:"ULTRALITE HIGHBAY (>130 Lm/W)",label:"ULTRALITE HIGHBAY (>130 Lm/W)"}]},Ha=()=>{var pe,Ie,Ne,je,Se,ye,Le,Ee;const{organizationId:o}=la(),f=ta(),[g,C]=n.useState(""),[r,A]=n.useState(""),[E,p]=n.useState(""),[b,I]=n.useState(""),[N,q]=n.useState(""),[H,k]=n.useState(""),[V,He]=n.useState(""),[Q,ke]=n.useState(""),[T,Z]=n.useState("0"),[R,X]=n.useState("100000"),[Ge,ne]=n.useState(!1),[M,ce]=n.useState(null),[oe,G]=n.useState(null),[j,ie]=n.useState(""),{role:$,permission:h}=ra(),Fe=$==="owner"||((pe=h==null?void 0:h.productinventory)==null?void 0:pe.delete),de=$==="owner"||((Ie=h==null?void 0:h.productinventory)==null?void 0:Ie.edit),J=$==="owner"||((Ne=h==null?void 0:h.productinventory)==null?void 0:Ne.list),F=re(g,500),D=re(T,800),B=re(R,800),{data:w}=na(o),K=w==null?void 0:w.map(a=>({_id:a._id,projectName:a.projectName})),De=n.useMemo(()=>{var a;return(a=w||[])==null?void 0:a.map(s=>({value:s._id,label:s.projectName}))},[w]);n.useEffect(()=>{K&&K.length>0&&!j&&ie(K[0]._id)},[K,j]);const{data:x,refetch:ee}=pa({organizationId:o,projectId:j}),ue=Ia(),xe=Na(),me=ja();n.useEffect(()=>{p(""),I("")},[r]);const W=r&&r.toLowerCase()==="light",Y=r&&["switches","socket"].includes(r.toLowerCase()),ae=r&&r.toLowerCase()==="regulator",_=!r||r==="",Be=Y,Ke=W||_;n.useEffect(()=>{W?I(""):Y?(p(""),k("")):ae?(I(""),p(""),k("")):_&&I("")},[r]);const We=n.useMemo(()=>{const a={search:F,category:r,minMrp:D?Number(D):void 0,maxMrp:B?Number(B):void 0,brand:N,watt:V,itemCode:Q};return W||_?{...a,subcategory:E,model:H}:Y?{...a,type:b}:a},[F,r,E,b,H,V,Q,D,B,N,W,Y,ae,_]),{data:U,isLoading:Ye,isError:_e,error:se,fetchNextPage:be,hasNextPage:le,isFetchingNextPage:te,refetch:ze}=ga(o,We),ge=ha(),he=va(),ve=fa(),qe=a=>{var l;const s=(a==null?void 0:a.specification)||{};if(s!=null&&s.variants&&Array.isArray(s==null?void 0:s.variants)&&((l=s==null?void 0:s.variants)==null?void 0:l.length)>0){const t=s==null?void 0:s.variants[0];return{image:(t==null?void 0:t.image)||null,mrp:(t==null?void 0:t.mrp)||0,itemCode:(t==null?void 0:t.itemCode)||"",color:t.color||"",hasVariants:!0,variants:s==null?void 0:s.variants}}return{image:s.imageUrl||s.image||null,mrp:s.mrp||0,itemCode:s.itemCode||"",color:null,hasVariants:!1,variants:[]}},Ve=a=>{var s,l,t,i,d,c,v,S,Ce,Ae,Te,Re,Me,we;if((s=a==null?void 0:a.specification)!=null&&s.variants&&((t=(l=a==null?void 0:a.specification)==null?void 0:l.variants)==null?void 0:t.length)>0){const m=(i=a==null?void 0:a.specification)==null?void 0:i.variants[0];return{itemCode:m==null?void 0:m.itemCode,mrp:m==null?void 0:m.mrp,color:m==null?void 0:m.color,image:((d=m.images)==null?void 0:d[0])||m.image,...m,hsn:((c=a==null?void 0:a.specification)==null?void 0:c.HSN)||"",brand:((v=a==null?void 0:a.specification)==null?void 0:v.brand)||"",description:((S=a==null?void 0:a.specification)==null?void 0:S.description)||"",styleType:((Ce=a==null?void 0:a.specification)==null?void 0:Ce.styleType)||"",type:((Ae=a==null?void 0:a.specification)==null?void 0:Ae.type)||"",materialType:((Te=a==null?void 0:a.specification)==null?void 0:Te.materialType)||"",category:((Re=a==null?void 0:a.specification)==null?void 0:Re.category)||(a==null?void 0:a.category)||"",subcategory:((Me=a==null?void 0:a.specification)==null?void 0:Me.subcategory)||(a==null?void 0:a.subcategory)||"",model:((we=a==null?void 0:a.specification)==null?void 0:we.model)||a.model||""}}return a.specification},Qe=a=>{var s,l,t,i,d,c;return(s=a==null?void 0:a.specification)!=null&&s.variants&&((t=(l=a==null?void 0:a.specification)==null?void 0:l.variants)==null?void 0:t.length)>0?(d=(i=a==null?void 0:a.specification)==null?void 0:i.variants[0])==null?void 0:d.itemCode:((c=a==null?void 0:a.specification)==null?void 0:c.itemCode)||(a==null?void 0:a.itemCode)},Ze=a=>{if(!(x!=null&&x.items))return 0;const s=x.items.find(l=>l.productId===a);return s?s.quantity:0},Xe=async a=>{var s,l;if(!j){u({title:"Error",description:"Please select a project first",variant:"destructive"});return}try{const t=Ve(a);await ue.mutateAsync({organizationId:o,projectId:j,productId:a._id,quantity:1,specification:t}),u({title:"Success",description:"Item added to cart successfully"}),ee()}catch(t){u({title:"Error",description:((l=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:l.message)||"Failed to add item to cart",variant:"destructive"})}},fe=async(a,s)=>{var l,t,i,d;if(x!=null&&x._id){if(s===0){try{await me.mutateAsync({cartId:x._id,itemCode:a}),u({title:"Success",description:"Item removed from cart"}),ee()}catch(c){u({title:"Error",description:((t=(l=c==null?void 0:c.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to remove item from cart",variant:"destructive"})}return}try{await xe.mutateAsync({cartId:x._id,itemCode:a,quantity:s}),u({title:"Success",description:"Cart updated successfully"}),ee()}catch(c){u({title:"Error",description:((d=(i=c==null?void 0:c.response)==null?void 0:i.data)==null?void 0:d.message)||"Failed to update cart",variant:"destructive"})}}},$e=async a=>{try{await ge.mutateAsync({organizationId:o,specification:a}),u({title:"Added",description:"Material inventory added successfully"}),ne(!1)}catch(s){G(s.message),u({title:"Error",description:s.message,variant:"destructive"})}},Je=async(a,s)=>{try{await he.mutateAsync({id:a,specification:s}),u({title:"Updated",description:"Material inventory updated successfully"}),ce(null)}catch(l){G(l.message),u({title:"Error",description:l.message,variant:"destructive"})}},ea=async a=>{try{await ve.mutateAsync({id:a}),u({title:"Deleted",description:"Material inventory deleted"})}catch(s){G(s.message),u({title:"Error",description:s.message,variant:"destructive"})}},z=n.useRef(null);n.useEffect(()=>{const a=()=>{if(console.log("has next page",le),!z.current||te||!le)return;const l=z.current,{scrollTop:t,scrollHeight:i,clientHeight:d}=l;i>d+50&&t+d>=i-300&&(console.log("Fetching next page..."),be())},s=z.current;if(s)return s.addEventListener("scroll",a),()=>s.removeEventListener("scroll",a)},[be,te,le]);const aa=g!==F||T!==D||R!==B;if(location.pathname.includes("single")||location.pathname.includes("cart"))return e.jsx(ca,{});const sa=a=>{const s=a.specification||{},l=qe(a),t=Qe(a),i=Ze(a._id),d=i>0,c=ue.isPending||xe.isPending||me.isPending;return e.jsxs(da,{className:"mb-4 shadow-xl border border-gray-100",children:[e.jsx(ua,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[l.image&&e.jsx("img",{src:l==null?void 0:l.image,alt:"img",className:"w-16 h-16 object-cover rounded-lg border border-gray-400"}),e.jsxs("div",{children:[e.jsx(xa,{className:"text-lg font-bold text-blue-900",children:P((s==null?void 0:s.subcategory)||s.name||s.model||(s==null?void 0:s.category)||"Unnamed",22)}),e.jsxs(ma,{className:"text-xs text-gray-500 mt-1",children:[(s==null?void 0:s.category)&&e.jsx("span",{className:"mr-2",children:e.jsx(Ue,{children:s.category})}),(s==null?void 0:s.model)&&e.jsxs("span",{className:"mr-2",children:["Model: ",e.jsx("span",{className:"font-semibold",children:P(s.model,14)})]}),l.hasVariants&&l.color&&e.jsx("span",{className:"mr-2",children:e.jsx(Ue,{variant:"secondary",children:l.color})}),(l==null?void 0:l.itemCode)&&e.jsxs("span",{className:"mr-2",children:["Code: ",e.jsx("span",{className:"font-semibold",children:l.itemCode})]}),(s==null?void 0:s.itemCode)&&e.jsxs("span",{className:"mr-2",children:["Code: ",e.jsx("span",{className:"font-semibold",children:s.itemCode})]})]})]})]})}),e.jsxs(ba,{children:[e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-700",children:[Object.entries(s).map(([v,S])=>["image","imageUrl","_id","organizationId","series","cct","mrp","itemCode","variants"].includes(v)||typeof S=="object"||S===void 0||S===null?null:v==="description"?e.jsxs("div",{className:"bg-gray-50 rounded px-2 py-1 border border-gray-100",children:[e.jsxs("span",{className:"font-semibold capitalize",children:[P(v,12),":"]}),S]},v):e.jsxs("div",{className:"bg-gray-50 rounded px-2 py-1 border border-gray-100",children:[e.jsxs("span",{className:"font-semibold capitalize",children:[P(v,12),":"]})," ",P(String(S),18)]},v)),l.hasVariants&&l.variants.length>1&&e.jsxs("div",{className:"bg-blue-50 rounded px-2 py-1 border border-blue-200",children:[e.jsx("span",{className:"font-semibold",children:"Variants:"})," ",l.variants.length," colors available"]}),l.mrp&&e.jsxs("div",{className:"text-blue-700 font-bold ml-auto text-[16px]",children:["₹",l.mrp]})]}),e.jsxs("section",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex justify-end gap-2",children:[J&&e.jsxs(y,{size:"sm",variant:"primary",onClick:()=>f(`single/${a._id}`),children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"View"]}),Fe&&e.jsxs(y,{size:"sm",isLoading:ve.isPending,variant:"danger",onClick:()=>ea(a._id),className:"text-white bg-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]}),e.jsx("div",{className:"flex gap-2 items-center",children:d?e.jsx(e.Fragment,{children:de&&e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 rounded-lg p-1 border border-green-200",children:[e.jsx(y,{size:"sm",onClick:()=>fe(t,i-1),disabled:c,variant:"danger",className:"w-8 h-8 p-0 bg-red-600 text-white rounded-md shadow-sm",children:e.jsx("i",{className:"fas fa-minus text-sm"})}),e.jsx("span",{className:"w-10 text-center font-bold text-green-700",children:i}),e.jsx(y,{size:"sm",variant:"primary",onClick:()=>fe(t,i+1),disabled:c,className:"w-8 h-8 p-0  rounded-md shadow-sm",children:e.jsx("i",{className:"fas fa-plus text-sm"})})]})}):e.jsx(e.Fragment,{children:de&&e.jsxs(y,{size:"sm",variant:"primary",onClick:()=>Xe(a),isLoading:c,disabled:!j||c,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fas fa-cart-plus mr-1"}),"Add to Cart"]})})})]})]})]},a._id)};return e.jsxs("div",{className:"max-h-full overflow-y-auto bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-2",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-list mr-3 text-blue-600"}),"Product Inventory List"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Discover the product that you want for you work here"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[aa&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[e.jsx("i",{className:"fas fa-clock animate-pulse"}),e.jsx("span",{children:"Updating results..."})]}),e.jsxs("div",{className:"w-full flex gap-1 items-center sm:w-64",children:[e.jsx(oa,{options:De,placeholder:"Select project",searchPlaceholder:"Search projects...",value:j||void 0,onValueChange:a=>ie(a||""),searchBy:"name",displayFormat:"simple",className:"w-full"}),e.jsx(La,{position:"bottom",content:"Select project for the displaying the cart items"})]}),J&&e.jsxs(y,{onClick:()=>f("cart"),variant:"primary",className:"relative w-full sm:w-auto",children:[e.jsx("i",{className:"fas fa-shopping-cart text-xl"}),x&&((je=x.items)==null?void 0:je.length)>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold",children:x.items.length})]}),e.jsx("div",{className:"w-full sm:w-auto flex justify-end sm:block",children:e.jsx(ya,{organizationId:o,stageName:"productinventory"})})]})]})})}),e.jsx("div",{className:"px-2 sm:px-4 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsx("div",{className:"xl:w-80 w-full flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-filter mr-2 text-blue-600"}),"Filters"]}),(r||E||H||V||Q||T||R||g||b)&&e.jsx("button",{onClick:()=>{A(""),I(""),p(""),k(""),He(""),ke(""),X("100000"),Z("0"),C("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear All"})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Search",g!==F&&e.jsx("span",{className:"ml-2 text-xs text-amber-600",children:e.jsx("i",{className:"fas fa-circle animate-pulse"})})]}),e.jsx(L,{placeholder:"Search by Brand, Subcategory, Model, ItemCode...",value:g,onChange:a=>C(a.target.value.trim())})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("select",{value:r,onChange:a=>A(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.categories.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),e.jsx("select",{value:N,onChange:a=>q(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.brand.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),Ke&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory"}),e.jsx("select",{value:E,onChange:a=>p(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.subcategories.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),e.jsx("select",{value:H,onChange:a=>k(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.models.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),Be&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:b,onChange:a=>I(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Types"}),(Se=O.types)==null?void 0:Se.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),e.jsx("div",{className:"px-2 mb-3",children:e.jsx(Sa,{range:!0,min:0,max:1e5,step:500,value:[Number(T),Number(R)],onChange:a=>{const[s,l]=a;Z(String(s)),X(String(l))},trackStyle:[{backgroundColor:"#3b82f6",height:6}],handleStyle:[{borderColor:"#3b82f6",backgroundColor:"#fff",boxShadow:"0 2px 6px rgba(59, 130, 246, 0.4)",width:18,height:18,marginTop:-6},{borderColor:"#3b82f6",backgroundColor:"#fff",boxShadow:"0 2px 6px rgba(59, 130, 246, 0.4)",width:18,height:18,marginTop:-6}],railStyle:{backgroundColor:"#e5e7eb",height:6}})}),e.jsxs("div",{className:"flex justify-between items-center gap-2 text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Min"}),e.jsxs("div",{className:"bg-blue-50 px-3 py-2 rounded-lg font-semibold text-blue-700 text-center",children:["₹",Number(T).toLocaleString("en-IN")]})]}),e.jsx("div",{className:"text-gray-400 mt-5",children:"—"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Max"}),e.jsxs("div",{className:"bg-blue-50 px-3 py-2 rounded-lg font-semibold text-blue-700 text-center",children:["₹",Number(R).toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 items-center mt-2",children:[e.jsx(L,{className:"",type:"number",value:T,onChange:a=>Z(a.target.value)}),e.jsx(L,{className:"",type:"number",value:R,onChange:a=>X(a.target.value)})]})]})]})]})}),J&&e.jsx("div",{className:"flex-1 !max-h-[95vh] overflow-y-auto custom-scrollbar",children:e.jsxs("div",{ref:z,children:[!j&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 rounded-lg p-4 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-3 text-xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Select a project to add items to cart"}),e.jsx("p",{className:"text-sm",children:"Choose a project from the dropdown above to enable cart functionality"})]})]}),oe&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-4 mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),oe]}),e.jsx("button",{onClick:()=>G(null),className:"ml-4 text-red-400 hover:text-red-700",children:e.jsx("i",{className:"fas fa-times"})})]}),_e&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-4 mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),(se==null?void 0:se.message)||"Failed to load data"]}),e.jsx("button",{onClick:()=>ze(),className:"ml-4 text-red-400 hover:text-red-700",children:e.jsx("i",{className:"fas fa-redo"})})]}),e.jsxs("div",{className:"max-h-[110%]  pr-2",children:[Ye?e.jsx(ia,{}):!((ye=U==null?void 0:U.pages)!=null&&ye.length)||!((Ee=(Le=U.pages[0])==null?void 0:Le.data)!=null&&Ee.length)?e.jsx(Ea,{message:"No material inventory found.",icon:"box",color:"gray"}):U.pages.map(a=>a.data.map(sa)),te&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-lg text-blue-400"})})]})]})})]})}),(Ge||M)&&e.jsx(Ca,{initialData:M==null?void 0:M.specification,onClose:()=>{ne(!1),ce(null)},onSubmit:async a=>{M?await Je(M._id,a):await $e(a)},isLoading:ge.status==="pending"||he.status==="pending"})]})},Ca=({initialData:o={},onClose:f,onSubmit:g,isLoading:C})=>{const[r,A]=n.useState({name:o.name||"",type:o.type||"",quantity:o.quantity||"",unit:o.unit||"",location:o.location||""}),[E,p]=n.useState(null),b=N=>{A(q=>({...q,[N.target.name]:N.target.value}))},I=async N=>{if(N.preventDefault(),!r.name)return p("Name is required");p(null),await g(r)};return e.jsx("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center",children:e.jsxs("form",{onSubmit:I,className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md space-y-4 relative",children:[e.jsx("button",{type:"button",className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700",onClick:f,children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:o!=null&&o.name?"Edit Material":"Add Material"}),e.jsx(L,{name:"name",placeholder:"Name",value:r.name,onChange:b}),e.jsx(L,{name:"type",placeholder:"Type",value:r.type,onChange:b}),e.jsx(L,{name:"quantity",placeholder:"Quantity",value:r.quantity,onChange:b,type:"number"}),e.jsx(L,{name:"unit",placeholder:"Unit",value:r.unit,onChange:b}),e.jsx(L,{name:"location",placeholder:"Location",value:r.location,onChange:b}),E&&e.jsx("div",{className:"text-red-500 text-sm",children:E}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(y,{type:"button",variant:"secondary",onClick:f,children:"Cancel"}),e.jsx(y,{type:"submit",variant:"primary",isLoading:C,children:"Save"})]})]})})};export{Ha as default};
