import{u as i}from"./useQuery-Cc7pLKfK.js";import{u as c}from"./useMutation-7YLqc7VE.js";import{u as n,q as u}from"./index-By5P0A7l.js";import{g as s}from"./roleCheck-YGaMnK_P.js";const w=async({api:r,body:e})=>{const{data:t}=await r.post("/quote/labour/rateconfig/categories",e);if(!t.ok)throw new Error(t.message);return t.data},L=()=>{const r=["owner","CTO","staff"],{role:e}=n(),t=s(e);return c({mutationFn:async o=>{if(!e||!r.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await w({api:t,body:o})},onSuccess:(o,{organizationId:a})=>{u.invalidateQueries({queryKey:["rateconfig","categories",a]})}})},f=async({api:r,organizationId:e})=>{const{data:t}=await r.get(`/quote/labour/rateconfig/categories/${e}`);if(!t.ok)throw new Error(t.message);return t.data},R=r=>{const e=["owner","CTO","staff"],{role:t}=n(),o=s(t);return i({queryKey:["rateconfig","categories",r],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("Not allowed to fetch this data");if(!o)throw new Error("API instance not found for role");return await f({api:o,organizationId:r})},enabled:!!r})},d=async({api:r,categoryId:e})=>{const{data:t}=await r.delete(`/quote/labour/rateconfig/categories/${e}`);if(!t.ok)throw new Error(t.message);return t.data},A=()=>{const r=["owner","CTO","staff"],{role:e}=n(),t=s(e);return c({mutationFn:async({categoryId:o})=>{if(!e||!r.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await d({api:t,categoryId:o})},onSuccess:(o,{organizationId:a})=>{u.invalidateQueries({queryKey:["rateconfig","categories",a]})}})},g=async({api:r,organizationId:e,categoryId:t})=>{const{data:o}=await r.get(`/quote/labour/rateconfig/categories/${e}/singlesalary/${t}`);if(!o.ok)throw new Error(o.message);return o.data},k=({organizationId:r,categoryId:e})=>{const t=["owner","CTO","staff"],{role:o}=n(),a=s(o);return i({queryKey:["labourcost",r,e],queryFn:async()=>{if(console.log("categoryId",e),!o||!t.includes(o))throw new Error("Not allowed to fetch this data");if(!a)throw new Error("API instance not found for role");return await g({api:a,organizationId:r,categoryId:e})},enabled:!!r&&!!e,retry:!1})},y=async({api:r,organizationId:e,categoryName:t})=>{const{data:o}=await r.get(`/quote/labour/rateconfig/categories/${e}/singlesalary`,{params:{categoryName:t}});if(!o.ok)throw new Error(o.message);return o.data},P=({organizationId:r,categoryName:e})=>{const t=["owner","CTO","staff"],{role:o}=n(),a=s(o);return i({queryKey:["labourcost-categoryName",r,e],queryFn:async()=>{if(!o||!t.includes(o))throw new Error("Not allowed to fetch this data");if(!a)throw new Error("API instance not found for role");return await y({api:a,organizationId:r,categoryName:e})},enabled:!!r&&!!e,retry:!1,staleTime:5*60*1e3})},m=async({api:r,organizationId:e,items:t,categoryId:o})=>{const{data:a}=await r.post(`/quote/labour/rateconfig/categories/${e}/${o}/items`,{items:t});if(!a.ok)throw new Error(a.message);return a.data},$=()=>{const r=["owner","CTO","staff"],{role:e}=n(),t=s(e);return c({mutationFn:async({categoryId:o,organizationId:a,items:l})=>{if(!e||!r.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await m({api:t,items:l,categoryId:o,organizationId:a})},onSuccess:(o,{organizationId:a})=>{u.invalidateQueries({queryKey:["rateconfig","items",a]})}})},h=async({api:r,organizationId:e,categoryId:t})=>{const{data:o}=await r.get(`/quote/labour/rateconfig/categories/${e}/${t}/items`);if(!o.ok)throw new Error(o.message);return o.data},F=(r,e)=>{const t=["owner","CTO","staff"],{role:o}=n(),a=s(o);return i({queryKey:["rateconfig","items",r,e],queryFn:async()=>{if(!o||!t.includes(o))throw new Error("Not allowed to fetch this data");if(!a)throw new Error("API instance not found for role");return await h({api:a,organizationId:r,categoryId:e})},enabled:!!r})},b=async({api:r,itemId:e})=>{const{data:t}=await r.delete(`/quote/labour/rateconfig/items/${e}`);if(!t.ok)throw new Error(t.message);return t.data},N=()=>{const r=["owner","CTO","staff"],{role:e}=n(),t=s(e);return c({mutationFn:async({itemId:o})=>{if(!e||!r.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await b({api:t,itemId:o})},onSuccess:(o,{organizationId:a})=>{u.invalidateQueries({queryKey:["rateconfig","items",a]})}})};export{L as a,A as b,k as c,P as d,F as e,$ as f,N as g,R as u};
