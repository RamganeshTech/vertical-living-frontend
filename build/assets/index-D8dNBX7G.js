var Eg=t=>{throw TypeError(t)};var om=(t,a,l)=>a.has(t)||Eg("Cannot "+l);var H=(t,a,l)=>(om(t,a,"read from private field"),l?l.call(t):a.get(t)),Ae=(t,a,l)=>a.has(t)?Eg("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(t):a.set(t,l),ve=(t,a,l,r)=>(om(t,a,"write to private field"),r?r.call(t,l):a.set(t,l),l),ze=(t,a,l)=>(om(t,a,"access private method"),l);var Qo=(t,a,l,r)=>({set _(o){ve(t,a,o,l)},get _(){return H(t,a,r)}});(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function l(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=l(o);fetch(o.href,d)}})();function Oj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cm={exports:{}},si={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function Rj(){if(Ag)return si;Ag=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(r,o,d){var m=null;if(d!==void 0&&(m=""+d),o.key!==void 0&&(m=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:t,type:r,key:m,ref:o!==void 0?o:null,props:d}}return si.Fragment=a,si.jsx=l,si.jsxs=l,si}var Og;function Tj(){return Og||(Og=1,cm.exports=Rj()),cm.exports}var e=Tj(),dm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function Pj(){if(Rg)return qe;Rg=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function j(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,E={};function v(O,U,D){this.props=O,this.context=U,this.refs=E,this.updater=D||C}v.prototype.isReactComponent={},v.prototype.setState=function(O,U){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,U,"setState")},v.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function S(){}S.prototype=v.prototype;function w(O,U,D){this.props=O,this.context=U,this.refs=E,this.updater=D||C}var N=w.prototype=new S;N.constructor=w,b(N,v.prototype),N.isPureReactComponent=!0;var T=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function z(O,U,D,K,Y,ge){return D=ge.ref,{$$typeof:t,type:O,key:U,ref:D!==void 0?D:null,props:ge}}function q(O,U){return z(O.type,U,void 0,void 0,void 0,O.props)}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function de(O){var U={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(D){return U[D]})}var Q=/\/+/g;function $(O,U){return typeof O=="object"&&O!==null&&O.key!=null?de(""+O.key):U.toString(36)}function ee(){}function V(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ee,ee):(O.status="pending",O.then(function(U){O.status==="pending"&&(O.status="fulfilled",O.value=U)},function(U){O.status==="pending"&&(O.status="rejected",O.reason=U)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function le(O,U,D,K,Y){var ge=typeof O;(ge==="undefined"||ge==="boolean")&&(O=null);var ae=!1;if(O===null)ae=!0;else switch(ge){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(O.$$typeof){case t:case a:ae=!0;break;case g:return ae=O._init,le(ae(O._payload),U,D,K,Y)}}if(ae)return Y=Y(O),ae=K===""?"."+$(O,0):K,T(Y)?(D="",ae!=null&&(D=ae.replace(Q,"$&/")+"/"),le(Y,U,D,"",function(Ve){return Ve})):Y!=null&&(B(Y)&&(Y=q(Y,D+(Y.key==null||O&&O.key===Y.key?"":(""+Y.key).replace(Q,"$&/")+"/")+ae)),U.push(Y)),1;ae=0;var Ne=K===""?".":K+":";if(T(O))for(var be=0;be<O.length;be++)K=O[be],ge=Ne+$(K,be),ae+=le(K,U,D,ge,Y);else if(be=j(O),typeof be=="function")for(O=be.call(O),be=0;!(K=O.next()).done;)K=K.value,ge=Ne+$(K,be++),ae+=le(K,U,D,ge,Y);else if(ge==="object"){if(typeof O.then=="function")return le(V(O),U,D,K,Y);throw U=String(O),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ae}function _(O,U,D){if(O==null)return O;var K=[],Y=0;return le(O,K,"","",function(ge){return U.call(D,ge,Y++)}),K}function W(O){if(O._status===-1){var U=O._result;U=U(),U.then(function(D){(O._status===0||O._status===-1)&&(O._status=1,O._result=D)},function(D){(O._status===0||O._status===-1)&&(O._status=2,O._result=D)}),O._status===-1&&(O._status=0,O._result=U)}if(O._status===1)return O._result.default;throw O._result}var me=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function te(){}return qe.Children={map:_,forEach:function(O,U,D){_(O,function(){U.apply(this,arguments)},D)},count:function(O){var U=0;return _(O,function(){U++}),U},toArray:function(O){return _(O,function(U){return U})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},qe.Component=v,qe.Fragment=l,qe.Profiler=o,qe.PureComponent=w,qe.StrictMode=r,qe.Suspense=x,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,qe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return P.H.useMemoCache(O)}},qe.cache=function(O){return function(){return O.apply(null,arguments)}},qe.cloneElement=function(O,U,D){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var K=b({},O.props),Y=O.key,ge=void 0;if(U!=null)for(ae in U.ref!==void 0&&(ge=void 0),U.key!==void 0&&(Y=""+U.key),U)!L.call(U,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&U.ref===void 0||(K[ae]=U[ae]);var ae=arguments.length-2;if(ae===1)K.children=D;else if(1<ae){for(var Ne=Array(ae),be=0;be<ae;be++)Ne[be]=arguments[be+2];K.children=Ne}return z(O.type,Y,void 0,void 0,ge,K)},qe.createContext=function(O){return O={$$typeof:m,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:d,_context:O},O},qe.createElement=function(O,U,D){var K,Y={},ge=null;if(U!=null)for(K in U.key!==void 0&&(ge=""+U.key),U)L.call(U,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Y[K]=U[K]);var ae=arguments.length-2;if(ae===1)Y.children=D;else if(1<ae){for(var Ne=Array(ae),be=0;be<ae;be++)Ne[be]=arguments[be+2];Y.children=Ne}if(O&&O.defaultProps)for(K in ae=O.defaultProps,ae)Y[K]===void 0&&(Y[K]=ae[K]);return z(O,ge,void 0,void 0,null,Y)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(O){return{$$typeof:p,render:O}},qe.isValidElement=B,qe.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:W}},qe.memo=function(O,U){return{$$typeof:h,type:O,compare:U===void 0?null:U}},qe.startTransition=function(O){var U=P.T,D={};P.T=D;try{var K=O(),Y=P.S;Y!==null&&Y(D,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(te,me)}catch(ge){me(ge)}finally{P.T=U}},qe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},qe.use=function(O){return P.H.use(O)},qe.useActionState=function(O,U,D){return P.H.useActionState(O,U,D)},qe.useCallback=function(O,U){return P.H.useCallback(O,U)},qe.useContext=function(O){return P.H.useContext(O)},qe.useDebugValue=function(){},qe.useDeferredValue=function(O,U){return P.H.useDeferredValue(O,U)},qe.useEffect=function(O,U,D){var K=P.H;if(typeof D=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(O,U)},qe.useId=function(){return P.H.useId()},qe.useImperativeHandle=function(O,U,D){return P.H.useImperativeHandle(O,U,D)},qe.useInsertionEffect=function(O,U){return P.H.useInsertionEffect(O,U)},qe.useLayoutEffect=function(O,U){return P.H.useLayoutEffect(O,U)},qe.useMemo=function(O,U){return P.H.useMemo(O,U)},qe.useOptimistic=function(O,U){return P.H.useOptimistic(O,U)},qe.useReducer=function(O,U,D){return P.H.useReducer(O,U,D)},qe.useRef=function(O){return P.H.useRef(O)},qe.useState=function(O){return P.H.useState(O)},qe.useSyncExternalStore=function(O,U,D){return P.H.useSyncExternalStore(O,U,D)},qe.useTransition=function(){return P.H.useTransition()},qe.version="19.1.0",qe}var Tg;function kc(){return Tg||(Tg=1,dm.exports=Pj()),dm.exports}var A=kc();const ct=Oj(A);var um={exports:{}},ai={},mm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function Mj(){return Pg||(Pg=1,function(t){function a(_,W){var me=_.length;_.push(W);e:for(;0<me;){var te=me-1>>>1,O=_[te];if(0<o(O,W))_[te]=W,_[me]=O,me=te;else break e}}function l(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var W=_[0],me=_.pop();if(me!==W){_[0]=me;e:for(var te=0,O=_.length,U=O>>>1;te<U;){var D=2*(te+1)-1,K=_[D],Y=D+1,ge=_[Y];if(0>o(K,me))Y<O&&0>o(ge,K)?(_[te]=ge,_[Y]=me,te=Y):(_[te]=K,_[D]=me,te=D);else if(Y<O&&0>o(ge,me))_[te]=ge,_[Y]=me,te=Y;else break e}}return W}function o(_,W){var me=_.sortIndex-W.sortIndex;return me!==0?me:_.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var m=Date,p=m.now();t.unstable_now=function(){return m.now()-p}}var x=[],h=[],g=1,y=null,j=3,C=!1,b=!1,E=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function T(_){for(var W=l(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=_)r(h),W.sortIndex=W.expirationTime,a(x,W);else break;W=l(h)}}function P(_){if(E=!1,T(_),!b)if(l(x)!==null)b=!0,L||(L=!0,$());else{var W=l(h);W!==null&&le(P,W.startTime-_)}}var L=!1,z=-1,q=5,B=-1;function de(){return v?!0:!(t.unstable_now()-B<q)}function Q(){if(v=!1,L){var _=t.unstable_now();B=_;var W=!0;try{e:{b=!1,E&&(E=!1,w(z),z=-1),C=!0;var me=j;try{t:{for(T(_),y=l(x);y!==null&&!(y.expirationTime>_&&de());){var te=y.callback;if(typeof te=="function"){y.callback=null,j=y.priorityLevel;var O=te(y.expirationTime<=_);if(_=t.unstable_now(),typeof O=="function"){y.callback=O,T(_),W=!0;break t}y===l(x)&&r(x),T(_)}else r(x);y=l(x)}if(y!==null)W=!0;else{var U=l(h);U!==null&&le(P,U.startTime-_),W=!1}}break e}finally{y=null,j=me,C=!1}W=void 0}}finally{W?$():L=!1}}}var $;if(typeof N=="function")$=function(){N(Q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,V=ee.port2;ee.port1.onmessage=Q,$=function(){V.postMessage(null)}}else $=function(){S(Q,0)};function le(_,W){z=S(function(){_(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_next=function(_){switch(j){case 1:case 2:case 3:var W=3;break;default:W=j}var me=j;j=W;try{return _()}finally{j=me}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(_,W){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var me=j;j=_;try{return W()}finally{j=me}},t.unstable_scheduleCallback=function(_,W,me){var te=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?te+me:te):me=te,_){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=me+O,_={id:g++,callback:W,priorityLevel:_,startTime:me,expirationTime:O,sortIndex:-1},me>te?(_.sortIndex=me,a(h,_),l(x)===null&&_===l(h)&&(E?(w(z),z=-1):E=!0,le(P,me-te))):(_.sortIndex=O,a(x,_),b||C||(b=!0,L||(L=!0,$()))),_},t.unstable_shouldYield=de,t.unstable_wrapCallback=function(_){var W=j;return function(){var me=j;j=W;try{return _.apply(this,arguments)}finally{j=me}}}}(fm)),fm}var Mg;function Lj(){return Mg||(Mg=1,mm.exports=Mj()),mm.exports}var hm={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function Fj(){if(Lg)return zt;Lg=1;var t=kc();function a(x){var h="https://react.dev/errors/"+x;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+x+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var r={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(x,h,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:x,containerInfo:h,implementation:g}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,h){if(x==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,zt.createPortal=function(x,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(a(299));return d(x,h,null,g)},zt.flushSync=function(x){var h=m.T,g=r.p;try{if(m.T=null,r.p=2,x)return x()}finally{m.T=h,r.p=g,r.d.f()}},zt.preconnect=function(x,h){typeof x=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(x,h))},zt.prefetchDNS=function(x){typeof x=="string"&&r.d.D(x)},zt.preinit=function(x,h){if(typeof x=="string"&&h&&typeof h.as=="string"){var g=h.as,y=p(g,h.crossOrigin),j=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?r.d.S(x,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:j,fetchPriority:C}):g==="script"&&r.d.X(x,{crossOrigin:y,integrity:j,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},zt.preinitModule=function(x,h){if(typeof x=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=p(h.as,h.crossOrigin);r.d.M(x,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(x)},zt.preload=function(x,h){if(typeof x=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,y=p(g,h.crossOrigin);r.d.L(x,g,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},zt.preloadModule=function(x,h){if(typeof x=="string")if(h){var g=p(h.as,h.crossOrigin);r.d.m(x,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(x)},zt.requestFormReset=function(x){r.d.r(x)},zt.unstable_batchedUpdates=function(x,h){return x(h)},zt.useFormState=function(x,h,g){return m.H.useFormState(x,h,g)},zt.useFormStatus=function(){return m.H.useHostTransitionStatus()},zt.version="19.1.0",zt}var Fg;function Dj(){if(Fg)return hm.exports;Fg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),hm.exports=Fj(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function _j(){if(Dg)return ai;Dg=1;var t=Lj(),a=kc(),l=Dj();function r(s){var n="https://react.dev/errors/"+s;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+s+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var n=s,i=s;if(s.alternate)for(;n.return;)n=n.return;else{s=n;do n=s,(n.flags&4098)!==0&&(i=n.return),s=n.return;while(s)}return n.tag===3?i:null}function m(s){if(s.tag===13){var n=s.memoizedState;if(n===null&&(s=s.alternate,s!==null&&(n=s.memoizedState)),n!==null)return n.dehydrated}return null}function p(s){if(d(s)!==s)throw Error(r(188))}function x(s){var n=s.alternate;if(!n){if(n=d(s),n===null)throw Error(r(188));return n!==s?null:s}for(var i=s,c=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(c=u.return,c!==null){i=c;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return p(u),s;if(f===c)return p(u),n;f=f.sibling}throw Error(r(188))}if(i.return!==c.return)i=u,c=f;else{for(var k=!1,R=u.child;R;){if(R===i){k=!0,i=u,c=f;break}if(R===c){k=!0,c=u,i=f;break}R=R.sibling}if(!k){for(R=f.child;R;){if(R===i){k=!0,i=f,c=u;break}if(R===c){k=!0,c=f,i=u;break}R=R.sibling}if(!k)throw Error(r(189))}}if(i.alternate!==c)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?s:n}function h(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s;for(s=s.child;s!==null;){if(n=h(s),n!==null)return n;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function $(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function V(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case v:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList";case B:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case N:return(s.displayName||"Context")+".Provider";case w:return(s._context.displayName||"Context")+".Consumer";case T:var n=s.render;return s=s.displayName,s||(s=n.displayName||n.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return n=s.displayName||null,n!==null?n:V(s.type)||"Memo";case q:n=s._payload,s=s._init;try{return V(s(n))}catch{}}return null}var le=Array.isArray,_=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},te=[],O=-1;function U(s){return{current:s}}function D(s){0>O||(s.current=te[O],te[O]=null,O--)}function K(s,n){O++,te[O]=s.current,s.current=n}var Y=U(null),ge=U(null),ae=U(null),Ne=U(null);function be(s,n){switch(K(ae,n),K(ge,s),K(Y,null),n.nodeType){case 9:case 11:s=(s=n.documentElement)&&(s=s.namespaceURI)?tg(s):0;break;default:if(s=n.tagName,n=n.namespaceURI)n=tg(n),s=sg(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}D(Y),K(Y,s)}function Ve(){D(Y),D(ge),D(ae)}function Kc(s){s.memoizedState!==null&&K(Ne,s);var n=Y.current,i=sg(n,s.type);n!==i&&(K(ge,s),K(Y,i))}function Oi(s){ge.current===s&&(D(Y),D(ge)),Ne.current===s&&(D(Ne),Xr._currentValue=me)}var Vc=Object.prototype.hasOwnProperty,Yc=t.unstable_scheduleCallback,Wc=t.unstable_cancelCallback,iw=t.unstable_shouldYield,ow=t.unstable_requestPaint,Qs=t.unstable_now,cw=t.unstable_getCurrentPriorityLevel,Ff=t.unstable_ImmediatePriority,Df=t.unstable_UserBlockingPriority,Ri=t.unstable_NormalPriority,dw=t.unstable_LowPriority,_f=t.unstable_IdlePriority,uw=t.log,mw=t.unstable_setDisableYieldValue,lr=null,is=null;function Oa(s){if(typeof uw=="function"&&mw(s),is&&typeof is.setStrictMode=="function")try{is.setStrictMode(lr,s)}catch{}}var os=Math.clz32?Math.clz32:xw,fw=Math.log,hw=Math.LN2;function xw(s){return s>>>=0,s===0?32:31-(fw(s)/hw|0)|0}var Ti=256,Pi=4194304;function pn(s){var n=s&42;if(n!==0)return n;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Mi(s,n,i){var c=s.pendingLanes;if(c===0)return 0;var u=0,f=s.suspendedLanes,k=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~f,c!==0?u=pn(c):(k&=R,k!==0?u=pn(k):i||(i=R&~s,i!==0&&(u=pn(i))))):(R=c&~f,R!==0?u=pn(R):k!==0?u=pn(k):i||(i=c&~s,i!==0&&(u=pn(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function rr(s,n){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&n)===0}function pw(s,n){switch(s){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qf(){var s=Ti;return Ti<<=1,(Ti&4194048)===0&&(Ti=256),s}function zf(){var s=Pi;return Pi<<=1,(Pi&62914560)===0&&(Pi=4194304),s}function Xc(s){for(var n=[],i=0;31>i;i++)n.push(s);return n}function ir(s,n){s.pendingLanes|=n,n!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function gw(s,n,i,c,u,f){var k=s.pendingLanes;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=i,s.entangledLanes&=i,s.errorRecoveryDisabledLanes&=i,s.shellSuspendCounter=0;var R=s.entanglements,I=s.expirationTimes,ne=s.hiddenUpdates;for(i=k&~i;0<i;){var he=31-os(i),pe=1<<he;R[he]=0,I[he]=-1;var re=ne[he];if(re!==null)for(ne[he]=null,he=0;he<re.length;he++){var oe=re[he];oe!==null&&(oe.lane&=-536870913)}i&=~pe}c!==0&&Uf(s,c,0),f!==0&&u===0&&s.tag!==0&&(s.suspendedLanes|=f&~(k&~n))}function Uf(s,n,i){s.pendingLanes|=n,s.suspendedLanes&=~n;var c=31-os(n);s.entangledLanes|=n,s.entanglements[c]=s.entanglements[c]|1073741824|i&4194090}function If(s,n){var i=s.entangledLanes|=n;for(s=s.entanglements;i;){var c=31-os(i),u=1<<c;u&n|s[c]&n&&(s[c]|=n),i&=~u}}function Zc(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Jc(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $f(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:vg(s.type))}function bw(s,n){var i=W.p;try{return W.p=s,n()}finally{W.p=i}}var Ra=Math.random().toString(36).slice(2),_t="__reactFiber$"+Ra,Yt="__reactProps$"+Ra,Xn="__reactContainer$"+Ra,ed="__reactEvents$"+Ra,yw="__reactListeners$"+Ra,ww="__reactHandles$"+Ra,Bf="__reactResources$"+Ra,or="__reactMarker$"+Ra;function td(s){delete s[_t],delete s[Yt],delete s[ed],delete s[yw],delete s[ww]}function Zn(s){var n=s[_t];if(n)return n;for(var i=s.parentNode;i;){if(n=i[Xn]||i[_t]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(s=rg(s);s!==null;){if(i=s[_t])return i;s=rg(s)}return n}s=i,i=s.parentNode}return null}function Jn(s){if(s=s[_t]||s[Xn]){var n=s.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return s}return null}function cr(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s.stateNode;throw Error(r(33))}function el(s){var n=s[Bf];return n||(n=s[Bf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function kt(s){s[or]=!0}var Hf=new Set,Qf={};function gn(s,n){tl(s,n),tl(s+"Capture",n)}function tl(s,n){for(Qf[s]=n,s=0;s<n.length;s++)Hf.add(n[s])}var vw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gf={},Kf={};function jw(s){return Vc.call(Kf,s)?!0:Vc.call(Gf,s)?!1:vw.test(s)?Kf[s]=!0:(Gf[s]=!0,!1)}function Li(s,n,i){if(jw(n))if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":s.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(n);return}}s.setAttribute(n,""+i)}}function Fi(s,n,i){if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(n);return}s.setAttribute(n,""+i)}}function na(s,n,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttributeNS(n,i,""+c)}}var sd,Vf;function sl(s){if(sd===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);sd=n&&n[1]||"",Vf=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sd+s+Vf}var ad=!1;function nd(s,n){if(!s||ad)return"";ad=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var re=oe}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(oe){re=oe}s.call(pe.prototype)}}else{try{throw Error()}catch(oe){re=oe}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),k=f[0],R=f[1];if(k&&R){var I=k.split(`
`),ne=R.split(`
`);for(u=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;u<ne.length&&!ne[u].includes("DetermineComponentFrameRoot");)u++;if(c===I.length||u===ne.length)for(c=I.length-1,u=ne.length-1;1<=c&&0<=u&&I[c]!==ne[u];)u--;for(;1<=c&&0<=u;c--,u--)if(I[c]!==ne[u]){if(c!==1||u!==1)do if(c--,u--,0>u||I[c]!==ne[u]){var he=`
`+I[c].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=c&&0<=u);break}}}finally{ad=!1,Error.prepareStackTrace=i}return(i=s?s.displayName||s.name:"")?sl(i):""}function Nw(s){switch(s.tag){case 26:case 27:case 5:return sl(s.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 15:return nd(s.type,!1);case 11:return nd(s.type.render,!1);case 1:return nd(s.type,!0);case 31:return sl("Activity");default:return""}}function Yf(s){try{var n="";do n+=Nw(s),s=s.return;while(s);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function js(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Wf(s){var n=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Sw(s){var n=Wf(s)?"checked":"value",i=Object.getOwnPropertyDescriptor(s.constructor.prototype,n),c=""+s[n];if(!s.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(s,n,{configurable:!0,get:function(){return u.call(this)},set:function(k){c=""+k,f.call(this,k)}}),Object.defineProperty(s,n,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){s._valueTracker=null,delete s[n]}}}}function Di(s){s._valueTracker||(s._valueTracker=Sw(s))}function Xf(s){if(!s)return!1;var n=s._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return s&&(c=Wf(s)?s.checked?"true":"false":s.value),s=c,s!==i?(n.setValue(s),!0):!1}function _i(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Cw=/[\n"\\]/g;function Ns(s){return s.replace(Cw,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ld(s,n,i,c,u,f,k,R){s.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.type=k:s.removeAttribute("type"),n!=null?k==="number"?(n===0&&s.value===""||s.value!=n)&&(s.value=""+js(n)):s.value!==""+js(n)&&(s.value=""+js(n)):k!=="submit"&&k!=="reset"||s.removeAttribute("value"),n!=null?rd(s,k,js(n)):i!=null?rd(s,k,js(i)):c!=null&&s.removeAttribute("value"),u==null&&f!=null&&(s.defaultChecked=!!f),u!=null&&(s.checked=u&&typeof u!="function"&&typeof u!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+js(R):s.removeAttribute("name")}function Zf(s,n,i,c,u,f,k,R){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(s.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;i=i!=null?""+js(i):"",n=n!=null?""+js(n):i,R||n===s.value||(s.value=n),s.defaultValue=n}c=c??u,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(s.name=k)}function rd(s,n,i){n==="number"&&_i(s.ownerDocument)===s||s.defaultValue===""+i||(s.defaultValue=""+i)}function al(s,n,i,c){if(s=s.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<s.length;i++)u=n.hasOwnProperty("$"+s[i].value),s[i].selected!==u&&(s[i].selected=u),u&&c&&(s[i].defaultSelected=!0)}else{for(i=""+js(i),n=null,u=0;u<s.length;u++){if(s[u].value===i){s[u].selected=!0,c&&(s[u].defaultSelected=!0);return}n!==null||s[u].disabled||(n=s[u])}n!==null&&(n.selected=!0)}}function Jf(s,n,i){if(n!=null&&(n=""+js(n),n!==s.value&&(s.value=n),i==null)){s.defaultValue!==n&&(s.defaultValue=n);return}s.defaultValue=i!=null?""+js(i):""}function eh(s,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(r(92));if(le(c)){if(1<c.length)throw Error(r(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=js(n),s.defaultValue=i,c=s.textContent,c===i&&c!==""&&c!==null&&(s.value=c)}function nl(s,n){if(n){var i=s.firstChild;if(i&&i===s.lastChild&&i.nodeType===3){i.nodeValue=n;return}}s.textContent=n}var kw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function th(s,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?s.setProperty(n,""):n==="float"?s.cssFloat="":s[n]="":c?s.setProperty(n,i):typeof i!="number"||i===0||kw.has(n)?n==="float"?s.cssFloat=i:s[n]=(""+i).trim():s[n]=i+"px"}function sh(s,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(s=s.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var u in n)c=n[u],n.hasOwnProperty(u)&&i[u]!==c&&th(s,u,c)}else for(var f in n)n.hasOwnProperty(f)&&th(s,f,n[f])}function id(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ew=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Aw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(s){return Aw.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var od=null;function cd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ll=null,rl=null;function ah(s){var n=Jn(s);if(n&&(s=n.stateNode)){var i=s[Yt]||null;e:switch(s=n.stateNode,n.type){case"input":if(ld(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=s;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ns(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==s&&c.form===s.form){var u=c[Yt]||null;if(!u)throw Error(r(90));ld(c,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===s.form&&Xf(c)}break e;case"textarea":Jf(s,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&al(s,!!i.multiple,n,!1)}}}var dd=!1;function nh(s,n,i){if(dd)return s(n,i);dd=!0;try{var c=s(n);return c}finally{if(dd=!1,(ll!==null||rl!==null)&&(So(),ll&&(n=ll,s=rl,rl=ll=null,ah(n),s)))for(n=0;n<s.length;n++)ah(s[n])}}function dr(s,n){var i=s.stateNode;if(i===null)return null;var c=i[Yt]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ud=!1;if(la)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){ud=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{ud=!1}var Ta=null,md=null,zi=null;function lh(){if(zi)return zi;var s,n=md,i=n.length,c,u="value"in Ta?Ta.value:Ta.textContent,f=u.length;for(s=0;s<i&&n[s]===u[s];s++);var k=i-s;for(c=1;c<=k&&n[i-c]===u[f-c];c++);return zi=u.slice(s,1<c?1-c:void 0)}function Ui(s){var n=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&n===13&&(s=13)):s=n,s===10&&(s=13),32<=s||s===13?s:0}function Ii(){return!0}function rh(){return!1}function Wt(s){function n(i,c,u,f,k){this._reactName=i,this._targetInst=u,this.type=c,this.nativeEvent=f,this.target=k,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(i=s[R],this[R]=i?i(f):f[R]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ii:rh,this.isPropagationStopped=rh,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),n}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$i=Wt(bn),mr=g({},bn,{view:0,detail:0}),Ow=Wt(mr),fd,hd,fr,Bi=g({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fr&&(fr&&s.type==="mousemove"?(fd=s.screenX-fr.screenX,hd=s.screenY-fr.screenY):hd=fd=0,fr=s),fd)},movementY:function(s){return"movementY"in s?s.movementY:hd}}),ih=Wt(Bi),Rw=g({},Bi,{dataTransfer:0}),Tw=Wt(Rw),Pw=g({},mr,{relatedTarget:0}),xd=Wt(Pw),Mw=g({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lw=Wt(Mw),Fw=g({},bn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Dw=Wt(Fw),_w=g({},bn,{data:0}),oh=Wt(_w),qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iw(s){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(s):(s=Uw[s])?!!n[s]:!1}function pd(){return Iw}var $w=g({},mr,{key:function(s){if(s.key){var n=qw[s.key]||s.key;if(n!=="Unidentified")return n}return s.type==="keypress"?(s=Ui(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?zw[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pd,charCode:function(s){return s.type==="keypress"?Ui(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ui(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Bw=Wt($w),Hw=g({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=Wt(Hw),Qw=g({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pd}),Gw=Wt(Qw),Kw=g({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vw=Wt(Kw),Yw=g({},Bi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ww=Wt(Yw),Xw=g({},bn,{newState:0,oldState:0}),Zw=Wt(Xw),Jw=[9,13,27,32],gd=la&&"CompositionEvent"in window,hr=null;la&&"documentMode"in document&&(hr=document.documentMode);var ev=la&&"TextEvent"in window&&!hr,dh=la&&(!gd||hr&&8<hr&&11>=hr),uh=" ",mh=!1;function fh(s,n){switch(s){case"keyup":return Jw.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var il=!1;function tv(s,n){switch(s){case"compositionend":return hh(n);case"keypress":return n.which!==32?null:(mh=!0,uh);case"textInput":return s=n.data,s===uh&&mh?null:s;default:return null}}function sv(s,n){if(il)return s==="compositionend"||!gd&&fh(s,n)?(s=lh(),zi=md=Ta=null,il=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return dh&&n.locale!=="ko"?null:n.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xh(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n==="input"?!!av[s.type]:n==="textarea"}function ph(s,n,i,c){ll?rl?rl.push(c):rl=[c]:ll=c,n=Ro(n,"onChange"),0<n.length&&(i=new $i("onChange","change",null,i,c),s.push({event:i,listeners:n}))}var xr=null,pr=null;function nv(s){Wp(s,0)}function Hi(s){var n=cr(s);if(Xf(n))return s}function gh(s,n){if(s==="change")return n}var bh=!1;if(la){var bd;if(la){var yd="oninput"in document;if(!yd){var yh=document.createElement("div");yh.setAttribute("oninput","return;"),yd=typeof yh.oninput=="function"}bd=yd}else bd=!1;bh=bd&&(!document.documentMode||9<document.documentMode)}function wh(){xr&&(xr.detachEvent("onpropertychange",vh),pr=xr=null)}function vh(s){if(s.propertyName==="value"&&Hi(pr)){var n=[];ph(n,pr,s,cd(s)),nh(nv,n)}}function lv(s,n,i){s==="focusin"?(wh(),xr=n,pr=i,xr.attachEvent("onpropertychange",vh)):s==="focusout"&&wh()}function rv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hi(pr)}function iv(s,n){if(s==="click")return Hi(n)}function ov(s,n){if(s==="input"||s==="change")return Hi(n)}function cv(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var cs=typeof Object.is=="function"?Object.is:cv;function gr(s,n){if(cs(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;var i=Object.keys(s),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var u=i[c];if(!Vc.call(n,u)||!cs(s[u],n[u]))return!1}return!0}function jh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Nh(s,n){var i=jh(s);s=0;for(var c;i;){if(i.nodeType===3){if(c=s+i.textContent.length,s<=n&&c>=n)return{node:i,offset:n-s};s=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=jh(i)}}function Sh(s,n){return s&&n?s===n?!0:s&&s.nodeType===3?!1:n&&n.nodeType===3?Sh(s,n.parentNode):"contains"in s?s.contains(n):s.compareDocumentPosition?!!(s.compareDocumentPosition(n)&16):!1:!1}function Ch(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var n=_i(s.document);n instanceof s.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)s=n.contentWindow;else break;n=_i(s.document)}return n}function wd(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n&&(n==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||n==="textarea"||s.contentEditable==="true")}var dv=la&&"documentMode"in document&&11>=document.documentMode,ol=null,vd=null,br=null,jd=!1;function kh(s,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;jd||ol==null||ol!==_i(c)||(c=ol,"selectionStart"in c&&wd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),br&&gr(br,c)||(br=c,c=Ro(vd,"onSelect"),0<c.length&&(n=new $i("onSelect","select",null,n,i),s.push({event:n,listeners:c}),n.target=ol)))}function yn(s,n){var i={};return i[s.toLowerCase()]=n.toLowerCase(),i["Webkit"+s]="webkit"+n,i["Moz"+s]="moz"+n,i}var cl={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionrun:yn("Transition","TransitionRun"),transitionstart:yn("Transition","TransitionStart"),transitioncancel:yn("Transition","TransitionCancel"),transitionend:yn("Transition","TransitionEnd")},Nd={},Eh={};la&&(Eh=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function wn(s){if(Nd[s])return Nd[s];if(!cl[s])return s;var n=cl[s],i;for(i in n)if(n.hasOwnProperty(i)&&i in Eh)return Nd[s]=n[i];return s}var Ah=wn("animationend"),Oh=wn("animationiteration"),Rh=wn("animationstart"),uv=wn("transitionrun"),mv=wn("transitionstart"),fv=wn("transitioncancel"),Th=wn("transitionend"),Ph=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function Fs(s,n){Ph.set(s,n),gn(n,[s])}var Mh=new WeakMap;function Ss(s,n){if(typeof s=="object"&&s!==null){var i=Mh.get(s);return i!==void 0?i:(n={value:s,source:n,stack:Yf(n)},Mh.set(s,n),n)}return{value:s,source:n,stack:Yf(n)}}var Cs=[],dl=0,Cd=0;function Qi(){for(var s=dl,n=Cd=dl=0;n<s;){var i=Cs[n];Cs[n++]=null;var c=Cs[n];Cs[n++]=null;var u=Cs[n];Cs[n++]=null;var f=Cs[n];if(Cs[n++]=null,c!==null&&u!==null){var k=c.pending;k===null?u.next=u:(u.next=k.next,k.next=u),c.pending=u}f!==0&&Lh(i,u,f)}}function Gi(s,n,i,c){Cs[dl++]=s,Cs[dl++]=n,Cs[dl++]=i,Cs[dl++]=c,Cd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function kd(s,n,i,c){return Gi(s,n,i,c),Ki(s)}function ul(s,n){return Gi(s,null,null,n),Ki(s)}function Lh(s,n,i){s.lanes|=i;var c=s.alternate;c!==null&&(c.lanes|=i);for(var u=!1,f=s.return;f!==null;)f.childLanes|=i,c=f.alternate,c!==null&&(c.childLanes|=i),f.tag===22&&(s=f.stateNode,s===null||s._visibility&1||(u=!0)),s=f,f=f.return;return s.tag===3?(f=s.stateNode,u&&n!==null&&(u=31-os(i),s=f.hiddenUpdates,c=s[u],c===null?s[u]=[n]:c.push(n),n.lane=i|536870912),f):null}function Ki(s){if(50<Br)throw Br=0,Pu=null,Error(r(185));for(var n=s.return;n!==null;)s=n,n=s.return;return s.tag===3?s.stateNode:null}var ml={};function hv(s,n,i,c){this.tag=s,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(s,n,i,c){return new hv(s,n,i,c)}function Ed(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ra(s,n){var i=s.alternate;return i===null?(i=ds(s.tag,n,s.key,s.mode),i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.alternate=s,s.alternate=i):(i.pendingProps=n,i.type=s.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=s.flags&65011712,i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,n=s.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i.refCleanup=s.refCleanup,i}function Fh(s,n){s.flags&=65011714;var i=s.alternate;return i===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,n=i.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s}function Vi(s,n,i,c,u,f){var k=0;if(c=s,typeof s=="function")Ed(s)&&(k=1);else if(typeof s=="string")k=pj(s,i,Y.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case B:return s=ds(31,i,n,u),s.elementType=B,s.lanes=f,s;case b:return vn(i.children,u,f,n);case E:k=8,u|=24;break;case v:return s=ds(12,i,n,u|2),s.elementType=v,s.lanes=f,s;case P:return s=ds(13,i,n,u),s.elementType=P,s.lanes=f,s;case L:return s=ds(19,i,n,u),s.elementType=L,s.lanes=f,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:case N:k=10;break e;case w:k=9;break e;case T:k=11;break e;case z:k=14;break e;case q:k=16,c=null;break e}k=29,i=Error(r(130,s===null?"null":typeof s,"")),c=null}return n=ds(k,i,n,u),n.elementType=s,n.type=c,n.lanes=f,n}function vn(s,n,i,c){return s=ds(7,s,c,n),s.lanes=i,s}function Ad(s,n,i){return s=ds(6,s,null,n),s.lanes=i,s}function Od(s,n,i){return n=ds(4,s.children!==null?s.children:[],s.key,n),n.lanes=i,n.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},n}var fl=[],hl=0,Yi=null,Wi=0,ks=[],Es=0,jn=null,ia=1,oa="";function Nn(s,n){fl[hl++]=Wi,fl[hl++]=Yi,Yi=s,Wi=n}function Dh(s,n,i){ks[Es++]=ia,ks[Es++]=oa,ks[Es++]=jn,jn=s;var c=ia;s=oa;var u=32-os(c)-1;c&=~(1<<u),i+=1;var f=32-os(n)+u;if(30<f){var k=u-u%5;f=(c&(1<<k)-1).toString(32),c>>=k,u-=k,ia=1<<32-os(n)+u|i<<u|c,oa=f+s}else ia=1<<f|i<<u|c,oa=s}function Rd(s){s.return!==null&&(Nn(s,1),Dh(s,1,0))}function Td(s){for(;s===Yi;)Yi=fl[--hl],fl[hl]=null,Wi=fl[--hl],fl[hl]=null;for(;s===jn;)jn=ks[--Es],ks[Es]=null,oa=ks[--Es],ks[Es]=null,ia=ks[--Es],ks[Es]=null}var Ht=null,ht=null,We=!1,Sn=null,Gs=!1,Pd=Error(r(519));function Cn(s){var n=Error(r(418,""));throw vr(Ss(n,s)),Pd}function _h(s){var n=s.stateNode,i=s.type,c=s.memoizedProps;switch(n[_t]=s,n[Yt]=c,i){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(i=0;i<Qr.length;i++)Be(Qr[i],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Be("invalid",n),Zf(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Di(n);break;case"select":Be("invalid",n);break;case"textarea":Be("invalid",n),eh(n,c.value,c.defaultValue,c.children),Di(n)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||eg(n.textContent,i)?(c.popover!=null&&(Be("beforetoggle",n),Be("toggle",n)),c.onScroll!=null&&Be("scroll",n),c.onScrollEnd!=null&&Be("scrollend",n),c.onClick!=null&&(n.onclick=To),n=!0):n=!1,n||Cn(s)}function qh(s){for(Ht=s.return;Ht;)switch(Ht.tag){case 5:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:Ht=Ht.return}}function yr(s){if(s!==Ht)return!1;if(!We)return qh(s),We=!0,!1;var n=s.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=s.type,i=!(i!=="form"&&i!=="button")||Vu(s.type,s.memoizedProps)),i=!i),i&&ht&&Cn(s),qh(s),n===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,n=0;s;){if(s.nodeType===8)if(i=s.data,i==="/$"){if(n===0){ht=_s(s.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;s=s.nextSibling}ht=null}}else n===27?(n=ht,Ka(s.type)?(s=Zu,Zu=null,ht=s):ht=n):ht=Ht?_s(s.stateNode.nextSibling):null;return!0}function wr(){ht=Ht=null,We=!1}function zh(){var s=Sn;return s!==null&&(Jt===null?Jt=s:Jt.push.apply(Jt,s),Sn=null),s}function vr(s){Sn===null?Sn=[s]:Sn.push(s)}var Md=U(null),kn=null,ca=null;function Pa(s,n,i){K(Md,n._currentValue),n._currentValue=i}function da(s){s._currentValue=Md.current,D(Md)}function Ld(s,n,i){for(;s!==null;){var c=s.alternate;if((s.childLanes&n)!==n?(s.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),s===i)break;s=s.return}}function Fd(s,n,i,c){var u=s.child;for(u!==null&&(u.return=s);u!==null;){var f=u.dependencies;if(f!==null){var k=u.child;f=f.firstContext;e:for(;f!==null;){var R=f;f=u;for(var I=0;I<n.length;I++)if(R.context===n[I]){f.lanes|=i,R=f.alternate,R!==null&&(R.lanes|=i),Ld(f.return,i,s),c||(k=null);break e}f=R.next}}else if(u.tag===18){if(k=u.return,k===null)throw Error(r(341));k.lanes|=i,f=k.alternate,f!==null&&(f.lanes|=i),Ld(k,i,s),k=null}else k=u.child;if(k!==null)k.return=u;else for(k=u;k!==null;){if(k===s){k=null;break}if(u=k.sibling,u!==null){u.return=k.return,k=u;break}k=k.return}u=k}}function jr(s,n,i,c){s=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var k=u.alternate;if(k===null)throw Error(r(387));if(k=k.memoizedProps,k!==null){var R=u.type;cs(u.pendingProps.value,k.value)||(s!==null?s.push(R):s=[R])}}else if(u===Ne.current){if(k=u.alternate,k===null)throw Error(r(387));k.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(s!==null?s.push(Xr):s=[Xr])}u=u.return}s!==null&&Fd(n,s,i,c),n.flags|=262144}function Xi(s){for(s=s.firstContext;s!==null;){if(!cs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function En(s){kn=s,ca=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function qt(s){return Uh(kn,s)}function Zi(s,n){return kn===null&&En(s),Uh(s,n)}function Uh(s,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ca===null){if(s===null)throw Error(r(308));ca=n,s.dependencies={lanes:0,firstContext:n},s.flags|=524288}else ca=ca.next=n;return i}var xv=typeof AbortController<"u"?AbortController:function(){var s=[],n=this.signal={aborted:!1,addEventListener:function(i,c){s.push(c)}};this.abort=function(){n.aborted=!0,s.forEach(function(i){return i()})}},pv=t.unstable_scheduleCallback,gv=t.unstable_NormalPriority,Nt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dd(){return{controller:new xv,data:new Map,refCount:0}}function Nr(s){s.refCount--,s.refCount===0&&pv(gv,function(){s.controller.abort()})}var Sr=null,_d=0,xl=0,pl=null;function bv(s,n){if(Sr===null){var i=Sr=[];_d=0,xl=zu(),pl={status:"pending",value:void 0,then:function(c){i.push(c)}}}return _d++,n.then(Ih,Ih),n}function Ih(){if(--_d===0&&Sr!==null){pl!==null&&(pl.status="fulfilled");var s=Sr;Sr=null,xl=0,pl=null;for(var n=0;n<s.length;n++)(0,s[n])()}}function yv(s,n){var i=[],c={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return s.then(function(){c.status="fulfilled",c.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(c.status="rejected",c.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),c}var $h=_.S;_.S=function(s,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&bv(s,n),$h!==null&&$h(s,n)};var An=U(null);function qd(){var s=An.current;return s!==null?s:ot.pooledCache}function Ji(s,n){n===null?K(An,An.current):K(An,n.pool)}function Bh(){var s=qd();return s===null?null:{parent:Nt._currentValue,pool:s}}var Cr=Error(r(460)),Hh=Error(r(474)),eo=Error(r(542)),zd={then:function(){}};function Qh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function to(){}function Gh(s,n,i){switch(i=s[i],i===void 0?s.push(n):i!==n&&(n.then(to,to),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Vh(s),s;default:if(typeof n.status=="string")n.then(to,to);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=n,s.status="pending",s.then(function(c){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=c}},function(c){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Vh(s),s}throw kr=n,Cr}}var kr=null;function Kh(){if(kr===null)throw Error(r(459));var s=kr;return kr=null,s}function Vh(s){if(s===Cr||s===eo)throw Error(r(483))}var Ma=!1;function Ud(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(s,n){s=s.updateQueue,n.updateQueue===s&&(n.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function La(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Fa(s,n,i){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var u=c.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),c.pending=n,n=Ki(s),Lh(s,null,i),n}return Gi(s,c,n,i),Ki(s)}function Er(s,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,If(s,i)}}function $d(s,n){var i=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var k={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=k:f=f.next=k,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:c.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},s.updateQueue=i;return}s=i.lastBaseUpdate,s===null?i.firstBaseUpdate=n:s.next=n,i.lastBaseUpdate=n}var Bd=!1;function Ar(){if(Bd){var s=pl;if(s!==null)throw s}}function Or(s,n,i,c){Bd=!1;var u=s.updateQueue;Ma=!1;var f=u.firstBaseUpdate,k=u.lastBaseUpdate,R=u.shared.pending;if(R!==null){u.shared.pending=null;var I=R,ne=I.next;I.next=null,k===null?f=ne:k.next=ne,k=I;var he=s.alternate;he!==null&&(he=he.updateQueue,R=he.lastBaseUpdate,R!==k&&(R===null?he.firstBaseUpdate=ne:R.next=ne,he.lastBaseUpdate=I))}if(f!==null){var pe=u.baseState;k=0,he=ne=I=null,R=f;do{var re=R.lane&-536870913,oe=re!==R.lane;if(oe?(Ke&re)===re:(c&re)===re){re!==0&&re===xl&&(Bd=!0),he!==null&&(he=he.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Pe=s,Oe=R;re=n;var rt=i;switch(Oe.tag){case 1:if(Pe=Oe.payload,typeof Pe=="function"){pe=Pe.call(rt,pe,re);break e}pe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Oe.payload,re=typeof Pe=="function"?Pe.call(rt,pe,re):Pe,re==null)break e;pe=g({},pe,re);break e;case 2:Ma=!0}}re=R.callback,re!==null&&(s.flags|=64,oe&&(s.flags|=8192),oe=u.callbacks,oe===null?u.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:R.tag,payload:R.payload,callback:R.callback,next:null},he===null?(ne=he=oe,I=pe):he=he.next=oe,k|=re;if(R=R.next,R===null){if(R=u.shared.pending,R===null)break;oe=R,R=oe.next,oe.next=null,u.lastBaseUpdate=oe,u.shared.pending=null}}while(!0);he===null&&(I=pe),u.baseState=I,u.firstBaseUpdate=ne,u.lastBaseUpdate=he,f===null&&(u.shared.lanes=0),Ba|=k,s.lanes=k,s.memoizedState=pe}}function Yh(s,n){if(typeof s!="function")throw Error(r(191,s));s.call(n)}function Wh(s,n){var i=s.callbacks;if(i!==null)for(s.callbacks=null,s=0;s<i.length;s++)Yh(i[s],n)}var gl=U(null),so=U(0);function Xh(s,n){s=ga,K(so,s),K(gl,n),ga=s|n.baseLanes}function Hd(){K(so,ga),K(gl,gl.current)}function Qd(){ga=so.current,D(gl),D(so)}var Da=0,Ue=null,nt=null,wt=null,ao=!1,bl=!1,On=!1,no=0,Rr=0,yl=null,wv=0;function gt(){throw Error(r(321))}function Gd(s,n){if(n===null)return!1;for(var i=0;i<n.length&&i<s.length;i++)if(!cs(s[i],n[i]))return!1;return!0}function Kd(s,n,i,c,u,f){return Da=f,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_.H=s===null||s.memoizedState===null?Lx:Fx,On=!1,f=i(c,u),On=!1,bl&&(f=Jh(n,i,c,u)),Zh(s),f}function Zh(s){_.H=uo;var n=nt!==null&&nt.next!==null;if(Da=0,wt=nt=Ue=null,ao=!1,Rr=0,yl=null,n)throw Error(r(300));s===null||Et||(s=s.dependencies,s!==null&&Xi(s)&&(Et=!0))}function Jh(s,n,i,c){Ue=s;var u=0;do{if(bl&&(yl=null),Rr=0,bl=!1,25<=u)throw Error(r(301));if(u+=1,wt=nt=null,s.updateQueue!=null){var f=s.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}_.H=Ev,f=n(i,c)}while(bl);return f}function vv(){var s=_.H,n=s.useState()[0];return n=typeof n.then=="function"?Tr(n):n,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(Ue.flags|=1024),n}function Vd(){var s=no!==0;return no=0,s}function Yd(s,n,i){n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~i}function Wd(s){if(ao){for(s=s.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}ao=!1}Da=0,wt=nt=Ue=null,bl=!1,Rr=no=0,yl=null}function Xt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ue.memoizedState=wt=s:wt=wt.next=s,wt}function vt(){if(nt===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var n=wt===null?Ue.memoizedState:wt.next;if(n!==null)wt=n,nt=s;else{if(s===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},wt===null?Ue.memoizedState=wt=s:wt=wt.next=s}return wt}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tr(s){var n=Rr;return Rr+=1,yl===null&&(yl=[]),s=Gh(yl,s,n),n=Ue,(wt===null?n.memoizedState:wt.next)===null&&(n=n.alternate,_.H=n===null||n.memoizedState===null?Lx:Fx),s}function lo(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tr(s);if(s.$$typeof===N)return qt(s)}throw Error(r(438,String(s)))}function Zd(s){var n=null,i=Ue.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Xd(),Ue.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(s),c=0;c<s;c++)i[c]=de;return n.index++,i}function ua(s,n){return typeof n=="function"?n(s):n}function ro(s){var n=vt();return Jd(n,nt,s)}function Jd(s,n,i){var c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var u=s.baseQueue,f=c.pending;if(f!==null){if(u!==null){var k=u.next;u.next=f.next,f.next=k}n.baseQueue=u=f,c.pending=null}if(f=s.baseState,u===null)s.memoizedState=f;else{n=u.next;var R=k=null,I=null,ne=n,he=!1;do{var pe=ne.lane&-536870913;if(pe!==ne.lane?(Ke&pe)===pe:(Da&pe)===pe){var re=ne.revertLane;if(re===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),pe===xl&&(he=!0);else if((Da&re)===re){ne=ne.next,re===xl&&(he=!0);continue}else pe={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},I===null?(R=I=pe,k=f):I=I.next=pe,Ue.lanes|=re,Ba|=re;pe=ne.action,On&&i(f,pe),f=ne.hasEagerState?ne.eagerState:i(f,pe)}else re={lane:pe,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},I===null?(R=I=re,k=f):I=I.next=re,Ue.lanes|=pe,Ba|=pe;ne=ne.next}while(ne!==null&&ne!==n);if(I===null?k=f:I.next=R,!cs(f,s.memoizedState)&&(Et=!0,he&&(i=pl,i!==null)))throw i;s.memoizedState=f,s.baseState=k,s.baseQueue=I,c.lastRenderedState=f}return u===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function eu(s){var n=vt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=s;var c=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var k=u=u.next;do f=s(f,k.action),k=k.next;while(k!==u);cs(f,n.memoizedState)||(Et=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,c]}function ex(s,n,i){var c=Ue,u=vt(),f=We;if(f){if(i===void 0)throw Error(r(407));i=i()}else i=n();var k=!cs((nt||u).memoizedState,i);k&&(u.memoizedState=i,Et=!0),u=u.queue;var R=ax.bind(null,c,u,s);if(Pr(2048,8,R,[s]),u.getSnapshot!==n||k||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,wl(9,io(),sx.bind(null,c,u,i,n),null),ot===null)throw Error(r(349));f||(Da&124)!==0||tx(c,n,i)}return i}function tx(s,n,i){s.flags|=16384,s={getSnapshot:n,value:i},n=Ue.updateQueue,n===null?(n=Xd(),Ue.updateQueue=n,n.stores=[s]):(i=n.stores,i===null?n.stores=[s]:i.push(s))}function sx(s,n,i,c){n.value=i,n.getSnapshot=c,nx(n)&&lx(s)}function ax(s,n,i){return i(function(){nx(n)&&lx(s)})}function nx(s){var n=s.getSnapshot;s=s.value;try{var i=n();return!cs(s,i)}catch{return!0}}function lx(s){var n=ul(s,2);n!==null&&xs(n,s,2)}function tu(s){var n=Xt();if(typeof s=="function"){var i=s;if(s=i(),On){Oa(!0);try{i()}finally{Oa(!1)}}}return n.memoizedState=n.baseState=s,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:s},n}function rx(s,n,i,c){return s.baseState=i,Jd(s,nt,typeof c=="function"?c:ua)}function jv(s,n,i,c,u){if(co(s))throw Error(r(485));if(s=n.action,s!==null){var f={payload:u,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){f.listeners.push(k)}};_.T!==null?i(!0):f.isTransition=!1,c(f),i=n.pending,i===null?(f.next=n.pending=f,ix(n,f)):(f.next=i.next,n.pending=i.next=f)}}function ix(s,n){var i=n.action,c=n.payload,u=s.state;if(n.isTransition){var f=_.T,k={};_.T=k;try{var R=i(u,c),I=_.S;I!==null&&I(k,R),ox(s,n,R)}catch(ne){su(s,n,ne)}finally{_.T=f}}else try{f=i(u,c),ox(s,n,f)}catch(ne){su(s,n,ne)}}function ox(s,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){cx(s,n,c)},function(c){return su(s,n,c)}):cx(s,n,i)}function cx(s,n,i){n.status="fulfilled",n.value=i,dx(n),s.state=i,n=s.pending,n!==null&&(i=n.next,i===n?s.pending=null:(i=i.next,n.next=i,ix(s,i)))}function su(s,n,i){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,dx(n),n=n.next;while(n!==c)}s.action=null}function dx(s){s=s.listeners;for(var n=0;n<s.length;n++)(0,s[n])()}function ux(s,n){return n}function mx(s,n){if(We){var i=ot.formState;if(i!==null){e:{var c=Ue;if(We){if(ht){t:{for(var u=ht,f=Gs;u.nodeType!==8;){if(!f){u=null;break t}if(u=_s(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){ht=_s(u.nextSibling),c=u.data==="F!";break e}}Cn(c)}c=!1}c&&(n=i[0])}}return i=Xt(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ux,lastRenderedState:n},i.queue=c,i=Tx.bind(null,Ue,c),c.dispatch=i,c=tu(!1),f=iu.bind(null,Ue,!1,c.queue),c=Xt(),u={state:n,dispatch:null,action:s,pending:null},c.queue=u,i=jv.bind(null,Ue,u,f,i),u.dispatch=i,c.memoizedState=s,[n,i,!1]}function fx(s){var n=vt();return hx(n,nt,s)}function hx(s,n,i){if(n=Jd(s,n,ux)[0],s=ro(ua)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Tr(n)}catch(k){throw k===Cr?eo:k}else c=n;n=vt();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(Ue.flags|=2048,wl(9,io(),Nv.bind(null,u,i),null)),[c,f,s]}function Nv(s,n){s.action=n}function xx(s){var n=vt(),i=nt;if(i!==null)return hx(n,i,s);vt(),n=n.memoizedState,i=vt();var c=i.queue.dispatch;return i.memoizedState=s,[n,c,!1]}function wl(s,n,i,c){return s={tag:s,create:i,deps:c,inst:n,next:null},n=Ue.updateQueue,n===null&&(n=Xd(),Ue.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=s.next=s:(c=i.next,i.next=s,s.next=c,n.lastEffect=s),s}function io(){return{destroy:void 0,resource:void 0}}function px(){return vt().memoizedState}function oo(s,n,i,c){var u=Xt();c=c===void 0?null:c,Ue.flags|=s,u.memoizedState=wl(1|n,io(),i,c)}function Pr(s,n,i,c){var u=vt();c=c===void 0?null:c;var f=u.memoizedState.inst;nt!==null&&c!==null&&Gd(c,nt.memoizedState.deps)?u.memoizedState=wl(n,f,i,c):(Ue.flags|=s,u.memoizedState=wl(1|n,f,i,c))}function gx(s,n){oo(8390656,8,s,n)}function bx(s,n){Pr(2048,8,s,n)}function yx(s,n){return Pr(4,2,s,n)}function wx(s,n){return Pr(4,4,s,n)}function vx(s,n){if(typeof n=="function"){s=s();var i=n(s);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return s=s(),n.current=s,function(){n.current=null}}function jx(s,n,i){i=i!=null?i.concat([s]):null,Pr(4,4,vx.bind(null,n,s),i)}function au(){}function Nx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&Gd(n,c[1])?c[0]:(i.memoizedState=[s,n],s)}function Sx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&Gd(n,c[1]))return c[0];if(c=s(),On){Oa(!0);try{s()}finally{Oa(!1)}}return i.memoizedState=[c,n],c}function nu(s,n,i){return i===void 0||(Da&1073741824)!==0?s.memoizedState=n:(s.memoizedState=i,s=Ep(),Ue.lanes|=s,Ba|=s,i)}function Cx(s,n,i,c){return cs(i,n)?i:gl.current!==null?(s=nu(s,i,c),cs(s,n)||(Et=!0),s):(Da&42)===0?(Et=!0,s.memoizedState=i):(s=Ep(),Ue.lanes|=s,Ba|=s,n)}function kx(s,n,i,c,u){var f=W.p;W.p=f!==0&&8>f?f:8;var k=_.T,R={};_.T=R,iu(s,!1,n,i);try{var I=u(),ne=_.S;if(ne!==null&&ne(R,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var he=yv(I,c);Mr(s,n,he,hs(s))}else Mr(s,n,c,hs(s))}catch(pe){Mr(s,n,{then:function(){},status:"rejected",reason:pe},hs())}finally{W.p=f,_.T=k}}function Sv(){}function lu(s,n,i,c){if(s.tag!==5)throw Error(r(476));var u=Ex(s).queue;kx(s,u,n,me,i===null?Sv:function(){return Ax(s),i(c)})}function Ex(s){var n=s.memoizedState;if(n!==null)return n;n={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:me},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:i},next:null},s.memoizedState=n,s=s.alternate,s!==null&&(s.memoizedState=n),n}function Ax(s){var n=Ex(s).next.queue;Mr(s,n,{},hs())}function ru(){return qt(Xr)}function Ox(){return vt().memoizedState}function Rx(){return vt().memoizedState}function Cv(s){for(var n=s.return;n!==null;){switch(n.tag){case 24:case 3:var i=hs();s=La(i);var c=Fa(n,s,i);c!==null&&(xs(c,n,i),Er(c,n,i)),n={cache:Dd()},s.payload=n;return}n=n.return}}function kv(s,n,i){var c=hs();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},co(s)?Px(n,i):(i=kd(s,n,i,c),i!==null&&(xs(i,s,c),Mx(i,n,c)))}function Tx(s,n,i){var c=hs();Mr(s,n,i,c)}function Mr(s,n,i,c){var u={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(co(s))Px(n,u);else{var f=s.alternate;if(s.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var k=n.lastRenderedState,R=f(k,i);if(u.hasEagerState=!0,u.eagerState=R,cs(R,k))return Gi(s,n,u,0),ot===null&&Qi(),!1}catch{}finally{}if(i=kd(s,n,u,c),i!==null)return xs(i,s,c),Mx(i,n,c),!0}return!1}function iu(s,n,i,c){if(c={lane:2,revertLane:zu(),action:c,hasEagerState:!1,eagerState:null,next:null},co(s)){if(n)throw Error(r(479))}else n=kd(s,i,c,2),n!==null&&xs(n,s,2)}function co(s){var n=s.alternate;return s===Ue||n!==null&&n===Ue}function Px(s,n){bl=ao=!0;var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}function Mx(s,n,i){if((i&4194048)!==0){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,If(s,i)}}var uo={readContext:qt,use:lo,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},Lx={readContext:qt,use:lo,useCallback:function(s,n){return Xt().memoizedState=[s,n===void 0?null:n],s},useContext:qt,useEffect:gx,useImperativeHandle:function(s,n,i){i=i!=null?i.concat([s]):null,oo(4194308,4,vx.bind(null,n,s),i)},useLayoutEffect:function(s,n){return oo(4194308,4,s,n)},useInsertionEffect:function(s,n){oo(4,2,s,n)},useMemo:function(s,n){var i=Xt();n=n===void 0?null:n;var c=s();if(On){Oa(!0);try{s()}finally{Oa(!1)}}return i.memoizedState=[c,n],c},useReducer:function(s,n,i){var c=Xt();if(i!==void 0){var u=i(n);if(On){Oa(!0);try{i(n)}finally{Oa(!1)}}}else u=n;return c.memoizedState=c.baseState=u,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},c.queue=s,s=s.dispatch=kv.bind(null,Ue,s),[c.memoizedState,s]},useRef:function(s){var n=Xt();return s={current:s},n.memoizedState=s},useState:function(s){s=tu(s);var n=s.queue,i=Tx.bind(null,Ue,n);return n.dispatch=i,[s.memoizedState,i]},useDebugValue:au,useDeferredValue:function(s,n){var i=Xt();return nu(i,s,n)},useTransition:function(){var s=tu(!1);return s=kx.bind(null,Ue,s.queue,!0,!1),Xt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,n,i){var c=Ue,u=Xt();if(We){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),ot===null)throw Error(r(349));(Ke&124)!==0||tx(c,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,gx(ax.bind(null,c,f,s),[s]),c.flags|=2048,wl(9,io(),sx.bind(null,c,f,i,n),null),i},useId:function(){var s=Xt(),n=ot.identifierPrefix;if(We){var i=oa,c=ia;i=(c&~(1<<32-os(c)-1)).toString(32)+i,n="«"+n+"R"+i,i=no++,0<i&&(n+="H"+i.toString(32)),n+="»"}else i=wv++,n="«"+n+"r"+i.toString(32)+"»";return s.memoizedState=n},useHostTransitionStatus:ru,useFormState:mx,useActionState:mx,useOptimistic:function(s){var n=Xt();n.memoizedState=n.baseState=s;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=iu.bind(null,Ue,!0,i),i.dispatch=n,[s,n]},useMemoCache:Zd,useCacheRefresh:function(){return Xt().memoizedState=Cv.bind(null,Ue)}},Fx={readContext:qt,use:lo,useCallback:Nx,useContext:qt,useEffect:bx,useImperativeHandle:jx,useInsertionEffect:yx,useLayoutEffect:wx,useMemo:Sx,useReducer:ro,useRef:px,useState:function(){return ro(ua)},useDebugValue:au,useDeferredValue:function(s,n){var i=vt();return Cx(i,nt.memoizedState,s,n)},useTransition:function(){var s=ro(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tr(s),n]},useSyncExternalStore:ex,useId:Ox,useHostTransitionStatus:ru,useFormState:fx,useActionState:fx,useOptimistic:function(s,n){var i=vt();return rx(i,nt,s,n)},useMemoCache:Zd,useCacheRefresh:Rx},Ev={readContext:qt,use:lo,useCallback:Nx,useContext:qt,useEffect:bx,useImperativeHandle:jx,useInsertionEffect:yx,useLayoutEffect:wx,useMemo:Sx,useReducer:eu,useRef:px,useState:function(){return eu(ua)},useDebugValue:au,useDeferredValue:function(s,n){var i=vt();return nt===null?nu(i,s,n):Cx(i,nt.memoizedState,s,n)},useTransition:function(){var s=eu(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tr(s),n]},useSyncExternalStore:ex,useId:Ox,useHostTransitionStatus:ru,useFormState:xx,useActionState:xx,useOptimistic:function(s,n){var i=vt();return nt!==null?rx(i,nt,s,n):(i.baseState=s,[s,i.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:Rx},vl=null,Lr=0;function mo(s){var n=Lr;return Lr+=1,vl===null&&(vl=[]),Gh(vl,s,n)}function Fr(s,n){n=n.props.ref,s.ref=n!==void 0?n:null}function fo(s,n){throw n.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(n),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s)))}function Dx(s){var n=s._init;return n(s._payload)}function _x(s){function n(J,G){if(s){var se=J.deletions;se===null?(J.deletions=[G],J.flags|=16):se.push(G)}}function i(J,G){if(!s)return null;for(;G!==null;)n(J,G),G=G.sibling;return null}function c(J){for(var G=new Map;J!==null;)J.key!==null?G.set(J.key,J):G.set(J.index,J),J=J.sibling;return G}function u(J,G){return J=ra(J,G),J.index=0,J.sibling=null,J}function f(J,G,se){return J.index=se,s?(se=J.alternate,se!==null?(se=se.index,se<G?(J.flags|=67108866,G):se):(J.flags|=67108866,G)):(J.flags|=1048576,G)}function k(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function R(J,G,se,xe){return G===null||G.tag!==6?(G=Ad(se,J.mode,xe),G.return=J,G):(G=u(G,se),G.return=J,G)}function I(J,G,se,xe){var je=se.type;return je===b?he(J,G,se.props.children,xe,se.key):G!==null&&(G.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&Dx(je)===G.type)?(G=u(G,se.props),Fr(G,se),G.return=J,G):(G=Vi(se.type,se.key,se.props,null,J.mode,xe),Fr(G,se),G.return=J,G)}function ne(J,G,se,xe){return G===null||G.tag!==4||G.stateNode.containerInfo!==se.containerInfo||G.stateNode.implementation!==se.implementation?(G=Od(se,J.mode,xe),G.return=J,G):(G=u(G,se.children||[]),G.return=J,G)}function he(J,G,se,xe,je){return G===null||G.tag!==7?(G=vn(se,J.mode,xe,je),G.return=J,G):(G=u(G,se),G.return=J,G)}function pe(J,G,se){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ad(""+G,J.mode,se),G.return=J,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return se=Vi(G.type,G.key,G.props,null,J.mode,se),Fr(se,G),se.return=J,se;case C:return G=Od(G,J.mode,se),G.return=J,G;case q:var xe=G._init;return G=xe(G._payload),pe(J,G,se)}if(le(G)||$(G))return G=vn(G,J.mode,se,null),G.return=J,G;if(typeof G.then=="function")return pe(J,mo(G),se);if(G.$$typeof===N)return pe(J,Zi(J,G),se);fo(J,G)}return null}function re(J,G,se,xe){var je=G!==null?G.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return je!==null?null:R(J,G,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case j:return se.key===je?I(J,G,se,xe):null;case C:return se.key===je?ne(J,G,se,xe):null;case q:return je=se._init,se=je(se._payload),re(J,G,se,xe)}if(le(se)||$(se))return je!==null?null:he(J,G,se,xe,null);if(typeof se.then=="function")return re(J,G,mo(se),xe);if(se.$$typeof===N)return re(J,G,Zi(J,se),xe);fo(J,se)}return null}function oe(J,G,se,xe,je){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return J=J.get(se)||null,R(G,J,""+xe,je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case j:return J=J.get(xe.key===null?se:xe.key)||null,I(G,J,xe,je);case C:return J=J.get(xe.key===null?se:xe.key)||null,ne(G,J,xe,je);case q:var Ie=xe._init;return xe=Ie(xe._payload),oe(J,G,se,xe,je)}if(le(xe)||$(xe))return J=J.get(se)||null,he(G,J,xe,je,null);if(typeof xe.then=="function")return oe(J,G,se,mo(xe),je);if(xe.$$typeof===N)return oe(J,G,se,Zi(G,xe),je);fo(G,xe)}return null}function Pe(J,G,se,xe){for(var je=null,Ie=null,Ce=G,Re=G=0,Ot=null;Ce!==null&&Re<se.length;Re++){Ce.index>Re?(Ot=Ce,Ce=null):Ot=Ce.sibling;var Ye=re(J,Ce,se[Re],xe);if(Ye===null){Ce===null&&(Ce=Ot);break}s&&Ce&&Ye.alternate===null&&n(J,Ce),G=f(Ye,G,Re),Ie===null?je=Ye:Ie.sibling=Ye,Ie=Ye,Ce=Ot}if(Re===se.length)return i(J,Ce),We&&Nn(J,Re),je;if(Ce===null){for(;Re<se.length;Re++)Ce=pe(J,se[Re],xe),Ce!==null&&(G=f(Ce,G,Re),Ie===null?je=Ce:Ie.sibling=Ce,Ie=Ce);return We&&Nn(J,Re),je}for(Ce=c(Ce);Re<se.length;Re++)Ot=oe(Ce,J,Re,se[Re],xe),Ot!==null&&(s&&Ot.alternate!==null&&Ce.delete(Ot.key===null?Re:Ot.key),G=f(Ot,G,Re),Ie===null?je=Ot:Ie.sibling=Ot,Ie=Ot);return s&&Ce.forEach(function(Za){return n(J,Za)}),We&&Nn(J,Re),je}function Oe(J,G,se,xe){if(se==null)throw Error(r(151));for(var je=null,Ie=null,Ce=G,Re=G=0,Ot=null,Ye=se.next();Ce!==null&&!Ye.done;Re++,Ye=se.next()){Ce.index>Re?(Ot=Ce,Ce=null):Ot=Ce.sibling;var Za=re(J,Ce,Ye.value,xe);if(Za===null){Ce===null&&(Ce=Ot);break}s&&Ce&&Za.alternate===null&&n(J,Ce),G=f(Za,G,Re),Ie===null?je=Za:Ie.sibling=Za,Ie=Za,Ce=Ot}if(Ye.done)return i(J,Ce),We&&Nn(J,Re),je;if(Ce===null){for(;!Ye.done;Re++,Ye=se.next())Ye=pe(J,Ye.value,xe),Ye!==null&&(G=f(Ye,G,Re),Ie===null?je=Ye:Ie.sibling=Ye,Ie=Ye);return We&&Nn(J,Re),je}for(Ce=c(Ce);!Ye.done;Re++,Ye=se.next())Ye=oe(Ce,J,Re,Ye.value,xe),Ye!==null&&(s&&Ye.alternate!==null&&Ce.delete(Ye.key===null?Re:Ye.key),G=f(Ye,G,Re),Ie===null?je=Ye:Ie.sibling=Ye,Ie=Ye);return s&&Ce.forEach(function(Aj){return n(J,Aj)}),We&&Nn(J,Re),je}function rt(J,G,se,xe){if(typeof se=="object"&&se!==null&&se.type===b&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case j:e:{for(var je=se.key;G!==null;){if(G.key===je){if(je=se.type,je===b){if(G.tag===7){i(J,G.sibling),xe=u(G,se.props.children),xe.return=J,J=xe;break e}}else if(G.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&Dx(je)===G.type){i(J,G.sibling),xe=u(G,se.props),Fr(xe,se),xe.return=J,J=xe;break e}i(J,G);break}else n(J,G);G=G.sibling}se.type===b?(xe=vn(se.props.children,J.mode,xe,se.key),xe.return=J,J=xe):(xe=Vi(se.type,se.key,se.props,null,J.mode,xe),Fr(xe,se),xe.return=J,J=xe)}return k(J);case C:e:{for(je=se.key;G!==null;){if(G.key===je)if(G.tag===4&&G.stateNode.containerInfo===se.containerInfo&&G.stateNode.implementation===se.implementation){i(J,G.sibling),xe=u(G,se.children||[]),xe.return=J,J=xe;break e}else{i(J,G);break}else n(J,G);G=G.sibling}xe=Od(se,J.mode,xe),xe.return=J,J=xe}return k(J);case q:return je=se._init,se=je(se._payload),rt(J,G,se,xe)}if(le(se))return Pe(J,G,se,xe);if($(se)){if(je=$(se),typeof je!="function")throw Error(r(150));return se=je.call(se),Oe(J,G,se,xe)}if(typeof se.then=="function")return rt(J,G,mo(se),xe);if(se.$$typeof===N)return rt(J,G,Zi(J,se),xe);fo(J,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,G!==null&&G.tag===6?(i(J,G.sibling),xe=u(G,se),xe.return=J,J=xe):(i(J,G),xe=Ad(se,J.mode,xe),xe.return=J,J=xe),k(J)):i(J,G)}return function(J,G,se,xe){try{Lr=0;var je=rt(J,G,se,xe);return vl=null,je}catch(Ce){if(Ce===Cr||Ce===eo)throw Ce;var Ie=ds(29,Ce,null,J.mode);return Ie.lanes=xe,Ie.return=J,Ie}finally{}}}var jl=_x(!0),qx=_x(!1),As=U(null),Ks=null;function _a(s){var n=s.alternate;K(St,St.current&1),K(As,s),Ks===null&&(n===null||gl.current!==null||n.memoizedState!==null)&&(Ks=s)}function zx(s){if(s.tag===22){if(K(St,St.current),K(As,s),Ks===null){var n=s.alternate;n!==null&&n.memoizedState!==null&&(Ks=s)}}else qa()}function qa(){K(St,St.current),K(As,As.current)}function ma(s){D(As),Ks===s&&(Ks=null),D(St)}var St=U(0);function ho(s){for(var n=s;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Xu(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function ou(s,n,i,c){n=s.memoizedState,i=i(c,n),i=i==null?n:g({},n,i),s.memoizedState=i,s.lanes===0&&(s.updateQueue.baseState=i)}var cu={enqueueSetState:function(s,n,i){s=s._reactInternals;var c=hs(),u=La(c);u.payload=n,i!=null&&(u.callback=i),n=Fa(s,u,c),n!==null&&(xs(n,s,c),Er(n,s,c))},enqueueReplaceState:function(s,n,i){s=s._reactInternals;var c=hs(),u=La(c);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Fa(s,u,c),n!==null&&(xs(n,s,c),Er(n,s,c))},enqueueForceUpdate:function(s,n){s=s._reactInternals;var i=hs(),c=La(i);c.tag=2,n!=null&&(c.callback=n),n=Fa(s,c,i),n!==null&&(xs(n,s,i),Er(n,s,i))}};function Ux(s,n,i,c,u,f,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,f,k):n.prototype&&n.prototype.isPureReactComponent?!gr(i,c)||!gr(u,f):!0}function Ix(s,n,i,c){s=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==s&&cu.enqueueReplaceState(n,n.state,null)}function Rn(s,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(s=s.defaultProps){i===n&&(i=g({},i));for(var u in s)i[u]===void 0&&(i[u]=s[u])}return i}var xo=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function $x(s){xo(s)}function Bx(s){console.error(s)}function Hx(s){xo(s)}function po(s,n){try{var i=s.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function Qx(s,n,i){try{var c=s.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function du(s,n,i){return i=La(i),i.tag=3,i.payload={element:null},i.callback=function(){po(s,n)},i}function Gx(s){return s=La(s),s.tag=3,s}function Kx(s,n,i,c){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=c.value;s.payload=function(){return u(f)},s.callback=function(){Qx(n,i,c)}}var k=i.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(s.callback=function(){Qx(n,i,c),typeof u!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function Av(s,n,i,c,u){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&jr(n,i,u,!0),i=As.current,i!==null){switch(i.tag){case 13:return Ks===null?Lu():i.alternate===null&&xt===0&&(xt=3),i.flags&=-257,i.flags|=65536,i.lanes=u,c===zd?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),Du(s,c,u)),!1;case 22:return i.flags|=65536,c===zd?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),Du(s,c,u)),!1}throw Error(r(435,i.tag))}return Du(s,c,u),Lu(),!1}if(We)return n=As.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,c!==Pd&&(s=Error(r(422),{cause:c}),vr(Ss(s,i)))):(c!==Pd&&(n=Error(r(423),{cause:c}),vr(Ss(n,i))),s=s.current.alternate,s.flags|=65536,u&=-u,s.lanes|=u,c=Ss(c,i),u=du(s.stateNode,c,u),$d(s,u),xt!==4&&(xt=2)),!1;var f=Error(r(520),{cause:c});if(f=Ss(f,i),$r===null?$r=[f]:$r.push(f),xt!==4&&(xt=2),n===null)return!0;c=Ss(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,s=u&-u,i.lanes|=s,s=du(i.stateNode,c,s),$d(i,s),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ha===null||!Ha.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Gx(u),Kx(u,s,i,c),$d(i,u),!1}i=i.return}while(i!==null);return!1}var Vx=Error(r(461)),Et=!1;function Rt(s,n,i,c){n.child=s===null?qx(n,null,i,c):jl(n,s.child,i,c)}function Yx(s,n,i,c,u){i=i.render;var f=n.ref;if("ref"in c){var k={};for(var R in c)R!=="ref"&&(k[R]=c[R])}else k=c;return En(n),c=Kd(s,n,i,k,f,u),R=Vd(),s!==null&&!Et?(Yd(s,n,u),fa(s,n,u)):(We&&R&&Rd(n),n.flags|=1,Rt(s,n,c,u),n.child)}function Wx(s,n,i,c,u){if(s===null){var f=i.type;return typeof f=="function"&&!Ed(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,Xx(s,n,f,c,u)):(s=Vi(i.type,null,c,n,n.mode,u),s.ref=n.ref,s.return=n,n.child=s)}if(f=s.child,!bu(s,u)){var k=f.memoizedProps;if(i=i.compare,i=i!==null?i:gr,i(k,c)&&s.ref===n.ref)return fa(s,n,u)}return n.flags|=1,s=ra(f,c),s.ref=n.ref,s.return=n,n.child=s}function Xx(s,n,i,c,u){if(s!==null){var f=s.memoizedProps;if(gr(f,c)&&s.ref===n.ref)if(Et=!1,n.pendingProps=c=f,bu(s,u))(s.flags&131072)!==0&&(Et=!0);else return n.lanes=s.lanes,fa(s,n,u)}return uu(s,n,i,c,u)}function Zx(s,n,i){var c=n.pendingProps,u=c.children,f=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((n.flags&128)!==0){if(c=f!==null?f.baseLanes|i:i,s!==null){for(u=n.child=s.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;n.childLanes=f&~c}else n.childLanes=0,n.child=null;return Jx(s,n,c,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ji(n,f!==null?f.cachePool:null),f!==null?Xh(n,f):Hd(),zx(n);else return n.lanes=n.childLanes=536870912,Jx(s,n,f!==null?f.baseLanes|i:i,i)}else f!==null?(Ji(n,f.cachePool),Xh(n,f),qa(),n.memoizedState=null):(s!==null&&Ji(n,null),Hd(),qa());return Rt(s,n,u,i),n.child}function Jx(s,n,i,c){var u=qd();return u=u===null?null:{parent:Nt._currentValue,pool:u},n.memoizedState={baseLanes:i,cachePool:u},s!==null&&Ji(n,null),Hd(),zx(n),s!==null&&jr(s,n,c,!0),null}function go(s,n){var i=n.ref;if(i===null)s!==null&&s.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(s===null||s.ref!==i)&&(n.flags|=4194816)}}function uu(s,n,i,c,u){return En(n),i=Kd(s,n,i,c,void 0,u),c=Vd(),s!==null&&!Et?(Yd(s,n,u),fa(s,n,u)):(We&&c&&Rd(n),n.flags|=1,Rt(s,n,i,u),n.child)}function ep(s,n,i,c,u,f){return En(n),n.updateQueue=null,i=Jh(n,c,i,u),Zh(s),c=Vd(),s!==null&&!Et?(Yd(s,n,f),fa(s,n,f)):(We&&c&&Rd(n),n.flags|=1,Rt(s,n,i,f),n.child)}function tp(s,n,i,c,u){if(En(n),n.stateNode===null){var f=ml,k=i.contextType;typeof k=="object"&&k!==null&&(f=qt(k)),f=new i(c,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=cu,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=c,f.state=n.memoizedState,f.refs={},Ud(n),k=i.contextType,f.context=typeof k=="object"&&k!==null?qt(k):ml,f.state=n.memoizedState,k=i.getDerivedStateFromProps,typeof k=="function"&&(ou(n,i,k,c),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(k=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),k!==f.state&&cu.enqueueReplaceState(f,f.state,null),Or(n,c,f,u),Ar(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(s===null){f=n.stateNode;var R=n.memoizedProps,I=Rn(i,R);f.props=I;var ne=f.context,he=i.contextType;k=ml,typeof he=="object"&&he!==null&&(k=qt(he));var pe=i.getDerivedStateFromProps;he=typeof pe=="function"||typeof f.getSnapshotBeforeUpdate=="function",R=n.pendingProps!==R,he||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(R||ne!==k)&&Ix(n,f,c,k),Ma=!1;var re=n.memoizedState;f.state=re,Or(n,c,f,u),Ar(),ne=n.memoizedState,R||re!==ne||Ma?(typeof pe=="function"&&(ou(n,i,pe,c),ne=n.memoizedState),(I=Ma||Ux(n,i,I,c,re,ne,k))?(he||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=ne),f.props=c,f.state=ne,f.context=k,c=I):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{f=n.stateNode,Id(s,n),k=n.memoizedProps,he=Rn(i,k),f.props=he,pe=n.pendingProps,re=f.context,ne=i.contextType,I=ml,typeof ne=="object"&&ne!==null&&(I=qt(ne)),R=i.getDerivedStateFromProps,(ne=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(k!==pe||re!==I)&&Ix(n,f,c,I),Ma=!1,re=n.memoizedState,f.state=re,Or(n,c,f,u),Ar();var oe=n.memoizedState;k!==pe||re!==oe||Ma||s!==null&&s.dependencies!==null&&Xi(s.dependencies)?(typeof R=="function"&&(ou(n,i,R,c),oe=n.memoizedState),(he=Ma||Ux(n,i,he,c,re,oe,I)||s!==null&&s.dependencies!==null&&Xi(s.dependencies))?(ne||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,oe,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,oe,I)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=oe),f.props=c,f.state=oe,f.context=I,c=he):(typeof f.componentDidUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(n.flags|=1024),c=!1)}return f=c,go(s,n),c=(n.flags&128)!==0,f||c?(f=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,s!==null&&c?(n.child=jl(n,s.child,null,u),n.child=jl(n,null,i,u)):Rt(s,n,i,u),n.memoizedState=f.state,s=n.child):s=fa(s,n,u),s}function sp(s,n,i,c){return wr(),n.flags|=256,Rt(s,n,i,c),n.child}var mu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(s){return{baseLanes:s,cachePool:Bh()}}function hu(s,n,i){return s=s!==null?s.childLanes&~i:0,n&&(s|=Os),s}function ap(s,n,i){var c=n.pendingProps,u=!1,f=(n.flags&128)!==0,k;if((k=f)||(k=s!==null&&s.memoizedState===null?!1:(St.current&2)!==0),k&&(u=!0,n.flags&=-129),k=(n.flags&32)!==0,n.flags&=-33,s===null){if(We){if(u?_a(n):qa(),We){var R=ht,I;if(I=R){e:{for(I=R,R=Gs;I.nodeType!==8;){if(!R){R=null;break e}if(I=_s(I.nextSibling),I===null){R=null;break e}}R=I}R!==null?(n.memoizedState={dehydrated:R,treeContext:jn!==null?{id:ia,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},I=ds(18,null,null,0),I.stateNode=R,I.return=n,n.child=I,Ht=n,ht=null,I=!0):I=!1}I||Cn(n)}if(R=n.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return Xu(R)?n.lanes=32:n.lanes=536870912,null;ma(n)}return R=c.children,c=c.fallback,u?(qa(),u=n.mode,R=bo({mode:"hidden",children:R},u),c=vn(c,u,i,null),R.return=n,c.return=n,R.sibling=c,n.child=R,u=n.child,u.memoizedState=fu(i),u.childLanes=hu(s,k,i),n.memoizedState=mu,c):(_a(n),xu(n,R))}if(I=s.memoizedState,I!==null&&(R=I.dehydrated,R!==null)){if(f)n.flags&256?(_a(n),n.flags&=-257,n=pu(s,n,i)):n.memoizedState!==null?(qa(),n.child=s.child,n.flags|=128,n=null):(qa(),u=c.fallback,R=n.mode,c=bo({mode:"visible",children:c.children},R),u=vn(u,R,i,null),u.flags|=2,c.return=n,u.return=n,c.sibling=u,n.child=c,jl(n,s.child,null,i),c=n.child,c.memoizedState=fu(i),c.childLanes=hu(s,k,i),n.memoizedState=mu,n=u);else if(_a(n),Xu(R)){if(k=R.nextSibling&&R.nextSibling.dataset,k)var ne=k.dgst;k=ne,c=Error(r(419)),c.stack="",c.digest=k,vr({value:c,source:null,stack:null}),n=pu(s,n,i)}else if(Et||jr(s,n,i,!1),k=(i&s.childLanes)!==0,Et||k){if(k=ot,k!==null&&(c=i&-i,c=(c&42)!==0?1:Zc(c),c=(c&(k.suspendedLanes|i))!==0?0:c,c!==0&&c!==I.retryLane))throw I.retryLane=c,ul(s,c),xs(k,s,c),Vx;R.data==="$?"||Lu(),n=pu(s,n,i)}else R.data==="$?"?(n.flags|=192,n.child=s.child,n=null):(s=I.treeContext,ht=_s(R.nextSibling),Ht=n,We=!0,Sn=null,Gs=!1,s!==null&&(ks[Es++]=ia,ks[Es++]=oa,ks[Es++]=jn,ia=s.id,oa=s.overflow,jn=n),n=xu(n,c.children),n.flags|=4096);return n}return u?(qa(),u=c.fallback,R=n.mode,I=s.child,ne=I.sibling,c=ra(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,ne!==null?u=ra(ne,u):(u=vn(u,R,i,null),u.flags|=2),u.return=n,c.return=n,c.sibling=u,n.child=c,c=u,u=n.child,R=s.child.memoizedState,R===null?R=fu(i):(I=R.cachePool,I!==null?(ne=Nt._currentValue,I=I.parent!==ne?{parent:ne,pool:ne}:I):I=Bh(),R={baseLanes:R.baseLanes|i,cachePool:I}),u.memoizedState=R,u.childLanes=hu(s,k,i),n.memoizedState=mu,c):(_a(n),i=s.child,s=i.sibling,i=ra(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,s!==null&&(k=n.deletions,k===null?(n.deletions=[s],n.flags|=16):k.push(s)),n.child=i,n.memoizedState=null,i)}function xu(s,n){return n=bo({mode:"visible",children:n},s.mode),n.return=s,s.child=n}function bo(s,n){return s=ds(22,s,null,n),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function pu(s,n,i){return jl(n,s.child,null,i),s=xu(n,n.pendingProps.children),s.flags|=2,n.memoizedState=null,s}function np(s,n,i){s.lanes|=n;var c=s.alternate;c!==null&&(c.lanes|=n),Ld(s.return,n,i)}function gu(s,n,i,c,u){var f=s.memoizedState;f===null?s.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:u}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=i,f.tailMode=u)}function lp(s,n,i){var c=n.pendingProps,u=c.revealOrder,f=c.tail;if(Rt(s,n,c.children,i),c=St.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=n.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&np(s,i,n);else if(s.tag===19)np(s,i,n);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(K(St,c),u){case"forwards":for(i=n.child,u=null;i!==null;)s=i.alternate,s!==null&&ho(s)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),gu(n,!1,u,i,f);break;case"backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(s=u.alternate,s!==null&&ho(s)===null){n.child=u;break}s=u.sibling,u.sibling=i,i=u,u=s}gu(n,!0,i,null,f);break;case"together":gu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fa(s,n,i){if(s!==null&&(n.dependencies=s.dependencies),Ba|=n.lanes,(i&n.childLanes)===0)if(s!==null){if(jr(s,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(s!==null&&n.child!==s.child)throw Error(r(153));if(n.child!==null){for(s=n.child,i=ra(s,s.pendingProps),n.child=i,i.return=n;s.sibling!==null;)s=s.sibling,i=i.sibling=ra(s,s.pendingProps),i.return=n;i.sibling=null}return n.child}function bu(s,n){return(s.lanes&n)!==0?!0:(s=s.dependencies,!!(s!==null&&Xi(s)))}function Ov(s,n,i){switch(n.tag){case 3:be(n,n.stateNode.containerInfo),Pa(n,Nt,s.memoizedState.cache),wr();break;case 27:case 5:Kc(n);break;case 4:be(n,n.stateNode.containerInfo);break;case 10:Pa(n,n.type,n.memoizedProps.value);break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(_a(n),n.flags|=128,null):(i&n.child.childLanes)!==0?ap(s,n,i):(_a(n),s=fa(s,n,i),s!==null?s.sibling:null);_a(n);break;case 19:var u=(s.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(jr(s,n,i,!1),c=(i&n.childLanes)!==0),u){if(c)return lp(s,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),K(St,St.current),c)break;return null;case 22:case 23:return n.lanes=0,Zx(s,n,i);case 24:Pa(n,Nt,s.memoizedState.cache)}return fa(s,n,i)}function rp(s,n,i){if(s!==null)if(s.memoizedProps!==n.pendingProps)Et=!0;else{if(!bu(s,i)&&(n.flags&128)===0)return Et=!1,Ov(s,n,i);Et=(s.flags&131072)!==0}else Et=!1,We&&(n.flags&1048576)!==0&&Dh(n,Wi,n.index);switch(n.lanes=0,n.tag){case 16:e:{s=n.pendingProps;var c=n.elementType,u=c._init;if(c=u(c._payload),n.type=c,typeof c=="function")Ed(c)?(s=Rn(c,s),n.tag=1,n=tp(null,n,c,s,i)):(n.tag=0,n=uu(null,n,c,s,i));else{if(c!=null){if(u=c.$$typeof,u===T){n.tag=11,n=Yx(null,n,c,s,i);break e}else if(u===z){n.tag=14,n=Wx(null,n,c,s,i);break e}}throw n=V(c)||c,Error(r(306,n,""))}}return n;case 0:return uu(s,n,n.type,n.pendingProps,i);case 1:return c=n.type,u=Rn(c,n.pendingProps),tp(s,n,c,u,i);case 3:e:{if(be(n,n.stateNode.containerInfo),s===null)throw Error(r(387));c=n.pendingProps;var f=n.memoizedState;u=f.element,Id(s,n),Or(n,c,null,i);var k=n.memoizedState;if(c=k.cache,Pa(n,Nt,c),c!==f.cache&&Fd(n,[Nt],i,!0),Ar(),c=k.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:k.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=sp(s,n,c,i);break e}else if(c!==u){u=Ss(Error(r(424)),n),vr(u),n=sp(s,n,c,i);break e}else{switch(s=n.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ht=_s(s.firstChild),Ht=n,We=!0,Sn=null,Gs=!0,i=qx(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(wr(),c===u){n=fa(s,n,i);break e}Rt(s,n,c,i)}n=n.child}return n;case 26:return go(s,n),s===null?(i=dg(n.type,null,n.pendingProps,null))?n.memoizedState=i:We||(i=n.type,s=n.pendingProps,c=Po(ae.current).createElement(i),c[_t]=n,c[Yt]=s,Pt(c,i,s),kt(c),n.stateNode=c):n.memoizedState=dg(n.type,s.memoizedProps,n.pendingProps,s.memoizedState),null;case 27:return Kc(n),s===null&&We&&(c=n.stateNode=ig(n.type,n.pendingProps,ae.current),Ht=n,Gs=!0,u=ht,Ka(n.type)?(Zu=u,ht=_s(c.firstChild)):ht=u),Rt(s,n,n.pendingProps.children,i),go(s,n),s===null&&(n.flags|=4194304),n.child;case 5:return s===null&&We&&((u=c=ht)&&(c=aj(c,n.type,n.pendingProps,Gs),c!==null?(n.stateNode=c,Ht=n,ht=_s(c.firstChild),Gs=!1,u=!0):u=!1),u||Cn(n)),Kc(n),u=n.type,f=n.pendingProps,k=s!==null?s.memoizedProps:null,c=f.children,Vu(u,f)?c=null:k!==null&&Vu(u,k)&&(n.flags|=32),n.memoizedState!==null&&(u=Kd(s,n,vv,null,null,i),Xr._currentValue=u),go(s,n),Rt(s,n,c,i),n.child;case 6:return s===null&&We&&((s=i=ht)&&(i=nj(i,n.pendingProps,Gs),i!==null?(n.stateNode=i,Ht=n,ht=null,s=!0):s=!1),s||Cn(n)),null;case 13:return ap(s,n,i);case 4:return be(n,n.stateNode.containerInfo),c=n.pendingProps,s===null?n.child=jl(n,null,c,i):Rt(s,n,c,i),n.child;case 11:return Yx(s,n,n.type,n.pendingProps,i);case 7:return Rt(s,n,n.pendingProps,i),n.child;case 8:return Rt(s,n,n.pendingProps.children,i),n.child;case 12:return Rt(s,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,Pa(n,n.type,c.value),Rt(s,n,c.children,i),n.child;case 9:return u=n.type._context,c=n.pendingProps.children,En(n),u=qt(u),c=c(u),n.flags|=1,Rt(s,n,c,i),n.child;case 14:return Wx(s,n,n.type,n.pendingProps,i);case 15:return Xx(s,n,n.type,n.pendingProps,i);case 19:return lp(s,n,i);case 31:return c=n.pendingProps,i=n.mode,c={mode:c.mode,children:c.children},s===null?(i=bo(c,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=ra(s.child,c),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return Zx(s,n,i);case 24:return En(n),c=qt(Nt),s===null?(u=qd(),u===null&&(u=ot,f=Dd(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:c,cache:u},Ud(n),Pa(n,Nt,u)):((s.lanes&i)!==0&&(Id(s,n),Or(n,null,null,i),Ar()),u=s.memoizedState,f=n.memoizedState,u.parent!==c?(u={parent:c,cache:c},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Pa(n,Nt,c)):(c=f.cache,Pa(n,Nt,c),c!==u.cache&&Fd(n,[Nt],i,!0))),Rt(s,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function ha(s){s.flags|=4}function ip(s,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!xg(n)){if(n=As.current,n!==null&&((Ke&4194048)===Ke?Ks!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||n!==Ks))throw kr=zd,Hh;s.flags|=8192}}function yo(s,n){n!==null&&(s.flags|=4),s.flags&16384&&(n=s.tag!==22?zf():536870912,s.lanes|=n,kl|=n)}function Dr(s,n){if(!We)switch(s.tailMode){case"hidden":n=s.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?s.tail=null:i.sibling=null;break;case"collapsed":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ft(s){var n=s.alternate!==null&&s.alternate.child===s.child,i=0,c=0;if(n)for(var u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags&65011712,c|=u.flags&65011712,u.return=s,u=u.sibling;else for(u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags,c|=u.flags,u.return=s,u=u.sibling;return s.subtreeFlags|=c,s.childLanes=i,n}function Rv(s,n,i){var c=n.pendingProps;switch(Td(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(n),null;case 1:return ft(n),null;case 3:return i=n.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),da(Nt),Ve(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(s===null||s.child===null)&&(yr(n)?ha(n):s===null||s.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,zh())),ft(n),null;case 26:return i=n.memoizedState,s===null?(ha(n),i!==null?(ft(n),ip(n,i)):(ft(n),n.flags&=-16777217)):i?i!==s.memoizedState?(ha(n),ft(n),ip(n,i)):(ft(n),n.flags&=-16777217):(s.memoizedProps!==c&&ha(n),ft(n),n.flags&=-16777217),null;case 27:Oi(n),i=ae.current;var u=n.type;if(s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return ft(n),null}s=Y.current,yr(n)?_h(n):(s=ig(u,c,i),n.stateNode=s,ha(n))}return ft(n),null;case 5:if(Oi(n),i=n.type,s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return ft(n),null}if(s=Y.current,yr(n))_h(n);else{switch(u=Po(ae.current),s){case 1:s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?u.createElement("select",{is:c.is}):u.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?u.createElement(i,{is:c.is}):u.createElement(i)}}s[_t]=n,s[Yt]=c;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=s;e:switch(Pt(s,i,c),i){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ha(n)}}return ft(n),n.flags&=-16777217,null;case 6:if(s&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(r(166));if(s=ae.current,yr(n)){if(s=n.stateNode,i=n.memoizedProps,c=null,u=Ht,u!==null)switch(u.tag){case 27:case 5:c=u.memoizedProps}s[_t]=n,s=!!(s.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||eg(s.nodeValue,i)),s||Cn(n)}else s=Po(s).createTextNode(c),s[_t]=n,n.stateNode=s}return ft(n),null;case 13:if(c=n.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(u=yr(n),c!==null&&c.dehydrated!==null){if(s===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[_t]=n}else wr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ft(n),u=!1}else u=zh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(ma(n),n):(ma(n),null)}if(ma(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=c!==null,s=s!==null&&s.memoizedState!==null,i){c=n.child,u=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(u=c.alternate.memoizedState.cachePool.pool);var f=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==u&&(c.flags|=2048)}return i!==s&&i&&(n.child.flags|=8192),yo(n,n.updateQueue),ft(n),null;case 4:return Ve(),s===null&&Bu(n.stateNode.containerInfo),ft(n),null;case 10:return da(n.type),ft(n),null;case 19:if(D(St),u=n.memoizedState,u===null)return ft(n),null;if(c=(n.flags&128)!==0,f=u.rendering,f===null)if(c)Dr(u,!1);else{if(xt!==0||s!==null&&(s.flags&128)!==0)for(s=n.child;s!==null;){if(f=ho(s),f!==null){for(n.flags|=128,Dr(u,!1),s=f.updateQueue,n.updateQueue=s,yo(n,s),n.subtreeFlags=0,s=i,i=n.child;i!==null;)Fh(i,s),i=i.sibling;return K(St,St.current&1|2),n.child}s=s.sibling}u.tail!==null&&Qs()>jo&&(n.flags|=128,c=!0,Dr(u,!1),n.lanes=4194304)}else{if(!c)if(s=ho(f),s!==null){if(n.flags|=128,c=!0,s=s.updateQueue,n.updateQueue=s,yo(n,s),Dr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!We)return ft(n),null}else 2*Qs()-u.renderingStartTime>jo&&i!==536870912&&(n.flags|=128,c=!0,Dr(u,!1),n.lanes=4194304);u.isBackwards?(f.sibling=n.child,n.child=f):(s=u.last,s!==null?s.sibling=f:n.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Qs(),n.sibling=null,s=St.current,K(St,c?s&1|2:s&1),n):(ft(n),null);case 22:case 23:return ma(n),Qd(),c=n.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(ft(n),n.subtreeFlags&6&&(n.flags|=8192)):ft(n),i=n.updateQueue,i!==null&&yo(n,i.retryQueue),i=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),s!==null&&D(An),null;case 24:return i=null,s!==null&&(i=s.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),da(Nt),ft(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function Tv(s,n){switch(Td(n),n.tag){case 1:return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 3:return da(Nt),Ve(),s=n.flags,(s&65536)!==0&&(s&128)===0?(n.flags=s&-65537|128,n):null;case 26:case 27:case 5:return Oi(n),null;case 13:if(ma(n),s=n.memoizedState,s!==null&&s.dehydrated!==null){if(n.alternate===null)throw Error(r(340));wr()}return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 19:return D(St),null;case 4:return Ve(),null;case 10:return da(n.type),null;case 22:case 23:return ma(n),Qd(),s!==null&&D(An),s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 24:return da(Nt),null;case 25:return null;default:return null}}function op(s,n){switch(Td(n),n.tag){case 3:da(Nt),Ve();break;case 26:case 27:case 5:Oi(n);break;case 4:Ve();break;case 13:ma(n);break;case 19:D(St);break;case 10:da(n.type);break;case 22:case 23:ma(n),Qd(),s!==null&&D(An);break;case 24:da(Nt)}}function _r(s,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var u=c.next;i=u;do{if((i.tag&s)===s){c=void 0;var f=i.create,k=i.inst;c=f(),k.destroy=c}i=i.next}while(i!==u)}}catch(R){it(n,n.return,R)}}function za(s,n,i){try{var c=n.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var f=u.next;c=f;do{if((c.tag&s)===s){var k=c.inst,R=k.destroy;if(R!==void 0){k.destroy=void 0,u=n;var I=i,ne=R;try{ne()}catch(he){it(u,I,he)}}}c=c.next}while(c!==f)}}catch(he){it(n,n.return,he)}}function cp(s){var n=s.updateQueue;if(n!==null){var i=s.stateNode;try{Wh(n,i)}catch(c){it(s,s.return,c)}}}function dp(s,n,i){i.props=Rn(s.type,s.memoizedProps),i.state=s.memoizedState;try{i.componentWillUnmount()}catch(c){it(s,n,c)}}function qr(s,n){try{var i=s.ref;if(i!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof i=="function"?s.refCleanup=i(c):i.current=c}}catch(u){it(s,n,u)}}function Vs(s,n){var i=s.ref,c=s.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(u){it(s,n,u)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){it(s,n,u)}else i.current=null}function up(s){var n=s.type,i=s.memoizedProps,c=s.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(u){it(s,s.return,u)}}function yu(s,n,i){try{var c=s.stateNode;Zv(c,s.type,i,n),c[Yt]=n}catch(u){it(s,s.return,u)}}function mp(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ka(s.type)||s.tag===4}function wu(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||mp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ka(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vu(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(s,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(s),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=To));else if(c!==4&&(c===27&&Ka(s.type)&&(i=s.stateNode,n=null),s=s.child,s!==null))for(vu(s,n,i),s=s.sibling;s!==null;)vu(s,n,i),s=s.sibling}function wo(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?i.insertBefore(s,n):i.appendChild(s);else if(c!==4&&(c===27&&Ka(s.type)&&(i=s.stateNode),s=s.child,s!==null))for(wo(s,n,i),s=s.sibling;s!==null;)wo(s,n,i),s=s.sibling}function fp(s){var n=s.stateNode,i=s.memoizedProps;try{for(var c=s.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Pt(n,c,i),n[_t]=s,n[Yt]=i}catch(f){it(s,s.return,f)}}var xa=!1,bt=!1,ju=!1,hp=typeof WeakSet=="function"?WeakSet:Set,At=null;function Pv(s,n){if(s=s.containerInfo,Gu=qo,s=Ch(s),wd(s)){if("selectionStart"in s)var i={start:s.selectionStart,end:s.selectionEnd};else e:{i=(i=s.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var u=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var k=0,R=-1,I=-1,ne=0,he=0,pe=s,re=null;t:for(;;){for(var oe;pe!==i||u!==0&&pe.nodeType!==3||(R=k+u),pe!==f||c!==0&&pe.nodeType!==3||(I=k+c),pe.nodeType===3&&(k+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)re=pe,pe=oe;for(;;){if(pe===s)break t;if(re===i&&++ne===u&&(R=k),re===f&&++he===c&&(I=k),(oe=pe.nextSibling)!==null)break;pe=re,re=pe.parentNode}pe=oe}i=R===-1||I===-1?null:{start:R,end:I}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ku={focusedElem:s,selectionRange:i},qo=!1,At=n;At!==null;)if(n=At,s=n.child,(n.subtreeFlags&1024)!==0&&s!==null)s.return=n,At=s;else for(;At!==null;){switch(n=At,f=n.alternate,s=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&f!==null){s=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,c=i.stateNode;try{var Pe=Rn(i.type,u,i.elementType===i.type);s=c.getSnapshotBeforeUpdate(Pe,f),c.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){it(i,i.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=n.stateNode.containerInfo,i=s.nodeType,i===9)Wu(s);else if(i===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Wu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=n.sibling,s!==null){s.return=n.return,At=s;break}At=n.return}}function xp(s,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Ua(s,i),c&4&&_r(5,i);break;case 1:if(Ua(s,i),c&4)if(s=i.stateNode,n===null)try{s.componentDidMount()}catch(k){it(i,i.return,k)}else{var u=Rn(i.type,n.memoizedProps);n=n.memoizedState;try{s.componentDidUpdate(u,n,s.__reactInternalSnapshotBeforeUpdate)}catch(k){it(i,i.return,k)}}c&64&&cp(i),c&512&&qr(i,i.return);break;case 3:if(Ua(s,i),c&64&&(s=i.updateQueue,s!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Wh(s,n)}catch(k){it(i,i.return,k)}}break;case 27:n===null&&c&4&&fp(i);case 26:case 5:Ua(s,i),n===null&&c&4&&up(i),c&512&&qr(i,i.return);break;case 12:Ua(s,i);break;case 13:Ua(s,i),c&4&&bp(s,i),c&64&&(s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(i=Iv.bind(null,i),lj(s,i))));break;case 22:if(c=i.memoizedState!==null||xa,!c){n=n!==null&&n.memoizedState!==null||bt,u=xa;var f=bt;xa=c,(bt=n)&&!f?Ia(s,i,(i.subtreeFlags&8772)!==0):Ua(s,i),xa=u,bt=f}break;case 30:break;default:Ua(s,i)}}function pp(s){var n=s.alternate;n!==null&&(s.alternate=null,pp(n)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(n=s.stateNode,n!==null&&td(n)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dt=null,Zt=!1;function pa(s,n,i){for(i=i.child;i!==null;)gp(s,n,i),i=i.sibling}function gp(s,n,i){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(lr,i)}catch{}switch(i.tag){case 26:bt||Vs(i,n),pa(s,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bt||Vs(i,n);var c=dt,u=Zt;Ka(i.type)&&(dt=i.stateNode,Zt=!1),pa(s,n,i),Kr(i.stateNode),dt=c,Zt=u;break;case 5:bt||Vs(i,n);case 6:if(c=dt,u=Zt,dt=null,pa(s,n,i),dt=c,Zt=u,dt!==null)if(Zt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(i.stateNode)}catch(f){it(i,n,f)}else try{dt.removeChild(i.stateNode)}catch(f){it(i,n,f)}break;case 18:dt!==null&&(Zt?(s=dt,lg(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.stateNode),ti(s)):lg(dt,i.stateNode));break;case 4:c=dt,u=Zt,dt=i.stateNode.containerInfo,Zt=!0,pa(s,n,i),dt=c,Zt=u;break;case 0:case 11:case 14:case 15:bt||za(2,i,n),bt||za(4,i,n),pa(s,n,i);break;case 1:bt||(Vs(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&dp(i,n,c)),pa(s,n,i);break;case 21:pa(s,n,i);break;case 22:bt=(c=bt)||i.memoizedState!==null,pa(s,n,i),bt=c;break;default:pa(s,n,i)}}function bp(s,n){if(n.memoizedState===null&&(s=n.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ti(s)}catch(i){it(n,n.return,i)}}function Mv(s){switch(s.tag){case 13:case 19:var n=s.stateNode;return n===null&&(n=s.stateNode=new hp),n;case 22:return s=s.stateNode,n=s._retryCache,n===null&&(n=s._retryCache=new hp),n;default:throw Error(r(435,s.tag))}}function Nu(s,n){var i=Mv(s);n.forEach(function(c){var u=$v.bind(null,s,c);i.has(c)||(i.add(c),c.then(u,u))})}function us(s,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var u=i[c],f=s,k=n,R=k;e:for(;R!==null;){switch(R.tag){case 27:if(Ka(R.type)){dt=R.stateNode,Zt=!1;break e}break;case 5:dt=R.stateNode,Zt=!1;break e;case 3:case 4:dt=R.stateNode.containerInfo,Zt=!0;break e}R=R.return}if(dt===null)throw Error(r(160));gp(f,k,u),dt=null,Zt=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)yp(n,s),n=n.sibling}var Ds=null;function yp(s,n){var i=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:us(n,s),ms(s),c&4&&(za(3,s,s.return),_r(3,s),za(5,s,s.return));break;case 1:us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),c&64&&xa&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(i=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var u=Ds;if(us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),c&4){var f=i!==null?i.memoizedState:null;if(c=s.memoizedState,i===null)if(c===null)if(s.stateNode===null){e:{c=s.type,i=s.memoizedProps,u=u.ownerDocument||u;t:switch(c){case"title":f=u.getElementsByTagName("title")[0],(!f||f[or]||f[_t]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(c),u.head.insertBefore(f,u.querySelector("head > title"))),Pt(f,c,i),f[_t]=s,kt(f),c=f;break e;case"link":var k=fg("link","href",u).get(c+(i.href||""));if(k){for(var R=0;R<k.length;R++)if(f=k[R],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){k.splice(R,1);break t}}f=u.createElement(c),Pt(f,c,i),u.head.appendChild(f);break;case"meta":if(k=fg("meta","content",u).get(c+(i.content||""))){for(R=0;R<k.length;R++)if(f=k[R],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){k.splice(R,1);break t}}f=u.createElement(c),Pt(f,c,i),u.head.appendChild(f);break;default:throw Error(r(468,c))}f[_t]=s,kt(f),c=f}s.stateNode=c}else hg(u,s.type,s.stateNode);else s.stateNode=mg(u,c,s.memoizedProps);else f!==c?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,c===null?hg(u,s.type,s.stateNode):mg(u,c,s.memoizedProps)):c===null&&s.stateNode!==null&&yu(s,s.memoizedProps,i.memoizedProps)}break;case 27:us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),i!==null&&c&4&&yu(s,s.memoizedProps,i.memoizedProps);break;case 5:if(us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),s.flags&32){u=s.stateNode;try{nl(u,"")}catch(oe){it(s,s.return,oe)}}c&4&&s.stateNode!=null&&(u=s.memoizedProps,yu(s,u,i!==null?i.memoizedProps:u)),c&1024&&(ju=!0);break;case 6:if(us(n,s),ms(s),c&4){if(s.stateNode===null)throw Error(r(162));c=s.memoizedProps,i=s.stateNode;try{i.nodeValue=c}catch(oe){it(s,s.return,oe)}}break;case 3:if(Fo=null,u=Ds,Ds=Mo(n.containerInfo),us(n,s),Ds=u,ms(s),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ti(n.containerInfo)}catch(oe){it(s,s.return,oe)}ju&&(ju=!1,wp(s));break;case 4:c=Ds,Ds=Mo(s.stateNode.containerInfo),us(n,s),ms(s),Ds=c;break;case 12:us(n,s),ms(s);break;case 13:us(n,s),ms(s),s.child.flags&8192&&s.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Ou=Qs()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Nu(s,c)));break;case 22:u=s.memoizedState!==null;var I=i!==null&&i.memoizedState!==null,ne=xa,he=bt;if(xa=ne||u,bt=he||I,us(n,s),bt=he,xa=ne,ms(s),c&8192)e:for(n=s.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||I||xa||bt||Tn(s)),i=null,n=s;;){if(n.tag===5||n.tag===26){if(i===null){I=i=n;try{if(f=I.stateNode,u)k=f.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{R=I.stateNode;var pe=I.memoizedProps.style,re=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;R.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(oe){it(I,I.return,oe)}}}else if(n.tag===6){if(i===null){I=n;try{I.stateNode.nodeValue=u?"":I.memoizedProps}catch(oe){it(I,I.return,oe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===s)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=s.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Nu(s,i))));break;case 19:us(n,s),ms(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Nu(s,c)));break;case 30:break;case 21:break;default:us(n,s),ms(s)}}function ms(s){var n=s.flags;if(n&2){try{for(var i,c=s.return;c!==null;){if(mp(c)){i=c;break}c=c.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var u=i.stateNode,f=wu(s);wo(s,f,u);break;case 5:var k=i.stateNode;i.flags&32&&(nl(k,""),i.flags&=-33);var R=wu(s);wo(s,R,k);break;case 3:case 4:var I=i.stateNode.containerInfo,ne=wu(s);vu(s,ne,I);break;default:throw Error(r(161))}}catch(he){it(s,s.return,he)}s.flags&=-3}n&4096&&(s.flags&=-4097)}function wp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var n=s;wp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),s=s.sibling}}function Ua(s,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)xp(s,n.alternate,n),n=n.sibling}function Tn(s){for(s=s.child;s!==null;){var n=s;switch(n.tag){case 0:case 11:case 14:case 15:za(4,n,n.return),Tn(n);break;case 1:Vs(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&dp(n,n.return,i),Tn(n);break;case 27:Kr(n.stateNode);case 26:case 5:Vs(n,n.return),Tn(n);break;case 22:n.memoizedState===null&&Tn(n);break;case 30:Tn(n);break;default:Tn(n)}s=s.sibling}}function Ia(s,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,u=s,f=n,k=f.flags;switch(f.tag){case 0:case 11:case 15:Ia(u,f,i),_r(4,f);break;case 1:if(Ia(u,f,i),c=f,u=c.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(ne){it(c,c.return,ne)}if(c=f,u=c.updateQueue,u!==null){var R=c.stateNode;try{var I=u.shared.hiddenCallbacks;if(I!==null)for(u.shared.hiddenCallbacks=null,u=0;u<I.length;u++)Yh(I[u],R)}catch(ne){it(c,c.return,ne)}}i&&k&64&&cp(f),qr(f,f.return);break;case 27:fp(f);case 26:case 5:Ia(u,f,i),i&&c===null&&k&4&&up(f),qr(f,f.return);break;case 12:Ia(u,f,i);break;case 13:Ia(u,f,i),i&&k&4&&bp(u,f);break;case 22:f.memoizedState===null&&Ia(u,f,i),qr(f,f.return);break;case 30:break;default:Ia(u,f,i)}n=n.sibling}}function Su(s,n){var i=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(s!=null&&s.refCount++,i!=null&&Nr(i))}function Cu(s,n){s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nr(s))}function Ys(s,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vp(s,n,i,c),n=n.sibling}function vp(s,n,i,c){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Ys(s,n,i,c),u&2048&&_r(9,n);break;case 1:Ys(s,n,i,c);break;case 3:Ys(s,n,i,c),u&2048&&(s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nr(s)));break;case 12:if(u&2048){Ys(s,n,i,c),s=n.stateNode;try{var f=n.memoizedProps,k=f.id,R=f.onPostCommit;typeof R=="function"&&R(k,n.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(I){it(n,n.return,I)}}else Ys(s,n,i,c);break;case 13:Ys(s,n,i,c);break;case 23:break;case 22:f=n.stateNode,k=n.alternate,n.memoizedState!==null?f._visibility&2?Ys(s,n,i,c):zr(s,n):f._visibility&2?Ys(s,n,i,c):(f._visibility|=2,Nl(s,n,i,c,(n.subtreeFlags&10256)!==0)),u&2048&&Su(k,n);break;case 24:Ys(s,n,i,c),u&2048&&Cu(n.alternate,n);break;default:Ys(s,n,i,c)}}function Nl(s,n,i,c,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=s,k=n,R=i,I=c,ne=k.flags;switch(k.tag){case 0:case 11:case 15:Nl(f,k,R,I,u),_r(8,k);break;case 23:break;case 22:var he=k.stateNode;k.memoizedState!==null?he._visibility&2?Nl(f,k,R,I,u):zr(f,k):(he._visibility|=2,Nl(f,k,R,I,u)),u&&ne&2048&&Su(k.alternate,k);break;case 24:Nl(f,k,R,I,u),u&&ne&2048&&Cu(k.alternate,k);break;default:Nl(f,k,R,I,u)}n=n.sibling}}function zr(s,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=s,c=n,u=c.flags;switch(c.tag){case 22:zr(i,c),u&2048&&Su(c.alternate,c);break;case 24:zr(i,c),u&2048&&Cu(c.alternate,c);break;default:zr(i,c)}n=n.sibling}}var Ur=8192;function Sl(s){if(s.subtreeFlags&Ur)for(s=s.child;s!==null;)jp(s),s=s.sibling}function jp(s){switch(s.tag){case 26:Sl(s),s.flags&Ur&&s.memoizedState!==null&&bj(Ds,s.memoizedState,s.memoizedProps);break;case 5:Sl(s);break;case 3:case 4:var n=Ds;Ds=Mo(s.stateNode.containerInfo),Sl(s),Ds=n;break;case 22:s.memoizedState===null&&(n=s.alternate,n!==null&&n.memoizedState!==null?(n=Ur,Ur=16777216,Sl(s),Ur=n):Sl(s));break;default:Sl(s)}}function Np(s){var n=s.alternate;if(n!==null&&(s=n.child,s!==null)){n.child=null;do n=s.sibling,s.sibling=null,s=n;while(s!==null)}}function Ir(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,Cp(c,s)}Np(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sp(s),s=s.sibling}function Sp(s){switch(s.tag){case 0:case 11:case 15:Ir(s),s.flags&2048&&za(9,s,s.return);break;case 3:Ir(s);break;case 12:Ir(s);break;case 22:var n=s.stateNode;s.memoizedState!==null&&n._visibility&2&&(s.return===null||s.return.tag!==13)?(n._visibility&=-3,vo(s)):Ir(s);break;default:Ir(s)}}function vo(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,Cp(c,s)}Np(s)}for(s=s.child;s!==null;){switch(n=s,n.tag){case 0:case 11:case 15:za(8,n,n.return),vo(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,vo(n));break;default:vo(n)}s=s.sibling}}function Cp(s,n){for(;At!==null;){var i=At;switch(i.tag){case 0:case 11:case 15:za(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nr(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,At=c;else e:for(i=s;At!==null;){c=At;var u=c.sibling,f=c.return;if(pp(c),c===i){At=null;break e}if(u!==null){u.return=f,At=u;break e}At=f}}}var Lv={getCacheForType:function(s){var n=qt(Nt),i=n.data.get(s);return i===void 0&&(i=s(),n.data.set(s,i)),i}},Fv=typeof WeakMap=="function"?WeakMap:Map,st=0,ot=null,$e=null,Ke=0,at=0,fs=null,$a=!1,Cl=!1,ku=!1,ga=0,xt=0,Ba=0,Pn=0,Eu=0,Os=0,kl=0,$r=null,Jt=null,Au=!1,Ou=0,jo=1/0,No=null,Ha=null,Tt=0,Qa=null,El=null,Al=0,Ru=0,Tu=null,kp=null,Br=0,Pu=null;function hs(){if((st&2)!==0&&Ke!==0)return Ke&-Ke;if(_.T!==null){var s=xl;return s!==0?s:zu()}return $f()}function Ep(){Os===0&&(Os=(Ke&536870912)===0||We?qf():536870912);var s=As.current;return s!==null&&(s.flags|=32),Os}function xs(s,n,i){(s===ot&&(at===2||at===9)||s.cancelPendingCommit!==null)&&(Ol(s,0),Ga(s,Ke,Os,!1)),ir(s,i),((st&2)===0||s!==ot)&&(s===ot&&((st&2)===0&&(Pn|=i),xt===4&&Ga(s,Ke,Os,!1)),Ws(s))}function Ap(s,n,i){if((st&6)!==0)throw Error(r(327));var c=!i&&(n&124)===0&&(n&s.expiredLanes)===0||rr(s,n),u=c?qv(s,n):Fu(s,n,!0),f=c;do{if(u===0){Cl&&!c&&Ga(s,n,0,!1);break}else{if(i=s.current.alternate,f&&!Dv(i)){u=Fu(s,n,!1),f=!1;continue}if(u===2){if(f=n,s.errorRecoveryDisabledLanes&f)var k=0;else k=s.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){n=k;e:{var R=s;u=$r;var I=R.current.memoizedState.isDehydrated;if(I&&(Ol(R,k).flags|=256),k=Fu(R,k,!1),k!==2){if(ku&&!I){R.errorRecoveryDisabledLanes|=f,Pn|=f,u=4;break e}f=Jt,Jt=u,f!==null&&(Jt===null?Jt=f:Jt.push.apply(Jt,f))}u=k}if(f=!1,u!==2)continue}}if(u===1){Ol(s,0),Ga(s,n,0,!0);break}e:{switch(c=s,f=u,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Ga(c,n,Os,!$a);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=Ou+300-Qs(),10<u)){if(Ga(c,n,Os,!$a),Mi(c,0,!0)!==0)break e;c.timeoutHandle=ag(Op.bind(null,c,i,Jt,No,Au,n,Os,Pn,kl,$a,f,2,-0,0),u);break e}Op(c,i,Jt,No,Au,n,Os,Pn,kl,$a,f,0,-0,0)}}break}while(!0);Ws(s)}function Op(s,n,i,c,u,f,k,R,I,ne,he,pe,re,oe){if(s.timeoutHandle=-1,pe=n.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Wr={stylesheets:null,count:0,unsuspend:gj},jp(n),pe=yj(),pe!==null)){s.cancelPendingCommit=pe(Dp.bind(null,s,n,f,i,c,u,k,R,I,he,1,re,oe)),Ga(s,f,k,!ne);return}Dp(s,n,f,i,c,u,k,R,I)}function Dv(s){for(var n=s;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var u=i[c],f=u.getSnapshot;u=u.value;try{if(!cs(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ga(s,n,i,c){n&=~Eu,n&=~Pn,s.suspendedLanes|=n,s.pingedLanes&=~n,c&&(s.warmLanes|=n),c=s.expirationTimes;for(var u=n;0<u;){var f=31-os(u),k=1<<f;c[f]=-1,u&=~k}i!==0&&Uf(s,i,n)}function So(){return(st&6)===0?(Hr(0),!1):!0}function Mu(){if($e!==null){if(at===0)var s=$e.return;else s=$e,ca=kn=null,Wd(s),vl=null,Lr=0,s=$e;for(;s!==null;)op(s.alternate,s),s=s.return;$e=null}}function Ol(s,n){var i=s.timeoutHandle;i!==-1&&(s.timeoutHandle=-1,ej(i)),i=s.cancelPendingCommit,i!==null&&(s.cancelPendingCommit=null,i()),Mu(),ot=s,$e=i=ra(s.current,null),Ke=n,at=0,fs=null,$a=!1,Cl=rr(s,n),ku=!1,kl=Os=Eu=Pn=Ba=xt=0,Jt=$r=null,Au=!1,(n&8)!==0&&(n|=n&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=n;0<c;){var u=31-os(c),f=1<<u;n|=s[u],c&=~f}return ga=n,Qi(),i}function Rp(s,n){Ue=null,_.H=uo,n===Cr||n===eo?(n=Kh(),at=3):n===Hh?(n=Kh(),at=4):at=n===Vx?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,fs=n,$e===null&&(xt=1,po(s,Ss(n,s.current)))}function Tp(){var s=_.H;return _.H=uo,s===null?uo:s}function Pp(){var s=_.A;return _.A=Lv,s}function Lu(){xt=4,$a||(Ke&4194048)!==Ke&&As.current!==null||(Cl=!0),(Ba&134217727)===0&&(Pn&134217727)===0||ot===null||Ga(ot,Ke,Os,!1)}function Fu(s,n,i){var c=st;st|=2;var u=Tp(),f=Pp();(ot!==s||Ke!==n)&&(No=null,Ol(s,n)),n=!1;var k=xt;e:do try{if(at!==0&&$e!==null){var R=$e,I=fs;switch(at){case 8:Mu(),k=6;break e;case 3:case 2:case 9:case 6:As.current===null&&(n=!0);var ne=at;if(at=0,fs=null,Rl(s,R,I,ne),i&&Cl){k=0;break e}break;default:ne=at,at=0,fs=null,Rl(s,R,I,ne)}}_v(),k=xt;break}catch(he){Rp(s,he)}while(!0);return n&&s.shellSuspendCounter++,ca=kn=null,st=c,_.H=u,_.A=f,$e===null&&(ot=null,Ke=0,Qi()),k}function _v(){for(;$e!==null;)Mp($e)}function qv(s,n){var i=st;st|=2;var c=Tp(),u=Pp();ot!==s||Ke!==n?(No=null,jo=Qs()+500,Ol(s,n)):Cl=rr(s,n);e:do try{if(at!==0&&$e!==null){n=$e;var f=fs;t:switch(at){case 1:at=0,fs=null,Rl(s,n,f,1);break;case 2:case 9:if(Qh(f)){at=0,fs=null,Lp(n);break}n=function(){at!==2&&at!==9||ot!==s||(at=7),Ws(s)},f.then(n,n);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Qh(f)?(at=0,fs=null,Lp(n)):(at=0,fs=null,Rl(s,n,f,7));break;case 5:var k=null;switch($e.tag){case 26:k=$e.memoizedState;case 5:case 27:var R=$e;if(!k||xg(k)){at=0,fs=null;var I=R.sibling;if(I!==null)$e=I;else{var ne=R.return;ne!==null?($e=ne,Co(ne)):$e=null}break t}}at=0,fs=null,Rl(s,n,f,5);break;case 6:at=0,fs=null,Rl(s,n,f,6);break;case 8:Mu(),xt=6;break e;default:throw Error(r(462))}}zv();break}catch(he){Rp(s,he)}while(!0);return ca=kn=null,_.H=c,_.A=u,st=i,$e!==null?0:(ot=null,Ke=0,Qi(),xt)}function zv(){for(;$e!==null&&!iw();)Mp($e)}function Mp(s){var n=rp(s.alternate,s,ga);s.memoizedProps=s.pendingProps,n===null?Co(s):$e=n}function Lp(s){var n=s,i=n.alternate;switch(n.tag){case 15:case 0:n=ep(i,n,n.pendingProps,n.type,void 0,Ke);break;case 11:n=ep(i,n,n.pendingProps,n.type.render,n.ref,Ke);break;case 5:Wd(n);default:op(i,n),n=$e=Fh(n,ga),n=rp(i,n,ga)}s.memoizedProps=s.pendingProps,n===null?Co(s):$e=n}function Rl(s,n,i,c){ca=kn=null,Wd(n),vl=null,Lr=0;var u=n.return;try{if(Av(s,u,n,i,Ke)){xt=1,po(s,Ss(i,s.current)),$e=null;return}}catch(f){if(u!==null)throw $e=u,f;xt=1,po(s,Ss(i,s.current)),$e=null;return}n.flags&32768?(We||c===1?s=!0:Cl||(Ke&536870912)!==0?s=!1:($a=s=!0,(c===2||c===9||c===3||c===6)&&(c=As.current,c!==null&&c.tag===13&&(c.flags|=16384))),Fp(n,s)):Co(n)}function Co(s){var n=s;do{if((n.flags&32768)!==0){Fp(n,$a);return}s=n.return;var i=Rv(n.alternate,n,ga);if(i!==null){$e=i;return}if(n=n.sibling,n!==null){$e=n;return}$e=n=s}while(n!==null);xt===0&&(xt=5)}function Fp(s,n){do{var i=Tv(s.alternate,s);if(i!==null){i.flags&=32767,$e=i;return}if(i=s.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(s=s.sibling,s!==null)){$e=s;return}$e=s=i}while(s!==null);xt=6,$e=null}function Dp(s,n,i,c,u,f,k,R,I){s.cancelPendingCommit=null;do ko();while(Tt!==0);if((st&6)!==0)throw Error(r(327));if(n!==null){if(n===s.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Cd,gw(s,i,f,k,R,I),s===ot&&($e=ot=null,Ke=0),El=n,Qa=s,Al=i,Ru=f,Tu=u,kp=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Bv(Ri,function(){return Ip(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=_.T,_.T=null,u=W.p,W.p=2,k=st,st|=4;try{Pv(s,n,i)}finally{st=k,W.p=u,_.T=c}}Tt=1,_p(),qp(),zp()}}function _p(){if(Tt===1){Tt=0;var s=Qa,n=El,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=_.T,_.T=null;var c=W.p;W.p=2;var u=st;st|=4;try{yp(n,s);var f=Ku,k=Ch(s.containerInfo),R=f.focusedElem,I=f.selectionRange;if(k!==R&&R&&R.ownerDocument&&Sh(R.ownerDocument.documentElement,R)){if(I!==null&&wd(R)){var ne=I.start,he=I.end;if(he===void 0&&(he=ne),"selectionStart"in R)R.selectionStart=ne,R.selectionEnd=Math.min(he,R.value.length);else{var pe=R.ownerDocument||document,re=pe&&pe.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Pe=R.textContent.length,Oe=Math.min(I.start,Pe),rt=I.end===void 0?Oe:Math.min(I.end,Pe);!oe.extend&&Oe>rt&&(k=rt,rt=Oe,Oe=k);var J=Nh(R,Oe),G=Nh(R,rt);if(J&&G&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==G.node||oe.focusOffset!==G.offset)){var se=pe.createRange();se.setStart(J.node,J.offset),oe.removeAllRanges(),Oe>rt?(oe.addRange(se),oe.extend(G.node,G.offset)):(se.setEnd(G.node,G.offset),oe.addRange(se))}}}}for(pe=[],oe=R;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<pe.length;R++){var xe=pe[R];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}qo=!!Gu,Ku=Gu=null}finally{st=u,W.p=c,_.T=i}}s.current=n,Tt=2}}function qp(){if(Tt===2){Tt=0;var s=Qa,n=El,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=_.T,_.T=null;var c=W.p;W.p=2;var u=st;st|=4;try{xp(s,n.alternate,n)}finally{st=u,W.p=c,_.T=i}}Tt=3}}function zp(){if(Tt===4||Tt===3){Tt=0,ow();var s=Qa,n=El,i=Al,c=kp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Tt=5:(Tt=0,El=Qa=null,Up(s,s.pendingLanes));var u=s.pendingLanes;if(u===0&&(Ha=null),Jc(i),n=n.stateNode,is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(lr,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=_.T,u=W.p,W.p=2,_.T=null;try{for(var f=s.onRecoverableError,k=0;k<c.length;k++){var R=c[k];f(R.value,{componentStack:R.stack})}}finally{_.T=n,W.p=u}}(Al&3)!==0&&ko(),Ws(s),u=s.pendingLanes,(i&4194090)!==0&&(u&42)!==0?s===Pu?Br++:(Br=0,Pu=s):Br=0,Hr(0)}}function Up(s,n){(s.pooledCacheLanes&=n)===0&&(n=s.pooledCache,n!=null&&(s.pooledCache=null,Nr(n)))}function ko(s){return _p(),qp(),zp(),Ip()}function Ip(){if(Tt!==5)return!1;var s=Qa,n=Ru;Ru=0;var i=Jc(Al),c=_.T,u=W.p;try{W.p=32>i?32:i,_.T=null,i=Tu,Tu=null;var f=Qa,k=Al;if(Tt=0,El=Qa=null,Al=0,(st&6)!==0)throw Error(r(331));var R=st;if(st|=4,Sp(f.current),vp(f,f.current,k,i),st=R,Hr(0,!1),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(lr,f)}catch{}return!0}finally{W.p=u,_.T=c,Up(s,n)}}function $p(s,n,i){n=Ss(i,n),n=du(s.stateNode,n,2),s=Fa(s,n,2),s!==null&&(ir(s,2),Ws(s))}function it(s,n,i){if(s.tag===3)$p(s,s,i);else for(;n!==null;){if(n.tag===3){$p(n,s,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ha===null||!Ha.has(c))){s=Ss(i,s),i=Gx(2),c=Fa(n,i,2),c!==null&&(Kx(i,c,n,s),ir(c,2),Ws(c));break}}n=n.return}}function Du(s,n,i){var c=s.pingCache;if(c===null){c=s.pingCache=new Fv;var u=new Set;c.set(n,u)}else u=c.get(n),u===void 0&&(u=new Set,c.set(n,u));u.has(i)||(ku=!0,u.add(i),s=Uv.bind(null,s,n,i),n.then(s,s))}function Uv(s,n,i){var c=s.pingCache;c!==null&&c.delete(n),s.pingedLanes|=s.suspendedLanes&i,s.warmLanes&=~i,ot===s&&(Ke&i)===i&&(xt===4||xt===3&&(Ke&62914560)===Ke&&300>Qs()-Ou?(st&2)===0&&Ol(s,0):Eu|=i,kl===Ke&&(kl=0)),Ws(s)}function Bp(s,n){n===0&&(n=zf()),s=ul(s,n),s!==null&&(ir(s,n),Ws(s))}function Iv(s){var n=s.memoizedState,i=0;n!==null&&(i=n.retryLane),Bp(s,i)}function $v(s,n){var i=0;switch(s.tag){case 13:var c=s.stateNode,u=s.memoizedState;u!==null&&(i=u.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(n),Bp(s,i)}function Bv(s,n){return Yc(s,n)}var Eo=null,Tl=null,_u=!1,Ao=!1,qu=!1,Mn=0;function Ws(s){s!==Tl&&s.next===null&&(Tl===null?Eo=Tl=s:Tl=Tl.next=s),Ao=!0,_u||(_u=!0,Qv())}function Hr(s,n){if(!qu&&Ao){qu=!0;do for(var i=!1,c=Eo;c!==null;){if(s!==0){var u=c.pendingLanes;if(u===0)var f=0;else{var k=c.suspendedLanes,R=c.pingedLanes;f=(1<<31-os(42|s)+1)-1,f&=u&~(k&~R),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Kp(c,f))}else f=Ke,f=Mi(c,c===ot?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||rr(c,f)||(i=!0,Kp(c,f));c=c.next}while(i);qu=!1}}function Hv(){Hp()}function Hp(){Ao=_u=!1;var s=0;Mn!==0&&(Jv()&&(s=Mn),Mn=0);for(var n=Qs(),i=null,c=Eo;c!==null;){var u=c.next,f=Qp(c,n);f===0?(c.next=null,i===null?Eo=u:i.next=u,u===null&&(Tl=i)):(i=c,(s!==0||(f&3)!==0)&&(Ao=!0)),c=u}Hr(s)}function Qp(s,n){for(var i=s.suspendedLanes,c=s.pingedLanes,u=s.expirationTimes,f=s.pendingLanes&-62914561;0<f;){var k=31-os(f),R=1<<k,I=u[k];I===-1?((R&i)===0||(R&c)!==0)&&(u[k]=pw(R,n)):I<=n&&(s.expiredLanes|=R),f&=~R}if(n=ot,i=Ke,i=Mi(s,s===n?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,i===0||s===n&&(at===2||at===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Wc(c),s.callbackNode=null,s.callbackPriority=0;if((i&3)===0||rr(s,i)){if(n=i&-i,n===s.callbackPriority)return n;switch(c!==null&&Wc(c),Jc(i)){case 2:case 8:i=Df;break;case 32:i=Ri;break;case 268435456:i=_f;break;default:i=Ri}return c=Gp.bind(null,s),i=Yc(i,c),s.callbackPriority=n,s.callbackNode=i,n}return c!==null&&c!==null&&Wc(c),s.callbackPriority=2,s.callbackNode=null,2}function Gp(s,n){if(Tt!==0&&Tt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var i=s.callbackNode;if(ko()&&s.callbackNode!==i)return null;var c=Ke;return c=Mi(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Ap(s,c,n),Qp(s,Qs()),s.callbackNode!=null&&s.callbackNode===i?Gp.bind(null,s):null)}function Kp(s,n){if(ko())return null;Ap(s,n,!0)}function Qv(){tj(function(){(st&6)!==0?Yc(Ff,Hv):Hp()})}function zu(){return Mn===0&&(Mn=qf()),Mn}function Vp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:qi(""+s)}function Yp(s,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,s.id&&i.setAttribute("form",s.id),n.parentNode.insertBefore(i,n),s=new FormData(s),i.parentNode.removeChild(i),s}function Gv(s,n,i,c,u){if(n==="submit"&&i&&i.stateNode===u){var f=Vp((u[Yt]||null).action),k=c.submitter;k&&(n=(n=k[Yt]||null)?Vp(n.formAction):k.getAttribute("formAction"),n!==null&&(f=n,k=null));var R=new $i("action","action",null,c,u);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Mn!==0){var I=k?Yp(u,k):new FormData(u);lu(i,{pending:!0,data:I,method:u.method,action:f},null,I)}}else typeof f=="function"&&(R.preventDefault(),I=k?Yp(u,k):new FormData(u),lu(i,{pending:!0,data:I,method:u.method,action:f},f,I))},currentTarget:u}]})}}for(var Uu=0;Uu<Sd.length;Uu++){var Iu=Sd[Uu],Kv=Iu.toLowerCase(),Vv=Iu[0].toUpperCase()+Iu.slice(1);Fs(Kv,"on"+Vv)}Fs(Ah,"onAnimationEnd"),Fs(Oh,"onAnimationIteration"),Fs(Rh,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(uv,"onTransitionRun"),Fs(mv,"onTransitionStart"),Fs(fv,"onTransitionCancel"),Fs(Th,"onTransitionEnd"),tl("onMouseEnter",["mouseout","mouseover"]),tl("onMouseLeave",["mouseout","mouseover"]),tl("onPointerEnter",["pointerout","pointerover"]),tl("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qr));function Wp(s,n){n=(n&4)!==0;for(var i=0;i<s.length;i++){var c=s[i],u=c.event;c=c.listeners;e:{var f=void 0;if(n)for(var k=c.length-1;0<=k;k--){var R=c[k],I=R.instance,ne=R.currentTarget;if(R=R.listener,I!==f&&u.isPropagationStopped())break e;f=R,u.currentTarget=ne;try{f(u)}catch(he){xo(he)}u.currentTarget=null,f=I}else for(k=0;k<c.length;k++){if(R=c[k],I=R.instance,ne=R.currentTarget,R=R.listener,I!==f&&u.isPropagationStopped())break e;f=R,u.currentTarget=ne;try{f(u)}catch(he){xo(he)}u.currentTarget=null,f=I}}}}function Be(s,n){var i=n[ed];i===void 0&&(i=n[ed]=new Set);var c=s+"__bubble";i.has(c)||(Xp(n,s,2,!1),i.add(c))}function $u(s,n,i){var c=0;n&&(c|=4),Xp(i,s,c,n)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Bu(s){if(!s[Oo]){s[Oo]=!0,Hf.forEach(function(i){i!=="selectionchange"&&(Yv.has(i)||$u(i,!1,s),$u(i,!0,s))});var n=s.nodeType===9?s:s.ownerDocument;n===null||n[Oo]||(n[Oo]=!0,$u("selectionchange",!1,n))}}function Xp(s,n,i,c){switch(vg(n)){case 2:var u=jj;break;case 8:u=Nj;break;default:u=am}i=u.bind(null,n,i,s),u=void 0,!ud||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),c?u!==void 0?s.addEventListener(n,i,{capture:!0,passive:u}):s.addEventListener(n,i,!0):u!==void 0?s.addEventListener(n,i,{passive:u}):s.addEventListener(n,i,!1)}function Hu(s,n,i,c,u){var f=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var k=c.tag;if(k===3||k===4){var R=c.stateNode.containerInfo;if(R===u)break;if(k===4)for(k=c.return;k!==null;){var I=k.tag;if((I===3||I===4)&&k.stateNode.containerInfo===u)return;k=k.return}for(;R!==null;){if(k=Zn(R),k===null)return;if(I=k.tag,I===5||I===6||I===26||I===27){c=f=k;continue e}R=R.parentNode}}c=c.return}nh(function(){var ne=f,he=cd(i),pe=[];e:{var re=Ph.get(s);if(re!==void 0){var oe=$i,Pe=s;switch(s){case"keypress":if(Ui(i)===0)break e;case"keydown":case"keyup":oe=Bw;break;case"focusin":Pe="focus",oe=xd;break;case"focusout":Pe="blur",oe=xd;break;case"beforeblur":case"afterblur":oe=xd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Tw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Gw;break;case Ah:case Oh:case Rh:oe=Lw;break;case Th:oe=Vw;break;case"scroll":case"scrollend":oe=Ow;break;case"wheel":oe=Ww;break;case"copy":case"cut":case"paste":oe=Dw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ch;break;case"toggle":case"beforetoggle":oe=Zw}var Oe=(n&4)!==0,rt=!Oe&&(s==="scroll"||s==="scrollend"),J=Oe?re!==null?re+"Capture":null:re;Oe=[];for(var G=ne,se;G!==null;){var xe=G;if(se=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||se===null||J===null||(xe=dr(G,J),xe!=null&&Oe.push(Gr(G,xe,se))),rt)break;G=G.return}0<Oe.length&&(re=new oe(re,Pe,null,i,he),pe.push({event:re,listeners:Oe}))}}if((n&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",oe=s==="mouseout"||s==="pointerout",re&&i!==od&&(Pe=i.relatedTarget||i.fromElement)&&(Zn(Pe)||Pe[Xn]))break e;if((oe||re)&&(re=he.window===he?he:(re=he.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Pe=i.relatedTarget||i.toElement,oe=ne,Pe=Pe?Zn(Pe):null,Pe!==null&&(rt=d(Pe),Oe=Pe.tag,Pe!==rt||Oe!==5&&Oe!==27&&Oe!==6)&&(Pe=null)):(oe=null,Pe=ne),oe!==Pe)){if(Oe=ih,xe="onMouseLeave",J="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=ch,xe="onPointerLeave",J="onPointerEnter",G="pointer"),rt=oe==null?re:cr(oe),se=Pe==null?re:cr(Pe),re=new Oe(xe,G+"leave",oe,i,he),re.target=rt,re.relatedTarget=se,xe=null,Zn(he)===ne&&(Oe=new Oe(J,G+"enter",Pe,i,he),Oe.target=se,Oe.relatedTarget=rt,xe=Oe),rt=xe,oe&&Pe)t:{for(Oe=oe,J=Pe,G=0,se=Oe;se;se=Pl(se))G++;for(se=0,xe=J;xe;xe=Pl(xe))se++;for(;0<G-se;)Oe=Pl(Oe),G--;for(;0<se-G;)J=Pl(J),se--;for(;G--;){if(Oe===J||J!==null&&Oe===J.alternate)break t;Oe=Pl(Oe),J=Pl(J)}Oe=null}else Oe=null;oe!==null&&Zp(pe,re,oe,Oe,!1),Pe!==null&&rt!==null&&Zp(pe,rt,Pe,Oe,!0)}}e:{if(re=ne?cr(ne):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var je=gh;else if(xh(re))if(bh)je=ov;else{je=rv;var Ie=lv}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&id(ne.elementType)&&(je=gh):je=iv;if(je&&(je=je(s,ne))){ph(pe,je,i,he);break e}Ie&&Ie(s,re,ne),s==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&rd(re,"number",re.value)}switch(Ie=ne?cr(ne):window,s){case"focusin":(xh(Ie)||Ie.contentEditable==="true")&&(ol=Ie,vd=ne,br=null);break;case"focusout":br=vd=ol=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,kh(pe,i,he);break;case"selectionchange":if(dv)break;case"keydown":case"keyup":kh(pe,i,he)}var Ce;if(gd)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else il?fh(s,i)&&(Re="onCompositionEnd"):s==="keydown"&&i.keyCode===229&&(Re="onCompositionStart");Re&&(dh&&i.locale!=="ko"&&(il||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&il&&(Ce=lh()):(Ta=he,md="value"in Ta?Ta.value:Ta.textContent,il=!0)),Ie=Ro(ne,Re),0<Ie.length&&(Re=new oh(Re,s,null,i,he),pe.push({event:Re,listeners:Ie}),Ce?Re.data=Ce:(Ce=hh(i),Ce!==null&&(Re.data=Ce)))),(Ce=ev?tv(s,i):sv(s,i))&&(Re=Ro(ne,"onBeforeInput"),0<Re.length&&(Ie=new oh("onBeforeInput","beforeinput",null,i,he),pe.push({event:Ie,listeners:Re}),Ie.data=Ce)),Gv(pe,s,ne,i,he)}Wp(pe,n)})}function Gr(s,n,i){return{instance:s,listener:n,currentTarget:i}}function Ro(s,n){for(var i=n+"Capture",c=[];s!==null;){var u=s,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=dr(s,i),u!=null&&c.unshift(Gr(s,u,f)),u=dr(s,n),u!=null&&c.push(Gr(s,u,f))),s.tag===3)return c;s=s.return}return[]}function Pl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Zp(s,n,i,c,u){for(var f=n._reactName,k=[];i!==null&&i!==c;){var R=i,I=R.alternate,ne=R.stateNode;if(R=R.tag,I!==null&&I===c)break;R!==5&&R!==26&&R!==27||ne===null||(I=ne,u?(ne=dr(i,f),ne!=null&&k.unshift(Gr(i,ne,I))):u||(ne=dr(i,f),ne!=null&&k.push(Gr(i,ne,I)))),i=i.return}k.length!==0&&s.push({event:n,listeners:k})}var Wv=/\r\n?/g,Xv=/\u0000|\uFFFD/g;function Jp(s){return(typeof s=="string"?s:""+s).replace(Wv,`
`).replace(Xv,"")}function eg(s,n){return n=Jp(n),Jp(s)===n}function To(){}function lt(s,n,i,c,u,f){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||nl(s,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&nl(s,""+c);break;case"className":Fi(s,"class",c);break;case"tabIndex":Fi(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Fi(s,i,c);break;case"style":sh(s,c,f);break;case"data":if(n!=="object"){Fi(s,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){s.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&lt(s,n,"name",u.name,u,null),lt(s,n,"formEncType",u.formEncType,u,null),lt(s,n,"formMethod",u.formMethod,u,null),lt(s,n,"formTarget",u.formTarget,u,null)):(lt(s,n,"encType",u.encType,u,null),lt(s,n,"method",u.method,u,null),lt(s,n,"target",u.target,u,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"onClick":c!=null&&(s.onclick=To);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(r(60));s.innerHTML=i}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}i=qi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""+c):s.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""):s.removeAttribute(i);break;case"capture":case"download":c===!0?s.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,c):s.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(i,c):s.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(i):s.setAttribute(i,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),Li(s,"popover",c);break;case"xlinkActuate":na(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":na(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":na(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":na(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":na(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":na(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":na(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":na(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":na(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Li(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Ew.get(i)||i,Li(s,i,c))}}function Qu(s,n,i,c,u,f){switch(i){case"style":sh(s,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(r(60));s.innerHTML=i}}break;case"children":typeof c=="string"?nl(s,c):(typeof c=="number"||typeof c=="bigint")&&nl(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=To);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qf.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=s[Yt]||null,f=f!=null?f[i]:null,typeof f=="function"&&s.removeEventListener(n,f,u),typeof c=="function")){typeof f!="function"&&f!==null&&(i in s?s[i]=null:s.hasAttribute(i)&&s.removeAttribute(i)),s.addEventListener(n,c,u);break e}i in s?s[i]=c:c===!0?s.setAttribute(i,""):Li(s,i,c)}}}function Pt(s,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var k=i[f];if(k!=null)switch(f){case"src":c=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(s,n,f,k,i,null)}}u&&lt(s,n,"srcSet",i.srcSet,i,null),c&&lt(s,n,"src",i.src,i,null);return;case"input":Be("invalid",s);var R=f=k=u=null,I=null,ne=null;for(c in i)if(i.hasOwnProperty(c)){var he=i[c];if(he!=null)switch(c){case"name":u=he;break;case"type":k=he;break;case"checked":I=he;break;case"defaultChecked":ne=he;break;case"value":f=he;break;case"defaultValue":R=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,n));break;default:lt(s,n,c,he,i,null)}}Zf(s,f,R,I,ne,k,u,!1),Di(s);return;case"select":Be("invalid",s),c=k=f=null;for(u in i)if(i.hasOwnProperty(u)&&(R=i[u],R!=null))switch(u){case"value":f=R;break;case"defaultValue":k=R;break;case"multiple":c=R;default:lt(s,n,u,R,i,null)}n=f,i=k,s.multiple=!!c,n!=null?al(s,!!c,n,!1):i!=null&&al(s,!!c,i,!0);return;case"textarea":Be("invalid",s),f=u=c=null;for(k in i)if(i.hasOwnProperty(k)&&(R=i[k],R!=null))switch(k){case"value":c=R;break;case"defaultValue":u=R;break;case"children":f=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:lt(s,n,k,R,i,null)}eh(s,c,u,f),Di(s);return;case"option":for(I in i)if(i.hasOwnProperty(I)&&(c=i[I],c!=null))switch(I){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(s,n,I,c,i,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<Qr.length;c++)Be(Qr[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in i)if(i.hasOwnProperty(ne)&&(c=i[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(s,n,ne,c,i,null)}return;default:if(id(n)){for(he in i)i.hasOwnProperty(he)&&(c=i[he],c!==void 0&&Qu(s,n,he,c,i,void 0));return}}for(R in i)i.hasOwnProperty(R)&&(c=i[R],c!=null&&lt(s,n,R,c,i,null))}function Zv(s,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,k=null,R=null,I=null,ne=null,he=null;for(oe in i){var pe=i[oe];if(i.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":I=pe;default:c.hasOwnProperty(oe)||lt(s,n,oe,null,c,pe)}}for(var re in c){var oe=c[re];if(pe=i[re],c.hasOwnProperty(re)&&(oe!=null||pe!=null))switch(re){case"type":f=oe;break;case"name":u=oe;break;case"checked":ne=oe;break;case"defaultChecked":he=oe;break;case"value":k=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,n));break;default:oe!==pe&&lt(s,n,re,oe,c,pe)}}ld(s,k,R,I,ne,he,f,u);return;case"select":oe=k=R=re=null;for(f in i)if(I=i[f],i.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":oe=I;default:c.hasOwnProperty(f)||lt(s,n,f,null,c,I)}for(u in c)if(f=c[u],I=i[u],c.hasOwnProperty(u)&&(f!=null||I!=null))switch(u){case"value":re=f;break;case"defaultValue":R=f;break;case"multiple":k=f;default:f!==I&&lt(s,n,u,f,c,I)}n=R,i=k,c=oe,re!=null?al(s,!!i,re,!1):!!c!=!!i&&(n!=null?al(s,!!i,n,!0):al(s,!!i,i?[]:"",!1));return;case"textarea":oe=re=null;for(R in i)if(u=i[R],i.hasOwnProperty(R)&&u!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:lt(s,n,R,null,c,u)}for(k in c)if(u=c[k],f=i[k],c.hasOwnProperty(k)&&(u!=null||f!=null))switch(k){case"value":re=u;break;case"defaultValue":oe=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==f&&lt(s,n,k,u,c,f)}Jf(s,re,oe);return;case"option":for(var Pe in i)if(re=i[Pe],i.hasOwnProperty(Pe)&&re!=null&&!c.hasOwnProperty(Pe))switch(Pe){case"selected":s.selected=!1;break;default:lt(s,n,Pe,null,c,re)}for(I in c)if(re=c[I],oe=i[I],c.hasOwnProperty(I)&&re!==oe&&(re!=null||oe!=null))switch(I){case"selected":s.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:lt(s,n,I,re,c,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in i)re=i[Oe],i.hasOwnProperty(Oe)&&re!=null&&!c.hasOwnProperty(Oe)&&lt(s,n,Oe,null,c,re);for(ne in c)if(re=c[ne],oe=i[ne],c.hasOwnProperty(ne)&&re!==oe&&(re!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,n));break;default:lt(s,n,ne,re,c,oe)}return;default:if(id(n)){for(var rt in i)re=i[rt],i.hasOwnProperty(rt)&&re!==void 0&&!c.hasOwnProperty(rt)&&Qu(s,n,rt,void 0,c,re);for(he in c)re=c[he],oe=i[he],!c.hasOwnProperty(he)||re===oe||re===void 0&&oe===void 0||Qu(s,n,he,re,c,oe);return}}for(var J in i)re=i[J],i.hasOwnProperty(J)&&re!=null&&!c.hasOwnProperty(J)&&lt(s,n,J,null,c,re);for(pe in c)re=c[pe],oe=i[pe],!c.hasOwnProperty(pe)||re===oe||re==null&&oe==null||lt(s,n,pe,re,c,oe)}var Gu=null,Ku=null;function Po(s){return s.nodeType===9?s:s.ownerDocument}function tg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sg(s,n){if(s===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&n==="foreignObject"?0:s}function Vu(s,n){return s==="textarea"||s==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Yu=null;function Jv(){var s=window.event;return s&&s.type==="popstate"?s===Yu?!1:(Yu=s,!0):(Yu=null,!1)}var ag=typeof setTimeout=="function"?setTimeout:void 0,ej=typeof clearTimeout=="function"?clearTimeout:void 0,ng=typeof Promise=="function"?Promise:void 0,tj=typeof queueMicrotask=="function"?queueMicrotask:typeof ng<"u"?function(s){return ng.resolve(null).then(s).catch(sj)}:ag;function sj(s){setTimeout(function(){throw s})}function Ka(s){return s==="head"}function lg(s,n){var i=n,c=0,u=0;do{var f=i.nextSibling;if(s.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<c&&8>c){i=c;var k=s.ownerDocument;if(i&1&&Kr(k.documentElement),i&2&&Kr(k.body),i&4)for(i=k.head,Kr(i),k=i.firstChild;k;){var R=k.nextSibling,I=k.nodeName;k[or]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&k.rel.toLowerCase()==="stylesheet"||i.removeChild(k),k=R}}if(u===0){s.removeChild(f),ti(n);return}u--}else i==="$"||i==="$?"||i==="$!"?u++:c=i.charCodeAt(0)-48;else c=0;i=f}while(i);ti(n)}function Wu(s){var n=s.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Wu(i),td(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}s.removeChild(i)}}function aj(s,n,i,c){for(;s.nodeType===1;){var u=i;if(s.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[or])switch(n){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(f=s.getAttribute("rel"),f==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(f!==u.rel||s.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||s.getAttribute("title")!==(u.title==null?null:u.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(f=s.getAttribute("src"),(f!==(u.src==null?null:u.src)||s.getAttribute("type")!==(u.type==null?null:u.type)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(n==="input"&&s.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&s.getAttribute("name")===f)return s}else return s;if(s=_s(s.nextSibling),s===null)break}return null}function nj(s,n,i){if(n==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=_s(s.nextSibling),s===null))return null;return s}function Xu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function lj(s,n){var i=s.ownerDocument;if(s.data!=="$?"||i.readyState==="complete")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function _s(s){for(;s!=null;s=s.nextSibling){var n=s.nodeType;if(n===1||n===3)break;if(n===8){if(n=s.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return s}var Zu=null;function rg(s){s=s.previousSibling;for(var n=0;s;){if(s.nodeType===8){var i=s.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return s;n--}else i==="/$"&&n++}s=s.previousSibling}return null}function ig(s,n,i){switch(n=Po(i),s){case"html":if(s=n.documentElement,!s)throw Error(r(452));return s;case"head":if(s=n.head,!s)throw Error(r(453));return s;case"body":if(s=n.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Kr(s){for(var n=s.attributes;n.length;)s.removeAttributeNode(n[0]);td(s)}var Rs=new Map,og=new Set;function Mo(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ba=W.d;W.d={f:rj,r:ij,D:oj,C:cj,L:dj,m:uj,X:fj,S:mj,M:hj};function rj(){var s=ba.f(),n=So();return s||n}function ij(s){var n=Jn(s);n!==null&&n.tag===5&&n.type==="form"?Ax(n):ba.r(s)}var Ml=typeof document>"u"?null:document;function cg(s,n,i){var c=Ml;if(c&&typeof n=="string"&&n){var u=Ns(n);u='link[rel="'+s+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),og.has(u)||(og.add(u),s={rel:s,crossOrigin:i,href:n},c.querySelector(u)===null&&(n=c.createElement("link"),Pt(n,"link",s),kt(n),c.head.appendChild(n)))}}function oj(s){ba.D(s),cg("dns-prefetch",s,null)}function cj(s,n){ba.C(s,n),cg("preconnect",s,n)}function dj(s,n,i){ba.L(s,n,i);var c=Ml;if(c&&s&&n){var u='link[rel="preload"][as="'+Ns(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+Ns(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+Ns(i.imageSizes)+'"]')):u+='[href="'+Ns(s)+'"]';var f=u;switch(n){case"style":f=Ll(s);break;case"script":f=Fl(s)}Rs.has(f)||(s=g({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:s,as:n},i),Rs.set(f,s),c.querySelector(u)!==null||n==="style"&&c.querySelector(Vr(f))||n==="script"&&c.querySelector(Yr(f))||(n=c.createElement("link"),Pt(n,"link",s),kt(n),c.head.appendChild(n)))}}function uj(s,n){ba.m(s,n);var i=Ml;if(i&&s){var c=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Ns(c)+'"][href="'+Ns(s)+'"]',f=u;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Fl(s)}if(!Rs.has(f)&&(s=g({rel:"modulepreload",href:s},n),Rs.set(f,s),i.querySelector(u)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Yr(f)))return}c=i.createElement("link"),Pt(c,"link",s),kt(c),i.head.appendChild(c)}}}function mj(s,n,i){ba.S(s,n,i);var c=Ml;if(c&&s){var u=el(c).hoistableStyles,f=Ll(s);n=n||"default";var k=u.get(f);if(!k){var R={loading:0,preload:null};if(k=c.querySelector(Vr(f)))R.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":n},i),(i=Rs.get(f))&&Ju(s,i);var I=k=c.createElement("link");kt(I),Pt(I,"link",s),I._p=new Promise(function(ne,he){I.onload=ne,I.onerror=he}),I.addEventListener("load",function(){R.loading|=1}),I.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Lo(k,n,c)}k={type:"stylesheet",instance:k,count:1,state:R},u.set(f,k)}}}function fj(s,n){ba.X(s,n);var i=Ml;if(i&&s){var c=el(i).hoistableScripts,u=Fl(s),f=c.get(u);f||(f=i.querySelector(Yr(u)),f||(s=g({src:s,async:!0},n),(n=Rs.get(u))&&em(s,n),f=i.createElement("script"),kt(f),Pt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function hj(s,n){ba.M(s,n);var i=Ml;if(i&&s){var c=el(i).hoistableScripts,u=Fl(s),f=c.get(u);f||(f=i.querySelector(Yr(u)),f||(s=g({src:s,async:!0,type:"module"},n),(n=Rs.get(u))&&em(s,n),f=i.createElement("script"),kt(f),Pt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function dg(s,n,i,c){var u=(u=ae.current)?Mo(u):null;if(!u)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Ll(i.href),i=el(u).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){s=Ll(i.href);var f=el(u).hoistableStyles,k=f.get(s);if(k||(u=u.ownerDocument||u,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(s,k),(f=u.querySelector(Vr(s)))&&!f._p&&(k.instance=f,k.state.loading=5),Rs.has(s)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Rs.set(s,i),f||xj(u,s,i,k.state))),n&&c===null)throw Error(r(528,""));return k}if(n&&c!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Fl(i),i=el(u).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ll(s){return'href="'+Ns(s)+'"'}function Vr(s){return'link[rel="stylesheet"]['+s+"]"}function ug(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function xj(s,n,i,c){s.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=s.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Pt(n,"link",i),kt(n),s.head.appendChild(n))}function Fl(s){return'[src="'+Ns(s)+'"]'}function Yr(s){return"script[async]"+s}function mg(s,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=s.querySelector('style[data-href~="'+Ns(i.href)+'"]');if(c)return n.instance=c,kt(c),c;var u=g({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),kt(c),Pt(c,"style",u),Lo(c,i.precedence,s),n.instance=c;case"stylesheet":u=Ll(i.href);var f=s.querySelector(Vr(u));if(f)return n.state.loading|=4,n.instance=f,kt(f),f;c=ug(i),(u=Rs.get(u))&&Ju(c,u),f=(s.ownerDocument||s).createElement("link"),kt(f);var k=f;return k._p=new Promise(function(R,I){k.onload=R,k.onerror=I}),Pt(f,"link",c),n.state.loading|=4,Lo(f,i.precedence,s),n.instance=f;case"script":return f=Fl(i.src),(u=s.querySelector(Yr(f)))?(n.instance=u,kt(u),u):(c=i,(u=Rs.get(f))&&(c=g({},i),em(c,u)),s=s.ownerDocument||s,u=s.createElement("script"),kt(u),Pt(u,"link",c),s.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Lo(c,i.precedence,s));return n.instance}function Lo(s,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=c.length?c[c.length-1]:null,f=u,k=0;k<c.length;k++){var R=c[k];if(R.dataset.precedence===n)f=R;else if(f!==u)break}f?f.parentNode.insertBefore(s,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(s,n.firstChild))}function Ju(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.title==null&&(s.title=n.title)}function em(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.integrity==null&&(s.integrity=n.integrity)}var Fo=null;function fg(s,n,i){if(Fo===null){var c=new Map,u=Fo=new Map;u.set(i,c)}else u=Fo,c=u.get(i),c||(c=new Map,u.set(i,c));if(c.has(s))return c;for(c.set(s,null),i=i.getElementsByTagName(s),u=0;u<i.length;u++){var f=i[u];if(!(f[or]||f[_t]||s==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var k=f.getAttribute(n)||"";k=s+k;var R=c.get(k);R?R.push(f):c.set(k,[f])}}return c}function hg(s,n,i){s=s.ownerDocument||s,s.head.insertBefore(i,n==="title"?s.querySelector("head > title"):null)}function pj(s,n,i){if(i===1||n.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return s=n.disabled,typeof n.precedence=="string"&&s==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function xg(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Wr=null;function gj(){}function bj(s,n,i){if(Wr===null)throw Error(r(475));var c=Wr;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=Ll(i.href),f=s.querySelector(Vr(u));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=Do.bind(c),s.then(c,c)),n.state.loading|=4,n.instance=f,kt(f);return}f=s.ownerDocument||s,i=ug(i),(u=Rs.get(u))&&Ju(i,u),f=f.createElement("link"),kt(f);var k=f;k._p=new Promise(function(R,I){k.onload=R,k.onerror=I}),Pt(f,"link",i),n.instance=f}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(n,s),(s=n.state.preload)&&(n.state.loading&3)===0&&(c.count++,n=Do.bind(c),s.addEventListener("load",n),s.addEventListener("error",n))}}function yj(){if(Wr===null)throw Error(r(475));var s=Wr;return s.stylesheets&&s.count===0&&tm(s,s.stylesheets),0<s.count?function(n){var i=setTimeout(function(){if(s.stylesheets&&tm(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=n,function(){s.unsuspend=null,clearTimeout(i)}}:null}function Do(){if(this.count--,this.count===0){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var _o=null;function tm(s,n){s.stylesheets=null,s.unsuspend!==null&&(s.count++,_o=new Map,n.forEach(wj,s),_o=null,Do.call(s))}function wj(s,n){if(!(n.state.loading&4)){var i=_o.get(s);if(i)var c=i.get(null);else{i=new Map,_o.set(s,i);for(var u=s.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var k=u[f];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(i.set(k.dataset.precedence,k),c=k)}c&&i.set(null,c)}u=n.instance,k=u.getAttribute("data-precedence"),f=i.get(k)||c,f===c&&i.set(null,u),i.set(k,u),this.count++,c=Do.bind(this),u.addEventListener("load",c),u.addEventListener("error",c),f?f.parentNode.insertBefore(u,f.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(u,s.firstChild)),n.state.loading|=4}}var Xr={$$typeof:N,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function vj(s,n,i,c,u,f,k,R){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.hiddenUpdates=Xc(null),this.identifierPrefix=c,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function pg(s,n,i,c,u,f,k,R,I,ne,he,pe){return s=new vj(s,n,i,k,R,I,ne,pe),n=1,f===!0&&(n|=24),f=ds(3,null,null,n),s.current=f,f.stateNode=s,n=Dd(),n.refCount++,s.pooledCache=n,n.refCount++,f.memoizedState={element:c,isDehydrated:i,cache:n},Ud(f),s}function gg(s){return s?(s=ml,s):ml}function bg(s,n,i,c,u,f){u=gg(u),c.context===null?c.context=u:c.pendingContext=u,c=La(n),c.payload={element:i},f=f===void 0?null:f,f!==null&&(c.callback=f),i=Fa(s,c,n),i!==null&&(xs(i,s,n),Er(i,s,n))}function yg(s,n){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var i=s.retryLane;s.retryLane=i!==0&&i<n?i:n}}function sm(s,n){yg(s,n),(s=s.alternate)&&yg(s,n)}function wg(s){if(s.tag===13){var n=ul(s,67108864);n!==null&&xs(n,s,67108864),sm(s,67108864)}}var qo=!0;function jj(s,n,i,c){var u=_.T;_.T=null;var f=W.p;try{W.p=2,am(s,n,i,c)}finally{W.p=f,_.T=u}}function Nj(s,n,i,c){var u=_.T;_.T=null;var f=W.p;try{W.p=8,am(s,n,i,c)}finally{W.p=f,_.T=u}}function am(s,n,i,c){if(qo){var u=nm(c);if(u===null)Hu(s,n,c,zo,i),jg(s,c);else if(Cj(u,s,n,i,c))c.stopPropagation();else if(jg(s,c),n&4&&-1<Sj.indexOf(s)){for(;u!==null;){var f=Jn(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var k=pn(f.pendingLanes);if(k!==0){var R=f;for(R.pendingLanes|=2,R.entangledLanes|=2;k;){var I=1<<31-os(k);R.entanglements[1]|=I,k&=~I}Ws(f),(st&6)===0&&(jo=Qs()+500,Hr(0))}}break;case 13:R=ul(f,2),R!==null&&xs(R,f,2),So(),sm(f,2)}if(f=nm(c),f===null&&Hu(s,n,c,zo,i),f===u)break;u=f}u!==null&&c.stopPropagation()}else Hu(s,n,c,null,i)}}function nm(s){return s=cd(s),lm(s)}var zo=null;function lm(s){if(zo=null,s=Zn(s),s!==null){var n=d(s);if(n===null)s=null;else{var i=n.tag;if(i===13){if(s=m(n),s!==null)return s;s=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;s=null}else n!==s&&(s=null)}}return zo=s,null}function vg(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cw()){case Ff:return 2;case Df:return 8;case Ri:case dw:return 32;case _f:return 268435456;default:return 32}default:return 32}}var rm=!1,Va=null,Ya=null,Wa=null,Zr=new Map,Jr=new Map,Xa=[],Sj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jg(s,n){switch(s){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Zr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(n.pointerId)}}function ei(s,n,i,c,u,f){return s===null||s.nativeEvent!==f?(s={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Jn(n),n!==null&&wg(n)),s):(s.eventSystemFlags|=c,n=s.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),s)}function Cj(s,n,i,c,u){switch(n){case"focusin":return Va=ei(Va,s,n,i,c,u),!0;case"dragenter":return Ya=ei(Ya,s,n,i,c,u),!0;case"mouseover":return Wa=ei(Wa,s,n,i,c,u),!0;case"pointerover":var f=u.pointerId;return Zr.set(f,ei(Zr.get(f)||null,s,n,i,c,u)),!0;case"gotpointercapture":return f=u.pointerId,Jr.set(f,ei(Jr.get(f)||null,s,n,i,c,u)),!0}return!1}function Ng(s){var n=Zn(s.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){s.blockedOn=n,bw(s.priority,function(){if(i.tag===13){var c=hs();c=Zc(c);var u=ul(i,c);u!==null&&xs(u,i,c),sm(i,c)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){s.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Uo(s){if(s.blockedOn!==null)return!1;for(var n=s.targetContainers;0<n.length;){var i=nm(s.nativeEvent);if(i===null){i=s.nativeEvent;var c=new i.constructor(i.type,i);od=c,i.target.dispatchEvent(c),od=null}else return n=Jn(i),n!==null&&wg(n),s.blockedOn=i,!1;n.shift()}return!0}function Sg(s,n,i){Uo(s)&&i.delete(n)}function kj(){rm=!1,Va!==null&&Uo(Va)&&(Va=null),Ya!==null&&Uo(Ya)&&(Ya=null),Wa!==null&&Uo(Wa)&&(Wa=null),Zr.forEach(Sg),Jr.forEach(Sg)}function Io(s,n){s.blockedOn===n&&(s.blockedOn=null,rm||(rm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kj)))}var $o=null;function Cg(s){$o!==s&&($o=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$o===s&&($o=null);for(var n=0;n<s.length;n+=3){var i=s[n],c=s[n+1],u=s[n+2];if(typeof c!="function"){if(lm(c||i)===null)continue;break}var f=Jn(i);f!==null&&(s.splice(n,3),n-=3,lu(f,{pending:!0,data:u,method:i.method,action:c},c,u))}}))}function ti(s){function n(I){return Io(I,s)}Va!==null&&Io(Va,s),Ya!==null&&Io(Ya,s),Wa!==null&&Io(Wa,s),Zr.forEach(n),Jr.forEach(n);for(var i=0;i<Xa.length;i++){var c=Xa[i];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Xa.length&&(i=Xa[0],i.blockedOn===null);)Ng(i),i.blockedOn===null&&Xa.shift();if(i=(s.ownerDocument||s).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var u=i[c],f=i[c+1],k=u[Yt]||null;if(typeof f=="function")k||Cg(i);else if(k){var R=null;if(f&&f.hasAttribute("formAction")){if(u=f,k=f[Yt]||null)R=k.formAction;else if(lm(u)!==null)continue}else R=k.action;typeof R=="function"?i[c+1]=R:(i.splice(c,3),c-=3),Cg(i)}}}function im(s){this._internalRoot=s}Bo.prototype.render=im.prototype.render=function(s){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,c=hs();bg(i,c,s,n,null,null)},Bo.prototype.unmount=im.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var n=s.containerInfo;bg(s.current,2,null,s,null,null),So(),n[Xn]=null}};function Bo(s){this._internalRoot=s}Bo.prototype.unstable_scheduleHydration=function(s){if(s){var n=$f();s={blockedOn:null,target:s,priority:n};for(var i=0;i<Xa.length&&n!==0&&n<Xa[i].priority;i++);Xa.splice(i,0,s),i===0&&Ng(s)}};var kg=a.version;if(kg!=="19.1.0")throw Error(r(527,kg,"19.1.0"));W.findDOMNode=function(s){var n=s._reactInternals;if(n===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=x(n),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var Ej={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{lr=Ho.inject(Ej),is=Ho}catch{}}return ai.createRoot=function(s,n){if(!o(s))throw Error(r(299));var i=!1,c="",u=$x,f=Bx,k=Hx,R=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(k=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(R=n.unstable_transitionCallbacks)),n=pg(s,1,!1,null,null,i,c,u,f,k,R,null),s[Xn]=n.current,Bu(s),new im(n)},ai.hydrateRoot=function(s,n,i){if(!o(s))throw Error(r(299));var c=!1,u="",f=$x,k=Bx,R=Hx,I=null,ne=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(k=i.onCaughtError),i.onRecoverableError!==void 0&&(R=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(I=i.unstable_transitionCallbacks),i.formState!==void 0&&(ne=i.formState)),n=pg(s,1,!0,n,i??null,c,u,f,k,R,I,ne),n.context=gg(null),i=n.current,c=hs(),c=Zc(c),u=La(c),u.callback=null,Fa(i,u,c),i=c,n.current.lanes=i,ir(n,i),Ws(n),s[Xn]=n.current,Bu(s),new Bo(n)},ai.version="19.1.0",ai}var _g;function qj(){if(_g)return um.exports;_g=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),um.exports=_j(),um.exports}var zj=qj(),ni={},qg;function Uj(){if(qg)return ni;qg=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.parse=m,ni.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,l=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,d=(()=>{const j=function(){};return j.prototype=Object.create(null),j})();function m(j,C){const b=new d,E=j.length;if(E<2)return b;const v=(C==null?void 0:C.decode)||g;let S=0;do{const w=j.indexOf("=",S);if(w===-1)break;const N=j.indexOf(";",S),T=N===-1?E:N;if(w>T){S=j.lastIndexOf(";",w-1)+1;continue}const P=p(j,S,w),L=x(j,w,P),z=j.slice(P,L);if(b[z]===void 0){let q=p(j,w+1,T),B=x(j,T,q);const de=v(j.slice(q,B));b[z]=de}S=T+1}while(S<E);return b}function p(j,C,b){do{const E=j.charCodeAt(C);if(E!==32&&E!==9)return C}while(++C<b);return b}function x(j,C,b){for(;C>b;){const E=j.charCodeAt(--C);if(E!==32&&E!==9)return C+1}return b}function h(j,C,b){const E=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(j))throw new TypeError(`argument name is invalid: ${j}`);const v=E(C);if(!a.test(v))throw new TypeError(`argument val is invalid: ${C}`);let S=j+"="+v;if(!b)return S;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);S+="; Max-Age="+b.maxAge}if(b.domain){if(!l.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);S+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);S+="; Path="+b.path}if(b.expires){if(!y(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);S+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(S+="; HttpOnly"),b.secure&&(S+="; Secure"),b.partitioned&&(S+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return S}function g(j){if(j.indexOf("%")===-1)return j;try{return decodeURIComponent(j)}catch{return j}}function y(j){return o.call(j)==="[object Date]"}return ni}Uj();var zg="popstate";function Ij(t={}){function a(r,o){let{pathname:d,search:m,hash:p}=r.location;return qm("",{pathname:d,search:m,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function l(r,o){return typeof o=="string"?o:mi(o)}return Bj(a,l,null,t)}function ut(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Ps(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function $j(){return Math.random().toString(36).substring(2,10)}function Ug(t,a){return{usr:t.state,key:t.key,idx:a}}function qm(t,a,l=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Wl(a):a,state:l,key:a&&a.key||r||$j()}}function mi({pathname:t="/",search:a="",hash:l=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function Wl(t){let a={};if(t){let l=t.indexOf("#");l>=0&&(a.hash=t.substring(l),t=t.substring(0,l));let r=t.indexOf("?");r>=0&&(a.search=t.substring(r),t=t.substring(0,r)),t&&(a.pathname=t)}return a}function Bj(t,a,l,r={}){let{window:o=document.defaultView,v5Compat:d=!1}=r,m=o.history,p="POP",x=null,h=g();h==null&&(h=0,m.replaceState({...m.state,idx:h},""));function g(){return(m.state||{idx:null}).idx}function y(){p="POP";let v=g(),S=v==null?null:v-h;h=v,x&&x({action:p,location:E.location,delta:S})}function j(v,S){p="PUSH";let w=qm(E.location,v,S);h=g()+1;let N=Ug(w,h),T=E.createHref(w);try{m.pushState(N,"",T)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;o.location.assign(T)}d&&x&&x({action:p,location:E.location,delta:1})}function C(v,S){p="REPLACE";let w=qm(E.location,v,S);h=g();let N=Ug(w,h),T=E.createHref(w);m.replaceState(N,"",T),d&&x&&x({action:p,location:E.location,delta:0})}function b(v){return Hj(v)}let E={get action(){return p},get location(){return t(o,m)},listen(v){if(x)throw new Error("A history only accepts one active listener");return o.addEventListener(zg,y),x=v,()=>{o.removeEventListener(zg,y),x=null}},createHref(v){return a(o,v)},createURL:b,encodeLocation(v){let S=b(v);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:j,replace:C,go(v){return m.go(v)}};return E}function Hj(t,a=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),ut(l,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:mi(t);return r=r.replace(/ $/,"%20"),!a&&r.startsWith("//")&&(r=l+r),new URL(r,l)}function db(t,a,l="/"){return Qj(t,a,l,!1)}function Qj(t,a,l,r){let o=typeof a=="string"?Wl(a):a,d=ka(o.pathname||"/",l);if(d==null)return null;let m=ub(t);Gj(m);let p=null;for(let x=0;p==null&&x<m.length;++x){let h=aN(d);p=tN(m[x],h,r)}return p}function ub(t,a=[],l=[],r=""){let o=(d,m,p)=>{let x={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};x.relativePath.startsWith("/")&&(ut(x.relativePath.startsWith(r),`Absolute route path "${x.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(r.length));let h=Na([r,x.relativePath]),g=l.concat(x);d.children&&d.children.length>0&&(ut(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),ub(d.children,a,g,h)),!(d.path==null&&!d.index)&&a.push({path:h,score:Jj(h,d.index),routesMeta:g})};return t.forEach((d,m)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))o(d,m);else for(let x of mb(d.path))o(d,m,x)}),a}function mb(t){let a=t.split("/");if(a.length===0)return[];let[l,...r]=a,o=l.endsWith("?"),d=l.replace(/\?$/,"");if(r.length===0)return o?[d,""]:[d];let m=mb(r.join("/")),p=[];return p.push(...m.map(x=>x===""?d:[d,x].join("/"))),o&&p.push(...m),p.map(x=>t.startsWith("/")&&x===""?"/":x)}function Gj(t){t.sort((a,l)=>a.score!==l.score?l.score-a.score:eN(a.routesMeta.map(r=>r.childrenIndex),l.routesMeta.map(r=>r.childrenIndex)))}var Kj=/^:[\w-]+$/,Vj=3,Yj=2,Wj=1,Xj=10,Zj=-2,Ig=t=>t==="*";function Jj(t,a){let l=t.split("/"),r=l.length;return l.some(Ig)&&(r+=Zj),a&&(r+=Yj),l.filter(o=>!Ig(o)).reduce((o,d)=>o+(Kj.test(d)?Vj:d===""?Wj:Xj),r)}function eN(t,a){return t.length===a.length&&t.slice(0,-1).every((r,o)=>r===a[o])?t[t.length-1]-a[a.length-1]:0}function tN(t,a,l=!1){let{routesMeta:r}=t,o={},d="/",m=[];for(let p=0;p<r.length;++p){let x=r[p],h=p===r.length-1,g=d==="/"?a:a.slice(d.length)||"/",y=lc({path:x.relativePath,caseSensitive:x.caseSensitive,end:h},g),j=x.route;if(!y&&h&&l&&!r[r.length-1].route.index&&(y=lc({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},g)),!y)return null;Object.assign(o,y.params),m.push({params:o,pathname:Na([d,y.pathname]),pathnameBase:iN(Na([d,y.pathnameBase])),route:j}),y.pathnameBase!=="/"&&(d=Na([d,y.pathnameBase]))}return m}function lc(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[l,r]=sN(t.path,t.caseSensitive,t.end),o=a.match(l);if(!o)return null;let d=o[0],m=d.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:y},j)=>{if(g==="*"){let b=p[j]||"";m=d.slice(0,d.length-b.length).replace(/(.)\/+$/,"$1")}const C=p[j];return y&&!C?h[g]=void 0:h[g]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:d,pathnameBase:m,pattern:t}}function sN(t,a=!1,l=!0){Ps(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,p,x)=>(r.push({paramName:p,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),r]}function aN(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Ps(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ka(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,r=t.charAt(l);return r&&r!=="/"?null:t.slice(l)||"/"}function nN(t,a="/"){let{pathname:l,search:r="",hash:o=""}=typeof t=="string"?Wl(t):t;return{pathname:l?l.startsWith("/")?l:lN(l,a):a,search:oN(r),hash:cN(o)}}function lN(t,a){let l=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?l.length>1&&l.pop():o!=="."&&l.push(o)}),l.length>1?l.join("/"):"/"}function xm(t,a,l,r){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rN(t){return t.filter((a,l)=>l===0||a.route.path&&a.route.path.length>0)}function xf(t){let a=rN(t);return a.map((l,r)=>r===a.length-1?l.pathname:l.pathnameBase)}function pf(t,a,l,r=!1){let o;typeof t=="string"?o=Wl(t):(o={...t},ut(!o.pathname||!o.pathname.includes("?"),xm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),xm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),xm("#","search","hash",o)));let d=t===""||o.pathname==="",m=d?"/":o.pathname,p;if(m==null)p=l;else{let y=a.length-1;if(!r&&m.startsWith("..")){let j=m.split("/");for(;j[0]==="..";)j.shift(),y-=1;o.pathname=j.join("/")}p=y>=0?a[y]:"/"}let x=nN(o,p),h=m&&m!=="/"&&m.endsWith("/"),g=(d||m===".")&&l.endsWith("/");return!x.pathname.endsWith("/")&&(h||g)&&(x.pathname+="/"),x}var Na=t=>t.join("/").replace(/\/\/+/g,"/"),iN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var fb=["POST","PUT","PATCH","DELETE"];new Set(fb);var uN=["GET",...fb];new Set(uN);var Xl=A.createContext(null);Xl.displayName="DataRouter";var Ec=A.createContext(null);Ec.displayName="DataRouterState";var hb=A.createContext({isTransitioning:!1});hb.displayName="ViewTransition";var mN=A.createContext(new Map);mN.displayName="Fetchers";var fN=A.createContext(null);fN.displayName="Await";var Bs=A.createContext(null);Bs.displayName="Navigation";var vi=A.createContext(null);vi.displayName="Location";var Ms=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var gf=A.createContext(null);gf.displayName="RouteError";function hN(t,{relative:a}={}){ut(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:r}=A.useContext(Bs),{hash:o,pathname:d,search:m}=ji(t,{relative:a}),p=d;return l!=="/"&&(p=d==="/"?l:Na([l,d])),r.createHref({pathname:p,search:m,hash:o})}function Zl(){return A.useContext(vi)!=null}function mt(){return ut(Zl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(vi).location}var xb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pb(t){A.useContext(Bs).static||A.useLayoutEffect(t)}function Me(){let{isDataRoute:t}=A.useContext(Ms);return t?AN():xN()}function xN(){ut(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Xl),{basename:a,navigator:l}=A.useContext(Bs),{matches:r}=A.useContext(Ms),{pathname:o}=mt(),d=JSON.stringify(xf(r)),m=A.useRef(!1);return pb(()=>{m.current=!0}),A.useCallback((x,h={})=>{if(Ps(m.current,xb),!m.current)return;if(typeof x=="number"){l.go(x);return}let g=pf(x,JSON.parse(d),o,h.relative==="path");t==null&&a!=="/"&&(g.pathname=g.pathname==="/"?a:Na([a,g.pathname])),(h.replace?l.replace:l.push)(g,h.state,h)},[a,l,d,o,t])}var gb=A.createContext(null);function Ge(){return A.useContext(gb)}function pN(t){let a=A.useContext(Ms).outlet;return a&&A.createElement(gb.Provider,{value:t},a)}function ke(){let{matches:t}=A.useContext(Ms),a=t[t.length-1];return a?a.params:{}}function ji(t,{relative:a}={}){let{matches:l}=A.useContext(Ms),{pathname:r}=mt(),o=JSON.stringify(xf(l));return A.useMemo(()=>pf(t,JSON.parse(o),r,a==="path"),[t,o,r,a])}function gN(t,a){return bb(t,a)}function bb(t,a,l,r){var S;ut(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(Bs),{matches:d}=A.useContext(Ms),m=d[d.length-1],p=m?m.params:{},x=m?m.pathname:"/",h=m?m.pathnameBase:"/",g=m&&m.route;{let w=g&&g.path||"";yb(x,!g||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let y=mt(),j;if(a){let w=typeof a=="string"?Wl(a):a;ut(h==="/"||((S=w.pathname)==null?void 0:S.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${w.pathname}" was given in the \`location\` prop.`),j=w}else j=y;let C=j.pathname||"/",b=C;if(h!=="/"){let w=h.replace(/^\//,"").split("/");b="/"+C.replace(/^\//,"").split("/").slice(w.length).join("/")}let E=db(t,{pathname:b});Ps(g||E!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Ps(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=jN(E&&E.map(w=>Object.assign({},w,{params:Object.assign({},p,w.params),pathname:Na([h,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Na([h,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),d,l,r);return a&&v?A.createElement(vi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},v):v}function bN(){let t=EN(),a=dN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),l=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},d={padding:"2px 4px",backgroundColor:r},m=null;return console.error("Error handled by React Router default ErrorBoundary:",t),m=A.createElement(A.Fragment,null,A.createElement("p",null,"💿 Hey developer 👋"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:d},"ErrorBoundary")," or"," ",A.createElement("code",{style:d},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},a),l?A.createElement("pre",{style:o},l):null,m)}var yN=A.createElement(bN,null),wN=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?A.createElement(Ms.Provider,{value:this.props.routeContext},A.createElement(gf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vN({routeContext:t,match:a,children:l}){let r=A.useContext(Xl);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),A.createElement(Ms.Provider,{value:t},l)}function jN(t,a=[],l=null,r=null){if(t==null){if(!l)return null;if(l.errors)t=l.matches;else if(a.length===0&&!l.initialized&&l.matches.length>0)t=l.matches;else return null}let o=t,d=l==null?void 0:l.errors;if(d!=null){let x=o.findIndex(h=>h.route.id&&(d==null?void 0:d[h.route.id])!==void 0);ut(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,x+1))}let m=!1,p=-1;if(l)for(let x=0;x<o.length;x++){let h=o[x];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(p=x),h.route.id){let{loaderData:g,errors:y}=l,j=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||j){m=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((x,h,g)=>{let y,j=!1,C=null,b=null;l&&(y=d&&h.route.id?d[h.route.id]:void 0,C=h.route.errorElement||yN,m&&(p<0&&g===0?(yb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,b=null):p===g&&(j=!0,b=h.route.hydrateFallbackElement||null)));let E=a.concat(o.slice(0,g+1)),v=()=>{let S;return y?S=C:j?S=b:h.route.Component?S=A.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=x,A.createElement(vN,{match:h,routeContext:{outlet:x,matches:E,isDataRoute:l!=null},children:S})};return l&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(wN,{location:l.location,revalidation:l.revalidation,component:C,error:y,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}function bf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NN(t){let a=A.useContext(Xl);return ut(a,bf(t)),a}function SN(t){let a=A.useContext(Ec);return ut(a,bf(t)),a}function CN(t){let a=A.useContext(Ms);return ut(a,bf(t)),a}function yf(t){let a=CN(t),l=a.matches[a.matches.length-1];return ut(l.route.id,`${t} can only be used on routes that contain a unique "id"`),l.route.id}function kN(){return yf("useRouteId")}function EN(){var r;let t=A.useContext(gf),a=SN("useRouteError"),l=yf("useRouteError");return t!==void 0?t:(r=a.errors)==null?void 0:r[l]}function AN(){let{router:t}=NN("useNavigate"),a=yf("useNavigate"),l=A.useRef(!1);return pb(()=>{l.current=!0}),A.useCallback(async(o,d={})=>{Ps(l.current,xb),l.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:a,...d}))},[t,a])}var $g={};function yb(t,a,l){!a&&!$g[t]&&($g[t]=!0,Ps(!1,l))}A.memo(ON);function ON({routes:t,future:a,state:l}){return bb(t,void 0,l,a)}function zm({to:t,replace:a,state:l,relative:r}){ut(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=A.useContext(Bs);Ps(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=A.useContext(Ms),{pathname:m}=mt(),p=Me(),x=pf(t,xf(d),m,r==="path"),h=JSON.stringify(x);return A.useEffect(()=>{p(JSON.parse(h),{replace:a,state:l,relative:r})},[p,h,r,a,l]),null}function Bt(t){return pN(t.context)}function we(t){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RN({basename:t="/",children:a=null,location:l,navigationType:r="POP",navigator:o,static:d=!1}){ut(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=A.useMemo(()=>({basename:m,navigator:o,static:d,future:{}}),[m,o,d]);typeof l=="string"&&(l=Wl(l));let{pathname:x="/",search:h="",hash:g="",state:y=null,key:j="default"}=l,C=A.useMemo(()=>{let b=ka(x,m);return b==null?null:{location:{pathname:b,search:h,hash:g,state:y,key:j},navigationType:r}},[m,x,h,g,y,j,r]);return Ps(C!=null,`<Router basename="${m}"> is not able to match the URL "${x}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:A.createElement(Bs.Provider,{value:p},A.createElement(vi.Provider,{children:a,value:C}))}function TN({children:t,location:a}){return gN(Um(t),a)}function Um(t,a=[]){let l=[];return A.Children.forEach(t,(r,o)=>{if(!A.isValidElement(r))return;let d=[...a,o];if(r.type===A.Fragment){l.push.apply(l,Um(r.props.children,d));return}ut(r.type===we,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!r.props.index||!r.props.children,"An index route cannot have child routes.");let m={id:r.props.id||d.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(m.children=Um(r.props.children,d)),l.push(m)}),l}var Jo="get",ec="application/x-www-form-urlencoded";function Ac(t){return t!=null&&typeof t.tagName=="string"}function PN(t){return Ac(t)&&t.tagName.toLowerCase()==="button"}function MN(t){return Ac(t)&&t.tagName.toLowerCase()==="form"}function LN(t){return Ac(t)&&t.tagName.toLowerCase()==="input"}function FN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DN(t,a){return t.button===0&&(!a||a==="_self")&&!FN(t)}function Im(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,l)=>{let r=t[l];return a.concat(Array.isArray(r)?r.map(o=>[l,o]):[[l,r]])},[]))}function _N(t,a){let l=Im(t);return a&&a.forEach((r,o)=>{l.has(o)||a.getAll(o).forEach(d=>{l.append(o,d)})}),l}var Go=null;function qN(){if(Go===null)try{new FormData(document.createElement("form"),0),Go=!1}catch{Go=!0}return Go}var zN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pm(t){return t!=null&&!zN.has(t)?(Ps(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ec}"`),null):t}function UN(t,a){let l,r,o,d,m;if(MN(t)){let p=t.getAttribute("action");r=p?ka(p,a):null,l=t.getAttribute("method")||Jo,o=pm(t.getAttribute("enctype"))||ec,d=new FormData(t)}else if(PN(t)||LN(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=t.getAttribute("formaction")||p.getAttribute("action");if(r=x?ka(x,a):null,l=t.getAttribute("formmethod")||p.getAttribute("method")||Jo,o=pm(t.getAttribute("formenctype"))||pm(p.getAttribute("enctype"))||ec,d=new FormData(p,t),!qN()){let{name:h,type:g,value:y}=t;if(g==="image"){let j=h?`${h}.`:"";d.append(`${j}x`,"0"),d.append(`${j}y`,"0")}else h&&d.append(h,y)}}else{if(Ac(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=Jo,r=null,o=ec,m=t}return d&&o==="text/plain"&&(m=d,d=void 0),{action:r,method:l.toLowerCase(),encType:o,formData:d,body:m}}function wf(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}async function IN(t,a){if(t.id in a)return a[t.id];try{let l=await import(t.module);return a[t.id]=l,l}catch(l){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $N(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function BN(t,a,l){let r=await Promise.all(t.map(async o=>{let d=a.routes[o.route.id];if(d){let m=await IN(d,l);return m.links?m.links():[]}return[]}));return KN(r.flat(1).filter($N).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Bg(t,a,l,r,o,d){let m=(x,h)=>l[h]?x.route.id!==l[h].route.id:!0,p=(x,h)=>{var g;return l[h].pathname!==x.pathname||((g=l[h].route.path)==null?void 0:g.endsWith("*"))&&l[h].params["*"]!==x.params["*"]};return d==="assets"?a.filter((x,h)=>m(x,h)||p(x,h)):d==="data"?a.filter((x,h)=>{var y;let g=r.routes[x.route.id];if(!g||!g.hasLoader)return!1;if(m(x,h)||p(x,h))return!0;if(x.route.shouldRevalidate){let j=x.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=l[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function HN(t,a,{includeHydrateFallback:l}={}){return QN(t.map(r=>{let o=a.routes[r.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),l&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function QN(t){return[...new Set(t)]}function GN(t){let a={},l=Object.keys(t).sort();for(let r of l)a[r]=t[r];return a}function KN(t,a){let l=new Set;return new Set(a),t.reduce((r,o)=>{let d=JSON.stringify(GN(o));return l.has(d)||(l.add(d),r.push({key:d,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var VN=new Set([100,101,204,205]);function YN(t,a){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return l.pathname==="/"?l.pathname="_root.data":a&&ka(l.pathname,a)==="/"?l.pathname=`${a.replace(/\/$/,"")}/_root.data`:l.pathname=`${l.pathname.replace(/\/$/,"")}.data`,l}function wb(){let t=A.useContext(Xl);return wf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function WN(){let t=A.useContext(Ec);return wf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var vf=A.createContext(void 0);vf.displayName="FrameworkContext";function vb(){let t=A.useContext(vf);return wf(t,"You must render this element inside a <HydratedRouter> element"),t}function XN(t,a){let l=A.useContext(vf),[r,o]=A.useState(!1),[d,m]=A.useState(!1),{onFocus:p,onBlur:x,onMouseEnter:h,onMouseLeave:g,onTouchStart:y}=a,j=A.useRef(null);A.useEffect(()=>{if(t==="render"&&m(!0),t==="viewport"){let E=S=>{S.forEach(w=>{m(w.isIntersecting)})},v=new IntersectionObserver(E,{threshold:.5});return j.current&&v.observe(j.current),()=>{v.disconnect()}}},[t]),A.useEffect(()=>{if(r){let E=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(E)}}},[r]);let C=()=>{o(!0)},b=()=>{o(!1),m(!1)};return l?t!=="intent"?[d,j,{}]:[d,j,{onFocus:li(p,C),onBlur:li(x,b),onMouseEnter:li(h,C),onMouseLeave:li(g,b),onTouchStart:li(y,C)}]:[!1,j,{}]}function li(t,a){return l=>{t&&t(l),l.defaultPrevented||a(l)}}function ZN({page:t,...a}){let{router:l}=wb(),r=A.useMemo(()=>db(l.routes,t,l.basename),[l.routes,t,l.basename]);return r?A.createElement(e2,{page:t,matches:r,...a}):null}function JN(t){let{manifest:a,routeModules:l}=vb(),[r,o]=A.useState([]);return A.useEffect(()=>{let d=!1;return BN(t,a,l).then(m=>{d||o(m)}),()=>{d=!0}},[t,a,l]),r}function e2({page:t,matches:a,...l}){let r=mt(),{manifest:o,routeModules:d}=vb(),{basename:m}=wb(),{loaderData:p,matches:x}=WN(),h=A.useMemo(()=>Bg(t,a,x,o,r,"data"),[t,a,x,o,r]),g=A.useMemo(()=>Bg(t,a,x,o,r,"assets"),[t,a,x,o,r]),y=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,E=!1;if(a.forEach(S=>{var N;let w=o.routes[S.route.id];!w||!w.hasLoader||(!h.some(T=>T.route.id===S.route.id)&&S.route.id in p&&((N=d[S.route.id])!=null&&N.shouldRevalidate)||w.hasClientLoader?E=!0:b.add(S.route.id))}),b.size===0)return[];let v=YN(t,m);return E&&b.size>0&&v.searchParams.set("_routes",a.filter(S=>b.has(S.route.id)).map(S=>S.route.id).join(",")),[v.pathname+v.search]},[m,p,r,o,h,a,t,d]),j=A.useMemo(()=>HN(g,o),[g,o]),C=JN(g);return A.createElement(A.Fragment,null,y.map(b=>A.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...l})),j.map(b=>A.createElement("link",{key:b,rel:"modulepreload",href:b,...l})),C.map(({key:b,link:E})=>A.createElement("link",{key:b,...E})))}function t2(...t){return a=>{t.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var jb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jb&&(window.__reactRouterVersion="7.6.1")}catch{}function s2({basename:t,children:a,window:l}){let r=A.useRef();r.current==null&&(r.current=Ij({window:l,v5Compat:!0}));let o=r.current,[d,m]=A.useState({action:o.action,location:o.location}),p=A.useCallback(x=>{A.startTransition(()=>m(x))},[m]);return A.useLayoutEffect(()=>o.listen(p),[o,p]),A.createElement(RN,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:o})}var Nb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=A.forwardRef(function({onClick:a,discover:l="render",prefetch:r="none",relative:o,reloadDocument:d,replace:m,state:p,target:x,to:h,preventScrollReset:g,viewTransition:y,...j},C){let{basename:b}=A.useContext(Bs),E=typeof h=="string"&&Nb.test(h),v,S=!1;if(typeof h=="string"&&E&&(v=h,jb))try{let B=new URL(window.location.href),de=h.startsWith("//")?new URL(B.protocol+h):new URL(h),Q=ka(de.pathname,b);de.origin===B.origin&&Q!=null?h=Q+de.search+de.hash:S=!0}catch{Ps(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=hN(h,{relative:o}),[N,T,P]=XN(r,j),L=r2(h,{replace:m,state:p,target:x,preventScrollReset:g,relative:o,viewTransition:y});function z(B){a&&a(B),B.defaultPrevented||L(B)}let q=A.createElement("a",{...j,...P,href:v||w,onClick:S||d?a:z,ref:t2(C,T),target:x,"data-discover":!E&&l==="render"?"true":void 0});return N&&!E?A.createElement(A.Fragment,null,q,A.createElement(ZN,{page:w})):q});Ft.displayName="Link";var a2=A.forwardRef(function({"aria-current":a="page",caseSensitive:l=!1,className:r="",end:o=!1,style:d,to:m,viewTransition:p,children:x,...h},g){let y=ji(m,{relative:h.relative}),j=mt(),C=A.useContext(Ec),{navigator:b,basename:E}=A.useContext(Bs),v=C!=null&&u2(y)&&p===!0,S=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,w=j.pathname,N=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;l||(w=w.toLowerCase(),N=N?N.toLowerCase():null,S=S.toLowerCase()),N&&E&&(N=ka(N,E)||N);const T=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let P=w===S||!o&&w.startsWith(S)&&w.charAt(T)==="/",L=N!=null&&(N===S||!o&&N.startsWith(S)&&N.charAt(S.length)==="/"),z={isActive:P,isPending:L,isTransitioning:v},q=P?a:void 0,B;typeof r=="function"?B=r(z):B=[r,P?"active":null,L?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let de=typeof d=="function"?d(z):d;return A.createElement(Ft,{...h,"aria-current":q,className:B,ref:g,style:de,to:m,viewTransition:p},typeof x=="function"?x(z):x)});a2.displayName="NavLink";var n2=A.forwardRef(({discover:t="render",fetcherKey:a,navigate:l,reloadDocument:r,replace:o,state:d,method:m=Jo,action:p,onSubmit:x,relative:h,preventScrollReset:g,viewTransition:y,...j},C)=>{let b=c2(),E=d2(p,{relative:h}),v=m.toLowerCase()==="get"?"get":"post",S=typeof p=="string"&&Nb.test(p),w=N=>{if(x&&x(N),N.defaultPrevented)return;N.preventDefault();let T=N.nativeEvent.submitter,P=(T==null?void 0:T.getAttribute("formmethod"))||m;b(T||N.currentTarget,{fetcherKey:a,method:P,navigate:l,replace:o,state:d,relative:h,preventScrollReset:g,viewTransition:y})};return A.createElement("form",{ref:C,method:v,action:E,onSubmit:r?x:w,...j,"data-discover":!S&&t==="render"?"true":void 0})});n2.displayName="Form";function l2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sb(t){let a=A.useContext(Xl);return ut(a,l2(t)),a}function r2(t,{target:a,replace:l,state:r,preventScrollReset:o,relative:d,viewTransition:m}={}){let p=Me(),x=mt(),h=ji(t,{relative:d});return A.useCallback(g=>{if(DN(g,a)){g.preventDefault();let y=l!==void 0?l:mi(x)===mi(h);p(t,{replace:y,state:r,preventScrollReset:o,relative:d,viewTransition:m})}},[x,p,h,l,r,a,t,o,d,m])}function Oc(t){Ps(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=A.useRef(Im(t)),l=A.useRef(!1),r=mt(),o=A.useMemo(()=>_N(r.search,l.current?null:a.current),[r.search]),d=Me(),m=A.useCallback((p,x)=>{const h=Im(typeof p=="function"?p(o):p);l.current=!0,d("?"+h,x)},[d,o]);return[o,m]}var i2=0,o2=()=>`__${String(++i2)}__`;function c2(){let{router:t}=Sb("useSubmit"),{basename:a}=A.useContext(Bs),l=kN();return A.useCallback(async(r,o={})=>{let{action:d,method:m,encType:p,formData:x,body:h}=UN(r,a);if(o.navigate===!1){let g=o.fetcherKey||o2();await t.fetch(g,l,o.action||d,{preventScrollReset:o.preventScrollReset,formData:x,body:h,formMethod:o.method||m,formEncType:o.encType||p,flushSync:o.flushSync})}else await t.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:x,body:h,formMethod:o.method||m,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:l,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,a,l])}function d2(t,{relative:a}={}){let{basename:l}=A.useContext(Bs),r=A.useContext(Ms);ut(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),d={...ji(t||".",{relative:a})},m=mt();if(t==null){d.search=m.search;let p=new URLSearchParams(d.search),x=p.getAll("index");if(x.some(g=>g==="")){p.delete("index"),x.filter(y=>y).forEach(y=>p.append("index",y));let g=p.toString();d.search=g?`?${g}`:""}}return(!t||t===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(d.pathname=d.pathname==="/"?l:Na([l,d.pathname])),mi(d)}function u2(t,a={}){let l=A.useContext(hb);ut(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Sb("useViewTransitionState"),o=ji(t,{relative:a.relative});if(!l.isTransitioning)return!1;let d=ka(l.currentLocation.pathname,r)||l.currentLocation.pathname,m=ka(l.nextLocation.pathname,r)||l.nextLocation.pathname;return lc(o.pathname,m)!=null||lc(o.pathname,d)!=null}[...VN];var gm={exports:{}},bm={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function m2(){if(Hg)return bm;Hg=1;var t=kc();function a(x,h){return x===h&&(x!==0||1/x===1/h)||x!==x&&h!==h}var l=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,o=t.useRef,d=t.useEffect,m=t.useMemo,p=t.useDebugValue;return bm.useSyncExternalStoreWithSelector=function(x,h,g,y,j){var C=o(null);if(C.current===null){var b={hasValue:!1,value:null};C.current=b}else b=C.current;C=m(function(){function v(P){if(!S){if(S=!0,w=P,P=y(P),j!==void 0&&b.hasValue){var L=b.value;if(j(L,P))return N=L}return N=P}if(L=N,l(w,P))return L;var z=y(P);return j!==void 0&&j(L,z)?(w=P,L):(w=P,N=z)}var S=!1,w,N,T=g===void 0?null:g;return[function(){return v(h())},T===null?void 0:function(){return v(T())}]},[h,g,y,j]);var E=r(x,C[0],C[1]);return d(function(){b.hasValue=!0,b.value=E},[E]),p(E),E},bm}var Qg;function f2(){return Qg||(Qg=1,gm.exports=m2()),gm.exports}var h2=f2();function x2(t){t()}function p2(){let t=null,a=null;return{clear(){t=null,a=null},notify(){x2(()=>{let l=t;for(;l;)l.callback(),l=l.next})},get(){const l=[];let r=t;for(;r;)l.push(r),r=r.next;return l},subscribe(l){let r=!0;const o=a={callback:l,next:null,prev:a};return o.prev?o.prev.next=o:t=o,function(){!r||t===null||(r=!1,o.next?o.next.prev=o.prev:a=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Gg={notify(){},get:()=>[]};function g2(t,a){let l,r=Gg,o=0,d=!1;function m(E){g();const v=r.subscribe(E);let S=!1;return()=>{S||(S=!0,v(),y())}}function p(){r.notify()}function x(){b.onStateChange&&b.onStateChange()}function h(){return d}function g(){o++,l||(l=t.subscribe(x),r=p2())}function y(){o--,l&&o===0&&(l(),l=void 0,r.clear(),r=Gg)}function j(){d||(d=!0,g())}function C(){d&&(d=!1,y())}const b={addNestedSub:m,notifyNestedSubs:p,handleChangeWrapper:x,isSubscribed:h,trySubscribe:j,tryUnsubscribe:C,getListeners:()=>r};return b}var b2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y2=b2(),w2=()=>typeof navigator<"u"&&navigator.product==="ReactNative",v2=w2(),j2=()=>y2||v2?A.useLayoutEffect:A.useEffect,N2=j2(),ym=Symbol.for("react-redux-context"),wm=typeof globalThis<"u"?globalThis:{};function S2(){if(!A.createContext)return{};const t=wm[ym]??(wm[ym]=new Map);let a=t.get(A.createContext);return a||(a=A.createContext(null),t.set(A.createContext,a)),a}var mn=S2();function C2(t){const{children:a,context:l,serverState:r,store:o}=t,d=A.useMemo(()=>{const x=g2(o);return{store:o,subscription:x,getServerState:r?()=>r:void 0}},[o,r]),m=A.useMemo(()=>o.getState(),[o]);N2(()=>{const{subscription:x}=d;return x.onStateChange=x.notifyNestedSubs,x.trySubscribe(),m!==o.getState()&&x.notifyNestedSubs(),()=>{x.tryUnsubscribe(),x.onStateChange=void 0}},[d,m]);const p=l||mn;return A.createElement(p.Provider,{value:d},a)}var k2=C2;function jf(t=mn){return function(){return A.useContext(t)}}var Cb=jf();function kb(t=mn){const a=t===mn?Cb:jf(t),l=()=>{const{store:r}=a();return r};return Object.assign(l,{withTypes:()=>l}),l}var E2=kb();function A2(t=mn){const a=t===mn?E2:kb(t),l=()=>a().dispatch;return Object.assign(l,{withTypes:()=>l}),l}var ws=A2(),O2=(t,a)=>t===a;function R2(t=mn){const a=t===mn?Cb:jf(t),l=(r,o={})=>{const{equalityFn:d=O2}=typeof o=="function"?{equalityFn:o}:o,m=a(),{store:p,subscription:x,getServerState:h}=m;A.useRef(!0);const g=A.useCallback({[r.name](j){return r(j)}}[r.name],[r]),y=h2.useSyncExternalStoreWithSelector(x.addNestedSub,p.getState,h||p.getState,g,d);return A.useDebugValue(y),y};return Object.assign(l,{withTypes:()=>l}),l}var ps=R2();const $m={PROJECTS:"Projects",ORGANIZATION:"Organization"},T2={PROJECTS:"fa-solid fa-diagram-project text-2xl",ORGANIZATION:"fa-solid fa-building text-2xl"},Eb={ADMIN:"fas fa-user-tie text-2xl",STAFF:"fas fa-user-gear text-2xl",CTO:"fas fa-users-gear text-2xl",WORKER:"fas fa-hard-hat text-2xl",CLIENT:"fas fa-user text-2xl"},rc={ADMIN:"Admin Login",STAFF:"STaff Login",CTO:"CTO Login",WORKER:"Worker Login",CLIENT:"Client Login"},P2={INVITECTO:"fa-solid fa-user-tie text-2xl",INVITESTAFFS:"fa-solid fa-user text-2xl",DETAILS:"fa-solid fa-building text-2xl",PROJECTS:"fa-solid fa-diagram-project  text-2xl",PLAN:"fa-solid fa-cash  text-2xl",PROFILE:"fa-solid fa-user-gear  text-2xl",MODULAR:"fa-solid fa-box  text-2xl"},Kg={INVITECTO:"Invite CTO",INVITESTAFFS:"Invite Staffs",DETAILS:"Org Details",PROJECTS:"Projects",PLAN:"Upgrade Plan",PROFILE:"User Profile",MODULAR:"Modular Units"},Vg={WORKERS:"Invite Workers",INVITECLIENT:"Invite Client",PREREQUIRETIES:"Pre Requireties",REQUIREMENTFORM:"Requirement Form",SITEMEASUREMENT:"Site Measurement",SAMPLEDESIGN:"Sample Designs",TECHNICALCONSULTANT:"Technical consultant",SELECTSTAGE:"Select Stage",MODULARUNIT:"Modular Units",MATERIALSELECTION:"Material Selection",COSTESTIMATION:"Cost Estiamtion",PAYMENTCONFIRMATION:"Payment Stage",ORDERMATERIALS:"Ordering Material",MATERIALARRIVED:"Material Arrival",WORKSCHEDULE:"Work Schedule",INSTALLATION:"Installation and execution",QUALITYCHECK:"Quality Check",CLEANINGSANITATION:"Cleaning & Sanitation",PROJECTDELIVERY:"Project Delivery"},M2={WORKERS:"fa-solid fa-circle-info text-2xl",INVITECLIENT:"fa-solid fa-user-group text-2xl",PREREQUIRETIES:"fa-solid fa-clipboard text-2xl",REQUIREMENTFORM:"fa-solid fa-pencil text-2xl",SITEMEASUREMENT:"fa-solid fa-building text-2xl",SAMPLEDESIGN:"fa-solid fa-object-group text-2xl",TECHNICALCONSULTANT:"fa-solid fa-comments text-2xl",SELECTSTAGE:"fa-solid fa-square-check text-2xl",MODULARUNIT:"fa-solid fa-box text-2xl",MATERIALSELECTION:"fas fa-box text-2xl",COSTESTIMATION:"fa-solid fa-money-bill-1-wave text-2xl",PAYMENTCONFIRMATION:"fa-solid fa-money-bill-wave text-2xl",ORDERMATERIALS:"fa-solid fa-shopping-cart text-2xl",MATERIALARRIVED:"fa-solid fa-receipt text-2xl",WORKSCHEDULE:"fas fa-digging text-2xl",INSTALLATION:"fas fa-comments text-2xl",QUALITYCHECK:"fas fa-check-double text-2xl",CLEANINGSANITATION:"fas fa-broom text-2xl",PROJECTDELIVERY:"fas fa-handshake text-2xl"},L2={labourlist:"Labours",materiallist:"Materials",transportationlist:"Transportation",workers:"Workers",inviteclient:"Invite Client",requirementform:"Requirement Form",sitemeasurement:"Site Measurement",sampledesign:"Sample Designs",technicalconsultant:"Technical consultant",materialselection:"Material Selection",costestimation:"Cost Estiamtion",paymentconfirmation:"Payment Stage",ordermaterial:"Ordering Material",materialarrival:"Material Arrival",workmainschedule:"Work Schedule",installation:"Installation and execution",qualitycheck:"Quality Check",cleaning:"Cleaning & Sanitation",projectdelivery:"Project Delivery"},F2={labourlist:"LABOURS",materiallist:"MATERIALS",transportationlist:"TRANSPORTATION",workers:"WORKERS",inviteclient:"INVITECLIENT",requirementform:"REQUIREMENTFORM",sitemeasurement:"SITEMEASUREMENT",sampledesign:"SAMPLEDESIGN",technicalconsultant:"TECHNICALCONSULTANT",materialselection:"MATERIALSELECTION",costestimation:"COSTESTIMATION",paymentconfirmation:"PAYMENTCONFIRMATION",ordermaterial:"ORDERMATERIALS",materialarrival:"MATERIALARRIVED",workmainschedule:"WORKSCHEDULE",installation:"INSTALLATION",qualitycheck:"QUALITYCHECK",cleaning:"CLEANINGSANITATION",projectdelivery:"PROJECTDELIVERY"},yt={COMPANY_NAME:"Vertical living",COMPANY_LOGO:"https://th.bing.com/th/id/OIP.Uparc9uI63RDb82OupdPvwAAAA?w=80&h=80&c=1&bgcl=c77779&r=0&o=6&dpr=1.3&pid=ImgRC"},Ab=[{key:"basic",name:"Basic",price:1e3,color:"border-blue-500",btnColor:"bg-blue-600 hover:bg-blue-700",planNameColor:"text-blue-700",features:["✔ 5 Roles Allowed","✔ Email Notification","✔ Timer Functionality","✔ Image Upload","✔ PDF Upload","✔ Assign Staffs","✔ Cost Estimation"],available:!0},{key:"advanced",name:"Advanced",price:0,color:"border-purple-500",btnColor:"bg-purple-600 hover:bg-purple-700",planNameColor:"text-purple-700",features:[],available:!1},{key:"enterprise",name:"Enterprise",price:0,color:"border-rose-500",btnColor:"bg-rose-600 hover:bg-rose-700",planNameColor:"text-rose-700",features:[],available:!1}],ya={carpentry:["material","brandName","specification","quantity","unit","remarks"],hardware:["item","size","material","brandName","quantity","unit","remarks"],electricalFittings:["item","specification","quantity","unit","remarks"],tiles:["type","brandName","size","quantity","unit","remarks"],ceramicSanitaryware:["item","specification","quantity","unit","remarks"],paintsCoatings:["type","brandName","color","quantity","unit","remarks"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks"],glassMirrors:["type","brandName","size","thickness","quantity","remarks"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks"],falseCeilingMaterials:["item","specification","quantity","unit","remarks"]},D2={carpentry:["Greenply","CenturyPly","Kitply","Archidply","Merino Laminates","Action TESA","Austin Plywood"],hardware:["Hettich","Hafele","Ebco","Godrej Locks","Dorset","Ozone","Blum","Yale"],electricalFittings:["Havells","Anchor by Panasonic","Legrand","Schneider Electric","GM Modular","Wipro","Philips","Syska"],tiles:["Kajaria","Somany","Nitco","Orientbell","Johnson Tiles","Varmora","Asian Granito"],ceramicSanitaryware:["Hindware","Jaquar","CERA","Parryware","Kohler India","Roca India"],paintsCoatings:["Asian Paints","Berger Paints","Nerolac Paints","Dulux Paints","Indigo Paints","Shalimar Paints"],lightsFixtures:["Philips Lighting","Syska LED","Wipro Lighting","Havells","Crompton","Bajaj Electricals"],glassMirrors:["Saint-Gobain","Modiguard","AIS Glass","HNG Float Glass","Gold Plus Glass"],upholsteryCurtains:["D’Decor","Fabindia","Bombay Dyeing","Raymond Furnishings","Spaces Home & Beyond"],falseCeilingMaterials:["Gyproc by Saint-Gobain","Armstrong Ceilings","USG Boral","Everest Industries","Shera"]},Zs={carpentry:["material","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],hardware:["item","size","material","brandName","quantity","unit","remarks","image","verifiedByAccountant"],electricalFittings:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],tiles:["type","brandName","size","quantity","unit","remarks","image","verifiedByAccountant"],ceramicSanitaryware:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],paintsCoatings:["type","brandName","color","quantity","unit","remarks","image","verifiedByAccountant"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],glassMirrors:["type","brandName","size","thickness","quantity","remarks","image","verifiedByAccountant"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks","image","verifiedByAccountant"],falseCeilingMaterials:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"]},vm={brandName:{carpentry:["Greenply","Century","Kitply","Archid","Austin"],hardware:["Hettich","Hafele","Blum","Godrej"],tiles:["Kajaria","Somany","Johnson","Nitco"],paintsCoatings:["Asian Paints","Berger","Dulux"],lightsFixtures:["Philips","Syska","Wipro"],glassMirrors:["Saint-Gobain","Modiguard","Asahi"],ceramicSanitaryware:["Cera","Parryware","Hindware"]},fabric:{upholsteryCurtains:["Cotton","Linen","Velvet","Polyester","Silk"]}},_2=["Living Room","Bedroom","Kitchen","Dining Room","Balcony","Foyer Area","Terrace","Study Room","Car Parking","Garden","Storage Room","Entertainment Room","Home Gym"],Ob=[{stepNumber:1,label:"Identify Painting Area",rules:["Measure and record room dimensions (length, width, height) in feet and inches using a measuring tape or laser tool.","Take high-resolution photos of all walls, corners, and ceiling edges for supervisor reference.","Highlight and document any cracks, dampness, or surface irregularities that need attention.","Upload details of the paint brand and colour code selected for approval before proceeding."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Cover the floor using durable plastic sheets or canvas drop cloths to prevent paint spillage.","Move all movable furniture to the center of the room and cover them securely with protective sheets.","Apply masking tape to skirting boards, switches, sockets, and window trims for protection."]},{stepNumber:3,label:"Surface Preparation",rules:["Clean all walls thoroughly to remove dust, dirt, and grease spots.","Scrape off any old loose paint using a putty knife.","Fill cracks and holes with quality wall putty and allow it to dry.","Sand the surface to ensure a smooth and even base for putty application."]},{stepNumber:4,label:"First Coat of Putty",rules:["Apply the first coat of wall putty using a broad putty knife for even application.","Allow sufficient drying time as per the manufacturer’s guidelines.","Lightly sand the surface to remove any excess material and achieve a smooth finish."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Apply a second coat of wall putty for a fine, uniform surface.","After drying, sand the surface again to ensure it is perfectly smooth and ready for scrubbing.","Clean all dust particles with a dry cloth before proceeding."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["After applying two coats of putty, scrub the wall surface to eliminate any rough patches.","Choose between manual scrubbing (using sandpaper for small areas and edges) or machine scrubbing (for large walls, ensuring consistency and time-saving).","Scrub in circular motions and clean off all dust after scrubbing."]},{stepNumber:6,label:"Primer Application",rules:["Apply one uniform coat of primer using a roller or brush.","Allow the primer to dry completely before moving to paint application."]},{stepNumber:7,label:"First Coat of Paint",rules:["Apply the first coat of approved paint using consistent strokes to avoid streaks.","Allow sufficient drying time before applying the second coat."]},{stepNumber:8,label:"Second Coat of Paint",rules:["Apply the second coat of paint for a smooth, uniform finish.","Inspect walls for any missed spots and touch up as required."]},{stepNumber:9,label:"Final Finishing and Cleanup",rules:["Conduct a final inspection of all painted surfaces for uniformity.","Carefully remove all masking tape to avoid peeling paint.","Clean up the workspace, remove protective sheets, and reset furniture."]}],Rb=[{stepNumber:1,label:"Identify Painting Area",rules:["Review worker-uploaded images and details for Step 1.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Review worker-uploaded images and details for Step 2.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:3,label:"Surface Preparation",rules:["Review worker-uploaded images and details for Step 3.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:4,label:"First Coat of Putty",rules:["Review worker-uploaded images and details for Step 4.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Review worker-uploaded images and details for Step 5.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["Review worker-uploaded images and details for Step 6.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:7,label:"Primer Application",rules:["Review worker-uploaded images and details for Step 7.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:8,label:"First Coat of Paint",rules:["Review worker-uploaded images and details for Step 8.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:9,label:"Second Coat of Paint",rules:["Review worker-uploaded images and details for Step 9.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:10,label:"Final Finishing and Cleanup",rules:["Review worker-uploaded images and details for Step 10.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]}],Ko=({src:t,alt:a,className:l="",width:r,height:o})=>{const[d,m]=A.useState(!1),[p,x]=A.useState("");return A.useEffect(()=>{const h=new Image;h.crossOrigin="anonymous",h.onload=()=>{x(t),m(!0)},h.src=t},[t]),e.jsxs("div",{className:`relative overflow-hidden ${l}`,style:{width:r,height:o},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-blue-100 to-purple-100 transition-opacity duration-500 ${d?"opacity-0":"opacity-100"}`}),p&&e.jsx("img",{src:p,alt:a,className:`w-full h-full object-cover transition-opacity duration-500 ${d?"opacity-100":"opacity-0"}`})]})},ri=({children:t,className:a=""})=>e.jsx("div",{className:`bg-white rounded-lg shadow-lg ${a}`,children:t}),jm=({children:t,variant:a="primary",size:l="md",className:r="",onClick:o})=>{const d="font-semibold rounded-lg transition-all duration-200 inline-flex items-center justify-center",m={primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700",secondary:"bg-white text-gray-900 border border-gray-300 hover:bg-gray-50",outline:"border-2 border-current bg-transparent hover:bg-current hover:text-white"},p={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return e.jsx("button",{className:`${d} ${m[a]} ${p[l]} ${r}`,onClick:o,children:t})},Yg=({children:t,className:a=""})=>e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ${a}`,children:t});function Wg(){const t=ps(m=>m.authStore),[a,l]=A.useState(!1),r=Me(),o=()=>{l(!1)},d={basic:"Perfect for small design studios",enterprise:"For large design firms",advanced:" For growing design businesses"};return e.jsxs("div",{className:"min-h-full w-full bg-white",children:[e.jsx("header",{className:"border-b px-4 border-gray-300 w-full bg-white/95 backdrop-blur sticky top-0 z-50",children:e.jsx("div",{className:" w-full",children:e.jsxs("div",{className:"flex justify-between w-full items-center py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ko,{src:yt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-10 h-10 rounded-lg",width:40,height:40}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:yt.COMPANY_NAME})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[e.jsx(jm,{onClick:()=>r("/login"),variant:"secondary",className:"hidden sm:inline-flex cursor-pointer",children:"Sign In"}),(t==null?void 0:t.isauthenticated)&&e.jsx(jm,{onClick:()=>r("/"),className:"cursor-pointer",children:"Get Started"})]}),e.jsx("button",{className:"sm:hidden block p-2",onClick:()=>l(!a),children:e.jsx("i",{className:"fas fa-bars text-gray-600"})})]})]})})}),e.jsx("div",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${a?"translate-x-0":"-translate-x-full"} `,children:e.jsxs("nav",{className:"flex flex-col space-y-4 ",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:yt.COMPANY_NAME})]}),e.jsx("button",{onClick:o,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("ul",{className:"px-4 space-x-2 max-h-screen overflow-y-auto space-y-4 ",children:[e.jsx("li",{onClick:()=>r("/login"),className:"border-b border-gray-300 py-5",children:e.jsx(Ft,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Sign In"})}),e.jsx("li",{onClick:()=>r("/organizations"),children:e.jsx(Ft,{to:"/organizations",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Get Started"})})]})]})}),e.jsx("section",{className:"pt-20 pb-16 sm:py-24",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs(Yg,{className:"mb-4",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Interior Design Task Management"]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Streamline Your"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Work Flows"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Manage client requirements, assign tasks to workers, set timers, and send automated email reminders. Everything you need to deliver exceptional interior design projects on time."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsxs(jm,{onClick:()=>r("/organizations"),size:"lg",className:"text-lg px-8 py-3 cursor-pointer",children:["Get Started Today",e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})})]}),e.jsx("div",{className:"mt-16 max-w-5xl mx-auto",children:e.jsx(Ko,{src:"/placeholder.svg?height=600&width=1000",alt:"Vertical Living Dashboard",className:"rounded-xl shadow-2xl border"})})]})}),e.jsx("section",{id:"features",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Everything you need for interior design project management"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Powerful features designed specifically for interior designers and their teams"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-clipboard-list text-blue-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Client Requirements"}),e.jsx("p",{className:"text-gray-600",children:"Capture and organize client requirements, preferences, and specifications in one centralized location."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-users text-green-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Task Assignment"}),e.jsx("p",{className:"text-gray-600",children:"Assign tasks to team members and workers with clear deadlines and detailed instructions."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-envelope text-purple-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Email Reminders"}),e.jsx("p",{className:"text-gray-600",children:"Automated email notifications and reminders to keep everyone on track and informed."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-stopwatch text-orange-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Time Tracking"}),e.jsx("p",{className:"text-gray-600",children:"Built-in timers to track work hours and monitor project progress in real-time."})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsxs("div",{className:"w-[100%] sm:w-[60%] mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-center  text-gray-900 mb-4",children:"Designed for Interior Design Professionals"}),e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Unlike generic project management tools, Vertical Living is built specifically for interior designers. We understand your workflow, from initial client consultation to final installation."})]}),e.jsx("div",{children:e.jsx(Ko,{src:"/placeholder.svg?height=400&width=500",alt:"Interior Design Project Management",className:"rounded-lg shadow-lg"})})]})]})}),e.jsx("section",{id:"pricing",className:"py-20",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Explore Plan"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Start with our Basic plan and upgrade as your business grows"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:Ab.map(m=>{let p="";switch(m.key){case"basic":p="fa-seedling";break;case"advanced":p="fa-rocket";break;case"enterprise":p="fa-building";break;default:p="fa-layer-group"}return e.jsxs(ri,{className:`border-2 ${m.price?"border-blue-500":"border-none"} shadow-xl relative p-6`,children:[m.price===0&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(Yg,{className:"bg-gray-500 text-white",children:"Coming Soon"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-2",children:[e.jsx("i",{className:`fa-solid ${p} ${m.price?"text-blue-600":"text-gray-600"} mr-2`}),m.name]}),e.jsx("p",{className:"text-gray-600 mb-4",children:d[m.key]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:`text-2xl sm:text-2xl ${m.price?"text-3xl":"text-xl"} font-bold`,children:[" ",m.price?`₹ ${m.price}`:"Coming Soon"]}),m.price>0&&e.jsx("span",{className:"text-gray-500",children:"/month"})]})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:m.features.length>0?m.features.map((x,h)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${x.includes("✔")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:x.replace("✔","").replace("✘","")})]},h)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})})]},m.key)})})]})}),e.jsx("footer",{id:"contact",className:"bg-gray-900 text-white py-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ko,{src:yt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-8 h-8 rounded-lg",width:32,height:32}),e.jsx("span",{className:"text-xl font-bold",children:yt.COMPANY_NAME})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Streamline your Work flow with our specialized task management platform."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-linkedin text-xl"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-instagram text-xl"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"text-gray-400 scroll-smooth  hover:text-white transition-colors",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors",children:"Pricing"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",className:"text-gray-400 hover:text-white transition-colors",children:"Contact"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["© ",new Date().getFullYear()," ",yt.COMPANY_NAME,". All rights reserved."]}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Terms of Service"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cookie Policy"})]})]})]})})]})}const q2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Issues"}),z2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Phase"}),U2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Tasks"});function I2(t,a){A.useEffect(()=>{const l=r=>{r.ctrlKey&&r.key==="]"?(r.preventDefault(),a()):r.ctrlKey&&r.key==="["&&(r.preventDefault(),t())};window.addEventListener("keydown",l)},[a,t])}var Jl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qn=typeof window>"u"||"Deno"in globalThis;function Kt(){}function $2(t,a){return typeof t=="function"?t(a):t}function Bm(t){return typeof t=="number"&&t>=0&&t!==1/0}function Tb(t,a){return Math.max(t+(a||0)-Date.now(),0)}function un(t,a){return typeof t=="function"?t(a):t}function Us(t,a){return typeof t=="function"?t(a):t}function Xg(t,a){const{type:l="all",exact:r,fetchStatus:o,predicate:d,queryKey:m,stale:p}=t;if(m){if(r){if(a.queryHash!==Nf(m,a.options))return!1}else if(!fi(a.queryKey,m))return!1}if(l!=="all"){const x=a.isActive();if(l==="active"&&!x||l==="inactive"&&x)return!1}return!(typeof p=="boolean"&&a.isStale()!==p||o&&o!==a.state.fetchStatus||d&&!d(a))}function Zg(t,a){const{exact:l,status:r,predicate:o,mutationKey:d}=t;if(d){if(!a.options.mutationKey)return!1;if(l){if(Gn(a.options.mutationKey)!==Gn(d))return!1}else if(!fi(a.options.mutationKey,d))return!1}return!(r&&a.state.status!==r||o&&!o(a))}function Nf(t,a){return((a==null?void 0:a.queryKeyHashFn)||Gn)(t)}function Gn(t){return JSON.stringify(t,(a,l)=>Hm(l)?Object.keys(l).sort().reduce((r,o)=>(r[o]=l[o],r),{}):l)}function fi(t,a){return t===a?!0:typeof t!=typeof a?!1:t&&a&&typeof t=="object"&&typeof a=="object"?Object.keys(a).every(l=>fi(t[l],a[l])):!1}function Pb(t,a){if(t===a)return t;const l=Jg(t)&&Jg(a);if(l||Hm(t)&&Hm(a)){const r=l?t:Object.keys(t),o=r.length,d=l?a:Object.keys(a),m=d.length,p=l?[]:{},x=new Set(r);let h=0;for(let g=0;g<m;g++){const y=l?g:d[g];(!l&&x.has(y)||l)&&t[y]===void 0&&a[y]===void 0?(p[y]=void 0,h++):(p[y]=Pb(t[y],a[y]),p[y]===t[y]&&t[y]!==void 0&&h++)}return o===m&&h===o?t:p}return a}function ic(t,a){if(!a||Object.keys(t).length!==Object.keys(a).length)return!1;for(const l in t)if(t[l]!==a[l])return!1;return!0}function Jg(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Hm(t){if(!e0(t))return!1;const a=t.constructor;if(a===void 0)return!0;const l=a.prototype;return!(!e0(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function e0(t){return Object.prototype.toString.call(t)==="[object Object]"}function B2(t){return new Promise(a=>{setTimeout(a,t)})}function Qm(t,a,l){return typeof l.structuralSharing=="function"?l.structuralSharing(t,a):l.structuralSharing!==!1?Pb(t,a):a}function H2(t,a,l=0){const r=[...t,a];return l&&r.length>l?r.slice(1):r}function Q2(t,a,l=0){const r=[a,...t];return l&&r.length>l?r.slice(0,-1):r}var Sf=Symbol();function Mb(t,a){return!t.queryFn&&(a!=null&&a.initialPromise)?()=>a.initialPromise:!t.queryFn||t.queryFn===Sf?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Lb(t,a){return typeof t=="function"?t(...a):!!t}var Dn,en,Dl,eb,G2=(eb=class extends Jl{constructor(){super();Ae(this,Dn);Ae(this,en);Ae(this,Dl);ve(this,Dl,a=>{if(!Qn&&window.addEventListener){const l=()=>a();return window.addEventListener("visibilitychange",l,!1),()=>{window.removeEventListener("visibilitychange",l)}}})}onSubscribe(){H(this,en)||this.setEventListener(H(this,Dl))}onUnsubscribe(){var a;this.hasListeners()||((a=H(this,en))==null||a.call(this),ve(this,en,void 0))}setEventListener(a){var l;ve(this,Dl,a),(l=H(this,en))==null||l.call(this),ve(this,en,a(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(a){H(this,Dn)!==a&&(ve(this,Dn,a),this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(l=>{l(a)})}isFocused(){var a;return typeof H(this,Dn)=="boolean"?H(this,Dn):((a=globalThis.document)==null?void 0:a.visibilityState)!=="hidden"}},Dn=new WeakMap,en=new WeakMap,Dl=new WeakMap,eb),Cf=new G2,_l,tn,ql,tb,K2=(tb=class extends Jl{constructor(){super();Ae(this,_l,!0);Ae(this,tn);Ae(this,ql);ve(this,ql,a=>{if(!Qn&&window.addEventListener){const l=()=>a(!0),r=()=>a(!1);return window.addEventListener("online",l,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,tn)||this.setEventListener(H(this,ql))}onUnsubscribe(){var a;this.hasListeners()||((a=H(this,tn))==null||a.call(this),ve(this,tn,void 0))}setEventListener(a){var l;ve(this,ql,a),(l=H(this,tn))==null||l.call(this),ve(this,tn,a(this.setOnline.bind(this)))}setOnline(a){H(this,_l)!==a&&(ve(this,_l,a),this.listeners.forEach(r=>{r(a)}))}isOnline(){return H(this,_l)}},_l=new WeakMap,tn=new WeakMap,ql=new WeakMap,tb),oc=new K2;function Gm(){let t,a;const l=new Promise((o,d)=>{t=o,a=d});l.status="pending",l.catch(()=>{});function r(o){Object.assign(l,o),delete l.resolve,delete l.reject}return l.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},l.reject=o=>{r({status:"rejected",reason:o}),a(o)},l}function V2(t){return Math.min(1e3*2**t,3e4)}function Fb(t){return(t??"online")==="online"?oc.isOnline():!0}var Db=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Nm(t){return t instanceof Db}function _b(t){let a=!1,l=0,r=!1,o;const d=Gm(),m=E=>{var v;r||(j(new Db(E)),(v=t.abort)==null||v.call(t))},p=()=>{a=!0},x=()=>{a=!1},h=()=>Cf.isFocused()&&(t.networkMode==="always"||oc.isOnline())&&t.canRun(),g=()=>Fb(t.networkMode)&&t.canRun(),y=E=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,E),o==null||o(),d.resolve(E))},j=E=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,E),o==null||o(),d.reject(E))},C=()=>new Promise(E=>{var v;o=S=>{(r||h())&&E(S)},(v=t.onPause)==null||v.call(t)}).then(()=>{var E;o=void 0,r||(E=t.onContinue)==null||E.call(t)}),b=()=>{if(r)return;let E;const v=l===0?t.initialPromise:void 0;try{E=v??t.fn()}catch(S){E=Promise.reject(S)}Promise.resolve(E).then(y).catch(S=>{var L;if(r)return;const w=t.retry??(Qn?0:3),N=t.retryDelay??V2,T=typeof N=="function"?N(l,S):N,P=w===!0||typeof w=="number"&&l<w||typeof w=="function"&&w(l,S);if(a||!P){j(S);return}l++,(L=t.onFail)==null||L.call(t,l,S),B2(T).then(()=>h()?void 0:C()).then(()=>{a?j(S):b()})})};return{promise:d,cancel:m,continue:()=>(o==null||o(),d),cancelRetry:p,continueRetry:x,canStart:g,start:()=>(g()?b():C().then(b),d)}}var Y2=t=>setTimeout(t,0);function W2(){let t=[],a=0,l=p=>{p()},r=p=>{p()},o=Y2;const d=p=>{a?t.push(p):o(()=>{l(p)})},m=()=>{const p=t;t=[],p.length&&o(()=>{r(()=>{p.forEach(x=>{l(x)})})})};return{batch:p=>{let x;a++;try{x=p()}finally{a--,a||m()}return x},batchCalls:p=>(...x)=>{d(()=>{p(...x)})},schedule:d,setNotifyFunction:p=>{l=p},setBatchNotifyFunction:p=>{r=p},setScheduler:p=>{o=p}}}var Ct=W2(),_n,sb,qb=(sb=class{constructor(){Ae(this,_n)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bm(this.gcTime)&&ve(this,_n,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qn?1/0:5*60*1e3))}clearGcTimeout(){H(this,_n)&&(clearTimeout(H(this,_n)),ve(this,_n,void 0))}},_n=new WeakMap,sb),zl,Ul,Ts,qn,Ut,gi,zn,qs,wa,ab,X2=(ab=class extends qb{constructor(a){super();Ae(this,qs);Ae(this,zl);Ae(this,Ul);Ae(this,Ts);Ae(this,qn);Ae(this,Ut);Ae(this,gi);Ae(this,zn);ve(this,zn,!1),ve(this,gi,a.defaultOptions),this.setOptions(a.options),this.observers=[],ve(this,qn,a.client),ve(this,Ts,H(this,qn).getQueryCache()),this.queryKey=a.queryKey,this.queryHash=a.queryHash,ve(this,zl,Z2(this.options)),this.state=a.state??H(this,zl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var a;return(a=H(this,Ut))==null?void 0:a.promise}setOptions(a){this.options={...H(this,gi),...a},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Ts).remove(this)}setData(a,l){const r=Qm(this.state.data,a,this.options);return ze(this,qs,wa).call(this,{data:r,type:"success",dataUpdatedAt:l==null?void 0:l.updatedAt,manual:l==null?void 0:l.manual}),r}setState(a,l){ze(this,qs,wa).call(this,{type:"setState",state:a,setStateOptions:l})}cancel(a){var r,o;const l=(r=H(this,Ut))==null?void 0:r.promise;return(o=H(this,Ut))==null||o.cancel(a),l?l.then(Kt).catch(Kt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,zl))}isActive(){return this.observers.some(a=>Us(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>un(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!Tb(this.state.dataUpdatedAt,a)}onFocus(){var l;const a=this.observers.find(r=>r.shouldFetchOnWindowFocus());a==null||a.refetch({cancelRefetch:!1}),(l=H(this,Ut))==null||l.continue()}onOnline(){var l;const a=this.observers.find(r=>r.shouldFetchOnReconnect());a==null||a.refetch({cancelRefetch:!1}),(l=H(this,Ut))==null||l.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),H(this,Ts).notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(l=>l!==a),this.observers.length||(H(this,Ut)&&(H(this,zn)?H(this,Ut).cancel({revert:!0}):H(this,Ut).cancelRetry()),this.scheduleGc()),H(this,Ts).notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ze(this,qs,wa).call(this,{type:"invalidate"})}fetch(a,l){var h,g,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(l!=null&&l.cancelRefetch))this.cancel({silent:!0});else if(H(this,Ut))return H(this,Ut).continueRetry(),H(this,Ut).promise}if(a&&this.setOptions(a),!this.options.queryFn){const j=this.observers.find(C=>C.options.queryFn);j&&this.setOptions(j.options)}const r=new AbortController,o=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(ve(this,zn,!0),r.signal)})},d=()=>{const j=Mb(this.options,l),b=(()=>{const E={client:H(this,qn),queryKey:this.queryKey,meta:this.meta};return o(E),E})();return ve(this,zn,!1),this.options.persister?this.options.persister(j,b,this):j(b)},p=(()=>{const j={fetchOptions:l,options:this.options,queryKey:this.queryKey,client:H(this,qn),state:this.state,fetchFn:d};return o(j),j})();(h=this.options.behavior)==null||h.onFetch(p,this),ve(this,Ul,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=p.fetchOptions)==null?void 0:g.meta))&&ze(this,qs,wa).call(this,{type:"fetch",meta:(y=p.fetchOptions)==null?void 0:y.meta});const x=j=>{var C,b,E,v;Nm(j)&&j.silent||ze(this,qs,wa).call(this,{type:"error",error:j}),Nm(j)||((b=(C=H(this,Ts).config).onError)==null||b.call(C,j,this),(v=(E=H(this,Ts).config).onSettled)==null||v.call(E,this.state.data,j,this)),this.scheduleGc()};return ve(this,Ut,_b({initialPromise:l==null?void 0:l.initialPromise,fn:p.fetchFn,abort:r.abort.bind(r),onSuccess:j=>{var C,b,E,v;if(j===void 0){x(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(j)}catch(S){x(S);return}(b=(C=H(this,Ts).config).onSuccess)==null||b.call(C,j,this),(v=(E=H(this,Ts).config).onSettled)==null||v.call(E,j,this.state.error,this),this.scheduleGc()},onError:x,onFail:(j,C)=>{ze(this,qs,wa).call(this,{type:"failed",failureCount:j,error:C})},onPause:()=>{ze(this,qs,wa).call(this,{type:"pause"})},onContinue:()=>{ze(this,qs,wa).call(this,{type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode,canRun:()=>!0})),H(this,Ut).start()}},zl=new WeakMap,Ul=new WeakMap,Ts=new WeakMap,qn=new WeakMap,Ut=new WeakMap,gi=new WeakMap,zn=new WeakMap,qs=new WeakSet,wa=function(a){const l=r=>{switch(a.type){case"failed":return{...r,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...zb(r.data,this.options),fetchMeta:a.meta??null};case"success":return{...r,data:a.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=a.error;return Nm(o)&&o.revert&&H(this,Ul)?{...H(this,Ul),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...a.state}}};this.state=l(this.state),Ct.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),H(this,Ts).notify({query:this,type:"updated",action:a})})},ab);function zb(t,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fb(a.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Z2(t){const a=typeof t.initialData=="function"?t.initialData():t.initialData,l=a!==void 0,r=l?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:l?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}var Js,nb,J2=(nb=class extends Jl{constructor(a={}){super();Ae(this,Js);this.config=a,ve(this,Js,new Map)}build(a,l,r){const o=l.queryKey,d=l.queryHash??Nf(o,l);let m=this.get(d);return m||(m=new X2({client:a,queryKey:o,queryHash:d,options:a.defaultQueryOptions(l),state:r,defaultOptions:a.getQueryDefaults(o)}),this.add(m)),m}add(a){H(this,Js).has(a.queryHash)||(H(this,Js).set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const l=H(this,Js).get(a.queryHash);l&&(a.destroy(),l===a&&H(this,Js).delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){Ct.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return H(this,Js).get(a)}getAll(){return[...H(this,Js).values()]}find(a){const l={exact:!0,...a};return this.getAll().find(r=>Xg(l,r))}findAll(a={}){const l=this.getAll();return Object.keys(a).length>0?l.filter(r=>Xg(a,r)):l}notify(a){Ct.batch(()=>{this.listeners.forEach(l=>{l(a)})})}onFocus(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},Js=new WeakMap,nb),ea,Qt,Un,ta,Ja,lb,eS=(lb=class extends qb{constructor(a){super();Ae(this,ta);Ae(this,ea);Ae(this,Qt);Ae(this,Un);this.mutationId=a.mutationId,ve(this,Qt,a.mutationCache),ve(this,ea,[]),this.state=a.state||Ub(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){H(this,ea).includes(a)||(H(this,ea).push(a),this.clearGcTimeout(),H(this,Qt).notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){ve(this,ea,H(this,ea).filter(l=>l!==a)),this.scheduleGc(),H(this,Qt).notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){H(this,ea).length||(this.state.status==="pending"?this.scheduleGc():H(this,Qt).remove(this))}continue(){var a;return((a=H(this,Un))==null?void 0:a.continue())??this.execute(this.state.variables)}async execute(a){var d,m,p,x,h,g,y,j,C,b,E,v,S,w,N,T,P,L,z,q;const l=()=>{ze(this,ta,Ja).call(this,{type:"continue"})};ve(this,Un,_b({fn:()=>this.options.mutationFn?this.options.mutationFn(a):Promise.reject(new Error("No mutationFn found")),onFail:(B,de)=>{ze(this,ta,Ja).call(this,{type:"failed",failureCount:B,error:de})},onPause:()=>{ze(this,ta,Ja).call(this,{type:"pause"})},onContinue:l,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,Qt).canRun(this)}));const r=this.state.status==="pending",o=!H(this,Un).canStart();try{if(r)l();else{ze(this,ta,Ja).call(this,{type:"pending",variables:a,isPaused:o}),await((m=(d=H(this,Qt).config).onMutate)==null?void 0:m.call(d,a,this));const de=await((x=(p=this.options).onMutate)==null?void 0:x.call(p,a));de!==this.state.context&&ze(this,ta,Ja).call(this,{type:"pending",context:de,variables:a,isPaused:o})}const B=await H(this,Un).start();return await((g=(h=H(this,Qt).config).onSuccess)==null?void 0:g.call(h,B,a,this.state.context,this)),await((j=(y=this.options).onSuccess)==null?void 0:j.call(y,B,a,this.state.context)),await((b=(C=H(this,Qt).config).onSettled)==null?void 0:b.call(C,B,null,this.state.variables,this.state.context,this)),await((v=(E=this.options).onSettled)==null?void 0:v.call(E,B,null,a,this.state.context)),ze(this,ta,Ja).call(this,{type:"success",data:B}),B}catch(B){try{throw await((w=(S=H(this,Qt).config).onError)==null?void 0:w.call(S,B,a,this.state.context,this)),await((T=(N=this.options).onError)==null?void 0:T.call(N,B,a,this.state.context)),await((L=(P=H(this,Qt).config).onSettled)==null?void 0:L.call(P,void 0,B,this.state.variables,this.state.context,this)),await((q=(z=this.options).onSettled)==null?void 0:q.call(z,void 0,B,a,this.state.context)),B}finally{ze(this,ta,Ja).call(this,{type:"error",error:B})}}finally{H(this,Qt).runNext(this)}}},ea=new WeakMap,Qt=new WeakMap,Un=new WeakMap,ta=new WeakSet,Ja=function(a){const l=r=>{switch(a.type){case"failed":return{...r,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...r,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:a.error,failureCount:r.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=l(this.state),Ct.batch(()=>{H(this,ea).forEach(r=>{r.onMutationUpdate(a)}),H(this,Qt).notify({mutation:this,type:"updated",action:a})})},lb);function Ub(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var va,zs,bi,rb,tS=(rb=class extends Jl{constructor(a={}){super();Ae(this,va);Ae(this,zs);Ae(this,bi);this.config=a,ve(this,va,new Set),ve(this,zs,new Map),ve(this,bi,0)}build(a,l,r){const o=new eS({mutationCache:this,mutationId:++Qo(this,bi)._,options:a.defaultMutationOptions(l),state:r});return this.add(o),o}add(a){H(this,va).add(a);const l=Vo(a);if(typeof l=="string"){const r=H(this,zs).get(l);r?r.push(a):H(this,zs).set(l,[a])}this.notify({type:"added",mutation:a})}remove(a){if(H(this,va).delete(a)){const l=Vo(a);if(typeof l=="string"){const r=H(this,zs).get(l);if(r)if(r.length>1){const o=r.indexOf(a);o!==-1&&r.splice(o,1)}else r[0]===a&&H(this,zs).delete(l)}}this.notify({type:"removed",mutation:a})}canRun(a){const l=Vo(a);if(typeof l=="string"){const r=H(this,zs).get(l),o=r==null?void 0:r.find(d=>d.state.status==="pending");return!o||o===a}else return!0}runNext(a){var r;const l=Vo(a);if(typeof l=="string"){const o=(r=H(this,zs).get(l))==null?void 0:r.find(d=>d!==a&&d.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ct.batch(()=>{H(this,va).forEach(a=>{this.notify({type:"removed",mutation:a})}),H(this,va).clear(),H(this,zs).clear()})}getAll(){return Array.from(H(this,va))}find(a){const l={exact:!0,...a};return this.getAll().find(r=>Zg(l,r))}findAll(a={}){return this.getAll().filter(l=>Zg(a,l))}notify(a){Ct.batch(()=>{this.listeners.forEach(l=>{l(a)})})}resumePausedMutations(){const a=this.getAll().filter(l=>l.state.isPaused);return Ct.batch(()=>Promise.all(a.map(l=>l.continue().catch(Kt))))}},va=new WeakMap,zs=new WeakMap,bi=new WeakMap,rb);function Vo(t){var a;return(a=t.options.scope)==null?void 0:a.id}function t0(t){return{onFetch:(a,l)=>{var g,y,j,C,b;const r=a.options,o=(j=(y=(g=a.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:j.direction,d=((C=a.state.data)==null?void 0:C.pages)||[],m=((b=a.state.data)==null?void 0:b.pageParams)||[];let p={pages:[],pageParams:[]},x=0;const h=async()=>{let E=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(a.signal.aborted?E=!0:a.signal.addEventListener("abort",()=>{E=!0}),a.signal)})},S=Mb(a.options,a.fetchOptions),w=async(N,T,P)=>{if(E)return Promise.reject();if(T==null&&N.pages.length)return Promise.resolve(N);const z=(()=>{const Q={client:a.client,queryKey:a.queryKey,pageParam:T,direction:P?"backward":"forward",meta:a.options.meta};return v(Q),Q})(),q=await S(z),{maxPages:B}=a.options,de=P?Q2:H2;return{pages:de(N.pages,q,B),pageParams:de(N.pageParams,T,B)}};if(o&&d.length){const N=o==="backward",T=N?sS:s0,P={pages:d,pageParams:m},L=T(r,P);p=await w(P,L,N)}else{const N=t??d.length;do{const T=x===0?m[0]??r.initialPageParam:s0(r,p);if(x>0&&T==null)break;p=await w(p,T),x++}while(x<N)}return p};a.options.persister?a.fetchFn=()=>{var E,v;return(v=(E=a.options).persister)==null?void 0:v.call(E,h,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},l)}:a.fetchFn=h}}}function s0(t,{pages:a,pageParams:l}){const r=a.length-1;return a.length>0?t.getNextPageParam(a[r],a,l[r],l):void 0}function sS(t,{pages:a,pageParams:l}){var r;return a.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,a[0],a,l[0],l):void 0}var pt,sn,an,Il,$l,nn,Bl,Hl,ib,aS=(ib=class{constructor(t={}){Ae(this,pt);Ae(this,sn);Ae(this,an);Ae(this,Il);Ae(this,$l);Ae(this,nn);Ae(this,Bl);Ae(this,Hl);ve(this,pt,t.queryCache||new J2),ve(this,sn,t.mutationCache||new tS),ve(this,an,t.defaultOptions||{}),ve(this,Il,new Map),ve(this,$l,new Map),ve(this,nn,0)}mount(){Qo(this,nn)._++,H(this,nn)===1&&(ve(this,Bl,Cf.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,pt).onFocus())})),ve(this,Hl,oc.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,pt).onOnline())})))}unmount(){var t,a;Qo(this,nn)._--,H(this,nn)===0&&((t=H(this,Bl))==null||t.call(this),ve(this,Bl,void 0),(a=H(this,Hl))==null||a.call(this),ve(this,Hl,void 0))}isFetching(t){return H(this,pt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,sn).findAll({...t,status:"pending"}).length}getQueryData(t){var l;const a=this.defaultQueryOptions({queryKey:t});return(l=H(this,pt).get(a.queryHash))==null?void 0:l.state.data}ensureQueryData(t){const a=this.defaultQueryOptions(t),l=H(this,pt).build(this,a),r=l.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&l.isStaleByTime(un(a.staleTime,l))&&this.prefetchQuery(a),Promise.resolve(r))}getQueriesData(t){return H(this,pt).findAll(t).map(({queryKey:a,state:l})=>{const r=l.data;return[a,r]})}setQueryData(t,a,l){const r=this.defaultQueryOptions({queryKey:t}),o=H(this,pt).get(r.queryHash),d=o==null?void 0:o.state.data,m=$2(a,d);if(m!==void 0)return H(this,pt).build(this,r).setData(m,{...l,manual:!0})}setQueriesData(t,a,l){return Ct.batch(()=>H(this,pt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,a,l)]))}getQueryState(t){var l;const a=this.defaultQueryOptions({queryKey:t});return(l=H(this,pt).get(a.queryHash))==null?void 0:l.state}removeQueries(t){const a=H(this,pt);Ct.batch(()=>{a.findAll(t).forEach(l=>{a.remove(l)})})}resetQueries(t,a){const l=H(this,pt);return Ct.batch(()=>(l.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},a)))}cancelQueries(t,a={}){const l={revert:!0,...a},r=Ct.batch(()=>H(this,pt).findAll(t).map(o=>o.cancel(l)));return Promise.all(r).then(Kt).catch(Kt)}invalidateQueries(t,a={}){return Ct.batch(()=>(H(this,pt).findAll(t).forEach(l=>{l.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},a)))}refetchQueries(t,a={}){const l={...a,cancelRefetch:a.cancelRefetch??!0},r=Ct.batch(()=>H(this,pt).findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,l);return l.throwOnError||(d=d.catch(Kt)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(r).then(Kt)}fetchQuery(t){const a=this.defaultQueryOptions(t);a.retry===void 0&&(a.retry=!1);const l=H(this,pt).build(this,a);return l.isStaleByTime(un(a.staleTime,l))?l.fetch(a):Promise.resolve(l.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Kt).catch(Kt)}fetchInfiniteQuery(t){return t.behavior=t0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Kt).catch(Kt)}ensureInfiniteQueryData(t){return t.behavior=t0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oc.isOnline()?H(this,sn).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,pt)}getMutationCache(){return H(this,sn)}getDefaultOptions(){return H(this,an)}setDefaultOptions(t){ve(this,an,t)}setQueryDefaults(t,a){H(this,Il).set(Gn(t),{queryKey:t,defaultOptions:a})}getQueryDefaults(t){const a=[...H(this,Il).values()],l={};return a.forEach(r=>{fi(t,r.queryKey)&&Object.assign(l,r.defaultOptions)}),l}setMutationDefaults(t,a){H(this,$l).set(Gn(t),{mutationKey:t,defaultOptions:a})}getMutationDefaults(t){const a=[...H(this,$l).values()],l={};return a.forEach(r=>{fi(t,r.mutationKey)&&Object.assign(l,r.defaultOptions)}),l}defaultQueryOptions(t){if(t._defaulted)return t;const a={...H(this,an).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return a.queryHash||(a.queryHash=Nf(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Sf&&(a.enabled=!1),a}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,an).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,pt).clear(),H(this,sn).clear()}},pt=new WeakMap,sn=new WeakMap,an=new WeakMap,Il=new WeakMap,$l=new WeakMap,nn=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,ib),es,He,yi,Gt,In,Ql,ln,rn,wi,Gl,Kl,$n,Bn,on,Vl,tt,oi,Km,Vm,Ym,Wm,Xm,Zm,Jm,Ib,ob,nS=(ob=class extends Jl{constructor(a,l){super();Ae(this,tt);Ae(this,es);Ae(this,He);Ae(this,yi);Ae(this,Gt);Ae(this,In);Ae(this,Ql);Ae(this,ln);Ae(this,rn);Ae(this,wi);Ae(this,Gl);Ae(this,Kl);Ae(this,$n);Ae(this,Bn);Ae(this,on);Ae(this,Vl,new Set);this.options=l,ve(this,es,a),ve(this,rn,null),ve(this,ln,Gm()),this.options.experimental_prefetchInRender||H(this,ln).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(l)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,He).addObserver(this),a0(H(this,He),this.options)?ze(this,tt,oi).call(this):this.updateResult(),ze(this,tt,Wm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ef(H(this,He),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ef(H(this,He),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ze(this,tt,Xm).call(this),ze(this,tt,Zm).call(this),H(this,He).removeObserver(this)}setOptions(a){const l=this.options,r=H(this,He);if(this.options=H(this,es).defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Us(this.options.enabled,H(this,He))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ze(this,tt,Jm).call(this),H(this,He).setOptions(this.options),l._defaulted&&!ic(this.options,l)&&H(this,es).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,He),observer:this});const o=this.hasListeners();o&&n0(H(this,He),r,this.options,l)&&ze(this,tt,oi).call(this),this.updateResult(),o&&(H(this,He)!==r||Us(this.options.enabled,H(this,He))!==Us(l.enabled,H(this,He))||un(this.options.staleTime,H(this,He))!==un(l.staleTime,H(this,He)))&&ze(this,tt,Km).call(this);const d=ze(this,tt,Vm).call(this);o&&(H(this,He)!==r||Us(this.options.enabled,H(this,He))!==Us(l.enabled,H(this,He))||d!==H(this,on))&&ze(this,tt,Ym).call(this,d)}getOptimisticResult(a){const l=H(this,es).getQueryCache().build(H(this,es),a),r=this.createResult(l,a);return rS(this,r)&&(ve(this,Gt,r),ve(this,Ql,this.options),ve(this,In,H(this,He).state)),r}getCurrentResult(){return H(this,Gt)}trackResult(a,l){return new Proxy(a,{get:(r,o)=>(this.trackProp(o),l==null||l(o),Reflect.get(r,o))})}trackProp(a){H(this,Vl).add(a)}getCurrentQuery(){return H(this,He)}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const l=H(this,es).defaultQueryOptions(a),r=H(this,es).getQueryCache().build(H(this,es),l);return r.fetch().then(()=>this.createResult(r,l))}fetch(a){return ze(this,tt,oi).call(this,{...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,Gt)))}createResult(a,l){var B;const r=H(this,He),o=this.options,d=H(this,Gt),m=H(this,In),p=H(this,Ql),h=a!==r?a.state:H(this,yi),{state:g}=a;let y={...g},j=!1,C;if(l._optimisticResults){const de=this.hasListeners(),Q=!de&&a0(a,l),$=de&&n0(a,r,l,o);(Q||$)&&(y={...y,...zb(g.data,a.options)}),l._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:b,errorUpdatedAt:E,status:v}=y;C=y.data;let S=!1;if(l.placeholderData!==void 0&&C===void 0&&v==="pending"){let de;d!=null&&d.isPlaceholderData&&l.placeholderData===(p==null?void 0:p.placeholderData)?(de=d.data,S=!0):de=typeof l.placeholderData=="function"?l.placeholderData((B=H(this,Kl))==null?void 0:B.state.data,H(this,Kl)):l.placeholderData,de!==void 0&&(v="success",C=Qm(d==null?void 0:d.data,de,l),j=!0)}if(l.select&&C!==void 0&&!S)if(d&&C===(m==null?void 0:m.data)&&l.select===H(this,wi))C=H(this,Gl);else try{ve(this,wi,l.select),C=l.select(C),C=Qm(d==null?void 0:d.data,C,l),ve(this,Gl,C),ve(this,rn,null)}catch(de){ve(this,rn,de)}H(this,rn)&&(b=H(this,rn),C=H(this,Gl),E=Date.now(),v="error");const w=y.fetchStatus==="fetching",N=v==="pending",T=v==="error",P=N&&w,L=C!==void 0,q={status:v,fetchStatus:y.fetchStatus,isPending:N,isSuccess:v==="success",isError:T,isInitialLoading:P,isLoading:P,data:C,dataUpdatedAt:y.dataUpdatedAt,error:b,errorUpdatedAt:E,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>h.dataUpdateCount||y.errorUpdateCount>h.errorUpdateCount,isFetching:w,isRefetching:w&&!N,isLoadingError:T&&!L,isPaused:y.fetchStatus==="paused",isPlaceholderData:j,isRefetchError:T&&L,isStale:kf(a,l),refetch:this.refetch,promise:H(this,ln)};if(this.options.experimental_prefetchInRender){const de=ee=>{q.status==="error"?ee.reject(q.error):q.data!==void 0&&ee.resolve(q.data)},Q=()=>{const ee=ve(this,ln,q.promise=Gm());de(ee)},$=H(this,ln);switch($.status){case"pending":a.queryHash===r.queryHash&&de($);break;case"fulfilled":(q.status==="error"||q.data!==$.value)&&Q();break;case"rejected":(q.status!=="error"||q.error!==$.reason)&&Q();break}}return q}updateResult(){const a=H(this,Gt),l=this.createResult(H(this,He),this.options);if(ve(this,In,H(this,He).state),ve(this,Ql,this.options),H(this,In).data!==void 0&&ve(this,Kl,H(this,He)),ic(l,a))return;ve(this,Gt,l);const r=()=>{if(!a)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!H(this,Vl).size)return!0;const m=new Set(d??H(this,Vl));return this.options.throwOnError&&m.add("error"),Object.keys(H(this,Gt)).some(p=>{const x=p;return H(this,Gt)[x]!==a[x]&&m.has(x)})};ze(this,tt,Ib).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ze(this,tt,Wm).call(this)}},es=new WeakMap,He=new WeakMap,yi=new WeakMap,Gt=new WeakMap,In=new WeakMap,Ql=new WeakMap,ln=new WeakMap,rn=new WeakMap,wi=new WeakMap,Gl=new WeakMap,Kl=new WeakMap,$n=new WeakMap,Bn=new WeakMap,on=new WeakMap,Vl=new WeakMap,tt=new WeakSet,oi=function(a){ze(this,tt,Jm).call(this);let l=H(this,He).fetch(this.options,a);return a!=null&&a.throwOnError||(l=l.catch(Kt)),l},Km=function(){ze(this,tt,Xm).call(this);const a=un(this.options.staleTime,H(this,He));if(Qn||H(this,Gt).isStale||!Bm(a))return;const r=Tb(H(this,Gt).dataUpdatedAt,a)+1;ve(this,$n,setTimeout(()=>{H(this,Gt).isStale||this.updateResult()},r))},Vm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,He)):this.options.refetchInterval)??!1},Ym=function(a){ze(this,tt,Zm).call(this),ve(this,on,a),!(Qn||Us(this.options.enabled,H(this,He))===!1||!Bm(H(this,on))||H(this,on)===0)&&ve(this,Bn,setInterval(()=>{(this.options.refetchIntervalInBackground||Cf.isFocused())&&ze(this,tt,oi).call(this)},H(this,on)))},Wm=function(){ze(this,tt,Km).call(this),ze(this,tt,Ym).call(this,ze(this,tt,Vm).call(this))},Xm=function(){H(this,$n)&&(clearTimeout(H(this,$n)),ve(this,$n,void 0))},Zm=function(){H(this,Bn)&&(clearInterval(H(this,Bn)),ve(this,Bn,void 0))},Jm=function(){const a=H(this,es).getQueryCache().build(H(this,es),this.options);if(a===H(this,He))return;const l=H(this,He);ve(this,He,a),ve(this,yi,a.state),this.hasListeners()&&(l==null||l.removeObserver(this),a.addObserver(this))},Ib=function(a){Ct.batch(()=>{a.listeners&&this.listeners.forEach(l=>{l(H(this,Gt))}),H(this,es).getQueryCache().notify({query:H(this,He),type:"observerResultsUpdated"})})},ob);function lS(t,a){return Us(a.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&a.retryOnMount===!1)}function a0(t,a){return lS(t,a)||t.state.data!==void 0&&ef(t,a,a.refetchOnMount)}function ef(t,a,l){if(Us(a.enabled,t)!==!1&&un(a.staleTime,t)!=="static"){const r=typeof l=="function"?l(t):l;return r==="always"||r!==!1&&kf(t,a)}return!1}function n0(t,a,l,r){return(t!==a||Us(r.enabled,t)===!1)&&(!l.suspense||t.state.status!=="error")&&kf(t,l)}function kf(t,a){return Us(a.enabled,t)!==!1&&t.isStaleByTime(un(a.staleTime,t))}function rS(t,a){return!ic(t.getCurrentResult(),a)}var cn,dn,ts,ja,Ca,tc,tf,cb,iS=(cb=class extends Jl{constructor(l,r){super();Ae(this,Ca);Ae(this,cn);Ae(this,dn);Ae(this,ts);Ae(this,ja);ve(this,cn,l),this.setOptions(r),this.bindMethods(),ze(this,Ca,tc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(l){var o;const r=this.options;this.options=H(this,cn).defaultMutationOptions(l),ic(this.options,r)||H(this,cn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:H(this,ts),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Gn(r.mutationKey)!==Gn(this.options.mutationKey)?this.reset():((o=H(this,ts))==null?void 0:o.state.status)==="pending"&&H(this,ts).setOptions(this.options)}onUnsubscribe(){var l;this.hasListeners()||(l=H(this,ts))==null||l.removeObserver(this)}onMutationUpdate(l){ze(this,Ca,tc).call(this),ze(this,Ca,tf).call(this,l)}getCurrentResult(){return H(this,dn)}reset(){var l;(l=H(this,ts))==null||l.removeObserver(this),ve(this,ts,void 0),ze(this,Ca,tc).call(this),ze(this,Ca,tf).call(this)}mutate(l,r){var o;return ve(this,ja,r),(o=H(this,ts))==null||o.removeObserver(this),ve(this,ts,H(this,cn).getMutationCache().build(H(this,cn),this.options)),H(this,ts).addObserver(this),H(this,ts).execute(l)}},cn=new WeakMap,dn=new WeakMap,ts=new WeakMap,ja=new WeakMap,Ca=new WeakSet,tc=function(){var r;const l=((r=H(this,ts))==null?void 0:r.state)??Ub();ve(this,dn,{...l,isPending:l.status==="pending",isSuccess:l.status==="success",isError:l.status==="error",isIdle:l.status==="idle",mutate:this.mutate,reset:this.reset})},tf=function(l){Ct.batch(()=>{var r,o,d,m,p,x,h,g;if(H(this,ja)&&this.hasListeners()){const y=H(this,dn).variables,j=H(this,dn).context;(l==null?void 0:l.type)==="success"?((o=(r=H(this,ja)).onSuccess)==null||o.call(r,l.data,y,j),(m=(d=H(this,ja)).onSettled)==null||m.call(d,l.data,null,y,j)):(l==null?void 0:l.type)==="error"&&((x=(p=H(this,ja)).onError)==null||x.call(p,l.error,y,j),(g=(h=H(this,ja)).onSettled)==null||g.call(h,void 0,l.error,y,j))}this.listeners.forEach(y=>{y(H(this,dn))})})},cb),$b=A.createContext(void 0),Se=t=>{const a=A.useContext($b);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},oS=({client:t,children:a})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx($b.Provider,{value:t,children:a})),Bb=A.createContext(!1),cS=()=>A.useContext(Bb);Bb.Provider;function dS(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var uS=A.createContext(dS()),mS=()=>A.useContext(uS),fS=(t,a)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(a.isReset()||(t.retryOnMount=!1))},hS=t=>{A.useEffect(()=>{t.clearReset()},[t])},xS=({result:t,errorResetBoundary:a,throwOnError:l,query:r,suspense:o})=>t.isError&&!a.isReset()&&!t.isFetching&&r&&(o&&t.data===void 0||Lb(l,[t.error,r])),pS=t=>{if(t.suspense){const a=r=>r==="static"?r:Math.max(r??1e3,1e3),l=t.staleTime;t.staleTime=typeof l=="function"?(...r)=>a(l(...r)):a(l),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},gS=(t,a)=>t.isLoading&&t.isFetching&&!a,bS=(t,a)=>(t==null?void 0:t.suspense)&&a.isPending,l0=(t,a,l)=>a.fetchOptimistic(t).catch(()=>{l.clearReset()});function yS(t,a,l){var y,j,C,b,E;const r=cS(),o=mS(),d=Se(),m=d.defaultQueryOptions(t);(j=(y=d.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||j.call(y,m),m._optimisticResults=r?"isRestoring":"optimistic",pS(m),fS(m,o),hS(o);const p=!d.getQueryCache().get(m.queryHash),[x]=A.useState(()=>new a(d,m)),h=x.getOptimisticResult(m),g=!r&&t.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(v=>{const S=g?x.subscribe(Ct.batchCalls(v)):Kt;return x.updateResult(),S},[x,g]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),A.useEffect(()=>{x.setOptions(m)},[m,x]),bS(m,h))throw l0(m,x,o);if(xS({result:h,errorResetBoundary:o,throwOnError:m.throwOnError,query:d.getQueryCache().get(m.queryHash),suspense:m.suspense}))throw h.error;if((b=(C=d.getDefaultOptions().queries)==null?void 0:C._experimental_afterQuery)==null||b.call(C,m,h),m.experimental_prefetchInRender&&!Qn&&gS(h,r)){const v=p?l0(m,x,o):(E=d.getQueryCache().get(m.queryHash))==null?void 0:E.promise;v==null||v.catch(Kt).finally(()=>{x.updateResult()})}return m.notifyOnChangeProps?h:x.trackResult(h)}function Fe(t,a){return yS(t,nS)}function ie(t,a){const l=Se(),[r]=A.useState(()=>new iS(l,t));A.useEffect(()=>{r.setOptions(t)},[r,t]);const o=A.useSyncExternalStore(A.useCallback(m=>r.subscribe(Ct.batchCalls(m)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d=A.useCallback((m,p)=>{r.mutate(m,p).catch(Kt)},[r]);if(o.error&&Lb(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}const Ee=new aS;function Hb(t,a){return function(){return t.apply(a,arguments)}}const{toString:wS}=Object.prototype,{getPrototypeOf:Ef}=Object,{iterator:Rc,toStringTag:Qb}=Symbol,Tc=(t=>a=>{const l=wS.call(a);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),Hs=t=>(t=t.toLowerCase(),a=>Tc(a)===t),Pc=t=>a=>typeof a===t,{isArray:er}=Array,hi=Pc("undefined");function vS(t){return t!==null&&!hi(t)&&t.constructor!==null&&!hi(t.constructor)&&ss(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Gb=Hs("ArrayBuffer");function jS(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&Gb(t.buffer),a}const NS=Pc("string"),ss=Pc("function"),Kb=Pc("number"),Mc=t=>t!==null&&typeof t=="object",SS=t=>t===!0||t===!1,sc=t=>{if(Tc(t)!=="object")return!1;const a=Ef(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Qb in t)&&!(Rc in t)},CS=Hs("Date"),kS=Hs("File"),ES=Hs("Blob"),AS=Hs("FileList"),OS=t=>Mc(t)&&ss(t.pipe),RS=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||ss(t.append)&&((a=Tc(t))==="formdata"||a==="object"&&ss(t.toString)&&t.toString()==="[object FormData]"))},TS=Hs("URLSearchParams"),[PS,MS,LS,FS]=["ReadableStream","Request","Response","Headers"].map(Hs),DS=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ni(t,a,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),er(t))for(r=0,o=t.length;r<o;r++)a.call(null,t[r],r,t);else{const d=l?Object.getOwnPropertyNames(t):Object.keys(t),m=d.length;let p;for(r=0;r<m;r++)p=d[r],a.call(null,t[p],p,t)}}function Vb(t,a){a=a.toLowerCase();const l=Object.keys(t);let r=l.length,o;for(;r-- >0;)if(o=l[r],a===o.toLowerCase())return o;return null}const Fn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yb=t=>!hi(t)&&t!==Fn;function sf(){const{caseless:t}=Yb(this)&&this||{},a={},l=(r,o)=>{const d=t&&Vb(a,o)||o;sc(a[d])&&sc(r)?a[d]=sf(a[d],r):sc(r)?a[d]=sf({},r):er(r)?a[d]=r.slice():a[d]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Ni(arguments[r],l);return a}const _S=(t,a,l,{allOwnKeys:r}={})=>(Ni(a,(o,d)=>{l&&ss(o)?t[d]=Hb(o,l):t[d]=o},{allOwnKeys:r}),t),qS=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),zS=(t,a,l,r)=>{t.prototype=Object.create(a.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),l&&Object.assign(t.prototype,l)},US=(t,a,l,r)=>{let o,d,m;const p={};if(a=a||{},t==null)return a;do{for(o=Object.getOwnPropertyNames(t),d=o.length;d-- >0;)m=o[d],(!r||r(m,t,a))&&!p[m]&&(a[m]=t[m],p[m]=!0);t=l!==!1&&Ef(t)}while(t&&(!l||l(t,a))&&t!==Object.prototype);return a},IS=(t,a,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=a.length;const r=t.indexOf(a,l);return r!==-1&&r===l},$S=t=>{if(!t)return null;if(er(t))return t;let a=t.length;if(!Kb(a))return null;const l=new Array(a);for(;a-- >0;)l[a]=t[a];return l},BS=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Ef(Uint8Array)),HS=(t,a)=>{const r=(t&&t[Rc]).call(t);let o;for(;(o=r.next())&&!o.done;){const d=o.value;a.call(t,d[0],d[1])}},QS=(t,a)=>{let l;const r=[];for(;(l=t.exec(a))!==null;)r.push(l);return r},GS=Hs("HTMLFormElement"),KS=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,r,o){return r.toUpperCase()+o}),r0=(({hasOwnProperty:t})=>(a,l)=>t.call(a,l))(Object.prototype),VS=Hs("RegExp"),Wb=(t,a)=>{const l=Object.getOwnPropertyDescriptors(t),r={};Ni(l,(o,d)=>{let m;(m=a(o,d,t))!==!1&&(r[d]=m||o)}),Object.defineProperties(t,r)},YS=t=>{Wb(t,(a,l)=>{if(ss(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const r=t[l];if(ss(r)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},WS=(t,a)=>{const l={},r=o=>{o.forEach(d=>{l[d]=!0})};return er(t)?r(t):r(String(t).split(a)),l},XS=()=>{},ZS=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function JS(t){return!!(t&&ss(t.append)&&t[Qb]==="FormData"&&t[Rc])}const eC=t=>{const a=new Array(10),l=(r,o)=>{if(Mc(r)){if(a.indexOf(r)>=0)return;if(!("toJSON"in r)){a[o]=r;const d=er(r)?[]:{};return Ni(r,(m,p)=>{const x=l(m,o+1);!hi(x)&&(d[p]=x)}),a[o]=void 0,d}}return r};return l(t,0)},tC=Hs("AsyncFunction"),sC=t=>t&&(Mc(t)||ss(t))&&ss(t.then)&&ss(t.catch),Xb=((t,a)=>t?setImmediate:a?((l,r)=>(Fn.addEventListener("message",({source:o,data:d})=>{o===Fn&&d===l&&r.length&&r.shift()()},!1),o=>{r.push(o),Fn.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",ss(Fn.postMessage)),aC=typeof queueMicrotask<"u"?queueMicrotask.bind(Fn):typeof process<"u"&&process.nextTick||Xb,nC=t=>t!=null&&ss(t[Rc]),ue={isArray:er,isArrayBuffer:Gb,isBuffer:vS,isFormData:RS,isArrayBufferView:jS,isString:NS,isNumber:Kb,isBoolean:SS,isObject:Mc,isPlainObject:sc,isReadableStream:PS,isRequest:MS,isResponse:LS,isHeaders:FS,isUndefined:hi,isDate:CS,isFile:kS,isBlob:ES,isRegExp:VS,isFunction:ss,isStream:OS,isURLSearchParams:TS,isTypedArray:BS,isFileList:AS,forEach:Ni,merge:sf,extend:_S,trim:DS,stripBOM:qS,inherits:zS,toFlatObject:US,kindOf:Tc,kindOfTest:Hs,endsWith:IS,toArray:$S,forEachEntry:HS,matchAll:QS,isHTMLForm:GS,hasOwnProperty:r0,hasOwnProp:r0,reduceDescriptors:Wb,freezeMethods:YS,toObjectSet:WS,toCamelCase:KS,noop:XS,toFiniteNumber:ZS,findKey:Vb,global:Fn,isContextDefined:Yb,isSpecCompliantForm:JS,toJSONObject:eC,isAsyncFn:tC,isThenable:sC,setImmediate:Xb,asap:aC,isIterable:nC};function De(t,a,l,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),l&&(this.config=l),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}ue.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const Zb=De.prototype,Jb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Jb[t]={value:t}});Object.defineProperties(De,Jb);Object.defineProperty(Zb,"isAxiosError",{value:!0});De.from=(t,a,l,r,o,d)=>{const m=Object.create(Zb);return ue.toFlatObject(t,m,function(x){return x!==Error.prototype},p=>p!=="isAxiosError"),De.call(m,t.message,a,l,r,o),m.cause=t,m.name=t.name,d&&Object.assign(m,d),m};const lC=null;function af(t){return ue.isPlainObject(t)||ue.isArray(t)}function ey(t){return ue.endsWith(t,"[]")?t.slice(0,-2):t}function i0(t,a,l){return t?t.concat(a).map(function(o,d){return o=ey(o),!l&&d?"["+o+"]":o}).join(l?".":""):a}function rC(t){return ue.isArray(t)&&!t.some(af)}const iC=ue.toFlatObject(ue,{},null,function(a){return/^is[A-Z]/.test(a)});function Lc(t,a,l){if(!ue.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,l=ue.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,v){return!ue.isUndefined(v[E])});const r=l.metaTokens,o=l.visitor||g,d=l.dots,m=l.indexes,x=(l.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(a);if(!ue.isFunction(o))throw new TypeError("visitor must be a function");function h(b){if(b===null)return"";if(ue.isDate(b))return b.toISOString();if(!x&&ue.isBlob(b))throw new De("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(b)||ue.isTypedArray(b)?x&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function g(b,E,v){let S=b;if(b&&!v&&typeof b=="object"){if(ue.endsWith(E,"{}"))E=r?E:E.slice(0,-2),b=JSON.stringify(b);else if(ue.isArray(b)&&rC(b)||(ue.isFileList(b)||ue.endsWith(E,"[]"))&&(S=ue.toArray(b)))return E=ey(E),S.forEach(function(N,T){!(ue.isUndefined(N)||N===null)&&a.append(m===!0?i0([E],T,d):m===null?E:E+"[]",h(N))}),!1}return af(b)?!0:(a.append(i0(v,E,d),h(b)),!1)}const y=[],j=Object.assign(iC,{defaultVisitor:g,convertValue:h,isVisitable:af});function C(b,E){if(!ue.isUndefined(b)){if(y.indexOf(b)!==-1)throw Error("Circular reference detected in "+E.join("."));y.push(b),ue.forEach(b,function(S,w){(!(ue.isUndefined(S)||S===null)&&o.call(a,S,ue.isString(w)?w.trim():w,E,j))===!0&&C(S,E?E.concat(w):[w])}),y.pop()}}if(!ue.isObject(t))throw new TypeError("data must be an object");return C(t),a}function o0(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return a[r]})}function Af(t,a){this._pairs=[],t&&Lc(t,this,a)}const ty=Af.prototype;ty.append=function(a,l){this._pairs.push([a,l])};ty.toString=function(a){const l=a?function(r){return a.call(this,r,o0)}:o0;return this._pairs.map(function(o){return l(o[0])+"="+l(o[1])},"").join("&")};function oC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sy(t,a,l){if(!a)return t;const r=l&&l.encode||oC;ue.isFunction(l)&&(l={serialize:l});const o=l&&l.serialize;let d;if(o?d=o(a,l):d=ue.isURLSearchParams(a)?a.toString():new Af(a,l).toString(r),d){const m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class c0{constructor(){this.handlers=[]}use(a,l,r){return this.handlers.push({fulfilled:a,rejected:l,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ue.forEach(this.handlers,function(r){r!==null&&a(r)})}}const ay={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cC=typeof URLSearchParams<"u"?URLSearchParams:Af,dC=typeof FormData<"u"?FormData:null,uC=typeof Blob<"u"?Blob:null,mC={isBrowser:!0,classes:{URLSearchParams:cC,FormData:dC,Blob:uC},protocols:["http","https","file","blob","url","data"]},Of=typeof window<"u"&&typeof document<"u",nf=typeof navigator=="object"&&navigator||void 0,fC=Of&&(!nf||["ReactNative","NativeScript","NS"].indexOf(nf.product)<0),hC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xC=Of&&window.location.href||"http://localhost",pC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Of,hasStandardBrowserEnv:fC,hasStandardBrowserWebWorkerEnv:hC,navigator:nf,origin:xC},Symbol.toStringTag,{value:"Module"})),It={...pC,...mC};function gC(t,a){return Lc(t,new It.classes.URLSearchParams,Object.assign({visitor:function(l,r,o,d){return It.isNode&&ue.isBuffer(l)?(this.append(r,l.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},a))}function bC(t){return ue.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function yC(t){const a={},l=Object.keys(t);let r;const o=l.length;let d;for(r=0;r<o;r++)d=l[r],a[d]=t[d];return a}function ny(t){function a(l,r,o,d){let m=l[d++];if(m==="__proto__")return!0;const p=Number.isFinite(+m),x=d>=l.length;return m=!m&&ue.isArray(o)?o.length:m,x?(ue.hasOwnProp(o,m)?o[m]=[o[m],r]:o[m]=r,!p):((!o[m]||!ue.isObject(o[m]))&&(o[m]=[]),a(l,r,o[m],d)&&ue.isArray(o[m])&&(o[m]=yC(o[m])),!p)}if(ue.isFormData(t)&&ue.isFunction(t.entries)){const l={};return ue.forEachEntry(t,(r,o)=>{a(bC(r),o,l,0)}),l}return null}function wC(t,a,l){if(ue.isString(t))try{return(a||JSON.parse)(t),ue.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(l||JSON.stringify)(t)}const Si={transitional:ay,adapter:["xhr","http","fetch"],transformRequest:[function(a,l){const r=l.getContentType()||"",o=r.indexOf("application/json")>-1,d=ue.isObject(a);if(d&&ue.isHTMLForm(a)&&(a=new FormData(a)),ue.isFormData(a))return o?JSON.stringify(ny(a)):a;if(ue.isArrayBuffer(a)||ue.isBuffer(a)||ue.isStream(a)||ue.isFile(a)||ue.isBlob(a)||ue.isReadableStream(a))return a;if(ue.isArrayBufferView(a))return a.buffer;if(ue.isURLSearchParams(a))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let p;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return gC(a,this.formSerializer).toString();if((p=ue.isFileList(a))||r.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return Lc(p?{"files[]":a}:a,x&&new x,this.formSerializer)}}return d||o?(l.setContentType("application/json",!1),wC(a)):a}],transformResponse:[function(a){const l=this.transitional||Si.transitional,r=l&&l.forcedJSONParsing,o=this.responseType==="json";if(ue.isResponse(a)||ue.isReadableStream(a))return a;if(a&&ue.isString(a)&&(r&&!this.responseType||o)){const m=!(l&&l.silentJSONParsing)&&o;try{return JSON.parse(a)}catch(p){if(m)throw p.name==="SyntaxError"?De.from(p,De.ERR_BAD_RESPONSE,this,null,this.response):p}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:It.classes.FormData,Blob:It.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],t=>{Si.headers[t]={}});const vC=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jC=t=>{const a={};let l,r,o;return t&&t.split(`
`).forEach(function(m){o=m.indexOf(":"),l=m.substring(0,o).trim().toLowerCase(),r=m.substring(o+1).trim(),!(!l||a[l]&&vC[l])&&(l==="set-cookie"?a[l]?a[l].push(r):a[l]=[r]:a[l]=a[l]?a[l]+", "+r:r)}),a},d0=Symbol("internals");function ii(t){return t&&String(t).trim().toLowerCase()}function ac(t){return t===!1||t==null?t:ue.isArray(t)?t.map(ac):String(t)}function NC(t){const a=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=l.exec(t);)a[r[1]]=r[2];return a}const SC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Sm(t,a,l,r,o){if(ue.isFunction(r))return r.call(this,a,l);if(o&&(a=l),!!ue.isString(a)){if(ue.isString(r))return a.indexOf(r)!==-1;if(ue.isRegExp(r))return r.test(a)}}function CC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,l,r)=>l.toUpperCase()+r)}function kC(t,a){const l=ue.toCamelCase(" "+a);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+l,{value:function(o,d,m){return this[r].call(this,a,o,d,m)},configurable:!0})})}let as=class{constructor(a){a&&this.set(a)}set(a,l,r){const o=this;function d(p,x,h){const g=ii(x);if(!g)throw new Error("header name must be a non-empty string");const y=ue.findKey(o,g);(!y||o[y]===void 0||h===!0||h===void 0&&o[y]!==!1)&&(o[y||x]=ac(p))}const m=(p,x)=>ue.forEach(p,(h,g)=>d(h,g,x));if(ue.isPlainObject(a)||a instanceof this.constructor)m(a,l);else if(ue.isString(a)&&(a=a.trim())&&!SC(a))m(jC(a),l);else if(ue.isObject(a)&&ue.isIterable(a)){let p={},x,h;for(const g of a){if(!ue.isArray(g))throw TypeError("Object iterator must return a key-value pair");p[h=g[0]]=(x=p[h])?ue.isArray(x)?[...x,g[1]]:[x,g[1]]:g[1]}m(p,l)}else a!=null&&d(l,a,r);return this}get(a,l){if(a=ii(a),a){const r=ue.findKey(this,a);if(r){const o=this[r];if(!l)return o;if(l===!0)return NC(o);if(ue.isFunction(l))return l.call(this,o,r);if(ue.isRegExp(l))return l.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,l){if(a=ii(a),a){const r=ue.findKey(this,a);return!!(r&&this[r]!==void 0&&(!l||Sm(this,this[r],r,l)))}return!1}delete(a,l){const r=this;let o=!1;function d(m){if(m=ii(m),m){const p=ue.findKey(r,m);p&&(!l||Sm(r,r[p],p,l))&&(delete r[p],o=!0)}}return ue.isArray(a)?a.forEach(d):d(a),o}clear(a){const l=Object.keys(this);let r=l.length,o=!1;for(;r--;){const d=l[r];(!a||Sm(this,this[d],d,a,!0))&&(delete this[d],o=!0)}return o}normalize(a){const l=this,r={};return ue.forEach(this,(o,d)=>{const m=ue.findKey(r,d);if(m){l[m]=ac(o),delete l[d];return}const p=a?CC(d):String(d).trim();p!==d&&delete l[d],l[p]=ac(o),r[p]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const l=Object.create(null);return ue.forEach(this,(r,o)=>{r!=null&&r!==!1&&(l[o]=a&&ue.isArray(r)?r.join(", "):r)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,l])=>a+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...l){const r=new this(a);return l.forEach(o=>r.set(o)),r}static accessor(a){const r=(this[d0]=this[d0]={accessors:{}}).accessors,o=this.prototype;function d(m){const p=ii(m);r[p]||(kC(o,m),r[p]=!0)}return ue.isArray(a)?a.forEach(d):d(a),this}};as.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(as.prototype,({value:t},a)=>{let l=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(r){this[l]=r}}});ue.freezeMethods(as);function Cm(t,a){const l=this||Si,r=a||l,o=as.from(r.headers);let d=r.data;return ue.forEach(t,function(p){d=p.call(l,d,o.normalize(),a?a.status:void 0)}),o.normalize(),d}function ly(t){return!!(t&&t.__CANCEL__)}function tr(t,a,l){De.call(this,t??"canceled",De.ERR_CANCELED,a,l),this.name="CanceledError"}ue.inherits(tr,De,{__CANCEL__:!0});function ry(t,a,l){const r=l.config.validateStatus;!l.status||!r||r(l.status)?t(l):a(new De("Request failed with status code "+l.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function EC(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function AC(t,a){t=t||10;const l=new Array(t),r=new Array(t);let o=0,d=0,m;return a=a!==void 0?a:1e3,function(x){const h=Date.now(),g=r[d];m||(m=h),l[o]=x,r[o]=h;let y=d,j=0;for(;y!==o;)j+=l[y++],y=y%t;if(o=(o+1)%t,o===d&&(d=(d+1)%t),h-m<a)return;const C=g&&h-g;return C?Math.round(j*1e3/C):void 0}}function OC(t,a){let l=0,r=1e3/a,o,d;const m=(h,g=Date.now())=>{l=g,o=null,d&&(clearTimeout(d),d=null),t.apply(null,h)};return[(...h)=>{const g=Date.now(),y=g-l;y>=r?m(h,g):(o=h,d||(d=setTimeout(()=>{d=null,m(o)},r-y)))},()=>o&&m(o)]}const cc=(t,a,l=3)=>{let r=0;const o=AC(50,250);return OC(d=>{const m=d.loaded,p=d.lengthComputable?d.total:void 0,x=m-r,h=o(x),g=m<=p;r=m;const y={loaded:m,total:p,progress:p?m/p:void 0,bytes:x,rate:h||void 0,estimated:h&&p&&g?(p-m)/h:void 0,event:d,lengthComputable:p!=null,[a?"download":"upload"]:!0};t(y)},l)},u0=(t,a)=>{const l=t!=null;return[r=>a[0]({lengthComputable:l,total:t,loaded:r}),a[1]]},m0=t=>(...a)=>ue.asap(()=>t(...a)),RC=It.hasStandardBrowserEnv?((t,a)=>l=>(l=new URL(l,It.origin),t.protocol===l.protocol&&t.host===l.host&&(a||t.port===l.port)))(new URL(It.origin),It.navigator&&/(msie|trident)/i.test(It.navigator.userAgent)):()=>!0,TC=It.hasStandardBrowserEnv?{write(t,a,l,r,o,d){const m=[t+"="+encodeURIComponent(a)];ue.isNumber(l)&&m.push("expires="+new Date(l).toGMTString()),ue.isString(r)&&m.push("path="+r),ue.isString(o)&&m.push("domain="+o),d===!0&&m.push("secure"),document.cookie=m.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function PC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function MC(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function iy(t,a,l){let r=!PC(a);return t&&(r||l==!1)?MC(t,a):a}const f0=t=>t instanceof as?{...t}:t;function Kn(t,a){a=a||{};const l={};function r(h,g,y,j){return ue.isPlainObject(h)&&ue.isPlainObject(g)?ue.merge.call({caseless:j},h,g):ue.isPlainObject(g)?ue.merge({},g):ue.isArray(g)?g.slice():g}function o(h,g,y,j){if(ue.isUndefined(g)){if(!ue.isUndefined(h))return r(void 0,h,y,j)}else return r(h,g,y,j)}function d(h,g){if(!ue.isUndefined(g))return r(void 0,g)}function m(h,g){if(ue.isUndefined(g)){if(!ue.isUndefined(h))return r(void 0,h)}else return r(void 0,g)}function p(h,g,y){if(y in a)return r(h,g);if(y in t)return r(void 0,h)}const x={url:d,method:d,data:d,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:p,headers:(h,g,y)=>o(f0(h),f0(g),y,!0)};return ue.forEach(Object.keys(Object.assign({},t,a)),function(g){const y=x[g]||o,j=y(t[g],a[g],g);ue.isUndefined(j)&&y!==p||(l[g]=j)}),l}const oy=t=>{const a=Kn({},t);let{data:l,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:d,headers:m,auth:p}=a;a.headers=m=as.from(m),a.url=sy(iy(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),p&&m.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let x;if(ue.isFormData(l)){if(It.hasStandardBrowserEnv||It.hasStandardBrowserWebWorkerEnv)m.setContentType(void 0);else if((x=m.getContentType())!==!1){const[h,...g]=x?x.split(";").map(y=>y.trim()).filter(Boolean):[];m.setContentType([h||"multipart/form-data",...g].join("; "))}}if(It.hasStandardBrowserEnv&&(r&&ue.isFunction(r)&&(r=r(a)),r||r!==!1&&RC(a.url))){const h=o&&d&&TC.read(d);h&&m.set(o,h)}return a},LC=typeof XMLHttpRequest<"u",FC=LC&&function(t){return new Promise(function(l,r){const o=oy(t);let d=o.data;const m=as.from(o.headers).normalize();let{responseType:p,onUploadProgress:x,onDownloadProgress:h}=o,g,y,j,C,b;function E(){C&&C(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(g),o.signal&&o.signal.removeEventListener("abort",g)}let v=new XMLHttpRequest;v.open(o.method.toUpperCase(),o.url,!0),v.timeout=o.timeout;function S(){if(!v)return;const N=as.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),P={data:!p||p==="text"||p==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:N,config:t,request:v};ry(function(z){l(z),E()},function(z){r(z),E()},P),v=null}"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(S)},v.onabort=function(){v&&(r(new De("Request aborted",De.ECONNABORTED,t,v)),v=null)},v.onerror=function(){r(new De("Network Error",De.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let T=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const P=o.transitional||ay;o.timeoutErrorMessage&&(T=o.timeoutErrorMessage),r(new De(T,P.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,t,v)),v=null},d===void 0&&m.setContentType(null),"setRequestHeader"in v&&ue.forEach(m.toJSON(),function(T,P){v.setRequestHeader(P,T)}),ue.isUndefined(o.withCredentials)||(v.withCredentials=!!o.withCredentials),p&&p!=="json"&&(v.responseType=o.responseType),h&&([j,b]=cc(h,!0),v.addEventListener("progress",j)),x&&v.upload&&([y,C]=cc(x),v.upload.addEventListener("progress",y),v.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(g=N=>{v&&(r(!N||N.type?new tr(null,t,v):N),v.abort(),v=null)},o.cancelToken&&o.cancelToken.subscribe(g),o.signal&&(o.signal.aborted?g():o.signal.addEventListener("abort",g)));const w=EC(o.url);if(w&&It.protocols.indexOf(w)===-1){r(new De("Unsupported protocol "+w+":",De.ERR_BAD_REQUEST,t));return}v.send(d||null)})},DC=(t,a)=>{const{length:l}=t=t?t.filter(Boolean):[];if(a||l){let r=new AbortController,o;const d=function(h){if(!o){o=!0,p();const g=h instanceof Error?h:this.reason;r.abort(g instanceof De?g:new tr(g instanceof Error?g.message:g))}};let m=a&&setTimeout(()=>{m=null,d(new De(`timeout ${a} of ms exceeded`,De.ETIMEDOUT))},a);const p=()=>{t&&(m&&clearTimeout(m),m=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(d):h.removeEventListener("abort",d)}),t=null)};t.forEach(h=>h.addEventListener("abort",d));const{signal:x}=r;return x.unsubscribe=()=>ue.asap(p),x}},_C=function*(t,a){let l=t.byteLength;if(l<a){yield t;return}let r=0,o;for(;r<l;)o=r+a,yield t.slice(r,o),r=o},qC=async function*(t,a){for await(const l of zC(t))yield*_C(l,a)},zC=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:l,value:r}=await a.read();if(l)break;yield r}}finally{await a.cancel()}},h0=(t,a,l,r)=>{const o=qC(t,a);let d=0,m,p=x=>{m||(m=!0,r&&r(x))};return new ReadableStream({async pull(x){try{const{done:h,value:g}=await o.next();if(h){p(),x.close();return}let y=g.byteLength;if(l){let j=d+=y;l(j)}x.enqueue(new Uint8Array(g))}catch(h){throw p(h),h}},cancel(x){return p(x),o.return()}},{highWaterMark:2})},Fc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",cy=Fc&&typeof ReadableStream=="function",UC=Fc&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),dy=(t,...a)=>{try{return!!t(...a)}catch{return!1}},IC=cy&&dy(()=>{let t=!1;const a=new Request(It.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),x0=64*1024,lf=cy&&dy(()=>ue.isReadableStream(new Response("").body)),dc={stream:lf&&(t=>t.body)};Fc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!dc[a]&&(dc[a]=ue.isFunction(t[a])?l=>l[a]():(l,r)=>{throw new De(`Response type '${a}' is not supported`,De.ERR_NOT_SUPPORT,r)})})})(new Response);const $C=async t=>{if(t==null)return 0;if(ue.isBlob(t))return t.size;if(ue.isSpecCompliantForm(t))return(await new Request(It.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(t)||ue.isArrayBuffer(t))return t.byteLength;if(ue.isURLSearchParams(t)&&(t=t+""),ue.isString(t))return(await UC(t)).byteLength},BC=async(t,a)=>{const l=ue.toFiniteNumber(t.getContentLength());return l??$C(a)},HC=Fc&&(async t=>{let{url:a,method:l,data:r,signal:o,cancelToken:d,timeout:m,onDownloadProgress:p,onUploadProgress:x,responseType:h,headers:g,withCredentials:y="same-origin",fetchOptions:j}=oy(t);h=h?(h+"").toLowerCase():"text";let C=DC([o,d&&d.toAbortSignal()],m),b;const E=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let v;try{if(x&&IC&&l!=="get"&&l!=="head"&&(v=await BC(g,r))!==0){let P=new Request(a,{method:"POST",body:r,duplex:"half"}),L;if(ue.isFormData(r)&&(L=P.headers.get("content-type"))&&g.setContentType(L),P.body){const[z,q]=u0(v,cc(m0(x)));r=h0(P.body,x0,z,q)}}ue.isString(y)||(y=y?"include":"omit");const S="credentials"in Request.prototype;b=new Request(a,{...j,signal:C,method:l.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:S?y:void 0});let w=await fetch(b);const N=lf&&(h==="stream"||h==="response");if(lf&&(p||N&&E)){const P={};["status","statusText","headers"].forEach(B=>{P[B]=w[B]});const L=ue.toFiniteNumber(w.headers.get("content-length")),[z,q]=p&&u0(L,cc(m0(p),!0))||[];w=new Response(h0(w.body,x0,z,()=>{q&&q(),E&&E()}),P)}h=h||"text";let T=await dc[ue.findKey(dc,h)||"text"](w,t);return!N&&E&&E(),await new Promise((P,L)=>{ry(P,L,{data:T,headers:as.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:b})})}catch(S){throw E&&E(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,t,b),{cause:S.cause||S}):De.from(S,S&&S.code,t,b)}}),rf={http:lC,xhr:FC,fetch:HC};ue.forEach(rf,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const p0=t=>`- ${t}`,QC=t=>ue.isFunction(t)||t===null||t===!1,uy={getAdapter:t=>{t=ue.isArray(t)?t:[t];const{length:a}=t;let l,r;const o={};for(let d=0;d<a;d++){l=t[d];let m;if(r=l,!QC(l)&&(r=rf[(m=String(l)).toLowerCase()],r===void 0))throw new De(`Unknown adapter '${m}'`);if(r)break;o[m||"#"+d]=r}if(!r){const d=Object.entries(o).map(([p,x])=>`adapter ${p} `+(x===!1?"is not supported by the environment":"is not available in the build"));let m=a?d.length>1?`since :
`+d.map(p0).join(`
`):" "+p0(d[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return r},adapters:rf};function km(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tr(null,t)}function g0(t){return km(t),t.headers=as.from(t.headers),t.data=Cm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),uy.getAdapter(t.adapter||Si.adapter)(t).then(function(r){return km(t),r.data=Cm.call(t,t.transformResponse,r),r.headers=as.from(r.headers),r},function(r){return ly(r)||(km(t),r&&r.response&&(r.response.data=Cm.call(t,t.transformResponse,r.response),r.response.headers=as.from(r.response.headers))),Promise.reject(r)})}const my="1.9.0",Dc={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{Dc[t]=function(r){return typeof r===t||"a"+(a<1?"n ":" ")+t}});const b0={};Dc.transitional=function(a,l,r){function o(d,m){return"[Axios v"+my+"] Transitional option '"+d+"'"+m+(r?". "+r:"")}return(d,m,p)=>{if(a===!1)throw new De(o(m," has been removed"+(l?" in "+l:"")),De.ERR_DEPRECATED);return l&&!b0[m]&&(b0[m]=!0,console.warn(o(m," has been deprecated since v"+l+" and will be removed in the near future"))),a?a(d,m,p):!0}};Dc.spelling=function(a){return(l,r)=>(console.warn(`${r} is likely a misspelling of ${a}`),!0)};function GC(t,a,l){if(typeof t!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const d=r[o],m=a[d];if(m){const p=t[d],x=p===void 0||m(p,d,t);if(x!==!0)throw new De("option "+d+" must be "+x,De.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new De("Unknown option "+d,De.ERR_BAD_OPTION)}}const nc={assertOptions:GC,validators:Dc},Xs=nc.validators;let Hn=class{constructor(a){this.defaults=a||{},this.interceptors={request:new c0,response:new c0}}async request(a,l){try{return await this._request(a,l)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const d=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch{}}throw r}}_request(a,l){typeof a=="string"?(l=l||{},l.url=a):l=a||{},l=Kn(this.defaults,l);const{transitional:r,paramsSerializer:o,headers:d}=l;r!==void 0&&nc.assertOptions(r,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1),o!=null&&(ue.isFunction(o)?l.paramsSerializer={serialize:o}:nc.assertOptions(o,{encode:Xs.function,serialize:Xs.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),nc.assertOptions(l,{baseUrl:Xs.spelling("baseURL"),withXsrfToken:Xs.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let m=d&&ue.merge(d.common,d[l.method]);d&&ue.forEach(["delete","get","head","post","put","patch","common"],b=>{delete d[b]}),l.headers=as.concat(m,d);const p=[];let x=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(l)===!1||(x=x&&E.synchronous,p.unshift(E.fulfilled,E.rejected))});const h=[];this.interceptors.response.forEach(function(E){h.push(E.fulfilled,E.rejected)});let g,y=0,j;if(!x){const b=[g0.bind(this),void 0];for(b.unshift.apply(b,p),b.push.apply(b,h),j=b.length,g=Promise.resolve(l);y<j;)g=g.then(b[y++],b[y++]);return g}j=p.length;let C=l;for(y=0;y<j;){const b=p[y++],E=p[y++];try{C=b(C)}catch(v){E.call(this,v);break}}try{g=g0.call(this,C)}catch(b){return Promise.reject(b)}for(y=0,j=h.length;y<j;)g=g.then(h[y++],h[y++]);return g}getUri(a){a=Kn(this.defaults,a);const l=iy(a.baseURL,a.url,a.allowAbsoluteUrls);return sy(l,a.params,a.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(a){Hn.prototype[a]=function(l,r){return this.request(Kn(r||{},{method:a,url:l,data:(r||{}).data}))}});ue.forEach(["post","put","patch"],function(a){function l(r){return function(d,m,p){return this.request(Kn(p||{},{method:a,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:m}))}}Hn.prototype[a]=l(),Hn.prototype[a+"Form"]=l(!0)});let KC=class fy{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(d){l=d});const r=this;this.promise.then(o=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](o);r._listeners=null}),this.promise.then=o=>{let d;const m=new Promise(p=>{r.subscribe(p),d=p}).then(o);return m.cancel=function(){r.unsubscribe(d)},m},a(function(d,m,p){r.reason||(r.reason=new tr(d,m,p),l(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const l=this._listeners.indexOf(a);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const a=new AbortController,l=r=>{a.abort(r)};return this.subscribe(l),a.signal.unsubscribe=()=>this.unsubscribe(l),a.signal}static source(){let a;return{token:new fy(function(o){a=o}),cancel:a}}};function VC(t){return function(l){return t.apply(null,l)}}function YC(t){return ue.isObject(t)&&t.isAxiosError===!0}const of={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(of).forEach(([t,a])=>{of[a]=t});function hy(t){const a=new Hn(t),l=Hb(Hn.prototype.request,a);return ue.extend(l,Hn.prototype,a,{allOwnKeys:!0}),ue.extend(l,a,null,{allOwnKeys:!0}),l.create=function(o){return hy(Kn(t,o))},l}const Qe=hy(Si);Qe.Axios=Hn;Qe.CanceledError=tr;Qe.CancelToken=KC;Qe.isCancel=ly;Qe.VERSION=my;Qe.toFormData=Lc;Qe.AxiosError=De;Qe.Cancel=Qe.CanceledError;Qe.all=function(a){return Promise.all(a)};Qe.spread=VC;Qe.isAxiosError=YC;Qe.mergeConfig=Kn;Qe.AxiosHeaders=as;Qe.formToJSON=t=>ny(ue.isHTMLForm(t)?new FormData(t):t);Qe.getAdapter=uy.getAdapter;Qe.HttpStatusCode=of;Qe.default=Qe;const{Axios:xP,AxiosError:pP,CanceledError:gP,isCancel:bP,CancelToken:yP,VERSION:wP,all:vP,Cancel:jP,isAxiosError:NP,spread:SP,toFormData:CP,AxiosHeaders:kP,HttpStatusCode:EP,formToJSON:AP,getAdapter:OP,mergeConfig:RP}=Qe;function Mt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var WC=typeof Symbol=="function"&&Symbol.observable||"@@observable",y0=WC,Em=()=>Math.random().toString(36).substring(7).split("").join("."),XC={INIT:`@@redux/INIT${Em()}`,REPLACE:`@@redux/REPLACE${Em()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Em()}`},uc=XC;function Rf(t){if(typeof t!="object"||t===null)return!1;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a||Object.getPrototypeOf(t)===null}function xy(t,a,l){if(typeof t!="function")throw new Error(Mt(2));if(typeof a=="function"&&typeof l=="function"||typeof l=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof a=="function"&&typeof l>"u"&&(l=a,a=void 0),typeof l<"u"){if(typeof l!="function")throw new Error(Mt(1));return l(xy)(t,a)}let r=t,o=a,d=new Map,m=d,p=0,x=!1;function h(){m===d&&(m=new Map,d.forEach((v,S)=>{m.set(S,v)}))}function g(){if(x)throw new Error(Mt(3));return o}function y(v){if(typeof v!="function")throw new Error(Mt(4));if(x)throw new Error(Mt(5));let S=!0;h();const w=p++;return m.set(w,v),function(){if(S){if(x)throw new Error(Mt(6));S=!1,h(),m.delete(w),d=null}}}function j(v){if(!Rf(v))throw new Error(Mt(7));if(typeof v.type>"u")throw new Error(Mt(8));if(typeof v.type!="string")throw new Error(Mt(17));if(x)throw new Error(Mt(9));try{x=!0,o=r(o,v)}finally{x=!1}return(d=m).forEach(w=>{w()}),v}function C(v){if(typeof v!="function")throw new Error(Mt(10));r=v,j({type:uc.REPLACE})}function b(){const v=y;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Mt(11));function w(){const T=S;T.next&&T.next(g())}return w(),{unsubscribe:v(w)}},[y0](){return this}}}return j({type:uc.INIT}),{dispatch:j,subscribe:y,getState:g,replaceReducer:C,[y0]:b}}function ZC(t){Object.keys(t).forEach(a=>{const l=t[a];if(typeof l(void 0,{type:uc.INIT})>"u")throw new Error(Mt(12));if(typeof l(void 0,{type:uc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function JC(t){const a=Object.keys(t),l={};for(let d=0;d<a.length;d++){const m=a[d];typeof t[m]=="function"&&(l[m]=t[m])}const r=Object.keys(l);let o;try{ZC(l)}catch(d){o=d}return function(m={},p){if(o)throw o;let x=!1;const h={};for(let g=0;g<r.length;g++){const y=r[g],j=l[y],C=m[y],b=j(C,p);if(typeof b>"u")throw p&&p.type,new Error(Mt(14));h[y]=b,x=x||b!==C}return x=x||r.length!==Object.keys(m).length,x?h:m}}function mc(...t){return t.length===0?a=>a:t.length===1?t[0]:t.reduce((a,l)=>(...r)=>a(l(...r)))}function e1(...t){return a=>(l,r)=>{const o=a(l,r);let d=()=>{throw new Error(Mt(15))};const m={getState:o.getState,dispatch:(x,...h)=>d(x,...h)},p=t.map(x=>x(m));return d=mc(...p)(o.dispatch),{...o,dispatch:d}}}function t1(t){return Rf(t)&&"type"in t&&typeof t.type=="string"}var py=Symbol.for("immer-nothing"),w0=Symbol.for("immer-draftable"),gs=Symbol.for("immer-state");function Is(t,...a){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Yl=Object.getPrototypeOf;function Vn(t){return!!t&&!!t[gs]}function Ea(t){var a;return t?gy(t)||Array.isArray(t)||!!t[w0]||!!((a=t.constructor)!=null&&a[w0])||qc(t)||zc(t):!1}var s1=Object.prototype.constructor.toString();function gy(t){if(!t||typeof t!="object")return!1;const a=Yl(t);if(a===null)return!0;const l=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return l===Object?!0:typeof l=="function"&&Function.toString.call(l)===s1}function fc(t,a){_c(t)===0?Reflect.ownKeys(t).forEach(l=>{a(l,t[l],t)}):t.forEach((l,r)=>a(r,l,t))}function _c(t){const a=t[gs];return a?a.type_:Array.isArray(t)?1:qc(t)?2:zc(t)?3:0}function cf(t,a){return _c(t)===2?t.has(a):Object.prototype.hasOwnProperty.call(t,a)}function by(t,a,l){const r=_c(t);r===2?t.set(a,l):r===3?t.add(l):t[a]=l}function a1(t,a){return t===a?t!==0||1/t===1/a:t!==t&&a!==a}function qc(t){return t instanceof Map}function zc(t){return t instanceof Set}function Ln(t){return t.copy_||t.base_}function df(t,a){if(qc(t))return new Map(t);if(zc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const l=gy(t);if(a===!0||a==="class_only"&&!l){const r=Object.getOwnPropertyDescriptors(t);delete r[gs];let o=Reflect.ownKeys(r);for(let d=0;d<o.length;d++){const m=o[d],p=r[m];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(r[m]={configurable:!0,writable:!0,enumerable:p.enumerable,value:t[m]})}return Object.create(Yl(t),r)}else{const r=Yl(t);if(r!==null&&l)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function Tf(t,a=!1){return Uc(t)||Vn(t)||!Ea(t)||(_c(t)>1&&(t.set=t.add=t.clear=t.delete=n1),Object.freeze(t),a&&Object.entries(t).forEach(([l,r])=>Tf(r,!0))),t}function n1(){Is(2)}function Uc(t){return Object.isFrozen(t)}var l1={};function Yn(t){const a=l1[t];return a||Is(0,t),a}var xi;function yy(){return xi}function r1(t,a){return{drafts_:[],parent_:t,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function v0(t,a){a&&(Yn("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=a)}function uf(t){mf(t),t.drafts_.forEach(i1),t.drafts_=null}function mf(t){t===xi&&(xi=t.parent_)}function j0(t){return xi=r1(xi,t)}function i1(t){const a=t[gs];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function N0(t,a){a.unfinalizedDrafts_=a.drafts_.length;const l=a.drafts_[0];return t!==void 0&&t!==l?(l[gs].modified_&&(uf(a),Is(4)),Ea(t)&&(t=hc(a,t),a.parent_||xc(a,t)),a.patches_&&Yn("Patches").generateReplacementPatches_(l[gs].base_,t,a.patches_,a.inversePatches_)):t=hc(a,l,[]),uf(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),t!==py?t:void 0}function hc(t,a,l){if(Uc(a))return a;const r=a[gs];if(!r)return fc(a,(o,d)=>S0(t,r,a,o,d,l)),a;if(r.scope_!==t)return a;if(!r.modified_)return xc(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let d=o,m=!1;r.type_===3&&(d=new Set(o),o.clear(),m=!0),fc(d,(p,x)=>S0(t,r,o,p,x,l,m)),xc(t,o,!1),l&&t.patches_&&Yn("Patches").generatePatches_(r,l,t.patches_,t.inversePatches_)}return r.copy_}function S0(t,a,l,r,o,d,m){if(Vn(o)){const p=d&&a&&a.type_!==3&&!cf(a.assigned_,r)?d.concat(r):void 0,x=hc(t,o,p);if(by(l,r,x),Vn(x))t.canAutoFreeze_=!1;else return}else m&&l.add(o);if(Ea(o)&&!Uc(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;hc(t,o),(!a||!a.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(l,r)&&xc(t,o)}}function xc(t,a,l=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Tf(a,l)}function o1(t,a){const l=Array.isArray(t),r={type_:l?1:0,scope_:a?a.scope_:yy(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,d=Pf;l&&(o=[r],d=pi);const{revoke:m,proxy:p}=Proxy.revocable(o,d);return r.draft_=p,r.revoke_=m,p}var Pf={get(t,a){if(a===gs)return t;const l=Ln(t);if(!cf(l,a))return c1(t,l,a);const r=l[a];return t.finalized_||!Ea(r)?r:r===Am(t.base_,a)?(Om(t),t.copy_[a]=hf(r,t)):r},has(t,a){return a in Ln(t)},ownKeys(t){return Reflect.ownKeys(Ln(t))},set(t,a,l){const r=wy(Ln(t),a);if(r!=null&&r.set)return r.set.call(t.draft_,l),!0;if(!t.modified_){const o=Am(Ln(t),a),d=o==null?void 0:o[gs];if(d&&d.base_===l)return t.copy_[a]=l,t.assigned_[a]=!1,!0;if(a1(l,o)&&(l!==void 0||cf(t.base_,a)))return!0;Om(t),ff(t)}return t.copy_[a]===l&&(l!==void 0||a in t.copy_)||Number.isNaN(l)&&Number.isNaN(t.copy_[a])||(t.copy_[a]=l,t.assigned_[a]=!0),!0},deleteProperty(t,a){return Am(t.base_,a)!==void 0||a in t.base_?(t.assigned_[a]=!1,Om(t),ff(t)):delete t.assigned_[a],t.copy_&&delete t.copy_[a],!0},getOwnPropertyDescriptor(t,a){const l=Ln(t),r=Reflect.getOwnPropertyDescriptor(l,a);return r&&{writable:!0,configurable:t.type_!==1||a!=="length",enumerable:r.enumerable,value:l[a]}},defineProperty(){Is(11)},getPrototypeOf(t){return Yl(t.base_)},setPrototypeOf(){Is(12)}},pi={};fc(Pf,(t,a)=>{pi[t]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});pi.deleteProperty=function(t,a){return pi.set.call(this,t,a,void 0)};pi.set=function(t,a,l){return Pf.set.call(this,t[0],a,l,t[0])};function Am(t,a){const l=t[gs];return(l?Ln(l):t)[a]}function c1(t,a,l){var o;const r=wy(a,l);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function wy(t,a){if(!(a in t))return;let l=Yl(t);for(;l;){const r=Object.getOwnPropertyDescriptor(l,a);if(r)return r;l=Yl(l)}}function ff(t){t.modified_||(t.modified_=!0,t.parent_&&ff(t.parent_))}function Om(t){t.copy_||(t.copy_=df(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var d1=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,l,r)=>{if(typeof a=="function"&&typeof l!="function"){const d=l;l=a;const m=this;return function(x=d,...h){return m.produce(x,g=>l.call(this,g,...h))}}typeof l!="function"&&Is(6),r!==void 0&&typeof r!="function"&&Is(7);let o;if(Ea(a)){const d=j0(this),m=hf(a,void 0);let p=!0;try{o=l(m),p=!1}finally{p?uf(d):mf(d)}return v0(d,r),N0(o,d)}else if(!a||typeof a!="object"){if(o=l(a),o===void 0&&(o=a),o===py&&(o=void 0),this.autoFreeze_&&Tf(o,!0),r){const d=[],m=[];Yn("Patches").generateReplacementPatches_(a,o,d,m),r(d,m)}return o}else Is(1,a)},this.produceWithPatches=(a,l)=>{if(typeof a=="function")return(m,...p)=>this.produceWithPatches(m,x=>a(x,...p));let r,o;return[this.produce(a,l,(m,p)=>{r=m,o=p}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ea(t)||Is(8),Vn(t)&&(t=u1(t));const a=j0(this),l=hf(t,void 0);return l[gs].isManual_=!0,mf(a),l}finishDraft(t,a){const l=t&&t[gs];(!l||!l.isManual_)&&Is(9);const{scope_:r}=l;return v0(r,a),N0(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,a){let l;for(l=a.length-1;l>=0;l--){const o=a[l];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}l>-1&&(a=a.slice(l+1));const r=Yn("Patches").applyPatches_;return Vn(t)?r(t,a):this.produce(t,o=>r(o,a))}};function hf(t,a){const l=qc(t)?Yn("MapSet").proxyMap_(t,a):zc(t)?Yn("MapSet").proxySet_(t,a):o1(t,a);return(a?a.scope_:yy()).drafts_.push(l),l}function u1(t){return Vn(t)||Is(10,t),vy(t)}function vy(t){if(!Ea(t)||Uc(t))return t;const a=t[gs];let l;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,l=df(t,a.scope_.immer_.useStrictShallowCopy_)}else l=df(t,!0);return fc(l,(r,o)=>{by(l,r,vy(o))}),a&&(a.finalized_=!1),l}var bs=new d1,jy=bs.produce;bs.produceWithPatches.bind(bs);bs.setAutoFreeze.bind(bs);bs.setUseStrictShallowCopy.bind(bs);bs.applyPatches.bind(bs);bs.createDraft.bind(bs);bs.finishDraft.bind(bs);function Ny(t){return({dispatch:l,getState:r})=>o=>d=>typeof d=="function"?d(l,r,t):o(d)}var m1=Ny(),f1=Ny,h1=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mc:mc.apply(null,arguments)};function C0(t,a){function l(...r){if(a){let o=a(...r);if(!o)throw new Error(Sa(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:r[0]}}return l.toString=()=>`${t}`,l.type=t,l.match=r=>t1(r)&&r.type===t,l}var Sy=class ci extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,ci.prototype)}static get[Symbol.species](){return ci}concat(...a){return super.concat.apply(this,a)}prepend(...a){return a.length===1&&Array.isArray(a[0])?new ci(...a[0].concat(this)):new ci(...a.concat(this))}};function k0(t){return Ea(t)?jy(t,()=>{}):t}function Yo(t,a,l){return t.has(a)?t.get(a):t.set(a,l(a)).get(a)}function x1(t){return typeof t=="boolean"}var p1=()=>function(a){const{thunk:l=!0,immutableCheck:r=!0,serializableCheck:o=!0,actionCreatorCheck:d=!0}=a??{};let m=new Sy;return l&&(x1(l)?m.push(m1):m.push(f1(l.extraArgument))),m},g1="RTK_autoBatch",E0=t=>a=>{setTimeout(a,t)},b1=(t={type:"raf"})=>a=>(...l)=>{const r=a(...l);let o=!0,d=!1,m=!1;const p=new Set,x=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:E0(10):t.type==="callback"?t.queueNotification:E0(t.timeout),h=()=>{m=!1,d&&(d=!1,p.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const y=()=>o&&g(),j=r.subscribe(y);return p.add(g),()=>{j(),p.delete(g)}},dispatch(g){var y;try{return o=!((y=g==null?void 0:g.meta)!=null&&y[g1]),d=!o,d&&(m||(m=!0,x(h))),r.dispatch(g)}finally{o=!0}}})},y1=t=>function(l){const{autoBatch:r=!0}=l??{};let o=new Sy(t);return r&&o.push(b1(typeof r=="object"?r:void 0)),o};function w1(t){const a=p1(),{reducer:l=void 0,middleware:r,devTools:o=!0,preloadedState:d=void 0,enhancers:m=void 0}=t||{};let p;if(typeof l=="function")p=l;else if(Rf(l))p=JC(l);else throw new Error(Sa(1));let x;typeof r=="function"?x=r(a):x=a();let h=mc;o&&(h=h1({trace:!1,...typeof o=="object"&&o}));const g=e1(...x),y=y1(g);let j=typeof m=="function"?m(y):y();const C=h(...j);return xy(p,d,C)}function Cy(t){const a={},l=[];let r;const o={addCase(d,m){const p=typeof d=="string"?d:d.type;if(!p)throw new Error(Sa(28));if(p in a)throw new Error(Sa(29));return a[p]=m,o},addMatcher(d,m){return l.push({matcher:d,reducer:m}),o},addDefaultCase(d){return r=d,o}};return t(o),[a,l,r]}function v1(t){return typeof t=="function"}function j1(t,a){let[l,r,o]=Cy(a),d;if(v1(t))d=()=>k0(t());else{const p=k0(t);d=()=>p}function m(p=d(),x){let h=[l[x.type],...r.filter(({matcher:g})=>g(x)).map(({reducer:g})=>g)];return h.filter(g=>!!g).length===0&&(h=[o]),h.reduce((g,y)=>{if(y)if(Vn(g)){const C=y(g,x);return C===void 0?g:C}else{if(Ea(g))return jy(g,j=>y(j,x));{const j=y(g,x);if(j===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return j}}return g},p)}return m.getInitialState=d,m}var N1=Symbol.for("rtk-slice-createasyncthunk");function S1(t,a){return`${t}/${a}`}function C1({creators:t}={}){var l;const a=(l=t==null?void 0:t.asyncThunk)==null?void 0:l[N1];return function(o){const{name:d,reducerPath:m=d}=o;if(!d)throw new Error(Sa(11));const p=(typeof o.reducers=="function"?o.reducers(E1()):o.reducers)||{},x=Object.keys(p),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(T,P){const L=typeof T=="string"?T:T.type;if(!L)throw new Error(Sa(12));if(L in h.sliceCaseReducersByType)throw new Error(Sa(13));return h.sliceCaseReducersByType[L]=P,g},addMatcher(T,P){return h.sliceMatchers.push({matcher:T,reducer:P}),g},exposeAction(T,P){return h.actionCreators[T]=P,g},exposeCaseReducer(T,P){return h.sliceCaseReducersByName[T]=P,g}};x.forEach(T=>{const P=p[T],L={reducerName:T,type:S1(d,T),createNotation:typeof o.reducers=="function"};O1(P)?T1(L,P,g,a):A1(L,P,g)});function y(){const[T={},P=[],L=void 0]=typeof o.extraReducers=="function"?Cy(o.extraReducers):[o.extraReducers],z={...T,...h.sliceCaseReducersByType};return j1(o.initialState,q=>{for(let B in z)q.addCase(B,z[B]);for(let B of h.sliceMatchers)q.addMatcher(B.matcher,B.reducer);for(let B of P)q.addMatcher(B.matcher,B.reducer);L&&q.addDefaultCase(L)})}const j=T=>T,C=new Map,b=new WeakMap;let E;function v(T,P){return E||(E=y()),E(T,P)}function S(){return E||(E=y()),E.getInitialState()}function w(T,P=!1){function L(q){let B=q[T];return typeof B>"u"&&P&&(B=Yo(b,L,S)),B}function z(q=j){const B=Yo(C,P,()=>new WeakMap);return Yo(B,q,()=>{const de={};for(const[Q,$]of Object.entries(o.selectors??{}))de[Q]=k1($,q,()=>Yo(b,q,S),P);return de})}return{reducerPath:T,getSelectors:z,get selectors(){return z(L)},selectSlice:L}}const N={name:d,reducer:v,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:S,...w(m),injectInto(T,{reducerPath:P,...L}={}){const z=P??m;return T.inject({reducerPath:z,reducer:v},L),{...N,...w(z,!0)}}};return N}}function k1(t,a,l,r){function o(d,...m){let p=a(d);return typeof p>"u"&&r&&(p=l()),t(p,...m)}return o.unwrapped=t,o}var sr=C1();function E1(){function t(a,l){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...l}}return t.withTypes=()=>t,{reducer(a){return Object.assign({[a.name](...l){return a(...l)}}[a.name],{_reducerDefinitionType:"reducer"})},preparedReducer(a,l){return{_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:l}},asyncThunk:t}}function A1({type:t,reducerName:a,createNotation:l},r,o){let d,m;if("reducer"in r){if(l&&!R1(r))throw new Error(Sa(17));d=r.reducer,m=r.prepare}else d=r;o.addCase(t,d).exposeCaseReducer(a,d).exposeAction(a,m?C0(t,m):C0(t))}function O1(t){return t._reducerDefinitionType==="asyncThunk"}function R1(t){return t._reducerDefinitionType==="reducerWithPrepare"}function T1({type:t,reducerName:a},l,r,o){if(!o)throw new Error(Sa(18));const{payloadCreator:d,fulfilled:m,pending:p,rejected:x,settled:h,options:g}=l,y=o(t,d,g);r.exposeAction(a,y),m&&r.addCase(y.fulfilled,m),p&&r.addCase(y.pending,p),x&&r.addCase(y.rejected,x),h&&r.addMatcher(y.settled,h),r.exposeCaseReducer(a,{fulfilled:m||Wo,pending:p||Wo,rejected:x||Wo,settled:h||Wo})}function Wo(){}function Sa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const A0={userId:"",userName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},ky=sr({name:"ownerprofile",initialState:A0,reducers:{setOwnerProfileData:(t,a)=>{const{userId:l,userName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,userId:l,userName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetOwnerProfile:()=>A0}}),{setOwnerProfileData:pc,setAuth:Rm,resetOwnerProfile:gc}=ky.actions,P1=ky.reducer,O0={staffId:"",staffName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ey=sr({name:"staffprofile",initialState:O0,reducers:{setStaffProfileData:(t,a)=>{const{staffId:l,staffName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,staffId:l,staffName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetStaffProfile:()=>O0}}),{setStaffProfileData:Ic,setAuth:Tm,resetStaffProfile:bc}=Ey.actions,M1=Ey.reducer,R0={workerId:"",workerName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ay=sr({name:"workerprofile",initialState:R0,reducers:{setWorkerProfileData:(t,a)=>{const{workerId:l,workerName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,workerId:l,workerName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetWorkerProfile:()=>R0}}),{setWorkerProfileData:$c,setAuth:Pm,resetWorkerProfile:yc}=Ay.actions,L1=Ay.reducer,F1={role:null,isauthenticated:!1,_id:null},Oy=sr({name:"auth",initialState:F1,reducers:{setRole:(t,a)=>a.payload,logout:t=>{t.role=null,t.isauthenticated=!1,t._id=null}}}),{setRole:Lt,logout:wc}=Oy.actions,D1=Oy.reducer,T0={CTOId:"",CTOName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ry=sr({name:"CTOprofile",initialState:T0,reducers:{setCTOProfileData:(t,a)=>{const{CTOId:l,CTOName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,CTOId:l,CTOName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetCTOProfile:()=>T0}}),{setCTOProfileData:Bc,setAuth:Mm,resetCTOProfile:vc}=Ry.actions,_1=Ry.reducer,P0={clientId:"",clientName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ty=sr({name:"clientprofile",initialState:P0,reducers:{setClientProfileData:(t,a)=>{const{clientId:l,clientName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,clientId:l,clientName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetClientProfile:()=>P0}}),{setClientProfileData:Hc,setAuth:Lm,resetClientProfile:jc}=Ty.actions,q1=Ty.reducer,$t=w1({reducer:{userProfileStore:P1,workerProfileStore:L1,staffProfileStore:M1,CTOProfileStore:_1,clientProfileStore:q1,authStore:D1}}),z1=async()=>{try{let{data:t}=await sa.get("/auth/staff/refreshtoken");return $t.dispatch(Tm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?$t.dispatch(Tm({isAuthenticated:t.response.data.ok})):$t.dispatch(Tm({isAuthenticated:!1})),{ok:!1}}},sa=Qe.create({baseURL:"http://localhost:3000/api",withCredentials:!0});sa.interceptors.request.use(t=>t,t=>Promise.reject(t));sa.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/staff/isauthenticated"))return Promise.reject(t);if(((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403){a._retry=!0;try{console.log("gettingcalled infingite time from staff api servive");const{ok:o}=await z1();if(o)return console.log("ok entering into it",o),sa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const U1=async()=>{try{let{data:t}=await sa.get("/auth/CTO/refreshtoken");return $t.dispatch(Mm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?$t.dispatch(Mm({isAuthenticated:t.response.data.ok})):$t.dispatch(Mm({isAuthenticated:!1})),{ok:!1}}};let fn=Qe.create({baseURL:"http://localhost:3000/api",withCredentials:!0});fn.interceptors.request.use(t=>t,t=>Promise.reject(t));fn.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/CTO/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO CTOApi servive");try{const{ok:o}=await U1();if(o)return fn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const I1=async({email:t,password:a})=>{const{data:l}=await fn.post("/auth/CTO/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},$1=()=>ie({mutationFn:I1,onSuccess:()=>{Ee.invalidateQueries({queryKey:["CTOProfile"]})}}),B1=async t=>{const{data:a}=await fn.post("/auth/CTO/registerCTO",t);if(!a.ok)throw new Error(a.message);return a},H1=()=>ie({mutationFn:B1}),Q1=async()=>{const{data:t}=await fn.post("/auth/CTO/logout");if(!t.ok)throw new Error(t.message);return t},Py=()=>ie({mutationFn:Q1,onSuccess:()=>{Ee.clear()}}),G1=async()=>{try{let{data:t}=await Aa.get("/auth/client/refreshtoken");return $t.dispatch(Lm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?$t.dispatch(Lm({isAuthenticated:t.response.data.ok})):$t.dispatch(Lm({isAuthenticated:!1})),{ok:!1}}};let Aa=Qe.create({baseURL:"http://localhost:3000/api",withCredentials:!0});Aa.interceptors.request.use(t=>t,t=>Promise.reject(t));Aa.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/client/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO clientApi servive");try{const{ok:o}=await G1();if(o)return Aa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const K1=async({email:t,password:a})=>{const{data:l}=await Aa.post("/auth/client/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},V1=()=>ie({mutationFn:K1,onSuccess:()=>{Ee.invalidateQueries({queryKey:["clientprofile"]})}}),Y1=async({token:t,payload:a})=>{const{data:l}=await Aa.post(`/auth/client/registerclient?invite=${t}`,a);if(!l.ok)throw new Error(l.message);return l},W1=()=>ie({mutationFn:Y1}),X1=async()=>{const{data:t}=await Aa.post("/auth/client/logout");if(!t.ok)throw new Error(t.message);return t},My=()=>ie({mutationFn:X1,onSuccess:()=>{Ee.clear()}}),Z1=async({email:t,password:a})=>{const{data:l}=await sa.post("/auth/staff/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},J1=()=>ie({mutationFn:Z1,onSuccess:()=>{Ee.invalidateQueries({queryKey:["staffProfile"]})}}),ek=async t=>{const{data:a}=await sa.post("/auth/staff/registerstaff",t);if(!a.ok)throw new Error(a.message);return a},tk=()=>ie({mutationFn:ek}),sk=async()=>{const{data:t}=await sa.post("/auth/staff/logout");if(!t.ok)throw new Error(t.message);return t},Ly=()=>ie({mutationFn:sk,onSuccess:()=>{Ee.clear()}}),ak=async()=>{try{let{data:t}=await $s.get("/auth/refreshtoken");return $t.dispatch(Rm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?$t.dispatch(Rm({isAuthenticated:t.response.data.ok})):$t.dispatch(Rm({isAuthenticated:!1})),{ok:!1}}};let $s=Qe.create({baseURL:"http://localhost:3000/api",withCredentials:!0});$s.interceptors.request.use(t=>t,t=>Promise.reject(t));$s.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await ak();if(o)return $s(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const nk=async({email:t,password:a,userName:l,phoneNo:r})=>{try{const o={email:t,password:a,username:l,phoneNo:r,role:"owner"};let{data:d}=await $s.post("/auth/registeruser",o);if(d.ok)return d}catch(o){throw o}},lk=async({email:t,password:a})=>{try{let{data:l}=await $s.post("/auth/login",{email:t,password:a});if(console.log("data from login user",l),l.ok)return l}catch(l){throw l}},rk=async()=>{try{let{data:t}=await $s.post("/auth/logout");if(t.ok)return t.data}catch(t){throw t}},ik=()=>ie({mutationFn:nk}),ok=()=>ie({mutationFn:lk}),Fy=()=>ie({mutationFn:rk}),ck=async()=>{try{let{data:t}=await hn.get("/auth/worker/refreshtoken");return $t.dispatch(Pm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?$t.dispatch(Pm({isAuthenticated:t.response.data.ok})):$t.dispatch(Pm({isAuthenticated:!1})),{ok:!1}}},hn=Qe.create({baseURL:"http://localhost:3000/api",withCredentials:!0});hn.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/worker/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await ck();if(o)return hn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const dk=async t=>{const{data:a}=await hn.post("/auth/worker/login",t);if(!a.ok)throw new Error(a.message);return a.data},uk=async({invite:t,payload:a})=>{const{data:l}=await hn.post(`/auth/worker/registerworker?invite=${t}`,a);if(console.log("data form register worker",l),!l.ok)throw new Error(l.message);return l.data},mk=async()=>{const{data:t}=await hn.post("/auth/worker/logout");if(!t.ok)throw new Error(t.message);return t.data},fk=()=>ie({mutationFn:dk}),hk=()=>ie({mutationFn:uk}),Dy=()=>ie({mutationFn:mk}),M=({variant:t="primary",size:a="md",children:l,isLoading:r=!1,className:o="",disabled:d,...m})=>{const p="inline-flex cursor-pointer items-center justify-center font-medium transition-colors focus:outline-none",x={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm",secondary:"bg-blue-100 hover:bg-blue-200 text-blue-700",outline:"border border-blue-200 hover:bg-blue-50 text-blue-600",danger:"border border-red-200 hover:bg-red-500 text-red-600",ghost:"hover:bg-gray-100 text-gray-700",link:"text-blue-600 hover:underline p-0 h-auto"},h={sm:"text-xs px-2.5 py-1.5 rounded-lg",md:"text-sm px-4 py-2 rounded-xl",lg:"text-base px-6 py-3 rounded-xl",icon:"p-2 rounded-lg"},j=`
    ${p} 
    ${x[t]} 
    ${h[a]} 
    ${d?"opacity-50 cursor-not-allowed":""} 
    ${r?"opacity-80 cursor-wait":""}
    ${o}
  `.trim();return e.jsxs("button",{className:j,disabled:d||r,...m,children:[r&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})};let Fm=null;function F(t){const{title:a,description:l,variant:r="default",duration:o=3e3}=t,d=document.getElementById("toast-container");d&&(document.body.removeChild(d),Fm&&window.clearTimeout(Fm));const m=document.createElement("div");m.id="toast-container",m.className="fixed bottom-4 right-4 z-50 max-w-xs";const p=document.createElement("div");p.className=`p-4 rounded-lg shadow-lg border ${r==="destructive"?"bg-red-50 border-red-200":"bg-white border-blue-100"}`;let x="";a&&(x+=`<h4 class="${r==="destructive"?"text-red-800":"text-blue-800"} font-medium">${a}</h4>`),x+=`<p class="${r==="destructive"?"text-red-600":"text-gray-600"} text-sm">${l}</p>`,p.innerHTML=x,m.appendChild(p),document.body.appendChild(m),Fm=window.setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},o)}const X=()=>ps(t=>t.authStore),Z=t=>t==="owner"?$s:t==="staff"?sa:t==="worker"?hn:t==="CTO"?fn:t==="client"?Aa:null,xk=async({projectId:t,api:a})=>(await a.get(`/selectedstage/getselectedstage/${t}`)).data.data,pk=async({projectId:t,mode:a,api:l})=>(await l.post(`/selectedstage/updateselectedstage/${t}`,{mode:a})).data.data,Mf=t=>{const{role:a}=X(),l=Z(a),r=["owner","CTO","staff"];return Fe({queryKey:["stage-selection",t],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!r.includes(a))throw new Error("Not allowed to make this API call");if(!l)throw new Error("API instance not found for role");return await xk({projectId:t,api:l})},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},gk=()=>{const t=Se(),{role:a}=X(),l=["owner","CTO","staff"],r=Z(a);return ie({mutationFn:async({projectId:o,mode:d})=>{if(!a)throw new Error("Not Authorized");if(!l.includes(a))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await pk({projectId:o,mode:d,api:r})},onSuccess:(o,{projectId:d})=>{t.invalidateQueries({queryKey:["stage-selection",d]})}})},bk=(t,a,l,r,o)=>{const d=r==null?void 0:r.some(h=>h.toLowerCase()==="projectdetails");let m={},p={},x={};if(d){let h=["WORKERS","INVITECLIENT","PREREQUIRETIES","REQUIREMENTFORM","SITEMEASUREMENT","SAMPLEDESIGN","TECHNICALCONSULTANT","SELECTSTAGE","PAYMENTCONFIRMATION","ORDERMATERIALS","MATERIALARRIVED","WORKSCHEDULE","INSTALLATION","QUALITYCHECK","CLEANINGSANITATION","PROJECTDELIVERY"];const y=h.indexOf("TECHNICALCONSULTANT")+1;t==="Manual Flow"?h.splice(y,0,"MATERIALSELECTION","COSTESTIMATION"):t==="Modular Units"&&h.splice(y,0,"MODULARUNIT"),t!=null&&(h=h.filter(j=>j!=="SELECTSTAGE"));for(const j of h)a[j]&&o[j]&&l[j]&&(m[j]=a[j],p[j]=o[j],x[j]=l[j])}else m=a,p=o,x=l;return{filteredLabels:m,filteredIcons:p,filteredPaths:x}},yk=({labels:t,icons:a,path:l})=>{const[r,o]=A.useState(!0),{projectId:d}=ke(),m=Me(),p=mt(),x=p.pathname.split("/"),{organizationId:h}=ke(),g=ws(),{role:y}=ps(te=>te.authStore),[j,C]=A.useState(""),{data:b,isLoading:E}=Mf(d),{mutateAsync:v,isPending:S}=Py(),{mutateAsync:w,isPending:N}=My(),{mutateAsync:T,isPending:P}=Ly(),{mutateAsync:L,isPending:z}=Fy(),{mutateAsync:q,isPending:B}=Dy(),de=()=>{o(!1)},Q=()=>{o(!0)};A.useEffect(()=>{const O=p.pathname.split("/")[4];C(r?()=>L2[O]:()=>F2[O])},[p.pathname,r]),I2(Q,de);const $=!E&&b;let{filteredLabels:ee,filteredIcons:V,filteredPaths:le}=bk($,t,l,x,a);const _=x[2]==="projectdetails",W=()=>{_&&m(`/organizations/${h}/projects`)},me=async()=>{var te,O;try{y==="CTO"?await v():y==="client"?await w():y==="staff"?await T():y==="owner"?await L():y==="worker"&&await q(),g(gc()),g(jc()),g(yc()),g(vc()),g(bc()),g(wc()),F({title:"Success",description:"logout successfull"}),(!S||!N||!P||!z||!B)&&m("/")}catch(U){F({title:"Error",description:((O=(te=U==null?void 0:U.response)==null?void 0:te.data)==null?void 0:O.message)||"Failed to logout",variant:"destructive"})}};return console.log("outside the filterLabels",ee),e.jsx(e.Fragment,{children:r?e.jsxs("aside",{className:"relative flex flex-col bg-[#2f303a] w-[17%] min-h-screen max-h-screen text-[#9ca3af] select-none transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-col flex-grow overflow-y-auto overflow-x-hidden custom-scrollbar p-2",children:[e.jsxs("div",{onClick:W,className:`flex ${_?"cursor-pointer":""} justify-between items-center border-b-1 py-2`,children:[e.jsx("span",{className:"text-xl",children:yt.COMPANY_NAME}),e.jsx("div",{className:"w-[30px] h-[30px]",children:e.jsx("img",{className:"w-full h-full",src:yt.COMPANY_LOGO,alt:"LOGO"})})]}),e.jsxs("section",{className:"py-2 space-y-2",children:[" ",Object.entries(ee).map(([te,O])=>le[te]&&e.jsx(Ft,{to:le[te],className:"outline-none",children:e.jsxs("div",{onClick:()=>C(O),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${j===O?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:[e.jsx("span",{className:"text-lg",children:O}),e.jsx("span",{children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]})},O))]})]}),e.jsxs("div",{className:"flex flex-col p-2 border-t border-[#3a3b45]",children:[x[1]!=="login"&&e.jsxs(M,{isLoading:S||N||P||z||B,onClick:me,className:"flex items-center gap-2 px-4 py-3 rounded-lg !bg-[#3a3b45] !text-[#9ca3af] hover:!bg-[#464751] hover:!text-white transition",children:[e.jsx("i",{className:"fa-solid fa-right-from-bracket"}),e.jsx("span",{children:"Logout"})]}),e.jsx("button",{title:"Ctrl+] to close",onClick:de,className:"mt-2 flex items-center justify-center outline-none border border-blue-600 text-blue-500 hover:bg-[#3a3b45] rounded-lg w-full py-2",children:e.jsx("i",{className:"fa-solid fa-chevron-left"})})]})]}):e.jsxs("aside",{className:"flex flex-col relative justify-between bg-[#2f303a] w-[6%]  max-h-full  text-[#9ca3af] transition-all duration-300 ",children:[e.jsx("div",{className:"max-h-[95%] overflow-y-auto overflow-x-hidden custom-scrollbar",children:e.jsx("div",{className:"flex items-center flex-col justify-between w-full",children:Object.entries(V).map(([te,O])=>le[te]?e.jsx(Ft,{to:le[te],className:`${le[te]?"":"cursor-not-allowed"}`,children:e.jsx("div",{onClick:()=>C(te),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${(j==null?void 0:j.toLowerCase())===te.toLowerCase()?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:e.jsx("i",{className:`${O} ${(j==null?void 0:j.toLowerCase())===te.toLowerCase()?"text-[#4a86f7]":"text-[#9ca3af]"} `})})}):e.jsx("div",{className:"cursor-not-allowed flex justify-between max-w-[95%] py-4 px-4",children:e.jsx("i",{className:`${O}`})}))})}),e.jsxs("div",{className:"flex flex-col items-center p-2 border-t border-[#3a3b45]",children:[x[1]!=="login"&&e.jsx(M,{isLoading:S||N||P||z||B,title:"logout",onClick:me,className:"w-[40px] h-[40px] flex items-center justify-center !bg-[#3a3b45] !text-[#9ca3af] hover:!text-red-500 transition",children:e.jsx("i",{className:"fa-solid fa-right-from-bracket"})}),e.jsx("button",{title:"Ctrl+[ to open",onClick:Q,className:"mt-2 cursor-pointer outline-none border-[#9ca3af] h-[40px] w-[40px] flex items-center justify-center border rounded-lg",children:e.jsx("i",{className:"fa-solid fa-chevron-right text-[#4a86f7]"})})]})]})})},Ci=A.memo(yk),ki=({isOpen:t,onClose:a,labels:l,path:r})=>{const o=Me(),{organizationId:d,projectId:m}=ke(),p=ws(),{role:x}=ps(Q=>Q.authStore),{data:h,isLoading:g}=Mf(m),{mutateAsync:y,isPending:j}=Py(),{mutateAsync:C,isPending:b}=My(),{mutateAsync:E,isPending:v}=Ly(),{mutateAsync:S,isPending:w}=Fy(),{mutateAsync:N,isPending:T}=Dy(),P=async()=>{var Q,$;try{x==="CTO"?await y():x==="client"?await C():x==="staff"?await E():x==="owner"?await S():x==="worker"&&await N(),p(gc()),p(jc()),p(yc()),p(vc()),p(bc()),p(wc()),F({title:"Success",description:"logout successfull"}),(!j||!b||!v||!w||!T)&&o("/")}catch(ee){F({title:"Error",description:(($=(Q=ee==null?void 0:ee.response)==null?void 0:Q.data)==null?void 0:$.message)||"Failed to logout",variant:"destructive"})}};let L=Object.entries(l);const z=location.pathname.split("/"),q=z[2]==="projectdetails";if(z.includes("projectdetails")&&!g){const Q=h;L=L.filter(([$])=>{if(Q){if(Q==="Modular Units")return $!=="MATERIALSELECTION"&&$!=="COSTESTIMATION"&&$!=="SELECTSTAGE";if(Q==="Manual Flow")return $!=="MODULARUNIT"&&$!=="SELECTSTAGE"}else return $!=="MODULARUNIT"&&$!=="MATERIALSELECTION"&&$!=="COSTESTIMATION";return!0})}const de=()=>{q&&o(`/organizations/${d}/projects`)};return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:a}),e.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${t?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{onClick:de,className:`flex items-center gap-3 ${q?"cursor-pointer":""}`,children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:yt.COMPANY_NAME})]}),e.jsx("button",{onClick:a,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("nav",{className:"flex flex-col flex-grow overflow-y-auto p-4",children:L.map(([Q,$],ee)=>e.jsxs(ct.Fragment,{children:[r[Q]?e.jsx(Ft,{to:r[Q],onClick:a,className:"text-gray-800 hover:bg-gray-100 p-3 rounded block",children:$}):e.jsx("span",{className:"text-gray-400 p-3 rounded cursor-not-allowed block",children:$}),ee<L.length-1&&e.jsx("hr",{className:"border-t border-gray-200 my-1"})]},Q))}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:z[1]!=="login"&&e.jsxs(M,{className:"w-full flex items-center justify-center gap-2",isLoading:j||b||v||w||T,onClick:P,children:[e.jsx("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})]})},wk=({projectId:t,setProjectId:a})=>{const{organizationId:l}=ke(),[r,o]=A.useState(!1),[d,m]=A.useState(window.innerWidth<470),p={PROJECTS:`/organizations/${l}/projects`,ORGANIZATION:`/organizations/${l}/invitecto`};return A.useEffect(()=>{const x=()=>{m(window.innerWidth<470)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-full h-full",children:[d?e.jsx(ki,{labels:$m,path:p,isOpen:r,onClose:()=>o(!1)}):e.jsx(Ci,{path:p,labels:$m,icons:T2}),e.jsx("main",{className:"!w-[100%] h-full p-4",children:e.jsx(Bt,{context:{projectId:t,setProjectId:a,organizationId:l,isMobile:d,isMobileSidebarOpen:r,openMobileSidebar:()=>o(!0),closeMobileSidebar:()=>o(!1)}})})]})})},M0=t=>{var l;const a={};return console.log("projectData",t),(l=t.projectName)!=null&&l.trim()||(a.projectName="project name is required"),t.startDate||(a.startDate="start date is required"),t.dueDate||(a.dueDate="Due date is Required"),t.startDate&&t.endDate&&t.endDate<=t.startDate&&(a.endDate="End date must be after start date."),t.startDate&&t.dueDate&&t.dueDate<=t.startDate&&(a.endDate="Due date must be after start date."),a},vk=t=>{var l;const a={};return(l=t.email)!=null&&l.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",a},jk=t=>{var l;const a={};return(l=t.email)!=null&&l.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",t.userName||(a.userName="user name is not provided"),t.phoneNo||(a.phoneNo="phone Number is required"),/^\d{10}$/.test(t.phoneNo.trim())||(a.phoneNo="Phone number should contain exactly 10 digits"),t.confirmPassword.trim()?t.password!==t.confirmPassword&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="please confirm your password",a},Le=({className:t="",children:a})=>e.jsx("div",{className:`bg-white/70 backdrop-blur-sm border-0 rounded-2xl shadow-lg ${t}`,children:a}),ns=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-3 ${t}`,children:a}),Dt=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pt-3 ${t}`,children:a}),ys=({className:t="",children:a})=>e.jsx("h3",{className:`text-xl font-semibold text-blue-900 ${t}`,children:a}),aa=({className:t="",children:a})=>e.jsx("p",{className:`text-sm text-gray-500 ${t}`,children:a}),ce=({className:t="",error:a,...l})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("input",{className:d,...l}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},fe=({className:t="",...a})=>e.jsx("label",{className:`text-sm font-medium text-gray-700 ${t}`,...a}),L0=()=>{const[t,a]=A.useState({email:"",password:""}),[l,r]=A.useState({email:"",password:"",userName:"",phoneNo:"",confirmPassword:""}),[o,d]=A.useState({}),[m,p]=A.useState({}),[x,h]=A.useState(!1),g=ws(),y=Me(),[j,C]=A.useState(!1),{isMobile:b,openMobileSidebar:E}=Ge(),{mutateAsync:v,isPending:S}=ok(),{mutateAsync:w,isPending:N}=ik(),T=q=>{a(B=>({...B,[q.target.name]:q.target.value}))},P=q=>{r(B=>({...B,[q.target.name]:q.target.value}))},L=async q=>{var B,de;q.preventDefault();try{d({});const Q=vk(t);if(d(Q),Object.keys(Q).length===0&&!S){const $=await v(t);if($.ok){const ee=$==null?void 0:$.data;g(Lt({_id:ee==null?void 0:ee.userId,role:ee==null?void 0:ee.role,isauthenticated:!0})),g(pc({userId:ee==null?void 0:ee.userId,userName:ee==null?void 0:ee.userName,email:ee==null?void 0:ee.email,phoneNo:ee==null?void 0:ee.phoneNo,role:ee==null?void 0:ee.role,isauthenticated:!0})),F({title:"Success",description:"Login successfull"}),y("/organizations")}}}catch(Q){F({title:"Error",description:((de=(B=Q==null?void 0:Q.response)==null?void 0:B.data)==null?void 0:de.message)||"Failed to login",variant:"destructive"})}},z=async q=>{var B,de;q.preventDefault();try{p({});const Q=jk(l);if(p(Q),Object.keys(Q).length===0&&!S){const $=await w(l);if($.ok){const ee=$==null?void 0:$.data;g(Lt({_id:ee==null?void 0:ee.userId,role:ee.role,isauthenticated:!0})),g(pc({userId:ee.userId,userName:ee.userName,email:ee.email,phoneNo:ee.phoneNo,role:ee.role,isauthenticated:!0})),F({title:"Success",description:"Registraiton successfull"}),y("/organizations")}}}catch(Q){F({title:"Error",description:((de=(B=Q==null?void 0:Q.response)==null?void 0:B.data)==null?void 0:de.message)||"Failed to Register",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen overflow-y-auto relative bg-gradient-to-br from-blue-50 p-4 via-white to-blue-100 flex items-center justify-center",children:[e.jsx("div",{className:"absolute top-2 left-2",children:b&&e.jsx("button",{onClick:E,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),j?e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sm:p-8 lg:p-10",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Registration"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Create your owner account to get started                            "})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"userName",name:"userName",type:"text",value:l.userName,onChange:P,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${m.userName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.userName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:l.email,onChange:P,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:l.phoneNo,onChange:P,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${m.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:x?"text":"password",value:l.password,onChange:P,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:l.confirmPassword,onChange:P,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>C(!1),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Sign In"})]})})]})}):e.jsx("div",{className:"w-full max-w-md ",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-5 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:t.email,onChange:T,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${o.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.email})]})]}),e.jsxs("div",{children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:x?"text":"password",value:t.password,onChange:T,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${o.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.password}),e.jsx("button",{type:"button",onClick:()=>h(!x),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:x?e.jsx("i",{className:"fas fa-eye-slash"}):e.jsx("i",{className:"fas fa-eye"})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Don't have an account? ",e.jsx("button",{onClick:()=>C(!0),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Register here"})]})})]})})]})},Nk=({projectId:t,setProjectId:a,organizationId:l,setOrganizationId:r})=>{const o=mt(),[d,m]=A.useState(!1),[p,x]=A.useState(window.innerWidth<470);A.useLayoutEffect(()=>{const g=o.pathname.split("/");a(g[3]),r(g[1])},[o.pathname]),A.useEffect(()=>{const g=()=>{x(window.innerWidth<470)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const h={WORKERS:t?`/${l}/projectdetails/${t}/workers`:"",INVITECLIENT:t?`/${l}/projectdetails/${t}/inviteclient`:"",PREREQUIRETIES:t?`/${l}/projectdetails/${t}/prerequireties`:"",REQUIREMENTFORM:t?`/${l}/projectdetails/${t}/requirementform`:"",SITEMEASUREMENT:t?`/${l}/projectdetails/${t}/sitemeasurement`:"",SAMPLEDESIGN:t?`/${l}/projectdetails/${t}/sampledesign`:"",TECHNICALCONSULTANT:t?`/${l}/projectdetails/${t}/technicalconsultant`:"",SELECTSTAGE:t?`/${l}/projectdetails/${t}/selectstage`:"",MODULARUNIT:t?`/${l}/projectdetails/${t}/modularunits`:"",MATERIALSELECTION:t?`/${l}/projectdetails/${t}/materialselection`:"",COSTESTIMATION:t?`/${l}/projectdetails/${t}/costestimation`:"",PAYMENTCONFIRMATION:t?`/${l}/projectdetails/${t}/paymentconfirmation`:"",ORDERMATERIALS:t?`/${l}/projectdetails/${t}/ordermaterial`:"",MATERIALARRIVED:t?`/${l}/projectdetails/${t}/materialarrival`:"",WORKSCHEDULE:t?`/${l}/projectdetails/${t}/workmainschedule`:"",INSTALLATION:t?`/${l}/projectdetails/${t}/installation`:"",QUALITYCHECK:t?`/${l}/projectdetails/${t}/qualitycheck`:"",CLEANINGSANITATION:t?`/${l}/projectdetails/${t}/cleaning`:"",PROJECTDELIVERY:t?`/${l}/projectdetails/${t}/projectdelivery`:""};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-screen h-screen",children:[p?e.jsx(ki,{labels:Vg,path:h,isOpen:d,onClose:()=>m(!1)}):e.jsx(Ci,{path:h,labels:Vg,icons:M2}),e.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:e.jsx(Bt,{context:{projectId:t,setProjectId:a,isMobile:p,isMobileSidebarOpen:d,openMobileSidebar:()=>m(!0),closeMobileSidebar:()=>m(!1)}})})]})})},Sk=({tags:t,setState:a})=>{const[l,r]=A.useState(""),o=m=>{(m.key==="Enter"||m.key===",")&&l.trim()?(m.preventDefault(),t.includes(l.trim())||a(p=>({...p,tags:[...t,l.trim()]})),r("")):m.key==="Backspace"&&!l&&a(p=>({...p,tags:t.slice(0,-1)}))},d=m=>{a(p=>({...p,tags:t.filter((x,h)=>h!==m)}))};return e.jsxs("div",{className:"flex flex-wrap items-center border-b-1 border-[#565656] p-2 gap-2",children:[t.map((m,p)=>e.jsxs("div",{className:"bg-blue-600 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[m,e.jsx("span",{className:"cursor-pointer ml-1 text-xs",onClick:()=>d(p),children:"×"})]},p)),e.jsx("input",{type:"text",value:l,onChange:m=>r(m.target.value),onKeyDown:o,className:"input flex-1 outline-none text-sm border-none",placeholder:"Type and press Enter"})]})},Ck=A.memo(Sk),kk=async({api:t,projectData:a,orgsId:l})=>{try{let{data:r}=await t.post(`/project/createproject/${l}`,a);if(console.log("create project",r),r.ok)return r}catch(r){throw r}},Ek=async({orgsId:t,api:a})=>{try{let{data:l}=await a.get(`/project/getprojects/${t}`);return l.ok?l.data:[]}catch(l){throw l}},Ak=async(t,a)=>{try{let{data:l}=await a.delete(`/project/deleteproject/${t}`);if(l.ok)return l.data}catch(l){throw l}},Ok=async({projectId:t,formData:a,api:l})=>{try{let{data:r}=await l.put(`/project/updateproject/${t}`,a);if(r.ok)return r}catch(r){throw r}},Rk=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["project"],queryFn:async()=>{if(!a)throw new Error("Not Allowed");if(!r.includes(a))throw new Error("Not Allowed");if(!l)throw new Error("API not found");return await Ek({orgsId:t,api:l})},enabled:!!a,refetchOnWindowFocus:!1,retry:!1,staleTime:1e3*60*10})},Tk=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectData:r,orgsId:o})=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await kk({api:a,orgsId:o,projectData:r})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project"]})}})},Pk=()=>{const{role:t}=X(),a=Z(t),l=["owner","CTO"];return ie({mutationFn:async r=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await Ak(r,a)},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project"]})}})},Mk=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,formData:o})=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await Ok({projectId:r,formData:o,api:a})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project"]})}})},F0=({message:t,onClick:a})=>{const[l,r]=A.useState(!0),[o,d]=A.useState("in"),m=()=>{d("out")},p=()=>{o==="out"&&(r(!1),a())};return l?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes bounceScaleIn {
          0% { transform: scale(0); }
          60% { transform: scale(1.1); }
          80% { transform: scale(0.95); }
          100% { transform: scale(1); }
        }
        @keyframes bounceScaleOut {
          0% { transform: scale(1); }
          20% { transform: scale(1.1); }
          100% { transform: scale(0); }
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-[#0a0a0a10] z-[1099] flex items-center justify-center px-4",onClick:()=>m(),children:e.jsxs("div",{onClick:x=>x.stopPropagation(),style:{animation:o==="in"?"bounceScaleIn 0.2s ease-out forwards":"bounceScaleOut 0.2s ease-in forwards"},onAnimationEnd:p,className:"bg-[#2f303a] text-gray-800 rounded-2xl !w-[30%] shadow-lg !px-6 max-w-lg sm:!px-3 sm:py-2 sm:w-full text-center !space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-red-500 pb-2",children:[e.jsx("span",{className:"text-white text-lg",children:"Error occured"}),e.jsx("span",{className:"cursor-pointer",onClick:m,children:e.jsx("i",{className:"fa-solid fa-xmark text-red-500 text-lg"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-lg",children:t[0].toUpperCase()+t.slice(1)}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:m,className:"cursor-pointer inline-block bg-red-500 hover:bg-red-800 duration-200 px-5 py-1 rounded-md text-white",children:"OK"})})]})]})})]}):null},Lk=["none","low","medium","high"],Fk=["Active","Delayed","In Progress","In Testing","On Track","On Hold","Approved","Cancelled","Planning","Invoice"],Dk={Active:"bg-green-100 text-green-800",Delayed:"bg-red-100 text-red-800","In Progress":"bg-blue-100 text-blue-800","In Testing":"bg-yellow-100 text-yellow-800","On Track":"bg-emerald-100 text-emerald-800","On Hold":"bg-gray-100 text-gray-800",Approved:"bg-indigo-100 text-indigo-800",Cancelled:"bg-rose-100 text-rose-800",Planning:"bg-purple-100 text-purple-800",Invoice:"bg-pink-100 text-pink-800"},_k=({onClose:t,refetch:a,setShowForm:l,organizationId:r,isEditing:o,setEditForm:d,editForm:m,editProjectId:p})=>{var q,B,de,Q;const[x,h]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,y]=A.useState({}),j=($,ee)=>{let{name:V,value:le}=$.target;if(V==="tags"){ee(_=>({..._,tags:Array.from(new Set([..._.tags,le]))}));return}if(V.includes("Date")){const _=le?new Date(le):null;ee(W=>{const me={...W,[V]:_};if(me.startDate&&me.dueDate){const te=me.dueDate.getTime()-me.startDate.getTime();te>=0?me.duration=Math.ceil(te/(1e3*3600*24)):me.duration=0}return me});return}ee(_=>({..._,[V]:le}))},{mutateAsync:C,isPending:b,error:E,isError:v,reset:S}=Tk(),{mutateAsync:w,isPending:N,error:T,isError:P,reset:L}=Mk(),z=async $=>{var ee,V;$.preventDefault(),$.stopPropagation();try{const le=M0(o?m:x);y(le),Object.keys(le).length===0&&(o&&p?N||(await w({projectId:p,formData:m}),F({title:"Success",description:"Project Edited Successfully"})):b||(await C({projectData:x,orgsId:r}),F({title:"Success",description:"Project Created Successfully"})),a(),l(!1))}catch(le){F({title:"Error",description:((V=(ee=le==null?void 0:le.response)==null?void 0:ee.data)==null?void 0:V.message)||(le==null?void 0:le.message)||"Operation Failed",variant:"destructive"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{onClick:$=>$.stopPropagation(),className:"bg-white w-full h-full overflow-y-auto custom-scrollbar max-w-3xl mx-auto rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 border border-gray-200 relative",children:[!b&&v&&e.jsx(F0,{message:((B=(q=E==null?void 0:E.response)==null?void 0:q.data)==null?void 0:B.message)||(E==null?void 0:E.message)||"Something went wrong",onClick:()=>S()}),!N&&P&&e.jsx(F0,{message:((Q=(de=T==null?void 0:T.response)==null?void 0:de.data)==null?void 0:Q.message)||(T==null?void 0:T.message)||"Something went wrong",onClick:()=>L()}),e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-edit"})," Edit Project"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-plus"})," Create Project"]})}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-red-500 text-xl",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),e.jsx("input",{autoFocus:!0,name:"projectName",value:o?m.projectName:x.projectName,onChange:$=>j($,o?d:h),type:"text",placeholder:"Enter name",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.projectName&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.projectName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (days)"}),e.jsx("input",{disabled:!0,type:"number",name:"duration",onChange:$=>j($,o?d:h),value:o?m.duration:x.duration,placeholder:"Ex: 15",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{rows:3,name:"description",onChange:$=>j($,o?d:h),value:o?m.description:x.description,placeholder:"Brief project overview",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx(Ck,{tags:o?m.tags:x.tags,setState:o?d:h})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",onChange:$=>j($,o?d:h),value:o?m.startDate?m.startDate.toISOString().split("T")[0]:"":x.startDate?x.startDate.toISOString().split("T")[0]:"",name:"startDate",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.startDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",onChange:$=>j($,o?d:h),value:o?m.endDate?m.endDate.toISOString().split("T")[0]:"":x.endDate?x.endDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.endDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.endDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",onChange:$=>j($,o?d:h),value:o?m.dueDate?m.dueDate.toISOString().split("T")[0]:"":x.dueDate?x.dueDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.dueDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.dueDate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("select",{name:"priority",onChange:$=>j($,o?d:h),value:o?m.priority:x.priority,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:Lk.map($=>e.jsx("option",{value:$,children:$},$))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{name:"status",onChange:$=>j($,o?d:h),value:o?m.status:x.status,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:Fk.map($=>e.jsx("option",{value:$,children:$},$))})]})]}),e.jsx("div",{className:"text-end",children:e.jsx(M,{isLoading:b||N,type:"submit",disabled:b||N,className:"bg-blue-600 text-white px-6 w-full sm:w-40 py-2 rounded-xl hover:bg-blue-700 transition-all",children:b||N?e.jsx("div",{className:"mx-auto w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):o?"Edit Project":"Create Project"})})]})]})})},qk=A.memo(_k);function ui(t){if(!t)return"N/A";const a=new Date(t).getFullYear(),l=new Date(t).getMonth()+1;return`${new Date(t).getDate()}-${l}-${a}`}const zk=({project:t,onEdit:a,organizationId:l,refetch:r})=>{const{setProjectId:o}=Ge(),{mutateAsync:d,isPending:m}=Pk(),p=C=>{o(C)},x=C=>{switch(C){case"high":return"bg-red-100 text-red-500";case"medium":return"bg-yellow-100 text-yellow-600";case"low":return"bg-green-100 text-green-600";default:return"bg-white shadow-sm"}},h=A.useMemo(()=>{var C;return(C=t.projectInformation)!=null&&C.startDate?ui(t.projectInformation.startDate):null},[]),g=A.useMemo(()=>{var C;return(C=t.projectInformation)!=null&&C.endDate?ui(t.projectInformation.endDate):null},[]),y=A.useMemo(()=>{var C;return(C=t.projectInformation)!=null&&C.dueDate?ui(t.projectInformation.dueDate):null},[]),j=async()=>{var C,b;try{if(!window.confirm("Are you sure you want to delete this project?"))return;await d(t._id),F({title:"Success",description:"Project Deleted Successfully"}),r()}catch(E){F({title:"Error",description:((b=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:b.message)||(E==null?void 0:E.message)||"Failed to Delete",variant:"destructive"})}};return e.jsxs("div",{className:"p-2 sm:p-5 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xl font-semibold text-[#1f2d3d]",children:[e.jsx("i",{className:"fa-solid fa-folder-open text-blue-600"}),t.projectName]}),e.jsxs("span",{className:`text-sm px-3 py-1 rounded-full font-medium ${x(t.projectInformation.priority)}`,children:[t.projectInformation.priority," priority"]})]}),e.jsxs("div",{className:"text-sm text-gray-700 grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-y-1 sm:gap-y-2 gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-day text-gray-500"}),e.jsx("strong",{children:"Start:"})," ",h||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"End:"})," ",g||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"Due:"})," ",y||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Duration: ",t.projectInformation.duration," days"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Status: ",e.jsx("span",{className:`${Dk[t.projectInformation.status]} !bg-transparent`,children:t.projectInformation.status})," "]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Progress"}),e.jsx("div",{className:"mt-1 w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600",style:{width:`${t.completionPercentage}%`}})}),e.jsxs("div",{className:"text-sm text-right text-gray-600 mt-1",children:[t.completionPercentage,"% Complete"]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-2 text-sm text-blue-600",children:[e.jsxs(Ft,{to:`/${l}/projectdetails/${t._id}/requirementform`,onClick:()=>p(t._id),className:"hover:underline cursor-pointer flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-eye"}),"View"]}),e.jsxs(M,{isLoading:m,variant:"outline",onClick:j,className:"hover:underline cursor-pointer flex items-center gap-1 text-red-500 !border-0",children:[e.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),e.jsxs("button",{onClick:()=>a(t,t._id),className:"hover:underline cursor-pointer flex items-center gap-1 text-amber-500",children:[e.jsx("i",{className:"fa-solid fa-pencil"}),"edit"]})]})]})},Uk=A.memo(zk);function Ik(t){return{projectName:t.projectName,description:t.description??"",duration:t.projectInformation.duration??0,tags:t.projectInformation.tags??[],startDate:t.projectInformation.startDate?new Date(t.projectInformation.startDate):null,endDate:t.projectInformation.endDate?new Date(t.projectInformation.endDate):null,dueDate:t.projectInformation.dueDate?new Date(t.projectInformation.dueDate):null,priority:t.projectInformation.priority??"none",status:t.projectInformation.status??"Active"}}const D0=()=>e.jsxs("div",{className:"animate-pulse bg-white border-l-8 border-blue-600 shadow-md rounded-xl p-4 flex flex-col justify-between min-h-[250px] w-full max-w-[500px]",children:[e.jsx("div",{className:"h-5 w-1/2 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"})]})]}),$k=()=>{var P,L;const{organizationId:t}=ke(),{openMobileSidebar:a,isMobile:l}=Ge(),{role:r}=ps(z=>z.authStore),[o,d]=A.useState(!1),[m,p]=A.useState(!1),[x,h]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,y]=A.useState(null);let{data:j,refetch:C,isPending:b,error:E,isLoading:v}=Rk(t);const S=["owner","CTO","staff"],w=A.useCallback((z,q)=>{const B=Ik(z);h(B),y(q),p(!0),d(!0)},[]),N=A.useCallback(()=>{d(!1),p(!1)},[]),T=A.useCallback((z,q)=>{w(z,q)},[w]);return v?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(z=>e.jsx(D0,{},z))}):e.jsxs("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex ",children:[l&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border-none border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-[#1f2d3d] flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-diagram-project text-blue-600 text-2xl"}),e.jsx("p",{children:$m.PROJECTS})]})]}),S.includes(r)&&e.jsx("div",{onClick:()=>{d(!o)},className:"bg-blue-600  cursor-pointer !h-[40px] !w-[40px] flex justify-center items-center rounded-full",children:e.jsx("i",{className:`fa-solid fa-plus text-white transition-transform duration-300 ${o?"rotate-135":"rotate-0"}`})})]}),e.jsx("hr",{className:"my-2 border-b-1 border-gray-300"}),!b&&((j==null?void 0:j.length)??0)===0&&e.jsxs("div",{className:"flex h-full flex-col items-center justify-center w-full py-16 text-center text-gray-500",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📂"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Projects Found"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 max-w-md",children:"Looks like you haven’t added any projects yet. Click the “+” button to get started and create your first project."}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 cursor-pointer hover:bg-blue-700 text-white px-4 py-2 rounded-md transition",children:"Create New Project"})]}),E&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((L=(P=E==null?void 0:E.response)==null?void 0:P.data)==null?void 0:L.message)||"Failed to load the projects"}),e.jsx(M,{onClick:()=>C(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!E&&e.jsxs("div",{className:"h-full flex-1 !overflow-y-auto custom-scrollbar grid md:grid-cols-2 gap-6",children:[b&&[...Array(6)].map((z,q)=>e.jsx(A.Fragment,{children:e.jsx(D0,{})},q)),!b&&(j==null?void 0:j.length)>0&&(j==null?void 0:j.map((z,q)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-[256px] sm:!h-[270px] md:!h-[330px] lg:!h-[282px] flex flex-col shadow-md rounded-xl overflow-hidden border-l-8 border-blue-600 bg-white",children:e.jsx(Uk,{refetch:C,onEdit:T,index:q,project:z,organizationId:t})},z._id)})))]}),o&&e.jsx("div",{onClick:N,className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx(qk,{onClose:N,refetch:C,setShowForm:d,organizationId:t,isEditing:m,setEditForm:h,editForm:x,editProjectId:g})})]})},Bk=()=>{const t=Me();return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center px-4 py-10 bg-gray-100",children:e.jsxs("div",{className:"max-w-lg w-full text-center bg-white rounded-xl shadow-md p-8 space-y-6 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-6xl sm:text-7xl font-extrabold text-blue-700",children:"404"}),e.jsx("p",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mt-2",children:"Page Not Found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sorry! The page you’re looking for doesn’t exist or has been moved."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:()=>t("/organizations"),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-house mr-2"}),"Go to Home"]}),e.jsxs("button",{onClick:()=>t(-1),className:"w-full sm:w-auto px-6 py-3 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-2"}),"Go Back"]})]})]})})},Hk=async t=>{const{data:a}=await $s.post("/orgs/createorganziation",t);if(!a.ok)throw new Error(a.message);return a.data},Qk=async t=>{const{data:a}=await t.get("/orgs/getorganizations");return a.ok?a.data:null},Gk=async(t,a)=>{const{data:l}=await a.get(`/orgs/getsingleorganization/${t}`);return l.ok?l.data:{}},Kk=async({updateField:t,orgsId:a,api:l})=>{const{data:r}=await l.put(`/orgs/updateorganization/${a}`,t);if(!r.ok)throw new Error(r.message);return r.data},Vk=async(t,a)=>{const{data:l}=await a.put(`/orgs/deleteorganization/${t}`);if(!l.ok)throw new Error(l.message);return l},Yk=()=>{const t=["owner","staff","CTO","client","worker"],{role:a}=X(),l=Z(a);return Fe({queryKey:["myOrgs"],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await Qk(l)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},Wk=t=>{const a=["owner","staff","CTO","client","worker"],{role:l}=X(),r=Z(l);return Fe({queryKey:["myOrgs"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await Gk(t,r)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},Xk=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Hk(r)},onSuccess:()=>{Ee.invalidateQueries({queryKey:["myOrgs"]})}})},Zk=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({updateField:r,orgsId:o})=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Kk({updateField:r,orgsId:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["myOrgs"]})}})},Jk=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Vk(r,l)},onSuccess:()=>{Ee.invalidateQueries({queryKey:["myOrgs"]})}})},eE=async(t,a)=>{const{data:l}=await a.get(`/orgs/getstaffsoforganization/${t}`);return l.ok,l.data},tE=async(t,a)=>{const{data:l}=await a.post("/orgs/invitestafftoorganization",t);if(!l.ok)throw new Error(l.message);return l.data},sE=async({staffId:t,orgId:a,api:l})=>{const{data:r}=await l.patch(`/orgs/removestafffromorganziation?staffId=${t}&orgId=${a}`);if(!r.ok)throw new Error(r.message);return r.data},aE=t=>{const a=["owner","staff","CTO"],{role:l}=X(),r=Z(l);return Fe({queryKey:["staffs",t],queryFn:async()=>{if(!l)throw new Error("Not authrized");if(!a.includes(l))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await eE(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},nE=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await tE(r,l)}})},lE=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({staffId:r,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await sE({staffId:r,orgId:o,api:l})},onSuccess:(r,o)=>{Ee.invalidateQueries({queryKey:["staffs",o.orgId]})}})},rE=async(t,a)=>{const{data:l}=await a.get(`/orgs/getctooforganization/${t}`);return l.ok,l.data},iE=async(t,a)=>{const{data:l}=await a.post("/orgs/invitectotoorganization",t);if(!l.ok)throw new Error(l.message);return l.data},oE=async({CTOId:t,orgId:a,api:l})=>{const{data:r}=await l.patch(`/orgs/removectofromorganziation?CTOId=${t}&orgId=${a}`);if(!r.ok)throw new Error(r.message);return r.data},cE=t=>{const a=["owner","staff","CTO"],{role:l}=X(),r=Z(l);return Fe({queryKey:["CTO",t],queryFn:async()=>{if(!l)throw new Error("Not authrized");if(!a.includes(l))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await rE(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},dE=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await iE(r,l)}})},uE=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({CTOId:r,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await oE({CTOId:r,orgId:o,api:l})},onSuccess:(r,o)=>{Ee.invalidateQueries({queryKey:["CTO",o.orgId]})}})},mE=async({projectId:t,api:a,organizationId:l})=>{const{data:r}=await a.post("orgs/inviteclienttoproject",{projectId:t,organizationId:l});if(!r.ok)throw new Error(r.message);return r.data},fE=()=>{const t=["owner","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,organizationId:o})=>{if(!a)throw new Error("not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await mE({projectId:r,api:l,organizationId:o})}})},hE=async(t,a)=>{const{data:l}=await $s.get(`/orgs/getclientsofproject/${t}/${a}`);return l.ok,console.log("data",l),l.data},xE=(t,a)=>{const l=["owner","staff","CTO"],{role:r}=X(),o=Z(r);return Fe({queryKey:["CTO",t],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await hE(t,a)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},pE=async({payload:t,api:a})=>{console.log("payload",t);const{data:l}=await a.post("orgs/inviteworker",t);if(!l.ok)throw new Error(l.message);return l.data},gE=async(t,a)=>{const{data:l}=await a.get(`orgs/getworker/${t}`);if(!l.ok)throw new Error(l.message);return l.data},bE=async({workerId:t,projectId:a,api:l})=>{const{data:r}=await l.put(`orgs/removeworker/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},yE=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async r=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await pE({api:l,payload:r})}})},wE=t=>{const a=["owner","staff","CTO"],{role:l}=X(),r=Z(l);return Fe({queryKey:["workers",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not Allowed to Make this api Call");if(!r)throw new Error("API instance not found for role");return await gE(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},vE=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({workerId:r,projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await bE({workerId:r,projectId:o,api:l})},onSuccess:()=>Ee.invalidateQueries({queryKey:["workers"]})})},jE=({children:t})=>{const[a,l]=A.useState(!1),r=A.useRef(null);return A.useEffect(()=>{const o=d=>{r.current&&!r.current.contains(d.target)&&l(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]),e.jsx("div",{ref:r,className:"relative inline-block text-left",children:ct.Children.map(t,o=>{if(ct.isValidElement(o)){if(o.type===_y)return ct.cloneElement(o,{onClick:()=>l(!a)});if(o.type===qy)return ct.cloneElement(o,{isOpen:a,onClose:()=>l(!1)})}return o})})},_y=({asChild:t=!1,children:a,onClick:l})=>t&&ct.isValidElement(a)?ct.cloneElement(a,{onClick:r=>{var o;if(r.stopPropagation(),l==null||l(),ct.isValidElement(a)){const d=(o=a.props)==null?void 0:o.onClick;typeof d=="function"&&d(r)}}}):e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),l==null||l()},className:"inline-flex items-center justify-center",children:a}),qy=({align:t="start",className:a="",children:l,isOpen:r=!1,onClose:o})=>{if(!r)return null;const d=t==="end"?"right-0":"left-0";return e.jsx("div",{className:`absolute ${d} mt-2 w-48 rounded-xl bg-white shadow-lg border border-gray-200 py-1 z-50 ${a}`,children:ct.Children.map(l,m=>ct.isValidElement(m)&&m.type===zy?ct.cloneElement(m,{onClose:o}):m)})},zy=({className:t="",children:a,onClick:l,onClose:r})=>{const o=()=>{l==null||l(),r==null||r()};return e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center ${t}`,onClick:o,children:a})},Wn=({variant:t="default",className:a="",children:l})=>{const d=`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${{default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",outline:"border border-blue-200 text-blue-700"}[t]} ${a}`.trim();return e.jsx("span",{className:d,children:l})};var Uy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_0=ct.createContext&&ct.createContext(Uy),NE=["attr","size","title"];function SE(t,a){if(t==null)return{};var l=CE(t,a),r,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(o=0;o<d.length;o++)r=d[o],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(l[r]=t[r])}return l}function CE(t,a){if(t==null)return{};var l={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(a.indexOf(r)>=0)continue;l[r]=t[r]}return l}function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r])}return t},Nc.apply(this,arguments)}function q0(t,a){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),l.push.apply(l,r)}return l}function Sc(t){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?q0(Object(l),!0).forEach(function(r){kE(t,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):q0(Object(l)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(l,r))})}return t}function kE(t,a,l){return a=EE(a),a in t?Object.defineProperty(t,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[a]=l,t}function EE(t){var a=AE(t,"string");return typeof a=="symbol"?a:a+""}function AE(t,a){if(typeof t!="object"||!t)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var r=l.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Iy(t){return t&&t.map((a,l)=>ct.createElement(a.tag,Sc({key:l},a.attr),Iy(a.child)))}function Ei(t){return a=>ct.createElement(OE,Nc({attr:Sc({},t.attr)},a),Iy(t.child))}function OE(t){var a=l=>{var{attr:r,size:o,title:d}=t,m=SE(t,NE),p=o||l.size||"1em",x;return l.className&&(x=l.className),t.className&&(x=(x?x+" ":"")+t.className),ct.createElement("svg",Nc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,r,m,{className:x,style:Sc(Sc({color:t.color||l.color},l.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),d&&ct.createElement("title",null,d),t.children)};return _0!==void 0?ct.createElement(_0.Consumer,null,l=>a(l)):a(Uy)}function RE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function TE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function PE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function ME(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function LE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function FE({organization:t}){const a=Jk(),l=Me(),r=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await a.mutateAsync(t._id),F({title:"Success",description:"Organization deleted successfully"})}catch(o){F({title:"Error",description:o.message||"Failed to delete organization",variant:"destructive"})}};return e.jsxs(Le,{className:"group hover:shadow-2xl transition-all duration-300 hover:bg-white hover:scale-105",children:[e.jsx(ns,{className:"pb-4 bg-gradient-to-br from-blue-50 to-blue-100/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t!=null&&t.logoUrl?e.jsx("img",{src:t.logoUrl||"/placeholder.svg",alt:t.organizationName,className:"w-8 h-8 rounded-lg object-cover"}):e.jsx(LE,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-blue-900 text-lg truncate",children:t==null?void 0:t.organizationName}),t.type&&e.jsx(Wn,{variant:"default",className:"mt-1",children:t.type})]})]}),e.jsxs(jE,{children:[e.jsx(_y,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(TE,{className:"h-4 w-4"})})}),e.jsx(qy,{align:"end",children:e.jsxs(zy,{onClick:r,className:"text-red-600 focus:text-red-600",children:[e.jsx(ME,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]})}),e.jsx(Dt,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx(RE,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),(t==null?void 0:t.address)||"N/A"]}),(t==null?void 0:t.organizationPhoneNo)&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(PE,{className:"w-4 h-4 mr-2 text-blue-500"}),t.organizationPhoneNo]}),e.jsx("div",{className:"flex items-center justify-end pt-3 border-t border-blue-100",children:e.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(`/organizations/${t._id}`),className:"border-blue-200 text-blue-600 hover:bg-blue-50",children:"View Details"})})]})})]})}const Ls=({className:t="",error:a,...l})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("textarea",{className:d,...l}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},$y=({open:t,onOpenChange:a,children:l})=>{const r=A.useRef(null);return A.useEffect(()=>{const o=m=>{m.key==="Escape"&&a(!1)},d=m=>{r.current&&!r.current.contains(m.target)&&a(!1)};return t&&(document.addEventListener("keydown",o),document.addEventListener("mousedown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.removeEventListener("mousedown",d),document.body.style.overflow="unset"}},[t,a]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{ref:r,className:"relative z-50 w-full max-w-lg mx-4",children:l})]}):null},DE=({className:t="",children:a})=>e.jsx("div",{className:`bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto ${t}`,children:a}),_E=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-4 ${t}`,children:a}),qE=({className:t="",children:a})=>e.jsx("h2",{className:`text-xl font-semibold text-gray-900 ${t}`,children:a});function zE({isOpen:t,onClose:a}){const[l,r]=A.useState({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),o=Xk(),d=async p=>{var x,h;if(p.preventDefault(),!l.organizationName.trim()){F({title:"Error",description:"Organization name is required",variant:"destructive"});return}try{await o.mutateAsync(l),F({title:"Success",description:"Organization created successfully"}),r({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),a()}catch(g){F({title:"Error",description:((h=(x=g==null?void 0:g.response)==null?void 0:x.data)==null?void 0:h.message)||"Failed to create organization",variant:"destructive"})}},m=p=>{r(x=>({...x,[p.target.name]:p.target.value}))};return e.jsx($y,{open:t,onOpenChange:a,children:e.jsxs(DE,{className:"sm:max-w-md p-4",children:[e.jsx(_E,{children:e.jsx(qE,{className:"text-blue-900",children:"Create New Organization"})}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"organizationName",className:"text-blue-800",children:"Organization Name *"}),e.jsx(ce,{id:"organizationName",name:"organizationName",value:l.organizationName,onChange:m,placeholder:"Enter organization name",className:"border-blue-200 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"type",className:"text-blue-800",children:"Type"}),e.jsx(ce,{id:"type",name:"type",value:l.type,onChange:m,placeholder:"e.g., Company, NGO, Startup",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"organizationPhoneNo",className:"text-blue-800",children:"Phone Number"}),e.jsx(ce,{id:"organizationPhoneNo",name:"organizationPhoneNo",value:l.organizationPhoneNo,onChange:m,placeholder:"Enter phone number",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"address",className:"text-blue-800",children:"Address"}),e.jsx(Ls,{id:"address",name:"address",value:l.address,onChange:m,placeholder:"Enter organization address",className:"border-blue-200 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"logoUrl",className:"text-blue-800",children:"Logo URL"}),e.jsx(ce,{id:"logoUrl",name:"logoUrl",value:l.logoUrl,onChange:m,placeholder:"Enter logo URL",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:a,className:"border-blue-200 text-blue-600",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:o.isPending,className:"bg-blue-600 hover:bg-blue-700",children:o.isPending?"Creating...":"Create Organization"})]})]})]})})}const _e=({className:t=""})=>e.jsx("div",{className:`animate-pulse rounded-md bg-gray-200 ${t}`});function UE(){var C,b;const[t,a]=A.useState(!1),[l,r]=A.useState(!1),[o,d]=A.useState(window.innerWidth<470),m=Me();let{data:p,isLoading:x,error:h,refetch:g}=Yk();const y={ADMIN:"/login",STAFF:"/login/staff",CTO:"/login/cto",WORKER:"/login/worker",CLIENT:"/login/client"},j=()=>{r(!0)};return A.useEffect(()=>{const E=()=>{d(window.innerWidth<470)};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),x?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(_e,{className:"h-8 w-48 mb-2"}),e.jsx(_e,{className:"h-4 w-64"})]}),e.jsx(_e,{className:"h-10 w-40"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(E=>e.jsx(_e,{className:"h-24 w-full rounded-2xl"},E))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6].map(E=>e.jsx(_e,{className:"h-64 w-full rounded-2xl"},E))})]})]}):h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Organizations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:((b=(C=h==null?void 0:h.response)==null?void 0:C.data)==null?void 0:b.message)||(h==null?void 0:h.message)||"Something happened try again please"}),e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[e.jsxs(M,{onClick:()=>g(),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]}),e.jsxs(M,{onClick:()=>m("/login/staff"),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Login"]})]})]})}):e.jsxs("main",{className:"w-screen h-screen flex flex:1",children:[o?e.jsx(ki,{labels:rc,path:y,isOpen:l,onClose:()=>r(!1)}):e.jsx(Ci,{path:y,labels:rc,icons:Eb}),e.jsxs("section",{className:"w-full h-full",children:[e.jsx("div",{className:"max-w-full min-h-[10%] bg-white/90 backdrop-blur-sm border-b border-blue-200",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 py-3",children:e.jsxs("div",{className:"flex  sm:flex-row items-center sm:items-center justify-between gap-3 sm:gap-6",children:[e.jsxs("div",{className:"flex flex:1 items-center",children:[o&&e.jsx("button",{onClick:j,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"flex flex-col gap-1 w-[50vw]",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-blue-800",children:[e.jsx("i",{className:"fas fa-building mr-2 text-blue-600"}),"Organization"]}),e.jsx("p",{className:"text-sm sm:inline hidden text-blue-500",children:"Manage your organization and teams"})]})]}),!p&&e.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3 sm:gap-4 w-full sm:w-auto",children:e.jsxs(M,{onClick:()=>a(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Organization"}),e.jsx("span",{className:"inline sm:hidden",children:"Create"})]})})]})})}),e.jsx("div",{className:" min-h-[calc(100vh-10%)] sm:min-h-[calc(100vh-11%)] bg-gradient-to-br from-blue-50 via-white to-blue-100",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 py-6 relative",children:[p?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Your Organization"})}),e.jsx("div",{className:" xl:!w-[30%] lg:w-[50%] sm:w-[60%] w-[100%]",children:e.jsx(FE,{organization:p})})]}):e.jsx("div",{className:"text-center py-2 overflow-y-auto max-h-[calc(100vh-15vh)]",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-4xl"})}),e.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:"No Organizations Yet"}),e.jsx("p",{className:"text-blue-600 mb-6 text-sm sm:text-base",children:"Create your first organization to start managing your teams and projects effectively"}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-6 text-left",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-4 text-center",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Getting Started"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Create your organization with basic details"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Invite team members to join your organization"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Start managing tasks and projects together"})]})]})]}),e.jsxs(M,{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Create Your First Organization"]})]})}),e.jsx(zE,{isOpen:t,onClose:()=>a(!1)})]})})]})]})}const IE=async(t,a,l)=>(await l.get(`/getusers/${t}/${a}`)).data.data,di=(t,a)=>{const{role:l}=X(),r=Z(l),o=["owner","staff","CTO"];return Fe({queryKey:["get-users",t,a],queryFn:async()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return await IE(t,a,r)},retry:!1,refetchOnMount:!1})},Xo=({title:t,icon:a,list:l,isLoading:r})=>{const[o,d]=A.useState(""),m=A.useMemo(()=>l!=null&&l.length?l==null?void 0:l.filter(p=>{var x,h;return((x=p.name)==null?void 0:x.toLowerCase().includes(o.toLowerCase()))||((h=p.email)==null?void 0:h.toLowerCase().includes(o.toLowerCase()))}):[],[l,o]);return e.jsxs("div",{className:"bg-white border rounded-xl !min-h-[50%] !max-h-[93%] overflow-hidden border-blue-100 shadow-sm px-4 py-5 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-blue-800 font-semibold flex items-center gap-2 text-base",children:[e.jsx("i",{className:`fas ${a} text-blue-600 text-lg`}),t]}),l&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs font-medium px-2 py-0.5 rounded-full",children:[l==null?void 0:l.length," total"]})]}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search name or email",value:o,onChange:p=>d(p.target.value),className:"w-full px-3 py-1.5 border border-blue-200 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-400"})}),e.jsx("div",{className:"max-h-[100%] overflow-y-auto custom-scrollbar pr-1 scroll-smooth scrollbar-thin scrollbar-thumb-blue-300 hover:scrollbar-thumb-blue-400 scrollbar-track-blue-100",children:r?e.jsx(_e,{className:"h-4 w-1/2 mx-2 mb-2"}):(m==null?void 0:m.length)>0?e.jsx("ul",{className:"space-y-3 pt-1",children:m==null?void 0:m.map(p=>e.jsxs("li",{className:"flex items-start gap-3 px-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mt-0.5",children:e.jsx("i",{className:"fas fa-user"})}),e.jsxs("div",{className:"text-sm text-gray-700 leading-tight",children:[e.jsx("p",{className:"font-medium",children:p.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:p.email})]})]},p._id))}):e.jsxs("p",{className:"text-sm text-gray-500 text-center py-6",children:["No ",t.toLowerCase()," found."]})})]})};function $E(){const{organizationId:t}=ke(),{openMobileSidebar:a,isMobile:l}=Ge(),r=Me(),[o,d]=A.useState(!1),[m,p]=A.useState(""),[x,h]=A.useState(!1),[g,y]=A.useState(!1),[j,C]=A.useState(""),[b,E]=A.useState("");let{data:v,isLoading:S,error:w}=Wk(t);Array.isArray(v)&&(v=v[0]);const N=Zk(),{data:T,isLoading:P}=di(t,"staff"),{data:L,isLoading:z}=di(t,"CTO"),{data:q,isLoading:B}=di(t,"worker"),{data:de,isLoading:Q}=di(t,"client"),$=async()=>{if(!m.trim()){F({title:"Error",description:"Organization name cannot be empty",variant:"destructive"});return}try{await N.mutateAsync({updateField:{organizationName:m},orgsId:t}),F({title:"Success",description:"Organization name updated successfully"}),d(!1)}catch(U){F({title:"Error",description:U.message||"Failed to update organization name",variant:"destructive"})}},ee=()=>{p((v==null?void 0:v.organizationName)||""),d(!0)},V=()=>{p(""),d(!1)},le=()=>{C((v==null?void 0:v.organizationPhoneNo)||""),h(!0)},_=()=>{E((v==null?void 0:v.address)||""),y(!0)},W=async()=>{var U,D;if(!j.trim()){F({title:"Error",description:"Phone number cannot be empty",variant:"destructive"});return}if(!/^\d{10}$/.test(j)){F({title:"Error",description:"Phone number should contain 10 digits number",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{organizationPhoneNo:j}}),F({title:"Success",description:"Phone number updated successfully"}),h(!1)}catch(K){F({title:"Error",description:((D=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:D.message)||(K==null?void 0:K.message)||"Failed to update phone number",variant:"destructive"})}},me=async()=>{var U,D;if(!b.trim()){F({title:"Error",description:"Address cannot be empty",variant:"destructive"});return}if(b.length>150){F({title:"Error",description:"Address cannot be more than 150 characters",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{address:b}}),F({title:"Success",description:"Address updated successfully"}),y(!1)}catch(K){F({title:"Error",description:((D=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:D.message)||(K==null?void 0:K.message)||"Failed to update address",variant:"destructive"})}},te=()=>{C(""),h(!1)},O=()=>{E(""),y(!1)};return S?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(_e,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(_e,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(_e,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(_e,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(_e,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_e,{className:"h-96 w-full rounded-2xl"})})]})})]}):w||!v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(M,{onClick:()=>r("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsx("div",{className:"flex w-full h-full ",children:e.jsxs("div",{className:"min-h-full w-full max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white bg-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10 w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-3 flex flex-row sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-6",children:e.jsxs("div",{className:"flex flex-row sm:items-center justify-between  w-full gap-3 sm:gap-4",children:[l?e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}):e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>r("/organizations"),className:"text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Back to Organizations"}),e.jsx("span",{className:"md:hidden",children:"Back"})]}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:v!=null&&v.logoUrl?e.jsx("img",{src:(v==null?void 0:v.logoUrl)||yt.COMPANY_LOGO,alt:v==null?void 0:v.organizationName,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"}):e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Company Logo",className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"})}),e.jsx("div",{className:"min-w-0 flex-1 ",children:o?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx(ce,{value:m,onChange:U=>p(U.target.value),onKeyPress:U=>U.key==="Enter"&&$(),placeholder:"Organization name",className:"w-full text-lg sm:text-xl font-bold border-2 border-blue-300 focus:border-blue-500 rounded-xl bg-white/90 backdrop-blur-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"primary",onClick:$,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:V,className:"border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-blue-900 truncate",children:(v==null?void 0:v.organizationName)||"N/A"}),(v==null?void 0:v.type)&&e.jsx(Wn,{className:"mt-1 bg-blue-100 text-blue-700 text-xs",children:v==null?void 0:v.type})]})})]}),!o&&e.jsx("div",{className:"flex justify-end sm:justify-start  w-fit flex-shrink-0",children:e.jsxs(M,{variant:"outline",onClick:ee,className:"border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl bg-white/80 backdrop-blur-sm",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Name"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})})]})})}),e.jsx("div",{className:"max-w-full mx-auto p-4 sm:p-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm h-fit",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx(ce,{value:j,type:"tel",onChange:U=>C(U.target.value),placeholder:"Enter phone number",className:"text-sm border-blue-200 focus:border-blue-500 bg-white flex-1",onKeyPress:U=>U.key==="Enter"&&W()})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:te,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(M,{size:"sm",variant:"primary",onClick:W,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:(v==null?void 0:v.organizationPhoneNo)||"N/A"})]}),e.jsx(M,{size:"sm",variant:"ghost",onClick:le,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm ",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:b,onChange:U=>E(U.target.value),placeholder:"Enter address",className:"w-full text-sm border-2 border-blue-200 focus:border-blue-500 bg-white rounded-lg p-2 resize-none focus:outline-none",rows:3,onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),me())}}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-600",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-[13px]"}),e.jsx("span",{className:"text-[12px] sm:text-sm",children:"Press Shift + Enter for next line"})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:O,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(M,{size:"sm",variant:"primary",onClick:me,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-start gap-3  w-full",children:[e.jsxs("div",{className:"flex items-start gap-3 ",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsx("div",{className:"max-w-[90%] overflow-h-auto !max-h-[150px] ",children:e.jsx("span",{className:"text-gray-700 text-sm sm:text-base break-words whitespace-pre-wrap",children:(v==null?void 0:v.address)||"N/A"})})]}),e.jsx(M,{size:"sm",variant:"ghost",onClick:_,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto flex-shrink-0",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})})]})})})}),e.jsxs("div",{className:"px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-3  sm:min-h-[65vh] sm:max-h-[100%]",children:[e.jsx(Xo,{title:"Staffs",icon:"fa-user-tie",list:T,isLoading:P}),e.jsx(Xo,{title:"CTOs",icon:"fa-user-cog",list:L,isLoading:z}),e.jsx(Xo,{title:"Workers",icon:"fa-user-hard-hat",list:q,isLoading:B}),e.jsx(Xo,{title:"Clients",icon:"fa-user-friends",list:de,isLoading:Q})]})]})})}function BE(){const t=Me(),[a]=Oc(),l=a.get("invite"),[r,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",staffName:""}),[d,m]=A.useState(!1),[p,x]=A.useState(!1),[h,g]=A.useState({}),y=tk(),j=ws();A.useEffect(()=>{l||(F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[l,t]);const C=()=>{const v={};return r.staffName.trim()?r.staffName.trim().length<2&&(v.staffName="Name must be at least 2 characters"):v.staffName="Full name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(v.email="Please enter a valid email address"):v.email="Email is required",r.phoneNo.trim()?/^\d{10}$/.test(r.phoneNo.trim())||(v.phoneNo="Please enter a valid phone number"):v.phoneNo="Phone number is required",r.password.trim()?r.password.length<6&&(v.password="Password must be at least 6 characters"):v.password="Password is required",r.confirmPassword.trim()?r.password!==r.confirmPassword&&(v.confirmPassword="Passwords do not match"):v.confirmPassword="Please confirm your password",g(v),Object.keys(v).length===0},b=v=>{const{name:S,value:w}=v.target;o(N=>({...N,[S]:w})),h[S]&&g(N=>({...N,[S]:""}))},E=async v=>{if(v.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(C())try{const S=await y.mutateAsync({invite:l,email:r.email,password:r.password,phoneNo:r.phoneNo,staffName:r.staffName});F({title:"Success",description:"Registration successful! You can now login with your credentials."});const w=S.data;j(Lt({_id:w._id,role:w.role,isauthenticated:!0})),j(Ic({staffId:w._id,staffName:w.staffName,email:w.email,phoneNo:w.phoneNo,role:w.role,isauthenticated:!0})),setTimeout(()=>{t("/")},2e3)}catch(S){F({title:"Registration Failed",description:S.message||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute z-[10] top-[5%]  right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-plus text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as staff member"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"staffName",name:"staffName",type:"text",value:r.staffName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${h.staffName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.staffName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:r.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${h.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:r.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${h.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:d?"text":"password",value:r.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",value:r.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!p),children:e.jsx("i",{className:`fas ${p?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password===r.confirmPassword&&r.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/stafflogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function z0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),[r,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:p,openMobileSidebar:x}=Ge(),h=ws(),g=J1(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",m(b),Object.keys(b).length===0},j=b=>{const{name:E,value:v}=b.target;l(S=>({...S,[E]:v})),d[E]&&m(S=>({...S,[E]:""}))},C=async b=>{var E,v;if(b.preventDefault(),!!y())try{const w=(await g.mutateAsync(a)).data;h(Lt({_id:w.staffId,role:w.role,isauthenticated:!0})),h(Ic({staffId:w.staffId,staffName:w.staffName,email:w.email,phoneNo:w.phoneNo,role:w.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful"}),t("/organizations")}catch(S){F({title:"Login Failed",description:((v=(E=S==null?void 0:S.response)==null?void 0:E.data)==null?void 0:v.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:p&&e.jsx("button",{onClick:x,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Staff Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:r?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!r),children:e.jsx("i",{className:`fas ${r?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}const Qc=({className:t="",children:a})=>e.jsx("div",{className:`relative inline-block rounded-full overflow-hidden ${t}`,children:a}),By=({className:t="",...a})=>e.jsx("img",{className:`h-full w-full object-cover ${t}`,...a}),Gc=({className:t="",children:a})=>e.jsx("div",{className:`flex h-full w-full items-center justify-center bg-blue-100 text-blue-800 ${t}`,children:a});function U0(){const{projectId:t,organizationId:a}=ke(),{openMobileSidebar:l,isMobile:r}=Ge(),[o,d]=A.useState(""),[m,p]=A.useState(!1),{data:x,isLoading:h}=wE(t||""),g=yE(),y=vE(),j=async()=>{var w,N;try{const T=await g.mutateAsync({projectId:t||"",role:"worker",organizationId:a});d((T==null?void 0:T.inviteLink)||T),F({title:"Success",description:"Worker invitation link generated successfully"})}catch(T){F({title:"Error",description:((N=(w=T==null?void 0:T.response)==null?void 0:w.data)==null?void 0:N.message)||(T==null?void 0:T.message)||"Failed to generate invitation link",variant:"destructive"})}},C=async()=>{try{await navigator.clipboard.writeText(o),p(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>p(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},b=()=>{const w=`You're invited to work with us Click this link to join: ${o}`,N=`https://wa.me/?text=${encodeURIComponent(w)}`;window.open(N,"_blank")},E=async(w,N)=>{if(window.confirm(`Are you sure you want to remove ${N} from this project?`))try{await y.mutateAsync({workerId:w,projectId:t||""}),F({title:"Success",description:`${N} has been removed from the project`})}catch(T){F({title:"Error",description:T.message||"Failed to remove worker",variant:"destructive"})}},v=w=>w?w.split(" ").map(N=>N[0]).join("").toUpperCase():"WK",S=w=>({carpenter:"bg-amber-100 text-amber-800 border-amber-200",plumber:"bg-blue-100 text-blue-800 border-blue-200",electrician:"bg-yellow-100 text-yellow-800 border-yellow-200",painter:"bg-green-100 text-green-800 border-green-200",mason:"bg-gray-100 text-gray-800 border-gray-200",welder:"bg-red-100 text-red-800 border-red-200"})[w.toLowerCase()]||"bg-purple-100 text-purple-800 border-purple-200";return e.jsxs("div",{className:"max-h-full sm:overflow-y-hidden custom-scrollbar",children:[e.jsx("div",{className:"bg-white ",children:e.jsx("div",{className:"max-w-full mx-auto  py-2",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Workers"]})})})]})})})}),e.jsx("div",{className:"max-w-full !max-h-[100%] overflow-y-auto custom-scrollbar mx-auto p-2",children:e.jsxs("div",{className:"grid grid-cols-1 max-h-full lg:grid-cols-3 gap-6 lg:gap-8 w-full",children:[e.jsx("div",{className:"lg:col-span-1 h-fit space-y-6",children:e.jsxs(Le,{className:"bg-white backdrop-blur-sm rounded-2xl shadow-md border-l-4 border-green-600 ",children:[e.jsx(ns,{children:e.jsxs(ys,{className:"text-gray-800 flex items-center text-lg",children:[e.jsx("i",{className:"fas fa-user-plus mr-2 text-green-600"}),"Invite Workers"]})}),e.jsx(Dt,{className:"space-y-4",children:o?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{className:"text-gray-700 font-medium",children:"Invitation Link"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ce,{value:o,readOnly:!0,className:"border-green-200 bg-green-50 text-sm flex-1 min-w-0"}),e.jsx(M,{onClick:C,variant:"outline",size:"icon",className:"border-green-200 text-green-600 hover:bg-green-50 rounded-xl flex-shrink-0",children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(M,{onClick:C,variant:"outline",className:"w-full border-green-200 text-green-600 hover:bg-green-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-copy mr-2"}),"Copy Link"]}),e.jsxs(M,{onClick:b,className:"w-full bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"}),"Share on WhatsApp"]}),e.jsxs(M,{onClick:()=>{d("")},variant:"outline",className:"w-full border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Generate Another"]})]})]}):e.jsxs(M,{onClick:j,isLoading:g.isPending,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-link mr-2"}),g.isPending?"Generating...":"Generate Invitation Link"]})})]})}),e.jsx("div",{className:"lg:col-span-2 sm:max-h-[43%] lg:!max-h-[48%] rounded-2xl border-l-4 border-orange-600  overflow-y-auto shadow-md custom-scrollbar",children:e.jsxs(Le,{className:"bg-white/70 backdrop-blur-sm border-0  shadow-xl",children:[e.jsx(ns,{children:e.jsx(ys,{className:"text-gray-800 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-hard-hat mr-2 text-orange-600"}),e.jsxs("span",{className:"text-lg",children:["Project Workers (",(x==null?void 0:x.length)||0,")"]})]})})}),e.jsx(Dt,{children:h?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(w=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-blue-100 rounded-xl",children:[e.jsx(_e,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(_e,{className:"h-4 w-32"}),e.jsx(_e,{className:"h-3 w-48"})]}),e.jsx(_e,{className:"h-8 w-20"})]},w))}):x&&x.length>0?e.jsx("div",{className:"space-y-4 overflow-hidden",children:x.map(w=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border border-blue-100 rounded-xl hover:bg-blue-50/50 transition-all duration-200 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[e.jsx(Qc,{className:"w-12 h-12 border-2 border-blue-200 flex-shrink-0",children:e.jsx(Gc,{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white font-semibold",children:v(w==null?void 0:w.workerName)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 truncate",children:(w==null?void 0:w.workerName)||(w==null?void 0:w.name)}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-gray-600 gap-1 sm:gap-0",children:[w.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-envelope text-xs"}),e.jsx("span",{className:"truncate",children:w.email})]}),w.phoneNo&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-phone text-xs"}),e.jsx("span",{children:w.phoneNo})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs(Wn,{className:`text-xs ${S((w==null?void 0:w.specifiedRole)||(w==null?void 0:w.role)||"worker")}`,children:[e.jsx("i",{className:"fas fa-tools mr-1"}),(w==null?void 0:w.specifiedRole)||(w==null?void 0:w.role)||"Worker"]})})]})]}),e.jsxs(M,{onClick:()=>E(w._id,(w==null?void 0:w.workerName)||(w==null?void 0:w.name)),variant:"danger",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50 rounded-xl w-full sm:w-auto",isLoading:y.isPending,children:[e.jsx("i",{className:"fas fa-user-minus mr-1"}),"Remove"]})]},w._id))}):e.jsxs("div",{className:"text-center py-12 min-h-[100vh]",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-hard-hat text-orange-500 text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Workers Assigned"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm sm:text-base",children:"Start building your team by inviting skilled workers to this project"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6"}),e.jsxs(M,{onClick:()=>{j()},className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Invite First Worker"]})]})})]})})]})})]})}function HE(){const t=Me(),[a]=Oc(),l=a.get("invite"),r=ws(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",workerName:""}),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,y]=A.useState({}),[j,C]=A.useState(null),b=hk();A.useEffect(()=>{if(!l){F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3);return}try{const w=JSON.parse(atob(l));C(w)}catch{F({title:"Invalid Invitation",description:"The invitation link is corrupted or invalid.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3)}},[l,t]);const E=()=>{const w={};return o.workerName.trim()?o.workerName.trim().length<2&&(w.workerName="workerName must be at least 2 characters"):w.workerName="workerName is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(w.email="Please enter a valid email address"):w.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(w.phoneNo="Please enter a valid phone number"):w.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",y(w),Object.keys(w).length===0},v=w=>{const{name:N,value:T}=w.target;d(P=>({...P,[N]:T})),g[N]&&y(P=>({...P,[N]:""}))},S=async w=>{var N,T;try{if(w.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(!E())return;const P=await b.mutateAsync({invite:l,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,workerName:o.workerName}}),L=P==null?void 0:P.data;r(Lt({role:L==null?void 0:L.role,isauthenticated:!0,_id:L==null?void 0:L._id})),r($c({workerId:L==null?void 0:L._id,workerName:L==null?void 0:L.workerName,email:L==null?void 0:L.email,phoneNo:L==null?void 0:L.phoneNo,role:L==null?void 0:L.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(P){F({title:"Registration Failed",description:((T=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:T.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-full bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full max-w-lg",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-800 bg-clip-text text-transparent",children:"Join as Worker"}),e.jsxs(aa,{className:"text-blue-700 text-base",children:[(j==null?void 0:j.specifiedRole)&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mb-2",children:["Role: ",j.specifiedRole]}),e.jsx("br",{}),"Complete your registration to join the project"]})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:S,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"workerName",className:"text-blue-800 font-medium",children:"workerName *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"workerName",name:"workerName",type:"text",value:o.workerName,onChange:v,placeholder:"Enter your workerName",className:`pl-10 border-2 transition-all duration-200 ${g.workerName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.workerName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:o.email,onChange:v,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:v,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:v,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:o.confirmPassword,onChange:v,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-green-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-green-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:b.isPending,children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/workerlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function I0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),r=ws(),{isMobile:o,openMobileSidebar:d}=Ge(),[m,p]=A.useState(!1),[x,h]=A.useState({}),g=fk(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",h(b),Object.keys(b).length===0},j=b=>{const{name:E,value:v}=b.target;l(S=>({...S,[E]:v})),x[E]&&h(S=>({...S,[E]:""}))},C=async b=>{var E,v;if(b.preventDefault(),!!y())try{const S=await g.mutateAsync(a),w=S==null?void 0:S.data;r(Lt({role:w.role,isauthenticated:!0,_id:w._id})),r($c({workerId:w._id,workerName:w.workerName,email:w.email,phoneNo:w.phoneNo,role:w.role,isauthenticated:!0})),t("/organizations"),F({title:"Success",description:"Login successfull"})}catch(S){F({title:"Login Failed",description:((v=(E=S==null?void 0:S.response)==null?void 0:E.data)==null?void 0:v.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:o&&e.jsx("button",{onClick:d,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Worker Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your projects and tasks"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${x.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:x.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:m?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${x.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:x.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your project manager for an invitation"})]})})]})]})})]})}const Hy=()=>{const t=ws(),[a,l]=A.useState(!0),[r,o]=A.useState(null),[d,m]=A.useState({role:null,isauthenticated:!1,_id:null});return A.useEffect(()=>{(async()=>{l(!0),o(null);try{const[x,h,g,y,j]=await Promise.allSettled([$s.get("/auth/isauthenticated"),sa.get("/auth/staff/isauthenticated"),hn.get("/auth/worker/isauthenticated"),fn.get("/auth/CTO/isauthenticated"),Aa.get("/auth/client/isauthenticated")]);if(x.status==="fulfilled"&&x.value.data.ok){const C={role:"owner",isauthenticated:!0,_id:x.value.data.data.userId};return t(Lt(C)),t(pc(x.value.data.data)),m({...C,_id:x.value.data.data.userId}),l(!1)}if(h.status==="fulfilled"&&h.value.data.ok){const C={role:"staff",isauthenticated:!0,_id:h.value.data.data.staffId};return t(Lt(C)),t(Ic(h.value.data.data)),m({...C,_id:h.value.data.data.staffId}),l(!1)}if(g.status==="fulfilled"&&g.value.data.ok){const C={role:"worker",isauthenticated:!0,_id:g.value.data.data.workerId};return t(Lt(C)),t($c(g.value.data.data)),m({...C,_id:g.value.data.data.workerId}),l(!1)}if(y.status==="fulfilled"&&y.value.data.ok){const C={role:"CTO",isauthenticated:!0,_id:y.value.data.data.CTOId};return t(Lt(C)),t(Bc(y.value.data.data)),m({...C,_id:y.value.data.data.CTOId}),l(!1)}if(j.status==="fulfilled"&&j.value.data.ok){const C={role:"client",isauthenticated:!0,_id:j.value.data.data.clientId};return t(Lt(C)),t(Hc(j.value.data.data)),m({...C,_id:j.value.data.data.clientId}),l(!1)}t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),t(gc()),t(bc()),t(yc()),t(vc()),t(jc()),t(wc()),l(!1)}catch{t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),o("Something went wrong while checking authentication."),t(gc()),t(bc()),t(yc()),t(vc()),t(jc()),t(wc()),l(!1)}})()},[]),{loading:a,error:r,...d}},Qy=()=>{const t=Me(),a=()=>{t(-1)};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 bg-gray-100 text-center",children:e.jsx("div",{className:"w-full max-w-md p-6 md:p-8 bg-white rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation text-red-500 text-6xl md:text-7xl"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 text-base md:text-lg",children:"Sorry, you don't have permission to view this page."}),e.jsx("button",{onClick:a,className:"mt-4 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-full transition",children:"Go Back"})]})})})},Te=({allowedRoles:t,children:a})=>{const{loading:l,error:r,role:o,isauthenticated:d}=Hy(),m=mt();return!d&&l===!1?e.jsx(zm,{to:`${o==="owner"||o===null?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):l||o===void 0||o===null?e.jsx("div",{className:"p-6 text-center",children:"🔐 Loading..."}):t.includes(o)?r||!d?e.jsx(zm,{to:`${o==="owner"?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):e.jsx(e.Fragment,{children:a}):e.jsx(Qy,{})},QE=()=>{const{organizationId:t}=ke(),{openMobileSidebar:a,isMobile:l}=Ge(),r=Me(),[o,d]=A.useState(""),[m,p]=A.useState(!1),{data:x,isLoading:h,error:g,isError:y}=aE(t),j=lE(),C=nE(),b=async(N,T)=>{if(window.confirm(`Are you sure you want to remove ${T} from this organization?`))try{await j.mutateAsync({staffId:N,orgId:t}),F({title:"Success",description:`${T} has been removed from the organization`})}catch(P){F({title:"Error",description:P.message||"Failed to remove staff member",variant:"destructive"})}},E=async()=>{try{const N=await C.mutateAsync({organizationId:t,role:"staff"});d(N.inviteLink||N),F({title:"Success",description:"Invitation link generated successfully"})}catch(N){F({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},v=async()=>{try{await navigator.clipboard.writeText(o),p(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>p(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},S=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,T=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(T,"_blank")},w=N=>N.split(" ").map(T=>T[0]).join("").toUpperCase();return h?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(_e,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(_e,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(_e,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(_e,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(_e,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_e,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||y||!x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(M,{onClick:()=>r("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 lg:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"Staff Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),x==null?void 0:x.length," ",(x==null?void 0:x.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh] h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite Staffs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite Staffs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:v,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:S,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:v,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(M,{onClick:E,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(M,{onClick:E,isLoading:C.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full  !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2 rounded-2xl shadow-lg overflow-y-auto max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Staff Members (",x==null?void 0:x.length,")"]}),x.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No Staffs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:x==null?void 0:x.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Qc,{className:"w-12 h-12",children:[e.jsx(By,{src:N.avatarUrl||yt.COMPANY_LOGO}),e.jsx(Gc,{className:"bg-blue-600 text-white",children:w(N.staffName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N==null?void 0:N.staffName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(Wn,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsxs(M,{variant:"danger",onClick:()=>b(N._id,N.staffName),isLoading:C.isPending,className:"text-white bg-red-600 border border-red-200 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-user-minus mr-1"})," Remove"]})]},N._id))})]})]})]})},GE=()=>{const{organizationId:t}=ke(),a=Me(),{openMobileSidebar:l,isMobile:r}=Ge(),[o,d]=A.useState(""),[m,p]=A.useState(!1),{data:x,isLoading:h,error:g,isError:y}=cE(t),j=uE(),C=dE(),b=async(N,T)=>{if(window.confirm(`Are you sure you want to remove ${T} from this organization?`))try{await j.mutateAsync({CTOId:N,orgId:t}),F({title:"Success",description:`${T} has been removed from the organization`})}catch(P){F({title:"Error",description:P.message||"Failed to remove CTO member",variant:"destructive"})}},E=async()=>{try{const N=await C.mutateAsync({organizationId:t,role:"CTO"});d(N.inviteLink||N),F({title:"Success",description:"Invitation link generated successfully"})}catch(N){F({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},v=async()=>{try{await navigator.clipboard.writeText(o),p(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>p(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},S=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,T=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(T,"_blank")},w=N=>N.split(" ").map(T=>T[0]).join("").toUpperCase();return h?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(_e,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(_e,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(_e,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(_e,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(_e,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_e,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||y||!x?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-white",children:e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-md w-full max-w-md",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-building text-blue-600 text-xl"})}),e.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You either do not have access or the organization does not exist."}),e.jsxs(M,{onClick:()=>a("/organizations"),className:"bg-blue-600 text-white w-full",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto  min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"CTO Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user-tie text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),x==null?void 0:x.length," ",(x==null?void 0:x.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh]  h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite CTOs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite CTOs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:v,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:S,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:v,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(M,{onClick:E,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(M,{onClick:E,isLoading:C.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2  rounded-2xl shadow-lg overflow-y-auto  max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," CTO Members (",x.length,")"]}),x.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No CTOs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:x.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Qc,{className:"w-12 h-12",children:[e.jsx(By,{src:N.avatarUrl||yt.COMPANY_LOGO}),e.jsx(Gc,{className:"bg-blue-600 text-white",children:w(N.CTOName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N.CTOName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(Wn,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsx(M,{onClick:()=>b(N._id,N.CTOName),isLoading:j.isPending,variant:"danger",className:" text-white bg-red-600 border border-red-200 hover:bg-red-700",children:e.jsx("i",{className:"fas fa-trash-can mr-1 text-white"})})]},N._id))})]})]})]})},KE=()=>{const{organizationId:t}=ke(),[a,l]=A.useState(!1),[r,o]=A.useState(window.innerWidth<470),d={PROJECTS:`/organizations/${t}/projects`,DETAILS:`/organizations/${t}`,INVITECTO:`/organizations/${t}/invitecto`,INVITESTAFFS:`/organizations/${t}/invitestaff`,PLAN:`/organizations/${t}/subscriptionplan`,PROFILE:`/organizations/${t}/userprofile`,MODULAR:`/organizations/${t}/modularunits`};return A.useEffect(()=>{const m=()=>{o(window.innerWidth<470)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[r?e.jsx(ki,{labels:Kg,path:d,isOpen:a,onClose:()=>l(!1)}):e.jsx(Ci,{path:d,labels:Kg,icons:P2}),e.jsx("main",{className:"!w-[100%] h-full",children:e.jsx(Bt,{context:{isMobile:r,isMobileSidebarOpen:a,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})};function VE(){const t=Me(),[a]=Oc(),l=a.get("invite"),[r,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",CTOName:""}),[d,m]=A.useState(!1),[p,x]=A.useState(!1),[h,g]=A.useState({}),y=H1(),j=ws();A.useEffect(()=>{l||(F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[l,t]);const C=()=>{const v={};return r.CTOName.trim()?r.CTOName.trim().length<2&&(v.CTOName="Name must be at least 2 characters"):v.CTOName="Full name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(v.email="Please enter a valid email address"):v.email="Email is required",r.phoneNo.trim()?/^\d{10}$/.test(r.phoneNo.trim())||(v.phoneNo="Please enter a valid phone number"):v.phoneNo="Phone number is required",r.password.trim()?r.password.length<6&&(v.password="Password must be at least 6 characters"):v.password="Password is required",r.confirmPassword.trim()?r.password!==r.confirmPassword&&(v.confirmPassword="Passwords do not match"):v.confirmPassword="Please confirm your password",g(v),Object.keys(v).length===0},b=v=>{const{name:S,value:w}=v.target;o(N=>({...N,[S]:w})),h[S]&&g(N=>({...N,[S]:""}))},E=async v=>{var S,w;if(v.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(C())try{const T=(await y.mutateAsync({invite:l,email:r.email,password:r.password,phoneNo:r.phoneNo,CTOName:r.CTOName})).data;j(Lt({role:T.role,isauthenticated:!0,_id:T._id})),j(Bc({CTOId:T._id,CTOName:T.CTOName,email:T.email,phoneNo:T.phoneNo,role:T.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful"}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){F({title:"Registration Failed",description:((w=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:w.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as CTO"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"CTOName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"CTOName",name:"CTOName",type:"text",value:r.CTOName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${h.CTOName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.CTOName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:r.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${h.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:r.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${h.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:d?"text":"password",value:r.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",value:r.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!p),children:e.jsx("i",{className:`fas ${p?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password===r.confirmPassword&&r.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/ctologin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function $0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),[r,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:p,openMobileSidebar:x}=Ge(),h=$1(),g=ws(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",m(b),Object.keys(b).length===0},j=b=>{const{name:E,value:v}=b.target;l(S=>({...S,[E]:v})),d[E]&&m(S=>({...S,[E]:""}))},C=async b=>{var E,v;if(b.preventDefault(),!!y())try{const w=(await h.mutateAsync(a)).data;g(Lt({role:w.role,isauthenticated:!0,_id:w.CTOId})),g(Bc({CTOId:w.CTOId,CTOName:w.CTOName,email:w.email,phoneNo:w.phoneNo,role:w.role,isauthenticated:!0})),F({title:"Success",description:"Login successful! Welcome back."}),t("/")}catch(S){F({title:"Login Failed",description:((v=(E=S==null?void 0:S.response)==null?void 0:E.data)==null?void 0:v.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:p&&e.jsx("button",{onClick:x,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Cheif Technical Officer Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:r?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!r),children:e.jsx("i",{className:`fas ${r?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:h.isPending,children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}function B0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),r=ws(),[o,d]=A.useState(!1),[m,p]=A.useState({}),{isMobile:x,openMobileSidebar:h}=Ge(),g=V1(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",p(b),Object.keys(b).length===0},j=b=>{const{name:E,value:v}=b.target;l(S=>({...S,[E]:v})),m[E]&&p(S=>({...S,[E]:""}))},C=async b=>{var E,v;if(b.preventDefault(),!!y())try{const w=(await g.mutateAsync(a)).data;r(Lt({role:w.role,isauthenticated:!0,_id:w.clientId})),r(Hc({clientId:w.clientId,clientName:w.clientName,email:w.email,phoneNo:w.phoneNo,role:w.role,isauthenticated:!0})),F({title:"Success",description:"Login successful! Welcome back."}),t("/organizations")}catch(S){F({title:"Login Failed",description:((v=(E=S==null?void 0:S.response)==null?void 0:E.data)==null?void 0:v.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:x&&e.jsx("button",{onClick:h,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Client Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your project Dashboard"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:o?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>d(!o),children:e.jsx("i",{className:`fas ${o?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your admin for an invitation"})]})})]})]})})]})}function YE(){const t=Me(),[a]=Oc(),l=a.get("invite"),r=ws(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",clientName:""}),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,y]=A.useState({}),j=W1();A.useEffect(()=>{l||(F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/organizations")},3e3))},[l,t]);const C=()=>{const v={};return o.clientName.trim()?o.clientName.trim().length<2&&(v.clientName="Name must be at least 2 characters"):v.clientName="Full name is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(v.email="Please enter a valid email address"):v.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(v.phoneNo="Please enter a valid phone number with 10 digits"):v.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(v.password="Password must be at least 6 characters"):v.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(v.confirmPassword="Passwords do not match"):v.confirmPassword="Please confirm your password",y(v),Object.keys(v).length===0},b=v=>{const{name:S,value:w}=v.target;d(N=>({...N,[S]:w})),g[S]&&y(N=>({...N,[S]:""}))},E=async v=>{var S,w;if(v.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(C())try{const T=(await j.mutateAsync({token:l,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,clientName:o.clientName}})).data;r(Lt({role:T.role,isauthenticated:!0,_id:T._id})),r(Hc({clientId:T._id,clientName:T.clientName,email:T.email,phoneNo:T.phoneNo,role:T.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){F({title:"Registration Failed",description:((w=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:w.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as Client"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"clientName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"clientName",name:"clientName",type:"text",value:o.clientName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${g.clientName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.clientName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:o.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:o.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:j.isPending,children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/clientlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}const WE=()=>{const{projectId:t,organizationId:a}=ke(),[l,r]=A.useState(""),[o,d]=A.useState(!1),{openMobileSidebar:m,isMobile:p}=Ge(),x=fE(),{data:h,isLoading:g,isError:y}=xE(a,t),j=async()=>{var v,S;try{const w=await x.mutateAsync({projectId:t,organizationId:a});r(w.inviteLink||w),F({title:"Success",description:"Invitation link generated successfully"})}catch(w){F({title:"Error",description:((S=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:S.message)||"Failed to generate invitation link",variant:"destructive"})}},C=async()=>{try{await navigator.clipboard.writeText(l),d(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>d(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},b=()=>{const v=`You're invited to join in the project! Click this link to register: ${l}`,S=`https://wa.me/?text=${encodeURIComponent(v)}`;window.open(S,"_blank")},E=v=>{var S,w;return(w=(S=v==null?void 0:v.split(" ").map(N=>N[0]))==null?void 0:S.join(""))==null?void 0:w.toUpperCase()};return e.jsxs("div",{className:"min-h-full min-w-full ",children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"max-w-full mx-auto",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[p&&e.jsx("button",{onClick:m,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block  w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Client"]})})})]})})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full ",children:[e.jsx("div",{className:"flex-1 border-l-4 border-blue-600  bg-white p-4 max-h-[45vh]  h-fit overflow-y-auto rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-2 flex items-center",children:"Generate Client"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite a client by generating a link."}),l?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:l,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:C,children:e.jsx("i",{className:`fas ${o?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:b,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:C,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(M,{onClick:j,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(M,{onClick:j,isLoading:x.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"flex-1 bg-white border-2 border-blue-200 p-6 rounded-2xl shadow-lg py-4 max-h-[70vh] sm:!max-h-[63vh] md:!max-h-[100vh]  lg:!max-h-[85vh] xl:!max-h-[90vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Clients (",(h==null?void 0:h.length)||0,")"]}),g?e.jsx("p",{className:"text-blue-700",children:"Loading clients..."}):y?e.jsx("p",{className:"text-red-600",children:"Failed to get clients."}):(h==null?void 0:h.length)===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No clients have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite them."})]}):e.jsx("div",{className:"space-y-4 h-[85%]",children:h==null?void 0:h.map(v=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Qc,{className:"w-12 h-12",children:e.jsx(Gc,{className:"bg-blue-600 text-white font-bold",children:E(v.clientName)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:v.clientName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"})," ",v.email]}),v.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"})," ",v.phoneNo]})]})]})},v._id))})]})]})]})},Je=({value:t,onValueChange:a,children:l})=>{const[r,o]=A.useState(!1),[d,m]=A.useState(t||""),p=A.useRef(null);A.useEffect(()=>{const h=g=>{p.current&&!p.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const x=h=>{m(h),a==null||a(h),o(!1)};return e.jsx("div",{ref:p,className:"relative",children:ct.Children.map(l,h=>{if(ct.isValidElement(h)){if(h.type===Xe)return ct.cloneElement(h,{isOpen:r,onClick:()=>o(!r),selectedValue:d});if(h.type===Ze)return ct.cloneElement(h,{isOpen:r,onValueChange:x})}return h})})},Xe=({className:t="",children:a,isOpen:l=!1,onClick:r})=>e.jsxs("button",{type:"button",className:`w-full px-3 py-2 border border-blue-200 rounded-xl bg-white text-left flex items-center justify-between focus:outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 ${t}`,onClick:r,children:[a,e.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),et=({placeholder:t="Select...",selectedValue:a})=>e.jsx("span",{className:"text-gray-900",children:a||t}),Ze=({className:t="",children:a,isOpen:l=!1,onValueChange:r})=>l?e.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-50 py-1 ${t}`,children:ct.Children.map(a,o=>ct.isValidElement(o)&&o.type===ye?ct.cloneElement(o,{onSelect:r}):o)}):null,ye=({value:t,children:a,onSelect:l})=>e.jsx("button",{type:"button",className:"w-full cursor-pointer text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700",onClick:()=>l==null?void 0:l(t),children:a}),XE=({formData:t,setFormData:a})=>{var d,m,p,x,h,g,y,j,C,b,E;const l=v=>{const S=v.target,{name:w,type:N,value:T}=S;let P=T;if(N==="checkbox")P=S.checked;else if(N==="number"){const L=parseFloat(T);P=isNaN(L)?0:Math.max(0,L)}["top","left","right"].includes(w)?a(L=>{var z;return{...L,kitchen:{...L.kitchen,measurements:{...(z=L.kitchen)==null?void 0:z.measurements,[w]:P}}}}):a(L=>({...L,kitchen:{...L.kitchen,[w]:P}}))},r=(v,S)=>{a(w=>({...w,kitchen:{...w.kitchen,[v]:S}}))},o=()=>{a(v=>({...v,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Kitchen Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Layout Type"}),e.jsxs(Je,{onValueChange:v=>r("layoutType",v),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select layout",selectedValue:((d=t==null?void 0:t.kitchen)==null?void 0:d.layoutType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Kitchen Package"}),e.jsxs(Je,{onValueChange:v=>r("kitchenPackage",v),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((m=t==null?void 0:t.kitchen)==null?void 0:m.kitchenPackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:(p=t==null?void 0:t.kitchen)==null?void 0:p.numberOfShelves,onChange:l,placeholder:"e.g., 3"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Top (ft)"}),e.jsx(ce,{type:"number",name:"top",value:((h=(x=t==null?void 0:t.kitchen)==null?void 0:x.measurements)==null?void 0:h.top)??0,onChange:l,placeholder:"Length Top"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Left (ft)"}),e.jsx(ce,{type:"number",name:"left",value:(y=(g=t==null?void 0:t.kitchen)==null?void 0:g.measurements)==null?void 0:y.left,onChange:l,placeholder:"Length Left"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Right (ft)"}),e.jsx(ce,{type:"number",name:"right",value:(C=(j=t==null?void 0:t.kitchen)==null?void 0:j.measurements)==null?void 0:C.right,onChange:l,placeholder:"Length right"})]}),e.jsxs("div",{className:"flex  items-center",children:[e.jsx("input",{id:"graniteCountertop",type:"checkbox",name:"graniteCountertop",checked:((b=t==null?void 0:t.kitchen)==null?void 0:b.graniteCountertop)||!1,onChange:l,className:"!w-[10%]"}),e.jsx(fe,{htmlFor:"graniteCountertop",children:"Granite Countertop?"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((E=t==null?void 0:t.kitchen)==null?void 0:E.notes)||"",onChange:l,placeholder:"Mention any additional kitchen preferences",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Kitchen Section"]})})]})},ZE=A.memo(XE),JE=({formData:t,setFormData:a})=>{const l=d=>{const{name:m,value:p,type:x}=d.target;let h=p;if(x==="number"){const g=parseFloat(p);h=isNaN(g)?0:Math.max(0,g)}a(g=>({...g,livingHall:{...g.livingHall,[m]:h}}))},r=(d,m)=>{a(p=>({...p,livingHall:{...p.livingHall,[d]:m}}))},o=()=>{a(d=>({...d,livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Living Hall Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Seating Style"}),e.jsxs(Je,{onValueChange:d=>r("seatingStyle",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select seating style",selectedValue:t.livingHall.seatingStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"TV Unit Design Required"}),e.jsxs(Je,{onValueChange:d=>r("tvUnitDesignRequired",d==="Yes"),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select option",selectedValue:t.livingHall.tvUnitDesignRequired===!0?"Yes":t.livingHall.tvUnitDesignRequired===!1?"No":""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"False Ceiling Required"}),e.jsxs(Je,{onValueChange:d=>r("falseCeilingRequired",d==="Yes"),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select option",selectedValue:t.livingHall.falseCeilingRequired===!0?"Yes":t.livingHall.falseCeilingRequired===!1?"No":""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wall Decor Style"}),e.jsxs(Je,{onValueChange:d=>r("wallDecorStyle",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wall decor",selectedValue:t.livingHall.wallDecorStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Fans"}),e.jsx(ce,{name:"numberOfFans",type:"number",value:t.livingHall.numberOfFans,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Lights"}),e.jsx(ce,{name:"numberOfLights",type:"number",value:t.livingHall.numberOfLights,onChange:l,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Living Hall Package"}),e.jsxs(Je,{onValueChange:d=>r("livingHallPackage",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:t.livingHall.livingHallPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(ce,{name:"notes",value:t.livingHall.notes||"",onChange:l,placeholder:"Any special preferences or notes"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset LivingHall Section"]})})]})},eA=({formData:t,setFormData:a})=>{var d,m,p,x,h,g,y,j;const l=C=>{const b=C.target,{name:E,type:v,value:S}=b;let w=S;if(v==="checkbox")w=b.checked;else if(v==="number"){const N=parseFloat(S);w=isNaN(N)?0:Math.max(0,N)}a(N=>({...N,bedroom:{...N.bedroom,[E]:w}}))},r=(C,b)=>{a(E=>({...E,bedroom:{...E.bedroom,[C]:b}}))},o=()=>{a(C=>({...C,bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Bedroom Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Bedrooms"}),e.jsx(ce,{type:"number",name:"numberOfBedrooms",value:(d=t==null?void 0:t.bedroom)==null?void 0:d.numberOfBedrooms,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bed Type"}),e.jsxs(Je,{onValueChange:C=>r("bedType",C),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select bed type",selectedValue:((m=t==null?void 0:t.bedroom)==null?void 0:m.bedType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",id:"wardrobeIncluded",checked:((p=t==null?void 0:t.bedroom)==null?void 0:p.wardrobeIncluded)||!1,onChange:l}),e.jsx(fe,{htmlFor:"wardrobeIncluded",children:"Wardrobe Included?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"falseCeilingRequired",type:"checkbox",name:"falseCeilingRequired",checked:((x=t==null?void 0:t.bedroom)==null?void 0:x.falseCeilingRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"falseCeilingRequired",children:"False Ceiling Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"tvUnitRequired",type:"checkbox",name:"tvUnitRequired",checked:((h=t==null?void 0:t.bedroom)==null?void 0:h.tvUnitRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"tvUnitRequired",children:"TV Unit Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",id:"studyTableRequired",checked:((g=t==null?void 0:t.bedroom)==null?void 0:g.studyTableRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"studyTableRequired",children:"Study Table Required?"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bedroom Package"}),e.jsxs(Je,{onValueChange:C=>r("bedroomPackage",C),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((y=t==null?void 0:t.bedroom)==null?void 0:y.bedroomPackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((j=t==null?void 0:t.bedroom)==null?void 0:j.notes)||"",onChange:l,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Bedroom Section"]})})]})},tA=A.memo(eA),sA=({formData:t,setFormData:a})=>{var d,m,p,x,h,g,y,j;const l=C=>{const{name:b,value:E,type:v}=C.target;let S=E;if(v==="checkbox")S=C.target.checked;else if(v==="number"){const w=parseFloat(E);S=isNaN(w)?0:Math.max(0,w)}a(w=>({...w,wardrobe:{...w.wardrobe,[b]:S}}))},r=(C,b)=>{a(E=>({...E,wardrobe:{...E.wardrobe,[C]:b}}))},o=()=>{a(C=>({...C,wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Wardrobe Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Type"}),e.jsxs(Je,{onValueChange:C=>r("wardrobeType",C),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select type",selectedValue:((d=t==null?void 0:t.wardrobe)==null?void 0:d.wardrobeType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Length (ft)"}),e.jsx(ce,{type:"number",name:"lengthInFeet",value:(m=t==null?void 0:t.wardrobe)==null?void 0:m.lengthInFeet,onChange:l,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Height (ft)"}),e.jsx(ce,{type:"number",name:"heightInFeet",value:(p=t==null?void 0:t.wardrobe)==null?void 0:p.heightInFeet,onChange:l,placeholder:"e.g., 8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"mirrorIncluded",type:"checkbox",name:"mirrorIncluded",checked:((x=t==null?void 0:t.wardrobe)==null?void 0:x.mirrorIncluded)||!1,onChange:l}),e.jsx(fe,{htmlFor:"mirrorIncluded",children:"Mirror Included?"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:(h=t==null?void 0:t.wardrobe)==null?void 0:h.numberOfShelves,onChange:l,placeholder:"e.g., 4"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Drawers"}),e.jsx(ce,{type:"number",name:"numberOfDrawers",value:(g=t==null?void 0:t.wardrobe)==null?void 0:g.numberOfDrawers,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Package"}),e.jsxs(Je,{onValueChange:C=>r("wardrobePackage",C),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((y=t==null?void 0:t.wardrobe)==null?void 0:y.wardrobePackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((j=t==null?void 0:t.wardrobe)==null?void 0:j.notes)||"",onChange:l,placeholder:"Mention any preferences or requirements",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Wardrobe Section"]})})]})},aA=A.memo(sA),nA=async({projectId:t,payload:a,token:l,api:r})=>{const{data:o}=await r.post(`/requirementform/createrequirement/${t}?token=${l}`,a);if(!o.ok)throw new Error(o.message);return o.data},lA=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/requirementform/getrequirementform/${t}`);if(!l.ok)throw new Error(l.message);return l.data},rA=async({projectId:t,api:a})=>{const{data:l}=await a.post(`/requirementform/formsharelink/${t}`);if(!l.ok)throw new Error(l.message);return l.data},iA=async({formId:t,projectId:a,api:l})=>{console.log("formId",t);const{data:r}=await l.patch(`/requirementform/formcompleted/${a}/${t}`);if(!r.ok)throw new Error(r.message);return r.data},oA=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.patch(`/requirementform/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},cA=async({formId:t,projectId:a,files:l,api:r})=>{console.log("getig iside 1");const o=new FormData;l.forEach(m=>o.append("file",m)),console.log("getig iside 1");const d=await r.post(`/requirementform/upload/multiple/${a}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}});return console.log("reposen",d),d.data},dA=async(t,a,l)=>{const{data:r}=await l.patch(`/requirementform/${t}/deleteuploadedfile/${a}`);if(!r.ok)throw new Error(r.message);return r.data},uA=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,fileId:o})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await dA(r,o,a)},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["requirementForm",o]})}})},mA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatekitchen`,{kitchen:l});if(!r.ok)throw new Error(r.message);return r.data},fA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatebedroom`,{bedroom:l});if(!r.ok)throw new Error(r.message);return r.data},hA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatewardrobe`,{wardrobe:l});if(!r.ok)throw new Error(r.message);return r.data},xA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatelivinghall`,{livingHall:l});if(!r.ok)throw new Error(r.message);return r.data},pA=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,payload:o,token:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await nA({projectId:r,payload:o,token:d,api:l})}})},gA=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:l}=X(),r=Z(l);return Fe({queryKey:["requirementForm"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await lA({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},bA=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await rA({projectId:r,api:l})}})},yA=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,projectId:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await iA({formId:r,projectId:o,api:l})}})},wA=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you dont have the access to make this api");if(!l)throw new Error("api is not available");return await oA({formId:r,deadLine:o,projectId:d,api:l})}})},vA=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await cA({formId:r,projectId:d,files:o,api:l})}})},jA=()=>{const t=["client","owner","staff"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await mA({projectId:r,api:l,updateData:o})}})},NA=()=>{const t=["client","owner","staff"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await fA({projectId:r,api:l,updateData:o})}})},SA=()=>{const t=["client","owner","staff"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await hA({projectId:r,api:l,updateData:o})}})},CA=()=>{const t=["client","owner","staff"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await xA({projectId:r,api:l,updateData:o})}})},kA=()=>{var S,w;const{token:t,projectId:a}=ke(),[l,r]=A.useState({clientData:{clientName:null,email:null,whatsapp:null,location:null},isEditable:!0,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null},livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null},bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null},wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null},additionalNotes:null}),[o,d]=A.useState({}),[m,p]=A.useState(0),{mutateAsync:x,isPending:h,isSuccess:g,isError:y,error:j}=pA(),C=N=>{let{name:T,value:P}=N.target;T==="whatsapp"&&(P=P.replace(/[^0-9]/g,"")),r(L=>({...L,clientData:{...L.clientData,[T]:P}}))},b=N=>{let T={};const{clientName:P,email:L,whatsapp:z}=N.clientData;return(!P||P.trim()==="")&&(T.clientName="Client name is required"),(!L||L.trim()==="")&&(T.email="Email is required"),!z||z.trim()===""?T.whatsapp="WhatsApp number is required":z.trim().length!==10&&(T.whatsapp="Number should be 10 digits long"),T},E=async()=>{var N,T;try{if(d({}),!a)return;const P=b(l);if(Object.keys(P).length){d(P);return}await x({projectId:a,payload:l,token:t}),F({title:"Success",description:"form data submitted successfully"})}catch(P){F({title:"Error",description:((T=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:T.message)||(P==null?void 0:P.message)||"Failed to generate invitation link",variant:"destructive"})}},v=[{label:"Kitchen",content:e.jsx(ZE,{formData:l,setFormData:r})},{label:"Living Hall",content:e.jsx(JE,{formData:l,setFormData:r})},{label:"Bedroom",content:e.jsx(tA,{formData:l,setFormData:r})},{label:"Wardrobe",content:e.jsx(aA,{formData:l,setFormData:r})},{label:"Client Info",content:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Client Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Client Name"}),e.jsx(ce,{name:"clientName",value:l.clientData.clientName??"",onChange:C,required:!0,error:o.clientName||""})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Email"}),e.jsx(ce,{type:"email",name:"email",value:l.clientData.email??"",onChange:C,required:!0,error:o.email||""})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"WhatsApp Number"}),e.jsx(ce,{name:"whatsapp",type:"text",inputMode:"numeric",pattern:"[0-9]{10}",value:l.clientData.whatsapp??"",onChange:C,required:!0,error:o.whatsapp||"",maxLength:10})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Location"}),e.jsx(ce,{name:"location",value:l.clientData.location??"",onChange:C})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"additionalNotes",value:l.additionalNotes||"",onChange:N=>r(T=>({...T,additionalNotes:N.target.value})),className:"w-full px-3 py-2 border rounded-xl focus:outline-none focus:ring focus:ring-blue-200",rows:4})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(M,{variant:"primary",size:"lg",onClick:E,isLoading:h,children:"Submit Requirement Form"})}),g&&e.jsx("p",{className:"text-green-600 mt-4",children:"Form submitted successfully!"}),y&&e.jsx("p",{className:"text-red-600 mt-4",children:((w=(S=j==null?void 0:j.response)==null?void 0:S.data)==null?void 0:w.message)||j.message||"Form Submission Failed"})]})}];return e.jsx("div",{className:"space-y-8  max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white to-blue-100 !p-6 h-full w-full",children:e.jsxs("div",{className:"max-w-5xl max-h-full mx-auto space-y-5",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-blue-800",children:"House Requirements Form"}),e.jsx("div",{className:"max-w-5xl  mx-auto",children:v[m].content}),e.jsxs("div",{className:`flex ${m>0?"justify-between":"justify-end"} mt-2`,children:[m>0&&e.jsx(M,{variant:"secondary",onClick:()=>p(N=>N-1),children:"Previous"}),m<v.length-1&&e.jsx(M,{variant:"primary",onClick:()=>p(N=>N+1),children:"Skip & Continue"})]})]})})},EA=({data:t,setVisibleSection:a})=>{var g,y,j;const{projectId:l}=ke(),[r,o]=A.useState({layoutType:(t==null?void 0:t.layoutType)||"L-shaped",measurements:(t==null?void 0:t.measurements)||{top:0,left:0,right:0},kitchenPackage:(t==null?void 0:t.kitchenPackage)||"Essentials",graniteCountertop:(t==null?void 0:t.graniteCountertop)||!1,numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=jA(),p=C=>{const b=C.target,{name:E,type:v,value:S}=b;let w=S;if(v==="checkbox")w=b.checked;else if(v==="number"){const N=parseFloat(S);w=isNaN(N)?0:Math.max(0,N)}["top","left","right"].includes(E)?o(N=>({...N,measurements:{...N==null?void 0:N.measurements,[E]:w}})):o(N=>({...N,[E]:w}))},x=(C,b)=>{o(E=>({...E,[C]:b}))},h=async()=>{var C,b;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"Kitchen data updated successfully"})}catch(E){F({title:"Error",description:((b=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:b.message)||(E==null?void 0:E.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Kitchen Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Layout Type"}),e.jsxs(Je,{onValueChange:C=>x("layoutType",C),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select layout",selectedValue:r.layoutType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Kitchen Package"}),e.jsxs(Je,{onValueChange:C=>x("kitchenPackage",C),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.kitchenPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"graniteCountertop",checked:r.graniteCountertop??void 0,onChange:p}),e.jsx(fe,{children:"Granite Countertop"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Top (in feet)"}),e.jsx(ce,{type:"number",name:"top",value:((g=r.measurements)==null?void 0:g.top)||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Left (in feet)"}),e.jsx(ce,{type:"number",name:"left",value:((y=r.measurements)==null?void 0:y.left)||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Right (in feet)"}),e.jsx(ce,{type:"number",name:"right",value:((j=r.measurements)==null?void 0:j.right)||"",onChange:p,min:0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Kitchen Requirements"})})]})},AA=({data:t,setVisibleSection:a})=>{const{projectId:l}=ke(),[r,o]=A.useState({seatingStyle:(t==null?void 0:t.seatingStyle)||"Sofa Set",tvUnitDesignRequired:(t==null?void 0:t.tvUnitDesignRequired)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,wallDecorStyle:(t==null?void 0:t.wallDecorStyle)||"Paint",numberOfFans:(t==null?void 0:t.numberOfFans)||0,numberOfLights:(t==null?void 0:t.numberOfLights)||0,livingHallPackage:(t==null?void 0:t.livingHallPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=CA(),p=g=>{const y=g.target,{name:j,type:C,value:b}=y;let E=b;if(C==="checkbox")E=y.checked;else if(C==="number"){const v=parseFloat(b);E=isNaN(v)?0:Math.max(0,v)}o(v=>({...v,[j]:E}))},x=(g,y)=>{o(j=>({...j,[g]:y}))},h=async()=>{var g,y;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"Living Hall data updated successfully"})}catch(j){F({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Living Hall Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Seating Style"}),e.jsxs(Je,{onValueChange:g=>x("seatingStyle",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select seating style",selectedValue:r.seatingStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wall Decor Style"}),e.jsxs(Je,{onValueChange:g=>x("wallDecorStyle",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wall decor",selectedValue:r.wallDecorStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Fans"}),e.jsx(ce,{type:"number",name:"numberOfFans",value:r.numberOfFans||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Lights"}),e.jsx(ce,{type:"number",name:"numberOfLights",value:r.numberOfLights||"",onChange:p,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitDesignRequired",checked:r.tvUnitDesignRequired||void 0,onChange:p}),e.jsx(fe,{children:"TV Unit Design Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired||void 0,onChange:p}),e.jsx(fe,{children:"False Ceiling Required"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>x("livingHallPackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.livingHallPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Living Hall Requirements"})})]})},OA=({data:t,setVisibleSection:a})=>{const{projectId:l}=ke(),[r,o]=A.useState({numberOfBedrooms:(t==null?void 0:t.numberOfBedrooms)||1,bedType:(t==null?void 0:t.bedType)||"Queen",wardrobeIncluded:(t==null?void 0:t.wardrobeIncluded)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,tvUnitRequired:(t==null?void 0:t.tvUnitRequired)||!1,studyTableRequired:(t==null?void 0:t.studyTableRequired)||!1,bedroomPackage:(t==null?void 0:t.bedroomPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=NA(),p=g=>{const y=g.target,{name:j,type:C,value:b}=y;let E=b;if(C==="checkbox")E=y.checked;else if(C==="number"){const v=parseFloat(b);E=isNaN(v)?0:Math.max(0,v)}o(v=>({...v,[j]:E}))},x=(g,y)=>{o(j=>({...j,[g]:y}))},h=async()=>{var g,y;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"bedroom data updated successfully"})}catch(j){F({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Bedroom Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Bedrooms"}),e.jsx(ce,{type:"number",name:"numberOfBedrooms",value:r.numberOfBedrooms??"",onChange:p,min:1})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bed Type"}),e.jsxs(Je,{onValueChange:g=>x("bedType",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select bed type",selectedValue:r.bedType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",checked:r.wardrobeIncluded??void 0,onChange:p}),e.jsx(fe,{children:"Wardrobe Included"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired??void 0,onChange:p}),e.jsx(fe,{children:"False Ceiling Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitRequired",checked:r.tvUnitRequired??void 0,onChange:p}),e.jsx(fe,{children:"TV Unit Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",checked:r.studyTableRequired??void 0,onChange:p}),e.jsx(fe,{children:"Study Table Required"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>x("bedroomPackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.bedroomPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Bedroom Requirements"})})]})},RA=({data:t,setVisibleSection:a})=>{const{projectId:l}=ke(),[r,o]=A.useState({wardrobeType:(t==null?void 0:t.wardrobeType)||"Sliding",lengthInFeet:(t==null?void 0:t.lengthInFeet)||0,heightInFeet:(t==null?void 0:t.heightInFeet)||0,mirrorIncluded:(t==null?void 0:t.mirrorIncluded)||!1,wardrobePackage:(t==null?void 0:t.wardrobePackage)||"Essentials",numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,numberOfDrawers:(t==null?void 0:t.numberOfDrawers)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=SA(),p=g=>{const y=g.target,{name:j,type:C,value:b}=y;let E=b;if(C==="checkbox")E=y.checked;else if(C==="number"){const v=parseFloat(b);E=isNaN(v)?0:Math.max(0,v)}o(v=>({...v,[j]:E}))},x=(g,y)=>{o(j=>({...j,[g]:y}))},h=async()=>{var g,y;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"Wardrobe data updated successfully"})}catch(j){F({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Wardrobe Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Type"}),e.jsxs(Je,{onValueChange:g=>x("wardrobeType",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wardrobe type",selectedValue:r.wardrobeType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Length (in feet)"}),e.jsx(ce,{type:"number",name:"lengthInFeet",value:r.lengthInFeet||0,onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Height (in feet)"}),e.jsx(ce,{type:"number",name:"heightInFeet",value:r.heightInFeet||0,onChange:p,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"mirrorIncluded",checked:r.mirrorIncluded??void 0,onChange:p}),e.jsx(fe,{children:"Mirror Included"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Drawers"}),e.jsx(ce,{type:"number",name:"numberOfDrawers",value:r.numberOfDrawers||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>x("wardrobePackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.wardrobePackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Wardrobe Requirements"})})]})},TA=async({stageName:t,projectId:a,api:l,startedAt:r})=>{const o=r?{startedAt:r}:{},{data:d}=await l.post(`/starttimer/start/${t}/${a}`,o);if(!d.ok)throw new Error(d.message);return d.data},PA=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({stageName:o,projectId:d,startedAt:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to start timer.");if(!l)throw new Error("API instance missing.");return await TA({stageName:o,projectId:d,api:l,startedAt:m})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["stage",d.stageName,d.projectId]})}})},Dm=t=>{const a=Math.floor(t/1e3),l=Math.floor(a/(3600*24)),r=Math.floor(a%(3600*24)/3600),o=Math.floor(a%3600/60),d=a%60;return`${l}d ${r}h ${o}m ${d}s`},ls=({startedAt:t,stageName:a,projectId:l,completedAt:r,deadLine:o,formId:d,deadLineMutate:m,isPending:p,refetchStageMutate:x})=>{const[h,g]=A.useState(new Date),[y,j]=A.useState(o?new Date(o).toISOString().split("T")[0]:""),[C,b]=A.useState(!1),[E,v]=A.useState(!1),[S,w]=A.useState(""),{mutateAsync:N,isPending:T}=PA();A.useEffect(()=>{const $=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval($)},[]);const P=t?new Date(t):null,L=r?new Date(r):null,z=o?new Date(o):null,q=()=>{if(!P)return"Not started yet";if(P&&L){const ee=L.getTime()-P.getTime();return`✅ Completed in: ${Dm(ee)}`}if(z){const ee=z.getTime()-h.getTime();return ee<=0?e.jsx("span",{className:"text-red-600 font-semibold",children:"⚠️ Deadline has reached"}):`⏳ Remaining: ${Dm(ee)}`}const $=h.getTime()-P.getTime();return`🕒 Running: ${Dm($)}`},B=$=>$?$.toLocaleString("en-IN",{timeZone:"Asia/Kolkata",dateStyle:"medium",timeStyle:"short"}):"Not Available",de=async()=>{var $,ee;try{if(!d||!y)return;const V=y.length===10?`${y}T00:00:00`:y,le=new Date(V);if(isNaN(le.getTime()))return F({title:"Invalid Date",description:"Please pick a valid date & time",variant:"destructive"});if(le<new Date)return F({title:"Invalid Date",description:"Deadline cannot be in the past",variant:"destructive"});await m({formId:d,projectId:l,deadLine:V}),x(),b(!1),F({title:"Success",description:"Deadline updated successfully"})}catch(V){F({title:"Error",description:((ee=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:ee.message)||"Failed to update deadline",variant:"destructive"})}},Q=async()=>{var $,ee;try{if(!S)return F({title:"Error",description:"Please pick a date"});const V=new Date(S);if(isNaN(V.getTime()))return F({title:"Invalid Date",description:"Please provide a valid date & time.",variant:"destructive"});if(V<new Date)return F({title:"Invalid Date",description:"The started time cannot be in the past.",variant:"destructive"});await N({projectId:l,stageName:a,startedAt:V.toISOString()}),await x(),F({title:"Success",description:"Started time updated"}),v(!1)}catch(V){F({title:"Error",description:((ee=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:ee.message)||(V==null?void 0:V.message)||"Failed to update started time",variant:"destructive"})}};return e.jsxs("div",{className:"text-sm w-full text-blue-900 space-y-3",children:[e.jsxs("div",{className:"flex w-full justify-between flex-wrap gap-x-6 gap-y-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-play text-blue-500"}),e.jsx("strong",{children:"Started On:"})," ",B(P),!E&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-flag-checkered text-green-500"}),e.jsx("strong",{children:"Completed On:"})," ",B(L)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar text-purple-600"}),e.jsx("strong",{children:"Deadline:"})," ",B(z),!C&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>b(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]})]}),e.jsx("div",{className:"font-semibold text-blue-700",children:q()}),E&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(ce,{type:"datetime-local",value:S,min:new Date().toISOString().slice(0,16),onChange:$=>w($.target.value),className:"max-w-xs"}),e.jsx(M,{onClick:Q,isLoading:T,variant:"primary",children:"Update StartedAt"}),e.jsx(M,{onClick:()=>v(!1),variant:"ghost",children:"Cancel"})]}),C&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(ce,{type:"datetime-local",value:y,min:new Date().toISOString().slice(0,16),onChange:$=>j($.target.value),className:"max-w-xs"}),e.jsx(M,{onClick:de,isLoading:p,className:"bg-blue-600 text-white",children:"Update Deadline"}),e.jsx(M,{onClick:()=>b(!1),variant:"ghost",children:"Cancel"})]})]})},Vt=async({src:t,alt:a})=>{var l,r;try{console.log("im donwloadin");const o=t.split(".com/")[1],{data:d}=await Qe.get(`http://localhost:3000/api/download-url?key=${encodeURIComponent(o)}&filename=${encodeURIComponent(a)}`),m=document.createElement("a");m.href=d.url,m.download="",document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(o){F({title:"Error",description:((r=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:r.message)||"failed to download"})}},Gy=({formId:t,projectId:a,refetch:l,existingUploads:r=[],onUploadComplete:o,uploadFilesMutate:d,uploadPending:m,onDeleteUpload:p,deleteFilePending:x})=>{const[h,g]=A.useState([]),[y,j]=A.useState(null),C=w=>{w.target.files&&g(Array.from(w.target.files))},b=async()=>{var w,N;if(!(!t||h.length===0))try{await d({formId:t,files:h,projectId:a}),F({title:"Success",description:"Files uploaded successfully."}),g([]),o==null||o()}catch(T){F({title:"Upload Failed",description:((N=(w=T==null?void 0:T.response)==null?void 0:w.data)==null?void 0:N.message)||"Try again later.",variant:"destructive"})}},E=async w=>{var N,T;try{await(p==null?void 0:p({fileId:w,projectId:a})),F({title:"Success",description:"Files Deleted successfully."}),l()}catch(P){F({title:"Upload Failed",description:((T=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:T.message)||"Try again later.",variant:"destructive"})}},v=r.filter(w=>w.type==="pdf"),S=r.filter(w=>w.type==="image");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(ce,{type:"file",multiple:!0,onChange:C,accept:"image/jpeg,image/png,application/pdf"}),e.jsx(M,{onClick:b,isLoading:m,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📄 PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px]  rounded-lg  border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto ",children:[v.length===0&&e.jsx("div",{className:"min-h-[145px]   flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),v==null?void 0:v.map((w,N)=>e.jsxs("li",{className:"flex justify-between items-center  bg-blue-50 p-2 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:w.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(M,{onClick:()=>Vt({src:w==null?void 0:w.url,alt:(w==null?void 0:w.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:x,onClick:()=>E(w==null?void 0:w._id),className:"text-green-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]}),e.jsxs("div",{className:"overflow-y-auto",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🖼️ Image Files"}),e.jsxs("ul",{className:"space-y-2  max-h-[180px] rounded-lg border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto custom-scrollbar",children:[S.length===0&&e.jsx("div",{className:"min-h-[145px]  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),S.map((w,N)=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 sm:p-2 p-1 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:w.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>j(w==null?void 0:w.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",onClick:()=>Vt({src:w.url,alt:w.originalName||"file.pdf"}),className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:x,onClick:()=>E(w==null?void 0:w._id),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]})]}),y&&e.jsx("div",{onClick:()=>j(null),className:"fixed inset-0 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:w=>w.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>j(null)}),e.jsx("img",{src:y,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},MA=async({projectId:t,stageNumber:a,stagePath:l,api:r})=>{const{data:o}=await r.put(`/stage${a}/${l}/${t}`);if(!o.ok)throw new Error(o.message);return o},LA=()=>{const{role:t}=X(),a=Z(t),l=["staff","owner","CTO"];return ie({mutationFn:async({projectId:r,stageNumber:o,stagePath:d})=>{if(!t||!l.includes(t))throw new Error("You are not authorized to reset this stage.");if(!a)throw new Error("API instance not available.");return await MA({projectId:r,stageNumber:o,stagePath:d,api:a})}})},vs=({projectId:t,stageNumber:a,stagePath:l,buttonClass:r="bg-red-600 text-white",iconClass:o="fas fa-rotate-left",disabled:d=!1,className:m=""})=>{const{mutateAsync:p,isPending:x}=LA(),h=async()=>{var g,y;try{await p({projectId:t,stageNumber:a,stagePath:l}),F({description:"Stage Reset successfully",title:"Success"})}catch(j){F({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||"Failed to Reset the stage",variant:"destructive"})}};return e.jsx("div",{className:`space-y-1 w-full ${m}`,children:e.jsxs(M,{onClick:h,variant:"danger",disabled:x||d,className:`${r} flex items-center gap-2 !p-2 w-full`,children:[e.jsx("i",{className:o}),e.jsx("span",{children:x?"Resetting...":"Reset Stage"})]})})},jt=()=>{const t=Array.from({length:13});return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(_e,{className:"h-8 w-40 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map((a,l)=>e.jsxs("div",{className:"bg-white p-4 shadow rounded-lg",children:[e.jsx(_e,{className:"h-6 w-32 mb-2"}),e.jsx(_e,{className:"h-4 w-24 mb-4"}),e.jsx(_e,{className:"h-4 w-16"})]},l))})]})},FA=({client:t})=>e.jsxs(Le,{className:"p-4 bg-white shadow border-l-4 border-blue-500",children:[e.jsxs("h2",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-user-tie mr-2"})," Client Info"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(Zo,{label:"Name",value:t==null?void 0:t.clientName,icon:"fa-user"}),e.jsx(Zo,{label:"Email",value:t==null?void 0:t.email,icon:"fa-envelope"}),e.jsx(Zo,{label:"WhatsApp",value:t==null?void 0:t.whatsapp,icon:"fa-phone"}),e.jsx(Zo,{label:"Location",value:t==null?void 0:t.location,icon:"fa-location-dot"})]})]}),Zo=({label:t,value:a,icon:l})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${l} text-gray-600`}),e.jsxs("strong",{children:[t,":"]})," ",a||"No data"]}),DA=A.memo(FA),_A=({sections:t,setVisibleSection:a})=>e.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(({key:l,label:r,icon:o})=>e.jsx("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer group",onClick:()=>a(l),children:e.jsxs("div",{className:"flex items-center justify-between p-5 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-3 rounded-full text-xl",children:e.jsx("i",{className:o})}),e.jsx("span",{className:"text-sm font-medium text-gray-800 group-hover:text-blue-700",children:r})]}),e.jsx("i",{className:"fa-solid fa-chevron-right text-blue-400 group-hover:text-blue-600"})]})},l))}),qA=ct.memo(_A),zA=async(t,a,l,r)=>(console.log("staffId",a),(await r.put(`/assignstafftostage/${t}/${a}/${l}`)).data),UA=()=>{const{role:t}=X(),a=Z(t),l=["owner","CTO","staff"];return ie({mutationFn:async({projectId:r,staffId:o,stageName:d})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("Not allowed to Access this api");if(!a)throw new Error("API not found");return zA(r,o,d,a)}})};function rs({stageName:t,projectId:a,organizationId:l,currentAssignedStaff:r,className:o=""}){const[d,m]=A.useState(!1),[p,x]=A.useState(r),{data:h,isLoading:g}=di(l,"staff"),{mutateAsync:y}=UA(),j=h,C=async b=>{var E,v;try{await y({projectId:a,staffId:b._id,stageName:t}),x(b),F({title:"Success",description:`${b.staffName} assigned to ${t}`}),m(!1)}catch(S){F({title:"Error",description:((v=(E=S==null?void 0:S.response)==null?void 0:E.data)==null?void 0:v.message)||(S==null?void 0:S.message)||"Failed to assign staff",variant:"destructive"})}};return e.jsxs("div",{className:`relative inline-flex items-center px-2 py-2 sm:py-1 rounded-lg text-sm shadow-sm border-[#92abc4] sm:border-none ${o} `,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-700 whitespace-nowrap",children:[e.jsx("span",{className:"font-medium hidden sm:inline text-blue-800",children:"Staff:"})," ",e.jsx("span",{className:"font-medium inline sm:hidden text-blue-800",children:"Staff Member:"})," ",p?e.jsx("span",{className:"text-gray-800 font-semibold",children:p==null?void 0:p.staffName}):e.jsx("span",{className:"text-gray-400 text-[12px]  italic",children:"Not Assigned"})]}),e.jsx(M,{size:"sm",variant:"ghost",className:"text-blue-600 hover:bg-blue-50 px-2 py-1 text-xs",onClick:()=>m(!d),children:d?e.jsx("i",{className:"fas fa-xmark text-red-600"}):e.jsx("i",{className:"fas fa-pencil text-blue-600"})})]}),d&&e.jsx("div",{className:"absolute z-10 top-full left-[0%] sm:left-[-20%] mt-2 w-[200px] bg-white border border-blue-200 rounded-md shadow-lg max-h-48 overflow-auto text-sm",children:g?e.jsx("div",{className:"p-3 text-gray-500 text-center",children:"Loading..."}):j.length===0?e.jsx("div",{className:"p-3 text-gray-400 text-center",children:"No staff available"}):e.jsx("ul",{className:"divide-y divide-blue-100 max-h-40 overflow-y-auto custom-scrollbar",children:j==null?void 0:j.map(b=>e.jsxs("li",{onClick:()=>C(b),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",children:[e.jsx("span",{className:"font-medium text-blue-700 block truncate",children:(b==null?void 0:b.staffName)||(b==null?void 0:b.name)}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:b==null?void 0:b.email})]},b==null?void 0:b._id))})})]})}const H0=[{Component:OA,icon:"fa-solid fa-bed",label:"Bedroom Section",key:"bedroom"},{Component:EA,icon:"fa-solid fa-kitchen-set",label:"Kitchen Section",key:"kitchen"},{Component:AA,icon:"fa-solid fa-house",label:"Living Hall Section",key:"livingHall"},{Component:RA,icon:"fa-solid fa-shirt",label:"Wardrobe Section",key:"wardrobe"}];function IA(){var V,le,_,W,me;const{projectId:t,organizationId:a}=ke(),{role:l}=X(),{isMobile:r,openMobileSidebar:o}=Ge(),[d,m]=A.useState(""),[p,x]=A.useState(!1),[h,g]=A.useState(null),{data:y,isLoading:j,error:C,refetch:b}=gA({projectId:t}),{mutateAsync:E,isPending:v}=bA(),{mutateAsync:S,isPending:w}=yA(),{mutateAsync:N,isPending:T}=wA(),{mutateAsync:P,isPending:L}=vA(),{mutateAsync:z,isPending:q}=uA();if(j)return e.jsx(jt,{});const B=async()=>{var te,O;if(window.confirm("Are you sure want to mark it as completed?"))try{w||(await S({formId:y._id,projectId:t}),F({title:"Success",description:"completion updated successfully"}))}catch(U){F({title:"Error",description:((O=(te=U==null?void 0:U.response)==null?void 0:te.data)==null?void 0:O.message)||"Failed to update to complete the form",variant:"destructive"})}},de=async te=>{try{const O=["owner","staff","CTO"];if(!l)throw new Error("Not Authorized");if(!O.includes(l))throw new Error("Dont have the access");await navigator.clipboard.writeText(te),x(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),4e3)}catch(O){F({title:"Error",description:O.message||"Failed to copy link",variant:"destructive"})}},Q=async()=>{var te,O;try{const U=await E({projectId:t});m(U.inviteLink||U),F({title:"Success",description:"Invitation link generated successfully"})}catch(U){F({title:"Error",description:((O=(te=U==null?void 0:U.response)==null?void 0:te.data)==null?void 0:O.message)||U.message||"Failed to generate invitation link",variant:"destructive"})}},$=async()=>{try{await navigator.clipboard.writeText(d),x(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},ee=()=>{const te=`You're requeted to fill the form, Click this link to fill the form: ${d}`,O=`https://wa.me/?text=${encodeURIComponent(te)}`;window.open(O,"_blank")};return e.jsx("div",{className:"h-full w-full overflow-y-auto ",children:h?e.jsx("div",{className:"min-h-screen",children:H0.map(({Component:te,key:O})=>h===O&&e.jsx("div",{className:"pt-6",children:e.jsx(te,{data:y==null?void 0:y[O],isEditable:y==null?void 0:y.isEditable,setVisibleSection:g})},O))}):e.jsxs("div",{className:"h-full w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col w-full sm:flex-row justify-between sm:items-center items-start gap-4",children:[e.jsx("div",{className:"",children:e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})," ",e.jsx("i",{className:"fa-solid fa-pencil mr-2"})," Client Requirement"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-end lg:justify-end",children:[e.jsxs(M,{isLoading:w,onClick:B,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(vs,{projectId:t,stageNumber:1,stagePath:"requirementform",className:"sm:!max-w-[20%] w-full"}),e.jsx(rs,{stageName:"RequirementFormModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),C&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((le=(V=C==null?void 0:C.response)==null?void 0:V.data)==null?void 0:le.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>b(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!C&&e.jsxs("main",{className:"h-[calc(100vh-90px)] overflow-y-auto custom-scrollbar space-y-6",children:[e.jsxs(Le,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{startedAt:(_=y==null?void 0:y.timer)==null?void 0:_.startedAt,projectId:t,stageName:"requirementform",refetchStageMutate:b,completedAt:(W=y==null?void 0:y.timer)==null?void 0:W.completedAt,deadLine:(me=y==null?void 0:y.timer)==null?void 0:me.deadLine,formId:y==null?void 0:y._id,deadLineMutate:N,isPending:T})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(DA,{client:y==null?void 0:y.clientData}),e.jsx(Le,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(Gy,{formId:y==null?void 0:y._id,existingUploads:y==null?void 0:y.uploads,onUploadComplete:b,uploadFilesMutate:P,uploadPending:L,projectId:t,refetch:b,onDeleteUpload:z,deleteFilePending:q})})]}),e.jsx(qA,{sections:H0,setVisibleSection:g}),e.jsx("div",{className:"pb-6",children:y!=null&&y.shareToken?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(ce,{value:y==null?void 0:y.shareToken,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:()=>de(y==null?void 0:y.shareToken),className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${p?"fa-check":"fa-copy"}`})})]})]}):e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-lg space-y-4",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-blue-900 flex items-center",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request to fill the form by generating a link."}),d?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(ce,{value:d,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:$,className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${p?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(M,{onClick:ee,className:"w-full sm:w-auto bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:$,className:"w-full sm:w-auto border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]})]}):e.jsxs(M,{onClick:Q,isLoading:v,className:"w-full bg-blue-600 text-white py-2.5 sm:py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]})]})})]})]})})}const $A=async({projectId:t,siteDetails:a,api:l})=>{const{data:r}=await l.post(`/sitemeasurement/createmeasurement/${t}`,{siteDetails:a});if(!r.ok)throw new Error(r.message);return r.data},BA=async({projectId:t,room:a,api:l})=>{const{data:r}=await l.post(`/sitemeasurement/createroom/${t}`,{room:a});if(!r.ok)throw new Error(r.message);return r.data},HA=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/sitemeasurement/getmeasurement/${t}`);if(!l.ok)throw new Error(l.message);return l.data},QA=async({projectId:t,api:a,payload:l})=>{const{data:r}=await a.put(`/sitemeasurement/updatecommonmeasurement/${t}`,l);if(!r.ok)throw new Error(r.message);return r.data},GA=async({projectId:t,api:a,roomId:l,room:r})=>{const{data:o}=await a.put(`/sitemeasurement/updateroommeasurement/${t}/${l}`,{room:r});if(!o.ok)throw new Error(o.message);return o.data},KA=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sitemeasurement/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},VA=async({projectId:t,roomId:a,api:l})=>{const{data:r}=await l.patch(`/sitemeasurement/deleteroom/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},YA=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sitemeasurement/deletesitemeasurement/${t}`);if(!l.ok)throw new Error(l.message);return l.data},WA=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/sitemeasurement/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},XA=async({formId:t,files:a,api:l,projectId:r})=>{const o=new FormData;a.forEach(m=>o.append("file",m));for(let[m,p]of o.entries())console.log(m,p);const d=await l.post(`/sitemeasurement/upload/multiple/${r}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}});return console.log("reposen",d),d.data},ZA=async(t,a,l)=>{const{data:r}=await l.patch(`/sitemeasurement/${t}/deleteuploadedfile/${a}`);if(!r.ok)throw new Error(r.message);return r.data},JA=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO","client"];return ie({mutationFn:async({projectId:r,fileId:o})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await ZA(r,o,a)},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["siteMeasurement",o]})}})},e4=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:l}=X(),r=Z(l);return Fe({queryKey:["siteMeasurement"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await HA({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},t4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,siteDetails:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await $A({projectId:r,api:l,siteDetails:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},s4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,room:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await BA({projectId:r,api:l,room:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},a4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,payload:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await QA({projectId:r,api:l,payload:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},n4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,roomId:o,room:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await GA({projectId:r,api:l,roomId:o,room:d})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},l4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await KA({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},r4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await VA({projectId:r,api:l,roomId:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},i4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await YA({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},o4=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await WA({formId:r,deadLine:d,projectId:o,api:l})}})},c4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await XA({formId:r,files:o,projectId:d,api:l})}})},d4=({room:t,onEdit:a,onDelete:l,deleteRoomLoading:r})=>{const o=t.length&&t.breadth?(t.length*t.breadth).toFixed(2):null;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:t.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(t),className:"text-blue-600 hover:text-blue-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(M,{isLoading:r,onClick:l,variant:"ghost",className:"!text-red-600 hover:text-red-800 bg-white shadow-none hover:!bg-none",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Length"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.length," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Breadth"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.breadth," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Height"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.height||"N/A"," ft"]})]})]}),o&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-blue-700 font-medium text-center",children:["Total Area: ",o," sq.ft"]})})]})},u4=({measurementData:t,handleDeleteSiteMeasurement:a,deleteRoomLoading:l,setShowSiteForm:r,setShowRoomForm:o,handleEditRoom:d,handleDeleteRoom:m})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Site Measurements"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(!0),className:"px-2 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit"}),e.jsx("button",{onClick:()=>a(),className:"px-2 sm:px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Plot Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.totalPlotAreaSqFt!==null?`${t.siteDetails.totalPlotAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Built-up Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.builtUpAreaSqFt!=null?`${t.siteDetails.builtUpAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Road Facing"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.roadFacing===!0?"YES":t.siteDetails.roadFacing===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Number of Floors"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.numberOfFloors!=null?t.siteDetails.numberOfFloors:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is having Slope"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.hasSlope===!0?"YES":t.siteDetails.hasSlope===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is Boundary Wall exists"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.boundaryWallExists===!0?"YES":t.siteDetails.boundaryWallExists===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Additional Notes"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.additionalNotes?t.siteDetails.additionalNotes:"Not mentioned"})]})]})]}),t.siteDetails.totalPlotAreaSqFt!==null&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Rooms"}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Add Room"})]}),t.rooms.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("p",{className:"text-gray-500",children:"No rooms added yet"})]}):e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.rooms.map((p,x)=>e.jsx(d4,{room:p,onEdit:()=>d(p),onDelete:()=>m(p._id),deleteRoomLoading:l},x))})]})]}),m4=A.memo(u4),f4=({roomDetails:t,setRoomDetails:a,handleRoomSubmit:l,setShowRoomForm:r,updateRoomLoading:o,createRoomLoading:d,editingRoomId:m})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:m?"Edit Room":"Add New Room"}),e.jsxs("select",{value:t.name||"",onChange:p=>a(x=>({...x,name:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",children:[e.jsx("option",{value:"",children:"Select Room Type"}),_2.map(p=>e.jsx("option",{value:p,children:p}))]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Length (ft)"}),e.jsx("input",{type:"number",placeholder:"Length (ft)",value:t.length||0,onChange:p=>a({...t,length:Number(p.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Breadth (ft)"}),e.jsx("input",{type:"number",placeholder:"Breadth (ft)",value:t.breadth||0,onChange:p=>a({...t,breadth:Number(p.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Height (ft)"}),e.jsx("input",{type:"number",placeholder:"Height (ft)",value:t.height||0,onChange:p=>a({...t,height:Number(p.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.length&&t.breadth&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-blue-700 font-medium",children:["Calculated Area: ",(Number(t.length)*Number(t.breadth)).toFixed(2)," sq.ft"]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(M,{isLoading:m?o:d,onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Edit Room":"Add Room"})]})]})}),h4=({siteDetails:t,updatePending:a,setSiteDetails:l,handleSiteSubmit:r,setShowSiteForm:o})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Site Measurements"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Total Plot Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Total Plot Area (sq.ft)",value:t.totalPlotAreaSqFt||0,onChange:d=>l({...t,totalPlotAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Built-up Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Built-up Area (sq.ft)",value:t.builtUpAreaSqFt||0,onChange:d=>l({...t,builtUpAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Number of Floors"}),e.jsx("input",{type:"number",placeholder:"Number of Floors",value:t.numberOfFloors||0,onChange:d=>l({...t,numberOfFloors:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.hasSlope??!1,onChange:d=>l({...t,hasSlope:d.target.checked}),className:"mr-2"}),"Has Slope"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.roadFacing??!1,onChange:d=>l({...t,roadFacing:d.target.checked}),className:"mr-2"}),"Road Facing"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.boundaryWallExists??!1,onChange:d=>l({...t,boundaryWallExists:d.target.checked}),className:"mr-2"}),"Boundary Wall Exists"]})]}),e.jsx("textarea",{placeholder:"Additional Notes",value:t.additionalNotes||"",onChange:d=>l({...t,additionalNotes:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",rows:4}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(M,{variant:"secondary",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(M,{variant:"primary",onClick:r,isLoading:a,children:"Save Details"})]})]})}),x4=A.memo(h4),p4={totalPlotAreaSqFt:null,builtUpAreaSqFt:null,roadFacing:null,numberOfFloors:null,hasSlope:!1,boundaryWallExists:!1,additionalNotes:null},Q0={name:null,length:null,breadth:null,height:null};function g4(){var U,D,K,Y,ge;const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge();if(!t)return;const[o,d]=A.useState(!1),[m,p]=A.useState(!1),[x,h]=A.useState(p4),[g,y]=A.useState(Q0),[j,C]=A.useState(null);let{data:b,isLoading:E,refetch:v,error:S}=e4({projectId:t});const w=t4(),N=s4(),T=a4(),P=n4(),L=r4(),z=i4(),q=l4(),{mutateAsync:B,isPending:de}=o4(),{mutateAsync:Q,isPending:$}=c4(),{mutateAsync:ee,isPending:V}=JA(),le=async()=>{var ae,Ne;try{b?await T.mutateAsync({projectId:t,payload:x}):await w.mutateAsync({projectId:t,siteDetails:x}),d(!1),F({description:"Site details updated successfully",title:"Success"})}catch(be){F({title:"Error",description:((Ne=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Ne.message)||be.message||"Failed to save site details",variant:"destructive"})}},_=async()=>{var ae,Ne;try{if(!g.name)throw new Error("please select the name");const be=g.length&&g.breadth?(Number(g.length)*Number(g.breadth)).toFixed(2):null,Ve={...g,area:be};j?await P.mutateAsync({projectId:t,roomId:j,room:Ve}):await N.mutateAsync({projectId:t,room:Ve}),p(!1),C(null),y(Q0),F({description:j?"Room updated":"Room added",title:"Success"})}catch(be){F({title:"Error",description:((Ne=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Operation failed",variant:"destructive"})}},W=async ae=>{var Ne,be;try{await L.mutateAsync({projectId:t,roomId:ae}),F({description:"Room deleted",title:"Success"})}catch(Ve){F({title:"Error",description:((be=(Ne=Ve==null?void 0:Ve.response)==null?void 0:Ne.data)==null?void 0:be.message)||"Delete failed",variant:"destructive"})}},me=async()=>{var ae,Ne;try{await z.mutateAsync({projectId:t}),F({description:"Site measurement deleted",title:"Success"})}catch(be){F({title:"Error",description:((Ne=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Ne.message)||"Delete failed",variant:"destructive"})}},te=async()=>{var ae,Ne;try{await q.mutateAsync({projectId:t}),F({description:"Completion updated",title:"Success"})}catch(be){F({title:"Error",description:((Ne=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Ne.message)||"Update failed",variant:"destructive"})}},O=ae=>{y(ae),C(ae==null?void 0:ae._id),p(!0)};return E?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-2 max-w-full h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"})," Site Measurement"]}),e.jsx("p",{className:"text-gray-600 hidden sm:block text-sm sm:text-base",children:"Plan your dream home"})]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-start lg:justify-end",children:[e.jsxs(M,{isLoading:q.isPending,onClick:te,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2  w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"})," Mark Complete"]}),e.jsx(vs,{projectId:t,stageNumber:2,stagePath:"sitemeasurement",className:"sm:!max-w-[20%] w-full"}),e.jsx(rs,{stageName:"SiteMeasurementModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),S&&e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((D=(U=S==null?void 0:S.response)==null?void 0:U.data)==null?void 0:D.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>v(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!S&&e.jsxs(Le,{className:"p-4 mb-4 shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(K=b==null?void 0:b.timer)==null?void 0:K.compltedAt,stageName:"sitemeasurement",formId:b==null?void 0:b._id,projectId:t,deadLine:(Y=b==null?void 0:b.timer)==null?void 0:Y.deadLine,startedAt:(ge=b==null?void 0:b.timer)==null?void 0:ge.startedAt,refetchStageMutate:v,deadLineMutate:B,isPending:de})]}),!S&&e.jsx("div",{className:"mb-6",children:e.jsx(Le,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(Gy,{formId:b==null?void 0:b._id,refetch:v,existingUploads:b==null?void 0:b.uploads,onUploadComplete:v,uploadFilesMutate:Q,uploadPending:$,projectId:t,onDeleteUpload:ee,deleteFilePending:V})})}),!S&&e.jsxs(e.Fragment,{children:[!Object.values((b==null?void 0:b.siteDetails)||{}).some(ae=>ae!==null)&&!o?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No Site Details Added"}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add Site Details"})]}):e.jsx(m4,{measurementData:b,handleDeleteSiteMeasurement:me,setShowSiteForm:d,setShowRoomForm:p,handleEditRoom:O,handleDeleteRoom:W,deleteRoomLoading:L.isPending}),o&&e.jsx(x4,{siteDetails:x,setSiteDetails:h,handleSiteSubmit:le,setShowSiteForm:d,updatePending:T.isPending}),m&&e.jsx(f4,{handleRoomSubmit:_,setShowRoomForm:p,roomDetails:g,setRoomDetails:y,updateRoomLoading:P.isPending,createRoomLoading:N.isPending,editingRoomId:j})]})]})}const b4=async({projectId:t,roomName:a,api:l})=>{const{data:r}=await l.post(`/sampledesign/${t}/rooms`,{roomName:a});if(!r.ok)throw new Error(r.message);return r.data},y4=async({projectId:t,roomName:a,files:l,api:r})=>{const o=new FormData;l.forEach(m=>o.append("files",m));const{data:d}=await r.post(`/sampledesign/${t}/rooms/${a}/upload`,o,{headers:{"Content-Type":"multipart/form-data"}});if(!d.ok)throw new Error(d.message);return d.data},w4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/sampledesign/${t}/rooms`);if(!l.ok)throw new Error(l.message);return l.data},v4=async({projectId:t,roomName:a,fileIndex:l,api:r})=>{const{data:o}=await r.delete(`/sampledesign/${t}/rooms/${a}/delete/${l}`);if(!o.ok)throw new Error(o.message);return o.data},j4=async({projectId:t,api:a,roomId:l})=>{const{data:r}=await a.delete(`/sampledesign/${t}/${l}/deleteroom`);if(!r.ok)throw new Error(r.message);return r.data},N4=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sampledesign/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},S4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/sampledesign/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},C4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,roomName:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await b4({projectId:r,roomName:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","rooms"]})}})},k4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,roomName:o,files:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await y4({projectId:r,roomName:o,files:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},E4=t=>{const a=["owner","staff","CTO","client"],{role:l}=X(),r=Z(l);return Fe({queryKey:["sampledesign","roomfiles",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await w4({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},A4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,roomName:o,fileIndex:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await v4({projectId:r,roomName:o,fileIndex:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},O4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await j4({projectId:r,roomId:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},R4=()=>{const t=["owner","staff","CTO","client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await N4({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},T4=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await S4({formId:r,projectId:o,deadLine:d,api:l})}})},P4=({isOpen:t,onClose:a,onSubmit:l,addPending:r})=>{const[o,d]=A.useState(""),m=async p=>{p.preventDefault(),await l(o),d(""),a()};return t?e.jsx("div",{onClick:a,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{onClick:p=>p.stopPropagation(),className:"bg-white rounded-lg p-6 w-[80%] sm:w-[60%] lg:w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4",children:"Add New Room"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Room Name"}),e.jsx("input",{type:"text",value:o,onChange:p=>d(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx(M,{isLoading:r,type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Room"})]})]})]})}):null},M4=({files:t,onUpload:a,onDelete:l,uploadPending:r,deletePending:o})=>{const d=A.useRef(null),[m,p]=A.useState([]),x=t.filter(b=>b.type==="pdf"),h=t.filter(b=>b.type==="image"),[g,y]=A.useState(null),j=b=>{var E;(E=b.target.files)!=null&&E.length&&p(Array.from(b.target.files))},C=async()=>{var b,E;if(m.length!==0)try{await a(m),F({description:"File uploaded successfully",title:"Success"})}catch(v){F({title:"Error",description:((E=(b=v==null?void 0:v.response)==null?void 0:b.data)==null?void 0:E.message)||v.message||" Failed to upload the files",variant:"destructive"})}};return e.jsxs("div",{className:"bg-white h-auto rounded-lg p-2 sm:p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs("div",{className:"w-full space-x-2",children:[e.jsx("input",{id:"fileInput",ref:d,type:"file",accept:".pdf,image/*",multiple:!0,className:"mb-1 sm:mb-0 w-[55%] sm:w-[80%] h-full py-2 border-1 px-2 rounded-lg",onChange:j}),e.jsxs(M,{variant:"primary",onClick:()=>{var b;return(b=d.current)==null?void 0:b.click()},className:"",children:[e.jsx("span",{className:"hidden sm:block",children:" Select Files"}),e.jsx("span",{className:"block sm:hidden",children:" Select"})]}),e.jsx(M,{isLoading:r,onClick:C,className:"px-2 sm:px-4 py-2 rounded-lg",variant:"primary",children:"upload"})]})}),e.jsxs("div",{className:"grid h-auto grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-file-pdf text-lg"}),e.jsx("h3",{className:"font-medium",children:"PDF Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:x.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No PDF files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%]",children:x.map((b,E)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[100%] flex-1 ",children:b.originalName||"Unnamed PDF"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{onClick:()=>Vt({src:b==null?void 0:b.url,alt:(b==null?void 0:b.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:o,onClick:()=>l(E),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},E))})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-images text-lg"}),e.jsx("h3",{className:"font-medium",children:"Image Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:h.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No image files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%] ",children:h.map((b,E)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[80%] ",children:b.originalName||"Unnamed Image"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>y(b==null?void 0:b.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{onClick:()=>Vt({src:b==null?void 0:b.url,alt:(b==null?void 0:b.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:o,onClick:()=>l(E),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},E))})})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:b=>b.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},L4=()=>{var q,B,de,Q,$;const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge();if(!t)return null;const[o,d]=A.useState(!1),m=C4(),p=k4(),x=A4(),{mutateAsync:h,isPending:g}=O4(),{data:y,isLoading:j,refetch:C,error:b}=E4(t),{mutateAsync:E,isPending:v}=R4(),{mutateAsync:S,isPending:w}=T4(),N=async()=>{var ee,V;try{v||await E({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(le){F({title:"Error",description:((V=(ee=le==null?void 0:le.response)==null?void 0:ee.data)==null?void 0:V.message)||"Failed to update completion status",variant:"destructive"})}},T=async ee=>{var V,le;try{await m.mutateAsync({projectId:t,roomName:ee}),F({description:"Room Created successfully",title:"Success"})}catch(_){F({title:"Error",description:((le=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:le.message)||"Failed to create room status",variant:"destructive"})}},P=async ee=>{var V,le;try{v||await h({projectId:t,roomId:ee}),F({description:"Room section Deleted successfully",title:"Success"})}catch(_){F({title:"Error",description:((le=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:le.message)||"Failed to delete the room",variant:"destructive"})}},L=async(ee,V)=>{var le,_;try{await p.mutateAsync({projectId:t,roomName:ee,files:V}),F({description:"File uploaded successfully",title:"Success"}),C()}catch(W){F({title:"Error",description:((_=(le=W==null?void 0:W.response)==null?void 0:le.data)==null?void 0:_.message)||" Failed to upload the files",variant:"destructive"})}},z=async(ee,V)=>{var le,_;try{await x.mutateAsync({projectId:t,roomName:ee,fileIndex:V}),F({description:"File deleted successfully",title:"Success"}),C()}catch(W){F({title:"Error",description:((_=(le=W==null?void 0:W.response)==null?void 0:le.data)==null?void 0:_.message)||"Failed to delete the files",variant:"destructive"})}};return j?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full min-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md  border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-object-group mr-2"}),"Sample Design Files"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsxs(M,{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!b,children:[e.jsx("i",{className:"fas fa-plus mr-2"}),e.jsx("span",{className:"",children:"Add room"})]}),e.jsxs(M,{isLoading:v,onClick:N,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!b,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(vs,{projectId:t,stageNumber:3,stagePath:"sampledesign",className:"flex-1 sm:flex-initial min-w-max",disabled:!!b}),e.jsx(rs,{stageName:"SampleDesignModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),b&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((B=(q=b==null?void 0:b.response)==null?void 0:q.data)==null?void 0:B.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>C(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"sampledesign",completedAt:(de=y==null?void 0:y.timer)==null?void 0:de.compltedAt,formId:y==null?void 0:y._id,projectId:t,deadLine:(Q=y==null?void 0:y.timer)==null?void 0:Q.deadLine,startedAt:($=y==null?void 0:y.timer)==null?void 0:$.startedAt,refetchStageMutate:C,deadLineMutate:S,isPending:w})]}),!(y!=null&&y.rooms)||y.rooms.length===0?e.jsxs("div",{className:"text-center py-10 sm:py-16 bg-white rounded-lg shadow-sm",children:[e.jsx("i",{className:"fas fa-home text-blue-200 text-5xl sm:text-6xl mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Start by adding a room to upload design files"}),e.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 min-w-[200px]",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Your First Room"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:max-h-[60vh] md:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[65vh] overflow-y-auto custom-scrollbar gap-6",children:y.rooms.map(ee=>e.jsxs("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-sm p-1 sm:p-6 flex flex-col",children:[e.jsxs("div",{className:"flex sm:flex-row items-center justify-between gap-3 mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-700 truncate",children:[e.jsx("i",{className:"fas fa-door-open mr-2"}),ee.roomName]}),e.jsxs(M,{isLoading:g,onClick:()=>P(ee._id),variant:"danger",className:"bg-red-600 text-white  sm:w-auto mt-2 sm:mt-0",children:[e.jsx("i",{className:"fa-solid fa-trash mr-2"}),"Delete"]})]}),e.jsx("div",{className:"flex-grow",children:e.jsx(M4,{files:ee.files,onUpload:V=>L(ee.roomName,V),onDelete:V=>z(ee.roomName,V),uploadPending:p.isPending,deletePending:x.isPending})})]},ee.roomName))})]}),e.jsx(P4,{isOpen:o,onClose:()=>d(!1),onSubmit:T,addPending:m.isPending})]})},F4=async({projectId:t,formData:a,api:l})=>{for(const[o,d]of a.entries())console.log("form data",o,d);const{data:r}=await l.post(`/technicalconsultation/createmessage/${t}`,a);if(!r.ok)throw new Error(r.message);return r.data},D4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/technicalconsultation/getmessages/${t}`);if(console.log("data form the message",l),!l.ok)throw new Error(l.message);return l.data},_4=async({projectId:t,messageId:a,message:l,senderId:r,senderRole:o,api:d})=>{const{data:m}=await d.put(`/technicalconsultation/editmessage/${t}/${a}`,{message:l,senderId:r,senderRole:o});if(!m.ok)throw new Error(m.message);return m.data},q4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/technicalconsultation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},z4=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/technicalconsultation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},U4=t=>{const a=["owner","staff","CTO","worker"],{role:l}=X(),r=Z(l);return Fe({queryKey:["consultationMessages",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API not found");return await D4({projectId:t,api:r})},enabled:!!t,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1})},I4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,formData:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await F4({projectId:r,formData:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["consultationMessages"]})}})},$4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,messageId:o,message:d,senderId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await _4({projectId:r,messageId:o,message:d,senderId:m,senderRole:a,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["consultationMessages"]})}})},B4=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await z4({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},H4=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await q4({formId:r,projectId:o,deadLine:d,api:l})}})},Q4=()=>{var O,U,D,K,Y,ge;const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge(),{role:o,_id:d}=X(),[m,p]=A.useState(""),[x,h]=A.useState([]),[g,y]=A.useState(null),[j,C]=A.useState(""),[b,E]=A.useState(null),[v,S]=A.useState(!1);let{data:w,isLoading:N,error:T,isError:P,refetch:L}=U4(t);const z=w,{mutateAsync:q,isPending:B}=I4(),{mutateAsync:de,isPending:Q}=$4(),{mutateAsync:$,isPending:ee}=H4(),V=B4(),le=async()=>{var ae,Ne;try{await V.mutateAsync({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(be){F({title:"Error",description:((Ne=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Ne.message)||be.message||"Failed to update completion status",variant:"destructive"})}},_=async()=>{var ae,Ne;try{if(!m&&x.length===0)throw new Error("please write anything");const be=new FormData;m&&be.append("message",m),o&&be.append("senderRole",o),be.append("sender",d),x.forEach(Ve=>be.append("attachments",Ve)),await q({projectId:t,formData:be}),p(""),h([]),F({description:"message sent successfully",title:"Success"})}catch(be){F({title:"Error",description:((Ne=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Failed to send the message",variant:"destructive"})}},W=(ae,Ne)=>{y(ae),C(Ne)},me=()=>{y(null),C("")},te=async()=>{var ae,Ne;try{if(!g||!j)throw new Error("please write anything");await de({projectId:t,messageId:g,message:j,senderId:d}),y(null),C(""),F({description:"message edited successfully",title:"Success"})}catch(be){F({title:"Error",description:((Ne=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Failed to edit the message",variant:"destructive"})}};return N?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full max-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-2",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-comments mr-2"})," Technical Consultation"]}),e.jsxs("div",{className:"w-full lg:w-[60%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs(M,{isLoading:V.isPending,onClick:le,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(vs,{projectId:t,stageNumber:4,stagePath:"technicalconsultation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"TechnicalConsultationModel",projectId:t,organizationId:a,currentAssignedStaff:(z==null?void 0:z.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),e.jsxs(Le,{className:"p-4 mb-3 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"technicalconsultation",completedAt:(O=z==null?void 0:z.timer)==null?void 0:O.completedAt,projectId:t,formId:z==null?void 0:z._id,deadLine:(U=z==null?void 0:z.timer)==null?void 0:U.deadLine,startedAt:(D=z==null?void 0:z.timer)==null?void 0:D.startedAt,refetchStageMutate:L,deadLineMutate:$,isPending:ee})]}),e.jsx("div",{className:" flex flex-col bg-white rounded-xl p-2 shadow-md border custom-scrollbar min-h-[200px] sm:min-h-[170px] md:min-h-[190px] lg:min-h-[300px] border-gray-200 mb-2 flex-grow max-h-[70vh] sm:!max-h-[30vh] md:!max-h-[30vh] lg:!max-h-[42vh] xl:!max-h-[49vh] overflow-y-auto ",children:e.jsxs("div",{className:"flex flex-col-reverse overflow-y-auto custom-scrollbar  flex-grow p-2  md:!max-h-full space-y-reverse space-y-4",children:[(P||T)&&e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-ban text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:((Y=(K=T==null?void 0:T.response)==null?void 0:K.data)==null?void 0:Y.message)||(T==null?void 0:T.message)||"Failed to load messages, please try again"}),e.jsxs(M,{onClick:()=>L(),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx("i",{className:"fas fa-redo mr-2"})," Retry"]})]})}),N?e.jsxs("div",{className:"flex h-full items-center justify-center py-10",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-2xl"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Loading messages..."})]}):(z==null?void 0:z.messages.length)===0?e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-envelope text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"No messages have been posted yet."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start the conversation using the box below."})]})}):e.jsx("div",{className:"overflow-y-auto custom-scrollbar flex flex-col-reverse space-y-reverse space-y-4",children:(ge=z==null?void 0:z.messages)==null?void 0:ge.slice().sort((ae,Ne)=>new Date(Ne.createdAt).getTime()-new Date(ae.createdAt).getTime()).map(ae=>{var Ne;return e.jsxs("div",{className:"bg-blue-50 w-full group px-4 py-[5px] rounded-lg shadow flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs sm:text-[10px] text-gray-600",children:[ae.senderRole.toUpperCase()," - ",new Date(ae.createdAt).toLocaleString(),ae.isEdited&&e.jsxs(Wn,{className:"sm:ml-2 my-1 sm:my-0",children:[" ",e.jsxs("p",{className:"hidden sm:inline-block",children:["message is  "," "," "]}),"   edited by ",ae.senderRole]})]}),e.jsx("div",{className:"opacity-0 scale-95 group-hover:opacity-100 transition-all duration-300",children:(ae.sender===d||o==="owner"||o==="CTO")&&e.jsx("div",{className:"flex gap-2",children:e.jsx(M,{variant:"secondary",onClick:()=>W(ae._id,ae.message),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fas fa-edit"})})})})]}),g===ae._id?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mt-2",children:[e.jsx(ce,{value:j,onChange:be=>C(be.target.value),className:"flex-grow"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(M,{isLoading:Q,onClick:te,className:"w-full sm:w-auto",children:"Save"}),e.jsx(M,{variant:"danger",className:"w-full sm:w-auto border-red-200 hover:bg-red-700 bg-red-600 text-white",onClick:me,children:"Cancel"})]})]}):e.jsx("p",{className:"text-gray-900 text-sm",children:ae.message}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-3",children:(Ne=ae.attachments)==null?void 0:Ne.map((be,Ve)=>e.jsxs("div",{className:"flex items-center gap-2 bg-white border px-3 py-2 rounded shadow-sm w-full max-w-[280px]",children:[e.jsx("i",{className:`fas ${be.type==="pdf"?"fa-file-pdf text-red-500":"fa-image text-blue-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 truncate flex-grow min-w-0",children:be.originalName}),be.type==="image"&&e.jsx(M,{size:"sm",variant:"primary",onClick:()=>{E(be.url),S(!0)},children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{onClick:()=>Vt({src:be==null?void 0:be.url,alt:(be==null?void 0:be.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})})]},Ve))})]},ae._id)})})]})}),e.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl shadow-md",children:[e.jsx(fe,{htmlFor:"message",children:"Your Message"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-3",children:[e.jsx(ce,{id:"message",placeholder:"Write something...",value:m,onChange:ae=>p(ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&_()},className:"flex-grow"}),e.jsxs(M,{isLoading:B,onClick:_,className:"w-full sm:w-auto",children:["Send ",e.jsx("i",{className:"ml-2 fa-solid fa-paper-plane"})]})]}),e.jsx(fe,{children:"Attach Files (PDF or Image)"}),e.jsx(ce,{type:"file",multiple:!0,accept:".pdf,image/*",onChange:ae=>h(Array.from(ae.target.files||[])),className:""})]}),b&&e.jsx("div",{onClick:()=>E(null),className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{onClick:ae=>ae.stopPropagation(),className:"bg-white p-2 sm:p-4 rounded-lg shadow-lg max-w-[90%] max-h-[90%] overflow-auto relative",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:()=>E(null),className:"text-red-500 text-xl",children:e.jsx("i",{className:"fas fa-times"})})}),e.jsxs("div",{className:"relative min-w-80 ",children:[v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-gray-600"})}),e.jsx("img",{src:b,onLoad:()=>S(!1),loading:"lazy",alt:"Preview",className:`max-h-[80vh] rounded transition duration-500 ${v?"blur-sm scale-105":""}`})]})]})})]})};function G0({room:t,projectId:a,organizationId:l}){var o;const r=Me();return e.jsxs("div",{onClick:()=>r(`/${l}/projectdetails/${a}/materialselection/materialroom/${t._id}`),className:"cursor-pointer border-l-6 border-blue-600 shadow-md hover:border-blue-400 transition-all duration-200 rounded-lg p-5 bg-white hover:shadow-lg flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-sm  text-blue-500",children:["No of Fields:",(o=Object.keys(t.roomFields))==null?void 0:o.length]})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium underline hover:no-underline",children:"View →"})]})}const G4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/materialconfirmation/${t}`);if(!l.ok)throw new Error(l.message);return console.log(l),l.data},K4=async({projectId:t,roomId:a,api:l})=>{const{data:r}=await l.get(`/materialconfirmation/${t}/predefinedroom/${a}`);if(!r.ok)throw new Error(r.message);return r.data},V4=async({projectId:t,roomId:a,fieldKey:l,updates:r,api:o})=>{const{data:d}=await o.put(`/materialconfirmation/${t}/predefinedroom/${a}/field/${l}`,r);if(!d.ok)throw new Error(d.message);return d.data},Y4=async({projectId:t,name:a,api:l})=>{const{data:r}=await l.post(`/materialconfirmation/${t}/customroom`,{name:a});if(!r.ok)throw new Error(r.message);return r.data},W4=async({projectId:t,roomId:a,fieldKey:l,api:r})=>{const{data:o}=await r.delete(`/materialconfirmation/${t}/customroom/${a}/field/${l}`);if(!o.ok)throw new Error(o.message);return o.data},X4=async({projectId:t,roomId:a,formData:l,api:r})=>{const{data:o}=await r.post(`/materialconfirmation/${t}/uploads/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},Z4=async({projectId:t,roomId:a,fileId:l,api:r})=>{const{data:o}=await r.patch(`/materialconfirmation/${t}/deleteuploadedfile/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},J4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/materialconfirmation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},eO=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/materialconfirmation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},tO=t=>{const a=["owner","staff","CTO","client","worker"],{role:l}=X(),r=Z(l);return Fe({queryKey:["material-confirmation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not authorized");if(!r)throw new Error("API instance not available");return await G4({projectId:t,api:r})},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},sO=({projectId:t,roomId:a})=>{const l=["owner","staff","CTO","client","worker"],{role:r}=X(),o=Z(r);return Fe({queryKey:["material-room",t,a],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("Not authorized");if(!o)throw new Error("API instance unavailable");return await K4({projectId:t,roomId:a,api:o})},enabled:!!t&&!!a,retry:!1,refetchOnWindowFocus:!1})},aO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomId:d,fieldKey:m,updates:p})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await V4({projectId:o,roomId:d,fieldKey:m,updates:p,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},nO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,name:d})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await Y4({projectId:o,name:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},lO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomId:d,fieldKey:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await W4({projectId:o,roomId:d,fieldKey:m,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},rO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomId:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await X4({projectId:o,roomId:d,formData:m,api:l})},onSuccess:(o,{projectId:d,roomId:m})=>{r.invalidateQueries({queryKey:["material-room",d,m]})}})},iO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomId:d,fileId:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await Z4({projectId:o,roomId:d,fileId:m,api:l})},onSuccess:(o,{projectId:d,roomId:m})=>{r.invalidateQueries({queryKey:["material-room",d,m]})}})},oO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await J4({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["material-rooms"]})}})},cO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await eO({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-rooms",d]})}})},dO=({onClose:t,projectId:a})=>{const[l,r]=A.useState(""),{mutateAsync:o,isPending:d}=nO(),m=async()=>{var p,x;if(!l.trim()){F({title:"Error",description:"Room name is required",variant:"destructive"});return}try{await o({projectId:a,name:l}),F({title:"Success",description:"Room created successfully ✅"}),t()}catch(h){F({title:"Error",description:((x=(p=h==null?void 0:h.response)==null?void 0:p.data)==null?void 0:x.message)||h.message||"Failed to create room",variant:"destructive"})}};return e.jsx("div",{onClick:t,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsxs("div",{children:[e.jsxs(fe,{htmlFor:"roomName",className:"text-sm text-gray-700",children:["Room Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ce,{id:"roomName",value:l,onChange:p=>r(p.target.value),placeholder:"e.g., Master Bedroom, Kitchen",className:"mt-1"})]}),e.jsx(M,{onClick:m,disabled:d,className:"w-full bg-blue-600 text-white hover:bg-blue-700 transition rounded-xl",children:"Create Room"})]})})};function uO(){var P,L,z,q,B,de,Q;const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge(),o=mt(),{data:d,isLoading:m,error:p,refetch:x}=tO(t),{mutateAsync:h,isPending:g}=oO(),{mutateAsync:y,isPending:j}=cO(),[C,b]=A.useState(!1);if(m)return e.jsx(jt,{});const E=!((P=d==null?void 0:d.customRooms)!=null&&P.length)&&!((L=d==null?void 0:d.rooms)!=null&&L.length),v=o.pathname.includes("/materialroom"),S=async()=>{var $,ee;try{await y({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(V){F({title:"Error",description:((ee=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:ee.message)||V.message||"Failed to update completion status",variant:"destructive"})}},{rooms:w,customRooms:N}=d||{},T=((w==null?void 0:w.length)||0)+((N==null?void 0:N.length)||0);return e.jsx("div",{className:"flex flex-col h-full w-full  py-4",children:v?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-box mr-2"})," Material Selection"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%]  flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap  md:flex-nowrap gap-2 justify-end",children:[e.jsxs(M,{isLoading:j,onClick:S,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),!v&&e.jsx(M,{variant:"primary",onClick:()=>b(!0),className:"bg-blue-600 text-white flex-1 sm:flex-initial min-w-max",children:"+ Add Room"})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(vs,{projectId:t,stageNumber:5,stagePath:"materialconfirmation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"MaterialRoomConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),p&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-4",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=(z=p==null?void 0:p.response)==null?void 0:z.data)==null?void 0:q.message)||(p==null?void 0:p.message)||"Failed to load room data"}),e.jsx(M,{onClick:()=>x(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),e.jsx("div",{className:"flex-grow min-h-0 flex flex-col",children:!p&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(B=d==null?void 0:d.timer)==null?void 0:B.completedAt,stageName:"materialconfirmation",projectId:t,formId:d==null?void 0:d._id,deadLine:(de=d==null?void 0:d.timer)==null?void 0:de.deadLine,startedAt:(Q=d==null?void 0:d.timer)==null?void 0:Q.startedAt,refetchStageMutate:x,deadLineMutate:h,isPending:g})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold",children:["Total Rooms: ",T]})}),C&&e.jsx($y,{open:C,onOpenChange:b,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-700",children:"Create New Room"}),e.jsx(dO,{onClose:()=>b(!1),projectId:t})]})}),e.jsx("div",{className:"flex-grow min-h-[100%] py-2 sm:!min-h-0  overflow-y-auto",children:E?e.jsx("div",{className:"h-full flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-door-open text-5xl sm:text-6xl text-blue-300 mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add rooms to start selecting materials"}),e.jsxs("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Your First Room"]})]})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[w==null?void 0:w.map($=>e.jsx(G0,{organizationId:a,room:$,projectId:t},$._id)),N==null?void 0:N.map($=>e.jsx(G0,{organizationId:a,room:$,projectId:t},$._id))]})})]})})]})})}const xn=()=>{const t=Array.from({length:11});return e.jsxs("div",{className:"w-full max-h-full overflow-hidden mx-auto mt-4 bg-white shadow rounded p-6",children:[e.jsx(_e,{className:"h-6 w-40 mb-2"}),e.jsx(_e,{className:"h-4 w-32 mb-6"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border border-gray-200 rounded-lg",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-100 text-left",children:["Item","Quantity","Unit","Remarks","Actions"].map((a,l)=>e.jsx("th",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-20"})},l))})}),e.jsx("tbody",{children:t.map((a,l)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-32"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-12"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-10"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-8 w-8 rounded-full"})})]},l))})]})})]})},K0={primary:"text-blue-400",danger:"text-red-400",success:"text-green-400",warning:"text-yellow-400",gray:"text-gray-400"},V0={envelope:"fas fa-envelope",box:"fas fa-box-open",message:"fas fa-comment-dots",chat:"fas fa-comments",warning:"fas fa-exclamation-triangle"},Ky=({message:t,icon:a="box",customIconClass:l,color:r="gray"})=>{const d=`${a==="custom"?l||"fas fa-question-circle":V0[a]||V0.box} text-7xl mb-4 ${K0[r]||K0.gray}`;return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center py-12 px-4 text-center",children:[e.jsx("i",{className:d}),e.jsx("p",{className:"text-lg text-gray-600",children:t})]})},mO=({projectId:t,roomId:a,initialFiles:l,refetch:r})=>{const[o,d]=A.useState([]),[m,p]=A.useState(l.filter(N=>N.type==="pdf")),[x,h]=A.useState(l.filter(N=>N.type==="image")),[g,y]=A.useState(null),{mutateAsync:j,isPending:C}=rO(),{mutateAsync:b,isPending:E}=iO(),v=N=>{N.target.files&&d(Array.from(N.target.files))},S=async()=>{var T,P;if(o.length===0)return;const N=new FormData;o.forEach(L=>N.append("files",L));try{const L=await j({projectId:t,roomId:a,formData:N}),z=L.filter(B=>B.type==="pdf"),q=L.filter(B=>B.type==="image");p(B=>[...B,...z]),h(B=>[...B,...q]),d([]),F({title:"Success",description:"file uploaded successfully"}),r()}catch(L){F({title:"error",description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.message)||"failed to upload file",variant:"destructive"})}},w=async(N,T)=>{var P,L;try{await b({projectId:t,roomId:a,fileId:N}),T==="pdf"?p(z=>z.filter(q=>q._id!==N)):h(z=>z.filter(q=>q._id!==N)),F({title:"Success",description:"deleted successfully"}),r()}catch(z){F({title:"error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 ",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(ce,{type:"file",multiple:!0,onChange:v,accept:"image/*,application/pdf"}),e.jsx(M,{onClick:S,isLoading:C,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:"📄 PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{onClick:()=>w(N._id,"pdf"),size:"sm",isLoading:E,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:"🖼️ Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[x.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),x.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>y(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{onClick:()=>w(N._id,"image"),size:"sm",isLoading:E,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function fO(){const{projectId:t,roomId:a}=ke(),l=Me();if(!t||!a)return null;const{data:r,isLoading:o,refetch:d}=sO({projectId:t,roomId:a}),[m,p]=A.useState(null),[x,h]=A.useState({quantity:0,unit:"",remarks:""}),{mutateAsync:g,isPending:y}=aO(),{mutateAsync:j,isPending:C}=lO();if(o)return e.jsx(xn,{});if(!r)return e.jsx(Ky,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const b="items"in r,E=b?r.items.map(N=>[N.itemKey,N]):Object.entries(r.roomFields),v=(N,T)=>{p(N),h({quantity:T.quantity||0,unit:T.unit||"",remarks:T.remarks||""})},S=async N=>{var T,P;try{await g({projectId:t,roomId:a,fieldKey:N,updates:x}),p(null),F({description:"Field updated successfully",title:"Success"}),d()}catch(L){F({title:"Error",description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.message)||L.message||"Failed to update field",variant:"destructive"})}},w=async N=>{var T,P;try{confirm("Are you sure you want to delete this field?")&&await j({projectId:t,roomId:a,fieldKey:N}),F({description:"Field deleted successfully",title:"Success"}),d()}catch(L){F({title:"Error",description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.message)||L.message||"Failed to delete field",variant:"destructive"})}};return e.jsxs("div",{className:"flex flex-col h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:r.name}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Room Material Items"})]}),e.jsx(M,{variant:"primary",className:"h-10 text-sm sm:text-base",onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("section",{className:"w-full min-h-[100%] flex flex-col",children:e.jsx("div",{className:"overflow-x-auto min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:"min-w-[700px] w-full flex flex-col border-2 border-gray-100 rounded-lg",children:[e.jsxs("div",{className:"rounded-md grid grid-cols-5 bg-gray-100 text-sm font-semibold text-gray-700 px-2 sm:px-4 py-3 sticky top-0 z-10",children:[e.jsx("div",{className:"truncate text-center",children:"Item"}),e.jsx("div",{className:"truncate text-center",children:"Quantity"}),e.jsx("div",{className:"truncate text-center",children:"Unit"}),e.jsx("div",{className:"truncate text-center",children:"Remarks"}),e.jsx("div",{className:"truncate text-center",children:"Actions"})]}),e.jsx("div",{className:"flex-grow min-h-0 overflow-y-auto custom-scrollbar",children:E.map(([N,T])=>e.jsxs("div",{className:"grid text-center mx-auto grid-cols-5 items-center px-2 sm:px-4 py-3 text-sm hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate pr-2",children:N}),m===N?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(ce,{type:"number",value:x.quantity,onChange:P=>h({...x,quantity:+P.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(ce,{value:x.unit,onChange:P=>h({...x,unit:P.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(ce,{value:x.remarks,onChange:P=>h({...x,remarks:P.target.value}),className:"w-full text-sm"})}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(M,{variant:"primary",isLoading:y,onClick:()=>S(N),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{variant:"secondary",onClick:()=>p(null),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"truncate pr-2",children:T.quantity??"N/A"}),e.jsx("div",{className:"truncate pr-2",children:T.unit||"N/A"}),e.jsx("div",{className:"max-h-[70px] overflow-y-auto custom-scrollbar cursor-grab pr-2",children:T.remarks||"N/A"}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(M,{variant:"primary",onClick:()=>v(N,T),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-pencil "})}),b&&e.jsx(M,{variant:"danger",isLoading:C,onClick:()=>w(N),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]})]},N))})]})})}),e.jsx("section",{className:"mt-4",children:e.jsx(mO,{projectId:t,roomId:a,initialFiles:r.uploads,refetch:d})})]})}const ar=["owner","staff","CTO"],hO=async(t,a)=>{const{data:l}=await a.get(`/costestimation/${t}`);if(!l.ok)throw new Error(l.message);return l.data},xO=async(t,a,l)=>{const{data:r}=await l.get(`/costestimation/${t}/room/${a}`);if(!r.ok)throw new Error(r.message);return r.data},pO=async(t,a)=>{const{data:l}=await a.get(`/costestimation/${t}/labour/getlabour`);if(console.log(l,"data form labour estiamtion"),!l.ok)throw new Error(l.message);return l.data},gO=async(t,a,l,r)=>{const{data:o}=await r.patch(`/costestimation/${t}/material/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},bO=async(t,a,l)=>{console.log("labordata",a);const{data:r}=await l.post(`/costestimation/${t}/labour`,a);if(!r.ok)throw new Error(r.message);return r.data},yO=async(t,a,l,r)=>{const{data:o}=await r.patch(`/costestimation/${t}/labour/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},wO=async(t,a,l)=>{const{data:r}=await l.delete(`/costestimation/${t}/labour/${a}`);if(!r.ok)throw new Error(r.message);return r.data},vO=async(t,a,l,r)=>{const{data:o}=await r.post(`/costestimation/${t}/uploads/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},jO=async(t,a,l,r)=>{console.log(l);const{data:o}=await r.patch(`/costestimation/${t}/deleteuploadedfile/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},NO=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/costestimation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},SO=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/costestimation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},CO=t=>{const a=["staff","CTO","owner"],{role:l}=X(),r=Z(l);return Fe({queryKey:["cost-estimation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await hO(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},kO=(t,a)=>{const{role:l}=X(),r=Z(l);return Fe({queryKey:["cost-estimation-room",t,a],queryFn:async()=>{if(!l||!ar.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await xO(t,a,r)},enabled:!!l&&!!t&&!!a&&!!r,retry:!1,refetchOnMount:!1})},EO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,materialKey:d,updates:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API not available");return await gO(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cost-estimation-room",d]})}})},AO=t=>{const a=["owner","staff","CTO"],{role:l}=X(),r=Z(l);return Fe({queryKey:["labourEstimatation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await pO(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1,staleTime:0})},OO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,labourData:o})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await bO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["labourEstimatation",o]})}})},RO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,labourId:o,updates:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await yO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation",o]})}})},TO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,labourId:o})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await wO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation",o]})}})},PO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomId:o,formData:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await vO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},MO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomId:o,fileId:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await jO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},LO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await NO({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["cost-estimation"]})}})},FO=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await SO({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cost-estimation",d]})}})},DO=({room:t,projectId:a,organizationId:l})=>{var o;const r=Me();return e.jsxs("div",{onClick:()=>r(`/${l}/projectdetails/${a}/costestimation/roomdetails/${t._id}`),className:"cursor-pointer border-l-6 border-blue-600 shadow-md hover:border-blue-400 transition-all duration-200 rounded-lg p-5 bg-white hover:shadow-lg flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-sm text-blue-500",children:["No of Fields: ",((o=t.materials)==null?void 0:o.length)||0]})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium underline hover:no-underline",children:"View →"})]})},_O=({data:t})=>{if(!t)return null;const{totalMaterialCost:a,totalLabourCost:l,totalEstimation:r}=t;return e.jsxs("section",{className:"mt-6 w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Cost Estimation Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-blue-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Material Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["₹",(a==null?void 0:a.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-green-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Labour Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["₹",(l==null?void 0:l.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-purple-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Grand Total Estimation"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["₹",(r==null?void 0:r.toLocaleString())||0]})]})]})]})},qO=A.memo(_O),zO=()=>{var S,w,N,T,P,L;const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge(),o=mt(),d=Me(),{data:m,isLoading:p,isError:x,error:h,refetch:g}=CO(t),{mutateAsync:y,isPending:j}=LO(),{mutateAsync:C,isPending:b}=FO(),E=async()=>{var z,q;try{await C({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(B){F({title:"Error",description:((q=(z=B==null?void 0:B.response)==null?void 0:z.data)==null?void 0:q.message)||B.message||"Failed to update completion status",variant:"destructive"})}},v=o.pathname.includes("/roomdetails");return p?e.jsx(jt,{}):e.jsx("div",{className:"container mx-auto px-2 py-2 w-full  max-h-full overflow-y-auto custom-scrollbar",children:v?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-money-bill-1-wave mr-2"})," Cost Estimation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap  gap-2 justify-end",children:e.jsxs(M,{isLoading:b,onClick:E,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap  gap-2 justify-end",children:[e.jsx(vs,{projectId:t,stageNumber:6,stagePath:"costestimation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"CostEstimation",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),h&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((w=(S=h==null?void 0:h.response)==null?void 0:S.data)==null?void 0:w.message)||(h==null?void 0:h.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>g(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(N=m==null?void 0:m.timer)==null?void 0:N.completedAt,stageName:"costestimation",formId:m==null?void 0:m._id,projectId:t,deadLine:(T=m==null?void 0:m.timer)==null?void 0:T.deadLine,startedAt:(P=m==null?void 0:m.timer)==null?void 0:P.startedAt,refetchStageMutate:g,deadLineMutate:y,isPending:j})]}),e.jsxs("section",{className:"mb-6 ",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Material Cost Estimation"}),e.jsxs(M,{className:"bg-blue-600 text-white px-2 lg:px-4 py-2 w-full sm:w-auto",onClick:()=>d(`/${a}/projectdetails/${t}/costestimation/roomdetails/labour`),children:["Labour Cost Estimation ",e.jsx("i",{className:"ml-2 fa-solid fa-arrow-up-right-from-square"})]})]}),e.jsx("div",{className:"max-h-[100%] grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(L=m==null?void 0:m.materialEstimation)==null?void 0:L.map(z=>e.jsx(DO,{room:z,projectId:t,organizationId:a},z.key))})]}),!p&&!x&&m&&e.jsx(qO,{data:m})]})]})})},UO=({projectId:t,roomId:a,initialFiles:l,refetch:r})=>{const[o,d]=A.useState([]),[m,p]=A.useState(l.filter(N=>N.type==="pdf")),[x,h]=A.useState(l.filter(N=>N.type==="image")),[g,y]=A.useState(null),{mutateAsync:j,isPending:C}=PO(),{mutateAsync:b,isPending:E}=MO(),v=N=>{N.target.files&&d(Array.from(N.target.files))},S=async()=>{var T,P;if(o.length===0)return;const N=new FormData;o.forEach(L=>N.append("files",L));try{const L=await j({projectId:t,roomId:a,formData:N}),z=L.filter(B=>B.type==="pdf"),q=L.filter(B=>B.type==="image");p(B=>[...B,...z]),h(B=>[...B,...q]),d([]),F({title:"Success",description:"file uploaded successfully"}),window.location.reload(),r()}catch(L){F({title:"error",description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.message)||"failed to upload file",variant:"destructive"})}},w=async(N,T)=>{var P,L;try{await b({projectId:t,roomId:a,fileId:N}),T==="pdf"?p(z=>z.filter(q=>q._id!==N)):h(z=>z.filter(q=>q._id!==N)),F({title:"Success",description:"deleted successfully"}),r()}catch(z){F({title:"error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(ce,{type:"file",multiple:!0,onChange:v,accept:"image/*,application/pdf"}),e.jsx(M,{onClick:S,isLoading:C,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:"📄 PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{onClick:()=>w(N._id,"pdf"),disabled:E,variant:"primary",size:"sm",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:"🖼️ Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] min-h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[x.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),x.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>y(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",onClick:()=>w(N._id,"image"),disabled:E,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function IO(){var E;const{projectId:t,roomId:a,organizationId:l}=ke(),r=Me();if(!t||!a)return null;const{data:o,isLoading:d,refetch:m}=kO(t,a),{mutateAsync:p,isPending:x}=EO(),[h,g]=A.useState(null),[y,j]=A.useState({areaSqFt:0,predefinedRate:0,overriddenRate:null});if(d)return e.jsx(xn,{});if(!o)return e.jsx(Ky,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const C=(v,S)=>{g(v),j({areaSqFt:S.areaSqFt||0,predefinedRate:S.predefinedRate||0,overriddenRate:S.overriddenRate??null})},b=async v=>{var S,w;try{await p({projectId:t,materialKey:v,updates:y}),g(null),F({description:"Field updated successfully",title:"Success"})}catch(N){F({title:"Error",description:((w=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:w.message)||N.message||"Failed to update field",variant:"destructive"})}};return e.jsxs("div",{className:"max-w-full h-full overflow-y-scroll custom-scrollbar mx-auto mt-0 bg-white  rounded py-2 px-0",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.name}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Room Material Items"})]}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),e.jsxs("section",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-2 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Material Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["₹",(E=o==null?void 0:o.totalCost)==null?void 0:E.toLocaleString()]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-6 bg-blue-50 text-sm font-semibold text-gray-600 px-6 py-1 sm:py-3 ",children:[e.jsx("div",{className:"text-left px-3 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Sq.Ft"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Predefined Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overridden Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-gray-100 max-h-[70vh] overflow-y-auto custom-scrollbar bg-white",children:o.materials.map(v=>{var S,w,N;return e.jsxs("div",{className:`grid grid-cols-6 items-center px-6 py-4 text-sm ${h===v.key?"":"hover:bg-[#f7fbff]"}`,children:[e.jsx("div",{className:"font-medium text-gray-800",children:v.key}),h===v.key?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center",children:e.jsx(ce,{className:"text-center",type:"number",value:y.areaSqFt,onChange:T=>j({...y,areaSqFt:+T.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(ce,{className:"text-center",type:"number",value:y.predefinedRate,onChange:T=>j({...y,predefinedRate:+T.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(ce,{className:"text-center",type:"number",value:y.overriddenRate??"",onChange:T=>j({...y,overriddenRate:+T.target.value})})}),e.jsx("div",{className:"text-center text-gray-900 font-semibold",children:typeof y.areaSqFt=="number"&&(typeof y.predefinedRate=="number"||typeof y.overriddenRate=="number")?"₹"+(y.areaSqFt*(y.overriddenRate&&y.overriddenRate>0?y.overriddenRate:y.predefinedRate??0)).toLocaleString("en-IN"):"N/A"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(M,{variant:"primary",isLoading:x,onClick:()=>b(v.key),children:[" ",e.jsx("i",{className:"fas fa-check"})," "]}),e.jsx(M,{variant:"secondary",onClick:()=>g(null),children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-center  text-gray-700",children:v.areaSqFt??"N/A"}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["₹",((S=v.predefinedRate)==null?void 0:S.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["₹",((w=v.overriddenRate)==null?void 0:w.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"text-center text-black font-semibold",children:["₹",((N=v.totalCost)==null?void 0:N.toLocaleString("en-IN"))??"N/A"]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(M,{variant:"primary",onClick:()=>C(v.key,v),children:"✎"})})]})]},v.key)})})]})})]}),e.jsx("section",{className:"mt-4",children:e.jsx(UO,{projectId:t,roomId:a,initialFiles:o.uploads,refetch:m})})]})}const $O=({handleAdd:t,newData:a,setNewData:l,addPending:r,setShowForm:o})=>e.jsxs("div",{className:"space-y-3 bg-white px-6 py-3 sm:w-[40%] w-[80%] rounded-2xl",children:[e.jsx("h2",{className:"font-medium text-gray-700 text-center",children:"Add Labour"}),e.jsxs("div",{children:[e.jsx(fe,{children:"Work Type"}),e.jsx(ce,{required:!0,placeholder:"Work Type",value:a.workType,onChange:d=>l({...a,workType:d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"No.Of People"}),e.jsx(ce,{placeholder:"No of people",value:a.noOfPeople,onChange:d=>l({...a,noOfPeople:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"No of Days"}),e.jsx(ce,{placeholder:"Days",type:"number",value:a.daysPlanned,onChange:d=>l({...a,daysPlanned:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Per Day Salary"}),e.jsx(ce,{placeholder:"Per Day Salary",type:"number",value:a.perdaySalary,onChange:d=>l({...a,perdaySalary:+d.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{children:"Weekly Cost:"}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["₹",a.perdaySalary*a.noOfPeople*7||0]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{children:"Total Cost:"}),":",e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["₹",a.daysPlanned*a.perdaySalary*a.noOfPeople||0]})]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(M,{onClick:t,isLoading:r,children:"Add"}),e.jsx(M,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]}),BO=()=>{var V,le;const{projectId:t,organizationId:a}=ke(),l=Me(),[r,o]=A.useState(null),[d,m]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[p,x]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[h,g]=A.useState(!1),[y,j]=A.useState(!1),{data:C,isLoading:b,isError:E,error:v,refetch:S}=AO(t),{mutateAsync:w,isPending:N}=TO(),{mutateAsync:T,isPending:P}=RO(),{mutateAsync:L,isPending:z}=OO(),q=A.useMemo(()=>C==null?void 0:C.reduce((_,W)=>_+(W==null?void 0:W.totalCost),0),[C]);if(b)return e.jsx(jt,{});if(E)return e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"⚠️ Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((le=(V=v==null?void 0:v.response)==null?void 0:V.data)==null?void 0:le.message)||(v==null?void 0:v.message)||"Failed to load , please try again"}),e.jsx(M,{isLoading:b,onClick:()=>S(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]});const B=_=>{o(_._id),m({workType:_.workType,noOfPeople:_.noOfPeople,daysPlanned:_.daysPlanned,perdaySalary:_.perdaySalary})},de=()=>{o(null),m({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0})},Q=async _=>{var W,me;try{await w({projectId:t,labourId:_}),F({description:"Deleted successfully",title:"Success"}),S()}catch(te){F({title:"Error",description:((me=(W=te==null?void 0:te.response)==null?void 0:W.data)==null?void 0:me.message)||te.message||"Failed to update completion status",variant:"destructive"})}},$=async _=>{var W,me;try{if(!d.workType)throw new Error("workType is mandatory");await T({projectId:t,labourId:_,updates:d}),F({description:"edited successfully",title:"Success"}),de(),S()}catch(te){F({title:"Error",description:((me=(W=te==null?void 0:te.response)==null?void 0:W.data)==null?void 0:me.message)||te.message||"Failed to update completion status",variant:"destructive"})}},ee=async()=>{try{if(!p.workType)throw new Error("Please Enter the workType");await L({projectId:t,labourData:p}),x({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),g(!1),j(!1),F({title:"Success",description:"Labour estimation added"}),S()}catch(_){F({title:"Error",description:_.message,variant:"destructive"})}};return e.jsxs("main",{className:"h-full w-full",children:[e.jsxs("div",{className:"w-full flex justify-between ",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-600 mb-5",children:"Labour Estimation"}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>l(`/${a}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),!(C!=null&&C.length)&&e.jsxs("div",{className:"w-full bg-white border border-gray-200 rounded-lg p-10 h-[60%] shadow-sm flex flex-col items-center justify-center text-center",children:[e.jsx("i",{className:"fa-solid fa-person-digging text-7xl text-gray-400 mb-6"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Labour Estimations"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Create your first labour estimation to start managing your workforce"}),e.jsxs(M,{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 text-lg font-medium rounded",children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"})," Create Labour Estimation"]})]}),e.jsx("section",{children:y&&e.jsx("div",{className:"fixed bg-black/70 flex justify-center items-center h-full w-full z-50 top-0 left-0",children:e.jsx($O,{handleAdd:ee,newData:p,setNewData:x,addPending:z,setShowForm:j})})}),(C==null?void 0:C.length)>0&&e.jsxs("div",{className:"bg-white rounded  overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Labour Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["₹",(q==null?void 0:q.toLocaleString())||e.jsx("span",{children:"0"})]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsx("div",{className:"min-w-[1000px]",children:e.jsxs("section",{className:"shadow-lg !rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-50 px-6 py-3 font-semibold text-gray-700 text-sm",children:[e.jsx("div",{className:"text-left px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Work Type"}),e.jsx("div",{className:"text-center px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No.Of People"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Planned"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Per Day Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("div",{className:"divide-y divide-gray-100 shadow-md  rounded-lg max-h-[65vh] overflow-y-auto bg-white",children:[C==null?void 0:C.map(_=>e.jsx("div",{className:`grid grid-cols-7 rounded-lg items-center gap-2 px-6 py-4 text-sm ${r===_._id?"":"hover:bg-[#f7fbff]"}`,children:r===_._id?e.jsxs(e.Fragment,{children:[e.jsx(ce,{required:!0,value:d.workType,onChange:W=>m({...d,workType:W.target.value})}),e.jsx(ce,{type:"number",value:d.noOfPeople,onChange:W=>m({...d,noOfPeople:+W.target.value})}),e.jsx(ce,{type:"number",value:d.daysPlanned,onChange:W=>m({...d,daysPlanned:+W.target.value})}),e.jsx(ce,{type:"number",value:d.perdaySalary,onChange:W=>m({...d,perdaySalary:+W.target.value})}),e.jsxs("div",{className:"text-gray-700",children:["₹",d.perdaySalary*7||0]}),e.jsxs("div",{className:"text-gray-700",children:["₹",d.daysPlanned*d.perdaySalary||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(M,{onClick:()=>$(_._id),isLoading:P,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{variant:"ghost",onClick:()=>o(null),children:"✖"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-left   text-gray-700",children:_.workType||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:(_==null?void 0:_.noOfPeople)||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:_.daysPlanned||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`₹${_.perdaySalary}`||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`₹${_.weeklySalary}`||"N/A"}),e.jsxs("div",{className:"text-gray-800 font-medium text-center",children:["₹",_.totalCost||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(M,{onClick:()=>B(_),children:[" ",e.jsx("i",{className:"fas fa-pen"})]}),e.jsxs(M,{variant:"danger",className:"bg-red-500 text-white",isLoading:N,onClick:()=>Q(_._id),children:[" ",e.jsx("i",{className:"fas fa-trash-can"})," "]})]})]})},_._id)),h&&e.jsxs("div",{className:"grid grid-cols-7 gap-2  px-6 py-4 text-sm  !bg-none",children:[e.jsx(ce,{required:!0,placeholder:"Work Type",value:p.workType,onChange:_=>x({...p,workType:_.target.value})}),e.jsx(ce,{placeholder:"No of people",value:p.noOfPeople,onChange:_=>x({...p,noOfPeople:+_.target.value})}),e.jsx(ce,{placeholder:"Days",type:"number",value:p.daysPlanned,onChange:_=>x({...p,daysPlanned:+_.target.value})}),e.jsx(ce,{placeholder:"Per Day Salary",type:"number",value:p.perdaySalary,onChange:_=>x({...p,perdaySalary:+_.target.value})}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["₹",p.perdaySalary*p.noOfPeople*7||0]}),e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["₹",p.daysPlanned*p.perdaySalary*p.noOfPeople||0]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(M,{onClick:ee,isLoading:z,children:"Add"}),e.jsx(M,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(M,{variant:"primary",onClick:()=>g(!0),children:"+ Add Labour Estimation"})})]})})})]})]})},nr=["owner","staff","CTO"],HO=async(t,a,l)=>{const{data:r}=await l.put(`/orderingmaterial/${t}/shop`,a);if(!r.ok)throw new Error(r.message);return r.data},QO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update shop details");if(!a)throw new Error("API instance not available");return await HO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["ordering-material",o]})}})},GO=async(t,a,l)=>{const{data:r}=await l.put(`/orderingmaterial/${t}/delivery-location`,a);if(!r.ok)throw new Error(r.message);return r.data},KO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update delivery location");if(!a)throw new Error("API instance not available");return await GO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["ordering-material",o]})}})},VO=async(t,a,l,r,o)=>{const{data:d}=await o.put(`/orderingmaterial/${t}/room/${l}/${a}`,{items:r});if(!d.ok)throw new Error(d.message);return d.data},YO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomKey:o,itemId:d,updates:m})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update room materials");if(!a)throw new Error("API instance not available");return await VO(r,o,d,m,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["ordering-material",o,d]})}})},WO=async(t,a,l,r)=>{const{data:o}=await r.post(`/orderingmaterial/${t}/room/${a}/add`,l);if(!o.ok)throw new Error(o.message);return o.data},XO=()=>{const{role:t}=X(),a=Z(t);return ie({mutationFn:async({projectId:l,roomKey:r,newItem:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to add item");if(!a)throw new Error("API instance not available");return await WO(l,r,o,a)},onSuccess:(l,{projectId:r,roomKey:o})=>{Ee.invalidateQueries({queryKey:["ordering-material",r,o]})}})},ZO=async(t,a,l,r)=>{const{data:o}=await r.delete(`/orderingmaterial/${t}/room/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},JO=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomKey:o,itemId:d})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to delete item");if(!a)throw new Error("API instance not available");return await ZO(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["ordering-material",o,d]})}})},eR=async(t,a)=>{const{data:l}=await a.get(`/orderingmaterial/${t}`);if(!l.ok)throw new Error(l.message);return l.data},tR=t=>{const a=["owner","staff","CTO","worker","client"],{role:l}=X(),r=Z(l);return Fe({queryKey:["ordering-material",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to fetch ordering material");if(!r)throw new Error("API not available");return await eR(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},sR=async(t,a,l)=>{const{data:r}=await l.get(`/orderingmaterial/${t}/room/${a}`);if(!r.ok)throw new Error(r.message);return r.data},aR=(t,a)=>{const l=["owner","staff","CTO","worker","client"],{role:r}=X(),o=Z(r);return Fe({queryKey:["ordering-material",t,a],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("Not allowed to fetch room materials");if(!o)throw new Error("API not available");return await sR(t,a,o)},enabled:!!r&&!!t&&!!a&&!!o,retry:!1,refetchOnMount:!1})},nR=async(t,a)=>{const{data:l}=await a.post(`/orderingmaterial/${t}/generate-link`);if(!l.ok)throw new Error(l.message);return l.data},lR=async(t,a)=>{const{data:l}=await Qe.get(`http://localhost:3000/api/orderingmaterial/public/${t}/${a}`);if(console.log(l),!l.ok)throw new Error(l.message);return l.data},rR=()=>{const{role:t}=X(),a=Z(t);return ie({mutationFn:async({projectId:l})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to generate link");if(!a)throw new Error("API instance not found");return await nR(l,a)}})},iR=(t,a)=>Fe({queryKey:["ordering-material-public",t,a],queryFn:async()=>await lR(t,a),enabled:!!t&&!!a,retry:!1,refetchOnMount:!1}),oR=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/orderingmaterial/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},cR=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/orderingmaterial/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},dR=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await oR({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},uR=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await cR({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["ordering-material",d]})}})},Vy=({projectId:t,context:a,label:l,generateLink:r,isPending:o,data:d})=>{const[m,p]=A.useState(""),[x,h]=A.useState(!1);A.useEffect(()=>{typeof d=="string"&&p(d)},[d]);const g=async()=>{try{await navigator.clipboard.writeText(m),h(!0),setTimeout(()=>h(!1),1500)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},y=()=>{const C=encodeURIComponent(`Hey, please check this ${a} link:\`${m}`);window.open(`https://wa.me/?text=${C}`,"_blank")},j=async()=>{var C,b;try{const E=await r({projectId:t});E!=null&&E.shareableUrl&&(p(E.shareableUrl),F({title:"Link generated",description:"You can now share the link",variant:"default"}))}catch(E){F({title:"Error",description:((b=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:b.message)||(E==null?void 0:E.message)||"Failed to generate link",variant:"destructive"})}};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 shadow-sm w-full max-w-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-link"})," ",l||"Generate Shareable Link"]})}),m?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[e.jsx(ce,{readOnly:!0,value:m,className:"flex-1 text-sm cursor-default"}),e.jsxs(M,{onClick:g,variant:"outline",className:"flex gap-2",children:[e.jsx("i",{className:`fas ${x?"fa-check-circle":"fa-copy"}`}),x?"Copied":"Copy"]}),e.jsxs(M,{onClick:y,className:"bg-green-500 hover:bg-green-600 text-white flex gap-2",children:[e.jsx("i",{className:"fab fa-whatsapp"}),"Share"]})]}):e.jsx(M,{onClick:j,disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:o?"Generating...":"Generate Link"})]})},mR=()=>{var te,O,U,D,K;const{projectId:t,organizationId:a}=ke(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ge(),d=location.pathname.includes("/ordermaterialroom"),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,y]=A.useState({}),[j,C]=A.useState({}),{data:b,isLoading:E,isError:v,error:S,refetch:w}=tR(t),{mutateAsync:N,isPending:T}=rR(),{mutateAsync:P}=QO(),{mutateAsync:L}=KO(),{mutateAsync:z,isPending:q}=dR(),{mutateAsync:B,isPending:de}=uR(),Q=async()=>{var Y,ge;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await P({projectId:t,updates:g}),F({title:"Success",description:"Shop Details Updated"}),p(!1),w()}catch(ae){F({variant:"destructive",title:"Error",description:((ge=(Y=ae==null?void 0:ae.response)==null?void 0:Y.data)==null?void 0:ge.message)||(ae==null?void 0:ae.message)||"Update failed"})}},$=async()=>{var Y,ge;try{if(j.phoneNumber&&!/^\d{10}$/.test(j.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await L({projectId:t,updates:j}),h(!1),F({title:"Success",description:"Delivery Details Updated"}),w()}catch(ae){F({variant:"destructive",title:"Error",description:((ge=(Y=ae==null?void 0:ae.response)==null?void 0:Y.data)==null?void 0:ge.message)||(ae==null?void 0:ae.message)||"Update failed"})}},ee=async()=>{var Y,ge;try{await B({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(ae){F({title:"Error",description:((ge=(Y=ae==null?void 0:ae.response)==null?void 0:Y.data)==null?void 0:ge.message)||ae.message||"Failed to update completion status",variant:"destructive"})}};if(E)return e.jsx(jt,{});const V=Object.keys((b==null?void 0:b.materialOrderingList)||{}),{shopDetails:le,deliveryLocationDetails:_,generatedLink:W,materialOrderingList:me}=b||{};return e.jsx("div",{className:"w-full h-full flex flex-col",children:d?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-cart-shopping mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ordering Material"}),e.jsx("span",{className:"sm:hidden",children:"Order Material"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:de,onClick:ee,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(vs,{projectId:t,stageNumber:8,stagePath:"orderingmaterial"}),e.jsx(rs,{stageName:"OrderingMaterialModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null})]})]}),v&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((O=(te=S==null?void 0:S.response)==null?void 0:te.data)==null?void 0:O.message)||"Failed to load ordering material"}),e.jsx(M,{isLoading:E,onClick:()=>w(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!v&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(Le,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(U=b==null?void 0:b.timer)==null?void 0:U.completedAt,stageName:"orderingmaterial",formId:b==null?void 0:b._id,projectId:t,deadLine:(D=b==null?void 0:b.timer)==null?void 0:D.deadLine,startedAt:(K=b==null?void 0:b.timer)==null?void 0:K.startedAt,refetchStageMutate:w,deadLineMutate:z,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Shop Name",value:g.shopName||"",onChange:Y=>y({...g,shopName:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:Y=>y({...g,contactPerson:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",value:g.phoneNumber||"",type:"tel",maxLength:10,onChange:Y=>y({...g,phoneNumber:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:g.address||"",onChange:Y=>y({...g,address:Y.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:Q,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(le==null?void 0:le.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(le==null?void 0:le.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(le==null?void 0:le.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(le==null?void 0:le.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{y(le),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),x?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Site Name",value:j.siteName||"",onChange:Y=>C({...j,siteName:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Site Supervisor",value:j.siteSupervisor||"",onChange:Y=>C({...j,siteSupervisor:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",type:"tel",maxLength:10,value:j.phoneNumber||"",onChange:Y=>C({...j,phoneNumber:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:j.address||"",onChange:Y=>C({...j,address:Y.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:$,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>h(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",(_==null?void 0:_.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",(_==null?void 0:_.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(_==null?void 0:_.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(_==null?void 0:_.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{C(_),h(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(Y=>{const ge=me[Y]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white transform hover:scale-[1.02]",onClick:()=>l(`ordermaterialroom/${Y}`),children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold capitalize text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-door-open"}),Y.replace(/([A-Z])/g," $1")]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:[e.jsx("i",{className:"fa-solid fa-box mr-1"}),"Items: ",ge.length]}),e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-mouse-pointer"}),"Click to view details"]})]},Y)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Vy,{projectId:t,context:"order material",stage:"ordermaterial",data:W,isPending:T,generateLink:N})})]})]})})},fR=async({category:t})=>{const{data:a}=await Qe.get(`/api/ai/brands/${t}`);return a.data},hR=t=>{const l=["electricalFittings","ceramicSanitaryware","upholsteryCurtains","falseCeilingMaterials"].includes(t);return Fe({queryKey:["brands",t],queryFn:()=>fR({category:t}),enabled:!!t&&!l})},xR=()=>{var ee,V,le,_,W;const{projectId:t,roomKey:a,organizationId:l}=ke(),r=Me();if(!a)return;const[o,d]=A.useState({}),[m,p]=A.useState(!1),[x,h]=A.useState(null),[g,y]=A.useState({}),{data:j,isLoading:C,isError:b,refetch:E,error:v}=aR(t,a),{mutateAsync:S,isPending:w}=XO(),{mutateAsync:N,isPending:T}=YO(),{mutateAsync:P,isPending:L}=JO(),{data:z}=hR(a);if(C)return e.jsx(xn,{});if(b)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((V=(ee=v==null?void 0:v.response)==null?void 0:ee.data)==null?void 0:V.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>E(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const q=j||[],B=(me,te)=>{y(O=>({...O,[me]:te}))},de=async me=>{try{const te=ya[a];if(!te||te.length===0)throw new Error("Invalid room type or no fields defined.");const O=te[0],U=g[O];if(!U||U.toString().trim()==="")throw new Error(`The field "${O}" is required.`);if(Object.values(g).every(Y=>!Y||Y.toString().trim()===""))throw new Error("At least one field must be filled.");await N({itemId:me,projectId:t,roomKey:a,updates:[g]}),F({title:"Success",description:"Item updated."}),h(null),y({}),p(!1),E()}catch(te){F({title:"Error",description:(te==null?void 0:te.message)||"Failed",variant:"destructive"})}},Q=async()=>{var me,te;try{const O=ya[a];if(!O||O.length===0)throw new Error("Invalid room type or no fields defined.");const U=O[0],D=o[U];if(!D||D.toString().trim()==="")throw new Error(`The field "${U}" is required.`);if(Object.values(o).every(ae=>!ae||ae.toString().trim()===""))throw new Error("At least one field must be filled.");if(q==null?void 0:q.some(ae=>{var Ne;return((Ne=ae[U])==null?void 0:Ne.toString().trim().toLowerCase())===D.toString().trim().toLowerCase()}))throw new Error(`"${D}" already exists. Please use a unique value.`);await S({projectId:t,roomKey:a,newItem:o}),F({title:"Success",description:"Item added."}),d({}),p(!1),E()}catch(O){F({title:"Error",description:((te=(me=O==null?void 0:O.response)==null?void 0:me.data)==null?void 0:te.message)||(O==null?void 0:O.message)||"Failed",variant:"destructive"})}},$=async me=>{var te,O;try{await P({projectId:t,roomKey:a,itemId:me}),F({title:"Deleted",description:"Item removed"}),E()}catch(U){F({title:"Error",description:((O=(te=U==null?void 0:U.response)==null?void 0:te.data)==null?void 0:O.message)||(U==null?void 0:U.message)||"Failed to delete",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-800 capitalize ",children:a}),e.jsxs("div",{className:" px-6 flex gap-2",children:[e.jsx(M,{onClick:()=>p(()=>!0),children:"Add Item"}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/ordermaterial`),children:"Go Back"})]})]}),e.jsx("div",{className:"w-full !min-h-[85vh] rounded-lg ",children:e.jsx("div",{className:"overflow-x-auto custom-scrollbar min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:" w-full flex flex-col border-2 border-gray-100 rounded-lg",style:{minWidth:`${(((le=ya[a])==null?void 0:le.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid items-center px-6 py-3 bg-blue-100 text-blue-800 text-sm font-semibold",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(_=ya[a])==null?void 0:_.map((me,te)=>e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:me},te)),e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"text-sm text-blue-900 divide-y  !h-[75vh] overflow-y-auto divide-blue-100",children:!m&&q.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center text-gray-500 bg-gray-50",children:[e.jsx("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-700",children:["No ",a.replace(/([A-Z])/g," $1")," Items"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Add your first ",a.replace(/([A-Z])/g," $1").toLowerCase()," item to start tracking"]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded font-medium",children:["Add ",a.replace(/([A-Z])/g," $1")," Item"]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[q==null?void 0:q.map((me,te)=>e.jsxs("div",{className:"grid border text-center px-6 py-3 gap-2 border-b border-gray-200 hover:bg-gray-50 transition-colors",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[ya[a].map((O,U)=>{const D=O==="brandName"&&vm.brandName[a],K=O==="fabric"&&a==="upholsteryCurtains";return e.jsx("div",{className:"text-center px-6 py-3 gap-4 hover:bg-gray-50 transition-colors text-sm min-w-[120px]",children:x===te?D||K?e.jsxs(Je,{value:g[O]||"",onValueChange:Y=>B(O,Y),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:g[O],placeholder:`Select ${O==="brandName"?"brand":"fabric"}`})}),e.jsx(Ze,{children:z==null?void 0:z.map(Y=>e.jsx(ye,{value:Y,children:Y},Y))})]}):e.jsx(ce,{className:"text-xs",value:g[O]||"",onChange:Y=>B(O,Y.target.value)}):me[O]||"-"},U)}),e.jsx("div",{className:"flex justify-center gap-2 items-center",children:x===te?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",isLoading:T,onClick:()=>de(me._id),children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>h(null),children:e.jsx("i",{className:"fas fa-xmark text-red-600"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"primary",children:e.jsx("i",{className:"fas fa-pen",onClick:()=>{y(me),h(te)}})}),e.jsx(M,{isLoading:L,variant:"ghost",children:e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>$(me._id)})})]})})]},me._id)),m&&e.jsxs("div",{className:"grid items-center px-6 py-3 gap-2 bg-white mt-2",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(W=ya[a])==null?void 0:W.map((me,te)=>{const O=me==="brandName"&&vm.brandName[a];if(O||me==="fabric"&&a==="upholsteryCurtains"){const D=O?D2[a]:vm.fabric[a];return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsxs(Je,{onValueChange:K=>d(Y=>({...Y,[me]:K})),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:o[me],placeholder:`Select ${me==="brandName"?"brand":"fabric"}`})}),e.jsx(Ze,{children:D.map(K=>e.jsx(ye,{value:K,children:K},K))})]})},te)}return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsx(ce,{className:"text-xs text-center",placeholder:me,value:o[me]||"",onChange:D=>d(K=>({...K,[me]:D.target.value}))})},te)}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{isLoading:w,onClick:Q,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{onClick:()=>p(()=>!1),children:e.jsx("i",{className:"fas fa-xmark"})})]})]})]})})})]})})})]})},Ai=["owner","staff","CTO"],pR=async(t,a,l)=>(await l.put(`/materialarrivalcheck/${t}/shop`,a)).data,gR=async(t,a,l)=>(await l.put(`/materialarrivalcheck/${t}/delivery-location`,a)).data,bR=async(t,a,l,r)=>(await r.put(`/materialarrivalcheck/${t}/room/${a}`,l)).data,yR=async(t,a,l,r)=>(await r.delete(`/materialarrivalcheck/${t}/room/${a}/${l}`)).data,wR=async(t,a)=>(await a.get(`/materialarrivalcheck/${t}`)).data.data,vR=async(t,a,l)=>{const r=await l.get(`/materialarrivalcheck/${t}/room/${a}`);return console.log("data form the get mateiralarrival room details",r.data.data),r.data.data},jR=async(t,a)=>(await a.post(`/materialarrivalcheck/${t}/generate-link`)).data.data,NR=async(t,a)=>(await Qe.get(`http://localhost:3000/api/materialarrivalcheck/public/${t}/${a}`)).data.data,SR=t=>{const a=["owner","staff","CTO","worker","client"],{role:l}=X(),r=Z(l);return Fe({queryKey:["material-arrival",t],queryFn:()=>wR(t,r),enabled:!!t&&!!l&&a.includes(l),retry:!1,refetchOnMount:!1})},CR=(t,a)=>{const l=["owner","staff","CTO","worker","client"],{role:r}=X(),o=Z(r);return Fe({queryKey:["material-arrival-room",t,a],queryFn:()=>vR(t,a,o),enabled:!!t&&!!a&&!!r&&l.includes(r),retry:!1,refetchOnMount:!1})},kR=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await pR(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["material-arrival",o]})}})},ER=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await gR(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["material-arrival",o]})}})},Yy=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomKey:o,formData:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await bR(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},Wy=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomKey:o,itemId:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await yR(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},AR=()=>{const{role:t}=X(),a=Z(t);return ie({mutationFn:async({projectId:l})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await jR(l,a)}})},OR=(t,a)=>Fe({queryKey:["material-arrival-public",t,a],queryFn:async()=>await NR(t,a),enabled:!!t&&!!a}),RR=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/materialarrivalcheck/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},TR=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/materialarrivalcheck/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},PR=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await RR({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},MR=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await TR({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["ordering-material",d]})}})},LR=()=>{var O,U;const{projectId:t,organizationId:a}=ke(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ge(),d=location.pathname.includes("/materialarrivalroom/"),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,y]=A.useState({}),[j,C]=A.useState({}),{data:b,isLoading:E,isError:v,error:S,refetch:w}=SR(t),{mutateAsync:N}=kR(),{mutateAsync:T}=ER(),{mutateAsync:P,isPending:L}=AR(),{mutateAsync:z,isPending:q}=PR(),{mutateAsync:B,isPending:de}=MR();if(E)return e.jsx(jt,{});const{shopDetails:Q,deliveryLocationDetails:$,materialArrivalList:ee,timer:V,generatedLink:le}=b||{},_=Object.keys(ee||{}),W=async()=>{var D,K;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await N({projectId:t,updates:g}),F({title:"Success",description:"Shop details updated"}),p(!1),w()}catch(Y){F({variant:"destructive",title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Update failed"})}},me=async()=>{var D,K;try{if(j.phoneNumber&&!/^\d{10}$/.test(j.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await T({projectId:t,updates:j}),F({title:"Success",description:"Delivery location updated"}),h(!1),w()}catch(Y){F({variant:"destructive",title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Update failed"})}},te=async()=>{var D,K;try{await B({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(Y){F({title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Failed to update completion status",variant:"destructive"})}};return e.jsx("div",{className:"w-full h-full flex flex-col p-2 ",children:d?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 pb-3 ",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Material Checking"}),e.jsx("span",{className:"sm:hidden",children:"Material Check"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:de,onClick:te,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(vs,{projectId:t,stageNumber:9,stagePath:"materialarrival"}),e.jsx(rs,{stageName:"MaterialArrivalModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null})]})]}),v&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((U=(O=S==null?void 0:S.response)==null?void 0:O.data)==null?void 0:U.message)||"Failed to load material arrival data"}),e.jsx(M,{onClick:()=>w(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!v&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(Le,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"materialarrivalcheck",completedAt:V==null?void 0:V.completedAt,projectId:t,formId:b==null?void 0:b._id,deadLine:V==null?void 0:V.deadLine,startedAt:V==null?void 0:V.startedAt,refetchStageMutate:w,deadLineMutate:z,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Shop Name",value:g.shopName||"",onChange:D=>y({...g,shopName:D.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:D=>y({...g,contactPerson:D.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",type:"tel",maxLength:10,value:g.phoneNumber||"",onChange:D=>y({...g,phoneNumber:D.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:g.address||"",onChange:D=>y({...g,address:D.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:W,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(Q==null?void 0:Q.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(Q==null?void 0:Q.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(Q==null?void 0:Q.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(Q==null?void 0:Q.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{y(Q),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),x?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Site Name",value:j.siteName||"",onChange:D=>C({...j,siteName:D.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Site Supervisor",value:j.siteSupervisor||"",onChange:D=>C({...j,siteSupervisor:D.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",type:"tel",maxLength:10,value:j.phoneNumber||"",onChange:D=>C({...j,phoneNumber:D.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:j.address||"",onChange:D=>C({...j,address:D.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:me,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>h(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",($==null?void 0:$.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",($==null?void 0:$.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",($==null?void 0:$.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",($==null?void 0:$.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{C($),h(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(D=>{const K=ee[D]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",onClick:()=>l(`materialarrivalroom/${D}`),children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:D.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Items: ",K.length]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},D)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Vy,{projectId:t,context:"Material",stage:"materialarrival",data:le,isPending:L,generateLink:P})})]})]})})},FR=()=>{var V,le,_,W,me,te,O;const{projectId:t,roomKey:a,organizationId:l}=ke(),r=Me(),[o,d]=A.useState(null),[m,p]=A.useState(null),[x,h]=A.useState(null),[g,y]=A.useState({}),[j,C]=A.useState({}),[b,E]=A.useState(!1),[v,S]=A.useState(null),{data:w,isLoading:N,isError:T,error:P,refetch:L}=CR(t,a),{mutateAsync:z}=Yy(),{mutateAsync:q}=Wy();if(!a)return;if(N)return e.jsx(xn,{});if(T)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((le=(V=P==null?void 0:P.response)==null?void 0:V.data)==null?void 0:le.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>L(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const B=w||[],de=(U,D)=>{y(K=>({...K,[U]:D}))},Q=async()=>{var U,D;try{const K=Zs[a];if(!K||K.length===0)throw new Error("No required fields defined for this section.");const Y=K[0],ge=g[Y];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${Y}" is required.`);if(K.every(be=>{const Ve=g[be];return!Ve||Ve.toString().trim()===""}))throw new Error("At least one field must be filled.");const Ne=new FormData;Ne.append("itemData",JSON.stringify(g)),m&&Ne.append("upload",m),await z({projectId:t,roomKey:a,formData:Ne}),F({title:"Success",description:"Item updated successfully"}),h(null),y({}),p(null),L()}catch(K){F({title:"Error",description:((D=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:D.message)||K.message||"Failed to update",variant:"destructive"})}},$=async()=>{var U,D;try{const K=Zs[a];if(!K||K.length===0)throw new Error("No required fields defined for this section.");const Y=K[0],ge=j[Y];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${Y}" is required.`);if(K.every(be=>{const Ve=j[be];return!Ve||Ve.toString().trim()===""}))throw new Error("At least one field must be filled.");const Ne=new FormData;Ne.append("itemData",JSON.stringify(j)),o&&Ne.append("upload",o),await z({projectId:t,roomKey:a,formData:Ne}),F({title:"Success",description:"Item added successfully"}),E(!1),C({}),L(),d(null)}catch(K){F({title:"Error",description:((D=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:D.message)||K.message||"Failed to add item",variant:"destructive"})}},ee=async U=>{try{await q({projectId:t,roomKey:a,itemId:U}),F({title:"Deleted",description:"Item removed"}),L()}catch(D){F({title:"Error",description:(D==null?void 0:D.message)||"Failed",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-blue-800 capitalize",children:[e.jsx("span",{className:"text-black font-semibold",children:"Section:"})," ",a]}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/materialarrival`),children:"Go Back"})]}),e.jsx("div",{className:"w-full overflow-x-auto roundex-lg mt-2 custom-scrollbar",children:e.jsxs("div",{style:{minWidth:`${(((_=Zs[a])==null?void 0:_.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid gap-2 bg-blue-100 text-blue-800 text-xs font-semibold uppercase px-4 py-2",style:{gridTemplateColumns:`repeat(${((W=Zs[a])==null?void 0:W.length)+1}, minmax(120px, 1fr))`},children:[(me=Zs[a])==null?void 0:me.map((U,D)=>e.jsx("div",{className:"text-center",children:U==="verifiedByAccountant"?"Verified":U},D)),e.jsx("div",{className:"text-center",children:"Actions"})]}),B==null?void 0:B.map((U,D)=>{var K,Y;return e.jsxs("div",{className:"grid gap-2 px-4 py-2 items-center hover:bg-gray-50",style:{gridTemplateColumns:`repeat(${((K=Zs[a])==null?void 0:K.length)+1}, minmax(120px, 1fr))`},children:[(Y=Zs[a])==null?void 0:Y.map((ge,ae)=>{var Ne;return ge==="image"?e.jsx("div",{className:"flex justify-center items-center",children:x===D?e.jsx(ce,{type:"file",accept:"image/*",onChange:be=>{var Ve;return p(((Ve=be.target.files)==null?void 0:Ve[0])||null)},className:"text-xs"}):(Ne=U==null?void 0:U.upload)!=null&&Ne.url?e.jsx("div",{className:"w-10 h-10 cursor-pointer",onClick:()=>S(U.upload.url),children:e.jsx("img",{src:U.upload.url,alt:"Preview",className:"w-full h-full object-cover rounded border shadow"})}):e.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})},ae):ge==="verifiedByAccountant"?e.jsx("div",{className:"text-center",children:x===D?e.jsx("input",{type:"checkbox",checked:!!g[ge],onChange:be=>y(Ve=>({...Ve,[ge]:be.target.checked}))}):U[ge]?e.jsx("i",{className:"fas fa-check text-blue-600 text-lg"}):e.jsx("i",{className:"fas fa-times text-red-500 text-lg"})},ae):ge==="remarks"?x===D?e.jsx(Ls,{value:g[ge]||"",className:"text-sm",onChange:be=>y(Ve=>({...Ve,remarks:be.target.value}))},ge):e.jsx("div",{className:"text-sm text-center px-2 overflow-x-auto max-w-[150px] custom-scrollbar whitespace-nowrap",children:U[ge]}):e.jsx("div",{className:"text-sm text-center px-2 max-w-[140px] overflow-auto whitespace-nowrap",children:x===D?e.jsx(ce,{className:"text-xs w-full",value:g[ge]||"",onChange:be=>de(ge,be.target.value)}):U[ge]||"-"},ae)}),e.jsx("div",{className:"flex justify-center gap-2 text-lg",children:x===D?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",onClick:Q,children:"Save"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>h(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-pen text-blue-600 cursor-pointer",onClick:()=>{y(U),h(D)}}),e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>ee(U._id)})]})})]},U._id)}),b&&e.jsxs("div",{className:"grid gap-2 px-4 py-2  bg-blue-50 items-center",style:{gridTemplateColumns:`repeat(${((te=Zs[a])==null?void 0:te.length)+1}, minmax(120px, 1fr))`},children:[(O=Zs[a])==null?void 0:O.map((U,D)=>U==="image"?e.jsx("input",{type:"file",accept:"image/*",className:"text-xs w-full",onChange:K=>{var Y;return d(((Y=K.target.files)==null?void 0:Y[0])||null)}},D):U==="verified"?e.jsx("input",{type:"checkbox",checked:!!j[U],onChange:K=>C(Y=>({...Y,[U]:K.target.checked}))},D):e.jsx(ce,{className:"text-xs text-center w-full",placeholder:U,value:j[U]||"",onChange:K=>C(Y=>({...Y,[U]:K.target.value}))},D)),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{size:"sm",onClick:$,children:"Add"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>E(!1),children:"Cancel"})]})]}),!b&&e.jsx("div",{className:"py-4 px-4",children:e.jsx(M,{onClick:()=>E(!0),children:"Add Item"})})]})}),v&&e.jsx("div",{onClick:()=>S(null),className:"fixed inset-0 bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:U=>U.stopPropagation,className:"relative bg-white rounded p-4 sm:p-8 shadow-lg max-w-[90vw] max-h-[80vh]",children:[e.jsx("i",{className:"fas fa-times absolute top-[0px] right-1 sm:top-2 sm:right-3 text-xl sm:text-2xl cursor-pointer text-gray-700 hover:text-red-500",onClick:()=>S(null)}),e.jsx("img",{src:v,alt:"Full View",className:"max-h-[70vh] max-w-[100%] sm:max-w-full object-contain rounded"})]})})]})},DR=()=>{const{projectId:t,token:a}=ke(),[l,r]=A.useState(null),{data:o,isLoading:d,isError:m}=iR(t,a),p=x=>{r(h=>h===x?null:x)};return e.jsxs("div",{className:"min-h-screen  outline-none  w-full bg-gray-50 text-gray-800 flex flex-col",children:[e.jsx(Xy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[70%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ordered Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),d?e.jsx(_m,{}):m||!(o!=null&&o.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.shopDetails).map(([x,h])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:x.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof h=="string"||typeof h=="number"?h:typeof h=="boolean"?h?"✔️":"❌":"-"]})]},x))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),d?e.jsx(_m,{}):m||!(o!=null&&o.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.deliveryLocationDetails).map(([x,h])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:x.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof h=="string"||typeof h=="number"?h:typeof h=="boolean"?h?"✔️":"❌":"-"]})]},x))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),d?e.jsx(_m,{}):m||!(o!=null&&o.materialOrderingList)?e.jsx("p",{className:"text-red-500",children:"Failed to load material data"}):Object.entries(o.materialOrderingList).map(([x,h])=>e.jsxs("div",{className:"mb-4 bg-white outline-noneh rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>p(x),className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:x.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${l===x?"up":"down"}`})]}),e.jsx("div",{className:`transition-all duration-300 overflow-hidden ${l===x?"max-h-[1000px] p-4":"max-h-0"}`,children:h.length===0?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No items needed for this section."})]}):e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] max-h-[400px] overflow-y-auto custom-scrollbar rounded border border-gray-200",children:[e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] bg-blue-50 text-xs text-blue-900 font-semibold border-b border-blue-200 py-2 px-2 sticky top-0",children:Object.keys(h[0]).filter(g=>g!=="_id").map(g=>e.jsx("div",{className:"text-center capitalize",children:g==="upload"?"Image":g.replace(/([A-Z])/g," $1")},g))}),h.map((g,y)=>e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] text-xs text-gray-800 border-b border-gray-100 py-2 px-2 hover:bg-gray-50",children:Object.entries(g).filter(([j])=>j!=="_id").map(([j,C],b)=>e.jsx("div",{className:"text-center break-words",children:typeof C=="boolean"?C?"✔️":"❌":typeof C=="string"||typeof C=="number"?C:"-"},b))},y))]})})})]},x))]})]}),e.jsx(Zy,{})]})},_m=()=>e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),Xy=()=>e.jsx("header",{className:"bg-white shadow sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-full w-full mx-auto flex items-center gap-4 px-4 py-3",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 object-contain"}),e.jsx("h1",{className:"text-xl font-bold",children:yt.COMPANY_NAME})]})}),Zy=()=>e.jsxs("footer",{className:"bg-gray-100 border-t border-gray-200 py-6 px-6 text-center text-sm text-gray-600",children:["© ",new Date().getFullYear()," ",yt.COMPANY_NAME,". All rights reserved."]});function _R(){var x,h;const{projectId:t,token:a}=ke(),{data:l,isLoading:r,isError:o,error:d,refetch:m}=OR(t,a);if(r)return e.jsx(jt,{});if(o||!l)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((h=(x=d==null?void 0:d.response)==null?void 0:x.data)==null?void 0:h.message)||(d==null?void 0:d.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const p=Object.entries(l.materialArrivalList||{});return e.jsxs("div",{className:"min-h-screen  bg-gray-50  space-y-6",children:[e.jsx(Xy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[90%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Arrived Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),r?e.jsx(_e,{}):o||!(l!=null&&l.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(l.shopDetails).map(([g,y])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof y=="string"||typeof y=="number"?y:typeof y=="boolean"?y?"✔️":"❌":"-"]})]},g))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),r?e.jsx(_e,{}):o||!(l!=null&&l.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(l.deliveryLocationDetails).map(([g,y])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof y=="string"||typeof y=="number"?y:typeof y=="boolean"?y?"✔️":"❌":"-"]})]},g))})]}),e.jsxs("section",{className:"max-w-full mx-auto space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),p.map(([g,y])=>e.jsx(qR,{projectId:t,token:a,roomKey:g,items:y,refetch:m},g))]})]}),e.jsx(Zy,{})]})}const qR=({projectId:t,roomKey:a,items:l,refetch:r})=>{const o=Yy(),d=Wy(),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,y]=A.useState({}),[j,C]=A.useState(null),[b,E]=A.useState(null),[v,S]=A.useState({}),[w,N]=A.useState(null),T=Zs[a],P=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(g)),j&&q.append("upload",j);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),F({title:"Added",description:"New item saved."}),h(!1),y({}),C(null),r()}catch(B){F({title:"Error",description:B.message,variant:"destructive"})}},L=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(v)),w&&q.append("upload",w);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),F({title:"Updated",description:"Item saved."}),r(),E(null),S({}),N(null)}catch(B){F({title:"Error",description:B.message,variant:"destructive"})}},z=async q=>{try{await d.mutateAsync({projectId:t,roomKey:a,itemId:q}),F({title:"Deleted",description:"Item removed."}),r()}catch(B){F({title:"Error",description:B.message,variant:"destructive"})}};return e.jsxs("div",{className:"mb-4 bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",onClick:()=>p(!m),children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:a==null?void 0:a.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${m?"up":"down"}`})]}),e.jsx("div",{className:`transition-max-h duration-300 ease-out overflow-hidden ${m?"max-h-[500px] p-4":"max-h-0 p-0"}`,children:T&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1200px] space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] bg-blue-50 text-xs sm:text-sm font-semibold text-blue-900 border-b border-blue-200 py-2 px-2 rounded-t mb-2",children:[T.map(q=>e.jsx("div",{className:"text-center capitalize truncate",children:q==="image"?"Upload":q==="verifiedByAccountant"?"Verified":q},q)),e.jsx("div",{className:"text-center truncate",children:"Actions"})]}),(l==null?void 0:l.length)===0&&!x?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Start by adding your first item to this room."}),e.jsxs(M,{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 text-sm rounded",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add One"]})]}):l==null?void 0:l.map((q,B)=>e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 py-2 border-b border-gray-100 hover:bg-gray-50 min-h-[60px]",children:[T.map(de=>{var Q;return de==="image"?b===B?e.jsx(ce,{type:"file",accept:"image/*",onChange:$=>{var ee;return N(((ee=$.target.files)==null?void 0:ee[0])||null)},className:"w-full text-sm"},de):(Q=q.upload)!=null&&Q.url?e.jsx("img",{src:q.upload.url,alt:"",className:"w-12 h-12 object-cover rounded mx-auto"}):e.jsx("div",{className:"text-center",children:"No image"}):de==="verifiedByAccountant"?b===B?e.jsx(ce,{type:"checkbox",className:"text-center",checked:!!v.verifiedByAccountant,onChange:$=>S(ee=>({...ee,verifiedByAccountant:$.target.checked}))},de):q!=null&&q.verifiedByAccountant?e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-check text-green-600 text-lg"})}):e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-xmark text-red-500 text-lg"})}):de==="remarks"?b===B?e.jsx(Ls,{value:v[de]||"",className:"text-center w-full text-sm",onChange:$=>S(ee=>({...ee,remarks:$.target.value}))},de):e.jsx("div",{className:"w-full text-center overflow-x-auto max-h-[70px] overflow-y-auto custom-scrollbar",children:q[de]||"N/A"}):b===B?e.jsx(ce,{value:v[de]||"",onChange:$=>S(ee=>({...ee,[de]:$.target.value})),className:"w-full text-sm"},de):e.jsx("div",{className:"text-center truncate",children:q[de]??"-"})}),e.jsx("div",{className:"flex gap-2 justify-center",children:b===B?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",onClick:L,children:"Save"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>E(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>{E(B),S(q)},children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>z(q._id),children:e.jsx("i",{className:"fas fa-trash text-red-500"})})]})})]},B)),!x&&l.length>0&&e.jsx("div",{className:"pt-3 text-center",children:e.jsx(M,{onClick:()=>h(!0),children:"➕ Add Item"})}),x&&e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 bg-white p-2 rounded mb-4",children:[T.map(q=>q==="image"?e.jsx(ce,{type:"file",accept:"image/*",onChange:B=>{var de;return C(((de=B.target.files)==null?void 0:de[0])||null)},className:"border-2 w-full text-sm"},q):q==="verifiedByAccountant"?e.jsx(ce,{type:"checkbox",className:"text-center w-full text-sm",checked:!!g.verifiedByAccountant,onChange:B=>y(de=>({...de,verifiedByAccountant:B.target.checked}))},q):e.jsx(ce,{placeholder:q,value:g[q]||"",onChange:B=>y(de=>({...de,[q]:B.target.value})),className:"w-full text-sm"},q)),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(M,{size:"sm",className:"h-10",onClick:P,children:"Add"}),e.jsx(M,{size:"sm",variant:"secondary",onClick:()=>h(!1),children:"Cancel"})]})]})]})})})]})},zR=async(t,a)=>(await a.get(`/worktasks/getworktaksmain/${t}`)).data.data,UR=async(t,a)=>(await a.get(`/worktasks/getworkschedule/${t}`)).data.data,IR=async(t,a)=>(await a.get(`/worktasks/getdailyschedule/${t}`)).data.data,$R=async(t,a)=>{const l=await a.get(`/worktasks/${t}/getworkers`);return console.log("res",l),l.data.data},BR=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/daily-task/${t}`,a)).data,HR=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/work-plan/${t}`,a)).data,QR=async(t,a,l,r,o)=>(await o.put(`/worktasks/${l}/daily-task/${t}/${a}`,r)).data,GR=async(t,a,l,r,o)=>(await o.put(`/worktasks/${l}/work-plan/${t}/${a}`,r)).data,KR=async(t,a,l,r)=>(await r.delete(`/worktasks/${l}/daily-task/${t}/${a}`)).data,VR=async(t,a,l,r)=>(await r.delete(`/worktasks/${l}/work-plan/${t}/${a}`)).data,YR=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/md-approval/${t}`,a)).data,WR=async(t,a,l,r)=>(await r.patch(`/worktasks/${l}/daily-schedule/${t}/status`,a)).data,XR=async(t,a,l,r)=>(await r.patch(`/worktasks/${l}/work-schedule/${t}/status`,a)).data,ZR=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["work-main-stage",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return zR(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},JR=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["work-schedule",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return UR(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},eT=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["daily-schedule",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return IR(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},Jy=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO"];return Fe({queryKey:["project-workers",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return $R(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},tT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,projectId:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return BR(r,d,o,a)}})},sT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,formData:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return console.log("workschlksdflask",r),HR(r,o,d,a)}})},aT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,taskId:o,formData:d,projectId:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return QR(r,o,m,d,a)}})},nT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,planId:o,formData:d,projectId:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return GR(r,o,m,d,a)}})},lT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,taskId:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return KR(r,o,d,a)}})},rT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,planId:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return VR(r,o,d,a)}})},iT=()=>{const{role:t}=X(),a=Z(t),l=["owner"];return ie({mutationFn:async({mainStageId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return YR(r,o,d,a)}})},oT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return WR(r,o,d,a)}})},cT=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return XR(r,o,d,a)}})},dT=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/worktasks/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},uT=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/worktasks/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},mT=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await dT({formId:r,projectId:o,deadLine:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["material-rooms"]})}})},fT=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await uT({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["material-rooms",o]})}})},hT=()=>{var z,q,B,de,Q,$,ee,V;const{projectId:t,organizationId:a}=ke(),l=mt(),{isMobile:r,openMobileSidebar:o}=Ge(),{data:d,isLoading:m,refetch:p,error:x}=ZR(t),{mutateAsync:h,isPending:g}=mT(),{mutateAsync:y,isPending:j}=fT(),{mutateAsync:C,isPending:b}=iT(),[E,v]=A.useState(!1),[S,w]=A.useState("pending"),N=l.pathname.includes("/workschedule")||l.pathname.includes("/dailyschedule"),T=()=>{v(!0)},P=async()=>{var le,_;try{await y({projectId:t}),F({description:"Completion status updated successfully.",title:"Success"}),p()}catch(W){F({title:"Error",description:((_=(le=W==null?void 0:W.response)==null?void 0:le.data)==null?void 0:_.message)||W.message||"Failed to update completion.",variant:"destructive"})}},L=async()=>{var le,_;try{await C({projectId:t,mainStageId:d==null?void 0:d._id,payload:{action:S}}),F({description:"MD Approval updated successfully.",title:"Success"}),v(!1),p()}catch(W){F({title:"Error",description:((_=(le=W==null?void 0:W.response)==null?void 0:le.data)==null?void 0:_.message)||W.message||"Failed to update Approval.",variant:"destructive"})}};return N?e.jsx(Bt,{}):m?e.jsx(jt,{}):e.jsxs("main",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-200 hover:bg-gray-100",title:"Open menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-digging mr-2"})," Work Schedule Overview"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:j,onClick:P,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(vs,{projectId:t,stageNumber:10,stagePath:"worktasks",className:"w-full sm:w-auto"}),e.jsx(rs,{className:"w-full sm:w-auto",stageName:"WorkMainStageScheduleModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"⚠️ An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=(z=x==null?void 0:x.response)==null?void 0:z.data)==null?void 0:q.message)||(x==null?void 0:x.message)||"Couldn't load data."}),e.jsx(M,{isLoading:m,onClick:()=>p(),className:"bg-red-600 text-white hover:bg-red-700 px-4 py-2",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full border-l-4 border-blue-600 shadow bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"worktasks",completedAt:(B=d==null?void 0:d.timer)==null?void 0:B.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(de=d==null?void 0:d.timer)==null?void 0:de.deadLine,startedAt:(Q=d==null?void 0:d.timer)==null?void 0:Q.startedAt,refetchStageMutate:p,deadLineMutate:h,isPending:g})]}),e.jsxs(Le,{className:"p-2 mb-4 border-l-4 border-blue-600 bg-white border shadow-md rounded-xl",children:[e.jsxs("div",{className:"text-blue-600 rounded-t flex items-center gap-2 mb-4",children:[e.jsx("i",{className:"fas fa-user-shield"}),e.jsx("h2",{className:"text-lg font-semibold",children:"MD Approval"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 font-medium ",children:"Status:"}),E?e.jsxs(Je,{value:S,onValueChange:le=>w(le),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S,placeholder:"Select status"})}),e.jsx(Ze,{children:["pending","approved","rejected"].map(le=>e.jsx(ye,{value:le,children:le.charAt(0).toUpperCase()+le.slice(1)},le))})]}):e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(($=d==null?void 0:d.mdApproval)==null?void 0:$.status)==="approved"?"bg-green-200 text-green-700":((ee=d==null?void 0:d.mdApproval)==null?void 0:ee.status)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-200 text-red-700"}`,children:((V=d==null?void 0:d.mdApproval)==null?void 0:V.status)||"N/A"}),E?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",isLoading:b,onClick:L,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{size:"sm",variant:"secondary",onClick:()=>v(!1),children:e.jsx("i",{className:"fas fa-xmark"})})]}):e.jsx(M,{size:"md",onClick:T,children:e.jsx("i",{className:"fas fa-pencil"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs(Ft,{to:`workschedule/${d==null?void 0:d.workScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-list-alt text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Work Plans"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Manage detailed work plans for the project."})]})]}),e.jsxs(Ft,{to:`dailyschedule/${d==null?void 0:d.dailyScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-calendar-check text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Daily Tasks"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Track daily activities and progress reports."})]})]})]})]})]})},xT=()=>{var V,le,_,W,me;const{sectionId:t,projectId:a,organizationId:l}=ke(),r=Me();if(!a)return;const{data:o,isLoading:d,refetch:m,error:p}=JR(a),{data:x}=Jy(a),{mutateAsync:h,isPending:g}=cT(),y=sT(),j=nT(),C=rT(),[b,E]=A.useState(null),[v,S]=A.useState(null),[w,N]=A.useState(null),[T,P]=A.useState("pending"),[L,z]=A.useState(!1);if(d)return e.jsx(xn,{});p&&(le=(V=p==null?void 0:p.response)==null?void 0:V.data)!=null&&le.message;const q=()=>{E({workType:"",startDate:"",endDate:"",assignedTo:"",notes:""})},B=()=>z(!0),de=async()=>{var te,O;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await h({projectId:a,workScheduleId:o._id,payload:{status:T}}),F({title:"Success",description:"Work Schedule status updated successfully."}),z(!1),m()}catch(U){F({title:"Error",description:((O=(te=U==null?void 0:U.response)==null?void 0:te.data)==null?void 0:O.message)||U.message||"Failed to update status.",variant:"destructive"})}},Q=async()=>{var te,O,U;try{if(!b)return;if(!((te=b.workType)!=null&&te.trim()))throw new Error("work field is mandatory");await y.mutateAsync({workScheduleId:t,formData:b,projectId:a}),E(null),F({title:"Success",description:"Item Saved"}),m()}catch(D){F({variant:"destructive",title:"Error",description:((U=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:U.message)||(D==null?void 0:D.message)||"failed to add"})}},$=async()=>{var te,O,U;try{if(!w||!v)return;if(!((te=w.workType)!=null&&te.trim()))throw new Error("work field is mandatory");await j.mutateAsync({workScheduleId:o._id,planId:v,formData:w,projectId:a}),S(null),N(null),F({title:"Success",description:"Item Saved"}),m()}catch(D){F({variant:"destructive",title:"Error",description:((U=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:U.message)||(D==null?void 0:D.message)||"Update failed"})}},ee=async te=>{var O,U;try{await C.mutateAsync({workScheduleId:o._id,planId:te,projectId:a}),F({title:"Success",description:"Item deleted"}),m()}catch(D){F({variant:"destructive",title:"Error",description:((U=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:U.message)||(D==null?void 0:D.message)||"Update failed"})}};return e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-6 px-4",children:"📋 Work Plans"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),L?e.jsxs(e.Fragment,{children:[e.jsxs(Je,{value:T,onValueChange:te=>P(te),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select status",selectedValue:T})}),e.jsx(Ze,{children:["pending","completed"].map(te=>e.jsx(ye,{value:te,children:te},te))})]}),e.jsx(M,{size:"sm",variant:"primary",disabled:g,onClick:de,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(M,{size:"sm",onClick:B,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1024px]",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 bg-blue-100 text-sm font-semibold text-blue-900 rounded-t-lg shadow-md",children:[e.jsx("div",{className:"text-center",children:"S.No"}),e.jsx("div",{className:"text-center",children:"Work Type"}),e.jsx("div",{className:"text-center",children:"Start Date"}),e.jsx("div",{className:"text-center",children:"End Date"}),e.jsx("div",{className:"text-center",children:"Assigned To"}),e.jsx("div",{className:"text-center",children:"Notes"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col divide-y",children:[((_=o==null?void 0:o.plans)==null?void 0:_.length)>0?o.plans.map((te,O)=>{var U;return e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 border-b border-[#5557584a] items-center bg-white hover:bg-blue-50 transition",children:[e.jsx("div",{className:"font-medium text-gray-700 text-center",children:O+1}),v===te._id?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:w==null?void 0:w.workType,onChange:D=>N({...w,workType:D.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:w==null?void 0:w.startDate,onChange:D=>N({...w,startDate:D.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:w==null?void 0:w.endDate,onChange:D=>N({...w,endDate:D.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:w==null?void 0:w.assignedTo,onChange:D=>N({...w,assignedTo:D.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),x==null?void 0:x.map(D=>e.jsx("option",{value:D==null?void 0:D._id,children:D.workerName},D==null?void 0:D._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:w==null?void 0:w.notes,onChange:D=>N({...w,notes:D.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{variant:"primary",isLoading:j.isPending,onClick:$,children:"Save"}),e.jsx("button",{onClick:()=>{S(null),N(null)},className:"bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-gray-700 text-center",children:te.workType||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:te.startDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:te.endDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:((U=x==null?void 0:x.find(D=>{var K;return D._id===((K=te.assignedTo)==null?void 0:K._id)}))==null?void 0:U.workerName)||"Not Assigned"}),e.jsx("div",{className:"text-gray-700 text-center",children:te.notes||"N/A"}),e.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[e.jsx("button",{onClick:()=>{S(te._id),N(te)},className:"text-blue-600 hover:text-blue-800",title:"Edit",children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(M,{isLoading:C.isPending,onClick:()=>ee(te._id),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]})]},te._id)}):!b&&e.jsxs("div",{className:"mt-6 text-center border border-blue-100 p-8 rounded-lg bg-blue-50",children:[e.jsx("p",{className:"text-blue-600 text-sm",children:"No work plans created yet."}),e.jsxs("button",{onClick:q,className:"mt-3 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Work Plan"]})]}),b&&e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 items-center bg-white",children:[e.jsx("div",{className:"text-center font-medium text-gray-700",children:(W=o==null?void 0:o.plans)!=null&&W.length?o.plans.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Work Type",value:b.workType,onChange:te=>E({...b,workType:te.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:b.startDate,onChange:te=>E({...b,startDate:te.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:b.endDate,onChange:te=>E({...b,endDate:te.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:b.assignedTo,onChange:te=>E({...b,assignedTo:te.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),x==null?void 0:x.map(te=>e.jsx("option",{value:te._id,children:te.workerName},te._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Notes",value:b.notes,onChange:te=>E({...b,notes:te.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{variant:"primary",isLoading:y.isPending,onClick:Q,children:"Save"}),e.jsx(M,{variant:"secondary",onClick:()=>E(null),children:"Cancel"})]})]})]}),!b&&((me=o==null?void 0:o.plans)==null?void 0:me.length)>0&&e.jsx("div",{className:"mt-5 text-left",children:e.jsxs(M,{size:"sm",variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Work"]})})]})})]})},pT=()=>{var W,me,te,O,U;const{sectionId:t,projectId:a,organizationId:l}=ke(),r=Me();if(!t)return;const{data:o,isLoading:d,refetch:m,isError:p,error:x}=eT(a),{data:h,isLoading:g}=Jy(a),{mutateAsync:y,isPending:j}=oT(),C=tT(),b=aT(),E=lT(),[v,S]=A.useState(!1),[w,N]=A.useState({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),[T,P]=A.useState(null),[L,z]=A.useState(null),[q,B]=A.useState("pending"),[de,Q]=A.useState(!1),$=()=>Q(!0),ee=async()=>{var D,K;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await y({projectId:a,dailyScheduleId:o._id,payload:{status:q}}),F({title:"Success",description:"Work Schedule status updated successfully."}),Q(!1),m()}catch(Y){F({title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||Y.message||"Failed to update status.",variant:"destructive"})}},V=async()=>{var D,K,Y;try{if(!((D=w.taskName)!=null&&D.trim()))throw new Error("task Name field is mandatory");const ge=new FormData;ge.append("taskName",w.taskName),ge.append("description",w.description),ge.append("date",w.date),ge.append("status",w.status),ge.append("assignedTo",w.assignedTo),await C.mutateAsync({dailyScheduleId:t,formData:ge,projectId:a}),S(!1),N({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),F({title:"Success",description:"Item Saved"}),m()}catch(ge){F({variant:"destructive",title:"Error",description:((Y=(K=ge==null?void 0:ge.response)==null?void 0:K.data)==null?void 0:Y.message)||(ge==null?void 0:ge.message)||"failed to save"})}},le=async D=>{var K,Y,ge;try{if(!((K=L.taskName)!=null&&K.trim()))throw new Error("task Name field is mandatory");const ae=new FormData;ae.append("taskName",L.taskName),ae.append("description",L.description),ae.append("date",L.date),ae.append("status",L.status),ae.append("assignedTo",L.assignedTo),await b.mutateAsync({dailyScheduleId:t,taskId:D,formData:ae,projectId:a}),P(null),z(null),F({title:"Success",description:"Item updated"}),m()}catch(ae){F({variant:"destructive",title:"Error",description:((ge=(Y=ae==null?void 0:ae.response)==null?void 0:Y.data)==null?void 0:ge.message)||(ae==null?void 0:ae.message)||"Update failed"})}},_=async D=>{var K,Y;try{await E.mutateAsync({dailyScheduleId:t,taskId:D,projectId:a}),F({title:"Deleted",description:"Item removed"}),m()}catch(ge){F({title:"Error",description:((Y=(K=ge==null?void 0:ge.response)==null?void 0:K.data)==null?void 0:Y.message)||(ge==null?void 0:ge.message)||"Failed to delete",variant:"destructive"})}};return d?e.jsx(xn,{}):(p&&(me=(W=x==null?void 0:x.response)==null?void 0:W.data)!=null&&me.message,g?e.jsx("p",{children:"getting the worksrs"}):e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4 px-4",children:"🗓️ Daily Tasks"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),de?e.jsxs(e.Fragment,{children:[e.jsxs(Je,{value:q,onValueChange:D=>B(D),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select status",selectedValue:q})}),e.jsx(Ze,{children:["pending","completed"].map(D=>e.jsx(ye,{value:D,children:D},D))})]}),e.jsx(M,{size:"sm",variant:"primary",disabled:j,onClick:ee,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(M,{size:"sm",onClick:$,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"rounded-lg overflow-x-auto shadow-sm",children:e.jsxs("div",{className:"min-w-[1100px]",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-100 px-4 py-3 font-semibold text-blue-800 text-center text-sm",children:[e.jsx("div",{children:"S.No"}),e.jsx("div",{children:"Task Name"}),e.jsx("div",{children:"Description"}),e.jsx("div",{children:"Date"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Assigned To"}),e.jsx("div",{children:"Actions"})]}),((te=o==null?void 0:o.tasks)==null?void 0:te.length)>0?o.tasks.map((D,K)=>{var Y,ge;return e.jsxs("div",{className:"grid grid-cols-7 gap-1 items-center px-4 py-2 text-center hover:bg-blue-50 transition border-b border-[#81838556]",children:[e.jsx("div",{children:K+1}),T===K?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:L.taskName,onChange:ae=>z({...L,taskName:ae.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:L.description,onChange:ae=>z({...L,description:ae.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:L.date,onChange:ae=>z({...L,date:ae.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:L.status,onChange:ae=>z({...L,status:ae.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:L.assignedTo,onChange:ae=>z({...L,assignedTo:ae.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(ae=>e.jsx("option",{value:ae._id,children:ae.workerName},ae._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{isLoading:b.isPending,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded",onClick:()=>le(D._id),children:"Save"}),e.jsx("button",{className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded",onClick:()=>{P(null),z(null)},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:D.taskName||"N/A"}),e.jsx("div",{children:D.description||"N/A"}),e.jsx("div",{children:D.date||"N/A"}),e.jsx("div",{className:"capitalize",children:((Y=D==null?void 0:D.status)==null?void 0:Y.replace("_"," "))||"N/A"}),e.jsx("div",{children:((ge=h==null?void 0:h.find(ae=>{var Ne;return(ae==null?void 0:ae._id)===((Ne=D==null?void 0:D.assignedTo)==null?void 0:Ne._id)}))==null?void 0:ge.workerName)||"Not Assigned"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded",onClick:()=>{P(K),z(D)},children:"Edit"}),e.jsx(M,{isLoading:E.isPending,onClick:()=>_(D._id),children:"Delete"})]})]})]},D._id)}):v?null:e.jsxs("div",{className:"text-center text-gray-600 py-6",children:["No tasks created yet.",e.jsx("br",{}),e.jsxs(M,{variant:"primary",className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",onClick:()=>S(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add First Task"]})]}),v&&e.jsxs("div",{className:"grid grid-cols-7 items-center gap-2 px-4 py-3 text-center bg-white",children:[e.jsx("div",{children:(O=o==null?void 0:o.tasks)!=null&&O.length?o.tasks.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:w.taskName,onChange:D=>N({...w,taskName:D.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:w.description,onChange:D=>N({...w,description:D.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:w.date,onChange:D=>N({...w,date:D.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:w.status,onChange:D=>N({...w,status:D.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:w.assignedTo,onChange:D=>N({...w,assignedTo:D.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(D=>e.jsx("option",{value:D==null?void 0:D._id,children:D.workerName},D==null?void 0:D._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{variant:"primary",isLoading:C.isPending,onClick:V,children:"Add"}),e.jsx(M,{variant:"secondary",className:"",onClick:()=>S(!1),children:"Cancel"})]})]})]})}),!v&&((U=o==null?void 0:o.tasks)==null?void 0:U.length)>0&&e.jsx("div",{className:"text-left mt-6",children:e.jsxs(M,{size:"md",variant:"primary",onClick:()=>S(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Task"]})})]}))},gT=async(t,a,l,r)=>{console.log("formData",l);const{data:o}=await r.post(`/installation/${t}/${a}/item/create`,l);if(!o.ok)throw new Error(o.message);return o.data},bT=async(t,a,l,r)=>{const{data:o}=await r.put(`/installation/${t}/${a}/item/edit`,l);if(!o.ok)throw new Error(o.message);return o.data},yT=async(t,a)=>{const{data:l}=await a.delete(`/installation/${t.projectId}/item/delete`,{data:t});if(!l.ok)throw new Error(l.message);return l.message},wT=async(t,a)=>{const{data:l}=await a.get(`/installation/${t}/getalldetail`);if(!l.ok)throw new Error(l.message);return l.data},vT=()=>{const t=["CTO","owner","staff","worker"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await gT(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},jT=()=>{const t=["CTO","owner","staff","worker"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await bT(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},NT=()=>{const t=["CTO","owner","staff","worker"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async o=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await yT(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},ew=t=>{const a=["CTO","owner","staff","worker","client"],{role:l}=X(),r=Z(l);return Fe({queryKey:["installation-details",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to make this API call.");if(!r)throw new Error("API instance not found.");return await wT(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},ST=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/installation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},CT=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/installation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},kT=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await ST({formId:r,projectId:o,deadLine:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["installation-details"]})}})},ET=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await CT({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["installation-details",o]})}})},AT=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"];function OT(){var v,S,w,N,T;const{projectId:t,organizationId:a}=ke(),l=mt(),{isMobile:r,openMobileSidebar:o}=Ge(),d=l.pathname.includes("/installationroom"),{data:m,isLoading:p,isError:x,refetch:h,error:g}=ew(t),{mutateAsync:y,isPending:j}=ET(),{mutateAsync:C,isPending:b}=kT(),E=async()=>{var P,L;try{await y({projectId:t}),F({title:"Success",description:"Completion status updated successfully"})}catch(z){F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||z.message||"Failed to update status",variant:"destructive"})}};return p?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full",children:d?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-tools mr-2"})," Installation Overview"]}),e.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:flex-row gap-2",children:[e.jsxs(M,{isLoading:j,onClick:E,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsx(vs,{projectId:t,stageNumber:11,stagePath:"installation",className:"w-full sm:w-auto"}),e.jsx(rs,{stageName:"InstallationModel",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"⚠️ Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(v=g==null?void 0:g.response)==null?void 0:v.data)==null?void 0:S.message)||(g==null?void 0:g.message)||"Something went wrong"}),e.jsx(M,{isLoading:p,onClick:()=>h(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):m&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(w=m==null?void 0:m.timer)==null?void 0:w.completedAt,stageName:"installation",projectId:t,formId:m==null?void 0:m._id,deadLine:(N=m==null?void 0:m.timer)==null?void 0:N.deadLine,startedAt:(T=m==null?void 0:m.timer)==null?void 0:T.startedAt,refetchStageMutate:h,deadLineMutate:C,isPending:b})]}),e.jsx("div",{className:"sm:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[70vh] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:AT.map(P=>{var L;return e.jsxs(Ft,{to:`installationroom/${P}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:P}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((L=m==null?void 0:m[P])==null?void 0:L.length)||0," work items"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tap to view details"})]},P)})})]})]})})}function RT(){var $,ee;const{roomkey:t,projectId:a,organizationId:l}=ke(),r=Me(),[o,d]=A.useState(null),{data:m,isLoading:p,refetch:x,error:h,isError:g}=ew(a),{mutateAsync:y,isPending:j}=vT(),{mutateAsync:C,isPending:b}=jT(),{mutateAsync:E,isPending:v}=NT(),[S,w]=A.useState({workName:"",descritpion:"",completedDate:"",file:void 0}),[N,T]=A.useState(!1),[P,L]=A.useState(null),z=(m==null?void 0:m[t])||[],q=async()=>{var V,le;try{if(!S.workName.trim())throw new Error("work Name field is mandatory");const _=new FormData;_.append("workName",S.workName),S.descritpion&&_.append("descritpion",S.descritpion),S.completedDate&&_.append("completedDate",S.completedDate),S.file&&_.append("file",S.file),await y({projectId:a,roomName:t,formData:_}),T(!1),F({description:"created successfully",title:"Success"})}catch(_){F({title:"Error",description:((le=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:le.message)||_.message||"Failed to update completion status",variant:"destructive"})}},B=async()=>{var V,le;try{if(!P)return;if(!S.workName.trim())throw new Error("work Name field is mandatory");const _=new FormData;_.append("itemId",P),S.workName&&_.append("workName",S.workName),S.descritpion&&_.append("descritpion",S.descritpion),S.completedDate&&_.append("completedDate",S.completedDate),S.file&&_.append("file",S.file),await C({projectId:a,roomName:t,formData:_},{onSuccess:()=>{w({workName:"",descritpion:"",completedDate:"",file:void 0}),L(null)}}),F({description:"edited successfully",title:"Success"})}catch(_){F({title:"Error",description:((le=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:le.message)||_.message||"Failed to update completion status",variant:"destructive"})}},de=async V=>{var le,_;try{await E({projectId:a,roomName:t,itemId:V}),F({description:"deleted successfully",title:"Success"}),x()}catch(W){F({title:"Error",description:((_=(le=W==null?void 0:W.response)==null?void 0:le.data)==null?void 0:_.message)||W.message||"Failed to update completion status",variant:"destructive"})}},Q=()=>{w({workName:"",descritpion:"",completedDate:"",file:void 0}),T(!1),L(null)};return p?e.jsx(xn,{}):(g&&(ee=($=h==null?void 0:h.response)==null?void 0:$.data)!=null&&ee.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(M,{variant:"primary",className:"",onClick:()=>r(`/${l}/projectdetails/${a}/installation`),children:"Go Back"})]}),z.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-5 mb-2  gap-2 font-semibold bg-blue-100  text-blue-900 p-2 rounded ",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-tasks text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No works added yet for this room."}),e.jsxs(M,{onClick:()=>T(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]}):e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("section",{className:"!max-h-[100%] overflow-y-auto",children:[z.map(V=>{var le,_;return P===V._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",value:S.workName,onChange:W=>w({...S,workName:W.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",value:S.descritpion,onChange:W=>w({...S,descritpion:W.target.value})}),e.jsx("input",{type:"date",className:"border-b p-1 focus:outline-none",value:S.completedDate,onChange:W=>w({...S,completedDate:W.target.value})}),e.jsx("input",{className:"border-b p-2 text-xs max-w-[80%] ",type:"file",accept:"image/*",onChange:W=>{var te;const me=(te=W.target.files)==null?void 0:te[0];w({...S,file:me})}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"primary",isLoading:b,onClick:B,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(M,{variant:"secondary",onClick:Q,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},V._id):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:V.workName||"N/A"}),e.jsx("div",{className:"text-center",children:V.descritpion||"N/A"}),e.jsx("div",{className:"text-center",children:V.completedDate?ui(V.completedDate.toLocaleString()):"N/A"}),e.jsx("div",{className:"text-center",children:((le=V.upload)==null?void 0:le.type)==="image"?e.jsx("img",{loading:"lazy",src:V.upload.url,alt:"preview",className:"w-10 mx-auto block h-10 object-cover border rounded shadow cursor-pointer",onClick:()=>{var W;return d((W=V.upload)==null?void 0:W.url)}}):((_=V.upload)==null?void 0:_.type)==="pdf"?e.jsx("a",{href:V.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(M,{onClick:()=>{L(V._id),T(!1),w({workName:V.workName||"",descritpion:V.descritpion||"",completedDate:V.completedDate?new Date(V.completedDate).toISOString().split("T")[0]:"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(M,{isLoading:v,variant:"danger",onClick:()=>de(V._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},V._id)}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-4 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Work Name",value:S.workName,onChange:V=>w({...S,workName:V.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Description",value:S.descritpion,onChange:V=>w({...S,descritpion:V.target.value})}),e.jsx("input",{type:"date",className:"border-b  p-1 focus:outline-none",value:S.completedDate,onChange:V=>w({...S,completedDate:V.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx("input",{className:"border-b max-w-[80%]",type:"file",accept:"image/*",onChange:V=>{var _;const le=(_=V.target.files)==null?void 0:_[0];w({...S,file:le})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(M,{isLoading:j,variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:Q,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),!N&&e.jsxs(M,{onClick:()=>T(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]})}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0  bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:V=>V.stopPropagation(),className:"relative bg-white rounded p-4 lg:p-8 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-3 right-4 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{loading:"lazy",src:o,alt:"Full Preview",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const TT=async(t,a,l,r)=>{const{data:o}=await r.post(`/qualitycheck/${t}/${a}/item/create`,l);if(!o.ok)throw new Error(o.message);return o.data},PT=async(t,a,l,r,o)=>{const{data:d}=await o.put(`/qualitycheck/${t}/${a}/${l}/item/edit`,r);if(!d.ok)throw new Error(d.message);return d.data},MT=async(t,a,l,r)=>{const{data:o}=await r.delete(`/qualitycheck/${t}/${a}/${l}/item/delete`);if(!o.ok)throw new Error(o.message);return o},LT=async(t,a)=>{const{data:l}=await a.get(`/qualitycheck/${t}`);if(!l.ok)throw new Error(l.message);return l.data},FT=()=>{const t=["owner","CTO","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await TT(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},DT=()=>{const t=["owner","CTO","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomName:d,itemId:m,formData:p})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await PT(o,d,m,p,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},_T=()=>{const t=["owner","CTO","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomName:d,itemId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await MT(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},tw=t=>{const a=["owner","CTO","staff","worker"],{role:l}=X(),r=Z(l);return Fe({queryKey:["quality-checkup",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed.");if(!r)throw new Error("can't make the call");return await LT(t,r)},enabled:!!t,retry:!1,retryOnMount:!1})},qT=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/qualitycheck/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},zT=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/qualitycheck/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},UT=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await qT({formId:r,projectId:d,deadLine:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["quality-checkup"]})}})},IT=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await zT({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["quality-checkup",o]})}})},$T=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"],BT=[{path:"adminwall",sectionName:"Admin Section"},{path:"workerwall",sectionName:"Worker Section"}];function HT(){var v,S,w,N,T;const{projectId:t,organizationId:a}=ke(),l=mt(),{isMobile:r,openMobileSidebar:o}=Ge();if(!t)return null;const{data:d,isLoading:m,isError:p,error:x,refetch:h}=tw(t),{mutateAsync:g,isPending:y}=UT(),{mutateAsync:j,isPending:C}=IT(),b=l.pathname.includes("/qualitycheckroom/"),E=async()=>{var P,L;try{await j({projectId:t}),F({title:"Success",description:"Quality Check marked as complete."}),h()}catch(z){F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||z.message||"Failed to update completion status",variant:"destructive"})}};return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full  overflow-y-auto custom-scrollbar",children:b?e.jsx(Bt,{context:{isMobile:r,openMobileSidebar:o}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[r&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-check-double"}),"Quality Check Overview"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-2 justify-end",children:[e.jsxs(M,{isLoading:C,onClick:E,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark as Complete"}),e.jsx("span",{className:"inline sm:hidden",children:"Complete"})]}),e.jsx(vs,{projectId:t,stageNumber:12,stagePath:"qualitycheck",className:"w-full sm:w-auto"}),e.jsx(rs,{stageName:"QualityCheckupModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),p?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"⚠️ Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(v=x==null?void 0:x.response)==null?void 0:v.data)==null?void 0:S.message)||(x==null?void 0:x.message)||"Failed to load, please try again"}),e.jsx(M,{isLoading:m,onClick:()=>h(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"qualitycheck",completedAt:(w=d==null?void 0:d.timer)==null?void 0:w.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(T=d==null?void 0:d.timer)==null?void 0:T.startedAt,refetchStageMutate:h,deadLineMutate:g,isPending:y})]}),e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Rooms"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 mb-10",children:$T.map(P=>{var L;return e.jsxs(Ft,{to:`qualitycheckroom/${P}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:P.replace(/([A-Z])/g," $1").trim()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((L=d==null?void 0:d[P])==null?void 0:L.length)||0," works completed"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},P)})}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Walls SOP Section"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10",children:BT.map(P=>e.jsxs(Ft,{to:`qualitycheckroom/${P.path}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:P.sectionName.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},P.sectionName))})]})]})]})})}function QT(){var $,ee;const{roomkey:t,projectId:a,organizationId:l}=ke(),r=Me(),[o,d]=A.useState(null),{data:m,isLoading:p,error:x,isError:h,refetch:g}=tw(a),{mutateAsync:y,isPending:j}=FT(),{mutateAsync:C,isPending:b}=DT(),{mutateAsync:E,isPending:v}=_T(),[S,w]=A.useState({workName:"",status:"pending",remarks:"",file:void 0}),[N,T]=A.useState(!1),[P,L]=A.useState(null),z=(m==null?void 0:m[t])||[],q=async()=>{var V,le;try{if(!S.workName.trim())throw new Error("Work name is mandatory");const _=new FormData;_.append("workName",S.workName),_.append("status",S.status),S.remarks&&_.append("remarks",S.remarks),S.file&&_.append("file",S.file),await y({projectId:a,roomName:t,formData:_}),F({description:"Created successfully",title:"Success"}),Q(),g()}catch(_){F({title:"Error",description:((le=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:le.message)||(_==null?void 0:_.message)||"Failed to create item",variant:"destructive"})}},B=async V=>{var le,_;try{if(!P)return;if(!S.workName.trim())throw new Error("Work name is mandatory");const W=new FormData;W.append("itemId",P),S.workName&&W.append("workName",S.workName),W.append("status",S.status),S.remarks&&W.append("remarks",S.remarks),S.file&&W.append("file",S.file),await C({projectId:a,roomName:t,formData:W,itemId:V},{onSuccess:()=>{Q()}}),F({description:"Edited successfully",title:"Success"}),g()}catch(W){F({title:"Error",description:((_=(le=W==null?void 0:W.response)==null?void 0:le.data)==null?void 0:_.message)||(W==null?void 0:W.message)||"Failed to edit item",variant:"destructive"})}},de=async V=>{var le,_;try{await E({projectId:a,roomName:t,itemId:V}),F({description:"Deleted successfully",title:"Success"}),g()}catch(W){F({title:"Error",description:((_=(le=W==null?void 0:W.response)==null?void 0:le.data)==null?void 0:_.message)||W.message||"Failed to delete item",variant:"destructive"})}},Q=()=>{w({workName:"",status:"pending",remarks:"",file:void 0}),T(!1),L(null)};return p?e.jsx(xn,{}):(h&&(ee=($=x==null?void 0:x.response)==null?void 0:$.data)!=null&&ee.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/qualitycheck`),children:"Go Back"})]}),z.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] grid grid-cols-5 gap-2 font-semibold bg-blue-100 text-blue-900 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-check-double text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No items added yet for this room."}),e.jsxs(M,{onClick:()=>T(!0),variant:"primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded-t",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsx("div",{className:"overflow-y-auto relative z-[-10] max-h-[70vh] sm:max-h-[75vh] md:max-h-[80vh] lg:max-h-[45vh] xl:max-h-[77vh]",children:z.map((V,le)=>{var _,W;return P===V._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx(ce,{value:S.workName,placeholder:"Work Name",onChange:me=>w({...S,workName:me.target.value})}),e.jsx("div",{className:"relative z-50",children:e.jsxs(Je,{value:S.status,onValueChange:me=>w({...S,status:me}),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S.status,placeholder:"Select status"})}),e.jsx(Ze,{children:["pass","fail","pending"].map(me=>e.jsx(ye,{value:me,children:me},me))})]})}),e.jsx(ce,{value:S.remarks,placeholder:"Remarks",onChange:me=>w({...S,remarks:me.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(ce,{type:"file",accept:"image/*",onChange:me=>{var O;const te=(O=me.target.files)==null?void 0:O[0];w({...S,file:te})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(M,{variant:"primary",isLoading:b,onClick:()=>B(V._id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(M,{variant:"secondary",onClick:Q,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},V._id+le):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:V.workName||"N/A"}),e.jsx("div",{className:"text-center",children:V.status||"N/A"}),e.jsx("div",{className:"text-center",children:V.remarks||"N/A"}),e.jsx("div",{className:"text-center",children:((_=V.upload)==null?void 0:_.type)==="image"?e.jsx("img",{src:V.upload.url,alt:"Preview",className:"w-10 h-10 object-cover rounded border cursor-pointer mx-auto",onClick:()=>d(V.upload.url)}):((W=V.upload)==null?void 0:W.type)==="pdf"?e.jsx("a",{href:V.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No Image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>{L(V._id),T(!1),w({workName:V.workName||"",status:V.status||"pending",remarks:V.remarks||"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(M,{variant:"primary",isLoading:v,onClick:()=>de(V._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},V._id+le)})}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 bg-white border-b border-gray-200 items-center",children:[e.jsx(ce,{placeholder:"Work Name",value:S.workName,onChange:V=>w({...S,workName:V.target.value})}),e.jsxs(Je,{value:S.status,onValueChange:V=>w({...S,status:V}),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S.status,placeholder:"Select status"})}),e.jsx(Ze,{children:["pass","fail","pending"].map(V=>e.jsx(ye,{value:V,children:V},V))})]}),e.jsx(ce,{placeholder:"Remarks",value:S.remarks,onChange:V=>w({...S,remarks:V.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(ce,{type:"file",accept:"image/*",onChange:V=>{var _;const le=(_=V.target.files)==null?void 0:_[0];w({...S,file:le})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:q,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:Q,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})]})}),!N&&z.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs(M,{isLoading:j,variant:"primary",onClick:()=>{T(!0),L(null),w({workName:"",status:"pending",remarks:"",file:void 0})},children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:V=>V.stopPropagation(),className:"relative bg-white rounded p-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const GT=async(t,a,l,r)=>{const{data:o}=await r.post(`/cleaning/${t}/${a}/upload`,l);if(!o.ok)throw new Error(o.message);return o.data},KT=async(t,a,l,r)=>{const{data:o}=await r.delete(`/cleaning/${t}/${a}/${l}/file`);if(!o.ok)throw new Error(o.message);return o},VT=async({projectId:t,roomId:a,notes:l,api:r})=>{const{data:o}=await r.put(`/cleaning/${t}/room/${a}/notes`,{notes:l});if(!o.ok)throw new Error(o.message);return o.data},YT=async(t,a,l,r)=>{const{data:o}=await r.put(`/cleaning/${t}/${a}/cleaning-status`,{completelyCleaned:l});if(!o.ok)throw new Error(o.message);return o},WT=async(t,a)=>{const{data:l}=await a.get(`/cleaning/${t}`);if(!l.ok)throw new Error(l.message);return l.data},XT=async(t,a,l)=>{const{data:r}=await l.get(`/cleaning/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},Lf=["owner","CTO","staff"],ZT=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomId:o,formData:d})=>{if(!t||!Lf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await GT(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},JT=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomId:o,fileId:d})=>{if(!t||!Lf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await KT(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},e6=()=>{const t=["owner","CTO","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,roomId:d,notes:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("Missing API instance");return await VT({projectId:o,roomId:d,notes:m,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cleaning-and-sanitation",d]})}})},t6=()=>{const{role:t}=X(),a=Z(t),l=Se();return ie({mutationFn:async({projectId:r,roomId:o,completelyCleaned:d})=>{if(!t||!Lf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await YT(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},s6=t=>{const{role:a}=X(),l=Z(a),r=["owner","CTO","staff","worker"];return Fe({queryKey:["cleaning-and-sanitation",t],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("No API instance available.");return await WT(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},a6=(t,a)=>{const{role:l}=X(),r=Z(l),o=["owner","CTO","staff","worker"];return Fe({queryKey:["cleaning-and-sanitation",t,a],queryFn:async()=>{if(!l||!o.includes(l))throw new Error("Not allowed.");if(!r)throw new Error("No API instance available.");return await XT(t,a,r)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},n6=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/cleaning/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},l6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/cleaning/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},r6=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await n6({formId:r,deadLine:o,projectId:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["cleaning-and-sanitation"]})}})},i6=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await l6({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})};function o6(){var v,S,w,N,T,P;const{projectId:t,organizationId:a}=ke(),l=mt(),{isMobile:r,openMobileSidebar:o}=Ge();if(!t)return null;const{data:d,isLoading:m,isError:p,refetch:x,error:h}=s6(t),{mutateAsync:g,isPending:y}=r6(),{mutateAsync:j,isPending:C}=i6(),b=async()=>{var L,z;try{await j({projectId:t}),F({description:"Cleaning & Sanitation marked as complete.",title:"Success"}),x()}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||q.message||"Failed to update completion status",variant:"destructive"})}},E=l.pathname.includes("/cleaningroom/");return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar",children:E?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-broom"}),e.jsx("span",{className:"hidden sm:inline text-2xl",children:" Cleaning & Sanitation Overview"}),e.jsx("span",{className:"inline sm:hidden text-2xl",children:" Cleaning Stage"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:C,onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white sm:w-auto w-full",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline-block",children:"Mark as Completed"}),e.jsx("span",{className:"inline sm:hidden",children:"Mark as Completed"})]}),e.jsxs("div",{className:"flex items-center justify-between w-full sm:gap-2",children:[e.jsx(vs,{projectId:t,stageNumber:13,stagePath:"cleaning",className:"!w-[48%] sm:!w-auto"}),e.jsx(rs,{stageName:"CleaningAndSanitationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"!w-[48%] sm:!w-auto"})]})]})]}),p?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"⚠️ Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(v=h==null?void 0:h.response)==null?void 0:v.data)==null?void 0:S.message)||(h==null?void 0:h.message)||"Failed to load, please try again"}),e.jsx(M,{isLoading:m,onClick:()=>x(),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-600 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"cleaning",completedAt:(w=d==null?void 0:d.timer)==null?void 0:w.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(T=d==null?void 0:d.timer)==null?void 0:T.startedAt,refetchStageMutate:x,deadLineMutate:g,isPending:y})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:(P=d==null?void 0:d.rooms)==null?void 0:P.map(L=>{var z;return e.jsx(Ft,{to:`cleaningroom/${L._id}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-md font-semibold capitalize text-blue-800 mb-1",children:L.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((z=L.uploads)==null?void 0:z.length)||0," uploads"]}),e.jsx("p",{className:"text-xs text-gray-500",children:L.completelyCleaned?"✅ Completely Cleaned":"❌ Not Cleaned"})]})},L._id)})})]})]})})}function c6(){var _,W,me,te,O,U;const{projectId:t,roomId:a,organizationId:l}=ke(),r=Me(),{data:o,isLoading:d,refetch:m,isError:p,error:x}=a6(t,a),[h,g]=A.useState(null),{mutateAsync:y,isPending:j}=ZT(),{mutateAsync:C,isPending:b}=JT(),{mutateAsync:E,isPending:v}=t6(),{mutateAsync:S,isPending:w}=e6(),[N,T]=A.useState((o==null?void 0:o.completelyCleaned)||!1),[P,L]=A.useState((o==null?void 0:o.notes)||""),[z,q]=A.useState(!1),[B,de]=A.useState(null),Q=D=>{var K;(K=D.target.files)!=null&&K.length&&de(D.target.files)},$=async()=>{var D,K;try{if(!B)throw new Error("select the files before uploading");const Y=new FormData;for(let ge=0;ge<B.length;ge++)Y.append("files",B[ge]);await y({projectId:t,roomId:a,formData:Y}),F({title:"Success",description:"Files uploaded successfully."}),de(null),m()}catch(Y){F({title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||Y.message,variant:"destructive"})}},ee=async D=>{var K,Y;try{await C({projectId:t,roomId:a,fileId:D}),F({title:"Deleted",description:"File deleted successfully."}),m()}catch(ge){F({title:"Error",description:((Y=(K=ge==null?void 0:ge.response)==null?void 0:K.data)==null?void 0:Y.message)||ge.message,variant:"destructive"})}},V=async()=>{var D,K;try{if(!P.trim())throw new Error("please enter some notes");await S({projectId:t,roomId:a,notes:P}),F({title:"Notes updated!",description:"Room notes saved."}),q(!1)}catch(Y){F({title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Failed to update",variant:"destructive"})}},le=async()=>{var D,K;try{await E({projectId:t,roomId:a,completelyCleaned:!N}),F({title:"Updated",description:`Marked as ${N?"not cleaned":"completely cleaned"}.`}),T(!N),m()}catch(Y){F({title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||Y.message,variant:"destructive"})}};return d?e.jsx(jt,{}):(p&&(W=(_=x==null?void 0:x.response)==null?void 0:_.data)!=null&&W.message,e.jsxs("div",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar-none sm:custom-scrollbar",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center w-full",children:[e.jsxs("h2",{className:"text-md sm:text-2xl font-semibold mb-4 text-blue-700 flex items-center",children:[e.jsx("i",{className:"fas fa-broom mr-2"})," ",o==null?void 0:o.roomName," - Details"]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(M,{isLoading:v,onClick:le,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm !p-2 lg:p-4 ",children:N?"Mark as Not Cleaned":"Mark as Cleaned"}),e.jsx(M,{variant:"primary",className:"",onClick:()=>r(`/${l}/projectdetails/${t}/cleaning`),children:"Go Back"})]})]}),e.jsxs("div",{className:"mb-2 grid grid-cols-1 md:grid-cols-2 gap-1 items-center place-content-center",children:[e.jsxs(Le,{className:"p-2 border-gray-100 border-2",children:[e.jsxs("div",{className:"w-full justify-between flex items-center",children:[e.jsx("h3",{className:"text-md font-semibold  text-blue-700",children:"Notes"}),!z&&e.jsxs(M,{onClick:()=>{L(o==null?void 0:o.notes),q(!0)},className:"bg-blue-600 text-white hover:bg-blue-700",children:["Edit ",e.jsx("i",{className:"fas fa-pencil ml-2 "})]})]}),z?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{rows:4,className:"w-full border rounded p-2",value:P,onChange:D=>L(D.target.value),placeholder:"Enter notes here..."}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(M,{onClick:V,disabled:w,className:"bg-blue-600 text-white hover:bg-blue-700",children:w?"Saving...":"Save"}),e.jsx(M,{onClick:()=>{q(!1),L((o==null?void 0:o.notes)??"")},variant:"outline",className:"border-gray-400",children:"Cancel"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative overflow-x-auto overflow-y-auto break-words h-[6rem] max-h-[6rem] leading-5 custom-scrollbar",children:[" ",e.jsx("p",{className:"text-gray-700 mb-2 ",children:(me=o==null?void 0:o.notes)!=null&&me.trim()?o==null?void 0:o.notes:"No notes present."})]})})]}),e.jsxs(Le,{className:"p-2 h-full border-gray-100 border-2",children:[e.jsx(fe,{className:"block mb-2 font-semibold !text-blue-700",children:"Upload Images or PDFs:"}),e.jsx(ce,{type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:Q,disabled:j,className:"border-b w-full"}),e.jsx(M,{onClick:$,isLoading:j,className:"mt-3 bg-blue-600 text-white hover:bg-blue-700",children:j?"Uploading...":`Upload ${B?B.length:""} file(s)`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 h-[95%] sm:h-[65%]",children:[e.jsxs(Le,{className:"p-2 lg:p-4 max-h-full overflow-y-auto custom-scrollbar border-1 border-[#8485887a]",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"Images"}),((te=o==null?void 0:o.uploads)==null?void 0:te.filter(D=>D.type==="image").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No images uploaded."}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(O=o==null?void 0:o.uploads)==null?void 0:O.filter(D=>D.type==="image").map(D=>e.jsxs("div",{className:"relative group rounded overflow-hidden",children:[e.jsx("img",{src:D.url,alt:D.originalName,className:"w-full h-40 object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-3/4 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(M,{size:"sm",variant:"danger",isLoading:b,onClick:()=>ee(D._id),disabled:b,className:"absolute  top-2 right-2 bg-red-600 text-white border-none rounded-full w-7 h-7 flex items-center justify-center text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("i",{className:"fas fa-trash"})}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>g(D.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:D==null?void 0:D.url,alt:(D==null?void 0:D.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})})]})]},D.url))})]}),e.jsxs(Le,{className:"p-4 max-h-full overflow-y-auto border-1 border-[#8485887a] custom-scrollbar",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"PDFs"}),((U=o.uploads)==null?void 0:U.filter(D=>D.type==="pdf").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No PDFs uploaded."}):e.jsx("ul",{className:"space-y-2",children:o==null?void 0:o.uploads.filter(D=>D.type==="pdf").map(D=>e.jsxs("li",{className:"flex items-center justify-between shadow-md p-2 rounded h-full",children:[e.jsx("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline truncate max-w-[50%]",children:D.originalName}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:D==null?void 0:D.url,alt:(D==null?void 0:D.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:b,onClick:()=>ee(D._id),disabled:b,variant:"danger",className:"bg-red-600 text-white rounded px-2 py-1 text-xs",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]},D.url))})]})]}),h&&e.jsx("div",{onClick:()=>g(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:D=>D.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>g(null)}),e.jsx("img",{src:h,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const d6=async(t,a,l)=>{const{data:r}=await l.post(`/projectdelivery/${t}/upload`,a);if(!r.ok)throw new Error(r.message);return r.data},u6=()=>{const{role:t}=X(),a=Z(t),l=["owner","CTO","staff"],r=Se();return ie({mutationFn:async({projectId:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await d6(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},m6=async(t,a,l)=>{console.log("fielid",a);const{data:r}=await l.delete(`/projectdelivery/${t}/upload/${a}`);if(!r.ok)throw new Error(r.message);return r.data},f6=()=>{const{role:t}=X(),a=Z(t),l=["owner","CTO","staff"],r=Se();return ie({mutationFn:async({projectId:o,fileId:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await m6(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},h6=async(t,a,l)=>{const{data:r}=await l.put(`/projectdelivery/${t}/client-confirmation`,{confirmed:a});if(!r.ok)throw new Error(r.message);return r.data},x6=()=>{const{role:t}=X(),a=Z(t),l=["client"],r=Se();return ie({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await h6(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},p6=async(t,a,l)=>{const{data:r}=await l.put(`/projectdelivery/${t}/owner-confirmation`,{confirmed:a});if(!r.ok)throw new Error(r.message);return r.data},g6=()=>{const{role:t}=X(),a=Z(t),l=["owner"],r=Se();return ie({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await p6(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},b6=async(t,a)=>{const{data:l}=await a.get(`/projectdelivery/${t}`);if(!l.ok)throw new Error(l.message);return l.data},y6=t=>{const{role:a}=X(),l=Z(a),r=["owner","CTO","client","staff"];return Fe({queryKey:["project-delivery",t],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("API instance missing");return await b6(t,l)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},w6=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/projectdelivery/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},v6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/projectdelivery/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},j6=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await w6({formId:r,projectId:d,deadLine:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project-delivery"]})}})},N6=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await v6({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["project-delivery",o]})}})};function S6(){var le,_,W,me,te;const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge(),[o,d]=A.useState(null),{data:m,isLoading:p,error:x,refetch:h}=y6(t),{mutateAsync:g,isPending:y}=u6(),{mutateAsync:j,isPending:C,variables:b}=f6(),{mutateAsync:E}=x6(),{mutateAsync:v}=g6(),{mutateAsync:S,isPending:w}=j6(),{mutateAsync:N,isPending:T}=N6(),[P,L]=A.useState([]),z=A.useRef(null),q=async()=>{var O,U;try{await N({projectId:t}),F({description:"Project Delivery marked as complete.",title:"Success"}),h()}catch(D){F({title:"Error",description:((U=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:U.message)||D.message||"Failed to update status",variant:"destructive"})}},B=O=>{O.target.files&&L(Array.from(O.target.files))},de=async()=>{var U,D;if(!P.length){F({title:"Error",description:"Please select at least one file.",variant:"destructive"});return}const O=new FormData;P.forEach(K=>{O.append("files",K)});try{await g({projectId:t,formData:O}),F({title:"Success",description:"Files uploaded successfully."}),h(),L([]),z.current&&(z.current.value="")}catch(K){F({title:"Error",description:((D=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:D.message)||K.message||"Upload failed",variant:"destructive"})}},Q=async O=>{var U,D;try{await j({projectId:t,fileId:O}),F({title:"Success",description:"File deleted."}),h()}catch(K){F({title:"Error",description:((D=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:D.message)||K.message||"Deletion failed",variant:"destructive"})}},$=async O=>{var D,K;const U=O==="client"?E:v;try{await U({projectId:t,confirm:!(m!=null&&m[`${O}Confirmation`])}),F({title:"Success",description:`${O==="client"?"Client":"Owner"} confirmation updated.`}),h()}catch(Y){F({title:"Error",description:((K=(D=Y==null?void 0:Y.response)==null?void 0:D.data)==null?void 0:K.message)||Y.message||"Failed to update confirmation",variant:"destructive"})}};let ee=((m==null?void 0:m.uploads)||[]).filter(O=>O.type==="pdf"),V=((m==null?void 0:m.uploads)||[]).filter(O=>O.type==="image");return p?e.jsx(jt,{}):e.jsxs("div",{className:"w-full sm:min-h-full sm:overflow-y-auto space-y-6 py-1 sm:py-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start lg:items-center gap-4pb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-handshake mr-2"}),"Project Delivery"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:T,onClick:q,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(rs,{projectId:t,organizationId:a,stageName:"ProjectDeliveryModel",currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto bg-red-50 border border-red-200 rounded-lg shadow p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-bold mb-2",children:"⚠️ Error Loading Data"}),e.jsx("p",{className:"text-sm text-red-500 mb-4",children:((_=(le=x==null?void 0:x.response)==null?void 0:le.data)==null?void 0:_.message)||(x==null?void 0:x.message)||"Something went wrong while fetching project delivery details."}),e.jsx(M,{onClick:()=>h(),isLoading:p,className:"bg-red-600 hover:bg-red-700 text-white",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 border-l-[4px] border-blue-600 shadow w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(W=m==null?void 0:m.timer)==null?void 0:W.completedAt,stageName:"projectdelivery",projectId:t,formId:m==null?void 0:m._id,deadLine:(me=m==null?void 0:m.timer)==null?void 0:me.deadLine,startedAt:(te=m==null?void 0:m.timer)==null?void 0:te.startedAt,refetchStageMutate:h,deadLineMutate:S,isPending:w})]}),e.jsxs(Le,{className:"p-6 border-2 border-blue-200 shadow w-full flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-blue-800 mb-3",children:[e.jsx("i",{className:"fas fa-paperclip mr-2 text-blue-600"}),"Upload Files"]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[e.jsx("input",{multiple:!0,ref:z,type:"file",onChange:B,accept:".pdf,image/*",className:"w-full sm:w-[300px] border border-blue-300 px-3 py-2 rounded text-sm"}),e.jsx(M,{onClick:de,isLoading:y,className:"bg-blue-600 text-white hover:bg-blue-700",children:"Upload Files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"min-h-[220px] sm:max-h-[150px] sm:min-h-[150px]  lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-pdf"}),"PDF Files"]}),ee.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No PDF files uploaded."})}):e.jsx("ul",{className:"space-y-2",children:ee.map(O=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:O.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:O==null?void 0:O.url,alt:(O==null?void 0:O.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:(b==null?void 0:b.fileId)===O._id&&C,onClick:()=>Q(O._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},O._id))})]}),e.jsxs("div",{className:" min-h-[220px] sm:max-h-[150px]  sm:min-h-[150px] lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-image"}),"Image Files"]}),V.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No images uploaded."})}):e.jsx("ul",{className:"space-y-2",children:V.map(O=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:O.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>d(O==null?void 0:O.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:O==null?void 0:O.url,alt:(O==null?void 0:O.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:(b==null?void 0:b.fileId)===O._id&&C,onClick:()=>Q(O._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},O._id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-4",children:[e.jsxs(M,{onClick:()=>$("client"),className:`w-full ${m!=null&&m.clientConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.clientConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.clientConfirmation?"Client Confirmed":"Client not confirmed"]}),e.jsxs(M,{onClick:()=>$("owner"),className:`w-full ${m!=null&&m.ownerConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.ownerConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.ownerConfirmation?"Owner Confirmed":"Owner not confirmed"]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded px-4 py-3 flex items-center gap-3 text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-user-check text-blue-600 text-base"}),e.jsxs("p",{className:"font-medium",children:["Client Confirmed At:"," ",e.jsx("span",{className:"font-semibold text-blue-900",children:m!=null&&m.clientAcceptedAt?new Date(m.clientAcceptedAt).toLocaleDateString():"Not Confirmed Yet"})]})]})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:O=>O.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})]})}const C6=async(t,a)=>(await a.get(`/paymentconfirmation/getschedule/${t}`)).data.data,k6=async({projectId:t,dueDate:a,api:l})=>(await l.put(`/paymentconfirmation/dueDate/${t}`,{dueDate:a})).data.data,E6=async({projectId:t,status:a,api:l})=>(await l.put(`/paymentconfirmation/clientapprovalstatus/${t}`,{status:a})).data.data,A6=async({projectId:t,notes:a,api:l})=>(await l.put(`/paymentconfirmation/clientnotes/${t}`,{notes:a})).data.data,O6=async({projectId:t,status:a,api:l})=>(await l.put(`/paymentconfirmation/mdapprovalstatus/${t}`,{status:a})).data.data,R6=async({projectId:t,notes:a,api:l})=>(await l.put(`/paymentconfirmation/mdnotes/${t}`,{notes:a})).data.data,T6=t=>{const a=["owner","staff","CTO","client"],{role:l}=X(),r=Z(l);return Fe({queryKey:["payment-schedule",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to fetch payment schedule");if(!r)throw new Error("API instance missing");return await C6(t,r)},enabled:!!t&&!!l,retry:!1,refetchOnMount:!1})},P6=()=>{const t=["CTO","owner","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,dueDate:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await k6({projectId:o,dueDate:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},M6=()=>{const t=["client"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await E6({projectId:o,status:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},L6=()=>{const t=["client"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await A6({projectId:o,notes:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},F6=()=>{const t=["owner"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await O6({projectId:o,status:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},D6=()=>{const t=["owner"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await R6({projectId:o,notes:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},Y0=["pending","approved","rejected"],_6=()=>{var B,de;const{projectId:t,organizationId:a}=ke(),l=Me(),{data:r,isLoading:o,error:d,refetch:m}=T6(t),p=M6(),x=L6(),h=F6(),g=D6(),[y,j]=A.useState(""),[C,b]=A.useState(""),[E,v]=A.useState(r==null?void 0:r.dueDate),[S,w]=A.useState(!1),N=P6(),T=async()=>{var Q,$;try{await N.mutateAsync({projectId:t,dueDate:E}),m(),F({title:"Success",description:"Due date updated successfully."}),w(!1)}catch(ee){F({title:"Error",description:(($=(Q=ee==null?void 0:ee.response)==null?void 0:Q.data)==null?void 0:$.message)||ee.message||"Failed to update due date.",variant:"destructive"})}},P=Q=>{p.mutate({projectId:t,status:Q},{onSuccess:()=>F({title:"Success",description:"Client approval status updated."}),onError:$=>{var ee,V;return F({title:"Error",description:((V=(ee=$==null?void 0:$.response)==null?void 0:ee.data)==null?void 0:V.message)||$.message||"Failed to update client status",variant:"destructive"})}})},L=Q=>{h.mutate({projectId:t,status:Q},{onSuccess:()=>F({title:"Success",description:"MD approval status updated."}),onError:$=>{var ee,V;return F({title:"Error",description:((V=(ee=$==null?void 0:$.response)==null?void 0:ee.data)==null?void 0:V.message)||$.message||"Failed to update MD status",variant:"destructive"})}})},z=()=>{x.mutate({projectId:t,notes:y},{onSuccess:()=>F({title:"Success",description:"Client note updated."}),onError:Q=>{var $,ee;return F({title:"Error",description:((ee=($=Q==null?void 0:Q.response)==null?void 0:$.data)==null?void 0:ee.message)||Q.message||"Failed to update notes",variant:"destructive"})}})},q=()=>{g.mutate({projectId:t,notes:C},{onSuccess:()=>F({title:"Success",description:"MD note updated."}),onError:Q=>{var $,ee;return F({title:"Error",description:((ee=($=Q==null?void 0:Q.response)==null?void 0:$.data)==null?void 0:ee.message)||Q.message||"Failed to update notes",variant:"destructive"})}})};return o?e.jsx("p",{children:e.jsx(jt,{})}):d?e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"⚠️ Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((de=(B=d==null?void 0:d.response)==null?void 0:B.data)==null?void 0:de.message)||(d==null?void 0:d.message)||"Failed to load, please try again"}),e.jsx(M,{onClick:()=>m(),isLoading:o,className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):e.jsxs("div",{className:"w-full max-w-full max-h-full overflow-y-auto custom-scrollbar mx-auto space-y-6 px-4 py-6",children:[e.jsxs("div",{className:"w-full justify-between flex",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-regular fa-calendar-check text-blue-600"}),e.jsx("span",{className:"hidden sm:inline",children:"  Step 2: Payment Schedule Approval"}),e.jsx("span",{className:"inline sm:hidden",children:"  Payment Schedule"})]}),e.jsx(M,{variant:"primary",onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]}),e.jsx(Le,{className:"p-4 border border-gray-200 shadow-sm rounded mb-6",children:e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar-days"})," Payment Due Date"]}),S?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("input",{type:"date",value:E,onChange:Q=>v(Q.target.value),className:"border rounded px-3 py-1 text-sm"}),e.jsxs(M,{size:"sm",onClick:T,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-check mr-2"}),"Save"]}),e.jsxs(M,{size:"sm",onClick:()=>{var Q;v((Q=r==null?void 0:r.dueDate)==null?void 0:Q.slice(0,10)),w(!1)},variant:"outline",className:"px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-xmark mr-1"}),"Cancel"]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-md font-medium text-gray-800",children:r!=null&&r.dueDate?ui(r==null?void 0:r.dueDate):"Not set"}),e.jsxs(M,{size:"sm",onClick:()=>w(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-regular fa-pen-to-square mr-2"}),"Edit"]})]})]})}),e.jsxs(Le,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user"})," Client Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:Y0.map(Q=>{var $;return e.jsx(M,{isLoading:p.isPending&&(($=p.variables)==null?void 0:$.status)===Q,size:"sm",onClick:()=>P(Q),className:`text-white text-xs ${r.clientApprovalStatus===Q?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:Q.toUpperCase()},Q)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:r.clientApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:r.clientNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add client notes...",value:y,onChange:Q=>j(Q.target.value),rows:3}),e.jsxs(M,{onClick:z,isLoading:x.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save Client Notes"]})]})]}),e.jsxs(Le,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user-tie"})," MD Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:Y0.map(Q=>{var $;return e.jsx(M,{isLoading:h.isPending&&(($=h.variables)==null?void 0:$.status)===Q,size:"sm",onClick:()=>L(Q),className:`text-white text-xs ${r.mdApprovalStatus===Q?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:Q.toUpperCase()},Q)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:r.mdApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:r.mdNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add MD notes...",value:C,onChange:Q=>b(Q.target.value),rows:3}),e.jsxs(M,{onClick:q,isLoading:g.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save MD Notes"]})]})]})]})},sw=t=>new Promise(a=>{const l=document.createElement("script");l.src=t,l.onload=()=>{a(!0)},l.onerror=()=>{a(!1)},document.body.appendChild(l)}),q6=async({projectId:t,clientId:a,api:l})=>(await l.post(`/paymentconfirmation/createorder/${t}`,{clientId:a})).data.data,z6=async({projectId:t,razorpay_order_id:a,razorpay_payment_id:l,razorpay_signature:r,api:o})=>(await o.post(`/paymentconfirmation/verifypayment/${t}`,{razorpay_order_id:a,razorpay_payment_id:l,razorpay_signature:r})).data.data,U6=async({projectId:t,api:a})=>{const l=await a.get(`/paymentconfirmation/gettransaction/${t}`);return console.log(l,"drjklsjklfjsldfjasdjfsdj"),l.data.data},I6=()=>{const t=["client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,clientId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await q6({projectId:r,clientId:o,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["payment-confirmation",o]})}})},$6=()=>{const t=["client"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({projectId:r,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await z6({projectId:r,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["payment-confirmation",o]})}})},B6=t=>{const a=["client","staff","owner","CTO"],{role:l}=X(),r=Z(l);return Fe({queryKey:["payment-confirmation",t,"transaction"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await U6({projectId:t,api:r})},enabled:!!t&&!!r&&!!l,retry:!1,refetchOnMount:!1})},H6=()=>{var v,S;const{projectId:t,organizationId:a}=ke(),l=Me(),{data:r,refetch:o,isError:d,error:m,isLoading:p}=B6(t),x=r==null?void 0:r.paymentTransaction,h=r==null?void 0:r.totalAmount,{mutateAsync:g,isPending:y}=I6(),{mutateAsync:j,isPending:C}=$6(),b=ps(w=>w.clientProfileStore);if(p)return e.jsx(jt,{});if(d||!r)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(v=m==null?void 0:m.response)==null?void 0:v.data)==null?void 0:S.message)||(m==null?void 0:m.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>o(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const E=async()=>{try{const w=await g({projectId:t,clientId:b.clientId});if(!await sw("https://checkout.razorpay.com/v1/checkout.js")){F({title:"Error",description:"Failed to load Razorpay SDK.",variant:"destructive"});return}const T={key:"rzp_test_Lc5DxL3uS4I6F9",amount:w.amount,currency:"INR",name:"Vertical Living",description:"Project Payment",order_id:w.orderId,handler:async function(L){await j({projectId:t,razorpay_order_id:L.razorpay_order_id,razorpay_payment_id:L.razorpay_payment_id,razorpay_signature:L.razorpay_signature}),F({title:"Success",description:"Payment successful!"})},prefill:{name:b.clientName||"",email:b.email||"",contact:b.phoneNo||""},theme:{color:"#0050b3"}};new window.Razorpay(T).open()}catch(w){F({title:"Error",description:w.message||"Payment failed. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 p-2 sm:p-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4",children:[e.jsx("div",{className:"flex items-center gap-3 justify-between",children:e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-money-check-dollar"}),e.jsx("span",{className:"hidden sm:inline",children:"Payment Transaction"}),e.jsx("span",{className:"sm:hidden",children:"Payment"})]})}),e.jsxs(M,{onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),"Go Back"]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-lg border border-gray-200 p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-blue-700 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600"}),"Secure Payment Gateway"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"Securely make your payment to proceed with the project."})]}),e.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 sm:p-5 bg-blue-50 text-center shadow-sm",children:[e.jsx("p",{className:"text-gray-700 text-xs sm:text-sm mb-1",children:"Amount Payable"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:["₹ ",(h==null?void 0:h.toLocaleString("en-IN"))||"0"]})]}),(x==null?void 0:x.status)&&e.jsxs("div",{className:"bg-gray-100 p-3 sm:p-4 rounded-lg border border-gray-300 space-y-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${x.status==="successful"?"fa-circle-check text-green-600":"fa-circle-xmark text-red-600"}`}),e.jsx("span",{className:"font-medium",children:"Status:"})]}),e.jsx("span",{className:`font-semibold ${x.status==="successful"?"text-green-700":"text-red-700"}`,children:x.status.toUpperCase()})]}),x.status==="successful"&&e.jsxs("p",{className:"text-green-700 break-words",children:[e.jsx("span",{className:"font-medium",children:"Paid At:"})," ",new Date(x.paidAt).toLocaleString()]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Order ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:x.gatewayOrderId})]}),x.gatewayPaymentId&&e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Payment ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:x.gatewayPaymentId})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:E,disabled:y||C||(x==null?void 0:x.status)==="successful",className:`w-full py-3 sm:py-4 rounded-md text-white text-base sm:text-lg font-medium transition ${y||C?"bg-blue-400 cursor-not-allowed":(x==null?void 0:x.status)==="successful"?"bg-green-600 cursor-default":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800"}`,children:(x==null?void 0:x.status)==="successful"?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-check"}),"Payment Completed"]}):y||C?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Processing Payment..."}),e.jsx("span",{className:"sm:hidden",children:"Processing..."})]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Pay Now"]})})}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center justify-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-green-600"}),"Secured by Razorpay"]})})]})})]})},Q6=async(t,a)=>(await a.get(`/paymentconfirmation/getpaymentconfirmation/${t}`)).data.data,G6=async(t,a)=>(await a.put(`/paymentconfirmation/toggleconsent/${t}`)).data.data,K6=async(t,a)=>(await a.post(`/paymentconfirmation/generatepayementconsentlink/${t}`)).data.data,V6=async({projectId:t,token:a,api:l})=>(await l.post(`/paymentconfirmation/acceptconsent/${t}/${a}`)).data.data,aw=t=>{const a=["CTO","owner","staff","client"],{role:l}=X(),r=Z(l);return Fe({enabled:!!t&&!!l,queryKey:["payment-confirmation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await Q6(t,r)},retry:!1,refetchOnMount:!1})},Y6=()=>{const t=["CTO","owner","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await G6(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},W6=()=>{const t=["CTO","owner","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await K6(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},X6=()=>{const t=["CTO","owner","client"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o,token:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await V6({projectId:o,token:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},Z6=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/paymentconfirmation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},J6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/paymentconfirmation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},e3=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await Z6({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["payment-confirmation"]})}})},t3=()=>{const t=["owner","staff","CTO"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await J6({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},s3=[{title:"Consent Form",description:"Review and accept client consent agreements.",icon:"📝",path:"consent"},{title:"Schedule Approval",description:"Manage milestone approvals from client & MD.",icon:"📅",path:"schedule"},{title:"Payment Transaction",description:"Track actual payment gateway transactions.",icon:"💳",path:"transaction"}],a3=()=>{var N,T;const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge(),o=mt(),d=Me(),{data:m,isLoading:p,isError:x,refetch:h}=aw(t),{mutateAsync:g,isPending:y}=t3(),{mutateAsync:j,isPending:C}=e3();if(o.pathname.includes("/consent")||o.pathname.includes("/schedule")||o.pathname.includes("/transaction"))return e.jsx(Bt,{});const b=async()=>{var P,L;try{await g({projectId:t}),F({title:"Success",description:"Completion status updated successfully"}),h()}catch(z){F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||z.message||"Failed to update completion status",variant:"destructive"})}};if(p)return e.jsx(jt,{});const{assignedTo:E,timer:v,totalAmount:S,_id:w}=m||{};return e.jsxs("div",{className:"container mx-auto p-2 max-w-full max-h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-sack-dollar mr-2"})," Payment Confirmation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[80%] lg:w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:e.jsxs(M,{isLoading:y,onClick:b,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(vs,{stageNumber:7,stagePath:"paymentconfirmation",projectId:t,className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"PaymentConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:E||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),x&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((T=(N=x==null?void 0:x.response)==null?void 0:N.data)==null?void 0:T.message)||(x==null?void 0:x.message)||"Failed to load payment confirmation data"}),e.jsx(M,{onClick:()=>h(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!x&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:v==null?void 0:v.completedAt,stageName:"paymentconfirmation",formId:w,projectId:t,deadLine:v==null?void 0:v.deadLine,startedAt:v==null?void 0:v.startedAt,refetchStageMutate:h,deadLineMutate:j,isPending:C})]}),e.jsxs(Le,{className:"p-4 mb-6 bg-blue-50 border-l-4 border-blue-600 shadow-md",children:[e.jsxs("div",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Total Payment Amount"]}),e.jsxs("p",{className:"text-3xl text-blue-700 mt-2 font-bold",children:["₹ ",(S==null?void 0:S.toLocaleString())||0]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:s3.map(P=>e.jsx("div",{onClick:()=>d(P.path),className:"cursor-pointer",children:e.jsxs(Le,{className:"hover:shadow-xl border-l-6 border-blue-600 transition bg-blue-100 p-4 sm:p-6 !rounded-xl h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl",children:P.icon}),e.jsx("h3",{className:"text-xl mt-3 font-bold text-blue-800",children:P.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:P.description})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsxs("span",{className:"inline-block bg-blue-600 text-white text-xs px-3 py-1 rounded",children:["Go to ",P.title]})})]})},P.path))})]})]})},n3=()=>{var T,P;const{projectId:t,organizationId:a}=ke(),l=Me(),{data:r,isLoading:o,isError:d,refetch:m,error:p}=aw(t),x=Y6(),h=W6(),g=L=>{navigator.clipboard.writeText(L),F({title:"Copied",description:"Link copied to clipboard."})},y=L=>{const z=`Please review and approve the payment consent:

${L}`,q=encodeURIComponent(z);window.open(`https://wa.me/?text=${q}`,"_blank")},j=async()=>{var L,z;try{await x.mutateAsync({projectId:t}),F({title:"Success",description:"Consent requirement updated."}),m()}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||q.message,variant:"destructive"})}},C=async()=>{var L,z;try{await h.mutateAsync({projectId:t}),F({title:"Success",description:"Consent link generated."}),m()}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||q.message,variant:"destructive"})}};if(o)return e.jsx(jt,{});if(d||!r)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((P=(T=p==null?void 0:p.response)==null?void 0:T.data)==null?void 0:P.message)||(p==null?void 0:p.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const{isConsentRequired:b,paymentClientConsent:{content:E,agreedAt:v,isAgreed:S,agreementToken:w,link:N}}=r;return e.jsxs("div",{className:"space-y-6 w-full max-w-full max-h-full sm:overflow-y-auto mx-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl  lg:text-3xl font-bold text-blue-700 flex items-center",children:[e.jsx("i",{className:"hidden sm:block fa-solid fa-handshake-angle mr-[3px] sm:mr-2"})," Client Consent"]}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(M,{isLoading:x.isPending,size:"sm",onClick:j,className:`text-sm text-white px-2 py-2 rounded ${b?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Make Consent Optional"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Optional"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Require Client Consent"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Mandatory"})]})}),e.jsx(M,{variant:"primary",onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]})]}),e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-circle-info"}),"Consent Status"]})}),e.jsx("div",{className:"p-4",children:v?e.jsxs("div",{className:"bg-green-50 p-4 rounded text-green-800 text-sm border border-green-200 shadow-sm",children:[e.jsx("span",{className:"mr-2",children:"Client Status:"}),e.jsx("strong",{className:"mr-2",children:S?e.jsxs(e.Fragment,{children:["Agreed ",e.jsx("i",{className:"fa-solid fa-circle-check text-green-600 mr-2"})]}):S===null?"Not Agreed Yet":e.jsxs(e.Fragment,{children:["Not Agreed ",e.jsx("i",{className:"fa-solid fa-circle-xmark text-red-600 mr-2"})]})}),e.jsx("br",{}),e.jsxs("span",{children:["Agreed on: ",e.jsx("strong",{children:new Date(v).toLocaleDateString()})]})]}):w?e.jsxs("div",{className:"bg-yellow-50 p-4 rounded text-yellow-800 border border-yellow-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half mr-2"}),"Consent link was generated, waiting for client to approve."]}):e.jsxs("div",{className:"bg-red-50 p-4 rounded text-red-700 border border-red-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-times-circle mr-2"}),"Client has ",e.jsx("strong",{children:"Not yet agreed"}),".",e.jsx("br",{}),"No consent link generated."]})})]}),b&&!v&&e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-link"}),"Consent Link"]})}),e.jsx("div",{className:"p-4 space-y-3",children:!w&&!N?e.jsxs(M,{isLoading:h.isPending,onClick:C,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded",children:[e.jsx("i",{className:"fa-solid fa-wand-magic-sparkles mr-2"}),"Generate Consent Link"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-100",children:[e.jsx("span",{className:"text-sm truncate",children:N}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(M,{variant:"outline",className:"bg-blue-600 text-white hover:bg-blue-700 px-3 py-1 text-sm",onClick:()=>g(N),children:[e.jsx("i",{className:"fa-regular fa-copy mr-1"}),"Copy"]}),e.jsxs(M,{variant:"outline",className:"bg-green-600 text-white hover:bg-green-700 px-3 py-1 text-sm",onClick:()=>y(N),children:[e.jsx("i",{className:"fa-brands fa-whatsapp mr-1"}),"Share"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Share this link with the client to collect consent."})]})})]}),e.jsxs("div",{className:`rounded-lg shadow border border-gray-200 max-h-70 overflow-y-auto custom-scrollbar ${v?"!max-h-[480px]":""} `,children:[e.jsxs("div",{className:"bg-gray-100 px-5 py-3 text-gray-700 font-medium text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-contract"}),"Consent Form Content"]}),e.jsx("div",{className:"prose prose-sm sm:prose base p-5",style:{fontFamily:"Segoe UI, sans-serif"},dangerouslySetInnerHTML:{__html:E||"<p>No content available.</p>"}})]})]})},l3=()=>{var b,E;const{projectId:t,token:a}=ke(),[l,r]=A.useState(""),[o,d]=A.useState(!1),[m,p]=A.useState(!0),{mutateAsync:x,isPending:h,isError:g,error:y}=X6();if(g)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"⚠️ Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((E=(b=y==null?void 0:y.response)==null?void 0:b.data)==null?void 0:E.message)||(y==null?void 0:y.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const j=async()=>{var v,S,w,N;try{const{data:T}=await Qe.get(`http://localhost:3000/api/paymentconfirmation/getpaymentconfirmation/${t}`);r(((S=(v=T==null?void 0:T.data)==null?void 0:v.paymentClientConsent)==null?void 0:S.content)||"")}catch(T){F({title:"Error",description:((N=(w=T==null?void 0:T.response)==null?void 0:w.data)==null?void 0:N.message)||"Unable to fetch consent form.",variant:"destructive"})}finally{p(!1)}},C=async()=>{var v,S;if(!(!t||!a))try{await x({projectId:t,token:a}),F({title:"Thank you!",description:"Your consent has been submitted successfully."})}catch(w){F({title:"Error",description:((S=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:S.message)||"Submission failed.",variant:"destructive"})}};return A.useEffect(()=>{j()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col items-center bg-gray-50 pb-10 ",children:[e.jsx("header",{className:"w-full max-w-full mx-auto border-b border-gray-200 bg-white px-4 py-4 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-start border-black md:justify-start text-center md:text-left",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Company Logo",className:"h-14 w-14 rounded-md object-cover   border-gray-300"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-extrabold text-blue-700 leading-tight",children:yt.COMPANY_NAME}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-500 font-medium",children:"Secure Payment Consent Form"})]})]})}),e.jsxs("div",{className:"w-full bg-white p-4 max-w-3xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-white max-h-[500px] rounded-md border-2 border-[#4e51543a] custom-scrollbar  overflow-y-auto ",children:m?e.jsx("p",{className:"text-gray-600",children:"Loading form content..."}):l?e.jsx("div",{className:"prose prose-sm sm:prose max-w-none",dangerouslySetInnerHTML:{__html:l}}):e.jsx("p",{className:"text-red-500 text-sm",children:"Content not found."})}),e.jsxs("div",{className:"px-5 py-4 bg-white flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("label",{className:"flex items-start gap-2 text-sm text-gray-700 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",onChange:v=>d(v.target.checked),checked:o,className:"mt-1 w-4 h-4 accent-blue-600"}),"I confirm that I have read, understood, and accept the above terms."]}),e.jsxs(M,{disabled:!o,isLoading:h,onClick:C,className:`px-6 py-2 text-white ${o?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Submit Consent"]})]})]}),e.jsxs("footer",{className:"mt-10 w-full text-center text-sm text-gray-500 border-t border-black/70 px-4",children:[e.jsxs("div",{className:"mb-1 font-medium text-gray-600",children:["© ",new Date().getFullYear()," ",yt.COMPANY_NAME]}),e.jsx("div",{className:"text-xs",children:"All rights reserved. For queries, contact our team."})]})]})},r3=async({newPlanType:t,api:a})=>(await a.post("/subscriptionpayment/choosesubscriptionmode",{newPlanType:t})).data.data,i3=async({razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:l,api:r})=>(await r.post("/subscriptionpayment/verify",{razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:l})).data.data,o3=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({newPlanType:r})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await r3({newPlanType:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["organization-subscription"]})}})},c3=()=>{const t=["owner"],{role:a}=X(),l=Z(a);return ie({mutationFn:async({razorpay_order_id:r,razorpay_payment_id:o,razorpay_signature:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await i3({razorpay_order_id:r,razorpay_payment_id:o,razorpay_signature:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["organization-subscription"]})}})},nw=({openMobileSidebar:t,isMobile:a})=>{const l=mt(),[r,o]=A.useState(null),d=l.pathname.split("/").includes("organizations"),{mutateAsync:m,isPending:p}=o3(),{mutateAsync:x,isPending:h}=c3(),g=async y=>{var j,C;try{o(y);const b=await m({newPlanType:y});if(b!=null&&b.orderId){if(!await sw("https://checkout.razorpay.com/v1/checkout.js")){F({title:"Error",description:"Razorpay failed to load",variant:"destructive"});return}const v={key:"rzp_test_Lc5DxL3uS4I6F9",amount:b.amount,currency:b.currency,name:"Vertical Living",description:"Subscription Payment",order_id:b.orderId,handler:async function(w){await x({razorpay_order_id:w.razorpay_order_id,razorpay_payment_id:w.razorpay_payment_id,razorpay_signature:w.razorpay_signature}),F({title:"Success",description:"Subscription payment verified."})},theme:{color:"#0A71F2"}};new window.Razorpay(v).open()}else F({title:"Plan Changed",description:"You have switched your plan successfully."})}catch(b){F({title:"Error",description:((C=(j=b==null?void 0:b.response)==null?void 0:j.data)==null?void 0:C.message)||b.message||"Failed to switch plan",variant:"destructive"})}finally{o(null)}};return e.jsxs("div",{className:"min-h-full bg-gray-100  flex flex-col items-center",children:[e.jsx(e.Fragment,{children:d&&a?e.jsxs("div",{className:"w-full flex items-center justify-center mb-2 py-2 px-2 bg-white",children:[e.jsx("button",{onClick:t,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"w-full",children:e.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold text-gray-800",children:"Upgrade Plan"})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-4xl w-full text-center py-5",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-[#2f303a] mb-2",children:d?"Upgrade your Plan":"Choose Plan"}),e.jsx("p",{className:"text-md text-gray-500",children:"Choose a subscription plan to match your needs"})]})})}),e.jsx("div",{className:" px-4 py-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Ab.map(y=>e.jsxs("div",{className:`group border-t-[6px] ${y.color} rounded-xl bg-white shadow-md p-6 flex flex-col justify-between transition hover:shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-2xl font-bold ${y.planNameColor}`,children:y.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Billed every 30 days"})]}),e.jsxs("div",{className:"text-center my-5",children:[e.jsx("h3",{className:`${y.price?"text-3xl":"text-xl"} font-extrabold text-gray-800`,children:y.price?`₹ ${y.price}`:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-400",children:"/ month"})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:y.features.length>0?y.features.map((j,C)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${j.includes("✔")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:j.replace("✔","").replace("✘","")})]},C)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})}),y.price?e.jsx(M,{isLoading:h||p,onClick:()=>g(y.key),disabled:r===y.key||h,className:`w-full py-2 mt-auto text-white rounded-md font-medium ${r===y.key||h?"bg-gray-400 !cursor-not-allowed":y.btnColor} transition`,children:r===y.key||h?"Processing...":"Choose Plan"}):e.jsx(M,{disabled:!0,className:"w-full py-2 mt-auto text-white rounded-md font-medium bg-gray-400 hover:!bg-gray-400 !cursor-not-allowed",children:"Coming Soon"})]},y.key))})]})},W0={ADMIN:"/login",CTO:"/login/cto",STAFF:"/login/staff",WORKER:"/login/worker",CLIENT:"/login/client"};function d3(){const[t,a]=A.useState(!1),[l,r]=A.useState(window.innerWidth<470),o=()=>{a(!0)};return A.useEffect(()=>{const d=()=>{r(window.innerWidth<470)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[l?e.jsx(ki,{labels:rc,path:W0,isOpen:t,onClose:()=>a(!1)}):e.jsx(Ci,{path:W0,labels:rc,icons:Eb}),e.jsx("main",{className:"flex-1 relative",children:e.jsx(Bt,{context:{isMobile:l,openMobileSidebar:o}})})]})}const u3=async(t,a)=>{var r;const l=await a.get(`/adminwall/${t}`);return(r=l==null?void 0:l.data)==null?void 0:r.data},m3=async(t,a,l)=>(await l.get(`/adminwall/${t}/step/${a}`)).data,f3=async(t,a,l,r)=>(await r.post(`/adminwall/${t}/step/${a}/correction`,l,{headers:{"Content-Type":"multipart/form-data"}})).data,h3=async(t,a,l,r)=>(await r.patch(`/adminwall/${t}/step/${a}/approve`,l)).data,x3=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO"];return Fe({queryKey:["adminSOP",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return u3(t,l)}})},p3=(t,a)=>{const{role:l}=X(),r=Z(l),o=["owner","staff","CTO"];return Fe({queryKey:["adminStep",t,a],queryFn:()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return m3(t,a,r)}})},g3=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,stepNumber:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return f3(r,o,d,a)}})},b3=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,stepId:o,payload:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return h3(r,o,d,a)}})};function y3(){const{projectId:t}=ke(),{pathname:a}=mt(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ge(),{data:d,isLoading:m,error:p}=x3(t),x=a.endsWith("/adminwall");return m?e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500",children:"Loading..."}):p?e.jsx("div",{className:"flex justify-center items-center h-40 text-red-500",children:p==null?void 0:p.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50 overflow-y-auto custom-scrollbar",children:x?e.jsxs("div",{className:"flex-1 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl text-left sm:text-center font-bold mb-2 text-gray-800",children:[r&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Admin Wall Painting Steps"]}),e.jsx("p",{className:"text-gray-600 text-base mb-2 text-center hidden sm:block",children:"Select a step to manage its details."})]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Rb.map(h=>{var y;const g=(y=d==null?void 0:d.steps)==null?void 0:y.find(j=>(j==null?void 0:j.stepNumber)===h.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs(Ft,{to:`step/${g==null?void 0:g._id}/${h.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:h.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",h.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},h.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4  bg-white border-b border-gray-200 shadow z-10",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl text-blue-600 font-semibold",children:"Admin Side"}),e.jsx(M,{onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(Bt,{context:{isMobile:r,openMobileSidebar:o}})})]})})}function w3(){var L,z;const{projectId:t,stepId:a,stepNumber:l}=ke(),[r,o]=A.useState(""),[d,m]=A.useState(null),[p,x]=A.useState(!1),[h,g]=A.useState(null),{mutate:y}=b3(),{mutate:j}=g3(),{data:C,isLoading:b}=p3(t,a),E=Rb.find(q=>q.stepNumber===Number(l)),v=()=>{x(!1)},S=()=>{x(!1)},w=(q,B)=>{g({url:q,alt:B})},N=()=>{g(null)},T=()=>{if((!d||(d==null?void 0:d.length)===0)&&!r){alert("Please select files or write something in notes");return}const q=new FormData;if(d&&d.length)for(let B=0;B<d.length;B++)q.append("files",d[B]);q.append("adminNote",r),j({projectId:t,stepNumber:l,formData:q})};if(b)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!E)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"❌"}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const P=({src:q,alt:B})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>w(q,B),children:[p&&e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gray-200 animate-pulse rounded-lg flex items-center justify-center z-10",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:q,alt:B,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400 cursor-pointer",onLoadStart:()=>x(!0),onLoad:v,onError:S}),e.jsx("button",{onClick:de=>{de.stopPropagation(),Vt({src:q,alt:B})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[h&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors z-10",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:h.url,alt:h.alt,className:"max-w-full max-h-full object-contain rounded-lg"})]}),e.jsx("div",{className:"absolute inset-0 -z-10",onClick:N})]}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${l})`," "," ",E.label]})}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:px-6 sm:py-3 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📋"}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:E.rules.map((q,B)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:"✅"}),e.jsx("span",{children:q})]},B))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"👷"}),"Worker latest Uploads"]}),(z=(L=C==null?void 0:C.step)==null?void 0:L.workerInitialUploads)!=null&&z.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:C.step.workerInitialUploads.map((q,B)=>e.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-3 shadow-sm",children:q.type==="image"?e.jsx(P,{src:q==null?void 0:q.url,alt:(q==null?void 0:q.originalName)||`Upload ${B+1}`}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 sm:h-40 md:h-48 bg-blue-50 rounded-lg border-2 border-dashed border-blue-300",children:[e.jsx("div",{className:"text-blue-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm text-center px-2 font-medium",children:q.originalName})]})},B))}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📁"}),e.jsx("p",{className:"font-medium",children:"No initial uploads found."})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"⚡"}),"Review Actions"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:()=>y({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:"✅"}),"Approve Step"]}),e.jsxs("button",{onClick:()=>y({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:"❌"}),"Reject Step"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📝"}),"Add Correction"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Add Correction Note"}),e.jsx("textarea",{rows:4,value:r,onChange:q=>o(q.target.value),placeholder:"Provide detailed feedback and correction instructions...",className:"w-full p-3 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Correction Images:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:q=>m(q.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Submit Correction"})]})]})]})]})]})})]})})]})}const v3=async(t,a)=>{var r;return(r=(await a.get(`/workerwall/${t}`)).data)==null?void 0:r.data},j3=async(t,a,l)=>{const r=await l.get(`/workerwall/${t}/step/${a}`);return console.log("res form getsworkerdetialapi",r),r.data},N3=async(t,a,l,r)=>(await r.post(`/workerwall/${t}/step/${a}/initial`,l,{headers:{"Content-Type":"multipart/form-data"}})).data,S3=async(t,a,l,r,o)=>(await o.post(`/workerwall/${t}/step/${a}/correction/${l}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,C3=t=>{const{role:a}=X(),l=Z(a),r=["worker","staff","owner","CTO"];return Fe({queryKey:["workerSOP",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return v3(t,l)}})},k3=(t,a)=>{const{role:l}=X(),r=Z(l),o=["worker","staff","owner","CTO"];return Fe({queryKey:["workerStep",t,a],queryFn:()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return j3(t,a,r)}})},E3=()=>{const{role:t}=X(),a=Z(t),l=["worker","staff"];return ie({mutationFn:async({projectId:r,stepNumber:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return N3(r,o,d,a)}})},A3=()=>{const{role:t}=X(),a=Z(t),l=["worker","staff"];return ie({mutationFn:async({projectId:r,stepNumber:o,correctionRound:d,formData:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return S3(r,o,d,m,a)}})};function O3(){const{projectId:t}=ke(),{pathname:a}=mt(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ge(),{data:d,isLoading:m,error:p}=C3(t),x=a.endsWith("/workerwall");return m?e.jsx("p",{className:"text-gray-600",children:"Loading..."}):p?e.jsx("p",{className:"text-red-500",children:p==null?void 0:p.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50",children:x?e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:[e.jsxs("h2",{className:"text-xl md:text-3xl text-left font-bold mb-6 sm:text-center text-gray-800",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Wall Painting Steps"]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:Ob.map(h=>{var y;const g=(y=d==null?void 0:d.steps)==null?void 0:y.find(j=>(j==null?void 0:j.stepNumber)===h.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs(Ft,{to:`step/${g==null?void 0:g._id}/${h.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:h.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",h.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},h.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4 py-4 bg-white border-b border-gray-200 shadow z-10",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Side"]}),e.jsx(M,{onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(Bt,{})})]})})}function R3(){var z,q,B,de;const{projectId:t,stepId:a,stepNumber:l}=ke(),[r,o]=A.useState(null),[d,m]=A.useState(null),[p,x]=A.useState(!1),[h,g]=A.useState(null),{data:y,isLoading:j}=k3(t,a),{mutate:C}=E3(),{mutate:b}=A3(),E=Ob.find(Q=>Q.stepNumber===Number(l)),v=()=>{x(!1)},S=()=>{x(!1)},w=(Q,$)=>{g({url:Q,alt:$})},N=()=>{g(null)};if(j)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!E)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"❌"}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const T=()=>{if(!r||r.length===0){alert("Please select files for initial upload.");return}const Q=new FormData;for(let $=0;$<r.length;$++)Q.append("files",r[$]);C({projectId:t,stepNumber:l,formData:Q})},P=Q=>{if(!d||d.length===0){alert("Please select files for correction upload.");return}const $=new FormData;for(let ee=0;ee<d.length;ee++)$.append("files",d[ee]);b({projectId:t,stepNumber:l,correctionRound:Q,formData:$})},L=({src:Q,alt:$})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>w(Q,$),children:[p&&e.jsx("div",{className:" pointer-events-none absolute z-20 inset-0 bg-gray-900 animate-pulse rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:Q,alt:$,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400",onLoadStart:()=>x(!0),onLoad:v,onError:S}),e.jsx("button",{onClick:ee=>{ee.stopPropagation(),Vt({src:Q,alt:$})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[h&&e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:N,children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:h.url||"/placeholder.svg",alt:h.alt,className:"max-w-full max-h-full object-contain rounded-lg",onClick:Q=>Q.stopPropagation()})]})}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${l})`," "," ",E.label]}),e.jsxs("p",{className:"text-blue-600 hidden",children:["Step ",l]})]}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-6 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📋"}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:E.rules.map((Q,$)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:"✅"}),e.jsx("span",{children:Q})]},$))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📤"}),"Your Initial Uploads"]}),(q=(z=y==null?void 0:y.data)==null?void 0:z.initialUploads)!=null&&q.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:y.data.initialUploads.map((Q,$)=>e.jsx(e.Fragment,{children:e.jsx(L,{src:(Q==null?void 0:Q.url)||"/placeholder.svg",alt:`Initial Upload ${$+1}`},$)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📁"}),e.jsx("p",{className:"font-medium",children:"No initial uploads yet."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Initial Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:Q=>o(Q.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Files"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🔄"}),"Correction Rounds"]}),(de=(B=y==null?void 0:y.data)==null?void 0:B.correctionRounds)!=null&&de.length?e.jsx("div",{className:"space-y-6",children:y.data.correctionRounds.map(Q=>{var $,ee;return e.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-2 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-blue-800",children:["Correction Round ",Q==null?void 0:Q.roundNumber]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-2",children:[e.jsx("i",{className:"fas fa-circle-info mr-1 sm:mr-2 "}),"Admin Note:"]}),e.jsxs("p",{className:"text-blue-700",children:[Q.adminNote," "]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Admin Reference Images:"}),Q!=null&&Q.adminUploads.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:($=Q==null?void 0:Q.adminUploads)==null?void 0:$.map((V,le)=>e.jsx(e.Fragment,{children:e.jsx(L,{src:V.url||"/placeholder.svg",alt:`Admin Upload ${le+1}`},le)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📁"}),e.jsx("p",{className:"font-medium",children:"No Admin uploads"})]})]}),((ee=Q.workerCorrectedUploads)==null?void 0:ee.length)>0?e.jsxs("div",{className:"mb-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Your Correction Uploads:"}),e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:Q.workerCorrectedUploads.map((V,le)=>e.jsx(e.Fragment,{children:e.jsx(L,{src:V.url||"/placeholder.svg",alt:`Worker Correction ${le+1}`},le)}))})})]}):e.jsxs("div",{className:"text-center py-8 border-t border-gray-200 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📁"}),e.jsx("p",{className:"font-medium",children:"No Worker correction uploads"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Correction Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:V=>m(V.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:()=>P(Q==null?void 0:Q.roundNumber),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Corrections"})]})]})]},Q.roundNumber)})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"✅"}),e.jsx("p",{className:"font-medium",children:"No corrections requested yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Your work is on track!"})]})]})]})})]})})]})}const T3=()=>{const{openMobileSidebar:t,isMobile:a}=Ge();return e.jsx(nw,{openMobileSidebar:t,isMobile:a})},P3=async({api:t,profileData:a})=>{try{const{data:l}=await t.put("/profile/update-profile",a);if(l.ok)return l;throw new Error((l==null?void 0:l.message)||"Profile update failed.")}catch(l){throw console.error("Profile update error:",l),l}},M3=()=>{const{role:t}=X(),a=Z(t),l=["owner","client","staff","CTO","worker"];return ie({mutationFn:async({name:r,email:o,phoneNo:d})=>{if(!t)throw new Error("Not authorized.");if(!l.includes(t))throw new Error("Role not allowed.");if(!a)throw new Error("API not found.");return await P3({api:a,profileData:{name:r,email:o,phoneNo:d}})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["user-profile"]})}})},X0={owner:{label:"Owner",color:"bg-blue-100 text-blue-800 border-blue-200",icon:"👑"},staff:{label:"Staff",color:"bg-blue-100 text-blue-800 border-blue-200",icon:"👥"},CTO:{label:"CTO",color:"bg-blue-100 text-blue-800 border-blue-200",icon:"🚀"},client:{label:"Client",color:"bg-blue-100 text-blue-800 border-blue-200",icon:"🤝"},worker:{label:"Worker",color:"bg-blue-100 text-blue-800 border-blue-200",icon:"⚡"}};function L3(){const{openMobileSidebar:t,isMobile:a}=Ge(),{role:l,_id:r}=ps(w=>w.authStore),o=ws(),d=l==="owner"?ps(w=>w.userProfileStore):l==="staff"?ps(w=>w.staffProfileStore):l==="CTO"?ps(w=>w.CTOProfileStore):l==="client"?ps(w=>w.clientProfileStore):l==="worker"?ps(w=>w.workerProfileStore):null,m=()=>d?"userName"in d?d.userName:"staffName"in d?d.staffName:"CTOName"in d?d.CTOName:"clientName"in d?d.clientName:"workerName"in d?d.workerName:"-":"-",[p,x]=A.useState({name:m(),email:(d==null?void 0:d.email)||"",phoneNo:(d==null?void 0:d.phoneNo)||""}),{mutateAsync:h,isPending:g}=M3(),[y,j]=A.useState(!1),C=w=>{x(N=>({...N,[w.target.name]:w.target.value}))},b=async()=>{var w,N;try{const T=await h({name:p.name,email:p.email,phoneNo:p.phoneNo});F({title:"Success",description:"Completion status updated successfully"});const P={email:p.email,phoneNo:p.phoneNo,role:l,isauthenticated:!0};switch(l){case"owner":o(pc({...P,userId:T.data._id,userName:p.name}));break;case"staff":o(Ic({...P,staffId:T.data._id,staffName:p.name}));break;case"CTO":o(Bc({...P,CTOId:T.data._id,CTOName:p.name}));break;case"client":o(Hc({...P,clientId:T.data._id,clientName:p.name}));break;case"worker":o($c({...P,workerId:T.data._id,workerName:p.name}));break;default:throw new Error("Unknown role")}j(!1)}catch(T){F({title:"Error",description:((N=(w=T==null?void 0:T.response)==null?void 0:w.data)==null?void 0:N.message)||T.message||"Failed to update profile data",variant:"destructive"})}},E=()=>{x({name:m(),email:"",phoneNo:""}),j(!1)},v=X0[l]||X0.worker,S=m().charAt(0).toUpperCase();return e.jsxs("div",{className:"max-h-screen overflow-y-auto bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0 flex-1",children:[a&&e.jsx("button",{onClick:t,className:"p-2 rounded-lg border border-gray-700 hover:bg-gray-300 transition-colors lg:hidden flex-shrink-0",title:"Open Menu",children:e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-bars !text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-gray-100 rounded-lg flex-shrink-0",children:e.jsx("i",{className:"w-5 h-5 sm:w-6 sm:h-6 fas fa-user text-gray-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 truncate",children:"My Profile"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Manage your personal information"})]})]})]}),!y&&e.jsxs(M,{onClick:()=>j(!0),className:"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs sm:text-sm font-medium flex-shrink-0",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pen"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Profile"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})]})})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 px-4 sm:px-6 py-6 sm:py-8 text-white",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:flex-row",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-2xl sm:text-3xl font-bold text-white border-2 sm:border-3 border-white/30 shadow-lg flex-shrink-0",children:S}),e.jsxs("div",{className:"text-center md:text-left flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2 sm:mb-3 break-words",children:m()}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 sm:gap-3 mb-2 flex-wrap",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:v.icon}),e.jsx("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-semibold bg-white/90 text-gray-800 border border-white/30",children:v.label})]}),e.jsxs("p",{className:"text-white/80 text-xs sm:text-sm break-all",children:["ID: ",r]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[y&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pencil"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Edit Mode"})]}),e.jsx("p",{className:"text-blue-700 text-xs sm:text-sm mt-1",children:"Make your changes and click save when you're done."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-user inline mr-2"}),"Full Name"]}),e.jsx("input",{type:"text",name:"name",value:p.name,onChange:C,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-envelope inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:p.email,onChange:C,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your email address"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-phone inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phoneNo",value:p.phoneNo,onChange:C,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your phone number"})]})]}),y&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200",children:[e.jsxs(M,{isLoading:g,onClick:b,disabled:g,className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm sm:text-base order-1 sm:order-none",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-save"}),"Save Changes"]}),e.jsx("button",{onClick:E,disabled:g,className:"px-4 sm:px-6 py-2.5 sm:py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium text-sm sm:text-base order-2 sm:order-none",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-shield text-gray-600"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Account Summary"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"User ID:"}),e.jsx("span",{className:"text-gray-900 font-mono text-xs sm:text-sm bg-gray-100 px-2 py-1 rounded break-all",children:r||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"Role:"}),e.jsxs("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ${v.color} w-fit`,children:[v.icon," ",v.label]})]})]})]})]})})]})}const F3=async({api:t,id:a,section:l,notes:r})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/notes/${l}`,{notes:r});if(o.ok)return o;throw new Error(o.message||"Failed to update notes")},D3=async({api:t,id:a,section:l,isRequired:r})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/boolean/${l}`,{isRequired:r});if(o.ok)return o;throw new Error(o.message||"Failed to update boolean")},_3=async({api:t,projectId:a})=>{const{data:l}=await t.get(`/prerequireties/getalldetails/${a}`);if(l.ok)return l;throw new Error(l.message||"Failed to get all PreRequireties")},q3=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({id:r,section:o,notes:d})=>{if(!t)throw new Error("Not Authorized");if(!l.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await F3({api:a,id:r,section:o,notes:d})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["preRequireties"]})}})},z3=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({id:r,section:o,isRequired:d})=>{if(!t)throw new Error("Not Authorized");if(!l.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await D3({api:a,id:r,section:o,isRequired:d})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["preRequireties"]})}})},U3=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO"];return Fe({queryKey:["preRequireties",t],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!r.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await _3({api:l,projectId:t})},retry:!1,refetchOnMount:!1})},I3=({title:t,section:a,isRequired:l,notes:r,formId:o,onUpdate:d})=>{const[m,p]=A.useState(!1),[x,h]=A.useState(r),[g,y]=A.useState(!1),j=z3(),C=q3(),b=async w=>{try{await j.mutateAsync({id:o,section:a,isRequired:w}),F({title:"Success",description:`${t} requirement updated successfully`}),d()}catch(N){F({title:"Error",description:N instanceof Error?N.message:"Failed to update requirement",variant:"destructive"})}},E=async()=>{if(x!==r){y(!0);try{await C.mutateAsync({id:o,section:a,notes:x}),F({title:"Success",description:`${t} notes updated successfully`}),d()}catch(w){F({title:"Error",description:w instanceof Error?w.message:"Failed to update notes",variant:"destructive"}),h(r)}finally{y(!1)}}},v=()=>{E()},S=w=>{w.key==="Enter"&&w.ctrlKey&&E()};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100",onClick:()=>p(!m),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`fas ${m?"fa-chevron-down":"fa-chevron-right"} text-gray-400`}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),l?e.jsxs("span",{className:"flex items-center text-green-600 text-sm",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),"Required"]}):e.jsxs("span",{className:"flex items-center text-gray-500 text-sm",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-1"}),"Not Required"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:w=>{w.stopPropagation(),b(w.target.checked)},disabled:j.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-200"} ${j.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${l?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),j.isPending&&e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})]})]})}),m&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:w=>b(w.target.checked),disabled:j.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-200"} ${j.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${l?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"This work is required for the project"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes & Additional Details"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{placeholder:`Add notes about ${t.toLowerCase()}...`,value:x,onChange:w=>h(w.target.value),onBlur:v,onKeyDown:S,className:"w-full min-h-[100px] p-3 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:g}),g&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Press Ctrl+Enter to save or click outside the text area"})]})]})})]})},$3=()=>{var g,y,j,C,b;const{projectId:t}=ke(),{isMobile:a,openMobileSidebar:l}=Ge(),{data:r,isLoading:o,error:d,refetch:m}=U3(t),p=[{key:"modularWork",title:"Modular Work",description:"Prefabricated components and modular construction",_id:(g=r==null?void 0:r.data)==null?void 0:g._id},{key:"electricalWork",title:"Electrical Work",description:"Wiring, fixtures, and electrical installations",_id:(y=r==null?void 0:r.data)==null?void 0:y._id},{key:"plumbingWork",title:"Plumbing Work",dzescription:"Water supply, drainage, and plumbing fixtures",_id:(j=r==null?void 0:r.data)==null?void 0:j._id},{key:"civilWork",title:"Civil Work",description:"Structural work, foundations, and civil engineering",_id:(C=r==null?void 0:r.data)==null?void 0:C._id},{key:"decorationWork",title:"Decoration Work",description:"Interior design, painting, and finishing touches",_id:(b=r==null?void 0:r.data)==null?void 0:b._id}],x=()=>{m()};if(o)return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading project prerequisites..."})]})});if(d)return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:d instanceof Error?d.message:"Failed to load prerequisites"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Try Again"})})]});if(!(r!=null&&r.data))return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-yellow-600 mr-2"}),e.jsx("p",{className:"text-yellow-800",children:"No prerequisites data found for this project. Please ensure the project exists and try again."})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh"})})]});const h=r.data;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"max-h-full overflow-y-auto mx-auto px-4 py-4 custom-scrollbar",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center hidden sm:block space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-700",children:"Project Prerequisites"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Configure the required work types for your project. These prerequisites must be completed before proceeding to the 14-step process."})]}),e.jsx("header",{className:"block sm:hidden space-y-2",children:e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Project Prerequisites"]})}),e.jsx("div",{className:"space-y-4",children:p.map(E=>{const v=h[E.key];return e.jsx(I3,{title:E.title,section:E.key,isRequired:(v==null?void 0:v.isRequired)||!1,notes:(v==null?void 0:v.notes)||"",formId:E._id,onUpdate:x},E.key)})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prerequisites Summary"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:p.map(E=>{const v=h[E.key],S=(v==null?void 0:v.isRequired)||!1;return e.jsxs("div",{className:"flex items-center space-x-2",children:[S?e.jsx("i",{className:"fas fa-check-circle text-green-600"}):e.jsx("i",{className:"fas fa-exclamation-circle text-gray-400"}),e.jsx("span",{className:`text-sm ${S?"text-green-600 font-medium":"text-gray-500"}`,children:E.title})]},E.key)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(M,{variant:"ghost",onClick:()=>m(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh Data"}),e.jsx(M,{onClick:()=>{F({title:"Success",description:"Prerequisites configured successfully. You can now proceed to the 14-step process."})},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Continue to Next Steps"})]})]})})})},B3=async(t,a,l,r,o)=>{const d=new FormData;Object.keys(l).forEach(p=>{const x=l[p];x!==void 0&&(Array.isArray(x)?x.forEach(h=>d.append(p,h)):d.append(p,x))}),r.forEach(p=>{d.append("images",p)});const{data:m}=await o.post(`/modularunit/create/${t}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});if(!m.ok)throw new Error(m.message);return m.data},H3=async(t,a,l,r,o)=>{const d=new FormData;Object.keys(l).forEach(p=>{const x=l[p];x!==void 0&&(Array.isArray(x)?x.forEach(h=>d.append(p,h)):d.append(p,x))}),r.forEach(p=>{d.append("images",p)}),console.log("formvalues form api",d);const{data:m}=await o.put(`/modularunit/update/${t}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});if(!m.ok)throw new Error(m.message);return m.data},Q3=async(t,a,l,r)=>{console.log(a);const{data:o}=await r.delete(`/modularunit/delete/${t}/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},G3=async(t,a,l,r={},o="")=>{const d=new URLSearchParams;Object.entries(r).forEach(([h,g])=>{g.length>0&&d.append(h,g.join(","))}),o&&d.append("searchQuery",o);const m=d.toString(),p=`/modularunit/getunits/${a}/${t}${m?"?"+m:""}`,{data:x}=await l.get(p);if(!x.ok)throw new Error(x.message);return x.data},K3=async(t,a)=>{const{data:l}=await a.get(`/modularunit/getallunits/${t}`);if(!l.ok)throw new Error(l.message);return l.data},V3=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({organizationId:r,unitType:o,formValues:d,files:m})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return console.log("formvalues form hooks",d),await B3(r,o,d,m,a)},onSuccess:(r,{unitType:o})=>{Ee.invalidateQueries({queryKey:["modularUnits",o]})}})},Y3=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({unitType:r,unitId:o,formValues:d,files:m})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await H3(r,o,d,m,a)},onSuccess:(r,{unitType:o})=>{Ee.invalidateQueries({queryKey:["modularUnits",o]})}})},W3=()=>{const{role:t}=X(),a=Z(t),l=["owner","staff","CTO"];return ie({mutationFn:async({organizationId:r,unitType:o,unitId:d})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await Q3(r,o,d,a)},onSuccess:(r,{unitType:o})=>{Ee.invalidateQueries({queryKey:["modularUnits",o]})}})},X3=(t,a,l={},r="")=>{const{role:o}=X(),d=Z(o),m=["owner","staff","CTO","client"];return Fe({queryKey:["modularUnits",t,a,l,r],queryFn:async()=>{if(!o)throw new Error("Not Authorized");if(!m.includes(o))throw new Error("Not allowed to make this API call");if(!d)throw new Error("API instance not found for role");return await G3(t,a,d,l,r)},retry:!1,refetchOnMount:!1})},Z3=t=>{const{role:a}=X(),l=Z(a),r=["owner","staff","CTO","client"];return Fe({queryKey:["mixedUnits",t],queryFn:async()=>{if(!a)throw new Error("Role missing");if(!r.includes(a))throw new Error("Not allowed to make this API call");if(!l)throw new Error("API instance not found for role");return await K3(t,l)},retry:!1,refetchOnMount:!1})},Cc={showcase:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing","Floor-to-Ceiling","Corner Showcase","Floating Showcase"]},length:{label:"Length",type:"select",options:["600 mm","900 mm","1200 mm","1500 mm","1800 mm","2100+ mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm","600 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF","HDHMR","Particle Board","Engineered Wood"]},frontMaterial:{label:"Front Material",type:"select",options:["Laminate","Acrylic","PU","Membrane","Glass","Aluminium + Glass"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured","Wood Grain","Veneer","Lacquered"]},storageType:{label:"Storage Type",type:"select",options:["Open Display","Closed Shutters","Mixed Storage"]},shutterType:{label:"Shutter Type",type:"select",options:["Glass","Wooden","Aluminium-Framed Glass","Mirror Finish"]},glassVisibility:{label:"Glass Visibility",type:"select",options:["Clear","Frosted","Tinted"]},lighting:{label:"Lighting",type:"select",options:["Spotlights","Strip Lights","Warm Backlight","No Lighting"]},installationType:{label:"Installation Type",type:"select",options:["Floor Mounted","Wall Mounted","Hybrid"]},usagePurpose:{label:"Usage Purpose",type:"select",options:["Living Room","Dining Area","Hallway","Commercial Display","Puja Showcase"]},addOns:{label:"Add-ons",type:"checkbox",options:["Mirror Back Panel","Decorative Handles","Soft-Close Hinges","Lockable Sections"]},compartments:{label:"Compartments",type:"select",options:["1 Door","2 Doors","3+ Doors","1–4 Drawers","1–5+ Shelves"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹5,000–₹10,000","₹10,000–₹25,000","₹25,000–₹50,000","₹50,000+"]},price:{label:"Price",type:"number",required:!0}},falseCeiling:{name:{label:"Name",type:"text",required:!0},ceilingType:{label:"Ceiling Type",type:"select",options:["Pop","Gypsum","PVC","Wooden","Metal"]},lightingType:{label:"Lighting Type",type:"select",options:["Spotlight","LED Strip","Cove","Pendant"]},roomType:{label:"Room Type",type:"select",options:["Living Room","Bedroom","Hallway","Commercial"]},materialType:{label:"Material Type",type:"select",options:["Gypsum","POP","PVC","Wood"]},designStyle:{label:"Design Style",type:"select",options:["Modern","Traditional","Minimalistic"]},colorTheme:{label:"Color Theme",type:"select",options:["White","Beige","Custom"]},levels:{label:"Levels",type:"select",options:["Single","Double","Multi"]},edgeProfile:{label:"Edge Profile",type:"select",options:["Straight","Curved"]},fixtureIntegration:{label:"Fixture Integration",type:"select",options:["Fan","Light","AC Vent"]},panelType:{label:"Panel Type",type:"select",options:["Flat","Recessed"]},shapeGeometry:{label:"Shape & Geometry",type:"select",options:["Rectangular","Circular","Custom"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},installationComplexity:{label:"Installation Complexity",type:"select",options:["Low","Medium","High"]},budgetRange:{label:"Budget Range",type:"select",options:["₹5,000–₹10,000","₹10,000–₹25,000","₹25,000+"]},price:{label:"Price",type:"number",required:!0}},shoeRack:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Open","Closed","Bench Style"]},length:{label:"Length",type:"select",options:["600 mm","900 mm","1200 mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm"]},height:{label:"Height",type:"select",options:["600 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF","Particle Board"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Laminate","Acrylic"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Pull"]},shoeCapacity:{label:"Shoe Capacity",type:"select",options:["6 Pairs","10 Pairs","15 Pairs+"]},ventilation:{label:"Ventilation",type:"select",options:["Louvered","Mesh"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},usagePurpose:{label:"Usage Purpose",type:"select",options:["Home","Office"]},addOns:{label:"Add-ons",type:"checkbox",options:["Soft-Close Hinges","Locks"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹5,000–₹10,000","₹10,000–₹25,000","₹25,000+"]},price:{label:"Price",type:"number",required:!0}},wardrobe:{name:{label:"Name",type:"text",required:!0},wardrobeType:{label:"Wardrobe Type",type:"select",options:["Sliding","Hinged","Walk-in"]},length:{label:"Length",type:"select",options:["1200 mm","1800 mm","2400 mm+"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["2100 mm","2400 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Laminate","Acrylic"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Handle-less"]},internalAccessories:{label:"Internal Accessories",type:"checkbox",options:["Pull-out Basket","Tie Rack"]},mirrorProvision:{label:"Mirror Provision",type:"select",options:["Yes","No"]},lighting:{label:"Lighting",type:"select",options:["LED Strip","Spotlight"]},lockType:{label:"Lock Type",type:"select",options:["Central Lock","Individual Lock"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹10,000–₹25,000","₹25,000–₹50,000"]},price:{label:"Price",type:"number",required:!0}},tv:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing","Panel Unit"]},length:{label:"Length",type:"select",options:["1200 mm","1500 mm","1800 mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm"]},height:{label:"Height",type:"select",options:["1200 mm","1500 mm"]},panelMaterial:{label:"Panel Material",type:"select",options:["Plywood","MDF","Particle Board"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed","Mixed"]},shutterType:{label:"Shutter Type",type:"select",options:["Glass","Wooden","Aluminium-Framed"]},openShelves:{label:"Open Shelves",type:"select",options:["Yes","No"]},lighting:{label:"Lighting",type:"select",options:["Spotlights","Strip Lights","None"]},addOns:{label:"Add-ons",type:"checkbox",options:["Cable Manager","Sound Bar Mount"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹10,000–₹25,000","₹25,000–₹50,000"]},price:{label:"Price",type:"number",required:!0}},BedCot:{name:{label:"Name",type:"text",required:!0},bedType:{label:"Bed Type",type:"select",options:["Single","Double","Queen","King"]},length:{label:"Length",type:"select",options:["1800 mm","2000 mm"]},breadth:{label:"Breadth",type:"select",options:["900 mm","1200 mm","1500 mm"]},height:{label:"Height",type:"select",options:["450 mm","600 mm"]},frameMaterial:{label:"Frame Material",type:"select",options:["Wood","Metal","Engineered Wood"]},headboardMaterial:{label:"Headboard Material",type:"select",options:["Plywood","Upholstered","MDF"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy","Textured"]},storageType:{label:"Storage Type",type:"select",options:["Box Storage","Drawer Storage","No Storage"]},addOns:{label:"Add-ons",type:"checkbox",options:["Hydraulic Lift","LED Headboard"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Knock Down","Pre-assembled"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹10,000–₹25,000","₹25,000–₹50,000","₹50,000+"]},price:{label:"Price",type:"number",required:!0}},kitchenCabinet:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Base","Wall","Tall Unit"]},internalLayout:{label:"Internal Layout",type:"select",options:["Shelf","Drawer","Pull-out"]},compartments:{label:"Compartments",type:"select",options:["1 Door","2 Doors","3+ Doors"]},featureTags:{label:"Feature Tags",type:"checkbox",options:["Soft Close","Hydraulic Hinges"]},dimensions:{label:"Dimensions",type:"text"},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF","Particle Board"]},doorsMaterial:{label:"Doors Material",type:"select",options:["Laminate","Acrylic","PU"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured"]},ssHardwareBrand:{label:"SS Hardware Brand",type:"select",options:["Hettich","Hafele"]},visibilityType:{label:"Visibility Type",type:"select",options:["Open","Closed"]},positionUsage:{label:"Position Usage",type:"select",options:["Corner","Straight","L-Shape"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},designCollection:{label:"Design Collection",type:"select",options:["Modern","Classic","Contemporary"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹25,000–₹50,000","₹50,000+"]},price:{label:"Price",type:"number",required:!0}},studyTable:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing"]},length:{label:"Length",type:"select",options:["900 mm","1200 mm","1500 mm"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["750 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF"]},tableTopMaterial:{label:"Table Top Material",type:"select",options:["Laminate","Acrylic","Wood"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},addOns:{label:"Add-ons",type:"checkbox",options:["Cable Tray","Drawer Lock"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Knock Down","Pre-assembled"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹5,000–₹10,000","₹10,000–₹25,000"]},price:{label:"Price",type:"number",required:!0}},crockery:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Base","Wall","Tall Unit"]},length:{label:"Length",type:"select",options:["900 mm","1200 mm","1500 mm"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["750 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Glass","Wooden"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte"]},glassType:{label:"Glass Type",type:"select",options:["Clear","Frosted"]},lighting:{label:"Lighting",type:"select",options:["Spotlight","Strip Lights"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Pull"]},addOns:{label:"Add-ons",type:"checkbox",options:["Soft-Close Hinges","Locks"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["₹10,000–₹25,000","₹25,000–₹50,000"]},price:{label:"Price",type:"number",required:!0}}},J3=async(t,a)=>{const{data:l}=await a.post("/selectedmodularunits/add",t);if(!l.ok)throw new Error(l.message);return l.data},eP=async(t,a)=>{const{data:l}=await a.get(`/selectedmodularunits/get/${t}`);if(!l.ok)throw new Error(l.message);return l.data},tP=async(t,a,l)=>{const{data:r}=await l.delete(`/selectedmodularunits/delete/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},sP=async(t,a)=>{const{data:l}=await a.post(`/selectedmodularunits/projects/${t}/modular-unit/complete`);if(!l.ok)throw new Error(l.message);return l.data},aP=()=>{const t=["owner","CTO","staff"],{role:a}=X(),l=Z(a),r=Se();return ie({mutationFn:async o=>{if(!a)throw new Error("Not Authorized");if(!t.includes(a))throw new Error("Not allowed to make this API call");if(!l)throw new Error("API instance not found for role");return await J3(o,l)},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["selected-modular-units",d.projectId]})}})},nP=t=>{const a=["owner","CTO","staff","client","worker"],{role:l}=X(),r=Z(l);return Fe({queryKey:["selected-modular-units",t],queryFn:async()=>{if(!l)throw new Error("Not Authorized");if(!a.includes(l))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await eP(t,r)},enabled:!!t&&!!l,retry:!1,refetchOnMount:!1})},lP=()=>{const{role:t}=X(),a=Z(t),l=Se(),r=["owner","CTO","staff"];return ie({mutationFn:async o=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await tP(o.projectId,o.unitId,a)},onSuccess:(o,d)=>{l.invalidateQueries({queryKey:["selected-modular-units",d.projectId]})}})},rP=()=>{const{role:t}=X(),a=Z(t),l=Se(),r=["owner","CTO","staff"];return ie({mutationFn:async({projectId:o})=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await sP(o,a)},onSuccess:(o,d)=>{l.invalidateQueries({queryKey:["selected-modular-units",d]}),l.invalidateQueries({queryKey:["payment-confirmation",d]}),l.invalidateQueries({queryKey:["cost-estimation",d]}),l.invalidateQueries({queryKey:["material-room-confirmation",d]})}})},lw=({unit:t,onEdit:a})=>{var S,w,N;const{projectId:l}=ke(),[r,o]=A.useState(!1),{mutateAsync:d,isPending:m}=W3(),{mutateAsync:p,isPending:x}=aP(),h=mt(),[g,y]=A.useState(!1),[j,C]=A.useState(1),b=h.pathname.includes("projectdetails"),E=async()=>{var T,P;try{if(!window.confirm("Are you sure you want to delete this unit?"))return;await d({unitId:t._id,unitType:t.category,organizationId:t.organizationId}),F({title:"Success",description:"Product deleted successfully"})}catch(L){F({title:"Error",description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.message)||(L==null?void 0:L.message)||"Failed to delete",variant:"destructive"})}},v=async()=>{var T,P,L;if(!j||j<=0){F({title:"Invalid Quantity",description:"Quantity must be greater than 0"});return}try{const z={image:(T=t==null?void 0:t.images[0])==null?void 0:T.url,customId:t.customId,unitId:t._id,projectId:l,category:t.category,singleUnitCost:t.price,quantity:j};await p(z),F({title:"Success",description:"Unit selected successfully"}),y(!1)}catch(z){console.error(z),F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||"Failed to select unit"})}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100 hover:border-blue-200",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200",children:[(w=(S=t.images)==null?void 0:S[0])!=null&&w.url&&!r?e.jsx("img",{src:t.images[0].url||"/placeholder.svg",alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:()=>o(!0)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-image text-gray-400 text-3xl mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No Image"})]})}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx("div",{className:"flex gap-2"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm",children:t==null?void 0:t.category})}),t.price&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"bg-green-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign"}),t.price.toLocaleString()]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-base mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:t.name||"Unnamed Product"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("i",{className:"fas fa-hashtag text-gray-400 text-xs"}),e.jsx("p",{className:"text-xs text-gray-500 font-mono truncate",children:t.customId||t._id})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-tag text-blue-500 text-xs"}),"Category"]}),e.jsx("span",{className:"font-medium text-gray-900 capitalize truncate ml-2",children:(t==null?void 0:t.category)||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign text-green-500 text-xs"}),"Price"]}),e.jsxs("span",{className:"font-bold text-green-600",children:["₹",((N=t.price)==null?void 0:N.toLocaleString())||"N/A"]})]})]}),b?e.jsx(e.Fragment,{children:g?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{type:"number",min:1,value:j,onChange:T=>C(Number(T.target.value)),placeholder:"Enter Quantity",className:"w-full"}),e.jsx(M,{variant:"primary",isLoading:x,onClick:v,className:"w-full",children:"Submit"})]}):e.jsxs(M,{variant:"primary",className:"w-full",onClick:()=>y(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Select"]})}):e.jsxs("div",{className:"flex gap-2",children:[a&&e.jsxs(M,{onClick:()=>a(t),className:"flex-1 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 hover:border-blue-300 py-2 px-3 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(M,{variant:"danger",onClick:E,disabled:m,className:"flex-1 bg-red-600 text-white  py-2 px-3 rounded-lg transition-all disabled:opacity-50 text-sm",children:[e.jsx("i",{className:`fas ${m?"fa-spinner fa-spin":"fa-trash"} mr-1`}),m?"Deleting...":"Delete"]})]})]})]})};function Z0(){const{isMobile:t,openMobileSidebar:a}=Ge(),{organizationId:l,projectId:r}=ke(),[o,d]=A.useState(""),[m,p]=A.useState(""),[x,h]=A.useState(!1),g=Me(),y=mt(),j=y.pathname.includes("projectdetails"),{data:C,isLoading:b,isError:E}=Z3(l);if(b)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Loading products..."})]})});const v=y.pathname.includes("add")||y.pathname.includes("category")||y.pathname.includes("selectedunits"),S=Object.keys(Cc).filter(w=>w.toLowerCase().includes(m.toLowerCase()));return e.jsx(e.Fragment,{children:v?e.jsx("div",{className:`${j?"max-h-full":"h-screen"}  bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto`,children:e.jsx(Bt,{context:{isMobile:t,openMobileSidebar:a}})}):e.jsxs("div",{className:`${j?"max-h-full":"h-screen"} bg-gradient-to-br from-gray-50 to-blue-50 flex flex-col overflow-hidden `,children:[e.jsx("div",{className:"bg-white shadow-lg border-b z-40 flex-shrink-0",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex ",children:[t&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx("i",{className:"fas fa-cube text-white text-xl"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl  font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Product Catalog"}),e.jsx("p",{className:"text-sm text-gray-500 sm:block hidden",children:"Manage your modular units"})]})]}),e.jsxs("div",{className:"flex sm:none",children:[j?e.jsx("div",{className:"p-2 border-2 border-gray-300 rounded-lg",children:e.jsx(Ft,{to:`/${l}/projectdetails/${r}/modularunits/selectedunits`,children:e.jsx("i",{className:"fas fa-shopping-cart text-xl text-blue-600 "})})}):e.jsxs(M,{onClick:()=>g("add"),className:"hidden md:flex  sm:px-4 py-2  items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-plus"}),"Add ",e.jsx("span",{className:"hidden sm:inline",children:"New Product"})]}),e.jsx("button",{onClick:()=>h(!x),className:"md:hidden border-2 border-gray-300  ml-1 cursor-pointer p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors",children:e.jsx("i",{className:"fas fa-box text-lg text-blue-600"})})]})]})})}),e.jsx("div",{className:"flex-1 flex overflow-hidden ",children:e.jsxs("div",{onClick:()=>h(!1),className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex gap-6 w-full overflow-hidden",children:[e.jsxs("aside",{className:`
                  fixed md:static inset-y-0 left-0 !z-50 w-80 md:w-72 bg-white md:bg-white/90 md:backdrop-blur-sm
                  transform ${x?"translate-x-0":"-translate-x-full"} md:translate-x-0
                  transition-transform duration-300 ease-in-out md:transition-none
                  shadow-2xl md:shadow-lg rounded-r-2xl md:rounded-2xl border-r md:border
                  flex flex-col md:h-full
                `,children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:hidden",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Categories"}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:m,onChange:w=>p(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-gray-50 focus:bg-white"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4 flex items-center gap-2 sticky top-0 bg-white py-2",children:[e.jsx("i",{className:"fas fa-layer-group"}),"Product Categories"]}),e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${o===""?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{d(""),h(!1)},children:[e.jsx("i",{className:"fas fa-th-large"}),e.jsx("span",{className:"font-medium",children:"All Products"}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${o===""?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:(C==null?void 0:C.length)||0})]}),S.map(w=>{var N;return e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${o===w?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{g(`category/${w}`),h(!1)},children:[e.jsx("i",{className:"fas fa-cube"}),e.jsx("span",{className:"font-medium capitalize",children:w}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${o===w?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:((N=C==null?void 0:C.filter(T=>T.unitType===w))==null?void 0:N.length)||0})]},w)})]})}),e.jsx("div",{className:"flex-shrink-0 p-2 sm:p-6 border-t md:hidden",children:e.jsxs(M,{onClick:()=>{g("add"),h(!1)},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-4 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus"}),"Add New Product"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 mb-3",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl sm:p-6 p-2 px-4 shadow-lg border",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between ",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 sm:mb-2 mb-1",children:o?`${o} Products`:"All Products"}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-info-circle"}),C!=null&&C.length?`${C.length} products available`:"No products found"]})]})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto ",children:b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):E?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(C==null?void 0:C.length)===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-cube text-gray-400 text-5xl mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first product to the catalog."}),e.jsxs(M,{onClick:()=>g("add"),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Product"]})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 pb-6 overflow-y-auto",children:C==null?void 0:C.map(w=>e.jsx(e.Fragment,{children:e.jsx(lw,{unit:w},`${w._id}-5`)}))})})})]})]})})]})})}const iP=["_id","organizationId","customId","images","createdAt","updatedAt","__v"];function rw({unitToEdit:t,setUnitToEdit:a}){const l=Me(),{organizationId:r}=ke(),[o,d]=A.useState((t==null?void 0:t.category)||"showcase"),m=Cc[o],[p,x]=A.useState(t||{}),[h,g]=A.useState([]),{mutateAsync:y,isPending:j}=V3(),{mutateAsync:C,isPending:b}=Y3();if(!m)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-red-200 max-w-md",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4 block text-center"}),e.jsx("p",{className:"text-red-600 text-center font-semibold",children:"Invalid unit type selected."})]})});const E=(P,L)=>{x(z=>({...z,[P]:L}))},v=P=>{P.target.files&&g(Array.from(P.target.files))},S=P=>Object.fromEntries(Object.entries(P).filter(([L])=>!iP.includes(L))),w=async P=>{var L,z;P.preventDefault();try{if(!p.name)throw new Error("Name is required");if(!p.price||p.price<0)throw new Error("Enter valid price");console.log("formValues",p);const q={...p,category:o};if(console.log("formValues after updated",q),t){const B=S(q);await C({unitId:t._id,formValues:B,unitType:o,files:h}),F({title:"Success",description:"Product updated successfully"})}else await y({organizationId:r,unitType:o,formValues:q,files:h}),F({title:"Success",description:"Product added successfully"})}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||(q==null?void 0:q.message)||"operation failed",variant:"destructive"})}},N=P=>{d(P),x({}),g([])},T=()=>{a&&a(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-lg border-b",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 lg:px-8 sm:py-6 py-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between sm:gap-4 gap-2",children:[e.jsxs("div",{className:"flex items-center sm:gap-4 gap-2",children:[e.jsxs("div",{onClick:()=>l(-1),className:"flex gap-2 items-center cursor-pointer rounded-full hover:bg-gray-100 p-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("p",{className:"",children:"Back"})]}),e.jsx("div",{className:"bg-gradient-to-r  from-blue-600 to-purple-600 p-3 rounded-xl",children:e.jsx("i",{className:`fas ${t?"fa-edit":"fa-plus"} text-white text-xl`})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:[t?"Edit":"Add New"," ",o," ",e.jsx("span",{className:"hidden sm:inline",children:"Unit"})]}),e.jsx("p",{className:"text-gray-600 mt-1 hidden sm:block",children:t?"Update product information":"Create a new product in your catalog"})]})]}),!t&&e.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 p-4 rounded-xl",children:[e.jsxs("label",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-layer-group text-blue-600"}),"Select Unit Type"]}),e.jsxs(Je,{value:o,onValueChange:N,children:[e.jsx(Xe,{className:"min-w-[200px] bg-white",children:e.jsx(et,{placeholder:"Choose Unit Type",selectedValue:o})}),e.jsx(Ze,{children:Object.keys(Cc).map(P=>e.jsx(ye,{value:P,children:e.jsx("span",{className:"capitalize",children:P})},P))})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border p-8",children:e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Object.entries(m).map(([P,L])=>{var z,q;return L.label==="Budget Range"||L.label==="Price Range"?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(fe,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-500"}),L.label,L.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),L.type==="text"&&e.jsx(ce,{value:p[P]||"",onChange:B=>E(P,B.target.value),required:L.required,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",placeholder:`Enter ${L.label.toLowerCase()}`}),L.type==="number"&&e.jsx(ce,{type:"number",value:p[P]||"",onChange:B=>E(P,+B.target.value),required:L.required,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",placeholder:`Enter ${L.label.toLowerCase()}`}),L.type==="select"&&e.jsxs(Je,{onValueChange:B=>E(P,B),value:p[P]||"",children:[e.jsx(Xe,{className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",children:e.jsx(et,{placeholder:`Select ${L.label}`,selectedValue:p[P]})}),e.jsx(Ze,{children:(z=L.options)==null?void 0:z.map(B=>e.jsx(ye,{value:B,children:B},B))})]}),L.type==="checkbox"&&e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 max-h-40 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:(q=L.options)==null?void 0:q.map(B=>{var de;return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-white rounded-lg p-2 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:((de=p[P])==null?void 0:de.includes(B))||!1,onChange:Q=>{const $=Q.target.checked;x(ee=>{const V=ee[P]||[];return{...ee,[P]:$?[...V,B]:V.filter(le=>le!==B)}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700",children:B})]},B)})})})]},P)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(fe,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-images text-blue-500"}),"Upload Images"]}),e.jsx("div",{className:"relative",children:e.jsx(ce,{type:"file",multiple:!0,accept:"image/*",onChange:v,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),h.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-check-circle"}),h.length," file(s) selected"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 pt-6 border-t border-gray-200",children:[e.jsx(M,{type:"submit",disabled:j||b,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-4 rounded-xl text-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:j||b?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`fas ${t?"fa-save":"fa-plus"} mr-2`}),t?"Update Unit":"Create Unit"]})}),t&&e.jsx(M,{variant:"secondary",className:" px-12 py-4 rounded-xl text-lg ",onClick:T,children:"Cancel"})]})]})})})]})}function J0(){const{isMobile:t,openMobileSidebar:a}=Ge(),{unitType:l,organizationId:r}=ke(),[o,d]=A.useState({}),[m,p]=A.useState({}),[x,h]=A.useState(""),[g,y]=A.useState(""),[j,C]=A.useState(!1),{data:b,isLoading:E,isError:v}=X3(l,r,m,g),[S,w]=A.useState(null),N=Object.entries(Cc[l]||{}).filter(([z,q])=>q.type==="select"||q.type==="checkbox"),T=()=>{y(x)},P=z=>{z.key==="Enter"&&T()},L=Object.values(o).flat().length;return e.jsx(e.Fragment,{children:S?e.jsx(rw,{unitToEdit:S,setUnitToEdit:w}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-blue-800 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 sm:mb-0",children:[t&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white/20 rounded-xl",children:e.jsx("i",{className:"fas fa-cube text-xl"})}),e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold capitalize",children:[l," Collection"]}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Premium ",l," products"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx("i",{className:"fas fa-box text-sm"}),e.jsxs("span",{className:"text-sm font-medium",children:[(b==null?void 0:b.length)||0," Products"]})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border mb-6 sticky top-4 z-30",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-between",children:e.jsxs("div",{className:"flex-1 flex gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"}),e.jsx(ce,{placeholder:"Search by name, id, etc.",value:x,onChange:z=>h(z.target.value),onKeyDown:P,className:"pl-10 pr-4 py-2 rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white text-sm"})]}),e.jsxs(M,{isLoading:E,onClick:T,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-search mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]}),e.jsxs(M,{variant:"primary",onClick:()=>C(z=>!z),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-filter"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),L>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:L})]})]})})}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>C(!1)}),e.jsx("div",{className:"fixed inset-x-8  sm:top-32 top-13 bottom-4 sm:inset-x-8 md:left-1/2 md:transform md:-translate-x-1/2 md:w-full md:max-w-4xl bg-white rounded-2xl shadow-2xl border z-50 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-sliders-h text-blue-600"}),"Advanced Filters"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[L>0&&e.jsxs(M,{variant:"danger",onClick:()=>d({}),className:"bg-red-600 text-white px-3 py-1 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Clear All (",L,")"]}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times text-lg"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:N.map(([z,q])=>{var B;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-500"}),q.label]}),q.type==="select"&&q.options&&e.jsxs(Je,{onValueChange:de=>d(Q=>({...Q,[z]:de?[de]:[]})),children:[e.jsx(Xe,{className:"w-full rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500",children:e.jsx(et,{placeholder:"All",selectedValue:((B=o[z])==null?void 0:B[0])||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"All"}),q.options.map(de=>e.jsx(ye,{value:de,children:de},de))]})]}),q.type==="checkbox"&&q.options&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-32 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:q.options.map(de=>{var Q;return e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white rounded p-1 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:((Q=o[z])==null?void 0:Q.includes(de))||!1,onChange:$=>{d(ee=>{const V=ee[z]||[];return{...ee,[z]:$.target.checked?[...V,de]:V.filter(le=>le!==de)}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700 text-sm",children:de})]},de)})})})]},z)})})}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(M,{isLoading:E,onClick:()=>{p(o),C(!1)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-lg shadow-lg",children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Apply Filters"]})})})]})})]}),E?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):v?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-2xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(b==null?void 0:b.length)===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-search text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No Products Found"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["No ",l," products match your current filters."]}),e.jsxs(M,{onClick:()=>{d({}),p({}),h(""),y("")},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-refresh mr-2"}),"Clear Filters"]})]})}):e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:b==null?void 0:b.map(z=>e.jsx(lw,{unit:z,onEdit:w},z._id))})]})]})})}function oP(){const{projectId:t,organizationId:a}=ke(),{isMobile:l,openMobileSidebar:r}=Ge(),o=Me(),{data:d,isLoading:m,refetch:p}=Mf(t),{mutateAsync:x,isPending:h}=gk(),[g,y]=A.useState(null),j=S=>{h||y(S)},C=async()=>{var S,w;if(!(!g||h))try{const N=await x({projectId:t,mode:g});F({title:"Success",description:`${g} has been selected.`}),p(),N==="Manual Flow"?o(`/${a}/projectdetails/${t}/materialselection`):N==="Modular Units"&&o(`/${a}/projectdetails/${t}/modularunits`)}catch(N){F({title:"Error",description:((w=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:w.message)||N.message||"Failed to update stage selection",variant:"destructive"})}},b=S=>(d==null?void 0:d.mode)===S,E=S=>g===S,v=[{id:"Modular Units",title:"Modular Units",description:"Streamlined approach with pre-configured units and standardized pricing",icon:"fas fa-cube",colorClass:"bg-blue-500",features:["Pre-defined unit pricing","Quick configuration","Standardized components","skips 2 stages"],badge:"Recommended"},{id:"Manual Flow",title:"Manual Flow",description:"Complete customization with detailed material selection and cost estimation",icon:"fas fa-sliders-h",colorClass:"bg-purple-500",features:["Full customization","Material selection","Cost estimation","Detailed configuration"],badge:"Advanced"}];return e.jsx("div",{className:"h-full overflow-y-auto bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsx("div",{className:"min-h-full p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full shadow-lg mb-6",children:e.jsx("i",{className:"fas fa-layer-group text-2xl text-slate-700"})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"Select Your Project Stage"}),e.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Choose the approach that best fits your project requirements and timeline"})]}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading stage selection..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center mb-12",children:e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 items-start sm:items-center sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-semibold",children:"1"}),e.jsx("span",{className:"sm:ml-2 text-sm font-medium text-slate-700",children:"Stage Selection"})]}),l?e.jsx("i",{className:"mx-auto fas fa-arrow-down text-slate-400"}):e.jsx("i",{className:"mx-auto fas fa-arrow-right text-slate-400"}),e.jsxs("div",{className:"flex items-center sm:ml-2",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 text-slate-600 rounded-full flex items-center justify-center text-sm font-semibold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-slate-500",children:"Configuration"})]}),l?e.jsx("i",{className:"mx-auto fas fa-arrow-down text-slate-400"}):e.jsx("i",{className:"mx-auto fas fa-arrow-right text-slate-400"}),e.jsxs("div",{className:"flex items-center sm:ml-2",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 text-slate-600 rounded-full flex items-center justify-center text-sm font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-slate-500",children:"Implementation"})]})]})}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-medium",children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("span",{children:"Step 1: Select an option below, then confirm your choice"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:v.map(S=>{const w=b(S.id),N=E(S.id);return e.jsx("div",{onClick:()=>j(S.id),className:`cursor-pointer transition-all duration-300 hover:-translate-y-1 relative ${h?"pointer-events-none opacity-75":""}`,children:e.jsxs(Le,{className:`overflow-hidden border-2 transition-all duration-300 ${w?"border-green-500 bg-green-50 shadow-lg ring-2 ring-green-200":N?"border-blue-500 bg-blue-50 shadow-lg ring-2 ring-blue-200":"border-slate-200 hover:border-slate-300 hover:shadow-lg"}`,children:[e.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[w&&e.jsxs("div",{className:"flex items-center space-x-1 bg-green-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"fas fa-check"}),e.jsx("span",{children:"Confirmed"})]}),N&&!w&&e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"fas fa-hand-pointer"}),e.jsx("span",{children:"Selected"})]})]}),e.jsxs(Dt,{className:"p-8",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:`w-12 h-12 ${S.colorClass} rounded-lg flex items-center justify-center transition-all duration-300 ${N||w?"scale-110 shadow-lg":""}`,children:e.jsx("i",{className:`${S.icon} text-white text-xl`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ${w?"text-green-800":N?"text-blue-800":"text-slate-900"}`,children:S.title})}),e.jsx("p",{className:`leading-relaxed transition-colors duration-300 ${w?"text-green-700":N?"text-blue-700":"text-slate-600"}`,children:S.description})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:`text-sm font-semibold mb-3 transition-colors duration-300 ${w?"text-green-800":N?"text-blue-800":"text-slate-700"}`,children:"Key Features:"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:S.features.map((T,P)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${w?"bg-green-500":N?"bg-blue-500":"bg-slate-400"}`}),e.jsx("span",{className:`text-sm transition-colors duration-300 ${w?"text-green-700":N?"text-blue-700":"text-slate-600"}`,children:T})]},P))})]}),w&&e.jsx("div",{className:"mt-6 p-3 bg-green-100 rounded-lg border border-green-200",children:e.jsxs("p",{className:"text-sm text-green-800 font-medium",children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),"This option is currently active"]})}),N&&!w&&e.jsx("div",{className:"mt-6 p-3 bg-blue-100 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[e.jsx("i",{className:"fas fa-hand-pointer mr-2"}),'Click "Confirm Selection" below to proceed']})})]})]})},S.id)})}),g&&e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-2 border-blue-200 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:[e.jsx("i",{className:"fas fa-check-double mr-2 text-blue-600"}),"Confirm Your Selection"]}),e.jsxs("p",{className:"text-slate-600 mb-4",children:["You have selected ",e.jsx("span",{className:"font-semibold text-blue-600",children:g}),". Click confirm to proceed to the next stage."]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs(M,{onClick:()=>y(null),variant:"outline",disabled:h,className:"px-6",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(M,{onClick:C,disabled:h,className:"px-6 bg-blue-600 hover:bg-blue-700",children:h?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Confirm Selection"]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:[e.jsx("i",{className:"fas fa-question-circle mr-2 text-blue-500"}),"Need help choosing?"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-slate-600",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-slate-800 mb-2",children:[e.jsx("i",{className:"fas fa-cube mr-2 text-blue-500"}),"Choose Modular Units if:"]}),e.jsxs("ul",{className:"space-y-1 ml-6",children:[e.jsx("li",{children:"• You want to get started quickly"}),e.jsx("li",{children:"• Standard configurations meet your needs"}),e.jsx("li",{children:"• You prefer predictable pricing"}),e.jsx("li",{children:"• You can skip 2 stages"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-slate-800 mb-2",children:[e.jsx("i",{className:"fas fa-sliders-h mr-2 text-purple-500"}),"Choose Manual Flow if:"]}),e.jsxs("ul",{className:"space-y-1 ml-6",children:[e.jsx("li",{children:"• You need complete customization"}),e.jsx("li",{children:"• You want detailed cost breakdowns"}),e.jsx("li",{children:"• You have specific material requirements"}),e.jsx("li",{children:"• You prefer granular control"})]})]})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 flex items-center space-x-3",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-xl"}),e.jsx("span",{className:"text-slate-700 font-medium",children:"Processing your selection..."})]})})]})]})})})}function cP(){const{projectId:t}=ke(),{isMobile:a,openMobileSidebar:l}=Ge(),{data:r,isLoading:o,error:d,refetch:m}=nP(t),{mutateAsync:p,isPending:x}=lP(),{mutateAsync:h,isPending:g}=rP(),y=async N=>{try{await p({projectId:t,unitId:N}),F({title:"Success",description:"Unit removed successfully"}),m()}catch(T){F({title:"Error",description:(T==null?void 0:T.message)||"Failed to delete unit",variant:"destructive"})}},j=async()=>{try{await h({projectId:t}),F({title:"Success",description:"Selection completed successfully"})}catch(N){F({title:"Error",description:(N==null?void 0:N.message)||"Failed to complete selection",variant:"destructive"})}},C=N=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(N),b=N=>N.replace(/([A-Z])/g," $1").replace(/^./,T=>T.toUpperCase()).trim(),E=N=>`/placeholder.svg?height=200&width=300&text=${encodeURIComponent(b(N))}`,v=(r==null?void 0:r.selectedUnits)||[],S=(r==null?void 0:r.totalCost)||0,w=v.length>0;return o?e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200 px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Selected Units"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-600 text-lg",children:"Loading selected units..."})]})})]}):d?e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200 px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Selected Units"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-3xl text-red-500 mb-4"}),e.jsx("p",{className:"text-red-600 text-lg mb-4",children:"Failed to load selected units"}),e.jsxs(M,{onClick:()=>m(),variant:"outline",children:[e.jsx("i",{className:"fas fa-refresh mr-2"}),"Try Again"]})]})})]}):e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200 px-4 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Selected Units"}),e.jsx("div",{className:"flex items-center space-x-4 mt-1",children:!a&&e.jsxs(Wn,{variant:"secondary",className:"text-xs px-2 py-1 ",children:[e.jsx("i",{className:"fas fa-cube mr-1"}),v.length," ",v.length===1?"Unit":"Units"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-center space-x-4 w-full sm:w-fit",children:[e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Total Cost"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-green-600",children:C(S)})]}),e.jsx(M,{isLoading:g,onClick:j,disabled:g||!w,className:"px-4 md:px-6 bg-green-600 hover:bg-green-700 text-white",children:g?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),a?"...":"Completing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),a?"Complete":"Complete Selection"]})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("div",{className:"max-w-full mx-auto",children:w?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-4",children:v.map((N,T)=>e.jsxs(Le,{className:"hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[e.jsx("img",{src:N.image||E(N.category),alt:b(N.category),className:"w-full border h-full ",onError:P=>{const L=P.target;L.src=E(N.category)}}),e.jsx(M,{isLoading:x,onClick:()=>y(N.unitId.toString()),disabled:x,variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-white/90 hover:bg-white text-red-500 hover:text-red-700 shadow-sm",children:e.jsx("i",{className:"fas fa-trash text-sm"})})]}),e.jsx(ns,{className:"pb-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ys,{className:"text-base md:text-lg font-semibold text-slate-900 truncate",children:b(N.category)}),e.jsxs("p",{className:"text-xs text-slate-500 truncate",children:[e.jsx("i",{className:"fas fa-hashtag text-gray-500 text-xs "})," ",N==null?void 0:N.customId]})]})})}),e.jsx(Dt,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-shopping-cart text-slate-400 text-xs"}),e.jsx("span",{className:"font-semibold text-slate-900",children:N.quantity})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Unit Cost:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-rupee-sign text-slate-400 text-xs"}),e.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:C(N.singleUnitCost)})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Total:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-calculator text-green-500 text-xs"}),e.jsx("span",{className:"font-bold text-green-600 text-sm",children:C(N.quantity*N.singleUnitCost)})]})]})]})})]},`${N.unitId}-${T}`))})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-6",children:e.jsx("i",{className:"fas fa-cube text-3xl text-slate-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Units Selected"}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"You haven't selected any modular units yet. Start by adding units to your project."})]})})})})]})}function dP(){const[t,a]=A.useState(null),[l,r]=A.useState(null),{isauthenticated:o}=ps(d=>d.authStore);return Hy(),e.jsx(e.Fragment,{children:e.jsxs(TN,{children:[e.jsx(we,{path:"/",element:o?e.jsx(zm,{to:"/organizations",replace:!0}):e.jsx(Wg,{})}),e.jsxs(we,{path:"/login",element:e.jsx(d3,{}),children:[e.jsx(we,{index:!0,element:e.jsx(L0,{})})," ",e.jsx(we,{path:"cto",element:e.jsx($0,{})}),e.jsx(we,{path:"staff",element:e.jsx(z0,{})}),e.jsx(we,{path:"worker",element:e.jsx(I0,{})}),e.jsx(we,{path:"client",element:e.jsx(B0,{})})]}),e.jsx(we,{path:"/home",element:e.jsx(Wg,{})}),e.jsx(we,{path:"/unauthorized",element:e.jsx(Qy,{})}),e.jsx(we,{path:"/stafflogin",element:e.jsx(z0,{})}),e.jsx(we,{path:"/login",element:e.jsx(L0,{})}),e.jsx(we,{path:"/workerlogin",element:e.jsx(I0,{})}),e.jsx(we,{path:"/ctologin",element:e.jsx($0,{})}),e.jsx(we,{path:"/clientlogin",element:e.jsx(B0,{})}),e.jsx(we,{path:"/staffregister",element:e.jsx(BE,{})}),e.jsx(we,{path:"/workerregister",element:e.jsx(HE,{})}),e.jsx(we,{path:"/ctoregister",element:e.jsx(VE,{})}),e.jsx(we,{path:"/clientregister",element:e.jsx(YE,{})}),e.jsx(we,{path:"/subscription",element:e.jsx(nw,{})}),e.jsx(we,{path:"/organizations",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(UE,{})})}),e.jsxs(we,{path:"/organizations/:organizationId",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(KE,{})}),children:[e.jsx(we,{index:!0,element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx($E,{})})}),e.jsx(we,{path:"invitestaff",element:e.jsx(Te,{allowedRoles:["CTO","owner","staff"],children:e.jsx(QE,{})})}),e.jsx(we,{path:"invitecto",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(GE,{})})}),e.jsx(we,{path:"subscriptionplan",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(T3,{})})}),e.jsx(we,{path:"userprofile",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(L3,{})})}),e.jsxs(we,{path:"modularunits",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(Z0,{})}),children:[e.jsx(we,{path:"add",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(rw,{})})}),e.jsx(we,{path:"category/:unitType",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","client"],children:e.jsx(J0,{})})})]})]}),e.jsx(we,{path:"/organizations/:organizationId/projects",element:e.jsx(wk,{projectId:t,setProjectId:a}),children:e.jsx(we,{index:!0,element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx($k,{})})})}),e.jsxs(we,{path:"/:organizationId/projectdetails/:projectId",element:e.jsx(Te,{allowedRoles:["owner","client","CTO","worker","staff"],children:e.jsx(Nk,{projectId:t,setProjectId:a,setOrganizationId:r,organizationId:l})}),children:[e.jsx(we,{path:"prerequireties",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx($3,{})})}),e.jsx(we,{path:"workers",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(U0,{})})}),e.jsx(we,{path:"inviteclient",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(WE,{})})}),e.jsx(we,{path:"requirementform",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(IA,{})})}),e.jsx(we,{path:"sitemeasurement",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(g4,{})})}),e.jsx(we,{path:"sampledesign",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(L4,{})})}),e.jsx(we,{path:"technicalconsultant",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(Q4,{})})}),e.jsx(we,{path:"selectstage",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(oP,{})})}),e.jsxs(we,{path:"modularunits",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(Z0,{})}),children:[e.jsx(we,{path:"selectedunits",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(cP,{})})}),e.jsx(we,{path:"category/:unitType",element:e.jsx(Te,{allowedRoles:["owner","staff","CTO","client"],children:e.jsx(J0,{})})})]}),e.jsx(we,{path:"materialselection",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(uO,{})}),children:e.jsx(we,{path:"materialroom/:roomId",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(fO,{})})})}),e.jsxs(we,{path:"costestimation",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(zO,{})}),children:[e.jsx(we,{path:"roomdetails/:roomId",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(IO,{})})}),e.jsx(we,{path:"roomdetails/labour",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(BO,{})})})]}),e.jsxs(we,{path:"paymentconfirmation",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(a3,{})}),children:[e.jsx(we,{path:"consent",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(n3,{})})}),e.jsx(we,{path:"schedule",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(_6,{})})}),e.jsx(we,{path:"transaction",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(H6,{})})})]}),e.jsx(we,{path:"ordermaterial",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(mR,{})}),children:e.jsx(we,{path:"ordermaterialroom/:roomKey",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(xR,{})})})}),e.jsx(we,{path:"materialarrival",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(LR,{})}),children:e.jsx(we,{path:"materialarrivalroom/:roomKey",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(FR,{})})})}),e.jsxs(we,{path:"workmainschedule",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(hT,{})}),children:[e.jsx(we,{path:"workschedule/:sectionId",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(xT,{})})}),e.jsx(we,{path:"dailyschedule/:sectionId",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(pT,{})})})]}),e.jsx(we,{path:"installation",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(OT,{})}),children:e.jsx(we,{path:"installationroom/:roomkey",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(RT,{})})})}),e.jsxs(we,{path:"qualitycheck",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff"],children:e.jsx(HT,{})}),children:[e.jsx(we,{path:"qualitycheckroom/:roomkey",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(QT,{})})}),e.jsx(we,{path:"qualitycheckroom/adminwall",element:e.jsx(y3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(w3,{})})}),e.jsx(we,{path:"qualitycheckroom/workerwall",element:e.jsx(O3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(R3,{})})})]}),e.jsx(we,{path:"cleaning",element:e.jsx(o6,{}),children:e.jsx(we,{path:"cleaningroom/:roomId",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(c6,{})})})}),e.jsx(we,{path:"projectdelivery",element:e.jsx(Te,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(S6,{})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(we,{path:"/phase",element:e.jsx(Te,{allowedRoles:["owner"],children:e.jsx(z2,{})})}),e.jsx(we,{path:"/issues",element:e.jsx(Te,{allowedRoles:["owner"],children:e.jsx(q2,{})})}),e.jsx(we,{path:"/tasks",element:e.jsx(Te,{allowedRoles:["owner"],children:e.jsx(U2,{})})})]}),e.jsx(we,{path:"/workers",element:e.jsx(Te,{allowedRoles:["staff"],children:e.jsx(U0,{})})}),e.jsx(we,{path:"/requirementform/:projectId/:token",element:e.jsx(kA,{})}),e.jsx(we,{path:"/ordermaterial/public/:projectId/:token",element:e.jsx(DR,{})}),e.jsx(we,{path:"/materialarrival/public/:projectId/:token",element:e.jsx(_R,{})}),e.jsx(we,{path:"/clientconsent/public/:projectId/:token",element:e.jsx(l3,{})}),e.jsx(we,{path:"*",element:e.jsx(Bk,{})})]})})}zj.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(k2,{store:$t,children:e.jsx(oS,{client:Ee,children:e.jsx(s2,{children:e.jsx(dP,{})})})})}));
