import{u as d,q as h}from"./index-By5P0A7l.js";import{g}from"./roleCheck-YGaMnK_P.js";import{u as y}from"./useQuery-Cc7pLKfK.js";import{u as m}from"./useMutation-7YLqc7VE.js";import{u as P}from"./useInfiniteQuery-DQF0m-E9.js";const E=async({organizationId:t,vendorId:a,page:e,limit:r,fromPurchaseDate:i,toPurchaseDate:c,createdFromDate:u,createdToDate:l,search:p,sortBy:f,sortOrder:w,api:s})=>{const n=new URLSearchParams;t&&n.append("organizationId",t),a&&n.append("vendorId",a),e&&n.append("page",e.toString()),r&&n.append("limit",r.toString()),i&&n.append("fromPurchaseDate",i),c&&n.append("toPurchaseDate",c),u&&n.append("createdFromDate",u),l&&n.append("createdToDate",l),f&&n.append("sortBy",f),w&&n.append("sortOrder",w),p&&n.append("search",p);const{data:o}=await s.get(`/department/accounting/purchase/getallpurchase?${n.toString()}`);if(!o.ok)throw new Error(o.message);return o},A=async({purchaseData:t,api:a})=>{const{data:e}=await a.post("/department/accounting/purchase/createpurchase",t);if(!e.ok)throw new Error(e.message);return e.data},k=async({purchaseId:t,api:a})=>{const{data:e}=await a.delete(`/department/accounting/purchase/deletepurchase/${t}`);if(!e.ok)throw new Error(e.message);return e.data},q=async({purchaseId:t,api:a})=>{const{data:e}=await a.get(`/department/accounting/purchase/getsinglepurchase/${t}`);if(!e.ok)throw new Error(e.message);return e.data},F=({organizationId:t,vendorId:a,limit:e=10,search:r,fromPurchaseDate:i,toPurchaseDate:c,createdFromDate:u,createdToDate:l,sortBy:p,sortOrder:f})=>{const w=["owner","staff","CTO"],{role:s}=d(),n=g(s);return P({queryKey:["purchases",t,a,e,i,c,u,l,r,p,f],queryFn:async({pageParam:o=1})=>{if(!s||!w.includes(s))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await E({organizationId:t,vendorId:a,page:o,limit:e,fromPurchaseDate:i,toPurchaseDate:c,createdFromDate:u,createdToDate:l,search:r,sortBy:p,sortOrder:f,api:n})},getNextPageParam:o=>{if(o.pagination.page<o.pagination.totalPages)return o.pagination.page+1},getPreviousPageParam:o=>{if(o.pagination.page>1)return o.pagination.page-1},initialPageParam:1,enabled:!!s&&w.includes(s)&&!!t})},I=()=>{const t=["owner","staff","CTO"],{role:a}=d(),e=g(a);return m({mutationFn:async({purchaseData:r})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({purchaseData:r,api:e})},onSuccess:()=>{h.invalidateQueries({queryKey:["purchases"]})}})},K=()=>{const t=["owner","staff","CTO"],{role:a}=d(),e=g(a);return m({mutationFn:async({purchaseId:r})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await k({purchaseId:r,api:e})},onSuccess:()=>{h.invalidateQueries({queryKey:["purchases"]})}})},Q=t=>{const a=["owner","staff","CTO"],{role:e}=d(),r=g(e);return y({queryKey:["purchase",t],queryFn:async()=>{if(!e||!a.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await q({purchaseId:t,api:r})},enabled:!!t&&!!e&&a.includes(e)})};export{K as a,Q as b,I as c,F as u};
