import{j as e,B as h}from"./index-BO7-A9Kz.js";const N={labour:1300,plywood:1,laminate:1},j=()=>({itemName:"",plywoodNos:{quantity:0,thickness:0},laminateNos:{quantity:0,thickness:0},carpenters:0,days:0,profitOnMaterial:0,profitOnLabour:0,rowTotal:0,remarks:""}),f=()=>({itemName:"",description:"",quantity:0,cost:0,rowTotal:0}),b=n=>{if(n.length===0)return[];const c=n.length,d=n[0],p=d.carpenters*d.days*N.labour*(1+(d.profitOnLabour||0)/100)/c;return n.map(u=>{var r,o;const g=((r=u.plywoodNos)==null?void 0:r.quantity)||0,a=((o=u.laminateNos)==null?void 0:o.quantity)||0,t=(g*N.plywood+a*N.laminate)*(1+(u.profitOnMaterial||0)/100);return{...u,rowTotal:Math.round(t+p)}})},v=({data:n,updateFurniture:c,removeFurniture:d})=>{const m=a=>{const t=a.coreMaterials.reduce((l,i)=>l+i.rowTotal,0),r=a.fittingsAndAccessories.reduce((l,i)=>l+i.rowTotal,0),o=a.glues.reduce((l,i)=>l+i.rowTotal,0),s=a.nonBrandMaterials.reduce((l,i)=>l+i.rowTotal,0);return{core:t,fittings:r,glues:o,nbms:s,furnitureTotal:t+r+o+s}},x=(a,t,r)=>{const o=[...n.coreMaterials];t==="imageUrl"?(o[a].imageUrl=r,o[a].previewUrl=URL.createObjectURL(r)):t==="plywoodNos"||t==="laminateNos"?o[a][t]={...o[a][t]||{},...r}:o[a][t]=r;const s=b(o),l={...n,coreMaterials:s};l.totals=m(l),c==null||c(l)},p=(a,t,r,o)=>{const s=[...n[a]];s[t][r]=o,a!=="glues"?s[t].rowTotal=s[t].quantity*s[t].cost:s[t].rowTotal=s[t].cost;const l=t===s.length-1,i=s[t].itemName||s[t].description||s[t].quantity||s[t].cost;l&&i&&s.push(f());const y={...n,[a]:s};y.totals=m(y),c&&c(y)},u=()=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2",children:["Core Materials - Total: ₹",n==null?void 0:n.totals.core.toLocaleString("en-IN")]}),e.jsx("div",{className:"overflow-x-auto  rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsxs("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Image"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",colSpan:2,children:"Plywood"}),e.jsx("th",{className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",colSpan:2,children:"Laminate"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"No. of Carpenters / Day"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"No. of Days"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Profit % Material"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Profit % Labour"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Remarks"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",rowSpan:2,children:"Actions"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"})]})]}),e.jsx("tbody",{children:n.coreMaterials.map((a,t)=>e.jsxs("tr",{className:"group relative border-none !border-b-1 px-4 py-2 transition-all duration-150 hover:bg-gray-50",children:[t===0&&e.jsxs("td",{rowSpan:n.coreMaterials.length,children:[e.jsx("input",{type:"file",className:"w-full px-2 py-3 text-center outline-none",onChange:r=>{var o;return x(0,"imageUrl",(o=r.target.files)==null?void 0:o[0])}}),a.previewUrl&&e.jsx("img",{src:a.previewUrl,className:"h-10 mt-2 mx-auto"})]}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:a.itemName,placeholder:"TV Unit | Wardrobe",onChange:r=>x(t,"itemName",r.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),["plywoodNos","laminateNos"].map(r=>["quantity","thickness"].map(o=>e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:a[r][o],onChange:s=>{Number(s.target.value)>=0&&x(t,r,{...a[r],[o]:Number(s.target.value)})},className:"w-full px-2 py-1 text-center outline-none"})},`${r}-${o}`))),t===0&&e.jsxs(e.Fragment,{children:[e.jsx("td",{rowSpan:n.coreMaterials.length,className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:a.carpenters,onChange:r=>x(t,"carpenters",Number(r.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{rowSpan:n.coreMaterials.length,className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:a.days,onChange:r=>x(t,"days",Number(r.target.value)),className:"w-full px-2 py-1 text-center outline-none"})})]}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:a.profitOnMaterial,onChange:r=>x(t,"profitOnMaterial",Number(r.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),t===0&&e.jsx(e.Fragment,{children:e.jsx("td",{rowSpan:n.coreMaterials.length,className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:a.profitOnLabour,onChange:r=>x(t,"profitOnLabour",Number(r.target.value)),className:"w-full px-2 py-1 text-center outline-none"})})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:a.remarks,placeholder:"remarks",onChange:r=>x(t,"remarks",r.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsxs("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:["₹",a.rowTotal.toLocaleString("en-IN")]}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx(h,{variant:"danger",onClick:()=>{const r=[...n.coreMaterials];r.splice(t,1);const o=b(r),s={...n,coreMaterials:o};s.totals=m(s),c==null||c(s)},className:"px-1 text-xs bg-red-600 text-white",children:"Remove"})})]},t))})]})}),e.jsx("div",{className:"mt-2 text-right",children:e.jsx(h,{onClick:()=>{const a=[...n.coreMaterials,j()],t=b(a),r={...n,coreMaterials:t};r.totals=m(r),c==null||c(r)},children:"+ Add Core Material"})})]}),g=(a,t)=>{var r;return e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2",children:[a," - Total: ₹",(r=n==null?void 0:n.totals[t==="fittingsAndAccessories"?"fittings":t])==null?void 0:r.toLocaleString("en-IN")]}),e.jsx("div",{className:"overflow-x-auto  rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsx("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:n[t].map((o,s)=>e.jsxs("tr",{className:"group relative border-none !border-b-1 px-4 !py-2 transition-all duration-150 hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:o.itemName,placeholder:"Item Name",onChange:l=>p(t,s,"itemName",l.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{value:o.description,placeholder:"description",onChange:l=>p(t,s,"description",l.target.value),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:o.quantity,onChange:l=>{Number(l.target.value)>=0&&p(t,s,"quantity",Number(l.target.value))},className:"w-full px-2 py-1 text-center outline-none"})}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx("input",{type:"number",value:o.cost,onChange:l=>p(t,s,"cost",Number(l.target.value)),className:"w-full px-2 py-1 text-center outline-none"})}),e.jsxs("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:["₹",o.rowTotal.toLocaleString("en-IN")]}),e.jsx("td",{className:"px-2 border border-gray-100 text-center text-sm text-gray-700 font-medium transition-colors duration-200 group-hover:text-gray-900",children:e.jsx(h,{variant:"danger",onClick:()=>{const l=[...n[t]];l.splice(s,1);const i={...n,[t]:l};i.totals=m(i),c&&c(i)},className:"px-1 text-xs bg-red-600 text-white",children:"Remove"})})]},s))})]})}),e.jsx("div",{className:"mt-2 text-right",children:e.jsxs(h,{onClick:()=>{const o=[...n[t],f()],s={...n,[t]:o};s.totals=m(s),c&&c(s)},children:["+ Add ",a," Item"]})})]})};return e.jsxs("div",{className:"shadow-md p-4 my-4 border rounded-lg bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Product: ",n.furnitureName]}),d&&e.jsx(h,{variant:"danger",size:"sm",onClick:d,className:"bg-red-600 text-white",children:"Remove Product"})]}),u(),g("Fittings","fittingsAndAccessories"),g("Glues","glues"),g("Non-Branded Materials","nonBrandMaterials"),e.jsxs("div",{className:"mt-6 text-right text-xl text-green-700 font-bold",children:["Product Total: ₹",n.totals.furnitureTotal.toLocaleString("en-IN")]})]})};export{v as F,N as R};
