import{u as l}from"./useQuery-BBoMICzh.js";import{u as s,a as w,q as d}from"./index-CVfwS1G2.js";import{u}from"./useMutation-DuqS-NT9.js";import{g as i}from"./roleCheck-DROzFqxW.js";const f=async(n,t)=>{const{data:e}=await t.get(`/documentation/${n}/getalldetails`);if(!e.ok)throw new Error(e.message);return e.data},y=async(n,t,e)=>{const{data:o}=await e.get(`/documentation/${n}/stage/${t}`);if(!o.ok)throw new Error(o.message);return o.data},m=async(n,t,e,o)=>{const a=new FormData;e.forEach(c=>a.append("files",c));const{data:r}=await o.post(`/documentation/${n}/${t}/upload`,a);if(!r.ok)throw new Error(r.message);return r.data},g=async(n,t,e,o)=>{const{data:a}=await o.delete(`/documentation/${n}/${t}/file/${e}`);if(!a.ok)throw new Error(a.message);return a.data},h=async(n,t,e,o)=>{const{data:a}=await o.patch(`/documentation/${n}/${t}/description`,{description:e});if(!a.ok)throw new Error(a.message);return a.data},C=n=>{const t=["owner","CTO","staff","client"],{role:e}=s(),o=i(e);return l({queryKey:["stage-documentation",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to make this API call.");if(!o)throw new Error("API instance not found.");return await f(n,o)},enabled:!!e&&!!n&&!!o,retry:!1,refetchOnMount:!1})},$=({projectId:n,stageNumber:t})=>{const e=["owner","CTO","staff","client"],{role:o}=s(),a=i(o);return l({queryKey:["stage-documentation",n,t],queryFn:async()=>{if(!o||!e.includes(o))throw new Error("Not allowed to make this API call.");if(!a)throw new Error("API instance not found.");return await y(n,t,a)},enabled:!!o&&!!n&&t!==void 0&&!!a,retry:!1,refetchOnMount:!1})},k=()=>{const n=["owner","CTO","staff"],{role:t}=s(),e=i(t),o=w();return u({mutationFn:async({projectId:a,stageNumber:r,files:c})=>{if(!t||!n.includes(t))throw new Error("Not allowed.");if(!e)throw new Error("API not found.");return await m(a,r,c,e)},onSuccess:(a,{projectId:r})=>{o.invalidateQueries({queryKey:["stage-documentation",r]})}})},O=()=>{const n=["owner","CTO","staff"],{role:t}=s(),e=i(t),o=w();return u({mutationFn:async({projectId:a,stageNumber:r,fileId:c})=>{if(!t||!n.includes(t))throw new Error("Not allowed.");if(!e)throw new Error("API not found.");return await g(a,r,c,e)},onSuccess:(a,{projectId:r})=>{o.invalidateQueries({queryKey:["stage-documentation",r]})}})},D=()=>{const n=["owner","CTO","staff"],{role:t}=s(),e=i(t),o=w();return u({mutationFn:async({projectId:a,stageNumber:r,description:c})=>{if(!t||!n.includes(t))throw new Error("Not allowed.");if(!e)throw new Error("API not found.");return await h(a,r,c,e)},onSuccess:(a,{projectId:r})=>{o.invalidateQueries({queryKey:["stage-documentation",r]})}})},p=async(n,t)=>{const{data:e}=await t.get(`/documentation/getclient/${n}/byproject`);if(!e.ok)throw new Error(e.message);return e.data},R=n=>{const t=["owner","CTO","staff"],{role:e}=s(),o=i(e);return l({queryKey:["stage-documentation-client",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to make this API call.");if(!o)throw new Error("API instance not found.");return await p(n,o)},enabled:!!e&&!!n&&!!o,retry:!1,refetchOnMount:!1})},E=async(n,t,e)=>{const{data:o}=await e.get(`/documentation/sharemessage/${n}/${t}`);if(!o.ok)throw new Error(o.message);return o.data},T=({projectId:n,stageNumber:t})=>{const e=["owner","CTO","staff"],{role:o}=s(),a=i(o);return l({queryKey:["stage-documentation-message",n],queryFn:async()=>{if(!o||!e.includes(o))throw new Error("Not allowed to make this API call.");if(!a)throw new Error("API instance not found.");return await E(n,t,a)},enabled:!!n&&!!t,retry:!1,refetchOnMount:!1})},A=async(n,t,e)=>{const{data:o}=await e.put(`/documentation/updatedocument/${n}/${t}`);return o.data},K=()=>{const n=["owner","CTO","staff"],{role:t}=s(),e=i(t);return u({mutationFn:async({projectId:o,stageNumber:a})=>{if(console.log("stageNumber",a),!t||!n.includes(t))throw new Error("Not allowed to make this API call.");if(!e)throw new Error("API instance not found.");return await A(o,a,e)},onSuccess:(o,{projectId:a})=>{d.invalidateQueries({queryKey:["stage-documentation-message",a]})}})};export{T as a,C as b,$ as c,k as d,O as e,D as f,K as g,R as u};
