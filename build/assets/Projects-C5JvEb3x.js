import{c as j,r as E,e as L,j as o,O as C,aD as R,aE as M}from"./index-CBsAK0nv.js";import{M as z,S as h}from"./MobileSidebar-DDDShFRE.js";import"./CTOApi-3N09HPLn.js";import"./clientApi-CYRveCU6.js";import"./staffApi-CUMSFv-G.js";import"./userApi-Ch4_j73O.js";import"./workerApi-DbcZnPr1.js";import"./currentActiveStageApi-Bq32AeHl.js";import"./notificationApi-DfInDT6x.js";import"./issueDiscussionApi-DjIb7kgT.js";const b={HR:"hr",LOGISTICS:"logistics",PROCUREMENT:"procurement",SHORTLIST:"referencedesign",DESIGNLAB:"design",CAD:"cad",COMMONORDER:"commonorder",TOOLMANAGEMENT:"toolmanagement",ACCOUNTING:["accounts","billing","payments","vendor","customer","invoice","expense","billtemplate","purchaseorder","vendorpayment","salesorder","retailinvoice"],RATECONIG:"materialquote",RATECONIGSTAFF:"materialquote",WORKTEMPLATE:"materialquote",INTERNALQUOTE:"materialquote",QUOTEVARIENT:"materialquote","QUOTES (CLIENT)":"materialquote",SUBCONTRACT:"subcontract",STAFFTASK:"stafftask",SINGLESTAFFTASK:"stafftask",WORKLIBRARY:"stafftask",MATERIALINVENTORY:"productinventory"},q=({projectId:f,setProjectId:m})=>{const{organizationId:t}=j(),[S,l]=E.useState(!1),[p,u]=E.useState(window.innerWidth<470),{role:T,permission:A}=L(),s=(T==null?void 0:T.toLowerCase())||"",I={PROJECTS:`/organizations/${t}/projects`,ORGANIZATION:`/organizations/${t}`,SHORTLIST:`/organizations/${t}/projects/shortlistdesign`,COMMONORDER:`/organizations/${t}/projects/commonorder`,SUBCONTRACT:`/organizations/${t}/projects/subcontractmain`,TOOLMANAGEMENT:`/organizations/${t}/projects/toolhub`,CAD:`/organizations/${t}/projects/cadmain`,HR:`/organizations/${t}/projects/hr`,LOGISTICS:`/organizations/${t}/projects/logistics`,PROCUREMENT:`/organizations/${t}/projects/procurement`,ACCOUNTING:`/organizations/${t}/projects/accounting`,DESIGNLAB:`/organizations/${t}/projects/designlabmain`,RATECONIG:`/organizations/${t}/projects/rateconfig`,RATECONIGSTAFF:`/organizations/${t}/projects/labourrateconfig`,WORKTEMPLATE:`/organizations/${t}/projects/worktemplates`,INTERNALQUOTE:`/organizations/${t}/projects/internalquote`,QUOTEVARIENT:`/organizations/${t}/projects/quotevariant`,"QUOTES (CLIENT)":`/organizations/${t}/projects/clientquotes`,WORKLIBRARY:`/organizations/${t}/projects/worklibrary`,STAFFTASK:`/organizations/${t}/projects/stafftask`,SINGLESTAFFTASK:`/organizations/${t}/projects/associatedstafftask`,MATERIALINVENTORY:`/organizations/${t}/projects/materialinventory`},i=Object.keys(R);let a=[];s==="owner"||s==="cto"?a=i.filter(e=>e!=="SINGLESTAFFTASK"):s==="staff"?a=i.filter(e=>e!=="STAFFTASK"&&e!=="WORKLIBRARY"):s==="worker"?a=i.filter(e=>e!=="STAFFTASK"&&e!=="WORKLIBRARY"):s==="client"?a=i.filter(e=>e!=="STAFFTASK"&&e!=="WORKLIBRARY"):a=["PROJECTS","ORGANIZATION"];let r={},O={},n={};return a.forEach(e=>{R[e]&&I[e]&&(r[e]=R[e],O[e]=M[e],n[e]=I[e])}),s!=="owner"&&Object.keys(r).forEach(e=>{const c=b[e];e==="CAD"||e==="TOOLMANAGEMENT"||e==="WORKTEMPLATES"||c&&((Array.isArray(c)?c:[c]).some(d=>{const N=A==null?void 0:A[d];return N&&Object.values(N).some(g=>g===!0)})||(delete r[e],delete O[e],delete n[e]))}),E.useEffect(()=>{const e=()=>{u(window.innerWidth<470)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex w-full h-full",children:[p?o.jsx(z,{labels:r,path:n,isOpen:S,onClose:()=>l(!1)}):o.jsx(h,{path:n,labels:r,icons:O}),o.jsx("main",{className:"!w-[100%] h-full p-4",children:o.jsx(C,{context:{projectId:f,setProjectId:m,organizationId:t,isMobile:p,isMobileSidebarOpen:S,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})})};export{q as default};
