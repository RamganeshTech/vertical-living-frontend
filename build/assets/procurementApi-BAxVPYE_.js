import{u as p}from"./useQuery-CsoXJJPn.js";import{u as c}from"./useMutation-BqZ7KIEa.js";import{c as s,q as o,f as w}from"./index-DLaY3p7d.js";import{g as i}from"./roleCheck-BlurDUv2.js";const m=async({id:e,payload:t,api:r})=>{const{data:n}=await r.put(`/department/procurement/updateshop/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},y=async({id:e,payload:t,api:r})=>{const{data:n}=await r.put(`/department/procurement/updatedelivery/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},f=async({id:e,api:t})=>{const{data:r}=await t.delete(`/department/procurement/deleteprocurement/${e}`);if(!r.ok)throw new Error(r.message);return r.data},h=async({organizationId:e,projectId:t,api:r})=>{const n=new URLSearchParams;e&&n.append("organizationId",e),t&&n.append("projectId",t);const{data:a}=await r.get(`/department/procurement/getprocurementall?${n.toString()}`);if(!a.ok)throw new Error(a.message);return a.data},g=async({id:e})=>{const{data:t}=await w.get(`https://houseofram.in/api/department/procurement/getprocurementsingle/${e}`);if(!t.ok)throw new Error(t.message);return t.data},P=async({id:e,payload:t,api:r})=>{const{data:n}=await r.put(`/department/procurement/updatetotalcost/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},E=async({id:e,api:t})=>{const{data:r}=await t.patch(`/department/procurement/generatepdf/${e}`);if(!r.ok)throw new Error(r.message);return r.data},q=async(e,t,r)=>{const{data:n}=await r.delete(`/department/procurement/deletepdf/${e}/${t}`);if(!n.ok)throw new Error(n.message);return n.data},v=async(e,t)=>{const{data:r}=await t.post(`/department/procurement/synclogistics/${e}`);if(!r.ok)throw new Error(r.message);return r.data},A=async({api:e,organizationId:t,projectId:r,fromDept:n,totalCost:a,upiId:d})=>{const{data:l}=await e.post(`/department/procurement/syncaccounting/${t}/${r}`,{totalCost:a,fromDept:n,upiId:d});if(!l.ok)throw new Error(l.message);return l},u=["owner","CTO","staff"],k=()=>{const{role:e}=s(),t=i(e);return c({mutationFn:async({id:r,payload:n})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await m({id:r,payload:n,api:t})},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},F=()=>{const{role:e}=s(),t=i(e);return c({mutationFn:async({id:r,payload:n})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await y({id:r,payload:n,api:t})},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},D=()=>{const{role:e}=s(),t=i(e);return c({mutationFn:async({id:r})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await f({id:r,api:t})},onSuccess:()=>{o.invalidateQueries({queryKey:["procurement","details"]})}})},I=(e,t)=>{const{role:r}=s(),n=i(r);return p({queryKey:["procurement","details",e,t],queryFn:async()=>{if(!r||!u.includes(r))throw new Error("Not allowed");if(!n)throw new Error("API instance not found for role");return await h({organizationId:e,api:n,projectId:t.projectId})},enabled:!!e&&!!r&&!!n})},N=e=>p({queryKey:["procurement","single",e],queryFn:async()=>await g({id:e}),enabled:!!e}),L=()=>{const{role:e}=s(),t=i(e);return c({mutationFn:async({id:r,payload:n})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await P({id:r,payload:n,api:t})},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},b=()=>{const e=["owner","staff","CTO"],{role:t}=s(),r=i(t);return c({mutationFn:async({id:n})=>{if(!t||!e.includes(t))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await E({id:n,api:r})},onSuccess:(n,{id:a})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",a]})}})},C=()=>{const{role:e}=s(),t=i(e);return c({mutationFn:async({id:r,pdfId:n})=>{if(!e||!u.includes(e))throw new Error("Youre not allowed to delete pdf");if(!t)throw new Error("API instance not available");return await q(r,n,t)},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},R=()=>{const{role:e}=s(),t=i(e);return c({mutationFn:async({id:r})=>{if(!e||!u.includes(e))throw new Error("Youre not allowed to delete pdf");if(!t)throw new Error("API instance not available");return await v(r,t)},onSuccess:()=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["logistics","shipments"]})}})},_=()=>{const{role:e}=s(),t=i(e);return c({mutationFn:async({organizationId:r,projectId:n,fromDept:a,totalCost:d,upiId:l})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await A({organizationId:r,projectId:n,fromDept:a,totalCost:d,api:t,upiId:l})},onSuccess:()=>{o.invalidateQueries({queryKey:["logistics","shipments"]})}})};export{k as a,F as b,L as c,b as d,C as e,R as f,_ as g,I as h,D as i,N as u};
