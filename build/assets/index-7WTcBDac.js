var kg=t=>{throw TypeError(t)};var om=(t,a,l)=>a.has(t)||kg("Cannot "+l);var H=(t,a,l)=>(om(t,a,"read from private field"),l?l.call(t):a.get(t)),Ee=(t,a,l)=>a.has(t)?kg("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(t):a.set(t,l),ve=(t,a,l,r)=>(om(t,a,"write to private field"),r?r.call(t,l):a.set(t,l),l),ze=(t,a,l)=>(om(t,a,"access private method"),l);var Qo=(t,a,l,r)=>({set _(o){ve(t,a,o,l)},get _(){return H(t,a,r)}});(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function l(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=l(o);fetch(o.href,d)}})();function kj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cm={exports:{}},si={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function Ej(){if(Eg)return si;Eg=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(r,o,d){var m=null;if(d!==void 0&&(m=""+d),o.key!==void 0&&(m=""+o.key),"key"in o){d={};for(var x in o)x!=="key"&&(d[x]=o[x])}else d=o;return o=d.ref,{$$typeof:t,type:r,key:m,ref:o!==void 0?o:null,props:d}}return si.Fragment=a,si.jsx=l,si.jsxs=l,si}var Ag;function Aj(){return Ag||(Ag=1,cm.exports=Ej()),cm.exports}var e=Aj(),dm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function Oj(){if(Og)return qe;Og=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function j(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,k={};function w(R,U,L){this.props=R,this.context=U,this.refs=k,this.updater=L||E}w.prototype.isReactComponent={},w.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},w.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function S(){}S.prototype=w.prototype;function v(R,U,L){this.props=R,this.context=U,this.refs=k,this.updater=L||E}var N=v.prototype=new S;N.constructor=v,b(N,w.prototype),N.isPureReactComponent=!0;var P=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function z(R,U,L,K,Y,ge){return L=ge.ref,{$$typeof:t,type:R,key:U,ref:L!==void 0?L:null,props:ge}}function q(R,U){return z(R.type,U,void 0,void 0,void 0,R.props)}function I(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function de(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(L){return U[L]})}var Q=/\/+/g;function B(R,U){return typeof R=="object"&&R!==null&&R.key!=null?de(""+R.key):U.toString(36)}function ee(){}function V(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ee,ee):(R.status="pending",R.then(function(U){R.status==="pending"&&(R.status="fulfilled",R.value=U)},function(U){R.status==="pending"&&(R.status="rejected",R.reason=U)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function oe(R,U,L,K,Y){var ge=typeof R;(ge==="undefined"||ge==="boolean")&&(R=null);var se=!1;if(R===null)se=!0;else switch(ge){case"bigint":case"string":case"number":se=!0;break;case"object":switch(R.$$typeof){case t:case a:se=!0;break;case g:return se=R._init,oe(se(R._payload),U,L,K,Y)}}if(se)return Y=Y(R),se=K===""?"."+B(R,0):K,P(Y)?(L="",se!=null&&(L=se.replace(Q,"$&/")+"/"),oe(Y,U,L,"",function(Ve){return Ve})):Y!=null&&(I(Y)&&(Y=q(Y,L+(Y.key==null||R&&R.key===Y.key?"":(""+Y.key).replace(Q,"$&/")+"/")+se)),U.push(Y)),1;se=0;var Ne=K===""?".":K+":";if(P(R))for(var be=0;be<R.length;be++)K=R[be],ge=Ne+B(K,be),se+=oe(K,U,L,ge,Y);else if(be=j(R),typeof be=="function")for(R=be.call(R),be=0;!(K=R.next()).done;)K=K.value,ge=Ne+B(K,be++),se+=oe(K,U,L,ge,Y);else if(ge==="object"){if(typeof R.then=="function")return oe(V(R),U,L,K,Y);throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return se}function _(R,U,L){if(R==null)return R;var K=[],Y=0;return oe(R,K,"","",function(ge){return U.call(L,ge,Y++)}),K}function W(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(L){(R._status===0||R._status===-1)&&(R._status=1,R._result=L)},function(L){(R._status===0||R._status===-1)&&(R._status=2,R._result=L)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var me=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function le(){}return qe.Children={map:_,forEach:function(R,U,L){_(R,function(){U.apply(this,arguments)},L)},count:function(R){var U=0;return _(R,function(){U++}),U},toArray:function(R){return _(R,function(U){return U})||[]},only:function(R){if(!I(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},qe.Component=w,qe.Fragment=l,qe.Profiler=o,qe.PureComponent=v,qe.StrictMode=r,qe.Suspense=h,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,qe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return T.H.useMemoCache(R)}},qe.cache=function(R){return function(){return R.apply(null,arguments)}},qe.cloneElement=function(R,U,L){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var K=b({},R.props),Y=R.key,ge=void 0;if(U!=null)for(se in U.ref!==void 0&&(ge=void 0),U.key!==void 0&&(Y=""+U.key),U)!F.call(U,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&U.ref===void 0||(K[se]=U[se]);var se=arguments.length-2;if(se===1)K.children=L;else if(1<se){for(var Ne=Array(se),be=0;be<se;be++)Ne[be]=arguments[be+2];K.children=Ne}return z(R.type,Y,void 0,void 0,ge,K)},qe.createContext=function(R){return R={$$typeof:m,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:d,_context:R},R},qe.createElement=function(R,U,L){var K,Y={},ge=null;if(U!=null)for(K in U.key!==void 0&&(ge=""+U.key),U)F.call(U,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Y[K]=U[K]);var se=arguments.length-2;if(se===1)Y.children=L;else if(1<se){for(var Ne=Array(se),be=0;be<se;be++)Ne[be]=arguments[be+2];Y.children=Ne}if(R&&R.defaultProps)for(K in se=R.defaultProps,se)Y[K]===void 0&&(Y[K]=se[K]);return z(R,ge,void 0,void 0,null,Y)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(R){return{$$typeof:x,render:R}},qe.isValidElement=I,qe.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:W}},qe.memo=function(R,U){return{$$typeof:p,type:R,compare:U===void 0?null:U}},qe.startTransition=function(R){var U=T.T,L={};T.T=L;try{var K=R(),Y=T.S;Y!==null&&Y(L,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(le,me)}catch(ge){me(ge)}finally{T.T=U}},qe.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},qe.use=function(R){return T.H.use(R)},qe.useActionState=function(R,U,L){return T.H.useActionState(R,U,L)},qe.useCallback=function(R,U){return T.H.useCallback(R,U)},qe.useContext=function(R){return T.H.useContext(R)},qe.useDebugValue=function(){},qe.useDeferredValue=function(R,U){return T.H.useDeferredValue(R,U)},qe.useEffect=function(R,U,L){var K=T.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(R,U)},qe.useId=function(){return T.H.useId()},qe.useImperativeHandle=function(R,U,L){return T.H.useImperativeHandle(R,U,L)},qe.useInsertionEffect=function(R,U){return T.H.useInsertionEffect(R,U)},qe.useLayoutEffect=function(R,U){return T.H.useLayoutEffect(R,U)},qe.useMemo=function(R,U){return T.H.useMemo(R,U)},qe.useOptimistic=function(R,U){return T.H.useOptimistic(R,U)},qe.useReducer=function(R,U,L){return T.H.useReducer(R,U,L)},qe.useRef=function(R){return T.H.useRef(R)},qe.useState=function(R){return T.H.useState(R)},qe.useSyncExternalStore=function(R,U,L){return T.H.useSyncExternalStore(R,U,L)},qe.useTransition=function(){return T.H.useTransition()},qe.version="19.1.0",qe}var Rg;function kc(){return Rg||(Rg=1,dm.exports=Oj()),dm.exports}var A=kc();const ct=kj(A);var um={exports:{}},ai={},mm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg;function Rj(){return Tg||(Tg=1,function(t){function a(_,W){var me=_.length;_.push(W);e:for(;0<me;){var le=me-1>>>1,R=_[le];if(0<o(R,W))_[le]=W,_[me]=R,me=le;else break e}}function l(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var W=_[0],me=_.pop();if(me!==W){_[0]=me;e:for(var le=0,R=_.length,U=R>>>1;le<U;){var L=2*(le+1)-1,K=_[L],Y=L+1,ge=_[Y];if(0>o(K,me))Y<R&&0>o(ge,K)?(_[le]=ge,_[Y]=me,le=Y):(_[le]=K,_[L]=me,le=L);else if(Y<R&&0>o(ge,me))_[le]=ge,_[Y]=me,le=Y;else break e}}return W}function o(_,W){var me=_.sortIndex-W.sortIndex;return me!==0?me:_.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var m=Date,x=m.now();t.unstable_now=function(){return m.now()-x}}var h=[],p=[],g=1,y=null,j=3,E=!1,b=!1,k=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function P(_){for(var W=l(p);W!==null;){if(W.callback===null)r(p);else if(W.startTime<=_)r(p),W.sortIndex=W.expirationTime,a(h,W);else break;W=l(p)}}function T(_){if(k=!1,P(_),!b)if(l(h)!==null)b=!0,F||(F=!0,B());else{var W=l(p);W!==null&&oe(T,W.startTime-_)}}var F=!1,z=-1,q=5,I=-1;function de(){return w?!0:!(t.unstable_now()-I<q)}function Q(){if(w=!1,F){var _=t.unstable_now();I=_;var W=!0;try{e:{b=!1,k&&(k=!1,v(z),z=-1),E=!0;var me=j;try{t:{for(P(_),y=l(h);y!==null&&!(y.expirationTime>_&&de());){var le=y.callback;if(typeof le=="function"){y.callback=null,j=y.priorityLevel;var R=le(y.expirationTime<=_);if(_=t.unstable_now(),typeof R=="function"){y.callback=R,P(_),W=!0;break t}y===l(h)&&r(h),P(_)}else r(h);y=l(h)}if(y!==null)W=!0;else{var U=l(p);U!==null&&oe(T,U.startTime-_),W=!1}}break e}finally{y=null,j=me,E=!1}W=void 0}}finally{W?B():F=!1}}}var B;if(typeof N=="function")B=function(){N(Q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,V=ee.port2;ee.port1.onmessage=Q,B=function(){V.postMessage(null)}}else B=function(){S(Q,0)};function oe(_,W){z=S(function(){_(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_next=function(_){switch(j){case 1:case 2:case 3:var W=3;break;default:W=j}var me=j;j=W;try{return _()}finally{j=me}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(_,W){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var me=j;j=_;try{return W()}finally{j=me}},t.unstable_scheduleCallback=function(_,W,me){var le=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?le+me:le):me=le,_){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=me+R,_={id:g++,callback:W,priorityLevel:_,startTime:me,expirationTime:R,sortIndex:-1},me>le?(_.sortIndex=me,a(p,_),l(h)===null&&_===l(p)&&(k?(v(z),z=-1):k=!0,oe(T,me-le))):(_.sortIndex=R,a(h,_),b||E||(b=!0,F||(F=!0,B()))),_},t.unstable_shouldYield=de,t.unstable_wrapCallback=function(_){var W=j;return function(){var me=j;j=W;try{return _.apply(this,arguments)}finally{j=me}}}}(fm)),fm}var Pg;function Tj(){return Pg||(Pg=1,mm.exports=Rj()),mm.exports}var hm={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function Pj(){if(Mg)return _t;Mg=1;var t=kc();function a(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var r={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(h,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:h,containerInfo:p,implementation:g}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_t.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(h,p,null,g)},_t.flushSync=function(h){var p=m.T,g=r.p;try{if(m.T=null,r.p=2,h)return h()}finally{m.T=p,r.p=g,r.d.f()}},_t.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(h,p))},_t.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},_t.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,y=x(g,p.crossOrigin),j=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?r.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:j,fetchPriority:E}):g==="script"&&r.d.X(h,{crossOrigin:y,integrity:j,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_t.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=x(p.as,p.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(h)},_t.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=x(g,p.crossOrigin);r.d.L(h,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_t.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=x(p.as,p.crossOrigin);r.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(h)},_t.requestFormReset=function(h){r.d.r(h)},_t.unstable_batchedUpdates=function(h,p){return h(p)},_t.useFormState=function(h,p,g){return m.H.useFormState(h,p,g)},_t.useFormStatus=function(){return m.H.useHostTransitionStatus()},_t.version="19.1.0",_t}var Lg;function Mj(){if(Lg)return hm.exports;Lg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),hm.exports=Pj(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function Lj(){if(Fg)return ai;Fg=1;var t=Tj(),a=kc(),l=Mj();function r(s){var n="https://react.dev/errors/"+s;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+s+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var n=s,i=s;if(s.alternate)for(;n.return;)n=n.return;else{s=n;do n=s,(n.flags&4098)!==0&&(i=n.return),s=n.return;while(s)}return n.tag===3?i:null}function m(s){if(s.tag===13){var n=s.memoizedState;if(n===null&&(s=s.alternate,s!==null&&(n=s.memoizedState)),n!==null)return n.dehydrated}return null}function x(s){if(d(s)!==s)throw Error(r(188))}function h(s){var n=s.alternate;if(!n){if(n=d(s),n===null)throw Error(r(188));return n!==s?null:s}for(var i=s,c=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(c=u.return,c!==null){i=c;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return x(u),s;if(f===c)return x(u),n;f=f.sibling}throw Error(r(188))}if(i.return!==c.return)i=u,c=f;else{for(var C=!1,O=u.child;O;){if(O===i){C=!0,i=u,c=f;break}if(O===c){C=!0,c=u,i=f;break}O=O.sibling}if(!C){for(O=f.child;O;){if(O===i){C=!0,i=f,c=u;break}if(O===c){C=!0,c=f,i=u;break}O=O.sibling}if(!C)throw Error(r(189))}}if(i.alternate!==c)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?s:n}function p(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s;for(s=s.child;s!==null;){if(n=p(s),n!==null)return n;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),N=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function V(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case w:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case F:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case N:return(s.displayName||"Context")+".Provider";case v:return(s._context.displayName||"Context")+".Consumer";case P:var n=s.render;return s=s.displayName,s||(s=n.displayName||n.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return n=s.displayName||null,n!==null?n:V(s.type)||"Memo";case q:n=s._payload,s=s._init;try{return V(s(n))}catch{}}return null}var oe=Array.isArray,_=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},le=[],R=-1;function U(s){return{current:s}}function L(s){0>R||(s.current=le[R],le[R]=null,R--)}function K(s,n){R++,le[R]=s.current,s.current=n}var Y=U(null),ge=U(null),se=U(null),Ne=U(null);function be(s,n){switch(K(se,n),K(ge,s),K(Y,null),n.nodeType){case 9:case 11:s=(s=n.documentElement)&&(s=s.namespaceURI)?eg(s):0;break;default:if(s=n.tagName,n=n.namespaceURI)n=eg(n),s=tg(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}L(Y),K(Y,s)}function Ve(){L(Y),L(ge),L(se)}function Kc(s){s.memoizedState!==null&&K(Ne,s);var n=Y.current,i=tg(n,s.type);n!==i&&(K(ge,s),K(Y,i))}function Oi(s){ge.current===s&&(L(Y),L(ge)),Ne.current===s&&(L(Ne),Xr._currentValue=me)}var Vc=Object.prototype.hasOwnProperty,Yc=t.unstable_scheduleCallback,Wc=t.unstable_cancelCallback,nw=t.unstable_shouldYield,lw=t.unstable_requestPaint,Qs=t.unstable_now,rw=t.unstable_getCurrentPriorityLevel,Lf=t.unstable_ImmediatePriority,Ff=t.unstable_UserBlockingPriority,Ri=t.unstable_NormalPriority,iw=t.unstable_LowPriority,Df=t.unstable_IdlePriority,ow=t.log,cw=t.unstable_setDisableYieldValue,lr=null,rs=null;function Oa(s){if(typeof ow=="function"&&cw(s),rs&&typeof rs.setStrictMode=="function")try{rs.setStrictMode(lr,s)}catch{}}var is=Math.clz32?Math.clz32:mw,dw=Math.log,uw=Math.LN2;function mw(s){return s>>>=0,s===0?32:31-(dw(s)/uw|0)|0}var Ti=256,Pi=4194304;function pn(s){var n=s&42;if(n!==0)return n;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Mi(s,n,i){var c=s.pendingLanes;if(c===0)return 0;var u=0,f=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var O=c&134217727;return O!==0?(c=O&~f,c!==0?u=pn(c):(C&=O,C!==0?u=pn(C):i||(i=O&~s,i!==0&&(u=pn(i))))):(O=c&~f,O!==0?u=pn(O):C!==0?u=pn(C):i||(i=c&~s,i!==0&&(u=pn(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function rr(s,n){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&n)===0}function fw(s,n){switch(s){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _f(){var s=Ti;return Ti<<=1,(Ti&4194048)===0&&(Ti=256),s}function qf(){var s=Pi;return Pi<<=1,(Pi&62914560)===0&&(Pi=4194304),s}function Xc(s){for(var n=[],i=0;31>i;i++)n.push(s);return n}function ir(s,n){s.pendingLanes|=n,n!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function hw(s,n,i,c,u,f){var C=s.pendingLanes;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=i,s.entangledLanes&=i,s.errorRecoveryDisabledLanes&=i,s.shellSuspendCounter=0;var O=s.entanglements,$=s.expirationTimes,ae=s.hiddenUpdates;for(i=C&~i;0<i;){var he=31-is(i),pe=1<<he;O[he]=0,$[he]=-1;var ne=ae[he];if(ne!==null)for(ae[he]=null,he=0;he<ne.length;he++){var re=ne[he];re!==null&&(re.lane&=-536870913)}i&=~pe}c!==0&&zf(s,c,0),f!==0&&u===0&&s.tag!==0&&(s.suspendedLanes|=f&~(C&~n))}function zf(s,n,i){s.pendingLanes|=n,s.suspendedLanes&=~n;var c=31-is(n);s.entangledLanes|=n,s.entanglements[c]=s.entanglements[c]|1073741824|i&4194090}function Uf(s,n){var i=s.entangledLanes|=n;for(s=s.entanglements;i;){var c=31-is(i),u=1<<c;u&n|s[c]&n&&(s[c]|=n),i&=~u}}function Zc(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Jc(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $f(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:wg(s.type))}function xw(s,n){var i=W.p;try{return W.p=s,n()}finally{W.p=i}}var Ra=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Ra,Yt="__reactProps$"+Ra,Wn="__reactContainer$"+Ra,ed="__reactEvents$"+Ra,pw="__reactListeners$"+Ra,gw="__reactHandles$"+Ra,If="__reactResources$"+Ra,or="__reactMarker$"+Ra;function td(s){delete s[Ft],delete s[Yt],delete s[ed],delete s[pw],delete s[gw]}function Xn(s){var n=s[Ft];if(n)return n;for(var i=s.parentNode;i;){if(n=i[Wn]||i[Ft]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(s=lg(s);s!==null;){if(i=s[Ft])return i;s=lg(s)}return n}s=i,i=s.parentNode}return null}function Zn(s){if(s=s[Ft]||s[Wn]){var n=s.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return s}return null}function cr(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s.stateNode;throw Error(r(33))}function Jn(s){var n=s[If];return n||(n=s[If]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function kt(s){s[or]=!0}var Bf=new Set,Hf={};function gn(s,n){el(s,n),el(s+"Capture",n)}function el(s,n){for(Hf[s]=n,s=0;s<n.length;s++)Bf.add(n[s])}var bw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qf={},Gf={};function yw(s){return Vc.call(Gf,s)?!0:Vc.call(Qf,s)?!1:bw.test(s)?Gf[s]=!0:(Qf[s]=!0,!1)}function Li(s,n,i){if(yw(n))if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":s.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(n);return}}s.setAttribute(n,""+i)}}function Fi(s,n,i){if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(n);return}s.setAttribute(n,""+i)}}function na(s,n,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttributeNS(n,i,""+c)}}var sd,Kf;function tl(s){if(sd===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);sd=n&&n[1]||"",Kf=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sd+s+Kf}var ad=!1;function nd(s,n){if(!s||ad)return"";ad=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(re){var ne=re}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(re){ne=re}s.call(pe.prototype)}}else{try{throw Error()}catch(re){ne=re}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),C=f[0],O=f[1];if(C&&O){var $=C.split(`
`),ae=O.split(`
`);for(u=c=0;c<$.length&&!$[c].includes("DetermineComponentFrameRoot");)c++;for(;u<ae.length&&!ae[u].includes("DetermineComponentFrameRoot");)u++;if(c===$.length||u===ae.length)for(c=$.length-1,u=ae.length-1;1<=c&&0<=u&&$[c]!==ae[u];)u--;for(;1<=c&&0<=u;c--,u--)if($[c]!==ae[u]){if(c!==1||u!==1)do if(c--,u--,0>u||$[c]!==ae[u]){var he=`
`+$[c].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=c&&0<=u);break}}}finally{ad=!1,Error.prepareStackTrace=i}return(i=s?s.displayName||s.name:"")?tl(i):""}function ww(s){switch(s.tag){case 26:case 27:case 5:return tl(s.type);case 16:return tl("Lazy");case 13:return tl("Suspense");case 19:return tl("SuspenseList");case 0:case 15:return nd(s.type,!1);case 11:return nd(s.type.render,!1);case 1:return nd(s.type,!0);case 31:return tl("Activity");default:return""}}function Vf(s){try{var n="";do n+=ww(s),s=s.return;while(s);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function vs(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Yf(s){var n=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function vw(s){var n=Yf(s)?"checked":"value",i=Object.getOwnPropertyDescriptor(s.constructor.prototype,n),c=""+s[n];if(!s.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(s,n,{configurable:!0,get:function(){return u.call(this)},set:function(C){c=""+C,f.call(this,C)}}),Object.defineProperty(s,n,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){s._valueTracker=null,delete s[n]}}}}function Di(s){s._valueTracker||(s._valueTracker=vw(s))}function Wf(s){if(!s)return!1;var n=s._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return s&&(c=Yf(s)?s.checked?"true":"false":s.value),s=c,s!==i?(n.setValue(s),!0):!1}function _i(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var jw=/[\n"\\]/g;function js(s){return s.replace(jw,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ld(s,n,i,c,u,f,C,O){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),n!=null?C==="number"?(n===0&&s.value===""||s.value!=n)&&(s.value=""+vs(n)):s.value!==""+vs(n)&&(s.value=""+vs(n)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),n!=null?rd(s,C,vs(n)):i!=null?rd(s,C,vs(i)):c!=null&&s.removeAttribute("value"),u==null&&f!=null&&(s.defaultChecked=!!f),u!=null&&(s.checked=u&&typeof u!="function"&&typeof u!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+vs(O):s.removeAttribute("name")}function Xf(s,n,i,c,u,f,C,O){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(s.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;i=i!=null?""+vs(i):"",n=n!=null?""+vs(n):i,O||n===s.value||(s.value=n),s.defaultValue=n}c=c??u,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=O?s.checked:!!c,s.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function rd(s,n,i){n==="number"&&_i(s.ownerDocument)===s||s.defaultValue===""+i||(s.defaultValue=""+i)}function sl(s,n,i,c){if(s=s.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<s.length;i++)u=n.hasOwnProperty("$"+s[i].value),s[i].selected!==u&&(s[i].selected=u),u&&c&&(s[i].defaultSelected=!0)}else{for(i=""+vs(i),n=null,u=0;u<s.length;u++){if(s[u].value===i){s[u].selected=!0,c&&(s[u].defaultSelected=!0);return}n!==null||s[u].disabled||(n=s[u])}n!==null&&(n.selected=!0)}}function Zf(s,n,i){if(n!=null&&(n=""+vs(n),n!==s.value&&(s.value=n),i==null)){s.defaultValue!==n&&(s.defaultValue=n);return}s.defaultValue=i!=null?""+vs(i):""}function Jf(s,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(r(92));if(oe(c)){if(1<c.length)throw Error(r(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=vs(n),s.defaultValue=i,c=s.textContent,c===i&&c!==""&&c!==null&&(s.value=c)}function al(s,n){if(n){var i=s.firstChild;if(i&&i===s.lastChild&&i.nodeType===3){i.nodeValue=n;return}}s.textContent=n}var Nw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eh(s,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?s.setProperty(n,""):n==="float"?s.cssFloat="":s[n]="":c?s.setProperty(n,i):typeof i!="number"||i===0||Nw.has(n)?n==="float"?s.cssFloat=i:s[n]=(""+i).trim():s[n]=i+"px"}function th(s,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(s=s.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var u in n)c=n[u],n.hasOwnProperty(u)&&i[u]!==c&&eh(s,u,c)}else for(var f in n)n.hasOwnProperty(f)&&eh(s,f,n[f])}function id(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(s){return Cw.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var od=null;function cd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var nl=null,ll=null;function sh(s){var n=Zn(s);if(n&&(s=n.stateNode)){var i=s[Yt]||null;e:switch(s=n.stateNode,n.type){case"input":if(ld(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=s;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+js(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==s&&c.form===s.form){var u=c[Yt]||null;if(!u)throw Error(r(90));ld(c,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===s.form&&Wf(c)}break e;case"textarea":Zf(s,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&sl(s,!!i.multiple,n,!1)}}}var dd=!1;function ah(s,n,i){if(dd)return s(n,i);dd=!0;try{var c=s(n);return c}finally{if(dd=!1,(nl!==null||ll!==null)&&(So(),nl&&(n=nl,s=ll,ll=nl=null,sh(n),s)))for(n=0;n<s.length;n++)sh(s[n])}}function dr(s,n){var i=s.stateNode;if(i===null)return null;var c=i[Yt]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ud=!1;if(la)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){ud=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{ud=!1}var Ta=null,md=null,zi=null;function nh(){if(zi)return zi;var s,n=md,i=n.length,c,u="value"in Ta?Ta.value:Ta.textContent,f=u.length;for(s=0;s<i&&n[s]===u[s];s++);var C=i-s;for(c=1;c<=C&&n[i-c]===u[f-c];c++);return zi=u.slice(s,1<c?1-c:void 0)}function Ui(s){var n=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&n===13&&(s=13)):s=n,s===10&&(s=13),32<=s||s===13?s:0}function $i(){return!0}function lh(){return!1}function Wt(s){function n(i,c,u,f,C){this._reactName=i,this._targetInst=u,this.type=c,this.nativeEvent=f,this.target=C,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(i=s[O],this[O]=i?i(f):f[O]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$i:lh,this.isPropagationStopped=lh,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),n}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=Wt(bn),mr=g({},bn,{view:0,detail:0}),kw=Wt(mr),fd,hd,fr,Bi=g({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fr&&(fr&&s.type==="mousemove"?(fd=s.screenX-fr.screenX,hd=s.screenY-fr.screenY):hd=fd=0,fr=s),fd)},movementY:function(s){return"movementY"in s?s.movementY:hd}}),rh=Wt(Bi),Ew=g({},Bi,{dataTransfer:0}),Aw=Wt(Ew),Ow=g({},mr,{relatedTarget:0}),xd=Wt(Ow),Rw=g({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tw=Wt(Rw),Pw=g({},bn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Mw=Wt(Pw),Lw=g({},bn,{data:0}),ih=Wt(Lw),Fw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_w={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qw(s){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(s):(s=_w[s])?!!n[s]:!1}function pd(){return qw}var zw=g({},mr,{key:function(s){if(s.key){var n=Fw[s.key]||s.key;if(n!=="Unidentified")return n}return s.type==="keypress"?(s=Ui(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Dw[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pd,charCode:function(s){return s.type==="keypress"?Ui(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ui(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Uw=Wt(zw),$w=g({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=Wt($w),Iw=g({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pd}),Bw=Wt(Iw),Hw=g({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qw=Wt(Hw),Gw=g({},Bi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Kw=Wt(Gw),Vw=g({},bn,{newState:0,oldState:0}),Yw=Wt(Vw),Ww=[9,13,27,32],gd=la&&"CompositionEvent"in window,hr=null;la&&"documentMode"in document&&(hr=document.documentMode);var Xw=la&&"TextEvent"in window&&!hr,ch=la&&(!gd||hr&&8<hr&&11>=hr),dh=" ",uh=!1;function mh(s,n){switch(s){case"keyup":return Ww.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var rl=!1;function Zw(s,n){switch(s){case"compositionend":return fh(n);case"keypress":return n.which!==32?null:(uh=!0,dh);case"textInput":return s=n.data,s===dh&&uh?null:s;default:return null}}function Jw(s,n){if(rl)return s==="compositionend"||!gd&&mh(s,n)?(s=nh(),zi=md=Ta=null,rl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ch&&n.locale!=="ko"?null:n.data;default:return null}}var ev={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n==="input"?!!ev[s.type]:n==="textarea"}function xh(s,n,i,c){nl?ll?ll.push(c):ll=[c]:nl=c,n=Ro(n,"onChange"),0<n.length&&(i=new Ii("onChange","change",null,i,c),s.push({event:i,listeners:n}))}var xr=null,pr=null;function tv(s){Yp(s,0)}function Hi(s){var n=cr(s);if(Wf(n))return s}function ph(s,n){if(s==="change")return n}var gh=!1;if(la){var bd;if(la){var yd="oninput"in document;if(!yd){var bh=document.createElement("div");bh.setAttribute("oninput","return;"),yd=typeof bh.oninput=="function"}bd=yd}else bd=!1;gh=bd&&(!document.documentMode||9<document.documentMode)}function yh(){xr&&(xr.detachEvent("onpropertychange",wh),pr=xr=null)}function wh(s){if(s.propertyName==="value"&&Hi(pr)){var n=[];xh(n,pr,s,cd(s)),ah(tv,n)}}function sv(s,n,i){s==="focusin"?(yh(),xr=n,pr=i,xr.attachEvent("onpropertychange",wh)):s==="focusout"&&yh()}function av(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hi(pr)}function nv(s,n){if(s==="click")return Hi(n)}function lv(s,n){if(s==="input"||s==="change")return Hi(n)}function rv(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var os=typeof Object.is=="function"?Object.is:rv;function gr(s,n){if(os(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;var i=Object.keys(s),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var u=i[c];if(!Vc.call(n,u)||!os(s[u],n[u]))return!1}return!0}function vh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function jh(s,n){var i=vh(s);s=0;for(var c;i;){if(i.nodeType===3){if(c=s+i.textContent.length,s<=n&&c>=n)return{node:i,offset:n-s};s=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=vh(i)}}function Nh(s,n){return s&&n?s===n?!0:s&&s.nodeType===3?!1:n&&n.nodeType===3?Nh(s,n.parentNode):"contains"in s?s.contains(n):s.compareDocumentPosition?!!(s.compareDocumentPosition(n)&16):!1:!1}function Sh(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var n=_i(s.document);n instanceof s.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)s=n.contentWindow;else break;n=_i(s.document)}return n}function wd(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n&&(n==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||n==="textarea"||s.contentEditable==="true")}var iv=la&&"documentMode"in document&&11>=document.documentMode,il=null,vd=null,br=null,jd=!1;function Ch(s,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;jd||il==null||il!==_i(c)||(c=il,"selectionStart"in c&&wd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),br&&gr(br,c)||(br=c,c=Ro(vd,"onSelect"),0<c.length&&(n=new Ii("onSelect","select",null,n,i),s.push({event:n,listeners:c}),n.target=il)))}function yn(s,n){var i={};return i[s.toLowerCase()]=n.toLowerCase(),i["Webkit"+s]="webkit"+n,i["Moz"+s]="moz"+n,i}var ol={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionrun:yn("Transition","TransitionRun"),transitionstart:yn("Transition","TransitionStart"),transitioncancel:yn("Transition","TransitionCancel"),transitionend:yn("Transition","TransitionEnd")},Nd={},kh={};la&&(kh=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function wn(s){if(Nd[s])return Nd[s];if(!ol[s])return s;var n=ol[s],i;for(i in n)if(n.hasOwnProperty(i)&&i in kh)return Nd[s]=n[i];return s}var Eh=wn("animationend"),Ah=wn("animationiteration"),Oh=wn("animationstart"),ov=wn("transitionrun"),cv=wn("transitionstart"),dv=wn("transitioncancel"),Rh=wn("transitionend"),Th=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function Fs(s,n){Th.set(s,n),gn(n,[s])}var Ph=new WeakMap;function Ns(s,n){if(typeof s=="object"&&s!==null){var i=Ph.get(s);return i!==void 0?i:(n={value:s,source:n,stack:Vf(n)},Ph.set(s,n),n)}return{value:s,source:n,stack:Vf(n)}}var Ss=[],cl=0,Cd=0;function Qi(){for(var s=cl,n=Cd=cl=0;n<s;){var i=Ss[n];Ss[n++]=null;var c=Ss[n];Ss[n++]=null;var u=Ss[n];Ss[n++]=null;var f=Ss[n];if(Ss[n++]=null,c!==null&&u!==null){var C=c.pending;C===null?u.next=u:(u.next=C.next,C.next=u),c.pending=u}f!==0&&Mh(i,u,f)}}function Gi(s,n,i,c){Ss[cl++]=s,Ss[cl++]=n,Ss[cl++]=i,Ss[cl++]=c,Cd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function kd(s,n,i,c){return Gi(s,n,i,c),Ki(s)}function dl(s,n){return Gi(s,null,null,n),Ki(s)}function Mh(s,n,i){s.lanes|=i;var c=s.alternate;c!==null&&(c.lanes|=i);for(var u=!1,f=s.return;f!==null;)f.childLanes|=i,c=f.alternate,c!==null&&(c.childLanes|=i),f.tag===22&&(s=f.stateNode,s===null||s._visibility&1||(u=!0)),s=f,f=f.return;return s.tag===3?(f=s.stateNode,u&&n!==null&&(u=31-is(i),s=f.hiddenUpdates,c=s[u],c===null?s[u]=[n]:c.push(n),n.lane=i|536870912),f):null}function Ki(s){if(50<Br)throw Br=0,Pu=null,Error(r(185));for(var n=s.return;n!==null;)s=n,n=s.return;return s.tag===3?s.stateNode:null}var ul={};function uv(s,n,i,c){this.tag=s,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(s,n,i,c){return new uv(s,n,i,c)}function Ed(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ra(s,n){var i=s.alternate;return i===null?(i=cs(s.tag,n,s.key,s.mode),i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.alternate=s,s.alternate=i):(i.pendingProps=n,i.type=s.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=s.flags&65011712,i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,n=s.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i.refCleanup=s.refCleanup,i}function Lh(s,n){s.flags&=65011714;var i=s.alternate;return i===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,n=i.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s}function Vi(s,n,i,c,u,f){var C=0;if(c=s,typeof s=="function")Ed(s)&&(C=1);else if(typeof s=="string")C=fj(s,i,Y.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case I:return s=cs(31,i,n,u),s.elementType=I,s.lanes=f,s;case b:return vn(i.children,u,f,n);case k:C=8,u|=24;break;case w:return s=cs(12,i,n,u|2),s.elementType=w,s.lanes=f,s;case T:return s=cs(13,i,n,u),s.elementType=T,s.lanes=f,s;case F:return s=cs(19,i,n,u),s.elementType=F,s.lanes=f,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:case N:C=10;break e;case v:C=9;break e;case P:C=11;break e;case z:C=14;break e;case q:C=16,c=null;break e}C=29,i=Error(r(130,s===null?"null":typeof s,"")),c=null}return n=cs(C,i,n,u),n.elementType=s,n.type=c,n.lanes=f,n}function vn(s,n,i,c){return s=cs(7,s,c,n),s.lanes=i,s}function Ad(s,n,i){return s=cs(6,s,null,n),s.lanes=i,s}function Od(s,n,i){return n=cs(4,s.children!==null?s.children:[],s.key,n),n.lanes=i,n.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},n}var ml=[],fl=0,Yi=null,Wi=0,Cs=[],ks=0,jn=null,ia=1,oa="";function Nn(s,n){ml[fl++]=Wi,ml[fl++]=Yi,Yi=s,Wi=n}function Fh(s,n,i){Cs[ks++]=ia,Cs[ks++]=oa,Cs[ks++]=jn,jn=s;var c=ia;s=oa;var u=32-is(c)-1;c&=~(1<<u),i+=1;var f=32-is(n)+u;if(30<f){var C=u-u%5;f=(c&(1<<C)-1).toString(32),c>>=C,u-=C,ia=1<<32-is(n)+u|i<<u|c,oa=f+s}else ia=1<<f|i<<u|c,oa=s}function Rd(s){s.return!==null&&(Nn(s,1),Fh(s,1,0))}function Td(s){for(;s===Yi;)Yi=ml[--fl],ml[fl]=null,Wi=ml[--fl],ml[fl]=null;for(;s===jn;)jn=Cs[--ks],Cs[ks]=null,oa=Cs[--ks],Cs[ks]=null,ia=Cs[--ks],Cs[ks]=null}var Bt=null,ft=null,We=!1,Sn=null,Gs=!1,Pd=Error(r(519));function Cn(s){var n=Error(r(418,""));throw vr(Ns(n,s)),Pd}function Dh(s){var n=s.stateNode,i=s.type,c=s.memoizedProps;switch(n[Ft]=s,n[Yt]=c,i){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(i=0;i<Qr.length;i++)Be(Qr[i],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Be("invalid",n),Xf(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Di(n);break;case"select":Be("invalid",n);break;case"textarea":Be("invalid",n),Jf(n,c.value,c.defaultValue,c.children),Di(n)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||Jp(n.textContent,i)?(c.popover!=null&&(Be("beforetoggle",n),Be("toggle",n)),c.onScroll!=null&&Be("scroll",n),c.onScrollEnd!=null&&Be("scrollend",n),c.onClick!=null&&(n.onclick=To),n=!0):n=!1,n||Cn(s)}function _h(s){for(Bt=s.return;Bt;)switch(Bt.tag){case 5:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:Bt=Bt.return}}function yr(s){if(s!==Bt)return!1;if(!We)return _h(s),We=!0,!1;var n=s.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=s.type,i=!(i!=="form"&&i!=="button")||Vu(s.type,s.memoizedProps)),i=!i),i&&ft&&Cn(s),_h(s),n===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,n=0;s;){if(s.nodeType===8)if(i=s.data,i==="/$"){if(n===0){ft=_s(s.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;s=s.nextSibling}ft=null}}else n===27?(n=ft,Ka(s.type)?(s=Zu,Zu=null,ft=s):ft=n):ft=Bt?_s(s.stateNode.nextSibling):null;return!0}function wr(){ft=Bt=null,We=!1}function qh(){var s=Sn;return s!==null&&(Jt===null?Jt=s:Jt.push.apply(Jt,s),Sn=null),s}function vr(s){Sn===null?Sn=[s]:Sn.push(s)}var Md=U(null),kn=null,ca=null;function Pa(s,n,i){K(Md,n._currentValue),n._currentValue=i}function da(s){s._currentValue=Md.current,L(Md)}function Ld(s,n,i){for(;s!==null;){var c=s.alternate;if((s.childLanes&n)!==n?(s.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),s===i)break;s=s.return}}function Fd(s,n,i,c){var u=s.child;for(u!==null&&(u.return=s);u!==null;){var f=u.dependencies;if(f!==null){var C=u.child;f=f.firstContext;e:for(;f!==null;){var O=f;f=u;for(var $=0;$<n.length;$++)if(O.context===n[$]){f.lanes|=i,O=f.alternate,O!==null&&(O.lanes|=i),Ld(f.return,i,s),c||(C=null);break e}f=O.next}}else if(u.tag===18){if(C=u.return,C===null)throw Error(r(341));C.lanes|=i,f=C.alternate,f!==null&&(f.lanes|=i),Ld(C,i,s),C=null}else C=u.child;if(C!==null)C.return=u;else for(C=u;C!==null;){if(C===s){C=null;break}if(u=C.sibling,u!==null){u.return=C.return,C=u;break}C=C.return}u=C}}function jr(s,n,i,c){s=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var C=u.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var O=u.type;os(u.pendingProps.value,C.value)||(s!==null?s.push(O):s=[O])}}else if(u===Ne.current){if(C=u.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(s!==null?s.push(Xr):s=[Xr])}u=u.return}s!==null&&Fd(n,s,i,c),n.flags|=262144}function Xi(s){for(s=s.firstContext;s!==null;){if(!os(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function En(s){kn=s,ca=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Dt(s){return zh(kn,s)}function Zi(s,n){return kn===null&&En(s),zh(s,n)}function zh(s,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ca===null){if(s===null)throw Error(r(308));ca=n,s.dependencies={lanes:0,firstContext:n},s.flags|=524288}else ca=ca.next=n;return i}var mv=typeof AbortController<"u"?AbortController:function(){var s=[],n=this.signal={aborted:!1,addEventListener:function(i,c){s.push(c)}};this.abort=function(){n.aborted=!0,s.forEach(function(i){return i()})}},fv=t.unstable_scheduleCallback,hv=t.unstable_NormalPriority,Nt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dd(){return{controller:new mv,data:new Map,refCount:0}}function Nr(s){s.refCount--,s.refCount===0&&fv(hv,function(){s.controller.abort()})}var Sr=null,_d=0,hl=0,xl=null;function xv(s,n){if(Sr===null){var i=Sr=[];_d=0,hl=zu(),xl={status:"pending",value:void 0,then:function(c){i.push(c)}}}return _d++,n.then(Uh,Uh),n}function Uh(){if(--_d===0&&Sr!==null){xl!==null&&(xl.status="fulfilled");var s=Sr;Sr=null,hl=0,xl=null;for(var n=0;n<s.length;n++)(0,s[n])()}}function pv(s,n){var i=[],c={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return s.then(function(){c.status="fulfilled",c.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(c.status="rejected",c.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),c}var $h=_.S;_.S=function(s,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&xv(s,n),$h!==null&&$h(s,n)};var An=U(null);function qd(){var s=An.current;return s!==null?s:ot.pooledCache}function Ji(s,n){n===null?K(An,An.current):K(An,n.pool)}function Ih(){var s=qd();return s===null?null:{parent:Nt._currentValue,pool:s}}var Cr=Error(r(460)),Bh=Error(r(474)),eo=Error(r(542)),zd={then:function(){}};function Hh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function to(){}function Qh(s,n,i){switch(i=s[i],i===void 0?s.push(n):i!==n&&(n.then(to,to),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Kh(s),s;default:if(typeof n.status=="string")n.then(to,to);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=n,s.status="pending",s.then(function(c){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=c}},function(c){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Kh(s),s}throw kr=n,Cr}}var kr=null;function Gh(){if(kr===null)throw Error(r(459));var s=kr;return kr=null,s}function Kh(s){if(s===Cr||s===eo)throw Error(r(483))}var Ma=!1;function Ud(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(s,n){s=s.updateQueue,n.updateQueue===s&&(n.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function La(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Fa(s,n,i){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var u=c.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),c.pending=n,n=Ki(s),Mh(s,null,i),n}return Gi(s,c,n,i),Ki(s)}function Er(s,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,Uf(s,i)}}function Id(s,n){var i=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var C={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=C:f=f.next=C,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:c.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},s.updateQueue=i;return}s=i.lastBaseUpdate,s===null?i.firstBaseUpdate=n:s.next=n,i.lastBaseUpdate=n}var Bd=!1;function Ar(){if(Bd){var s=xl;if(s!==null)throw s}}function Or(s,n,i,c){Bd=!1;var u=s.updateQueue;Ma=!1;var f=u.firstBaseUpdate,C=u.lastBaseUpdate,O=u.shared.pending;if(O!==null){u.shared.pending=null;var $=O,ae=$.next;$.next=null,C===null?f=ae:C.next=ae,C=$;var he=s.alternate;he!==null&&(he=he.updateQueue,O=he.lastBaseUpdate,O!==C&&(O===null?he.firstBaseUpdate=ae:O.next=ae,he.lastBaseUpdate=$))}if(f!==null){var pe=u.baseState;C=0,he=ae=$=null,O=f;do{var ne=O.lane&-536870913,re=ne!==O.lane;if(re?(Ge&ne)===ne:(c&ne)===ne){ne!==0&&ne===hl&&(Bd=!0),he!==null&&(he=he.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Te=s,Oe=O;ne=n;var rt=i;switch(Oe.tag){case 1:if(Te=Oe.payload,typeof Te=="function"){pe=Te.call(rt,pe,ne);break e}pe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Oe.payload,ne=typeof Te=="function"?Te.call(rt,pe,ne):Te,ne==null)break e;pe=g({},pe,ne);break e;case 2:Ma=!0}}ne=O.callback,ne!==null&&(s.flags|=64,re&&(s.flags|=8192),re=u.callbacks,re===null?u.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},he===null?(ae=he=re,$=pe):he=he.next=re,C|=ne;if(O=O.next,O===null){if(O=u.shared.pending,O===null)break;re=O,O=re.next,re.next=null,u.lastBaseUpdate=re,u.shared.pending=null}}while(!0);he===null&&($=pe),u.baseState=$,u.firstBaseUpdate=ae,u.lastBaseUpdate=he,f===null&&(u.shared.lanes=0),Ba|=C,s.lanes=C,s.memoizedState=pe}}function Vh(s,n){if(typeof s!="function")throw Error(r(191,s));s.call(n)}function Yh(s,n){var i=s.callbacks;if(i!==null)for(s.callbacks=null,s=0;s<i.length;s++)Vh(i[s],n)}var pl=U(null),so=U(0);function Wh(s,n){s=ga,K(so,s),K(pl,n),ga=s|n.baseLanes}function Hd(){K(so,ga),K(pl,pl.current)}function Qd(){ga=so.current,L(pl),L(so)}var Da=0,Ue=null,nt=null,wt=null,ao=!1,gl=!1,On=!1,no=0,Rr=0,bl=null,gv=0;function gt(){throw Error(r(321))}function Gd(s,n){if(n===null)return!1;for(var i=0;i<n.length&&i<s.length;i++)if(!os(s[i],n[i]))return!1;return!0}function Kd(s,n,i,c,u,f){return Da=f,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_.H=s===null||s.memoizedState===null?Mx:Lx,On=!1,f=i(c,u),On=!1,gl&&(f=Zh(n,i,c,u)),Xh(s),f}function Xh(s){_.H=uo;var n=nt!==null&&nt.next!==null;if(Da=0,wt=nt=Ue=null,ao=!1,Rr=0,bl=null,n)throw Error(r(300));s===null||Et||(s=s.dependencies,s!==null&&Xi(s)&&(Et=!0))}function Zh(s,n,i,c){Ue=s;var u=0;do{if(gl&&(bl=null),Rr=0,gl=!1,25<=u)throw Error(r(301));if(u+=1,wt=nt=null,s.updateQueue!=null){var f=s.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}_.H=Sv,f=n(i,c)}while(gl);return f}function bv(){var s=_.H,n=s.useState()[0];return n=typeof n.then=="function"?Tr(n):n,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(Ue.flags|=1024),n}function Vd(){var s=no!==0;return no=0,s}function Yd(s,n,i){n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~i}function Wd(s){if(ao){for(s=s.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}ao=!1}Da=0,wt=nt=Ue=null,gl=!1,Rr=no=0,bl=null}function Xt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ue.memoizedState=wt=s:wt=wt.next=s,wt}function vt(){if(nt===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var n=wt===null?Ue.memoizedState:wt.next;if(n!==null)wt=n,nt=s;else{if(s===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},wt===null?Ue.memoizedState=wt=s:wt=wt.next=s}return wt}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tr(s){var n=Rr;return Rr+=1,bl===null&&(bl=[]),s=Qh(bl,s,n),n=Ue,(wt===null?n.memoizedState:wt.next)===null&&(n=n.alternate,_.H=n===null||n.memoizedState===null?Mx:Lx),s}function lo(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tr(s);if(s.$$typeof===N)return Dt(s)}throw Error(r(438,String(s)))}function Zd(s){var n=null,i=Ue.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Xd(),Ue.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(s),c=0;c<s;c++)i[c]=de;return n.index++,i}function ua(s,n){return typeof n=="function"?n(s):n}function ro(s){var n=vt();return Jd(n,nt,s)}function Jd(s,n,i){var c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var u=s.baseQueue,f=c.pending;if(f!==null){if(u!==null){var C=u.next;u.next=f.next,f.next=C}n.baseQueue=u=f,c.pending=null}if(f=s.baseState,u===null)s.memoizedState=f;else{n=u.next;var O=C=null,$=null,ae=n,he=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(Ge&pe)===pe:(Da&pe)===pe){var ne=ae.revertLane;if(ne===0)$!==null&&($=$.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===hl&&(he=!0);else if((Da&ne)===ne){ae=ae.next,ne===hl&&(he=!0);continue}else pe={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},$===null?(O=$=pe,C=f):$=$.next=pe,Ue.lanes|=ne,Ba|=ne;pe=ae.action,On&&i(f,pe),f=ae.hasEagerState?ae.eagerState:i(f,pe)}else ne={lane:pe,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},$===null?(O=$=ne,C=f):$=$.next=ne,Ue.lanes|=pe,Ba|=pe;ae=ae.next}while(ae!==null&&ae!==n);if($===null?C=f:$.next=O,!os(f,s.memoizedState)&&(Et=!0,he&&(i=xl,i!==null)))throw i;s.memoizedState=f,s.baseState=C,s.baseQueue=$,c.lastRenderedState=f}return u===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function eu(s){var n=vt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=s;var c=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var C=u=u.next;do f=s(f,C.action),C=C.next;while(C!==u);os(f,n.memoizedState)||(Et=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,c]}function Jh(s,n,i){var c=Ue,u=vt(),f=We;if(f){if(i===void 0)throw Error(r(407));i=i()}else i=n();var C=!os((nt||u).memoizedState,i);C&&(u.memoizedState=i,Et=!0),u=u.queue;var O=sx.bind(null,c,u,s);if(Pr(2048,8,O,[s]),u.getSnapshot!==n||C||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,yl(9,io(),tx.bind(null,c,u,i,n),null),ot===null)throw Error(r(349));f||(Da&124)!==0||ex(c,n,i)}return i}function ex(s,n,i){s.flags|=16384,s={getSnapshot:n,value:i},n=Ue.updateQueue,n===null?(n=Xd(),Ue.updateQueue=n,n.stores=[s]):(i=n.stores,i===null?n.stores=[s]:i.push(s))}function tx(s,n,i,c){n.value=i,n.getSnapshot=c,ax(n)&&nx(s)}function sx(s,n,i){return i(function(){ax(n)&&nx(s)})}function ax(s){var n=s.getSnapshot;s=s.value;try{var i=n();return!os(s,i)}catch{return!0}}function nx(s){var n=dl(s,2);n!==null&&hs(n,s,2)}function tu(s){var n=Xt();if(typeof s=="function"){var i=s;if(s=i(),On){Oa(!0);try{i()}finally{Oa(!1)}}}return n.memoizedState=n.baseState=s,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:s},n}function lx(s,n,i,c){return s.baseState=i,Jd(s,nt,typeof c=="function"?c:ua)}function yv(s,n,i,c,u){if(co(s))throw Error(r(485));if(s=n.action,s!==null){var f={payload:u,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){f.listeners.push(C)}};_.T!==null?i(!0):f.isTransition=!1,c(f),i=n.pending,i===null?(f.next=n.pending=f,rx(n,f)):(f.next=i.next,n.pending=i.next=f)}}function rx(s,n){var i=n.action,c=n.payload,u=s.state;if(n.isTransition){var f=_.T,C={};_.T=C;try{var O=i(u,c),$=_.S;$!==null&&$(C,O),ix(s,n,O)}catch(ae){su(s,n,ae)}finally{_.T=f}}else try{f=i(u,c),ix(s,n,f)}catch(ae){su(s,n,ae)}}function ix(s,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){ox(s,n,c)},function(c){return su(s,n,c)}):ox(s,n,i)}function ox(s,n,i){n.status="fulfilled",n.value=i,cx(n),s.state=i,n=s.pending,n!==null&&(i=n.next,i===n?s.pending=null:(i=i.next,n.next=i,rx(s,i)))}function su(s,n,i){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,cx(n),n=n.next;while(n!==c)}s.action=null}function cx(s){s=s.listeners;for(var n=0;n<s.length;n++)(0,s[n])()}function dx(s,n){return n}function ux(s,n){if(We){var i=ot.formState;if(i!==null){e:{var c=Ue;if(We){if(ft){t:{for(var u=ft,f=Gs;u.nodeType!==8;){if(!f){u=null;break t}if(u=_s(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){ft=_s(u.nextSibling),c=u.data==="F!";break e}}Cn(c)}c=!1}c&&(n=i[0])}}return i=Xt(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dx,lastRenderedState:n},i.queue=c,i=Rx.bind(null,Ue,c),c.dispatch=i,c=tu(!1),f=iu.bind(null,Ue,!1,c.queue),c=Xt(),u={state:n,dispatch:null,action:s,pending:null},c.queue=u,i=yv.bind(null,Ue,u,f,i),u.dispatch=i,c.memoizedState=s,[n,i,!1]}function mx(s){var n=vt();return fx(n,nt,s)}function fx(s,n,i){if(n=Jd(s,n,dx)[0],s=ro(ua)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Tr(n)}catch(C){throw C===Cr?eo:C}else c=n;n=vt();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(Ue.flags|=2048,yl(9,io(),wv.bind(null,u,i),null)),[c,f,s]}function wv(s,n){s.action=n}function hx(s){var n=vt(),i=nt;if(i!==null)return fx(n,i,s);vt(),n=n.memoizedState,i=vt();var c=i.queue.dispatch;return i.memoizedState=s,[n,c,!1]}function yl(s,n,i,c){return s={tag:s,create:i,deps:c,inst:n,next:null},n=Ue.updateQueue,n===null&&(n=Xd(),Ue.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=s.next=s:(c=i.next,i.next=s,s.next=c,n.lastEffect=s),s}function io(){return{destroy:void 0,resource:void 0}}function xx(){return vt().memoizedState}function oo(s,n,i,c){var u=Xt();c=c===void 0?null:c,Ue.flags|=s,u.memoizedState=yl(1|n,io(),i,c)}function Pr(s,n,i,c){var u=vt();c=c===void 0?null:c;var f=u.memoizedState.inst;nt!==null&&c!==null&&Gd(c,nt.memoizedState.deps)?u.memoizedState=yl(n,f,i,c):(Ue.flags|=s,u.memoizedState=yl(1|n,f,i,c))}function px(s,n){oo(8390656,8,s,n)}function gx(s,n){Pr(2048,8,s,n)}function bx(s,n){return Pr(4,2,s,n)}function yx(s,n){return Pr(4,4,s,n)}function wx(s,n){if(typeof n=="function"){s=s();var i=n(s);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return s=s(),n.current=s,function(){n.current=null}}function vx(s,n,i){i=i!=null?i.concat([s]):null,Pr(4,4,wx.bind(null,n,s),i)}function au(){}function jx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&Gd(n,c[1])?c[0]:(i.memoizedState=[s,n],s)}function Nx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&Gd(n,c[1]))return c[0];if(c=s(),On){Oa(!0);try{s()}finally{Oa(!1)}}return i.memoizedState=[c,n],c}function nu(s,n,i){return i===void 0||(Da&1073741824)!==0?s.memoizedState=n:(s.memoizedState=i,s=kp(),Ue.lanes|=s,Ba|=s,i)}function Sx(s,n,i,c){return os(i,n)?i:pl.current!==null?(s=nu(s,i,c),os(s,n)||(Et=!0),s):(Da&42)===0?(Et=!0,s.memoizedState=i):(s=kp(),Ue.lanes|=s,Ba|=s,n)}function Cx(s,n,i,c,u){var f=W.p;W.p=f!==0&&8>f?f:8;var C=_.T,O={};_.T=O,iu(s,!1,n,i);try{var $=u(),ae=_.S;if(ae!==null&&ae(O,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var he=pv($,c);Mr(s,n,he,fs(s))}else Mr(s,n,c,fs(s))}catch(pe){Mr(s,n,{then:function(){},status:"rejected",reason:pe},fs())}finally{W.p=f,_.T=C}}function vv(){}function lu(s,n,i,c){if(s.tag!==5)throw Error(r(476));var u=kx(s).queue;Cx(s,u,n,me,i===null?vv:function(){return Ex(s),i(c)})}function kx(s){var n=s.memoizedState;if(n!==null)return n;n={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:me},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:i},next:null},s.memoizedState=n,s=s.alternate,s!==null&&(s.memoizedState=n),n}function Ex(s){var n=kx(s).next.queue;Mr(s,n,{},fs())}function ru(){return Dt(Xr)}function Ax(){return vt().memoizedState}function Ox(){return vt().memoizedState}function jv(s){for(var n=s.return;n!==null;){switch(n.tag){case 24:case 3:var i=fs();s=La(i);var c=Fa(n,s,i);c!==null&&(hs(c,n,i),Er(c,n,i)),n={cache:Dd()},s.payload=n;return}n=n.return}}function Nv(s,n,i){var c=fs();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},co(s)?Tx(n,i):(i=kd(s,n,i,c),i!==null&&(hs(i,s,c),Px(i,n,c)))}function Rx(s,n,i){var c=fs();Mr(s,n,i,c)}function Mr(s,n,i,c){var u={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(co(s))Tx(n,u);else{var f=s.alternate;if(s.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var C=n.lastRenderedState,O=f(C,i);if(u.hasEagerState=!0,u.eagerState=O,os(O,C))return Gi(s,n,u,0),ot===null&&Qi(),!1}catch{}finally{}if(i=kd(s,n,u,c),i!==null)return hs(i,s,c),Px(i,n,c),!0}return!1}function iu(s,n,i,c){if(c={lane:2,revertLane:zu(),action:c,hasEagerState:!1,eagerState:null,next:null},co(s)){if(n)throw Error(r(479))}else n=kd(s,i,c,2),n!==null&&hs(n,s,2)}function co(s){var n=s.alternate;return s===Ue||n!==null&&n===Ue}function Tx(s,n){gl=ao=!0;var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}function Px(s,n,i){if((i&4194048)!==0){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,Uf(s,i)}}var uo={readContext:Dt,use:lo,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},Mx={readContext:Dt,use:lo,useCallback:function(s,n){return Xt().memoizedState=[s,n===void 0?null:n],s},useContext:Dt,useEffect:px,useImperativeHandle:function(s,n,i){i=i!=null?i.concat([s]):null,oo(4194308,4,wx.bind(null,n,s),i)},useLayoutEffect:function(s,n){return oo(4194308,4,s,n)},useInsertionEffect:function(s,n){oo(4,2,s,n)},useMemo:function(s,n){var i=Xt();n=n===void 0?null:n;var c=s();if(On){Oa(!0);try{s()}finally{Oa(!1)}}return i.memoizedState=[c,n],c},useReducer:function(s,n,i){var c=Xt();if(i!==void 0){var u=i(n);if(On){Oa(!0);try{i(n)}finally{Oa(!1)}}}else u=n;return c.memoizedState=c.baseState=u,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},c.queue=s,s=s.dispatch=Nv.bind(null,Ue,s),[c.memoizedState,s]},useRef:function(s){var n=Xt();return s={current:s},n.memoizedState=s},useState:function(s){s=tu(s);var n=s.queue,i=Rx.bind(null,Ue,n);return n.dispatch=i,[s.memoizedState,i]},useDebugValue:au,useDeferredValue:function(s,n){var i=Xt();return nu(i,s,n)},useTransition:function(){var s=tu(!1);return s=Cx.bind(null,Ue,s.queue,!0,!1),Xt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,n,i){var c=Ue,u=Xt();if(We){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),ot===null)throw Error(r(349));(Ge&124)!==0||ex(c,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,px(sx.bind(null,c,f,s),[s]),c.flags|=2048,yl(9,io(),tx.bind(null,c,f,i,n),null),i},useId:function(){var s=Xt(),n=ot.identifierPrefix;if(We){var i=oa,c=ia;i=(c&~(1<<32-is(c)-1)).toString(32)+i,n=""+n+"R"+i,i=no++,0<i&&(n+="H"+i.toString(32)),n+=""}else i=gv++,n=""+n+"r"+i.toString(32)+"";return s.memoizedState=n},useHostTransitionStatus:ru,useFormState:ux,useActionState:ux,useOptimistic:function(s){var n=Xt();n.memoizedState=n.baseState=s;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=iu.bind(null,Ue,!0,i),i.dispatch=n,[s,n]},useMemoCache:Zd,useCacheRefresh:function(){return Xt().memoizedState=jv.bind(null,Ue)}},Lx={readContext:Dt,use:lo,useCallback:jx,useContext:Dt,useEffect:gx,useImperativeHandle:vx,useInsertionEffect:bx,useLayoutEffect:yx,useMemo:Nx,useReducer:ro,useRef:xx,useState:function(){return ro(ua)},useDebugValue:au,useDeferredValue:function(s,n){var i=vt();return Sx(i,nt.memoizedState,s,n)},useTransition:function(){var s=ro(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tr(s),n]},useSyncExternalStore:Jh,useId:Ax,useHostTransitionStatus:ru,useFormState:mx,useActionState:mx,useOptimistic:function(s,n){var i=vt();return lx(i,nt,s,n)},useMemoCache:Zd,useCacheRefresh:Ox},Sv={readContext:Dt,use:lo,useCallback:jx,useContext:Dt,useEffect:gx,useImperativeHandle:vx,useInsertionEffect:bx,useLayoutEffect:yx,useMemo:Nx,useReducer:eu,useRef:xx,useState:function(){return eu(ua)},useDebugValue:au,useDeferredValue:function(s,n){var i=vt();return nt===null?nu(i,s,n):Sx(i,nt.memoizedState,s,n)},useTransition:function(){var s=eu(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tr(s),n]},useSyncExternalStore:Jh,useId:Ax,useHostTransitionStatus:ru,useFormState:hx,useActionState:hx,useOptimistic:function(s,n){var i=vt();return nt!==null?lx(i,nt,s,n):(i.baseState=s,[s,i.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:Ox},wl=null,Lr=0;function mo(s){var n=Lr;return Lr+=1,wl===null&&(wl=[]),Qh(wl,s,n)}function Fr(s,n){n=n.props.ref,s.ref=n!==void 0?n:null}function fo(s,n){throw n.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(n),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s)))}function Fx(s){var n=s._init;return n(s._payload)}function Dx(s){function n(X,G){if(s){var te=X.deletions;te===null?(X.deletions=[G],X.flags|=16):te.push(G)}}function i(X,G){if(!s)return null;for(;G!==null;)n(X,G),G=G.sibling;return null}function c(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function u(X,G){return X=ra(X,G),X.index=0,X.sibling=null,X}function f(X,G,te){return X.index=te,s?(te=X.alternate,te!==null?(te=te.index,te<G?(X.flags|=67108866,G):te):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function C(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function O(X,G,te,xe){return G===null||G.tag!==6?(G=Ad(te,X.mode,xe),G.return=X,G):(G=u(G,te),G.return=X,G)}function $(X,G,te,xe){var je=te.type;return je===b?he(X,G,te.props.children,xe,te.key):G!==null&&(G.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&Fx(je)===G.type)?(G=u(G,te.props),Fr(G,te),G.return=X,G):(G=Vi(te.type,te.key,te.props,null,X.mode,xe),Fr(G,te),G.return=X,G)}function ae(X,G,te,xe){return G===null||G.tag!==4||G.stateNode.containerInfo!==te.containerInfo||G.stateNode.implementation!==te.implementation?(G=Od(te,X.mode,xe),G.return=X,G):(G=u(G,te.children||[]),G.return=X,G)}function he(X,G,te,xe,je){return G===null||G.tag!==7?(G=vn(te,X.mode,xe,je),G.return=X,G):(G=u(G,te),G.return=X,G)}function pe(X,G,te){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ad(""+G,X.mode,te),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return te=Vi(G.type,G.key,G.props,null,X.mode,te),Fr(te,G),te.return=X,te;case E:return G=Od(G,X.mode,te),G.return=X,G;case q:var xe=G._init;return G=xe(G._payload),pe(X,G,te)}if(oe(G)||B(G))return G=vn(G,X.mode,te,null),G.return=X,G;if(typeof G.then=="function")return pe(X,mo(G),te);if(G.$$typeof===N)return pe(X,Zi(X,G),te);fo(X,G)}return null}function ne(X,G,te,xe){var je=G!==null?G.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return je!==null?null:O(X,G,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case j:return te.key===je?$(X,G,te,xe):null;case E:return te.key===je?ae(X,G,te,xe):null;case q:return je=te._init,te=je(te._payload),ne(X,G,te,xe)}if(oe(te)||B(te))return je!==null?null:he(X,G,te,xe,null);if(typeof te.then=="function")return ne(X,G,mo(te),xe);if(te.$$typeof===N)return ne(X,G,Zi(X,te),xe);fo(X,te)}return null}function re(X,G,te,xe,je){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return X=X.get(te)||null,O(G,X,""+xe,je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case j:return X=X.get(xe.key===null?te:xe.key)||null,$(G,X,xe,je);case E:return X=X.get(xe.key===null?te:xe.key)||null,ae(G,X,xe,je);case q:var $e=xe._init;return xe=$e(xe._payload),re(X,G,te,xe,je)}if(oe(xe)||B(xe))return X=X.get(te)||null,he(G,X,xe,je,null);if(typeof xe.then=="function")return re(X,G,te,mo(xe),je);if(xe.$$typeof===N)return re(X,G,te,Zi(G,xe),je);fo(G,xe)}return null}function Te(X,G,te,xe){for(var je=null,$e=null,Se=G,Re=G=0,Ot=null;Se!==null&&Re<te.length;Re++){Se.index>Re?(Ot=Se,Se=null):Ot=Se.sibling;var Ye=ne(X,Se,te[Re],xe);if(Ye===null){Se===null&&(Se=Ot);break}s&&Se&&Ye.alternate===null&&n(X,Se),G=f(Ye,G,Re),$e===null?je=Ye:$e.sibling=Ye,$e=Ye,Se=Ot}if(Re===te.length)return i(X,Se),We&&Nn(X,Re),je;if(Se===null){for(;Re<te.length;Re++)Se=pe(X,te[Re],xe),Se!==null&&(G=f(Se,G,Re),$e===null?je=Se:$e.sibling=Se,$e=Se);return We&&Nn(X,Re),je}for(Se=c(Se);Re<te.length;Re++)Ot=re(Se,X,Re,te[Re],xe),Ot!==null&&(s&&Ot.alternate!==null&&Se.delete(Ot.key===null?Re:Ot.key),G=f(Ot,G,Re),$e===null?je=Ot:$e.sibling=Ot,$e=Ot);return s&&Se.forEach(function(Za){return n(X,Za)}),We&&Nn(X,Re),je}function Oe(X,G,te,xe){if(te==null)throw Error(r(151));for(var je=null,$e=null,Se=G,Re=G=0,Ot=null,Ye=te.next();Se!==null&&!Ye.done;Re++,Ye=te.next()){Se.index>Re?(Ot=Se,Se=null):Ot=Se.sibling;var Za=ne(X,Se,Ye.value,xe);if(Za===null){Se===null&&(Se=Ot);break}s&&Se&&Za.alternate===null&&n(X,Se),G=f(Za,G,Re),$e===null?je=Za:$e.sibling=Za,$e=Za,Se=Ot}if(Ye.done)return i(X,Se),We&&Nn(X,Re),je;if(Se===null){for(;!Ye.done;Re++,Ye=te.next())Ye=pe(X,Ye.value,xe),Ye!==null&&(G=f(Ye,G,Re),$e===null?je=Ye:$e.sibling=Ye,$e=Ye);return We&&Nn(X,Re),je}for(Se=c(Se);!Ye.done;Re++,Ye=te.next())Ye=re(Se,X,Re,Ye.value,xe),Ye!==null&&(s&&Ye.alternate!==null&&Se.delete(Ye.key===null?Re:Ye.key),G=f(Ye,G,Re),$e===null?je=Ye:$e.sibling=Ye,$e=Ye);return s&&Se.forEach(function(Cj){return n(X,Cj)}),We&&Nn(X,Re),je}function rt(X,G,te,xe){if(typeof te=="object"&&te!==null&&te.type===b&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case j:e:{for(var je=te.key;G!==null;){if(G.key===je){if(je=te.type,je===b){if(G.tag===7){i(X,G.sibling),xe=u(G,te.props.children),xe.return=X,X=xe;break e}}else if(G.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&Fx(je)===G.type){i(X,G.sibling),xe=u(G,te.props),Fr(xe,te),xe.return=X,X=xe;break e}i(X,G);break}else n(X,G);G=G.sibling}te.type===b?(xe=vn(te.props.children,X.mode,xe,te.key),xe.return=X,X=xe):(xe=Vi(te.type,te.key,te.props,null,X.mode,xe),Fr(xe,te),xe.return=X,X=xe)}return C(X);case E:e:{for(je=te.key;G!==null;){if(G.key===je)if(G.tag===4&&G.stateNode.containerInfo===te.containerInfo&&G.stateNode.implementation===te.implementation){i(X,G.sibling),xe=u(G,te.children||[]),xe.return=X,X=xe;break e}else{i(X,G);break}else n(X,G);G=G.sibling}xe=Od(te,X.mode,xe),xe.return=X,X=xe}return C(X);case q:return je=te._init,te=je(te._payload),rt(X,G,te,xe)}if(oe(te))return Te(X,G,te,xe);if(B(te)){if(je=B(te),typeof je!="function")throw Error(r(150));return te=je.call(te),Oe(X,G,te,xe)}if(typeof te.then=="function")return rt(X,G,mo(te),xe);if(te.$$typeof===N)return rt(X,G,Zi(X,te),xe);fo(X,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,G!==null&&G.tag===6?(i(X,G.sibling),xe=u(G,te),xe.return=X,X=xe):(i(X,G),xe=Ad(te,X.mode,xe),xe.return=X,X=xe),C(X)):i(X,G)}return function(X,G,te,xe){try{Lr=0;var je=rt(X,G,te,xe);return wl=null,je}catch(Se){if(Se===Cr||Se===eo)throw Se;var $e=cs(29,Se,null,X.mode);return $e.lanes=xe,$e.return=X,$e}finally{}}}var vl=Dx(!0),_x=Dx(!1),Es=U(null),Ks=null;function _a(s){var n=s.alternate;K(St,St.current&1),K(Es,s),Ks===null&&(n===null||pl.current!==null||n.memoizedState!==null)&&(Ks=s)}function qx(s){if(s.tag===22){if(K(St,St.current),K(Es,s),Ks===null){var n=s.alternate;n!==null&&n.memoizedState!==null&&(Ks=s)}}else qa()}function qa(){K(St,St.current),K(Es,Es.current)}function ma(s){L(Es),Ks===s&&(Ks=null),L(St)}var St=U(0);function ho(s){for(var n=s;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Xu(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function ou(s,n,i,c){n=s.memoizedState,i=i(c,n),i=i==null?n:g({},n,i),s.memoizedState=i,s.lanes===0&&(s.updateQueue.baseState=i)}var cu={enqueueSetState:function(s,n,i){s=s._reactInternals;var c=fs(),u=La(c);u.payload=n,i!=null&&(u.callback=i),n=Fa(s,u,c),n!==null&&(hs(n,s,c),Er(n,s,c))},enqueueReplaceState:function(s,n,i){s=s._reactInternals;var c=fs(),u=La(c);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Fa(s,u,c),n!==null&&(hs(n,s,c),Er(n,s,c))},enqueueForceUpdate:function(s,n){s=s._reactInternals;var i=fs(),c=La(i);c.tag=2,n!=null&&(c.callback=n),n=Fa(s,c,i),n!==null&&(hs(n,s,i),Er(n,s,i))}};function zx(s,n,i,c,u,f,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,f,C):n.prototype&&n.prototype.isPureReactComponent?!gr(i,c)||!gr(u,f):!0}function Ux(s,n,i,c){s=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==s&&cu.enqueueReplaceState(n,n.state,null)}function Rn(s,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(s=s.defaultProps){i===n&&(i=g({},i));for(var u in s)i[u]===void 0&&(i[u]=s[u])}return i}var xo=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function $x(s){xo(s)}function Ix(s){console.error(s)}function Bx(s){xo(s)}function po(s,n){try{var i=s.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function Hx(s,n,i){try{var c=s.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function du(s,n,i){return i=La(i),i.tag=3,i.payload={element:null},i.callback=function(){po(s,n)},i}function Qx(s){return s=La(s),s.tag=3,s}function Gx(s,n,i,c){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=c.value;s.payload=function(){return u(f)},s.callback=function(){Hx(n,i,c)}}var C=i.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){Hx(n,i,c),typeof u!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})})}function Cv(s,n,i,c,u){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&jr(n,i,u,!0),i=Es.current,i!==null){switch(i.tag){case 13:return Ks===null?Lu():i.alternate===null&&ht===0&&(ht=3),i.flags&=-257,i.flags|=65536,i.lanes=u,c===zd?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),Du(s,c,u)),!1;case 22:return i.flags|=65536,c===zd?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),Du(s,c,u)),!1}throw Error(r(435,i.tag))}return Du(s,c,u),Lu(),!1}if(We)return n=Es.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,c!==Pd&&(s=Error(r(422),{cause:c}),vr(Ns(s,i)))):(c!==Pd&&(n=Error(r(423),{cause:c}),vr(Ns(n,i))),s=s.current.alternate,s.flags|=65536,u&=-u,s.lanes|=u,c=Ns(c,i),u=du(s.stateNode,c,u),Id(s,u),ht!==4&&(ht=2)),!1;var f=Error(r(520),{cause:c});if(f=Ns(f,i),Ir===null?Ir=[f]:Ir.push(f),ht!==4&&(ht=2),n===null)return!0;c=Ns(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,s=u&-u,i.lanes|=s,s=du(i.stateNode,c,s),Id(i,s),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ha===null||!Ha.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Qx(u),Gx(u,s,i,c),Id(i,u),!1}i=i.return}while(i!==null);return!1}var Kx=Error(r(461)),Et=!1;function Rt(s,n,i,c){n.child=s===null?_x(n,null,i,c):vl(n,s.child,i,c)}function Vx(s,n,i,c,u){i=i.render;var f=n.ref;if("ref"in c){var C={};for(var O in c)O!=="ref"&&(C[O]=c[O])}else C=c;return En(n),c=Kd(s,n,i,C,f,u),O=Vd(),s!==null&&!Et?(Yd(s,n,u),fa(s,n,u)):(We&&O&&Rd(n),n.flags|=1,Rt(s,n,c,u),n.child)}function Yx(s,n,i,c,u){if(s===null){var f=i.type;return typeof f=="function"&&!Ed(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,Wx(s,n,f,c,u)):(s=Vi(i.type,null,c,n,n.mode,u),s.ref=n.ref,s.return=n,n.child=s)}if(f=s.child,!bu(s,u)){var C=f.memoizedProps;if(i=i.compare,i=i!==null?i:gr,i(C,c)&&s.ref===n.ref)return fa(s,n,u)}return n.flags|=1,s=ra(f,c),s.ref=n.ref,s.return=n,n.child=s}function Wx(s,n,i,c,u){if(s!==null){var f=s.memoizedProps;if(gr(f,c)&&s.ref===n.ref)if(Et=!1,n.pendingProps=c=f,bu(s,u))(s.flags&131072)!==0&&(Et=!0);else return n.lanes=s.lanes,fa(s,n,u)}return uu(s,n,i,c,u)}function Xx(s,n,i){var c=n.pendingProps,u=c.children,f=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((n.flags&128)!==0){if(c=f!==null?f.baseLanes|i:i,s!==null){for(u=n.child=s.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;n.childLanes=f&~c}else n.childLanes=0,n.child=null;return Zx(s,n,c,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ji(n,f!==null?f.cachePool:null),f!==null?Wh(n,f):Hd(),qx(n);else return n.lanes=n.childLanes=536870912,Zx(s,n,f!==null?f.baseLanes|i:i,i)}else f!==null?(Ji(n,f.cachePool),Wh(n,f),qa(),n.memoizedState=null):(s!==null&&Ji(n,null),Hd(),qa());return Rt(s,n,u,i),n.child}function Zx(s,n,i,c){var u=qd();return u=u===null?null:{parent:Nt._currentValue,pool:u},n.memoizedState={baseLanes:i,cachePool:u},s!==null&&Ji(n,null),Hd(),qx(n),s!==null&&jr(s,n,c,!0),null}function go(s,n){var i=n.ref;if(i===null)s!==null&&s.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(s===null||s.ref!==i)&&(n.flags|=4194816)}}function uu(s,n,i,c,u){return En(n),i=Kd(s,n,i,c,void 0,u),c=Vd(),s!==null&&!Et?(Yd(s,n,u),fa(s,n,u)):(We&&c&&Rd(n),n.flags|=1,Rt(s,n,i,u),n.child)}function Jx(s,n,i,c,u,f){return En(n),n.updateQueue=null,i=Zh(n,c,i,u),Xh(s),c=Vd(),s!==null&&!Et?(Yd(s,n,f),fa(s,n,f)):(We&&c&&Rd(n),n.flags|=1,Rt(s,n,i,f),n.child)}function ep(s,n,i,c,u){if(En(n),n.stateNode===null){var f=ul,C=i.contextType;typeof C=="object"&&C!==null&&(f=Dt(C)),f=new i(c,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=cu,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=c,f.state=n.memoizedState,f.refs={},Ud(n),C=i.contextType,f.context=typeof C=="object"&&C!==null?Dt(C):ul,f.state=n.memoizedState,C=i.getDerivedStateFromProps,typeof C=="function"&&(ou(n,i,C,c),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(C=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),C!==f.state&&cu.enqueueReplaceState(f,f.state,null),Or(n,c,f,u),Ar(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(s===null){f=n.stateNode;var O=n.memoizedProps,$=Rn(i,O);f.props=$;var ae=f.context,he=i.contextType;C=ul,typeof he=="object"&&he!==null&&(C=Dt(he));var pe=i.getDerivedStateFromProps;he=typeof pe=="function"||typeof f.getSnapshotBeforeUpdate=="function",O=n.pendingProps!==O,he||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(O||ae!==C)&&Ux(n,f,c,C),Ma=!1;var ne=n.memoizedState;f.state=ne,Or(n,c,f,u),Ar(),ae=n.memoizedState,O||ne!==ae||Ma?(typeof pe=="function"&&(ou(n,i,pe,c),ae=n.memoizedState),($=Ma||zx(n,i,$,c,ne,ae,C))?(he||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=ae),f.props=c,f.state=ae,f.context=C,c=$):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{f=n.stateNode,$d(s,n),C=n.memoizedProps,he=Rn(i,C),f.props=he,pe=n.pendingProps,ne=f.context,ae=i.contextType,$=ul,typeof ae=="object"&&ae!==null&&($=Dt(ae)),O=i.getDerivedStateFromProps,(ae=typeof O=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(C!==pe||ne!==$)&&Ux(n,f,c,$),Ma=!1,ne=n.memoizedState,f.state=ne,Or(n,c,f,u),Ar();var re=n.memoizedState;C!==pe||ne!==re||Ma||s!==null&&s.dependencies!==null&&Xi(s.dependencies)?(typeof O=="function"&&(ou(n,i,O,c),re=n.memoizedState),(he=Ma||zx(n,i,he,c,ne,re,$)||s!==null&&s.dependencies!==null&&Xi(s.dependencies))?(ae||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,re,$),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,re,$)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||C===s.memoizedProps&&ne===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ne===s.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=re),f.props=c,f.state=re,f.context=$,c=he):(typeof f.componentDidUpdate!="function"||C===s.memoizedProps&&ne===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ne===s.memoizedState||(n.flags|=1024),c=!1)}return f=c,go(s,n),c=(n.flags&128)!==0,f||c?(f=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,s!==null&&c?(n.child=vl(n,s.child,null,u),n.child=vl(n,null,i,u)):Rt(s,n,i,u),n.memoizedState=f.state,s=n.child):s=fa(s,n,u),s}function tp(s,n,i,c){return wr(),n.flags|=256,Rt(s,n,i,c),n.child}var mu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(s){return{baseLanes:s,cachePool:Ih()}}function hu(s,n,i){return s=s!==null?s.childLanes&~i:0,n&&(s|=As),s}function sp(s,n,i){var c=n.pendingProps,u=!1,f=(n.flags&128)!==0,C;if((C=f)||(C=s!==null&&s.memoizedState===null?!1:(St.current&2)!==0),C&&(u=!0,n.flags&=-129),C=(n.flags&32)!==0,n.flags&=-33,s===null){if(We){if(u?_a(n):qa(),We){var O=ft,$;if($=O){e:{for($=O,O=Gs;$.nodeType!==8;){if(!O){O=null;break e}if($=_s($.nextSibling),$===null){O=null;break e}}O=$}O!==null?(n.memoizedState={dehydrated:O,treeContext:jn!==null?{id:ia,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},$=cs(18,null,null,0),$.stateNode=O,$.return=n,n.child=$,Bt=n,ft=null,$=!0):$=!1}$||Cn(n)}if(O=n.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Xu(O)?n.lanes=32:n.lanes=536870912,null;ma(n)}return O=c.children,c=c.fallback,u?(qa(),u=n.mode,O=bo({mode:"hidden",children:O},u),c=vn(c,u,i,null),O.return=n,c.return=n,O.sibling=c,n.child=O,u=n.child,u.memoizedState=fu(i),u.childLanes=hu(s,C,i),n.memoizedState=mu,c):(_a(n),xu(n,O))}if($=s.memoizedState,$!==null&&(O=$.dehydrated,O!==null)){if(f)n.flags&256?(_a(n),n.flags&=-257,n=pu(s,n,i)):n.memoizedState!==null?(qa(),n.child=s.child,n.flags|=128,n=null):(qa(),u=c.fallback,O=n.mode,c=bo({mode:"visible",children:c.children},O),u=vn(u,O,i,null),u.flags|=2,c.return=n,u.return=n,c.sibling=u,n.child=c,vl(n,s.child,null,i),c=n.child,c.memoizedState=fu(i),c.childLanes=hu(s,C,i),n.memoizedState=mu,n=u);else if(_a(n),Xu(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var ae=C.dgst;C=ae,c=Error(r(419)),c.stack="",c.digest=C,vr({value:c,source:null,stack:null}),n=pu(s,n,i)}else if(Et||jr(s,n,i,!1),C=(i&s.childLanes)!==0,Et||C){if(C=ot,C!==null&&(c=i&-i,c=(c&42)!==0?1:Zc(c),c=(c&(C.suspendedLanes|i))!==0?0:c,c!==0&&c!==$.retryLane))throw $.retryLane=c,dl(s,c),hs(C,s,c),Kx;O.data==="$?"||Lu(),n=pu(s,n,i)}else O.data==="$?"?(n.flags|=192,n.child=s.child,n=null):(s=$.treeContext,ft=_s(O.nextSibling),Bt=n,We=!0,Sn=null,Gs=!1,s!==null&&(Cs[ks++]=ia,Cs[ks++]=oa,Cs[ks++]=jn,ia=s.id,oa=s.overflow,jn=n),n=xu(n,c.children),n.flags|=4096);return n}return u?(qa(),u=c.fallback,O=n.mode,$=s.child,ae=$.sibling,c=ra($,{mode:"hidden",children:c.children}),c.subtreeFlags=$.subtreeFlags&65011712,ae!==null?u=ra(ae,u):(u=vn(u,O,i,null),u.flags|=2),u.return=n,c.return=n,c.sibling=u,n.child=c,c=u,u=n.child,O=s.child.memoizedState,O===null?O=fu(i):($=O.cachePool,$!==null?(ae=Nt._currentValue,$=$.parent!==ae?{parent:ae,pool:ae}:$):$=Ih(),O={baseLanes:O.baseLanes|i,cachePool:$}),u.memoizedState=O,u.childLanes=hu(s,C,i),n.memoizedState=mu,c):(_a(n),i=s.child,s=i.sibling,i=ra(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,s!==null&&(C=n.deletions,C===null?(n.deletions=[s],n.flags|=16):C.push(s)),n.child=i,n.memoizedState=null,i)}function xu(s,n){return n=bo({mode:"visible",children:n},s.mode),n.return=s,s.child=n}function bo(s,n){return s=cs(22,s,null,n),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function pu(s,n,i){return vl(n,s.child,null,i),s=xu(n,n.pendingProps.children),s.flags|=2,n.memoizedState=null,s}function ap(s,n,i){s.lanes|=n;var c=s.alternate;c!==null&&(c.lanes|=n),Ld(s.return,n,i)}function gu(s,n,i,c,u){var f=s.memoizedState;f===null?s.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:u}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=i,f.tailMode=u)}function np(s,n,i){var c=n.pendingProps,u=c.revealOrder,f=c.tail;if(Rt(s,n,c.children,i),c=St.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=n.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ap(s,i,n);else if(s.tag===19)ap(s,i,n);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(K(St,c),u){case"forwards":for(i=n.child,u=null;i!==null;)s=i.alternate,s!==null&&ho(s)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),gu(n,!1,u,i,f);break;case"backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(s=u.alternate,s!==null&&ho(s)===null){n.child=u;break}s=u.sibling,u.sibling=i,i=u,u=s}gu(n,!0,i,null,f);break;case"together":gu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fa(s,n,i){if(s!==null&&(n.dependencies=s.dependencies),Ba|=n.lanes,(i&n.childLanes)===0)if(s!==null){if(jr(s,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(s!==null&&n.child!==s.child)throw Error(r(153));if(n.child!==null){for(s=n.child,i=ra(s,s.pendingProps),n.child=i,i.return=n;s.sibling!==null;)s=s.sibling,i=i.sibling=ra(s,s.pendingProps),i.return=n;i.sibling=null}return n.child}function bu(s,n){return(s.lanes&n)!==0?!0:(s=s.dependencies,!!(s!==null&&Xi(s)))}function kv(s,n,i){switch(n.tag){case 3:be(n,n.stateNode.containerInfo),Pa(n,Nt,s.memoizedState.cache),wr();break;case 27:case 5:Kc(n);break;case 4:be(n,n.stateNode.containerInfo);break;case 10:Pa(n,n.type,n.memoizedProps.value);break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(_a(n),n.flags|=128,null):(i&n.child.childLanes)!==0?sp(s,n,i):(_a(n),s=fa(s,n,i),s!==null?s.sibling:null);_a(n);break;case 19:var u=(s.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(jr(s,n,i,!1),c=(i&n.childLanes)!==0),u){if(c)return np(s,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),K(St,St.current),c)break;return null;case 22:case 23:return n.lanes=0,Xx(s,n,i);case 24:Pa(n,Nt,s.memoizedState.cache)}return fa(s,n,i)}function lp(s,n,i){if(s!==null)if(s.memoizedProps!==n.pendingProps)Et=!0;else{if(!bu(s,i)&&(n.flags&128)===0)return Et=!1,kv(s,n,i);Et=(s.flags&131072)!==0}else Et=!1,We&&(n.flags&1048576)!==0&&Fh(n,Wi,n.index);switch(n.lanes=0,n.tag){case 16:e:{s=n.pendingProps;var c=n.elementType,u=c._init;if(c=u(c._payload),n.type=c,typeof c=="function")Ed(c)?(s=Rn(c,s),n.tag=1,n=ep(null,n,c,s,i)):(n.tag=0,n=uu(null,n,c,s,i));else{if(c!=null){if(u=c.$$typeof,u===P){n.tag=11,n=Vx(null,n,c,s,i);break e}else if(u===z){n.tag=14,n=Yx(null,n,c,s,i);break e}}throw n=V(c)||c,Error(r(306,n,""))}}return n;case 0:return uu(s,n,n.type,n.pendingProps,i);case 1:return c=n.type,u=Rn(c,n.pendingProps),ep(s,n,c,u,i);case 3:e:{if(be(n,n.stateNode.containerInfo),s===null)throw Error(r(387));c=n.pendingProps;var f=n.memoizedState;u=f.element,$d(s,n),Or(n,c,null,i);var C=n.memoizedState;if(c=C.cache,Pa(n,Nt,c),c!==f.cache&&Fd(n,[Nt],i,!0),Ar(),c=C.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:C.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=tp(s,n,c,i);break e}else if(c!==u){u=Ns(Error(r(424)),n),vr(u),n=tp(s,n,c,i);break e}else{switch(s=n.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ft=_s(s.firstChild),Bt=n,We=!0,Sn=null,Gs=!0,i=_x(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(wr(),c===u){n=fa(s,n,i);break e}Rt(s,n,c,i)}n=n.child}return n;case 26:return go(s,n),s===null?(i=cg(n.type,null,n.pendingProps,null))?n.memoizedState=i:We||(i=n.type,s=n.pendingProps,c=Po(se.current).createElement(i),c[Ft]=n,c[Yt]=s,Pt(c,i,s),kt(c),n.stateNode=c):n.memoizedState=cg(n.type,s.memoizedProps,n.pendingProps,s.memoizedState),null;case 27:return Kc(n),s===null&&We&&(c=n.stateNode=rg(n.type,n.pendingProps,se.current),Bt=n,Gs=!0,u=ft,Ka(n.type)?(Zu=u,ft=_s(c.firstChild)):ft=u),Rt(s,n,n.pendingProps.children,i),go(s,n),s===null&&(n.flags|=4194304),n.child;case 5:return s===null&&We&&((u=c=ft)&&(c=ej(c,n.type,n.pendingProps,Gs),c!==null?(n.stateNode=c,Bt=n,ft=_s(c.firstChild),Gs=!1,u=!0):u=!1),u||Cn(n)),Kc(n),u=n.type,f=n.pendingProps,C=s!==null?s.memoizedProps:null,c=f.children,Vu(u,f)?c=null:C!==null&&Vu(u,C)&&(n.flags|=32),n.memoizedState!==null&&(u=Kd(s,n,bv,null,null,i),Xr._currentValue=u),go(s,n),Rt(s,n,c,i),n.child;case 6:return s===null&&We&&((s=i=ft)&&(i=tj(i,n.pendingProps,Gs),i!==null?(n.stateNode=i,Bt=n,ft=null,s=!0):s=!1),s||Cn(n)),null;case 13:return sp(s,n,i);case 4:return be(n,n.stateNode.containerInfo),c=n.pendingProps,s===null?n.child=vl(n,null,c,i):Rt(s,n,c,i),n.child;case 11:return Vx(s,n,n.type,n.pendingProps,i);case 7:return Rt(s,n,n.pendingProps,i),n.child;case 8:return Rt(s,n,n.pendingProps.children,i),n.child;case 12:return Rt(s,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,Pa(n,n.type,c.value),Rt(s,n,c.children,i),n.child;case 9:return u=n.type._context,c=n.pendingProps.children,En(n),u=Dt(u),c=c(u),n.flags|=1,Rt(s,n,c,i),n.child;case 14:return Yx(s,n,n.type,n.pendingProps,i);case 15:return Wx(s,n,n.type,n.pendingProps,i);case 19:return np(s,n,i);case 31:return c=n.pendingProps,i=n.mode,c={mode:c.mode,children:c.children},s===null?(i=bo(c,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=ra(s.child,c),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return Xx(s,n,i);case 24:return En(n),c=Dt(Nt),s===null?(u=qd(),u===null&&(u=ot,f=Dd(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:c,cache:u},Ud(n),Pa(n,Nt,u)):((s.lanes&i)!==0&&($d(s,n),Or(n,null,null,i),Ar()),u=s.memoizedState,f=n.memoizedState,u.parent!==c?(u={parent:c,cache:c},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Pa(n,Nt,c)):(c=f.cache,Pa(n,Nt,c),c!==u.cache&&Fd(n,[Nt],i,!0))),Rt(s,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function ha(s){s.flags|=4}function rp(s,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!hg(n)){if(n=Es.current,n!==null&&((Ge&4194048)===Ge?Ks!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||n!==Ks))throw kr=zd,Bh;s.flags|=8192}}function yo(s,n){n!==null&&(s.flags|=4),s.flags&16384&&(n=s.tag!==22?qf():536870912,s.lanes|=n,Cl|=n)}function Dr(s,n){if(!We)switch(s.tailMode){case"hidden":n=s.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?s.tail=null:i.sibling=null;break;case"collapsed":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function mt(s){var n=s.alternate!==null&&s.alternate.child===s.child,i=0,c=0;if(n)for(var u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags&65011712,c|=u.flags&65011712,u.return=s,u=u.sibling;else for(u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags,c|=u.flags,u.return=s,u=u.sibling;return s.subtreeFlags|=c,s.childLanes=i,n}function Ev(s,n,i){var c=n.pendingProps;switch(Td(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(n),null;case 1:return mt(n),null;case 3:return i=n.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),da(Nt),Ve(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(s===null||s.child===null)&&(yr(n)?ha(n):s===null||s.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,qh())),mt(n),null;case 26:return i=n.memoizedState,s===null?(ha(n),i!==null?(mt(n),rp(n,i)):(mt(n),n.flags&=-16777217)):i?i!==s.memoizedState?(ha(n),mt(n),rp(n,i)):(mt(n),n.flags&=-16777217):(s.memoizedProps!==c&&ha(n),mt(n),n.flags&=-16777217),null;case 27:Oi(n),i=se.current;var u=n.type;if(s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return mt(n),null}s=Y.current,yr(n)?Dh(n):(s=rg(u,c,i),n.stateNode=s,ha(n))}return mt(n),null;case 5:if(Oi(n),i=n.type,s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return mt(n),null}if(s=Y.current,yr(n))Dh(n);else{switch(u=Po(se.current),s){case 1:s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?u.createElement("select",{is:c.is}):u.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?u.createElement(i,{is:c.is}):u.createElement(i)}}s[Ft]=n,s[Yt]=c;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=s;e:switch(Pt(s,i,c),i){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ha(n)}}return mt(n),n.flags&=-16777217,null;case 6:if(s&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(r(166));if(s=se.current,yr(n)){if(s=n.stateNode,i=n.memoizedProps,c=null,u=Bt,u!==null)switch(u.tag){case 27:case 5:c=u.memoizedProps}s[Ft]=n,s=!!(s.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Jp(s.nodeValue,i)),s||Cn(n)}else s=Po(s).createTextNode(c),s[Ft]=n,n.stateNode=s}return mt(n),null;case 13:if(c=n.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(u=yr(n),c!==null&&c.dehydrated!==null){if(s===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[Ft]=n}else wr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),u=!1}else u=qh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(ma(n),n):(ma(n),null)}if(ma(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=c!==null,s=s!==null&&s.memoizedState!==null,i){c=n.child,u=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(u=c.alternate.memoizedState.cachePool.pool);var f=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==u&&(c.flags|=2048)}return i!==s&&i&&(n.child.flags|=8192),yo(n,n.updateQueue),mt(n),null;case 4:return Ve(),s===null&&Bu(n.stateNode.containerInfo),mt(n),null;case 10:return da(n.type),mt(n),null;case 19:if(L(St),u=n.memoizedState,u===null)return mt(n),null;if(c=(n.flags&128)!==0,f=u.rendering,f===null)if(c)Dr(u,!1);else{if(ht!==0||s!==null&&(s.flags&128)!==0)for(s=n.child;s!==null;){if(f=ho(s),f!==null){for(n.flags|=128,Dr(u,!1),s=f.updateQueue,n.updateQueue=s,yo(n,s),n.subtreeFlags=0,s=i,i=n.child;i!==null;)Lh(i,s),i=i.sibling;return K(St,St.current&1|2),n.child}s=s.sibling}u.tail!==null&&Qs()>jo&&(n.flags|=128,c=!0,Dr(u,!1),n.lanes=4194304)}else{if(!c)if(s=ho(f),s!==null){if(n.flags|=128,c=!0,s=s.updateQueue,n.updateQueue=s,yo(n,s),Dr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!We)return mt(n),null}else 2*Qs()-u.renderingStartTime>jo&&i!==536870912&&(n.flags|=128,c=!0,Dr(u,!1),n.lanes=4194304);u.isBackwards?(f.sibling=n.child,n.child=f):(s=u.last,s!==null?s.sibling=f:n.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Qs(),n.sibling=null,s=St.current,K(St,c?s&1|2:s&1),n):(mt(n),null);case 22:case 23:return ma(n),Qd(),c=n.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(mt(n),n.subtreeFlags&6&&(n.flags|=8192)):mt(n),i=n.updateQueue,i!==null&&yo(n,i.retryQueue),i=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),s!==null&&L(An),null;case 24:return i=null,s!==null&&(i=s.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),da(Nt),mt(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function Av(s,n){switch(Td(n),n.tag){case 1:return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 3:return da(Nt),Ve(),s=n.flags,(s&65536)!==0&&(s&128)===0?(n.flags=s&-65537|128,n):null;case 26:case 27:case 5:return Oi(n),null;case 13:if(ma(n),s=n.memoizedState,s!==null&&s.dehydrated!==null){if(n.alternate===null)throw Error(r(340));wr()}return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 19:return L(St),null;case 4:return Ve(),null;case 10:return da(n.type),null;case 22:case 23:return ma(n),Qd(),s!==null&&L(An),s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 24:return da(Nt),null;case 25:return null;default:return null}}function ip(s,n){switch(Td(n),n.tag){case 3:da(Nt),Ve();break;case 26:case 27:case 5:Oi(n);break;case 4:Ve();break;case 13:ma(n);break;case 19:L(St);break;case 10:da(n.type);break;case 22:case 23:ma(n),Qd(),s!==null&&L(An);break;case 24:da(Nt)}}function _r(s,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var u=c.next;i=u;do{if((i.tag&s)===s){c=void 0;var f=i.create,C=i.inst;c=f(),C.destroy=c}i=i.next}while(i!==u)}}catch(O){it(n,n.return,O)}}function za(s,n,i){try{var c=n.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var f=u.next;c=f;do{if((c.tag&s)===s){var C=c.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,u=n;var $=i,ae=O;try{ae()}catch(he){it(u,$,he)}}}c=c.next}while(c!==f)}}catch(he){it(n,n.return,he)}}function op(s){var n=s.updateQueue;if(n!==null){var i=s.stateNode;try{Yh(n,i)}catch(c){it(s,s.return,c)}}}function cp(s,n,i){i.props=Rn(s.type,s.memoizedProps),i.state=s.memoizedState;try{i.componentWillUnmount()}catch(c){it(s,n,c)}}function qr(s,n){try{var i=s.ref;if(i!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof i=="function"?s.refCleanup=i(c):i.current=c}}catch(u){it(s,n,u)}}function Vs(s,n){var i=s.ref,c=s.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(u){it(s,n,u)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){it(s,n,u)}else i.current=null}function dp(s){var n=s.type,i=s.memoizedProps,c=s.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(u){it(s,s.return,u)}}function yu(s,n,i){try{var c=s.stateNode;Yv(c,s.type,i,n),c[Yt]=n}catch(u){it(s,s.return,u)}}function up(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ka(s.type)||s.tag===4}function wu(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||up(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ka(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vu(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(s,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(s),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=To));else if(c!==4&&(c===27&&Ka(s.type)&&(i=s.stateNode,n=null),s=s.child,s!==null))for(vu(s,n,i),s=s.sibling;s!==null;)vu(s,n,i),s=s.sibling}function wo(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?i.insertBefore(s,n):i.appendChild(s);else if(c!==4&&(c===27&&Ka(s.type)&&(i=s.stateNode),s=s.child,s!==null))for(wo(s,n,i),s=s.sibling;s!==null;)wo(s,n,i),s=s.sibling}function mp(s){var n=s.stateNode,i=s.memoizedProps;try{for(var c=s.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Pt(n,c,i),n[Ft]=s,n[Yt]=i}catch(f){it(s,s.return,f)}}var xa=!1,bt=!1,ju=!1,fp=typeof WeakSet=="function"?WeakSet:Set,At=null;function Ov(s,n){if(s=s.containerInfo,Gu=qo,s=Sh(s),wd(s)){if("selectionStart"in s)var i={start:s.selectionStart,end:s.selectionEnd};else e:{i=(i=s.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var u=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var C=0,O=-1,$=-1,ae=0,he=0,pe=s,ne=null;t:for(;;){for(var re;pe!==i||u!==0&&pe.nodeType!==3||(O=C+u),pe!==f||c!==0&&pe.nodeType!==3||($=C+c),pe.nodeType===3&&(C+=pe.nodeValue.length),(re=pe.firstChild)!==null;)ne=pe,pe=re;for(;;){if(pe===s)break t;if(ne===i&&++ae===u&&(O=C),ne===f&&++he===c&&($=C),(re=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=re}i=O===-1||$===-1?null:{start:O,end:$}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ku={focusedElem:s,selectionRange:i},qo=!1,At=n;At!==null;)if(n=At,s=n.child,(n.subtreeFlags&1024)!==0&&s!==null)s.return=n,At=s;else for(;At!==null;){switch(n=At,f=n.alternate,s=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&f!==null){s=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,c=i.stateNode;try{var Te=Rn(i.type,u,i.elementType===i.type);s=c.getSnapshotBeforeUpdate(Te,f),c.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){it(i,i.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=n.stateNode.containerInfo,i=s.nodeType,i===9)Wu(s);else if(i===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Wu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=n.sibling,s!==null){s.return=n.return,At=s;break}At=n.return}}function hp(s,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Ua(s,i),c&4&&_r(5,i);break;case 1:if(Ua(s,i),c&4)if(s=i.stateNode,n===null)try{s.componentDidMount()}catch(C){it(i,i.return,C)}else{var u=Rn(i.type,n.memoizedProps);n=n.memoizedState;try{s.componentDidUpdate(u,n,s.__reactInternalSnapshotBeforeUpdate)}catch(C){it(i,i.return,C)}}c&64&&op(i),c&512&&qr(i,i.return);break;case 3:if(Ua(s,i),c&64&&(s=i.updateQueue,s!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Yh(s,n)}catch(C){it(i,i.return,C)}}break;case 27:n===null&&c&4&&mp(i);case 26:case 5:Ua(s,i),n===null&&c&4&&dp(i),c&512&&qr(i,i.return);break;case 12:Ua(s,i);break;case 13:Ua(s,i),c&4&&gp(s,i),c&64&&(s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(i=qv.bind(null,i),sj(s,i))));break;case 22:if(c=i.memoizedState!==null||xa,!c){n=n!==null&&n.memoizedState!==null||bt,u=xa;var f=bt;xa=c,(bt=n)&&!f?$a(s,i,(i.subtreeFlags&8772)!==0):Ua(s,i),xa=u,bt=f}break;case 30:break;default:Ua(s,i)}}function xp(s){var n=s.alternate;n!==null&&(s.alternate=null,xp(n)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(n=s.stateNode,n!==null&&td(n)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dt=null,Zt=!1;function pa(s,n,i){for(i=i.child;i!==null;)pp(s,n,i),i=i.sibling}function pp(s,n,i){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(lr,i)}catch{}switch(i.tag){case 26:bt||Vs(i,n),pa(s,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bt||Vs(i,n);var c=dt,u=Zt;Ka(i.type)&&(dt=i.stateNode,Zt=!1),pa(s,n,i),Kr(i.stateNode),dt=c,Zt=u;break;case 5:bt||Vs(i,n);case 6:if(c=dt,u=Zt,dt=null,pa(s,n,i),dt=c,Zt=u,dt!==null)if(Zt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(i.stateNode)}catch(f){it(i,n,f)}else try{dt.removeChild(i.stateNode)}catch(f){it(i,n,f)}break;case 18:dt!==null&&(Zt?(s=dt,ng(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.stateNode),ti(s)):ng(dt,i.stateNode));break;case 4:c=dt,u=Zt,dt=i.stateNode.containerInfo,Zt=!0,pa(s,n,i),dt=c,Zt=u;break;case 0:case 11:case 14:case 15:bt||za(2,i,n),bt||za(4,i,n),pa(s,n,i);break;case 1:bt||(Vs(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&cp(i,n,c)),pa(s,n,i);break;case 21:pa(s,n,i);break;case 22:bt=(c=bt)||i.memoizedState!==null,pa(s,n,i),bt=c;break;default:pa(s,n,i)}}function gp(s,n){if(n.memoizedState===null&&(s=n.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ti(s)}catch(i){it(n,n.return,i)}}function Rv(s){switch(s.tag){case 13:case 19:var n=s.stateNode;return n===null&&(n=s.stateNode=new fp),n;case 22:return s=s.stateNode,n=s._retryCache,n===null&&(n=s._retryCache=new fp),n;default:throw Error(r(435,s.tag))}}function Nu(s,n){var i=Rv(s);n.forEach(function(c){var u=zv.bind(null,s,c);i.has(c)||(i.add(c),c.then(u,u))})}function ds(s,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var u=i[c],f=s,C=n,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(Ka(O.type)){dt=O.stateNode,Zt=!1;break e}break;case 5:dt=O.stateNode,Zt=!1;break e;case 3:case 4:dt=O.stateNode.containerInfo,Zt=!0;break e}O=O.return}if(dt===null)throw Error(r(160));pp(f,C,u),dt=null,Zt=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)bp(n,s),n=n.sibling}var Ds=null;function bp(s,n){var i=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ds(n,s),us(s),c&4&&(za(3,s,s.return),_r(3,s),za(5,s,s.return));break;case 1:ds(n,s),us(s),c&512&&(bt||i===null||Vs(i,i.return)),c&64&&xa&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(i=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var u=Ds;if(ds(n,s),us(s),c&512&&(bt||i===null||Vs(i,i.return)),c&4){var f=i!==null?i.memoizedState:null;if(c=s.memoizedState,i===null)if(c===null)if(s.stateNode===null){e:{c=s.type,i=s.memoizedProps,u=u.ownerDocument||u;t:switch(c){case"title":f=u.getElementsByTagName("title")[0],(!f||f[or]||f[Ft]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(c),u.head.insertBefore(f,u.querySelector("head > title"))),Pt(f,c,i),f[Ft]=s,kt(f),c=f;break e;case"link":var C=mg("link","href",u).get(c+(i.href||""));if(C){for(var O=0;O<C.length;O++)if(f=C[O],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){C.splice(O,1);break t}}f=u.createElement(c),Pt(f,c,i),u.head.appendChild(f);break;case"meta":if(C=mg("meta","content",u).get(c+(i.content||""))){for(O=0;O<C.length;O++)if(f=C[O],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){C.splice(O,1);break t}}f=u.createElement(c),Pt(f,c,i),u.head.appendChild(f);break;default:throw Error(r(468,c))}f[Ft]=s,kt(f),c=f}s.stateNode=c}else fg(u,s.type,s.stateNode);else s.stateNode=ug(u,c,s.memoizedProps);else f!==c?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,c===null?fg(u,s.type,s.stateNode):ug(u,c,s.memoizedProps)):c===null&&s.stateNode!==null&&yu(s,s.memoizedProps,i.memoizedProps)}break;case 27:ds(n,s),us(s),c&512&&(bt||i===null||Vs(i,i.return)),i!==null&&c&4&&yu(s,s.memoizedProps,i.memoizedProps);break;case 5:if(ds(n,s),us(s),c&512&&(bt||i===null||Vs(i,i.return)),s.flags&32){u=s.stateNode;try{al(u,"")}catch(re){it(s,s.return,re)}}c&4&&s.stateNode!=null&&(u=s.memoizedProps,yu(s,u,i!==null?i.memoizedProps:u)),c&1024&&(ju=!0);break;case 6:if(ds(n,s),us(s),c&4){if(s.stateNode===null)throw Error(r(162));c=s.memoizedProps,i=s.stateNode;try{i.nodeValue=c}catch(re){it(s,s.return,re)}}break;case 3:if(Fo=null,u=Ds,Ds=Mo(n.containerInfo),ds(n,s),Ds=u,us(s),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ti(n.containerInfo)}catch(re){it(s,s.return,re)}ju&&(ju=!1,yp(s));break;case 4:c=Ds,Ds=Mo(s.stateNode.containerInfo),ds(n,s),us(s),Ds=c;break;case 12:ds(n,s),us(s);break;case 13:ds(n,s),us(s),s.child.flags&8192&&s.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Ou=Qs()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Nu(s,c)));break;case 22:u=s.memoizedState!==null;var $=i!==null&&i.memoizedState!==null,ae=xa,he=bt;if(xa=ae||u,bt=he||$,ds(n,s),bt=he,xa=ae,us(s),c&8192)e:for(n=s.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||$||xa||bt||Tn(s)),i=null,n=s;;){if(n.tag===5||n.tag===26){if(i===null){$=i=n;try{if(f=$.stateNode,u)C=f.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=$.stateNode;var pe=$.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;O.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){it($,$.return,re)}}}else if(n.tag===6){if(i===null){$=n;try{$.stateNode.nodeValue=u?"":$.memoizedProps}catch(re){it($,$.return,re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===s)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=s.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Nu(s,i))));break;case 19:ds(n,s),us(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Nu(s,c)));break;case 30:break;case 21:break;default:ds(n,s),us(s)}}function us(s){var n=s.flags;if(n&2){try{for(var i,c=s.return;c!==null;){if(up(c)){i=c;break}c=c.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var u=i.stateNode,f=wu(s);wo(s,f,u);break;case 5:var C=i.stateNode;i.flags&32&&(al(C,""),i.flags&=-33);var O=wu(s);wo(s,O,C);break;case 3:case 4:var $=i.stateNode.containerInfo,ae=wu(s);vu(s,ae,$);break;default:throw Error(r(161))}}catch(he){it(s,s.return,he)}s.flags&=-3}n&4096&&(s.flags&=-4097)}function yp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var n=s;yp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),s=s.sibling}}function Ua(s,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)hp(s,n.alternate,n),n=n.sibling}function Tn(s){for(s=s.child;s!==null;){var n=s;switch(n.tag){case 0:case 11:case 14:case 15:za(4,n,n.return),Tn(n);break;case 1:Vs(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&cp(n,n.return,i),Tn(n);break;case 27:Kr(n.stateNode);case 26:case 5:Vs(n,n.return),Tn(n);break;case 22:n.memoizedState===null&&Tn(n);break;case 30:Tn(n);break;default:Tn(n)}s=s.sibling}}function $a(s,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,u=s,f=n,C=f.flags;switch(f.tag){case 0:case 11:case 15:$a(u,f,i),_r(4,f);break;case 1:if($a(u,f,i),c=f,u=c.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(ae){it(c,c.return,ae)}if(c=f,u=c.updateQueue,u!==null){var O=c.stateNode;try{var $=u.shared.hiddenCallbacks;if($!==null)for(u.shared.hiddenCallbacks=null,u=0;u<$.length;u++)Vh($[u],O)}catch(ae){it(c,c.return,ae)}}i&&C&64&&op(f),qr(f,f.return);break;case 27:mp(f);case 26:case 5:$a(u,f,i),i&&c===null&&C&4&&dp(f),qr(f,f.return);break;case 12:$a(u,f,i);break;case 13:$a(u,f,i),i&&C&4&&gp(u,f);break;case 22:f.memoizedState===null&&$a(u,f,i),qr(f,f.return);break;case 30:break;default:$a(u,f,i)}n=n.sibling}}function Su(s,n){var i=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(s!=null&&s.refCount++,i!=null&&Nr(i))}function Cu(s,n){s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nr(s))}function Ys(s,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wp(s,n,i,c),n=n.sibling}function wp(s,n,i,c){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Ys(s,n,i,c),u&2048&&_r(9,n);break;case 1:Ys(s,n,i,c);break;case 3:Ys(s,n,i,c),u&2048&&(s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nr(s)));break;case 12:if(u&2048){Ys(s,n,i,c),s=n.stateNode;try{var f=n.memoizedProps,C=f.id,O=f.onPostCommit;typeof O=="function"&&O(C,n.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch($){it(n,n.return,$)}}else Ys(s,n,i,c);break;case 13:Ys(s,n,i,c);break;case 23:break;case 22:f=n.stateNode,C=n.alternate,n.memoizedState!==null?f._visibility&2?Ys(s,n,i,c):zr(s,n):f._visibility&2?Ys(s,n,i,c):(f._visibility|=2,jl(s,n,i,c,(n.subtreeFlags&10256)!==0)),u&2048&&Su(C,n);break;case 24:Ys(s,n,i,c),u&2048&&Cu(n.alternate,n);break;default:Ys(s,n,i,c)}}function jl(s,n,i,c,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=s,C=n,O=i,$=c,ae=C.flags;switch(C.tag){case 0:case 11:case 15:jl(f,C,O,$,u),_r(8,C);break;case 23:break;case 22:var he=C.stateNode;C.memoizedState!==null?he._visibility&2?jl(f,C,O,$,u):zr(f,C):(he._visibility|=2,jl(f,C,O,$,u)),u&&ae&2048&&Su(C.alternate,C);break;case 24:jl(f,C,O,$,u),u&&ae&2048&&Cu(C.alternate,C);break;default:jl(f,C,O,$,u)}n=n.sibling}}function zr(s,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=s,c=n,u=c.flags;switch(c.tag){case 22:zr(i,c),u&2048&&Su(c.alternate,c);break;case 24:zr(i,c),u&2048&&Cu(c.alternate,c);break;default:zr(i,c)}n=n.sibling}}var Ur=8192;function Nl(s){if(s.subtreeFlags&Ur)for(s=s.child;s!==null;)vp(s),s=s.sibling}function vp(s){switch(s.tag){case 26:Nl(s),s.flags&Ur&&s.memoizedState!==null&&xj(Ds,s.memoizedState,s.memoizedProps);break;case 5:Nl(s);break;case 3:case 4:var n=Ds;Ds=Mo(s.stateNode.containerInfo),Nl(s),Ds=n;break;case 22:s.memoizedState===null&&(n=s.alternate,n!==null&&n.memoizedState!==null?(n=Ur,Ur=16777216,Nl(s),Ur=n):Nl(s));break;default:Nl(s)}}function jp(s){var n=s.alternate;if(n!==null&&(s=n.child,s!==null)){n.child=null;do n=s.sibling,s.sibling=null,s=n;while(s!==null)}}function $r(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,Sp(c,s)}jp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Np(s),s=s.sibling}function Np(s){switch(s.tag){case 0:case 11:case 15:$r(s),s.flags&2048&&za(9,s,s.return);break;case 3:$r(s);break;case 12:$r(s);break;case 22:var n=s.stateNode;s.memoizedState!==null&&n._visibility&2&&(s.return===null||s.return.tag!==13)?(n._visibility&=-3,vo(s)):$r(s);break;default:$r(s)}}function vo(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,Sp(c,s)}jp(s)}for(s=s.child;s!==null;){switch(n=s,n.tag){case 0:case 11:case 15:za(8,n,n.return),vo(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,vo(n));break;default:vo(n)}s=s.sibling}}function Sp(s,n){for(;At!==null;){var i=At;switch(i.tag){case 0:case 11:case 15:za(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nr(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,At=c;else e:for(i=s;At!==null;){c=At;var u=c.sibling,f=c.return;if(xp(c),c===i){At=null;break e}if(u!==null){u.return=f,At=u;break e}At=f}}}var Tv={getCacheForType:function(s){var n=Dt(Nt),i=n.data.get(s);return i===void 0&&(i=s(),n.data.set(s,i)),i}},Pv=typeof WeakMap=="function"?WeakMap:Map,st=0,ot=null,Ie=null,Ge=0,at=0,ms=null,Ia=!1,Sl=!1,ku=!1,ga=0,ht=0,Ba=0,Pn=0,Eu=0,As=0,Cl=0,Ir=null,Jt=null,Au=!1,Ou=0,jo=1/0,No=null,Ha=null,Tt=0,Qa=null,kl=null,El=0,Ru=0,Tu=null,Cp=null,Br=0,Pu=null;function fs(){if((st&2)!==0&&Ge!==0)return Ge&-Ge;if(_.T!==null){var s=hl;return s!==0?s:zu()}return $f()}function kp(){As===0&&(As=(Ge&536870912)===0||We?_f():536870912);var s=Es.current;return s!==null&&(s.flags|=32),As}function hs(s,n,i){(s===ot&&(at===2||at===9)||s.cancelPendingCommit!==null)&&(Al(s,0),Ga(s,Ge,As,!1)),ir(s,i),((st&2)===0||s!==ot)&&(s===ot&&((st&2)===0&&(Pn|=i),ht===4&&Ga(s,Ge,As,!1)),Ws(s))}function Ep(s,n,i){if((st&6)!==0)throw Error(r(327));var c=!i&&(n&124)===0&&(n&s.expiredLanes)===0||rr(s,n),u=c?Fv(s,n):Fu(s,n,!0),f=c;do{if(u===0){Sl&&!c&&Ga(s,n,0,!1);break}else{if(i=s.current.alternate,f&&!Mv(i)){u=Fu(s,n,!1),f=!1;continue}if(u===2){if(f=n,s.errorRecoveryDisabledLanes&f)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){n=C;e:{var O=s;u=Ir;var $=O.current.memoizedState.isDehydrated;if($&&(Al(O,C).flags|=256),C=Fu(O,C,!1),C!==2){if(ku&&!$){O.errorRecoveryDisabledLanes|=f,Pn|=f,u=4;break e}f=Jt,Jt=u,f!==null&&(Jt===null?Jt=f:Jt.push.apply(Jt,f))}u=C}if(f=!1,u!==2)continue}}if(u===1){Al(s,0),Ga(s,n,0,!0);break}e:{switch(c=s,f=u,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Ga(c,n,As,!Ia);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=Ou+300-Qs(),10<u)){if(Ga(c,n,As,!Ia),Mi(c,0,!0)!==0)break e;c.timeoutHandle=sg(Ap.bind(null,c,i,Jt,No,Au,n,As,Pn,Cl,Ia,f,2,-0,0),u);break e}Ap(c,i,Jt,No,Au,n,As,Pn,Cl,Ia,f,0,-0,0)}}break}while(!0);Ws(s)}function Ap(s,n,i,c,u,f,C,O,$,ae,he,pe,ne,re){if(s.timeoutHandle=-1,pe=n.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Wr={stylesheets:null,count:0,unsuspend:hj},vp(n),pe=pj(),pe!==null)){s.cancelPendingCommit=pe(Fp.bind(null,s,n,f,i,c,u,C,O,$,he,1,ne,re)),Ga(s,f,C,!ae);return}Fp(s,n,f,i,c,u,C,O,$)}function Mv(s){for(var n=s;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var u=i[c],f=u.getSnapshot;u=u.value;try{if(!os(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ga(s,n,i,c){n&=~Eu,n&=~Pn,s.suspendedLanes|=n,s.pingedLanes&=~n,c&&(s.warmLanes|=n),c=s.expirationTimes;for(var u=n;0<u;){var f=31-is(u),C=1<<f;c[f]=-1,u&=~C}i!==0&&zf(s,i,n)}function So(){return(st&6)===0?(Hr(0),!1):!0}function Mu(){if(Ie!==null){if(at===0)var s=Ie.return;else s=Ie,ca=kn=null,Wd(s),wl=null,Lr=0,s=Ie;for(;s!==null;)ip(s.alternate,s),s=s.return;Ie=null}}function Al(s,n){var i=s.timeoutHandle;i!==-1&&(s.timeoutHandle=-1,Xv(i)),i=s.cancelPendingCommit,i!==null&&(s.cancelPendingCommit=null,i()),Mu(),ot=s,Ie=i=ra(s.current,null),Ge=n,at=0,ms=null,Ia=!1,Sl=rr(s,n),ku=!1,Cl=As=Eu=Pn=Ba=ht=0,Jt=Ir=null,Au=!1,(n&8)!==0&&(n|=n&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=n;0<c;){var u=31-is(c),f=1<<u;n|=s[u],c&=~f}return ga=n,Qi(),i}function Op(s,n){Ue=null,_.H=uo,n===Cr||n===eo?(n=Gh(),at=3):n===Bh?(n=Gh(),at=4):at=n===Kx?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ms=n,Ie===null&&(ht=1,po(s,Ns(n,s.current)))}function Rp(){var s=_.H;return _.H=uo,s===null?uo:s}function Tp(){var s=_.A;return _.A=Tv,s}function Lu(){ht=4,Ia||(Ge&4194048)!==Ge&&Es.current!==null||(Sl=!0),(Ba&134217727)===0&&(Pn&134217727)===0||ot===null||Ga(ot,Ge,As,!1)}function Fu(s,n,i){var c=st;st|=2;var u=Rp(),f=Tp();(ot!==s||Ge!==n)&&(No=null,Al(s,n)),n=!1;var C=ht;e:do try{if(at!==0&&Ie!==null){var O=Ie,$=ms;switch(at){case 8:Mu(),C=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(n=!0);var ae=at;if(at=0,ms=null,Ol(s,O,$,ae),i&&Sl){C=0;break e}break;default:ae=at,at=0,ms=null,Ol(s,O,$,ae)}}Lv(),C=ht;break}catch(he){Op(s,he)}while(!0);return n&&s.shellSuspendCounter++,ca=kn=null,st=c,_.H=u,_.A=f,Ie===null&&(ot=null,Ge=0,Qi()),C}function Lv(){for(;Ie!==null;)Pp(Ie)}function Fv(s,n){var i=st;st|=2;var c=Rp(),u=Tp();ot!==s||Ge!==n?(No=null,jo=Qs()+500,Al(s,n)):Sl=rr(s,n);e:do try{if(at!==0&&Ie!==null){n=Ie;var f=ms;t:switch(at){case 1:at=0,ms=null,Ol(s,n,f,1);break;case 2:case 9:if(Hh(f)){at=0,ms=null,Mp(n);break}n=function(){at!==2&&at!==9||ot!==s||(at=7),Ws(s)},f.then(n,n);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Hh(f)?(at=0,ms=null,Mp(n)):(at=0,ms=null,Ol(s,n,f,7));break;case 5:var C=null;switch(Ie.tag){case 26:C=Ie.memoizedState;case 5:case 27:var O=Ie;if(!C||hg(C)){at=0,ms=null;var $=O.sibling;if($!==null)Ie=$;else{var ae=O.return;ae!==null?(Ie=ae,Co(ae)):Ie=null}break t}}at=0,ms=null,Ol(s,n,f,5);break;case 6:at=0,ms=null,Ol(s,n,f,6);break;case 8:Mu(),ht=6;break e;default:throw Error(r(462))}}Dv();break}catch(he){Op(s,he)}while(!0);return ca=kn=null,_.H=c,_.A=u,st=i,Ie!==null?0:(ot=null,Ge=0,Qi(),ht)}function Dv(){for(;Ie!==null&&!nw();)Pp(Ie)}function Pp(s){var n=lp(s.alternate,s,ga);s.memoizedProps=s.pendingProps,n===null?Co(s):Ie=n}function Mp(s){var n=s,i=n.alternate;switch(n.tag){case 15:case 0:n=Jx(i,n,n.pendingProps,n.type,void 0,Ge);break;case 11:n=Jx(i,n,n.pendingProps,n.type.render,n.ref,Ge);break;case 5:Wd(n);default:ip(i,n),n=Ie=Lh(n,ga),n=lp(i,n,ga)}s.memoizedProps=s.pendingProps,n===null?Co(s):Ie=n}function Ol(s,n,i,c){ca=kn=null,Wd(n),wl=null,Lr=0;var u=n.return;try{if(Cv(s,u,n,i,Ge)){ht=1,po(s,Ns(i,s.current)),Ie=null;return}}catch(f){if(u!==null)throw Ie=u,f;ht=1,po(s,Ns(i,s.current)),Ie=null;return}n.flags&32768?(We||c===1?s=!0:Sl||(Ge&536870912)!==0?s=!1:(Ia=s=!0,(c===2||c===9||c===3||c===6)&&(c=Es.current,c!==null&&c.tag===13&&(c.flags|=16384))),Lp(n,s)):Co(n)}function Co(s){var n=s;do{if((n.flags&32768)!==0){Lp(n,Ia);return}s=n.return;var i=Ev(n.alternate,n,ga);if(i!==null){Ie=i;return}if(n=n.sibling,n!==null){Ie=n;return}Ie=n=s}while(n!==null);ht===0&&(ht=5)}function Lp(s,n){do{var i=Av(s.alternate,s);if(i!==null){i.flags&=32767,Ie=i;return}if(i=s.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(s=s.sibling,s!==null)){Ie=s;return}Ie=s=i}while(s!==null);ht=6,Ie=null}function Fp(s,n,i,c,u,f,C,O,$){s.cancelPendingCommit=null;do ko();while(Tt!==0);if((st&6)!==0)throw Error(r(327));if(n!==null){if(n===s.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Cd,hw(s,i,f,C,O,$),s===ot&&(Ie=ot=null,Ge=0),kl=n,Qa=s,El=i,Ru=f,Tu=u,Cp=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Uv(Ri,function(){return Up(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=_.T,_.T=null,u=W.p,W.p=2,C=st,st|=4;try{Ov(s,n,i)}finally{st=C,W.p=u,_.T=c}}Tt=1,Dp(),_p(),qp()}}function Dp(){if(Tt===1){Tt=0;var s=Qa,n=kl,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=_.T,_.T=null;var c=W.p;W.p=2;var u=st;st|=4;try{bp(n,s);var f=Ku,C=Sh(s.containerInfo),O=f.focusedElem,$=f.selectionRange;if(C!==O&&O&&O.ownerDocument&&Nh(O.ownerDocument.documentElement,O)){if($!==null&&wd(O)){var ae=$.start,he=$.end;if(he===void 0&&(he=ae),"selectionStart"in O)O.selectionStart=ae,O.selectionEnd=Math.min(he,O.value.length);else{var pe=O.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),Te=O.textContent.length,Oe=Math.min($.start,Te),rt=$.end===void 0?Oe:Math.min($.end,Te);!re.extend&&Oe>rt&&(C=rt,rt=Oe,Oe=C);var X=jh(O,Oe),G=jh(O,rt);if(X&&G&&(re.rangeCount!==1||re.anchorNode!==X.node||re.anchorOffset!==X.offset||re.focusNode!==G.node||re.focusOffset!==G.offset)){var te=pe.createRange();te.setStart(X.node,X.offset),re.removeAllRanges(),Oe>rt?(re.addRange(te),re.extend(G.node,G.offset)):(te.setEnd(G.node,G.offset),re.addRange(te))}}}}for(pe=[],re=O;re=re.parentNode;)re.nodeType===1&&pe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<pe.length;O++){var xe=pe[O];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}qo=!!Gu,Ku=Gu=null}finally{st=u,W.p=c,_.T=i}}s.current=n,Tt=2}}function _p(){if(Tt===2){Tt=0;var s=Qa,n=kl,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=_.T,_.T=null;var c=W.p;W.p=2;var u=st;st|=4;try{hp(s,n.alternate,n)}finally{st=u,W.p=c,_.T=i}}Tt=3}}function qp(){if(Tt===4||Tt===3){Tt=0,lw();var s=Qa,n=kl,i=El,c=Cp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Tt=5:(Tt=0,kl=Qa=null,zp(s,s.pendingLanes));var u=s.pendingLanes;if(u===0&&(Ha=null),Jc(i),n=n.stateNode,rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(lr,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=_.T,u=W.p,W.p=2,_.T=null;try{for(var f=s.onRecoverableError,C=0;C<c.length;C++){var O=c[C];f(O.value,{componentStack:O.stack})}}finally{_.T=n,W.p=u}}(El&3)!==0&&ko(),Ws(s),u=s.pendingLanes,(i&4194090)!==0&&(u&42)!==0?s===Pu?Br++:(Br=0,Pu=s):Br=0,Hr(0)}}function zp(s,n){(s.pooledCacheLanes&=n)===0&&(n=s.pooledCache,n!=null&&(s.pooledCache=null,Nr(n)))}function ko(s){return Dp(),_p(),qp(),Up()}function Up(){if(Tt!==5)return!1;var s=Qa,n=Ru;Ru=0;var i=Jc(El),c=_.T,u=W.p;try{W.p=32>i?32:i,_.T=null,i=Tu,Tu=null;var f=Qa,C=El;if(Tt=0,kl=Qa=null,El=0,(st&6)!==0)throw Error(r(331));var O=st;if(st|=4,Np(f.current),wp(f,f.current,C,i),st=O,Hr(0,!1),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(lr,f)}catch{}return!0}finally{W.p=u,_.T=c,zp(s,n)}}function $p(s,n,i){n=Ns(i,n),n=du(s.stateNode,n,2),s=Fa(s,n,2),s!==null&&(ir(s,2),Ws(s))}function it(s,n,i){if(s.tag===3)$p(s,s,i);else for(;n!==null;){if(n.tag===3){$p(n,s,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ha===null||!Ha.has(c))){s=Ns(i,s),i=Qx(2),c=Fa(n,i,2),c!==null&&(Gx(i,c,n,s),ir(c,2),Ws(c));break}}n=n.return}}function Du(s,n,i){var c=s.pingCache;if(c===null){c=s.pingCache=new Pv;var u=new Set;c.set(n,u)}else u=c.get(n),u===void 0&&(u=new Set,c.set(n,u));u.has(i)||(ku=!0,u.add(i),s=_v.bind(null,s,n,i),n.then(s,s))}function _v(s,n,i){var c=s.pingCache;c!==null&&c.delete(n),s.pingedLanes|=s.suspendedLanes&i,s.warmLanes&=~i,ot===s&&(Ge&i)===i&&(ht===4||ht===3&&(Ge&62914560)===Ge&&300>Qs()-Ou?(st&2)===0&&Al(s,0):Eu|=i,Cl===Ge&&(Cl=0)),Ws(s)}function Ip(s,n){n===0&&(n=qf()),s=dl(s,n),s!==null&&(ir(s,n),Ws(s))}function qv(s){var n=s.memoizedState,i=0;n!==null&&(i=n.retryLane),Ip(s,i)}function zv(s,n){var i=0;switch(s.tag){case 13:var c=s.stateNode,u=s.memoizedState;u!==null&&(i=u.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(n),Ip(s,i)}function Uv(s,n){return Yc(s,n)}var Eo=null,Rl=null,_u=!1,Ao=!1,qu=!1,Mn=0;function Ws(s){s!==Rl&&s.next===null&&(Rl===null?Eo=Rl=s:Rl=Rl.next=s),Ao=!0,_u||(_u=!0,Iv())}function Hr(s,n){if(!qu&&Ao){qu=!0;do for(var i=!1,c=Eo;c!==null;){if(s!==0){var u=c.pendingLanes;if(u===0)var f=0;else{var C=c.suspendedLanes,O=c.pingedLanes;f=(1<<31-is(42|s)+1)-1,f&=u&~(C&~O),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Gp(c,f))}else f=Ge,f=Mi(c,c===ot?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||rr(c,f)||(i=!0,Gp(c,f));c=c.next}while(i);qu=!1}}function $v(){Bp()}function Bp(){Ao=_u=!1;var s=0;Mn!==0&&(Wv()&&(s=Mn),Mn=0);for(var n=Qs(),i=null,c=Eo;c!==null;){var u=c.next,f=Hp(c,n);f===0?(c.next=null,i===null?Eo=u:i.next=u,u===null&&(Rl=i)):(i=c,(s!==0||(f&3)!==0)&&(Ao=!0)),c=u}Hr(s)}function Hp(s,n){for(var i=s.suspendedLanes,c=s.pingedLanes,u=s.expirationTimes,f=s.pendingLanes&-62914561;0<f;){var C=31-is(f),O=1<<C,$=u[C];$===-1?((O&i)===0||(O&c)!==0)&&(u[C]=fw(O,n)):$<=n&&(s.expiredLanes|=O),f&=~O}if(n=ot,i=Ge,i=Mi(s,s===n?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,i===0||s===n&&(at===2||at===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Wc(c),s.callbackNode=null,s.callbackPriority=0;if((i&3)===0||rr(s,i)){if(n=i&-i,n===s.callbackPriority)return n;switch(c!==null&&Wc(c),Jc(i)){case 2:case 8:i=Ff;break;case 32:i=Ri;break;case 268435456:i=Df;break;default:i=Ri}return c=Qp.bind(null,s),i=Yc(i,c),s.callbackPriority=n,s.callbackNode=i,n}return c!==null&&c!==null&&Wc(c),s.callbackPriority=2,s.callbackNode=null,2}function Qp(s,n){if(Tt!==0&&Tt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var i=s.callbackNode;if(ko()&&s.callbackNode!==i)return null;var c=Ge;return c=Mi(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Ep(s,c,n),Hp(s,Qs()),s.callbackNode!=null&&s.callbackNode===i?Qp.bind(null,s):null)}function Gp(s,n){if(ko())return null;Ep(s,n,!0)}function Iv(){Zv(function(){(st&6)!==0?Yc(Lf,$v):Bp()})}function zu(){return Mn===0&&(Mn=_f()),Mn}function Kp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:qi(""+s)}function Vp(s,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,s.id&&i.setAttribute("form",s.id),n.parentNode.insertBefore(i,n),s=new FormData(s),i.parentNode.removeChild(i),s}function Bv(s,n,i,c,u){if(n==="submit"&&i&&i.stateNode===u){var f=Kp((u[Yt]||null).action),C=c.submitter;C&&(n=(n=C[Yt]||null)?Kp(n.formAction):C.getAttribute("formAction"),n!==null&&(f=n,C=null));var O=new Ii("action","action",null,c,u);s.push({event:O,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Mn!==0){var $=C?Vp(u,C):new FormData(u);lu(i,{pending:!0,data:$,method:u.method,action:f},null,$)}}else typeof f=="function"&&(O.preventDefault(),$=C?Vp(u,C):new FormData(u),lu(i,{pending:!0,data:$,method:u.method,action:f},f,$))},currentTarget:u}]})}}for(var Uu=0;Uu<Sd.length;Uu++){var $u=Sd[Uu],Hv=$u.toLowerCase(),Qv=$u[0].toUpperCase()+$u.slice(1);Fs(Hv,"on"+Qv)}Fs(Eh,"onAnimationEnd"),Fs(Ah,"onAnimationIteration"),Fs(Oh,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(ov,"onTransitionRun"),Fs(cv,"onTransitionStart"),Fs(dv,"onTransitionCancel"),Fs(Rh,"onTransitionEnd"),el("onMouseEnter",["mouseout","mouseover"]),el("onMouseLeave",["mouseout","mouseover"]),el("onPointerEnter",["pointerout","pointerover"]),el("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qr));function Yp(s,n){n=(n&4)!==0;for(var i=0;i<s.length;i++){var c=s[i],u=c.event;c=c.listeners;e:{var f=void 0;if(n)for(var C=c.length-1;0<=C;C--){var O=c[C],$=O.instance,ae=O.currentTarget;if(O=O.listener,$!==f&&u.isPropagationStopped())break e;f=O,u.currentTarget=ae;try{f(u)}catch(he){xo(he)}u.currentTarget=null,f=$}else for(C=0;C<c.length;C++){if(O=c[C],$=O.instance,ae=O.currentTarget,O=O.listener,$!==f&&u.isPropagationStopped())break e;f=O,u.currentTarget=ae;try{f(u)}catch(he){xo(he)}u.currentTarget=null,f=$}}}}function Be(s,n){var i=n[ed];i===void 0&&(i=n[ed]=new Set);var c=s+"__bubble";i.has(c)||(Wp(n,s,2,!1),i.add(c))}function Iu(s,n,i){var c=0;n&&(c|=4),Wp(i,s,c,n)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Bu(s){if(!s[Oo]){s[Oo]=!0,Bf.forEach(function(i){i!=="selectionchange"&&(Gv.has(i)||Iu(i,!1,s),Iu(i,!0,s))});var n=s.nodeType===9?s:s.ownerDocument;n===null||n[Oo]||(n[Oo]=!0,Iu("selectionchange",!1,n))}}function Wp(s,n,i,c){switch(wg(n)){case 2:var u=yj;break;case 8:u=wj;break;default:u=am}i=u.bind(null,n,i,s),u=void 0,!ud||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),c?u!==void 0?s.addEventListener(n,i,{capture:!0,passive:u}):s.addEventListener(n,i,!0):u!==void 0?s.addEventListener(n,i,{passive:u}):s.addEventListener(n,i,!1)}function Hu(s,n,i,c,u){var f=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var O=c.stateNode.containerInfo;if(O===u)break;if(C===4)for(C=c.return;C!==null;){var $=C.tag;if(($===3||$===4)&&C.stateNode.containerInfo===u)return;C=C.return}for(;O!==null;){if(C=Xn(O),C===null)return;if($=C.tag,$===5||$===6||$===26||$===27){c=f=C;continue e}O=O.parentNode}}c=c.return}ah(function(){var ae=f,he=cd(i),pe=[];e:{var ne=Th.get(s);if(ne!==void 0){var re=Ii,Te=s;switch(s){case"keypress":if(Ui(i)===0)break e;case"keydown":case"keyup":re=Uw;break;case"focusin":Te="focus",re=xd;break;case"focusout":Te="blur",re=xd;break;case"beforeblur":case"afterblur":re=xd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Aw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Bw;break;case Eh:case Ah:case Oh:re=Tw;break;case Rh:re=Qw;break;case"scroll":case"scrollend":re=kw;break;case"wheel":re=Kw;break;case"copy":case"cut":case"paste":re=Mw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=oh;break;case"toggle":case"beforetoggle":re=Yw}var Oe=(n&4)!==0,rt=!Oe&&(s==="scroll"||s==="scrollend"),X=Oe?ne!==null?ne+"Capture":null:ne;Oe=[];for(var G=ae,te;G!==null;){var xe=G;if(te=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||te===null||X===null||(xe=dr(G,X),xe!=null&&Oe.push(Gr(G,xe,te))),rt)break;G=G.return}0<Oe.length&&(ne=new re(ne,Te,null,i,he),pe.push({event:ne,listeners:Oe}))}}if((n&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",ne&&i!==od&&(Te=i.relatedTarget||i.fromElement)&&(Xn(Te)||Te[Wn]))break e;if((re||ne)&&(ne=he.window===he?he:(ne=he.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(Te=i.relatedTarget||i.toElement,re=ae,Te=Te?Xn(Te):null,Te!==null&&(rt=d(Te),Oe=Te.tag,Te!==rt||Oe!==5&&Oe!==27&&Oe!==6)&&(Te=null)):(re=null,Te=ae),re!==Te)){if(Oe=rh,xe="onMouseLeave",X="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=oh,xe="onPointerLeave",X="onPointerEnter",G="pointer"),rt=re==null?ne:cr(re),te=Te==null?ne:cr(Te),ne=new Oe(xe,G+"leave",re,i,he),ne.target=rt,ne.relatedTarget=te,xe=null,Xn(he)===ae&&(Oe=new Oe(X,G+"enter",Te,i,he),Oe.target=te,Oe.relatedTarget=rt,xe=Oe),rt=xe,re&&Te)t:{for(Oe=re,X=Te,G=0,te=Oe;te;te=Tl(te))G++;for(te=0,xe=X;xe;xe=Tl(xe))te++;for(;0<G-te;)Oe=Tl(Oe),G--;for(;0<te-G;)X=Tl(X),te--;for(;G--;){if(Oe===X||X!==null&&Oe===X.alternate)break t;Oe=Tl(Oe),X=Tl(X)}Oe=null}else Oe=null;re!==null&&Xp(pe,ne,re,Oe,!1),Te!==null&&rt!==null&&Xp(pe,rt,Te,Oe,!0)}}e:{if(ne=ae?cr(ae):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var je=ph;else if(hh(ne))if(gh)je=lv;else{je=av;var $e=sv}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ae&&id(ae.elementType)&&(je=ph):je=nv;if(je&&(je=je(s,ae))){xh(pe,je,i,he);break e}$e&&$e(s,ne,ae),s==="focusout"&&ae&&ne.type==="number"&&ae.memoizedProps.value!=null&&rd(ne,"number",ne.value)}switch($e=ae?cr(ae):window,s){case"focusin":(hh($e)||$e.contentEditable==="true")&&(il=$e,vd=ae,br=null);break;case"focusout":br=vd=il=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Ch(pe,i,he);break;case"selectionchange":if(iv)break;case"keydown":case"keyup":Ch(pe,i,he)}var Se;if(gd)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else rl?mh(s,i)&&(Re="onCompositionEnd"):s==="keydown"&&i.keyCode===229&&(Re="onCompositionStart");Re&&(ch&&i.locale!=="ko"&&(rl||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&rl&&(Se=nh()):(Ta=he,md="value"in Ta?Ta.value:Ta.textContent,rl=!0)),$e=Ro(ae,Re),0<$e.length&&(Re=new ih(Re,s,null,i,he),pe.push({event:Re,listeners:$e}),Se?Re.data=Se:(Se=fh(i),Se!==null&&(Re.data=Se)))),(Se=Xw?Zw(s,i):Jw(s,i))&&(Re=Ro(ae,"onBeforeInput"),0<Re.length&&($e=new ih("onBeforeInput","beforeinput",null,i,he),pe.push({event:$e,listeners:Re}),$e.data=Se)),Bv(pe,s,ae,i,he)}Yp(pe,n)})}function Gr(s,n,i){return{instance:s,listener:n,currentTarget:i}}function Ro(s,n){for(var i=n+"Capture",c=[];s!==null;){var u=s,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=dr(s,i),u!=null&&c.unshift(Gr(s,u,f)),u=dr(s,n),u!=null&&c.push(Gr(s,u,f))),s.tag===3)return c;s=s.return}return[]}function Tl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Xp(s,n,i,c,u){for(var f=n._reactName,C=[];i!==null&&i!==c;){var O=i,$=O.alternate,ae=O.stateNode;if(O=O.tag,$!==null&&$===c)break;O!==5&&O!==26&&O!==27||ae===null||($=ae,u?(ae=dr(i,f),ae!=null&&C.unshift(Gr(i,ae,$))):u||(ae=dr(i,f),ae!=null&&C.push(Gr(i,ae,$)))),i=i.return}C.length!==0&&s.push({event:n,listeners:C})}var Kv=/\r\n?/g,Vv=/\u0000|\uFFFD/g;function Zp(s){return(typeof s=="string"?s:""+s).replace(Kv,`
`).replace(Vv,"")}function Jp(s,n){return n=Zp(n),Zp(s)===n}function To(){}function lt(s,n,i,c,u,f){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||al(s,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&al(s,""+c);break;case"className":Fi(s,"class",c);break;case"tabIndex":Fi(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Fi(s,i,c);break;case"style":th(s,c,f);break;case"data":if(n!=="object"){Fi(s,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){s.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&lt(s,n,"name",u.name,u,null),lt(s,n,"formEncType",u.formEncType,u,null),lt(s,n,"formMethod",u.formMethod,u,null),lt(s,n,"formTarget",u.formTarget,u,null)):(lt(s,n,"encType",u.encType,u,null),lt(s,n,"method",u.method,u,null),lt(s,n,"target",u.target,u,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"onClick":c!=null&&(s.onclick=To);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(r(60));s.innerHTML=i}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}i=qi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""+c):s.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""):s.removeAttribute(i);break;case"capture":case"download":c===!0?s.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,c):s.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(i,c):s.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(i):s.setAttribute(i,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),Li(s,"popover",c);break;case"xlinkActuate":na(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":na(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":na(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":na(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":na(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":na(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":na(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":na(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":na(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Li(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Sw.get(i)||i,Li(s,i,c))}}function Qu(s,n,i,c,u,f){switch(i){case"style":th(s,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(r(60));s.innerHTML=i}}break;case"children":typeof c=="string"?al(s,c):(typeof c=="number"||typeof c=="bigint")&&al(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=To);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hf.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=s[Yt]||null,f=f!=null?f[i]:null,typeof f=="function"&&s.removeEventListener(n,f,u),typeof c=="function")){typeof f!="function"&&f!==null&&(i in s?s[i]=null:s.hasAttribute(i)&&s.removeAttribute(i)),s.addEventListener(n,c,u);break e}i in s?s[i]=c:c===!0?s.setAttribute(i,""):Li(s,i,c)}}}function Pt(s,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var C=i[f];if(C!=null)switch(f){case"src":c=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(s,n,f,C,i,null)}}u&&lt(s,n,"srcSet",i.srcSet,i,null),c&&lt(s,n,"src",i.src,i,null);return;case"input":Be("invalid",s);var O=f=C=u=null,$=null,ae=null;for(c in i)if(i.hasOwnProperty(c)){var he=i[c];if(he!=null)switch(c){case"name":u=he;break;case"type":C=he;break;case"checked":$=he;break;case"defaultChecked":ae=he;break;case"value":f=he;break;case"defaultValue":O=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,n));break;default:lt(s,n,c,he,i,null)}}Xf(s,f,O,$,ae,C,u,!1),Di(s);return;case"select":Be("invalid",s),c=C=f=null;for(u in i)if(i.hasOwnProperty(u)&&(O=i[u],O!=null))switch(u){case"value":f=O;break;case"defaultValue":C=O;break;case"multiple":c=O;default:lt(s,n,u,O,i,null)}n=f,i=C,s.multiple=!!c,n!=null?sl(s,!!c,n,!1):i!=null&&sl(s,!!c,i,!0);return;case"textarea":Be("invalid",s),f=u=c=null;for(C in i)if(i.hasOwnProperty(C)&&(O=i[C],O!=null))switch(C){case"value":c=O;break;case"defaultValue":u=O;break;case"children":f=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:lt(s,n,C,O,i,null)}Jf(s,c,u,f),Di(s);return;case"option":for($ in i)if(i.hasOwnProperty($)&&(c=i[$],c!=null))switch($){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(s,n,$,c,i,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<Qr.length;c++)Be(Qr[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in i)if(i.hasOwnProperty(ae)&&(c=i[ae],c!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(s,n,ae,c,i,null)}return;default:if(id(n)){for(he in i)i.hasOwnProperty(he)&&(c=i[he],c!==void 0&&Qu(s,n,he,c,i,void 0));return}}for(O in i)i.hasOwnProperty(O)&&(c=i[O],c!=null&&lt(s,n,O,c,i,null))}function Yv(s,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,C=null,O=null,$=null,ae=null,he=null;for(re in i){var pe=i[re];if(i.hasOwnProperty(re)&&pe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=pe;default:c.hasOwnProperty(re)||lt(s,n,re,null,c,pe)}}for(var ne in c){var re=c[ne];if(pe=i[ne],c.hasOwnProperty(ne)&&(re!=null||pe!=null))switch(ne){case"type":f=re;break;case"name":u=re;break;case"checked":ae=re;break;case"defaultChecked":he=re;break;case"value":C=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,n));break;default:re!==pe&&lt(s,n,ne,re,c,pe)}}ld(s,C,O,$,ae,he,f,u);return;case"select":re=C=O=ne=null;for(f in i)if($=i[f],i.hasOwnProperty(f)&&$!=null)switch(f){case"value":break;case"multiple":re=$;default:c.hasOwnProperty(f)||lt(s,n,f,null,c,$)}for(u in c)if(f=c[u],$=i[u],c.hasOwnProperty(u)&&(f!=null||$!=null))switch(u){case"value":ne=f;break;case"defaultValue":O=f;break;case"multiple":C=f;default:f!==$&&lt(s,n,u,f,c,$)}n=O,i=C,c=re,ne!=null?sl(s,!!i,ne,!1):!!c!=!!i&&(n!=null?sl(s,!!i,n,!0):sl(s,!!i,i?[]:"",!1));return;case"textarea":re=ne=null;for(O in i)if(u=i[O],i.hasOwnProperty(O)&&u!=null&&!c.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:lt(s,n,O,null,c,u)}for(C in c)if(u=c[C],f=i[C],c.hasOwnProperty(C)&&(u!=null||f!=null))switch(C){case"value":ne=u;break;case"defaultValue":re=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==f&&lt(s,n,C,u,c,f)}Zf(s,ne,re);return;case"option":for(var Te in i)if(ne=i[Te],i.hasOwnProperty(Te)&&ne!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":s.selected=!1;break;default:lt(s,n,Te,null,c,ne)}for($ in c)if(ne=c[$],re=i[$],c.hasOwnProperty($)&&ne!==re&&(ne!=null||re!=null))switch($){case"selected":s.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:lt(s,n,$,ne,c,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in i)ne=i[Oe],i.hasOwnProperty(Oe)&&ne!=null&&!c.hasOwnProperty(Oe)&&lt(s,n,Oe,null,c,ne);for(ae in c)if(ne=c[ae],re=i[ae],c.hasOwnProperty(ae)&&ne!==re&&(ne!=null||re!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,n));break;default:lt(s,n,ae,ne,c,re)}return;default:if(id(n)){for(var rt in i)ne=i[rt],i.hasOwnProperty(rt)&&ne!==void 0&&!c.hasOwnProperty(rt)&&Qu(s,n,rt,void 0,c,ne);for(he in c)ne=c[he],re=i[he],!c.hasOwnProperty(he)||ne===re||ne===void 0&&re===void 0||Qu(s,n,he,ne,c,re);return}}for(var X in i)ne=i[X],i.hasOwnProperty(X)&&ne!=null&&!c.hasOwnProperty(X)&&lt(s,n,X,null,c,ne);for(pe in c)ne=c[pe],re=i[pe],!c.hasOwnProperty(pe)||ne===re||ne==null&&re==null||lt(s,n,pe,ne,c,re)}var Gu=null,Ku=null;function Po(s){return s.nodeType===9?s:s.ownerDocument}function eg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tg(s,n){if(s===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&n==="foreignObject"?0:s}function Vu(s,n){return s==="textarea"||s==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Yu=null;function Wv(){var s=window.event;return s&&s.type==="popstate"?s===Yu?!1:(Yu=s,!0):(Yu=null,!1)}var sg=typeof setTimeout=="function"?setTimeout:void 0,Xv=typeof clearTimeout=="function"?clearTimeout:void 0,ag=typeof Promise=="function"?Promise:void 0,Zv=typeof queueMicrotask=="function"?queueMicrotask:typeof ag<"u"?function(s){return ag.resolve(null).then(s).catch(Jv)}:sg;function Jv(s){setTimeout(function(){throw s})}function Ka(s){return s==="head"}function ng(s,n){var i=n,c=0,u=0;do{var f=i.nextSibling;if(s.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<c&&8>c){i=c;var C=s.ownerDocument;if(i&1&&Kr(C.documentElement),i&2&&Kr(C.body),i&4)for(i=C.head,Kr(i),C=i.firstChild;C;){var O=C.nextSibling,$=C.nodeName;C[or]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&C.rel.toLowerCase()==="stylesheet"||i.removeChild(C),C=O}}if(u===0){s.removeChild(f),ti(n);return}u--}else i==="$"||i==="$?"||i==="$!"?u++:c=i.charCodeAt(0)-48;else c=0;i=f}while(i);ti(n)}function Wu(s){var n=s.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Wu(i),td(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}s.removeChild(i)}}function ej(s,n,i,c){for(;s.nodeType===1;){var u=i;if(s.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[or])switch(n){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(f=s.getAttribute("rel"),f==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(f!==u.rel||s.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||s.getAttribute("title")!==(u.title==null?null:u.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(f=s.getAttribute("src"),(f!==(u.src==null?null:u.src)||s.getAttribute("type")!==(u.type==null?null:u.type)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(n==="input"&&s.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&s.getAttribute("name")===f)return s}else return s;if(s=_s(s.nextSibling),s===null)break}return null}function tj(s,n,i){if(n==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=_s(s.nextSibling),s===null))return null;return s}function Xu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function sj(s,n){var i=s.ownerDocument;if(s.data!=="$?"||i.readyState==="complete")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function _s(s){for(;s!=null;s=s.nextSibling){var n=s.nodeType;if(n===1||n===3)break;if(n===8){if(n=s.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return s}var Zu=null;function lg(s){s=s.previousSibling;for(var n=0;s;){if(s.nodeType===8){var i=s.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return s;n--}else i==="/$"&&n++}s=s.previousSibling}return null}function rg(s,n,i){switch(n=Po(i),s){case"html":if(s=n.documentElement,!s)throw Error(r(452));return s;case"head":if(s=n.head,!s)throw Error(r(453));return s;case"body":if(s=n.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Kr(s){for(var n=s.attributes;n.length;)s.removeAttributeNode(n[0]);td(s)}var Os=new Map,ig=new Set;function Mo(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ba=W.d;W.d={f:aj,r:nj,D:lj,C:rj,L:ij,m:oj,X:dj,S:cj,M:uj};function aj(){var s=ba.f(),n=So();return s||n}function nj(s){var n=Zn(s);n!==null&&n.tag===5&&n.type==="form"?Ex(n):ba.r(s)}var Pl=typeof document>"u"?null:document;function og(s,n,i){var c=Pl;if(c&&typeof n=="string"&&n){var u=js(n);u='link[rel="'+s+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),ig.has(u)||(ig.add(u),s={rel:s,crossOrigin:i,href:n},c.querySelector(u)===null&&(n=c.createElement("link"),Pt(n,"link",s),kt(n),c.head.appendChild(n)))}}function lj(s){ba.D(s),og("dns-prefetch",s,null)}function rj(s,n){ba.C(s,n),og("preconnect",s,n)}function ij(s,n,i){ba.L(s,n,i);var c=Pl;if(c&&s&&n){var u='link[rel="preload"][as="'+js(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+js(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+js(i.imageSizes)+'"]')):u+='[href="'+js(s)+'"]';var f=u;switch(n){case"style":f=Ml(s);break;case"script":f=Ll(s)}Os.has(f)||(s=g({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:s,as:n},i),Os.set(f,s),c.querySelector(u)!==null||n==="style"&&c.querySelector(Vr(f))||n==="script"&&c.querySelector(Yr(f))||(n=c.createElement("link"),Pt(n,"link",s),kt(n),c.head.appendChild(n)))}}function oj(s,n){ba.m(s,n);var i=Pl;if(i&&s){var c=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+js(c)+'"][href="'+js(s)+'"]',f=u;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ll(s)}if(!Os.has(f)&&(s=g({rel:"modulepreload",href:s},n),Os.set(f,s),i.querySelector(u)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Yr(f)))return}c=i.createElement("link"),Pt(c,"link",s),kt(c),i.head.appendChild(c)}}}function cj(s,n,i){ba.S(s,n,i);var c=Pl;if(c&&s){var u=Jn(c).hoistableStyles,f=Ml(s);n=n||"default";var C=u.get(f);if(!C){var O={loading:0,preload:null};if(C=c.querySelector(Vr(f)))O.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":n},i),(i=Os.get(f))&&Ju(s,i);var $=C=c.createElement("link");kt($),Pt($,"link",s),$._p=new Promise(function(ae,he){$.onload=ae,$.onerror=he}),$.addEventListener("load",function(){O.loading|=1}),$.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Lo(C,n,c)}C={type:"stylesheet",instance:C,count:1,state:O},u.set(f,C)}}}function dj(s,n){ba.X(s,n);var i=Pl;if(i&&s){var c=Jn(i).hoistableScripts,u=Ll(s),f=c.get(u);f||(f=i.querySelector(Yr(u)),f||(s=g({src:s,async:!0},n),(n=Os.get(u))&&em(s,n),f=i.createElement("script"),kt(f),Pt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function uj(s,n){ba.M(s,n);var i=Pl;if(i&&s){var c=Jn(i).hoistableScripts,u=Ll(s),f=c.get(u);f||(f=i.querySelector(Yr(u)),f||(s=g({src:s,async:!0,type:"module"},n),(n=Os.get(u))&&em(s,n),f=i.createElement("script"),kt(f),Pt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function cg(s,n,i,c){var u=(u=se.current)?Mo(u):null;if(!u)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Ml(i.href),i=Jn(u).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){s=Ml(i.href);var f=Jn(u).hoistableStyles,C=f.get(s);if(C||(u=u.ownerDocument||u,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(s,C),(f=u.querySelector(Vr(s)))&&!f._p&&(C.instance=f,C.state.loading=5),Os.has(s)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Os.set(s,i),f||mj(u,s,i,C.state))),n&&c===null)throw Error(r(528,""));return C}if(n&&c!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ll(i),i=Jn(u).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ml(s){return'href="'+js(s)+'"'}function Vr(s){return'link[rel="stylesheet"]['+s+"]"}function dg(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function mj(s,n,i,c){s.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=s.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Pt(n,"link",i),kt(n),s.head.appendChild(n))}function Ll(s){return'[src="'+js(s)+'"]'}function Yr(s){return"script[async]"+s}function ug(s,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=s.querySelector('style[data-href~="'+js(i.href)+'"]');if(c)return n.instance=c,kt(c),c;var u=g({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),kt(c),Pt(c,"style",u),Lo(c,i.precedence,s),n.instance=c;case"stylesheet":u=Ml(i.href);var f=s.querySelector(Vr(u));if(f)return n.state.loading|=4,n.instance=f,kt(f),f;c=dg(i),(u=Os.get(u))&&Ju(c,u),f=(s.ownerDocument||s).createElement("link"),kt(f);var C=f;return C._p=new Promise(function(O,$){C.onload=O,C.onerror=$}),Pt(f,"link",c),n.state.loading|=4,Lo(f,i.precedence,s),n.instance=f;case"script":return f=Ll(i.src),(u=s.querySelector(Yr(f)))?(n.instance=u,kt(u),u):(c=i,(u=Os.get(f))&&(c=g({},i),em(c,u)),s=s.ownerDocument||s,u=s.createElement("script"),kt(u),Pt(u,"link",c),s.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Lo(c,i.precedence,s));return n.instance}function Lo(s,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=c.length?c[c.length-1]:null,f=u,C=0;C<c.length;C++){var O=c[C];if(O.dataset.precedence===n)f=O;else if(f!==u)break}f?f.parentNode.insertBefore(s,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(s,n.firstChild))}function Ju(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.title==null&&(s.title=n.title)}function em(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.integrity==null&&(s.integrity=n.integrity)}var Fo=null;function mg(s,n,i){if(Fo===null){var c=new Map,u=Fo=new Map;u.set(i,c)}else u=Fo,c=u.get(i),c||(c=new Map,u.set(i,c));if(c.has(s))return c;for(c.set(s,null),i=i.getElementsByTagName(s),u=0;u<i.length;u++){var f=i[u];if(!(f[or]||f[Ft]||s==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var C=f.getAttribute(n)||"";C=s+C;var O=c.get(C);O?O.push(f):c.set(C,[f])}}return c}function fg(s,n,i){s=s.ownerDocument||s,s.head.insertBefore(i,n==="title"?s.querySelector("head > title"):null)}function fj(s,n,i){if(i===1||n.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return s=n.disabled,typeof n.precedence=="string"&&s==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function hg(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Wr=null;function hj(){}function xj(s,n,i){if(Wr===null)throw Error(r(475));var c=Wr;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=Ml(i.href),f=s.querySelector(Vr(u));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=Do.bind(c),s.then(c,c)),n.state.loading|=4,n.instance=f,kt(f);return}f=s.ownerDocument||s,i=dg(i),(u=Os.get(u))&&Ju(i,u),f=f.createElement("link"),kt(f);var C=f;C._p=new Promise(function(O,$){C.onload=O,C.onerror=$}),Pt(f,"link",i),n.instance=f}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(n,s),(s=n.state.preload)&&(n.state.loading&3)===0&&(c.count++,n=Do.bind(c),s.addEventListener("load",n),s.addEventListener("error",n))}}function pj(){if(Wr===null)throw Error(r(475));var s=Wr;return s.stylesheets&&s.count===0&&tm(s,s.stylesheets),0<s.count?function(n){var i=setTimeout(function(){if(s.stylesheets&&tm(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=n,function(){s.unsuspend=null,clearTimeout(i)}}:null}function Do(){if(this.count--,this.count===0){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var _o=null;function tm(s,n){s.stylesheets=null,s.unsuspend!==null&&(s.count++,_o=new Map,n.forEach(gj,s),_o=null,Do.call(s))}function gj(s,n){if(!(n.state.loading&4)){var i=_o.get(s);if(i)var c=i.get(null);else{i=new Map,_o.set(s,i);for(var u=s.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var C=u[f];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(i.set(C.dataset.precedence,C),c=C)}c&&i.set(null,c)}u=n.instance,C=u.getAttribute("data-precedence"),f=i.get(C)||c,f===c&&i.set(null,u),i.set(C,u),this.count++,c=Do.bind(this),u.addEventListener("load",c),u.addEventListener("error",c),f?f.parentNode.insertBefore(u,f.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(u,s.firstChild)),n.state.loading|=4}}var Xr={$$typeof:N,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function bj(s,n,i,c,u,f,C,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.hiddenUpdates=Xc(null),this.identifierPrefix=c,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function xg(s,n,i,c,u,f,C,O,$,ae,he,pe){return s=new bj(s,n,i,C,O,$,ae,pe),n=1,f===!0&&(n|=24),f=cs(3,null,null,n),s.current=f,f.stateNode=s,n=Dd(),n.refCount++,s.pooledCache=n,n.refCount++,f.memoizedState={element:c,isDehydrated:i,cache:n},Ud(f),s}function pg(s){return s?(s=ul,s):ul}function gg(s,n,i,c,u,f){u=pg(u),c.context===null?c.context=u:c.pendingContext=u,c=La(n),c.payload={element:i},f=f===void 0?null:f,f!==null&&(c.callback=f),i=Fa(s,c,n),i!==null&&(hs(i,s,n),Er(i,s,n))}function bg(s,n){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var i=s.retryLane;s.retryLane=i!==0&&i<n?i:n}}function sm(s,n){bg(s,n),(s=s.alternate)&&bg(s,n)}function yg(s){if(s.tag===13){var n=dl(s,67108864);n!==null&&hs(n,s,67108864),sm(s,67108864)}}var qo=!0;function yj(s,n,i,c){var u=_.T;_.T=null;var f=W.p;try{W.p=2,am(s,n,i,c)}finally{W.p=f,_.T=u}}function wj(s,n,i,c){var u=_.T;_.T=null;var f=W.p;try{W.p=8,am(s,n,i,c)}finally{W.p=f,_.T=u}}function am(s,n,i,c){if(qo){var u=nm(c);if(u===null)Hu(s,n,c,zo,i),vg(s,c);else if(jj(u,s,n,i,c))c.stopPropagation();else if(vg(s,c),n&4&&-1<vj.indexOf(s)){for(;u!==null;){var f=Zn(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var C=pn(f.pendingLanes);if(C!==0){var O=f;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var $=1<<31-is(C);O.entanglements[1]|=$,C&=~$}Ws(f),(st&6)===0&&(jo=Qs()+500,Hr(0))}}break;case 13:O=dl(f,2),O!==null&&hs(O,f,2),So(),sm(f,2)}if(f=nm(c),f===null&&Hu(s,n,c,zo,i),f===u)break;u=f}u!==null&&c.stopPropagation()}else Hu(s,n,c,null,i)}}function nm(s){return s=cd(s),lm(s)}var zo=null;function lm(s){if(zo=null,s=Xn(s),s!==null){var n=d(s);if(n===null)s=null;else{var i=n.tag;if(i===13){if(s=m(n),s!==null)return s;s=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;s=null}else n!==s&&(s=null)}}return zo=s,null}function wg(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rw()){case Lf:return 2;case Ff:return 8;case Ri:case iw:return 32;case Df:return 268435456;default:return 32}default:return 32}}var rm=!1,Va=null,Ya=null,Wa=null,Zr=new Map,Jr=new Map,Xa=[],vj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vg(s,n){switch(s){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Zr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(n.pointerId)}}function ei(s,n,i,c,u,f){return s===null||s.nativeEvent!==f?(s={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Zn(n),n!==null&&yg(n)),s):(s.eventSystemFlags|=c,n=s.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),s)}function jj(s,n,i,c,u){switch(n){case"focusin":return Va=ei(Va,s,n,i,c,u),!0;case"dragenter":return Ya=ei(Ya,s,n,i,c,u),!0;case"mouseover":return Wa=ei(Wa,s,n,i,c,u),!0;case"pointerover":var f=u.pointerId;return Zr.set(f,ei(Zr.get(f)||null,s,n,i,c,u)),!0;case"gotpointercapture":return f=u.pointerId,Jr.set(f,ei(Jr.get(f)||null,s,n,i,c,u)),!0}return!1}function jg(s){var n=Xn(s.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){s.blockedOn=n,xw(s.priority,function(){if(i.tag===13){var c=fs();c=Zc(c);var u=dl(i,c);u!==null&&hs(u,i,c),sm(i,c)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){s.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Uo(s){if(s.blockedOn!==null)return!1;for(var n=s.targetContainers;0<n.length;){var i=nm(s.nativeEvent);if(i===null){i=s.nativeEvent;var c=new i.constructor(i.type,i);od=c,i.target.dispatchEvent(c),od=null}else return n=Zn(i),n!==null&&yg(n),s.blockedOn=i,!1;n.shift()}return!0}function Ng(s,n,i){Uo(s)&&i.delete(n)}function Nj(){rm=!1,Va!==null&&Uo(Va)&&(Va=null),Ya!==null&&Uo(Ya)&&(Ya=null),Wa!==null&&Uo(Wa)&&(Wa=null),Zr.forEach(Ng),Jr.forEach(Ng)}function $o(s,n){s.blockedOn===n&&(s.blockedOn=null,rm||(rm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Nj)))}var Io=null;function Sg(s){Io!==s&&(Io=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Io===s&&(Io=null);for(var n=0;n<s.length;n+=3){var i=s[n],c=s[n+1],u=s[n+2];if(typeof c!="function"){if(lm(c||i)===null)continue;break}var f=Zn(i);f!==null&&(s.splice(n,3),n-=3,lu(f,{pending:!0,data:u,method:i.method,action:c},c,u))}}))}function ti(s){function n($){return $o($,s)}Va!==null&&$o(Va,s),Ya!==null&&$o(Ya,s),Wa!==null&&$o(Wa,s),Zr.forEach(n),Jr.forEach(n);for(var i=0;i<Xa.length;i++){var c=Xa[i];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Xa.length&&(i=Xa[0],i.blockedOn===null);)jg(i),i.blockedOn===null&&Xa.shift();if(i=(s.ownerDocument||s).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var u=i[c],f=i[c+1],C=u[Yt]||null;if(typeof f=="function")C||Sg(i);else if(C){var O=null;if(f&&f.hasAttribute("formAction")){if(u=f,C=f[Yt]||null)O=C.formAction;else if(lm(u)!==null)continue}else O=C.action;typeof O=="function"?i[c+1]=O:(i.splice(c,3),c-=3),Sg(i)}}}function im(s){this._internalRoot=s}Bo.prototype.render=im.prototype.render=function(s){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,c=fs();gg(i,c,s,n,null,null)},Bo.prototype.unmount=im.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var n=s.containerInfo;gg(s.current,2,null,s,null,null),So(),n[Wn]=null}};function Bo(s){this._internalRoot=s}Bo.prototype.unstable_scheduleHydration=function(s){if(s){var n=$f();s={blockedOn:null,target:s,priority:n};for(var i=0;i<Xa.length&&n!==0&&n<Xa[i].priority;i++);Xa.splice(i,0,s),i===0&&jg(s)}};var Cg=a.version;if(Cg!=="19.1.0")throw Error(r(527,Cg,"19.1.0"));W.findDOMNode=function(s){var n=s._reactInternals;if(n===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(n),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var Sj={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{lr=Ho.inject(Sj),rs=Ho}catch{}}return ai.createRoot=function(s,n){if(!o(s))throw Error(r(299));var i=!1,c="",u=$x,f=Ix,C=Bx,O=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(C=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(O=n.unstable_transitionCallbacks)),n=xg(s,1,!1,null,null,i,c,u,f,C,O,null),s[Wn]=n.current,Bu(s),new im(n)},ai.hydrateRoot=function(s,n,i){if(!o(s))throw Error(r(299));var c=!1,u="",f=$x,C=Ix,O=Bx,$=null,ae=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(C=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&($=i.unstable_transitionCallbacks),i.formState!==void 0&&(ae=i.formState)),n=xg(s,1,!0,n,i??null,c,u,f,C,O,$,ae),n.context=pg(null),i=n.current,c=fs(),c=Zc(c),u=La(c),u.callback=null,Fa(i,u,c),i=c,n.current.lanes=i,ir(n,i),Ws(n),s[Wn]=n.current,Bu(s),new Bo(n)},ai.version="19.1.0",ai}var Dg;function Fj(){if(Dg)return um.exports;Dg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),um.exports=Lj(),um.exports}var Dj=Fj(),ni={},_g;function _j(){if(_g)return ni;_g=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.parse=m,ni.serialize=p;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,l=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,d=(()=>{const j=function(){};return j.prototype=Object.create(null),j})();function m(j,E){const b=new d,k=j.length;if(k<2)return b;const w=(E==null?void 0:E.decode)||g;let S=0;do{const v=j.indexOf("=",S);if(v===-1)break;const N=j.indexOf(";",S),P=N===-1?k:N;if(v>P){S=j.lastIndexOf(";",v-1)+1;continue}const T=x(j,S,v),F=h(j,v,T),z=j.slice(T,F);if(b[z]===void 0){let q=x(j,v+1,P),I=h(j,P,q);const de=w(j.slice(q,I));b[z]=de}S=P+1}while(S<k);return b}function x(j,E,b){do{const k=j.charCodeAt(E);if(k!==32&&k!==9)return E}while(++E<b);return b}function h(j,E,b){for(;E>b;){const k=j.charCodeAt(--E);if(k!==32&&k!==9)return E+1}return b}function p(j,E,b){const k=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(j))throw new TypeError(`argument name is invalid: ${j}`);const w=k(E);if(!a.test(w))throw new TypeError(`argument val is invalid: ${E}`);let S=j+"="+w;if(!b)return S;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);S+="; Max-Age="+b.maxAge}if(b.domain){if(!l.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);S+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);S+="; Path="+b.path}if(b.expires){if(!y(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);S+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(S+="; HttpOnly"),b.secure&&(S+="; Secure"),b.partitioned&&(S+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return S}function g(j){if(j.indexOf("%")===-1)return j;try{return decodeURIComponent(j)}catch{return j}}function y(j){return o.call(j)==="[object Date]"}return ni}_j();var qg="popstate";function qj(t={}){function a(r,o){let{pathname:d,search:m,hash:x}=r.location;return qm("",{pathname:d,search:m,hash:x},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function l(r,o){return typeof o=="string"?o:mi(o)}return Uj(a,l,null,t)}function ut(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Ts(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function zj(){return Math.random().toString(36).substring(2,10)}function zg(t,a){return{usr:t.state,key:t.key,idx:a}}function qm(t,a,l=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Yl(a):a,state:l,key:a&&a.key||r||zj()}}function mi({pathname:t="/",search:a="",hash:l=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function Yl(t){let a={};if(t){let l=t.indexOf("#");l>=0&&(a.hash=t.substring(l),t=t.substring(0,l));let r=t.indexOf("?");r>=0&&(a.search=t.substring(r),t=t.substring(0,r)),t&&(a.pathname=t)}return a}function Uj(t,a,l,r={}){let{window:o=document.defaultView,v5Compat:d=!1}=r,m=o.history,x="POP",h=null,p=g();p==null&&(p=0,m.replaceState({...m.state,idx:p},""));function g(){return(m.state||{idx:null}).idx}function y(){x="POP";let w=g(),S=w==null?null:w-p;p=w,h&&h({action:x,location:k.location,delta:S})}function j(w,S){x="PUSH";let v=qm(k.location,w,S);p=g()+1;let N=zg(v,p),P=k.createHref(v);try{m.pushState(N,"",P)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;o.location.assign(P)}d&&h&&h({action:x,location:k.location,delta:1})}function E(w,S){x="REPLACE";let v=qm(k.location,w,S);p=g();let N=zg(v,p),P=k.createHref(v);m.replaceState(N,"",P),d&&h&&h({action:x,location:k.location,delta:0})}function b(w){return $j(w)}let k={get action(){return x},get location(){return t(o,m)},listen(w){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(qg,y),h=w,()=>{o.removeEventListener(qg,y),h=null}},createHref(w){return a(o,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:j,replace:E,go(w){return m.go(w)}};return k}function $j(t,a=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),ut(l,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:mi(t);return r=r.replace(/ $/,"%20"),!a&&r.startsWith("//")&&(r=l+r),new URL(r,l)}function ib(t,a,l="/"){return Ij(t,a,l,!1)}function Ij(t,a,l,r){let o=typeof a=="string"?Yl(a):a,d=ka(o.pathname||"/",l);if(d==null)return null;let m=ob(t);Bj(m);let x=null;for(let h=0;x==null&&h<m.length;++h){let p=eN(d);x=Zj(m[h],p,r)}return x}function ob(t,a=[],l=[],r=""){let o=(d,m,x)=>{let h={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};h.relativePath.startsWith("/")&&(ut(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let p=Na([r,h.relativePath]),g=l.concat(h);d.children&&d.children.length>0&&(ut(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),ob(d.children,a,g,p)),!(d.path==null&&!d.index)&&a.push({path:p,score:Wj(p,d.index),routesMeta:g})};return t.forEach((d,m)=>{var x;if(d.path===""||!((x=d.path)!=null&&x.includes("?")))o(d,m);else for(let h of cb(d.path))o(d,m,h)}),a}function cb(t){let a=t.split("/");if(a.length===0)return[];let[l,...r]=a,o=l.endsWith("?"),d=l.replace(/\?$/,"");if(r.length===0)return o?[d,""]:[d];let m=cb(r.join("/")),x=[];return x.push(...m.map(h=>h===""?d:[d,h].join("/"))),o&&x.push(...m),x.map(h=>t.startsWith("/")&&h===""?"/":h)}function Bj(t){t.sort((a,l)=>a.score!==l.score?l.score-a.score:Xj(a.routesMeta.map(r=>r.childrenIndex),l.routesMeta.map(r=>r.childrenIndex)))}var Hj=/^:[\w-]+$/,Qj=3,Gj=2,Kj=1,Vj=10,Yj=-2,Ug=t=>t==="*";function Wj(t,a){let l=t.split("/"),r=l.length;return l.some(Ug)&&(r+=Yj),a&&(r+=Gj),l.filter(o=>!Ug(o)).reduce((o,d)=>o+(Hj.test(d)?Qj:d===""?Kj:Vj),r)}function Xj(t,a){return t.length===a.length&&t.slice(0,-1).every((r,o)=>r===a[o])?t[t.length-1]-a[a.length-1]:0}function Zj(t,a,l=!1){let{routesMeta:r}=t,o={},d="/",m=[];for(let x=0;x<r.length;++x){let h=r[x],p=x===r.length-1,g=d==="/"?a:a.slice(d.length)||"/",y=lc({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),j=h.route;if(!y&&p&&l&&!r[r.length-1].route.index&&(y=lc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(o,y.params),m.push({params:o,pathname:Na([d,y.pathname]),pathnameBase:nN(Na([d,y.pathnameBase])),route:j}),y.pathnameBase!=="/"&&(d=Na([d,y.pathnameBase]))}return m}function lc(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[l,r]=Jj(t.path,t.caseSensitive,t.end),o=a.match(l);if(!o)return null;let d=o[0],m=d.replace(/(.)\/+$/,"$1"),x=o.slice(1);return{params:r.reduce((p,{paramName:g,isOptional:y},j)=>{if(g==="*"){let b=x[j]||"";m=d.slice(0,d.length-b.length).replace(/(.)\/+$/,"$1")}const E=x[j];return y&&!E?p[g]=void 0:p[g]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:m,pattern:t}}function Jj(t,a=!1,l=!0){Ts(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,x,h)=>(r.push({paramName:x,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),r]}function eN(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Ts(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ka(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,r=t.charAt(l);return r&&r!=="/"?null:t.slice(l)||"/"}function tN(t,a="/"){let{pathname:l,search:r="",hash:o=""}=typeof t=="string"?Yl(t):t;return{pathname:l?l.startsWith("/")?l:sN(l,a):a,search:lN(r),hash:rN(o)}}function sN(t,a){let l=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?l.length>1&&l.pop():o!=="."&&l.push(o)}),l.length>1?l.join("/"):"/"}function xm(t,a,l,r){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aN(t){return t.filter((a,l)=>l===0||a.route.path&&a.route.path.length>0)}function xf(t){let a=aN(t);return a.map((l,r)=>r===a.length-1?l.pathname:l.pathnameBase)}function pf(t,a,l,r=!1){let o;typeof t=="string"?o=Yl(t):(o={...t},ut(!o.pathname||!o.pathname.includes("?"),xm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),xm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),xm("#","search","hash",o)));let d=t===""||o.pathname==="",m=d?"/":o.pathname,x;if(m==null)x=l;else{let y=a.length-1;if(!r&&m.startsWith("..")){let j=m.split("/");for(;j[0]==="..";)j.shift(),y-=1;o.pathname=j.join("/")}x=y>=0?a[y]:"/"}let h=tN(o,x),p=m&&m!=="/"&&m.endsWith("/"),g=(d||m===".")&&l.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}var Na=t=>t.join("/").replace(/\/\/+/g,"/"),nN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var db=["POST","PUT","PATCH","DELETE"];new Set(db);var oN=["GET",...db];new Set(oN);var Wl=A.createContext(null);Wl.displayName="DataRouter";var Ec=A.createContext(null);Ec.displayName="DataRouterState";var ub=A.createContext({isTransitioning:!1});ub.displayName="ViewTransition";var cN=A.createContext(new Map);cN.displayName="Fetchers";var dN=A.createContext(null);dN.displayName="Await";var Bs=A.createContext(null);Bs.displayName="Navigation";var vi=A.createContext(null);vi.displayName="Location";var Ms=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var gf=A.createContext(null);gf.displayName="RouteError";function uN(t,{relative:a}={}){ut(Xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:r}=A.useContext(Bs),{hash:o,pathname:d,search:m}=ji(t,{relative:a}),x=d;return l!=="/"&&(x=d==="/"?l:Na([l,d])),r.createHref({pathname:x,search:m,hash:o})}function Xl(){return A.useContext(vi)!=null}function pt(){return ut(Xl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(vi).location}var mb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fb(t){A.useContext(Bs).static||A.useLayoutEffect(t)}function Me(){let{isDataRoute:t}=A.useContext(Ms);return t?CN():mN()}function mN(){ut(Xl(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Wl),{basename:a,navigator:l}=A.useContext(Bs),{matches:r}=A.useContext(Ms),{pathname:o}=pt(),d=JSON.stringify(xf(r)),m=A.useRef(!1);return fb(()=>{m.current=!0}),A.useCallback((h,p={})=>{if(Ts(m.current,mb),!m.current)return;if(typeof h=="number"){l.go(h);return}let g=pf(h,JSON.parse(d),o,p.relative==="path");t==null&&a!=="/"&&(g.pathname=g.pathname==="/"?a:Na([a,g.pathname])),(p.replace?l.replace:l.push)(g,p.state,p)},[a,l,d,o,t])}var hb=A.createContext(null);function Ke(){return A.useContext(hb)}function fN(t){let a=A.useContext(Ms).outlet;return a&&A.createElement(hb.Provider,{value:t},a)}function Ae(){let{matches:t}=A.useContext(Ms),a=t[t.length-1];return a?a.params:{}}function ji(t,{relative:a}={}){let{matches:l}=A.useContext(Ms),{pathname:r}=pt(),o=JSON.stringify(xf(l));return A.useMemo(()=>pf(t,JSON.parse(o),r,a==="path"),[t,o,r,a])}function hN(t,a){return xb(t,a)}function xb(t,a,l,r){var S;ut(Xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(Bs),{matches:d}=A.useContext(Ms),m=d[d.length-1],x=m?m.params:{},h=m?m.pathname:"/",p=m?m.pathnameBase:"/",g=m&&m.route;{let v=g&&g.path||"";pb(h,!g||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let y=pt(),j;if(a){let v=typeof a=="string"?Yl(a):a;ut(p==="/"||((S=v.pathname)==null?void 0:S.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${v.pathname}" was given in the \`location\` prop.`),j=v}else j=y;let E=j.pathname||"/",b=E;if(p!=="/"){let v=p.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(v.length).join("/")}let k=ib(t,{pathname:b});Ts(g||k!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Ts(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=yN(k&&k.map(v=>Object.assign({},v,{params:Object.assign({},x,v.params),pathname:Na([p,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?p:Na([p,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),d,l,r);return a&&w?A.createElement(vi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},w):w}function xN(){let t=SN(),a=iN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),l=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},d={padding:"2px 4px",backgroundColor:r},m=null;return console.error("Error handled by React Router default ErrorBoundary:",t),m=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:d},"ErrorBoundary")," or"," ",A.createElement("code",{style:d},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},a),l?A.createElement("pre",{style:o},l):null,m)}var pN=A.createElement(xN,null),gN=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?A.createElement(Ms.Provider,{value:this.props.routeContext},A.createElement(gf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bN({routeContext:t,match:a,children:l}){let r=A.useContext(Wl);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),A.createElement(Ms.Provider,{value:t},l)}function yN(t,a=[],l=null,r=null){if(t==null){if(!l)return null;if(l.errors)t=l.matches;else if(a.length===0&&!l.initialized&&l.matches.length>0)t=l.matches;else return null}let o=t,d=l==null?void 0:l.errors;if(d!=null){let h=o.findIndex(p=>p.route.id&&(d==null?void 0:d[p.route.id])!==void 0);ut(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let m=!1,x=-1;if(l)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(x=h),p.route.id){let{loaderData:g,errors:y}=l,j=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||j){m=!0,x>=0?o=o.slice(0,x+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,j=!1,E=null,b=null;l&&(y=d&&p.route.id?d[p.route.id]:void 0,E=p.route.errorElement||pN,m&&(x<0&&g===0?(pb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,b=null):x===g&&(j=!0,b=p.route.hydrateFallbackElement||null)));let k=a.concat(o.slice(0,g+1)),w=()=>{let S;return y?S=E:j?S=b:p.route.Component?S=A.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=h,A.createElement(bN,{match:p,routeContext:{outlet:h,matches:k,isDataRoute:l!=null},children:S})};return l&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?A.createElement(gN,{location:l.location,revalidation:l.revalidation,component:E,error:y,children:w(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):w()},null)}function bf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wN(t){let a=A.useContext(Wl);return ut(a,bf(t)),a}function vN(t){let a=A.useContext(Ec);return ut(a,bf(t)),a}function jN(t){let a=A.useContext(Ms);return ut(a,bf(t)),a}function yf(t){let a=jN(t),l=a.matches[a.matches.length-1];return ut(l.route.id,`${t} can only be used on routes that contain a unique "id"`),l.route.id}function NN(){return yf("useRouteId")}function SN(){var r;let t=A.useContext(gf),a=vN("useRouteError"),l=yf("useRouteError");return t!==void 0?t:(r=a.errors)==null?void 0:r[l]}function CN(){let{router:t}=wN("useNavigate"),a=yf("useNavigate"),l=A.useRef(!1);return fb(()=>{l.current=!0}),A.useCallback(async(o,d={})=>{Ts(l.current,mb),l.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:a,...d}))},[t,a])}var $g={};function pb(t,a,l){!a&&!$g[t]&&($g[t]=!0,Ts(!1,l))}A.memo(kN);function kN({routes:t,future:a,state:l}){return xb(t,void 0,l,a)}function zm({to:t,replace:a,state:l,relative:r}){ut(Xl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=A.useContext(Bs);Ts(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=A.useContext(Ms),{pathname:m}=pt(),x=Me(),h=pf(t,xf(d),m,r==="path"),p=JSON.stringify(h);return A.useEffect(()=>{x(JSON.parse(p),{replace:a,state:l,relative:r})},[x,p,r,a,l]),null}function It(t){return fN(t.context)}function we(t){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function EN({basename:t="/",children:a=null,location:l,navigationType:r="POP",navigator:o,static:d=!1}){ut(!Xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),x=A.useMemo(()=>({basename:m,navigator:o,static:d,future:{}}),[m,o,d]);typeof l=="string"&&(l=Yl(l));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:j="default"}=l,E=A.useMemo(()=>{let b=ka(h,m);return b==null?null:{location:{pathname:b,search:p,hash:g,state:y,key:j},navigationType:r}},[m,h,p,g,y,j,r]);return Ts(E!=null,`<Router basename="${m}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:A.createElement(Bs.Provider,{value:x},A.createElement(vi.Provider,{children:a,value:E}))}function AN({children:t,location:a}){return hN(Um(t),a)}function Um(t,a=[]){let l=[];return A.Children.forEach(t,(r,o)=>{if(!A.isValidElement(r))return;let d=[...a,o];if(r.type===A.Fragment){l.push.apply(l,Um(r.props.children,d));return}ut(r.type===we,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!r.props.index||!r.props.children,"An index route cannot have child routes.");let m={id:r.props.id||d.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(m.children=Um(r.props.children,d)),l.push(m)}),l}var Jo="get",ec="application/x-www-form-urlencoded";function Ac(t){return t!=null&&typeof t.tagName=="string"}function ON(t){return Ac(t)&&t.tagName.toLowerCase()==="button"}function RN(t){return Ac(t)&&t.tagName.toLowerCase()==="form"}function TN(t){return Ac(t)&&t.tagName.toLowerCase()==="input"}function PN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MN(t,a){return t.button===0&&(!a||a==="_self")&&!PN(t)}function $m(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,l)=>{let r=t[l];return a.concat(Array.isArray(r)?r.map(o=>[l,o]):[[l,r]])},[]))}function LN(t,a){let l=$m(t);return a&&a.forEach((r,o)=>{l.has(o)||a.getAll(o).forEach(d=>{l.append(o,d)})}),l}var Go=null;function FN(){if(Go===null)try{new FormData(document.createElement("form"),0),Go=!1}catch{Go=!0}return Go}var DN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pm(t){return t!=null&&!DN.has(t)?(Ts(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ec}"`),null):t}function _N(t,a){let l,r,o,d,m;if(RN(t)){let x=t.getAttribute("action");r=x?ka(x,a):null,l=t.getAttribute("method")||Jo,o=pm(t.getAttribute("enctype"))||ec,d=new FormData(t)}else if(ON(t)||TN(t)&&(t.type==="submit"||t.type==="image")){let x=t.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||x.getAttribute("action");if(r=h?ka(h,a):null,l=t.getAttribute("formmethod")||x.getAttribute("method")||Jo,o=pm(t.getAttribute("formenctype"))||pm(x.getAttribute("enctype"))||ec,d=new FormData(x,t),!FN()){let{name:p,type:g,value:y}=t;if(g==="image"){let j=p?`${p}.`:"";d.append(`${j}x`,"0"),d.append(`${j}y`,"0")}else p&&d.append(p,y)}}else{if(Ac(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=Jo,r=null,o=ec,m=t}return d&&o==="text/plain"&&(m=d,d=void 0),{action:r,method:l.toLowerCase(),encType:o,formData:d,body:m}}function wf(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}async function qN(t,a){if(t.id in a)return a[t.id];try{let l=await import(t.module);return a[t.id]=l,l}catch(l){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function UN(t,a,l){let r=await Promise.all(t.map(async o=>{let d=a.routes[o.route.id];if(d){let m=await qN(d,l);return m.links?m.links():[]}return[]}));return HN(r.flat(1).filter(zN).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ig(t,a,l,r,o,d){let m=(h,p)=>l[p]?h.route.id!==l[p].route.id:!0,x=(h,p)=>{var g;return l[p].pathname!==h.pathname||((g=l[p].route.path)==null?void 0:g.endsWith("*"))&&l[p].params["*"]!==h.params["*"]};return d==="assets"?a.filter((h,p)=>m(h,p)||x(h,p)):d==="data"?a.filter((h,p)=>{var y;let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(m(h,p)||x(h,p))return!0;if(h.route.shouldRevalidate){let j=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=l[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function $N(t,a,{includeHydrateFallback:l}={}){return IN(t.map(r=>{let o=a.routes[r.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),l&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function IN(t){return[...new Set(t)]}function BN(t){let a={},l=Object.keys(t).sort();for(let r of l)a[r]=t[r];return a}function HN(t,a){let l=new Set;return new Set(a),t.reduce((r,o)=>{let d=JSON.stringify(BN(o));return l.has(d)||(l.add(d),r.push({key:d,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var QN=new Set([100,101,204,205]);function GN(t,a){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return l.pathname==="/"?l.pathname="_root.data":a&&ka(l.pathname,a)==="/"?l.pathname=`${a.replace(/\/$/,"")}/_root.data`:l.pathname=`${l.pathname.replace(/\/$/,"")}.data`,l}function gb(){let t=A.useContext(Wl);return wf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function KN(){let t=A.useContext(Ec);return wf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var vf=A.createContext(void 0);vf.displayName="FrameworkContext";function bb(){let t=A.useContext(vf);return wf(t,"You must render this element inside a <HydratedRouter> element"),t}function VN(t,a){let l=A.useContext(vf),[r,o]=A.useState(!1),[d,m]=A.useState(!1),{onFocus:x,onBlur:h,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=a,j=A.useRef(null);A.useEffect(()=>{if(t==="render"&&m(!0),t==="viewport"){let k=S=>{S.forEach(v=>{m(v.isIntersecting)})},w=new IntersectionObserver(k,{threshold:.5});return j.current&&w.observe(j.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let k=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(k)}}},[r]);let E=()=>{o(!0)},b=()=>{o(!1),m(!1)};return l?t!=="intent"?[d,j,{}]:[d,j,{onFocus:li(x,E),onBlur:li(h,b),onMouseEnter:li(p,E),onMouseLeave:li(g,b),onTouchStart:li(y,E)}]:[!1,j,{}]}function li(t,a){return l=>{t&&t(l),l.defaultPrevented||a(l)}}function YN({page:t,...a}){let{router:l}=gb(),r=A.useMemo(()=>ib(l.routes,t,l.basename),[l.routes,t,l.basename]);return r?A.createElement(XN,{page:t,matches:r,...a}):null}function WN(t){let{manifest:a,routeModules:l}=bb(),[r,o]=A.useState([]);return A.useEffect(()=>{let d=!1;return UN(t,a,l).then(m=>{d||o(m)}),()=>{d=!0}},[t,a,l]),r}function XN({page:t,matches:a,...l}){let r=pt(),{manifest:o,routeModules:d}=bb(),{basename:m}=gb(),{loaderData:x,matches:h}=KN(),p=A.useMemo(()=>Ig(t,a,h,o,r,"data"),[t,a,h,o,r]),g=A.useMemo(()=>Ig(t,a,h,o,r,"assets"),[t,a,h,o,r]),y=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,k=!1;if(a.forEach(S=>{var N;let v=o.routes[S.route.id];!v||!v.hasLoader||(!p.some(P=>P.route.id===S.route.id)&&S.route.id in x&&((N=d[S.route.id])!=null&&N.shouldRevalidate)||v.hasClientLoader?k=!0:b.add(S.route.id))}),b.size===0)return[];let w=GN(t,m);return k&&b.size>0&&w.searchParams.set("_routes",a.filter(S=>b.has(S.route.id)).map(S=>S.route.id).join(",")),[w.pathname+w.search]},[m,x,r,o,p,a,t,d]),j=A.useMemo(()=>$N(g,o),[g,o]),E=WN(g);return A.createElement(A.Fragment,null,y.map(b=>A.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...l})),j.map(b=>A.createElement("link",{key:b,rel:"modulepreload",href:b,...l})),E.map(({key:b,link:k})=>A.createElement("link",{key:b,...k})))}function ZN(...t){return a=>{t.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var yb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yb&&(window.__reactRouterVersion="7.6.1")}catch{}function JN({basename:t,children:a,window:l}){let r=A.useRef();r.current==null&&(r.current=qj({window:l,v5Compat:!0}));let o=r.current,[d,m]=A.useState({action:o.action,location:o.location}),x=A.useCallback(h=>{A.startTransition(()=>m(h))},[m]);return A.useLayoutEffect(()=>o.listen(x),[o,x]),A.createElement(EN,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:o})}var wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=A.forwardRef(function({onClick:a,discover:l="render",prefetch:r="none",relative:o,reloadDocument:d,replace:m,state:x,target:h,to:p,preventScrollReset:g,viewTransition:y,...j},E){let{basename:b}=A.useContext(Bs),k=typeof p=="string"&&wb.test(p),w,S=!1;if(typeof p=="string"&&k&&(w=p,yb))try{let I=new URL(window.location.href),de=p.startsWith("//")?new URL(I.protocol+p):new URL(p),Q=ka(de.pathname,b);de.origin===I.origin&&Q!=null?p=Q+de.search+de.hash:S=!0}catch{Ts(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=uN(p,{relative:o}),[N,P,T]=VN(r,j),F=a2(p,{replace:m,state:x,target:h,preventScrollReset:g,relative:o,viewTransition:y});function z(I){a&&a(I),I.defaultPrevented||F(I)}let q=A.createElement("a",{...j,...T,href:w||v,onClick:S||d?a:z,ref:ZN(E,P),target:h,"data-discover":!k&&l==="render"?"true":void 0});return N&&!k?A.createElement(A.Fragment,null,q,A.createElement(YN,{page:v})):q});$t.displayName="Link";var e2=A.forwardRef(function({"aria-current":a="page",caseSensitive:l=!1,className:r="",end:o=!1,style:d,to:m,viewTransition:x,children:h,...p},g){let y=ji(m,{relative:p.relative}),j=pt(),E=A.useContext(Ec),{navigator:b,basename:k}=A.useContext(Bs),w=E!=null&&o2(y)&&x===!0,S=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,v=j.pathname,N=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;l||(v=v.toLowerCase(),N=N?N.toLowerCase():null,S=S.toLowerCase()),N&&k&&(N=ka(N,k)||N);const P=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let T=v===S||!o&&v.startsWith(S)&&v.charAt(P)==="/",F=N!=null&&(N===S||!o&&N.startsWith(S)&&N.charAt(S.length)==="/"),z={isActive:T,isPending:F,isTransitioning:w},q=T?a:void 0,I;typeof r=="function"?I=r(z):I=[r,T?"active":null,F?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let de=typeof d=="function"?d(z):d;return A.createElement($t,{...p,"aria-current":q,className:I,ref:g,style:de,to:m,viewTransition:x},typeof h=="function"?h(z):h)});e2.displayName="NavLink";var t2=A.forwardRef(({discover:t="render",fetcherKey:a,navigate:l,reloadDocument:r,replace:o,state:d,method:m=Jo,action:x,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:y,...j},E)=>{let b=r2(),k=i2(x,{relative:p}),w=m.toLowerCase()==="get"?"get":"post",S=typeof x=="string"&&wb.test(x),v=N=>{if(h&&h(N),N.defaultPrevented)return;N.preventDefault();let P=N.nativeEvent.submitter,T=(P==null?void 0:P.getAttribute("formmethod"))||m;b(P||N.currentTarget,{fetcherKey:a,method:T,navigate:l,replace:o,state:d,relative:p,preventScrollReset:g,viewTransition:y})};return A.createElement("form",{ref:E,method:w,action:k,onSubmit:r?h:v,...j,"data-discover":!S&&t==="render"?"true":void 0})});t2.displayName="Form";function s2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vb(t){let a=A.useContext(Wl);return ut(a,s2(t)),a}function a2(t,{target:a,replace:l,state:r,preventScrollReset:o,relative:d,viewTransition:m}={}){let x=Me(),h=pt(),p=ji(t,{relative:d});return A.useCallback(g=>{if(MN(g,a)){g.preventDefault();let y=l!==void 0?l:mi(h)===mi(p);x(t,{replace:y,state:r,preventScrollReset:o,relative:d,viewTransition:m})}},[h,x,p,l,r,a,t,o,d,m])}function Oc(t){Ts(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=A.useRef($m(t)),l=A.useRef(!1),r=pt(),o=A.useMemo(()=>LN(r.search,l.current?null:a.current),[r.search]),d=Me(),m=A.useCallback((x,h)=>{const p=$m(typeof x=="function"?x(o):x);l.current=!0,d("?"+p,h)},[d,o]);return[o,m]}var n2=0,l2=()=>`__${String(++n2)}__`;function r2(){let{router:t}=vb("useSubmit"),{basename:a}=A.useContext(Bs),l=NN();return A.useCallback(async(r,o={})=>{let{action:d,method:m,encType:x,formData:h,body:p}=_N(r,a);if(o.navigate===!1){let g=o.fetcherKey||l2();await t.fetch(g,l,o.action||d,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||m,formEncType:o.encType||x,flushSync:o.flushSync})}else await t.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||m,formEncType:o.encType||x,replace:o.replace,state:o.state,fromRouteId:l,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,a,l])}function i2(t,{relative:a}={}){let{basename:l}=A.useContext(Bs),r=A.useContext(Ms);ut(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),d={...ji(t||".",{relative:a})},m=pt();if(t==null){d.search=m.search;let x=new URLSearchParams(d.search),h=x.getAll("index");if(h.some(g=>g==="")){x.delete("index"),h.filter(y=>y).forEach(y=>x.append("index",y));let g=x.toString();d.search=g?`?${g}`:""}}return(!t||t===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(d.pathname=d.pathname==="/"?l:Na([l,d.pathname])),mi(d)}function o2(t,a={}){let l=A.useContext(ub);ut(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vb("useViewTransitionState"),o=ji(t,{relative:a.relative});if(!l.isTransitioning)return!1;let d=ka(l.currentLocation.pathname,r)||l.currentLocation.pathname,m=ka(l.nextLocation.pathname,r)||l.nextLocation.pathname;return lc(o.pathname,m)!=null||lc(o.pathname,d)!=null}[...QN];var gm={exports:{}},bm={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function c2(){if(Bg)return bm;Bg=1;var t=kc();function a(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var l=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,o=t.useRef,d=t.useEffect,m=t.useMemo,x=t.useDebugValue;return bm.useSyncExternalStoreWithSelector=function(h,p,g,y,j){var E=o(null);if(E.current===null){var b={hasValue:!1,value:null};E.current=b}else b=E.current;E=m(function(){function w(T){if(!S){if(S=!0,v=T,T=y(T),j!==void 0&&b.hasValue){var F=b.value;if(j(F,T))return N=F}return N=T}if(F=N,l(v,T))return F;var z=y(T);return j!==void 0&&j(F,z)?(v=T,F):(v=T,N=z)}var S=!1,v,N,P=g===void 0?null:g;return[function(){return w(p())},P===null?void 0:function(){return w(P())}]},[p,g,y,j]);var k=r(h,E[0],E[1]);return d(function(){b.hasValue=!0,b.value=k},[k]),x(k),k},bm}var Hg;function d2(){return Hg||(Hg=1,gm.exports=c2()),gm.exports}var u2=d2();function m2(t){t()}function f2(){let t=null,a=null;return{clear(){t=null,a=null},notify(){m2(()=>{let l=t;for(;l;)l.callback(),l=l.next})},get(){const l=[];let r=t;for(;r;)l.push(r),r=r.next;return l},subscribe(l){let r=!0;const o=a={callback:l,next:null,prev:a};return o.prev?o.prev.next=o:t=o,function(){!r||t===null||(r=!1,o.next?o.next.prev=o.prev:a=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Qg={notify(){},get:()=>[]};function h2(t,a){let l,r=Qg,o=0,d=!1;function m(k){g();const w=r.subscribe(k);let S=!1;return()=>{S||(S=!0,w(),y())}}function x(){r.notify()}function h(){b.onStateChange&&b.onStateChange()}function p(){return d}function g(){o++,l||(l=t.subscribe(h),r=f2())}function y(){o--,l&&o===0&&(l(),l=void 0,r.clear(),r=Qg)}function j(){d||(d=!0,g())}function E(){d&&(d=!1,y())}const b={addNestedSub:m,notifyNestedSubs:x,handleChangeWrapper:h,isSubscribed:p,trySubscribe:j,tryUnsubscribe:E,getListeners:()=>r};return b}var x2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",p2=x2(),g2=()=>typeof navigator<"u"&&navigator.product==="ReactNative",b2=g2(),y2=()=>p2||b2?A.useLayoutEffect:A.useEffect,w2=y2(),ym=Symbol.for("react-redux-context"),wm=typeof globalThis<"u"?globalThis:{};function v2(){if(!A.createContext)return{};const t=wm[ym]??(wm[ym]=new Map);let a=t.get(A.createContext);return a||(a=A.createContext(null),t.set(A.createContext,a)),a}var mn=v2();function j2(t){const{children:a,context:l,serverState:r,store:o}=t,d=A.useMemo(()=>{const h=h2(o);return{store:o,subscription:h,getServerState:r?()=>r:void 0}},[o,r]),m=A.useMemo(()=>o.getState(),[o]);w2(()=>{const{subscription:h}=d;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),m!==o.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[d,m]);const x=l||mn;return A.createElement(x.Provider,{value:d},a)}var N2=j2;function jf(t=mn){return function(){return A.useContext(t)}}var jb=jf();function Nb(t=mn){const a=t===mn?jb:jf(t),l=()=>{const{store:r}=a();return r};return Object.assign(l,{withTypes:()=>l}),l}var S2=Nb();function C2(t=mn){const a=t===mn?S2:Nb(t),l=()=>a().dispatch;return Object.assign(l,{withTypes:()=>l}),l}var ys=C2(),k2=(t,a)=>t===a;function E2(t=mn){const a=t===mn?jb:jf(t),l=(r,o={})=>{const{equalityFn:d=k2}=typeof o=="function"?{equalityFn:o}:o,m=a(),{store:x,subscription:h,getServerState:p}=m;A.useRef(!0);const g=A.useCallback({[r.name](j){return r(j)}}[r.name],[r]),y=u2.useSyncExternalStoreWithSelector(h.addNestedSub,x.getState,p||x.getState,g,d);return A.useDebugValue(y),y};return Object.assign(l,{withTypes:()=>l}),l}var xs=E2();const Im={PROJECTS:"Projects",ORGANIZATION:"Organization"},A2={PROJECTS:"fa-solid fa-diagram-project text-2xl",ORGANIZATION:"fa-solid fa-building text-2xl"},Sb={ADMIN:"fas fa-user-tie text-2xl",STAFF:"fas fa-user-gear text-2xl",CTO:"fas fa-users-gear text-2xl",WORKER:"fas fa-hard-hat text-2xl",CLIENT:"fas fa-user text-2xl"},rc={ADMIN:"Admin Login",STAFF:"STaff Login",CTO:"CTO Login",WORKER:"Worker Login",CLIENT:"Client Login"},O2={INVITECTO:"fa-solid fa-user-tie text-2xl",INVITESTAFFS:"fa-solid fa-user text-2xl",DETAILS:"fa-solid fa-building text-2xl",PROJECTS:"fa-solid fa-diagram-project  text-2xl",PLAN:"fa-solid fa-cash  text-2xl",PROFILE:"fa-solid fa-user-gear  text-2xl",MODULAR:"fa-solid fa-box  text-2xl"},Gg={INVITECTO:"Invite CTO",INVITESTAFFS:"Invite Staffs",DETAILS:"Org Details",PROJECTS:"Projects",PLAN:"Upgrade Plan",PROFILE:"User Profile",MODULAR:"Modular Units"},Kg={WORKERS:"Invite Workers",INVITECLIENT:"Invite Client",PREREQUIRETIES:"Pre Requireties",REQUIREMENTFORM:"Requirement Form",SITEMEASUREMENT:"Site Measurement",SAMPLEDESIGN:"Sample Designs",TECHNICALCONSULTANT:"Technical consultant",MATERIALSELECTION:"Material Selection",COSTESTIMATION:"Cost Estiamtion",PAYMENTCONFIRMATION:"Payment Stage",ORDERMATERIALS:"Ordering Material",MATERIALARRIVED:"Material Arrival",WORKSCHEDULE:"Work Schedule",INSTALLATION:"Installation and execution",QUALITYCHECK:"Quality Check",CLEANINGSANITATION:"Cleaning & Sanitation",PROJECTDELIVERY:"Project Delivery"},R2={WORKERS:"fa-solid fa-circle-info text-2xl",INVITECLIENT:"fa-solid fa-user-group text-2xl",PREREQUIRETIES:"fa-solid fa-clipboard text-2xl",REQUIREMENTFORM:"fa-solid fa-pencil text-2xl",SITEMEASUREMENT:"fa-solid fa-building text-2xl",SAMPLEDESIGN:"fa-solid fa-object-group text-2xl",TECHNICALCONSULTANT:"fa-solid fa-comments text-2xl",MATERIALSELECTION:"fas fa-box text-2xl",COSTESTIMATION:"fa-solid fa-money-bill-1-wave text-2xl",PAYMENTCONFIRMATION:"fa-solid fa-money-bill-wave text-2xl",ORDERMATERIALS:"fa-solid fa-shopping-cart text-2xl",MATERIALARRIVED:"fa-solid fa-receipt text-2xl",WORKSCHEDULE:"fas fa-digging text-2xl",INSTALLATION:"fas fa-comments text-2xl",QUALITYCHECK:"fas fa-check-double text-2xl",CLEANINGSANITATION:"fas fa-broom text-2xl",PROJECTDELIVERY:"fas fa-handshake text-2xl"},T2={labourlist:"Labours",materiallist:"Materials",transportationlist:"Transportation",workers:"Workers",inviteclient:"Invite Client",requirementform:"Requirement Form",sitemeasurement:"Site Measurement",sampledesign:"Sample Designs",technicalconsultant:"Technical consultant",materialselection:"Material Selection",costestimation:"Cost Estiamtion",paymentconfirmation:"Payment Stage",ordermaterial:"Ordering Material",materialarrival:"Material Arrival",workmainschedule:"Work Schedule",installation:"Installation and execution",qualitycheck:"Quality Check",cleaning:"Cleaning & Sanitation",projectdelivery:"Project Delivery"},P2={labourlist:"LABOURS",materiallist:"MATERIALS",transportationlist:"TRANSPORTATION",workers:"WORKERS",inviteclient:"INVITECLIENT",requirementform:"REQUIREMENTFORM",sitemeasurement:"SITEMEASUREMENT",sampledesign:"SAMPLEDESIGN",technicalconsultant:"TECHNICALCONSULTANT",materialselection:"MATERIALSELECTION",costestimation:"COSTESTIMATION",paymentconfirmation:"PAYMENTCONFIRMATION",ordermaterial:"ORDERMATERIALS",materialarrival:"MATERIALARRIVED",workmainschedule:"WORKSCHEDULE",installation:"INSTALLATION",qualitycheck:"QUALITYCHECK",cleaning:"CLEANINGSANITATION",projectdelivery:"PROJECTDELIVERY"},yt={COMPANY_NAME:"Vertical living",COMPANY_LOGO:"https://th.bing.com/th/id/OIP.Uparc9uI63RDb82OupdPvwAAAA?w=80&h=80&c=1&bgcl=c77779&r=0&o=6&dpr=1.3&pid=ImgRC"},Cb=[{key:"basic",name:"Basic",price:1e3,color:"border-blue-500",btnColor:"bg-blue-600 hover:bg-blue-700",planNameColor:"text-blue-700",features:[" 5 Roles Allowed"," Email Notification"," Timer Functionality"," Image Upload"," PDF Upload"," Assign Staffs"," Cost Estimation"],available:!0},{key:"advanced",name:"Advanced",price:0,color:"border-purple-500",btnColor:"bg-purple-600 hover:bg-purple-700",planNameColor:"text-purple-700",features:[],available:!1},{key:"enterprise",name:"Enterprise",price:0,color:"border-rose-500",btnColor:"bg-rose-600 hover:bg-rose-700",planNameColor:"text-rose-700",features:[],available:!1}],ya={carpentry:["material","brandName","specification","quantity","unit","remarks"],hardware:["item","size","material","brandName","quantity","unit","remarks"],electricalFittings:["item","specification","quantity","unit","remarks"],tiles:["type","brandName","size","quantity","unit","remarks"],ceramicSanitaryware:["item","specification","quantity","unit","remarks"],paintsCoatings:["type","brandName","color","quantity","unit","remarks"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks"],glassMirrors:["type","brandName","size","thickness","quantity","remarks"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks"],falseCeilingMaterials:["item","specification","quantity","unit","remarks"]},M2={carpentry:["Greenply","CenturyPly","Kitply","Archidply","Merino Laminates","Action TESA","Austin Plywood"],hardware:["Hettich","Hafele","Ebco","Godrej Locks","Dorset","Ozone","Blum","Yale"],electricalFittings:["Havells","Anchor by Panasonic","Legrand","Schneider Electric","GM Modular","Wipro","Philips","Syska"],tiles:["Kajaria","Somany","Nitco","Orientbell","Johnson Tiles","Varmora","Asian Granito"],ceramicSanitaryware:["Hindware","Jaquar","CERA","Parryware","Kohler India","Roca India"],paintsCoatings:["Asian Paints","Berger Paints","Nerolac Paints","Dulux Paints","Indigo Paints","Shalimar Paints"],lightsFixtures:["Philips Lighting","Syska LED","Wipro Lighting","Havells","Crompton","Bajaj Electricals"],glassMirrors:["Saint-Gobain","Modiguard","AIS Glass","HNG Float Glass","Gold Plus Glass"],upholsteryCurtains:["DDecor","Fabindia","Bombay Dyeing","Raymond Furnishings","Spaces Home & Beyond"],falseCeilingMaterials:["Gyproc by Saint-Gobain","Armstrong Ceilings","USG Boral","Everest Industries","Shera"]},Zs={carpentry:["material","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],hardware:["item","size","material","brandName","quantity","unit","remarks","image","verifiedByAccountant"],electricalFittings:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],tiles:["type","brandName","size","quantity","unit","remarks","image","verifiedByAccountant"],ceramicSanitaryware:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],paintsCoatings:["type","brandName","color","quantity","unit","remarks","image","verifiedByAccountant"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],glassMirrors:["type","brandName","size","thickness","quantity","remarks","image","verifiedByAccountant"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks","image","verifiedByAccountant"],falseCeilingMaterials:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"]},vm={brandName:{carpentry:["Greenply","Century","Kitply","Archid","Austin"],hardware:["Hettich","Hafele","Blum","Godrej"],tiles:["Kajaria","Somany","Johnson","Nitco"],paintsCoatings:["Asian Paints","Berger","Dulux"],lightsFixtures:["Philips","Syska","Wipro"],glassMirrors:["Saint-Gobain","Modiguard","Asahi"],ceramicSanitaryware:["Cera","Parryware","Hindware"]},fabric:{upholsteryCurtains:["Cotton","Linen","Velvet","Polyester","Silk"]}},L2=["Living Room","Bedroom","Kitchen","Dining Room","Balcony","Foyer Area","Terrace","Study Room","Car Parking","Garden","Storage Room","Entertainment Room","Home Gym"],kb=[{stepNumber:1,label:"Identify Painting Area",rules:["Measure and record room dimensions (length, width, height) in feet and inches using a measuring tape or laser tool.","Take high-resolution photos of all walls, corners, and ceiling edges for supervisor reference.","Highlight and document any cracks, dampness, or surface irregularities that need attention.","Upload details of the paint brand and colour code selected for approval before proceeding."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Cover the floor using durable plastic sheets or canvas drop cloths to prevent paint spillage.","Move all movable furniture to the center of the room and cover them securely with protective sheets.","Apply masking tape to skirting boards, switches, sockets, and window trims for protection."]},{stepNumber:3,label:"Surface Preparation",rules:["Clean all walls thoroughly to remove dust, dirt, and grease spots.","Scrape off any old loose paint using a putty knife.","Fill cracks and holes with quality wall putty and allow it to dry.","Sand the surface to ensure a smooth and even base for putty application."]},{stepNumber:4,label:"First Coat of Putty",rules:["Apply the first coat of wall putty using a broad putty knife for even application.","Allow sufficient drying time as per the manufacturers guidelines.","Lightly sand the surface to remove any excess material and achieve a smooth finish."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Apply a second coat of wall putty for a fine, uniform surface.","After drying, sand the surface again to ensure it is perfectly smooth and ready for scrubbing.","Clean all dust particles with a dry cloth before proceeding."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["After applying two coats of putty, scrub the wall surface to eliminate any rough patches.","Choose between manual scrubbing (using sandpaper for small areas and edges) or machine scrubbing (for large walls, ensuring consistency and time-saving).","Scrub in circular motions and clean off all dust after scrubbing."]},{stepNumber:6,label:"Primer Application",rules:["Apply one uniform coat of primer using a roller or brush.","Allow the primer to dry completely before moving to paint application."]},{stepNumber:7,label:"First Coat of Paint",rules:["Apply the first coat of approved paint using consistent strokes to avoid streaks.","Allow sufficient drying time before applying the second coat."]},{stepNumber:8,label:"Second Coat of Paint",rules:["Apply the second coat of paint for a smooth, uniform finish.","Inspect walls for any missed spots and touch up as required."]},{stepNumber:9,label:"Final Finishing and Cleanup",rules:["Conduct a final inspection of all painted surfaces for uniformity.","Carefully remove all masking tape to avoid peeling paint.","Clean up the workspace, remove protective sheets, and reset furniture."]}],Eb=[{stepNumber:1,label:"Identify Painting Area",rules:["Review worker-uploaded images and details for Step 1.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Review worker-uploaded images and details for Step 2.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:3,label:"Surface Preparation",rules:["Review worker-uploaded images and details for Step 3.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:4,label:"First Coat of Putty",rules:["Review worker-uploaded images and details for Step 4.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Review worker-uploaded images and details for Step 5.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["Review worker-uploaded images and details for Step 6.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:7,label:"Primer Application",rules:["Review worker-uploaded images and details for Step 7.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:8,label:"First Coat of Paint",rules:["Review worker-uploaded images and details for Step 8.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:9,label:"Second Coat of Paint",rules:["Review worker-uploaded images and details for Step 9.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:10,label:"Final Finishing and Cleanup",rules:["Review worker-uploaded images and details for Step 10.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]}],Ko=({src:t,alt:a,className:l="",width:r,height:o})=>{const[d,m]=A.useState(!1),[x,h]=A.useState("");return A.useEffect(()=>{const p=new Image;p.crossOrigin="anonymous",p.onload=()=>{h(t),m(!0)},p.src=t},[t]),e.jsxs("div",{className:`relative overflow-hidden ${l}`,style:{width:r,height:o},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-blue-100 to-purple-100 transition-opacity duration-500 ${d?"opacity-0":"opacity-100"}`}),x&&e.jsx("img",{src:x,alt:a,className:`w-full h-full object-cover transition-opacity duration-500 ${d?"opacity-100":"opacity-0"}`})]})},ri=({children:t,className:a=""})=>e.jsx("div",{className:`bg-white rounded-lg shadow-lg ${a}`,children:t}),jm=({children:t,variant:a="primary",size:l="md",className:r="",onClick:o})=>{const d="font-semibold rounded-lg transition-all duration-200 inline-flex items-center justify-center",m={primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700",secondary:"bg-white text-gray-900 border border-gray-300 hover:bg-gray-50",outline:"border-2 border-current bg-transparent hover:bg-current hover:text-white"},x={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return e.jsx("button",{className:`${d} ${m[a]} ${x[l]} ${r}`,onClick:o,children:t})},Vg=({children:t,className:a=""})=>e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ${a}`,children:t});function Yg(){const t=xs(m=>m.authStore),[a,l]=A.useState(!1),r=Me(),o=()=>{l(!1)},d={basic:"Perfect for small design studios",enterprise:"For large design firms",advanced:" For growing design businesses"};return e.jsxs("div",{className:"min-h-full w-full bg-white",children:[e.jsx("header",{className:"border-b px-4 border-gray-300 w-full bg-white/95 backdrop-blur sticky top-0 z-50",children:e.jsx("div",{className:" w-full",children:e.jsxs("div",{className:"flex justify-between w-full items-center py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ko,{src:yt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-10 h-10 rounded-lg",width:40,height:40}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:yt.COMPANY_NAME})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[e.jsx(jm,{onClick:()=>r("/login"),variant:"secondary",className:"hidden sm:inline-flex cursor-pointer",children:"Sign In"}),(t==null?void 0:t.isauthenticated)&&e.jsx(jm,{onClick:()=>r("/"),className:"cursor-pointer",children:"Get Started"})]}),e.jsx("button",{className:"sm:hidden block p-2",onClick:()=>l(!a),children:e.jsx("i",{className:"fas fa-bars text-gray-600"})})]})]})})}),e.jsx("div",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${a?"translate-x-0":"-translate-x-full"} `,children:e.jsxs("nav",{className:"flex flex-col space-y-4 ",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:yt.COMPANY_NAME})]}),e.jsx("button",{onClick:o,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("ul",{className:"px-4 space-x-2 max-h-screen overflow-y-auto space-y-4 ",children:[e.jsx("li",{onClick:()=>r("/login"),className:"border-b border-gray-300 py-5",children:e.jsx($t,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Sign In"})}),e.jsx("li",{onClick:()=>r("/organizations"),children:e.jsx($t,{to:"/organizations",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Get Started"})})]})]})}),e.jsx("section",{className:"pt-20 pb-16 sm:py-24",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs(Vg,{className:"mb-4",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Interior Design Task Management"]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Streamline Your"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Work Flows"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Manage client requirements, assign tasks to workers, set timers, and send automated email reminders. Everything you need to deliver exceptional interior design projects on time."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsxs(jm,{onClick:()=>r("/organizations"),size:"lg",className:"text-lg px-8 py-3 cursor-pointer",children:["Get Started Today",e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})})]}),e.jsx("div",{className:"mt-16 max-w-5xl mx-auto",children:e.jsx(Ko,{src:"/placeholder.svg?height=600&width=1000",alt:"Vertical Living Dashboard",className:"rounded-xl shadow-2xl border"})})]})}),e.jsx("section",{id:"features",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Everything you need for interior design project management"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Powerful features designed specifically for interior designers and their teams"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-clipboard-list text-blue-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Client Requirements"}),e.jsx("p",{className:"text-gray-600",children:"Capture and organize client requirements, preferences, and specifications in one centralized location."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-users text-green-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Task Assignment"}),e.jsx("p",{className:"text-gray-600",children:"Assign tasks to team members and workers with clear deadlines and detailed instructions."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-envelope text-purple-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Email Reminders"}),e.jsx("p",{className:"text-gray-600",children:"Automated email notifications and reminders to keep everyone on track and informed."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-stopwatch text-orange-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Time Tracking"}),e.jsx("p",{className:"text-gray-600",children:"Built-in timers to track work hours and monitor project progress in real-time."})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsxs("div",{className:"w-[100%] sm:w-[60%] mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-center  text-gray-900 mb-4",children:"Designed for Interior Design Professionals"}),e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Unlike generic project management tools, Vertical Living is built specifically for interior designers. We understand your workflow, from initial client consultation to final installation."})]}),e.jsx("div",{children:e.jsx(Ko,{src:"/placeholder.svg?height=400&width=500",alt:"Interior Design Project Management",className:"rounded-lg shadow-lg"})})]})]})}),e.jsx("section",{id:"pricing",className:"py-20",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Explore Plan"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Start with our Basic plan and upgrade as your business grows"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:Cb.map(m=>{let x="";switch(m.key){case"basic":x="fa-seedling";break;case"advanced":x="fa-rocket";break;case"enterprise":x="fa-building";break;default:x="fa-layer-group"}return e.jsxs(ri,{className:`border-2 ${m.price?"border-blue-500":"border-none"} shadow-xl relative p-6`,children:[m.price===0&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(Vg,{className:"bg-gray-500 text-white",children:"Coming Soon"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-2",children:[e.jsx("i",{className:`fa-solid ${x} ${m.price?"text-blue-600":"text-gray-600"} mr-2`}),m.name]}),e.jsx("p",{className:"text-gray-600 mb-4",children:d[m.key]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:`text-2xl sm:text-2xl ${m.price?"text-3xl":"text-xl"} font-bold`,children:[" ",m.price?` ${m.price}`:"Coming Soon"]}),m.price>0&&e.jsx("span",{className:"text-gray-500",children:"/month"})]})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:m.features.length>0?m.features.map((h,p)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${h.includes("")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:h.replace("","").replace("","")})]},p)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})})]},m.key)})})]})}),e.jsx("footer",{id:"contact",className:"bg-gray-900 text-white py-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ko,{src:yt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-8 h-8 rounded-lg",width:32,height:32}),e.jsx("span",{className:"text-xl font-bold",children:yt.COMPANY_NAME})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Streamline your Work flow with our specialized task management platform."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-linkedin text-xl"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-instagram text-xl"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"text-gray-400 scroll-smooth  hover:text-white transition-colors",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors",children:"Pricing"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",className:"text-gray-400 hover:text-white transition-colors",children:"Contact"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," ",yt.COMPANY_NAME,". All rights reserved."]}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Terms of Service"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cookie Policy"})]})]})]})})]})}const F2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Issues"}),D2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Phase"}),_2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Tasks"});function q2(t,a){A.useEffect(()=>{const l=r=>{r.ctrlKey&&r.key==="]"?(r.preventDefault(),a()):r.ctrlKey&&r.key==="["&&(r.preventDefault(),t())};window.addEventListener("keydown",l)},[a,t])}var Zl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qn=typeof window>"u"||"Deno"in globalThis;function Gt(){}function z2(t,a){return typeof t=="function"?t(a):t}function Bm(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ab(t,a){return Math.max(t+(a||0)-Date.now(),0)}function un(t,a){return typeof t=="function"?t(a):t}function Us(t,a){return typeof t=="function"?t(a):t}function Wg(t,a){const{type:l="all",exact:r,fetchStatus:o,predicate:d,queryKey:m,stale:x}=t;if(m){if(r){if(a.queryHash!==Nf(m,a.options))return!1}else if(!fi(a.queryKey,m))return!1}if(l!=="all"){const h=a.isActive();if(l==="active"&&!h||l==="inactive"&&h)return!1}return!(typeof x=="boolean"&&a.isStale()!==x||o&&o!==a.state.fetchStatus||d&&!d(a))}function Xg(t,a){const{exact:l,status:r,predicate:o,mutationKey:d}=t;if(d){if(!a.options.mutationKey)return!1;if(l){if(Gn(a.options.mutationKey)!==Gn(d))return!1}else if(!fi(a.options.mutationKey,d))return!1}return!(r&&a.state.status!==r||o&&!o(a))}function Nf(t,a){return((a==null?void 0:a.queryKeyHashFn)||Gn)(t)}function Gn(t){return JSON.stringify(t,(a,l)=>Hm(l)?Object.keys(l).sort().reduce((r,o)=>(r[o]=l[o],r),{}):l)}function fi(t,a){return t===a?!0:typeof t!=typeof a?!1:t&&a&&typeof t=="object"&&typeof a=="object"?Object.keys(a).every(l=>fi(t[l],a[l])):!1}function Ob(t,a){if(t===a)return t;const l=Zg(t)&&Zg(a);if(l||Hm(t)&&Hm(a)){const r=l?t:Object.keys(t),o=r.length,d=l?a:Object.keys(a),m=d.length,x=l?[]:{},h=new Set(r);let p=0;for(let g=0;g<m;g++){const y=l?g:d[g];(!l&&h.has(y)||l)&&t[y]===void 0&&a[y]===void 0?(x[y]=void 0,p++):(x[y]=Ob(t[y],a[y]),x[y]===t[y]&&t[y]!==void 0&&p++)}return o===m&&p===o?t:x}return a}function ic(t,a){if(!a||Object.keys(t).length!==Object.keys(a).length)return!1;for(const l in t)if(t[l]!==a[l])return!1;return!0}function Zg(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Hm(t){if(!Jg(t))return!1;const a=t.constructor;if(a===void 0)return!0;const l=a.prototype;return!(!Jg(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Jg(t){return Object.prototype.toString.call(t)==="[object Object]"}function U2(t){return new Promise(a=>{setTimeout(a,t)})}function Qm(t,a,l){return typeof l.structuralSharing=="function"?l.structuralSharing(t,a):l.structuralSharing!==!1?Ob(t,a):a}function $2(t,a,l=0){const r=[...t,a];return l&&r.length>l?r.slice(1):r}function I2(t,a,l=0){const r=[a,...t];return l&&r.length>l?r.slice(0,-1):r}var Sf=Symbol();function Rb(t,a){return!t.queryFn&&(a!=null&&a.initialPromise)?()=>a.initialPromise:!t.queryFn||t.queryFn===Sf?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Tb(t,a){return typeof t=="function"?t(...a):!!t}var Dn,en,Fl,X0,B2=(X0=class extends Zl{constructor(){super();Ee(this,Dn);Ee(this,en);Ee(this,Fl);ve(this,Fl,a=>{if(!Qn&&window.addEventListener){const l=()=>a();return window.addEventListener("visibilitychange",l,!1),()=>{window.removeEventListener("visibilitychange",l)}}})}onSubscribe(){H(this,en)||this.setEventListener(H(this,Fl))}onUnsubscribe(){var a;this.hasListeners()||((a=H(this,en))==null||a.call(this),ve(this,en,void 0))}setEventListener(a){var l;ve(this,Fl,a),(l=H(this,en))==null||l.call(this),ve(this,en,a(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(a){H(this,Dn)!==a&&(ve(this,Dn,a),this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(l=>{l(a)})}isFocused(){var a;return typeof H(this,Dn)=="boolean"?H(this,Dn):((a=globalThis.document)==null?void 0:a.visibilityState)!=="hidden"}},Dn=new WeakMap,en=new WeakMap,Fl=new WeakMap,X0),Cf=new B2,Dl,tn,_l,Z0,H2=(Z0=class extends Zl{constructor(){super();Ee(this,Dl,!0);Ee(this,tn);Ee(this,_l);ve(this,_l,a=>{if(!Qn&&window.addEventListener){const l=()=>a(!0),r=()=>a(!1);return window.addEventListener("online",l,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,tn)||this.setEventListener(H(this,_l))}onUnsubscribe(){var a;this.hasListeners()||((a=H(this,tn))==null||a.call(this),ve(this,tn,void 0))}setEventListener(a){var l;ve(this,_l,a),(l=H(this,tn))==null||l.call(this),ve(this,tn,a(this.setOnline.bind(this)))}setOnline(a){H(this,Dl)!==a&&(ve(this,Dl,a),this.listeners.forEach(r=>{r(a)}))}isOnline(){return H(this,Dl)}},Dl=new WeakMap,tn=new WeakMap,_l=new WeakMap,Z0),oc=new H2;function Gm(){let t,a;const l=new Promise((o,d)=>{t=o,a=d});l.status="pending",l.catch(()=>{});function r(o){Object.assign(l,o),delete l.resolve,delete l.reject}return l.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},l.reject=o=>{r({status:"rejected",reason:o}),a(o)},l}function Q2(t){return Math.min(1e3*2**t,3e4)}function Pb(t){return(t??"online")==="online"?oc.isOnline():!0}var Mb=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Nm(t){return t instanceof Mb}function Lb(t){let a=!1,l=0,r=!1,o;const d=Gm(),m=k=>{var w;r||(j(new Mb(k)),(w=t.abort)==null||w.call(t))},x=()=>{a=!0},h=()=>{a=!1},p=()=>Cf.isFocused()&&(t.networkMode==="always"||oc.isOnline())&&t.canRun(),g=()=>Pb(t.networkMode)&&t.canRun(),y=k=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,k),o==null||o(),d.resolve(k))},j=k=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,k),o==null||o(),d.reject(k))},E=()=>new Promise(k=>{var w;o=S=>{(r||p())&&k(S)},(w=t.onPause)==null||w.call(t)}).then(()=>{var k;o=void 0,r||(k=t.onContinue)==null||k.call(t)}),b=()=>{if(r)return;let k;const w=l===0?t.initialPromise:void 0;try{k=w??t.fn()}catch(S){k=Promise.reject(S)}Promise.resolve(k).then(y).catch(S=>{var F;if(r)return;const v=t.retry??(Qn?0:3),N=t.retryDelay??Q2,P=typeof N=="function"?N(l,S):N,T=v===!0||typeof v=="number"&&l<v||typeof v=="function"&&v(l,S);if(a||!T){j(S);return}l++,(F=t.onFail)==null||F.call(t,l,S),U2(P).then(()=>p()?void 0:E()).then(()=>{a?j(S):b()})})};return{promise:d,cancel:m,continue:()=>(o==null||o(),d),cancelRetry:x,continueRetry:h,canStart:g,start:()=>(g()?b():E().then(b),d)}}var G2=t=>setTimeout(t,0);function K2(){let t=[],a=0,l=x=>{x()},r=x=>{x()},o=G2;const d=x=>{a?t.push(x):o(()=>{l(x)})},m=()=>{const x=t;t=[],x.length&&o(()=>{r(()=>{x.forEach(h=>{l(h)})})})};return{batch:x=>{let h;a++;try{h=x()}finally{a--,a||m()}return h},batchCalls:x=>(...h)=>{d(()=>{x(...h)})},schedule:d,setNotifyFunction:x=>{l=x},setBatchNotifyFunction:x=>{r=x},setScheduler:x=>{o=x}}}var Ct=K2(),_n,J0,Fb=(J0=class{constructor(){Ee(this,_n)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bm(this.gcTime)&&ve(this,_n,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qn?1/0:5*60*1e3))}clearGcTimeout(){H(this,_n)&&(clearTimeout(H(this,_n)),ve(this,_n,void 0))}},_n=new WeakMap,J0),ql,zl,Rs,qn,qt,gi,zn,qs,wa,eb,V2=(eb=class extends Fb{constructor(a){super();Ee(this,qs);Ee(this,ql);Ee(this,zl);Ee(this,Rs);Ee(this,qn);Ee(this,qt);Ee(this,gi);Ee(this,zn);ve(this,zn,!1),ve(this,gi,a.defaultOptions),this.setOptions(a.options),this.observers=[],ve(this,qn,a.client),ve(this,Rs,H(this,qn).getQueryCache()),this.queryKey=a.queryKey,this.queryHash=a.queryHash,ve(this,ql,Y2(this.options)),this.state=a.state??H(this,ql),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var a;return(a=H(this,qt))==null?void 0:a.promise}setOptions(a){this.options={...H(this,gi),...a},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Rs).remove(this)}setData(a,l){const r=Qm(this.state.data,a,this.options);return ze(this,qs,wa).call(this,{data:r,type:"success",dataUpdatedAt:l==null?void 0:l.updatedAt,manual:l==null?void 0:l.manual}),r}setState(a,l){ze(this,qs,wa).call(this,{type:"setState",state:a,setStateOptions:l})}cancel(a){var r,o;const l=(r=H(this,qt))==null?void 0:r.promise;return(o=H(this,qt))==null||o.cancel(a),l?l.then(Gt).catch(Gt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,ql))}isActive(){return this.observers.some(a=>Us(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>un(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!Ab(this.state.dataUpdatedAt,a)}onFocus(){var l;const a=this.observers.find(r=>r.shouldFetchOnWindowFocus());a==null||a.refetch({cancelRefetch:!1}),(l=H(this,qt))==null||l.continue()}onOnline(){var l;const a=this.observers.find(r=>r.shouldFetchOnReconnect());a==null||a.refetch({cancelRefetch:!1}),(l=H(this,qt))==null||l.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),H(this,Rs).notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(l=>l!==a),this.observers.length||(H(this,qt)&&(H(this,zn)?H(this,qt).cancel({revert:!0}):H(this,qt).cancelRetry()),this.scheduleGc()),H(this,Rs).notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ze(this,qs,wa).call(this,{type:"invalidate"})}fetch(a,l){var p,g,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(l!=null&&l.cancelRefetch))this.cancel({silent:!0});else if(H(this,qt))return H(this,qt).continueRetry(),H(this,qt).promise}if(a&&this.setOptions(a),!this.options.queryFn){const j=this.observers.find(E=>E.options.queryFn);j&&this.setOptions(j.options)}const r=new AbortController,o=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(ve(this,zn,!0),r.signal)})},d=()=>{const j=Rb(this.options,l),b=(()=>{const k={client:H(this,qn),queryKey:this.queryKey,meta:this.meta};return o(k),k})();return ve(this,zn,!1),this.options.persister?this.options.persister(j,b,this):j(b)},x=(()=>{const j={fetchOptions:l,options:this.options,queryKey:this.queryKey,client:H(this,qn),state:this.state,fetchFn:d};return o(j),j})();(p=this.options.behavior)==null||p.onFetch(x,this),ve(this,zl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=x.fetchOptions)==null?void 0:g.meta))&&ze(this,qs,wa).call(this,{type:"fetch",meta:(y=x.fetchOptions)==null?void 0:y.meta});const h=j=>{var E,b,k,w;Nm(j)&&j.silent||ze(this,qs,wa).call(this,{type:"error",error:j}),Nm(j)||((b=(E=H(this,Rs).config).onError)==null||b.call(E,j,this),(w=(k=H(this,Rs).config).onSettled)==null||w.call(k,this.state.data,j,this)),this.scheduleGc()};return ve(this,qt,Lb({initialPromise:l==null?void 0:l.initialPromise,fn:x.fetchFn,abort:r.abort.bind(r),onSuccess:j=>{var E,b,k,w;if(j===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(j)}catch(S){h(S);return}(b=(E=H(this,Rs).config).onSuccess)==null||b.call(E,j,this),(w=(k=H(this,Rs).config).onSettled)==null||w.call(k,j,this.state.error,this),this.scheduleGc()},onError:h,onFail:(j,E)=>{ze(this,qs,wa).call(this,{type:"failed",failureCount:j,error:E})},onPause:()=>{ze(this,qs,wa).call(this,{type:"pause"})},onContinue:()=>{ze(this,qs,wa).call(this,{type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay,networkMode:x.options.networkMode,canRun:()=>!0})),H(this,qt).start()}},ql=new WeakMap,zl=new WeakMap,Rs=new WeakMap,qn=new WeakMap,qt=new WeakMap,gi=new WeakMap,zn=new WeakMap,qs=new WeakSet,wa=function(a){const l=r=>{switch(a.type){case"failed":return{...r,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Db(r.data,this.options),fetchMeta:a.meta??null};case"success":return{...r,data:a.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=a.error;return Nm(o)&&o.revert&&H(this,zl)?{...H(this,zl),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...a.state}}};this.state=l(this.state),Ct.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),H(this,Rs).notify({query:this,type:"updated",action:a})})},eb);function Db(t,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pb(a.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Y2(t){const a=typeof t.initialData=="function"?t.initialData():t.initialData,l=a!==void 0,r=l?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:l?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}var Js,tb,W2=(tb=class extends Zl{constructor(a={}){super();Ee(this,Js);this.config=a,ve(this,Js,new Map)}build(a,l,r){const o=l.queryKey,d=l.queryHash??Nf(o,l);let m=this.get(d);return m||(m=new V2({client:a,queryKey:o,queryHash:d,options:a.defaultQueryOptions(l),state:r,defaultOptions:a.getQueryDefaults(o)}),this.add(m)),m}add(a){H(this,Js).has(a.queryHash)||(H(this,Js).set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const l=H(this,Js).get(a.queryHash);l&&(a.destroy(),l===a&&H(this,Js).delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){Ct.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return H(this,Js).get(a)}getAll(){return[...H(this,Js).values()]}find(a){const l={exact:!0,...a};return this.getAll().find(r=>Wg(l,r))}findAll(a={}){const l=this.getAll();return Object.keys(a).length>0?l.filter(r=>Wg(a,r)):l}notify(a){Ct.batch(()=>{this.listeners.forEach(l=>{l(a)})})}onFocus(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},Js=new WeakMap,tb),ea,Ht,Un,ta,Ja,sb,X2=(sb=class extends Fb{constructor(a){super();Ee(this,ta);Ee(this,ea);Ee(this,Ht);Ee(this,Un);this.mutationId=a.mutationId,ve(this,Ht,a.mutationCache),ve(this,ea,[]),this.state=a.state||_b(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){H(this,ea).includes(a)||(H(this,ea).push(a),this.clearGcTimeout(),H(this,Ht).notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){ve(this,ea,H(this,ea).filter(l=>l!==a)),this.scheduleGc(),H(this,Ht).notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){H(this,ea).length||(this.state.status==="pending"?this.scheduleGc():H(this,Ht).remove(this))}continue(){var a;return((a=H(this,Un))==null?void 0:a.continue())??this.execute(this.state.variables)}async execute(a){var d,m,x,h,p,g,y,j,E,b,k,w,S,v,N,P,T,F,z,q;const l=()=>{ze(this,ta,Ja).call(this,{type:"continue"})};ve(this,Un,Lb({fn:()=>this.options.mutationFn?this.options.mutationFn(a):Promise.reject(new Error("No mutationFn found")),onFail:(I,de)=>{ze(this,ta,Ja).call(this,{type:"failed",failureCount:I,error:de})},onPause:()=>{ze(this,ta,Ja).call(this,{type:"pause"})},onContinue:l,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,Ht).canRun(this)}));const r=this.state.status==="pending",o=!H(this,Un).canStart();try{if(r)l();else{ze(this,ta,Ja).call(this,{type:"pending",variables:a,isPaused:o}),await((m=(d=H(this,Ht).config).onMutate)==null?void 0:m.call(d,a,this));const de=await((h=(x=this.options).onMutate)==null?void 0:h.call(x,a));de!==this.state.context&&ze(this,ta,Ja).call(this,{type:"pending",context:de,variables:a,isPaused:o})}const I=await H(this,Un).start();return await((g=(p=H(this,Ht).config).onSuccess)==null?void 0:g.call(p,I,a,this.state.context,this)),await((j=(y=this.options).onSuccess)==null?void 0:j.call(y,I,a,this.state.context)),await((b=(E=H(this,Ht).config).onSettled)==null?void 0:b.call(E,I,null,this.state.variables,this.state.context,this)),await((w=(k=this.options).onSettled)==null?void 0:w.call(k,I,null,a,this.state.context)),ze(this,ta,Ja).call(this,{type:"success",data:I}),I}catch(I){try{throw await((v=(S=H(this,Ht).config).onError)==null?void 0:v.call(S,I,a,this.state.context,this)),await((P=(N=this.options).onError)==null?void 0:P.call(N,I,a,this.state.context)),await((F=(T=H(this,Ht).config).onSettled)==null?void 0:F.call(T,void 0,I,this.state.variables,this.state.context,this)),await((q=(z=this.options).onSettled)==null?void 0:q.call(z,void 0,I,a,this.state.context)),I}finally{ze(this,ta,Ja).call(this,{type:"error",error:I})}}finally{H(this,Ht).runNext(this)}}},ea=new WeakMap,Ht=new WeakMap,Un=new WeakMap,ta=new WeakSet,Ja=function(a){const l=r=>{switch(a.type){case"failed":return{...r,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...r,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:a.error,failureCount:r.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=l(this.state),Ct.batch(()=>{H(this,ea).forEach(r=>{r.onMutationUpdate(a)}),H(this,Ht).notify({mutation:this,type:"updated",action:a})})},sb);function _b(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var va,zs,bi,ab,Z2=(ab=class extends Zl{constructor(a={}){super();Ee(this,va);Ee(this,zs);Ee(this,bi);this.config=a,ve(this,va,new Set),ve(this,zs,new Map),ve(this,bi,0)}build(a,l,r){const o=new X2({mutationCache:this,mutationId:++Qo(this,bi)._,options:a.defaultMutationOptions(l),state:r});return this.add(o),o}add(a){H(this,va).add(a);const l=Vo(a);if(typeof l=="string"){const r=H(this,zs).get(l);r?r.push(a):H(this,zs).set(l,[a])}this.notify({type:"added",mutation:a})}remove(a){if(H(this,va).delete(a)){const l=Vo(a);if(typeof l=="string"){const r=H(this,zs).get(l);if(r)if(r.length>1){const o=r.indexOf(a);o!==-1&&r.splice(o,1)}else r[0]===a&&H(this,zs).delete(l)}}this.notify({type:"removed",mutation:a})}canRun(a){const l=Vo(a);if(typeof l=="string"){const r=H(this,zs).get(l),o=r==null?void 0:r.find(d=>d.state.status==="pending");return!o||o===a}else return!0}runNext(a){var r;const l=Vo(a);if(typeof l=="string"){const o=(r=H(this,zs).get(l))==null?void 0:r.find(d=>d!==a&&d.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ct.batch(()=>{H(this,va).forEach(a=>{this.notify({type:"removed",mutation:a})}),H(this,va).clear(),H(this,zs).clear()})}getAll(){return Array.from(H(this,va))}find(a){const l={exact:!0,...a};return this.getAll().find(r=>Xg(l,r))}findAll(a={}){return this.getAll().filter(l=>Xg(a,l))}notify(a){Ct.batch(()=>{this.listeners.forEach(l=>{l(a)})})}resumePausedMutations(){const a=this.getAll().filter(l=>l.state.isPaused);return Ct.batch(()=>Promise.all(a.map(l=>l.continue().catch(Gt))))}},va=new WeakMap,zs=new WeakMap,bi=new WeakMap,ab);function Vo(t){var a;return(a=t.options.scope)==null?void 0:a.id}function e0(t){return{onFetch:(a,l)=>{var g,y,j,E,b;const r=a.options,o=(j=(y=(g=a.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:j.direction,d=((E=a.state.data)==null?void 0:E.pages)||[],m=((b=a.state.data)==null?void 0:b.pageParams)||[];let x={pages:[],pageParams:[]},h=0;const p=async()=>{let k=!1;const w=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(a.signal.aborted?k=!0:a.signal.addEventListener("abort",()=>{k=!0}),a.signal)})},S=Rb(a.options,a.fetchOptions),v=async(N,P,T)=>{if(k)return Promise.reject();if(P==null&&N.pages.length)return Promise.resolve(N);const z=(()=>{const Q={client:a.client,queryKey:a.queryKey,pageParam:P,direction:T?"backward":"forward",meta:a.options.meta};return w(Q),Q})(),q=await S(z),{maxPages:I}=a.options,de=T?I2:$2;return{pages:de(N.pages,q,I),pageParams:de(N.pageParams,P,I)}};if(o&&d.length){const N=o==="backward",P=N?J2:t0,T={pages:d,pageParams:m},F=P(r,T);x=await v(T,F,N)}else{const N=t??d.length;do{const P=h===0?m[0]??r.initialPageParam:t0(r,x);if(h>0&&P==null)break;x=await v(x,P),h++}while(h<N)}return x};a.options.persister?a.fetchFn=()=>{var k,w;return(w=(k=a.options).persister)==null?void 0:w.call(k,p,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},l)}:a.fetchFn=p}}}function t0(t,{pages:a,pageParams:l}){const r=a.length-1;return a.length>0?t.getNextPageParam(a[r],a,l[r],l):void 0}function J2(t,{pages:a,pageParams:l}){var r;return a.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,a[0],a,l[0],l):void 0}var xt,sn,an,Ul,$l,nn,Il,Bl,nb,eS=(nb=class{constructor(t={}){Ee(this,xt);Ee(this,sn);Ee(this,an);Ee(this,Ul);Ee(this,$l);Ee(this,nn);Ee(this,Il);Ee(this,Bl);ve(this,xt,t.queryCache||new W2),ve(this,sn,t.mutationCache||new Z2),ve(this,an,t.defaultOptions||{}),ve(this,Ul,new Map),ve(this,$l,new Map),ve(this,nn,0)}mount(){Qo(this,nn)._++,H(this,nn)===1&&(ve(this,Il,Cf.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,xt).onFocus())})),ve(this,Bl,oc.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,xt).onOnline())})))}unmount(){var t,a;Qo(this,nn)._--,H(this,nn)===0&&((t=H(this,Il))==null||t.call(this),ve(this,Il,void 0),(a=H(this,Bl))==null||a.call(this),ve(this,Bl,void 0))}isFetching(t){return H(this,xt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,sn).findAll({...t,status:"pending"}).length}getQueryData(t){var l;const a=this.defaultQueryOptions({queryKey:t});return(l=H(this,xt).get(a.queryHash))==null?void 0:l.state.data}ensureQueryData(t){const a=this.defaultQueryOptions(t),l=H(this,xt).build(this,a),r=l.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&l.isStaleByTime(un(a.staleTime,l))&&this.prefetchQuery(a),Promise.resolve(r))}getQueriesData(t){return H(this,xt).findAll(t).map(({queryKey:a,state:l})=>{const r=l.data;return[a,r]})}setQueryData(t,a,l){const r=this.defaultQueryOptions({queryKey:t}),o=H(this,xt).get(r.queryHash),d=o==null?void 0:o.state.data,m=z2(a,d);if(m!==void 0)return H(this,xt).build(this,r).setData(m,{...l,manual:!0})}setQueriesData(t,a,l){return Ct.batch(()=>H(this,xt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,a,l)]))}getQueryState(t){var l;const a=this.defaultQueryOptions({queryKey:t});return(l=H(this,xt).get(a.queryHash))==null?void 0:l.state}removeQueries(t){const a=H(this,xt);Ct.batch(()=>{a.findAll(t).forEach(l=>{a.remove(l)})})}resetQueries(t,a){const l=H(this,xt);return Ct.batch(()=>(l.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},a)))}cancelQueries(t,a={}){const l={revert:!0,...a},r=Ct.batch(()=>H(this,xt).findAll(t).map(o=>o.cancel(l)));return Promise.all(r).then(Gt).catch(Gt)}invalidateQueries(t,a={}){return Ct.batch(()=>(H(this,xt).findAll(t).forEach(l=>{l.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},a)))}refetchQueries(t,a={}){const l={...a,cancelRefetch:a.cancelRefetch??!0},r=Ct.batch(()=>H(this,xt).findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,l);return l.throwOnError||(d=d.catch(Gt)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(r).then(Gt)}fetchQuery(t){const a=this.defaultQueryOptions(t);a.retry===void 0&&(a.retry=!1);const l=H(this,xt).build(this,a);return l.isStaleByTime(un(a.staleTime,l))?l.fetch(a):Promise.resolve(l.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Gt).catch(Gt)}fetchInfiniteQuery(t){return t.behavior=e0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Gt).catch(Gt)}ensureInfiniteQueryData(t){return t.behavior=e0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oc.isOnline()?H(this,sn).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,xt)}getMutationCache(){return H(this,sn)}getDefaultOptions(){return H(this,an)}setDefaultOptions(t){ve(this,an,t)}setQueryDefaults(t,a){H(this,Ul).set(Gn(t),{queryKey:t,defaultOptions:a})}getQueryDefaults(t){const a=[...H(this,Ul).values()],l={};return a.forEach(r=>{fi(t,r.queryKey)&&Object.assign(l,r.defaultOptions)}),l}setMutationDefaults(t,a){H(this,$l).set(Gn(t),{mutationKey:t,defaultOptions:a})}getMutationDefaults(t){const a=[...H(this,$l).values()],l={};return a.forEach(r=>{fi(t,r.mutationKey)&&Object.assign(l,r.defaultOptions)}),l}defaultQueryOptions(t){if(t._defaulted)return t;const a={...H(this,an).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return a.queryHash||(a.queryHash=Nf(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Sf&&(a.enabled=!1),a}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,an).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,xt).clear(),H(this,sn).clear()}},xt=new WeakMap,sn=new WeakMap,an=new WeakMap,Ul=new WeakMap,$l=new WeakMap,nn=new WeakMap,Il=new WeakMap,Bl=new WeakMap,nb),es,He,yi,Qt,$n,Hl,ln,rn,wi,Ql,Gl,In,Bn,on,Kl,tt,oi,Km,Vm,Ym,Wm,Xm,Zm,Jm,qb,lb,tS=(lb=class extends Zl{constructor(a,l){super();Ee(this,tt);Ee(this,es);Ee(this,He);Ee(this,yi);Ee(this,Qt);Ee(this,$n);Ee(this,Hl);Ee(this,ln);Ee(this,rn);Ee(this,wi);Ee(this,Ql);Ee(this,Gl);Ee(this,In);Ee(this,Bn);Ee(this,on);Ee(this,Kl,new Set);this.options=l,ve(this,es,a),ve(this,rn,null),ve(this,ln,Gm()),this.options.experimental_prefetchInRender||H(this,ln).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(l)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,He).addObserver(this),s0(H(this,He),this.options)?ze(this,tt,oi).call(this):this.updateResult(),ze(this,tt,Wm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ef(H(this,He),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ef(H(this,He),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ze(this,tt,Xm).call(this),ze(this,tt,Zm).call(this),H(this,He).removeObserver(this)}setOptions(a){const l=this.options,r=H(this,He);if(this.options=H(this,es).defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Us(this.options.enabled,H(this,He))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ze(this,tt,Jm).call(this),H(this,He).setOptions(this.options),l._defaulted&&!ic(this.options,l)&&H(this,es).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,He),observer:this});const o=this.hasListeners();o&&a0(H(this,He),r,this.options,l)&&ze(this,tt,oi).call(this),this.updateResult(),o&&(H(this,He)!==r||Us(this.options.enabled,H(this,He))!==Us(l.enabled,H(this,He))||un(this.options.staleTime,H(this,He))!==un(l.staleTime,H(this,He)))&&ze(this,tt,Km).call(this);const d=ze(this,tt,Vm).call(this);o&&(H(this,He)!==r||Us(this.options.enabled,H(this,He))!==Us(l.enabled,H(this,He))||d!==H(this,on))&&ze(this,tt,Ym).call(this,d)}getOptimisticResult(a){const l=H(this,es).getQueryCache().build(H(this,es),a),r=this.createResult(l,a);return aS(this,r)&&(ve(this,Qt,r),ve(this,Hl,this.options),ve(this,$n,H(this,He).state)),r}getCurrentResult(){return H(this,Qt)}trackResult(a,l){return new Proxy(a,{get:(r,o)=>(this.trackProp(o),l==null||l(o),Reflect.get(r,o))})}trackProp(a){H(this,Kl).add(a)}getCurrentQuery(){return H(this,He)}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const l=H(this,es).defaultQueryOptions(a),r=H(this,es).getQueryCache().build(H(this,es),l);return r.fetch().then(()=>this.createResult(r,l))}fetch(a){return ze(this,tt,oi).call(this,{...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,Qt)))}createResult(a,l){var I;const r=H(this,He),o=this.options,d=H(this,Qt),m=H(this,$n),x=H(this,Hl),p=a!==r?a.state:H(this,yi),{state:g}=a;let y={...g},j=!1,E;if(l._optimisticResults){const de=this.hasListeners(),Q=!de&&s0(a,l),B=de&&a0(a,r,l,o);(Q||B)&&(y={...y,...Db(g.data,a.options)}),l._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:b,errorUpdatedAt:k,status:w}=y;E=y.data;let S=!1;if(l.placeholderData!==void 0&&E===void 0&&w==="pending"){let de;d!=null&&d.isPlaceholderData&&l.placeholderData===(x==null?void 0:x.placeholderData)?(de=d.data,S=!0):de=typeof l.placeholderData=="function"?l.placeholderData((I=H(this,Gl))==null?void 0:I.state.data,H(this,Gl)):l.placeholderData,de!==void 0&&(w="success",E=Qm(d==null?void 0:d.data,de,l),j=!0)}if(l.select&&E!==void 0&&!S)if(d&&E===(m==null?void 0:m.data)&&l.select===H(this,wi))E=H(this,Ql);else try{ve(this,wi,l.select),E=l.select(E),E=Qm(d==null?void 0:d.data,E,l),ve(this,Ql,E),ve(this,rn,null)}catch(de){ve(this,rn,de)}H(this,rn)&&(b=H(this,rn),E=H(this,Ql),k=Date.now(),w="error");const v=y.fetchStatus==="fetching",N=w==="pending",P=w==="error",T=N&&v,F=E!==void 0,q={status:w,fetchStatus:y.fetchStatus,isPending:N,isSuccess:w==="success",isError:P,isInitialLoading:T,isLoading:T,data:E,dataUpdatedAt:y.dataUpdatedAt,error:b,errorUpdatedAt:k,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:v,isRefetching:v&&!N,isLoadingError:P&&!F,isPaused:y.fetchStatus==="paused",isPlaceholderData:j,isRefetchError:P&&F,isStale:kf(a,l),refetch:this.refetch,promise:H(this,ln)};if(this.options.experimental_prefetchInRender){const de=ee=>{q.status==="error"?ee.reject(q.error):q.data!==void 0&&ee.resolve(q.data)},Q=()=>{const ee=ve(this,ln,q.promise=Gm());de(ee)},B=H(this,ln);switch(B.status){case"pending":a.queryHash===r.queryHash&&de(B);break;case"fulfilled":(q.status==="error"||q.data!==B.value)&&Q();break;case"rejected":(q.status!=="error"||q.error!==B.reason)&&Q();break}}return q}updateResult(){const a=H(this,Qt),l=this.createResult(H(this,He),this.options);if(ve(this,$n,H(this,He).state),ve(this,Hl,this.options),H(this,$n).data!==void 0&&ve(this,Gl,H(this,He)),ic(l,a))return;ve(this,Qt,l);const r=()=>{if(!a)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!H(this,Kl).size)return!0;const m=new Set(d??H(this,Kl));return this.options.throwOnError&&m.add("error"),Object.keys(H(this,Qt)).some(x=>{const h=x;return H(this,Qt)[h]!==a[h]&&m.has(h)})};ze(this,tt,qb).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ze(this,tt,Wm).call(this)}},es=new WeakMap,He=new WeakMap,yi=new WeakMap,Qt=new WeakMap,$n=new WeakMap,Hl=new WeakMap,ln=new WeakMap,rn=new WeakMap,wi=new WeakMap,Ql=new WeakMap,Gl=new WeakMap,In=new WeakMap,Bn=new WeakMap,on=new WeakMap,Kl=new WeakMap,tt=new WeakSet,oi=function(a){ze(this,tt,Jm).call(this);let l=H(this,He).fetch(this.options,a);return a!=null&&a.throwOnError||(l=l.catch(Gt)),l},Km=function(){ze(this,tt,Xm).call(this);const a=un(this.options.staleTime,H(this,He));if(Qn||H(this,Qt).isStale||!Bm(a))return;const r=Ab(H(this,Qt).dataUpdatedAt,a)+1;ve(this,In,setTimeout(()=>{H(this,Qt).isStale||this.updateResult()},r))},Vm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,He)):this.options.refetchInterval)??!1},Ym=function(a){ze(this,tt,Zm).call(this),ve(this,on,a),!(Qn||Us(this.options.enabled,H(this,He))===!1||!Bm(H(this,on))||H(this,on)===0)&&ve(this,Bn,setInterval(()=>{(this.options.refetchIntervalInBackground||Cf.isFocused())&&ze(this,tt,oi).call(this)},H(this,on)))},Wm=function(){ze(this,tt,Km).call(this),ze(this,tt,Ym).call(this,ze(this,tt,Vm).call(this))},Xm=function(){H(this,In)&&(clearTimeout(H(this,In)),ve(this,In,void 0))},Zm=function(){H(this,Bn)&&(clearInterval(H(this,Bn)),ve(this,Bn,void 0))},Jm=function(){const a=H(this,es).getQueryCache().build(H(this,es),this.options);if(a===H(this,He))return;const l=H(this,He);ve(this,He,a),ve(this,yi,a.state),this.hasListeners()&&(l==null||l.removeObserver(this),a.addObserver(this))},qb=function(a){Ct.batch(()=>{a.listeners&&this.listeners.forEach(l=>{l(H(this,Qt))}),H(this,es).getQueryCache().notify({query:H(this,He),type:"observerResultsUpdated"})})},lb);function sS(t,a){return Us(a.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&a.retryOnMount===!1)}function s0(t,a){return sS(t,a)||t.state.data!==void 0&&ef(t,a,a.refetchOnMount)}function ef(t,a,l){if(Us(a.enabled,t)!==!1&&un(a.staleTime,t)!=="static"){const r=typeof l=="function"?l(t):l;return r==="always"||r!==!1&&kf(t,a)}return!1}function a0(t,a,l,r){return(t!==a||Us(r.enabled,t)===!1)&&(!l.suspense||t.state.status!=="error")&&kf(t,l)}function kf(t,a){return Us(a.enabled,t)!==!1&&t.isStaleByTime(un(a.staleTime,t))}function aS(t,a){return!ic(t.getCurrentResult(),a)}var cn,dn,ts,ja,Ca,tc,tf,rb,nS=(rb=class extends Zl{constructor(l,r){super();Ee(this,Ca);Ee(this,cn);Ee(this,dn);Ee(this,ts);Ee(this,ja);ve(this,cn,l),this.setOptions(r),this.bindMethods(),ze(this,Ca,tc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(l){var o;const r=this.options;this.options=H(this,cn).defaultMutationOptions(l),ic(this.options,r)||H(this,cn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:H(this,ts),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Gn(r.mutationKey)!==Gn(this.options.mutationKey)?this.reset():((o=H(this,ts))==null?void 0:o.state.status)==="pending"&&H(this,ts).setOptions(this.options)}onUnsubscribe(){var l;this.hasListeners()||(l=H(this,ts))==null||l.removeObserver(this)}onMutationUpdate(l){ze(this,Ca,tc).call(this),ze(this,Ca,tf).call(this,l)}getCurrentResult(){return H(this,dn)}reset(){var l;(l=H(this,ts))==null||l.removeObserver(this),ve(this,ts,void 0),ze(this,Ca,tc).call(this),ze(this,Ca,tf).call(this)}mutate(l,r){var o;return ve(this,ja,r),(o=H(this,ts))==null||o.removeObserver(this),ve(this,ts,H(this,cn).getMutationCache().build(H(this,cn),this.options)),H(this,ts).addObserver(this),H(this,ts).execute(l)}},cn=new WeakMap,dn=new WeakMap,ts=new WeakMap,ja=new WeakMap,Ca=new WeakSet,tc=function(){var r;const l=((r=H(this,ts))==null?void 0:r.state)??_b();ve(this,dn,{...l,isPending:l.status==="pending",isSuccess:l.status==="success",isError:l.status==="error",isIdle:l.status==="idle",mutate:this.mutate,reset:this.reset})},tf=function(l){Ct.batch(()=>{var r,o,d,m,x,h,p,g;if(H(this,ja)&&this.hasListeners()){const y=H(this,dn).variables,j=H(this,dn).context;(l==null?void 0:l.type)==="success"?((o=(r=H(this,ja)).onSuccess)==null||o.call(r,l.data,y,j),(m=(d=H(this,ja)).onSettled)==null||m.call(d,l.data,null,y,j)):(l==null?void 0:l.type)==="error"&&((h=(x=H(this,ja)).onError)==null||h.call(x,l.error,y,j),(g=(p=H(this,ja)).onSettled)==null||g.call(p,void 0,l.error,y,j))}this.listeners.forEach(y=>{y(H(this,dn))})})},rb),zb=A.createContext(void 0),Ce=t=>{const a=A.useContext(zb);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},lS=({client:t,children:a})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(zb.Provider,{value:t,children:a})),Ub=A.createContext(!1),rS=()=>A.useContext(Ub);Ub.Provider;function iS(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var oS=A.createContext(iS()),cS=()=>A.useContext(oS),dS=(t,a)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(a.isReset()||(t.retryOnMount=!1))},uS=t=>{A.useEffect(()=>{t.clearReset()},[t])},mS=({result:t,errorResetBoundary:a,throwOnError:l,query:r,suspense:o})=>t.isError&&!a.isReset()&&!t.isFetching&&r&&(o&&t.data===void 0||Tb(l,[t.error,r])),fS=t=>{if(t.suspense){const a=r=>r==="static"?r:Math.max(r??1e3,1e3),l=t.staleTime;t.staleTime=typeof l=="function"?(...r)=>a(l(...r)):a(l),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},hS=(t,a)=>t.isLoading&&t.isFetching&&!a,xS=(t,a)=>(t==null?void 0:t.suspense)&&a.isPending,n0=(t,a,l)=>a.fetchOptimistic(t).catch(()=>{l.clearReset()});function pS(t,a,l){var y,j,E,b,k;const r=rS(),o=cS(),d=Ce(),m=d.defaultQueryOptions(t);(j=(y=d.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||j.call(y,m),m._optimisticResults=r?"isRestoring":"optimistic",fS(m),dS(m,o),uS(o);const x=!d.getQueryCache().get(m.queryHash),[h]=A.useState(()=>new a(d,m)),p=h.getOptimisticResult(m),g=!r&&t.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(w=>{const S=g?h.subscribe(Ct.batchCalls(w)):Gt;return h.updateResult(),S},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),A.useEffect(()=>{h.setOptions(m)},[m,h]),xS(m,p))throw n0(m,h,o);if(mS({result:p,errorResetBoundary:o,throwOnError:m.throwOnError,query:d.getQueryCache().get(m.queryHash),suspense:m.suspense}))throw p.error;if((b=(E=d.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||b.call(E,m,p),m.experimental_prefetchInRender&&!Qn&&hS(p,r)){const w=x?n0(m,h,o):(k=d.getQueryCache().get(m.queryHash))==null?void 0:k.promise;w==null||w.catch(Gt).finally(()=>{h.updateResult()})}return m.notifyOnChangeProps?p:h.trackResult(p)}function Fe(t,a){return pS(t,tS)}function ie(t,a){const l=Ce(),[r]=A.useState(()=>new nS(l,t));A.useEffect(()=>{r.setOptions(t)},[r,t]);const o=A.useSyncExternalStore(A.useCallback(m=>r.subscribe(Ct.batchCalls(m)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d=A.useCallback((m,x)=>{r.mutate(m,x).catch(Gt)},[r]);if(o.error&&Tb(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}const ke=new eS;function $b(t,a){return function(){return t.apply(a,arguments)}}const{toString:gS}=Object.prototype,{getPrototypeOf:Ef}=Object,{iterator:Rc,toStringTag:Ib}=Symbol,Tc=(t=>a=>{const l=gS.call(a);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),Hs=t=>(t=t.toLowerCase(),a=>Tc(a)===t),Pc=t=>a=>typeof a===t,{isArray:Jl}=Array,hi=Pc("undefined");function bS(t){return t!==null&&!hi(t)&&t.constructor!==null&&!hi(t.constructor)&&ss(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bb=Hs("ArrayBuffer");function yS(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&Bb(t.buffer),a}const wS=Pc("string"),ss=Pc("function"),Hb=Pc("number"),Mc=t=>t!==null&&typeof t=="object",vS=t=>t===!0||t===!1,sc=t=>{if(Tc(t)!=="object")return!1;const a=Ef(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Ib in t)&&!(Rc in t)},jS=Hs("Date"),NS=Hs("File"),SS=Hs("Blob"),CS=Hs("FileList"),kS=t=>Mc(t)&&ss(t.pipe),ES=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||ss(t.append)&&((a=Tc(t))==="formdata"||a==="object"&&ss(t.toString)&&t.toString()==="[object FormData]"))},AS=Hs("URLSearchParams"),[OS,RS,TS,PS]=["ReadableStream","Request","Response","Headers"].map(Hs),MS=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ni(t,a,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),Jl(t))for(r=0,o=t.length;r<o;r++)a.call(null,t[r],r,t);else{const d=l?Object.getOwnPropertyNames(t):Object.keys(t),m=d.length;let x;for(r=0;r<m;r++)x=d[r],a.call(null,t[x],x,t)}}function Qb(t,a){a=a.toLowerCase();const l=Object.keys(t);let r=l.length,o;for(;r-- >0;)if(o=l[r],a===o.toLowerCase())return o;return null}const Fn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gb=t=>!hi(t)&&t!==Fn;function sf(){const{caseless:t}=Gb(this)&&this||{},a={},l=(r,o)=>{const d=t&&Qb(a,o)||o;sc(a[d])&&sc(r)?a[d]=sf(a[d],r):sc(r)?a[d]=sf({},r):Jl(r)?a[d]=r.slice():a[d]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Ni(arguments[r],l);return a}const LS=(t,a,l,{allOwnKeys:r}={})=>(Ni(a,(o,d)=>{l&&ss(o)?t[d]=$b(o,l):t[d]=o},{allOwnKeys:r}),t),FS=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),DS=(t,a,l,r)=>{t.prototype=Object.create(a.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),l&&Object.assign(t.prototype,l)},_S=(t,a,l,r)=>{let o,d,m;const x={};if(a=a||{},t==null)return a;do{for(o=Object.getOwnPropertyNames(t),d=o.length;d-- >0;)m=o[d],(!r||r(m,t,a))&&!x[m]&&(a[m]=t[m],x[m]=!0);t=l!==!1&&Ef(t)}while(t&&(!l||l(t,a))&&t!==Object.prototype);return a},qS=(t,a,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=a.length;const r=t.indexOf(a,l);return r!==-1&&r===l},zS=t=>{if(!t)return null;if(Jl(t))return t;let a=t.length;if(!Hb(a))return null;const l=new Array(a);for(;a-- >0;)l[a]=t[a];return l},US=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Ef(Uint8Array)),$S=(t,a)=>{const r=(t&&t[Rc]).call(t);let o;for(;(o=r.next())&&!o.done;){const d=o.value;a.call(t,d[0],d[1])}},IS=(t,a)=>{let l;const r=[];for(;(l=t.exec(a))!==null;)r.push(l);return r},BS=Hs("HTMLFormElement"),HS=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,r,o){return r.toUpperCase()+o}),l0=(({hasOwnProperty:t})=>(a,l)=>t.call(a,l))(Object.prototype),QS=Hs("RegExp"),Kb=(t,a)=>{const l=Object.getOwnPropertyDescriptors(t),r={};Ni(l,(o,d)=>{let m;(m=a(o,d,t))!==!1&&(r[d]=m||o)}),Object.defineProperties(t,r)},GS=t=>{Kb(t,(a,l)=>{if(ss(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const r=t[l];if(ss(r)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},KS=(t,a)=>{const l={},r=o=>{o.forEach(d=>{l[d]=!0})};return Jl(t)?r(t):r(String(t).split(a)),l},VS=()=>{},YS=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function WS(t){return!!(t&&ss(t.append)&&t[Ib]==="FormData"&&t[Rc])}const XS=t=>{const a=new Array(10),l=(r,o)=>{if(Mc(r)){if(a.indexOf(r)>=0)return;if(!("toJSON"in r)){a[o]=r;const d=Jl(r)?[]:{};return Ni(r,(m,x)=>{const h=l(m,o+1);!hi(h)&&(d[x]=h)}),a[o]=void 0,d}}return r};return l(t,0)},ZS=Hs("AsyncFunction"),JS=t=>t&&(Mc(t)||ss(t))&&ss(t.then)&&ss(t.catch),Vb=((t,a)=>t?setImmediate:a?((l,r)=>(Fn.addEventListener("message",({source:o,data:d})=>{o===Fn&&d===l&&r.length&&r.shift()()},!1),o=>{r.push(o),Fn.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",ss(Fn.postMessage)),eC=typeof queueMicrotask<"u"?queueMicrotask.bind(Fn):typeof process<"u"&&process.nextTick||Vb,tC=t=>t!=null&&ss(t[Rc]),ue={isArray:Jl,isArrayBuffer:Bb,isBuffer:bS,isFormData:ES,isArrayBufferView:yS,isString:wS,isNumber:Hb,isBoolean:vS,isObject:Mc,isPlainObject:sc,isReadableStream:OS,isRequest:RS,isResponse:TS,isHeaders:PS,isUndefined:hi,isDate:jS,isFile:NS,isBlob:SS,isRegExp:QS,isFunction:ss,isStream:kS,isURLSearchParams:AS,isTypedArray:US,isFileList:CS,forEach:Ni,merge:sf,extend:LS,trim:MS,stripBOM:FS,inherits:DS,toFlatObject:_S,kindOf:Tc,kindOfTest:Hs,endsWith:qS,toArray:zS,forEachEntry:$S,matchAll:IS,isHTMLForm:BS,hasOwnProperty:l0,hasOwnProp:l0,reduceDescriptors:Kb,freezeMethods:GS,toObjectSet:KS,toCamelCase:HS,noop:VS,toFiniteNumber:YS,findKey:Qb,global:Fn,isContextDefined:Gb,isSpecCompliantForm:WS,toJSONObject:XS,isAsyncFn:ZS,isThenable:JS,setImmediate:Vb,asap:eC,isIterable:tC};function De(t,a,l,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),l&&(this.config=l),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}ue.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const Yb=De.prototype,Wb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Wb[t]={value:t}});Object.defineProperties(De,Wb);Object.defineProperty(Yb,"isAxiosError",{value:!0});De.from=(t,a,l,r,o,d)=>{const m=Object.create(Yb);return ue.toFlatObject(t,m,function(h){return h!==Error.prototype},x=>x!=="isAxiosError"),De.call(m,t.message,a,l,r,o),m.cause=t,m.name=t.name,d&&Object.assign(m,d),m};const sC=null;function af(t){return ue.isPlainObject(t)||ue.isArray(t)}function Xb(t){return ue.endsWith(t,"[]")?t.slice(0,-2):t}function r0(t,a,l){return t?t.concat(a).map(function(o,d){return o=Xb(o),!l&&d?"["+o+"]":o}).join(l?".":""):a}function aC(t){return ue.isArray(t)&&!t.some(af)}const nC=ue.toFlatObject(ue,{},null,function(a){return/^is[A-Z]/.test(a)});function Lc(t,a,l){if(!ue.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,l=ue.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,w){return!ue.isUndefined(w[k])});const r=l.metaTokens,o=l.visitor||g,d=l.dots,m=l.indexes,h=(l.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(a);if(!ue.isFunction(o))throw new TypeError("visitor must be a function");function p(b){if(b===null)return"";if(ue.isDate(b))return b.toISOString();if(!h&&ue.isBlob(b))throw new De("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(b)||ue.isTypedArray(b)?h&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function g(b,k,w){let S=b;if(b&&!w&&typeof b=="object"){if(ue.endsWith(k,"{}"))k=r?k:k.slice(0,-2),b=JSON.stringify(b);else if(ue.isArray(b)&&aC(b)||(ue.isFileList(b)||ue.endsWith(k,"[]"))&&(S=ue.toArray(b)))return k=Xb(k),S.forEach(function(N,P){!(ue.isUndefined(N)||N===null)&&a.append(m===!0?r0([k],P,d):m===null?k:k+"[]",p(N))}),!1}return af(b)?!0:(a.append(r0(w,k,d),p(b)),!1)}const y=[],j=Object.assign(nC,{defaultVisitor:g,convertValue:p,isVisitable:af});function E(b,k){if(!ue.isUndefined(b)){if(y.indexOf(b)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(b),ue.forEach(b,function(S,v){(!(ue.isUndefined(S)||S===null)&&o.call(a,S,ue.isString(v)?v.trim():v,k,j))===!0&&E(S,k?k.concat(v):[v])}),y.pop()}}if(!ue.isObject(t))throw new TypeError("data must be an object");return E(t),a}function i0(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return a[r]})}function Af(t,a){this._pairs=[],t&&Lc(t,this,a)}const Zb=Af.prototype;Zb.append=function(a,l){this._pairs.push([a,l])};Zb.toString=function(a){const l=a?function(r){return a.call(this,r,i0)}:i0;return this._pairs.map(function(o){return l(o[0])+"="+l(o[1])},"").join("&")};function lC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jb(t,a,l){if(!a)return t;const r=l&&l.encode||lC;ue.isFunction(l)&&(l={serialize:l});const o=l&&l.serialize;let d;if(o?d=o(a,l):d=ue.isURLSearchParams(a)?a.toString():new Af(a,l).toString(r),d){const m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class o0{constructor(){this.handlers=[]}use(a,l,r){return this.handlers.push({fulfilled:a,rejected:l,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ue.forEach(this.handlers,function(r){r!==null&&a(r)})}}const ey={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rC=typeof URLSearchParams<"u"?URLSearchParams:Af,iC=typeof FormData<"u"?FormData:null,oC=typeof Blob<"u"?Blob:null,cC={isBrowser:!0,classes:{URLSearchParams:rC,FormData:iC,Blob:oC},protocols:["http","https","file","blob","url","data"]},Of=typeof window<"u"&&typeof document<"u",nf=typeof navigator=="object"&&navigator||void 0,dC=Of&&(!nf||["ReactNative","NativeScript","NS"].indexOf(nf.product)<0),uC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mC=Of&&window.location.href||"http://localhost",fC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Of,hasStandardBrowserEnv:dC,hasStandardBrowserWebWorkerEnv:uC,navigator:nf,origin:mC},Symbol.toStringTag,{value:"Module"})),zt={...fC,...cC};function hC(t,a){return Lc(t,new zt.classes.URLSearchParams,Object.assign({visitor:function(l,r,o,d){return zt.isNode&&ue.isBuffer(l)?(this.append(r,l.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},a))}function xC(t){return ue.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function pC(t){const a={},l=Object.keys(t);let r;const o=l.length;let d;for(r=0;r<o;r++)d=l[r],a[d]=t[d];return a}function ty(t){function a(l,r,o,d){let m=l[d++];if(m==="__proto__")return!0;const x=Number.isFinite(+m),h=d>=l.length;return m=!m&&ue.isArray(o)?o.length:m,h?(ue.hasOwnProp(o,m)?o[m]=[o[m],r]:o[m]=r,!x):((!o[m]||!ue.isObject(o[m]))&&(o[m]=[]),a(l,r,o[m],d)&&ue.isArray(o[m])&&(o[m]=pC(o[m])),!x)}if(ue.isFormData(t)&&ue.isFunction(t.entries)){const l={};return ue.forEachEntry(t,(r,o)=>{a(xC(r),o,l,0)}),l}return null}function gC(t,a,l){if(ue.isString(t))try{return(a||JSON.parse)(t),ue.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(l||JSON.stringify)(t)}const Si={transitional:ey,adapter:["xhr","http","fetch"],transformRequest:[function(a,l){const r=l.getContentType()||"",o=r.indexOf("application/json")>-1,d=ue.isObject(a);if(d&&ue.isHTMLForm(a)&&(a=new FormData(a)),ue.isFormData(a))return o?JSON.stringify(ty(a)):a;if(ue.isArrayBuffer(a)||ue.isBuffer(a)||ue.isStream(a)||ue.isFile(a)||ue.isBlob(a)||ue.isReadableStream(a))return a;if(ue.isArrayBufferView(a))return a.buffer;if(ue.isURLSearchParams(a))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let x;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return hC(a,this.formSerializer).toString();if((x=ue.isFileList(a))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Lc(x?{"files[]":a}:a,h&&new h,this.formSerializer)}}return d||o?(l.setContentType("application/json",!1),gC(a)):a}],transformResponse:[function(a){const l=this.transitional||Si.transitional,r=l&&l.forcedJSONParsing,o=this.responseType==="json";if(ue.isResponse(a)||ue.isReadableStream(a))return a;if(a&&ue.isString(a)&&(r&&!this.responseType||o)){const m=!(l&&l.silentJSONParsing)&&o;try{return JSON.parse(a)}catch(x){if(m)throw x.name==="SyntaxError"?De.from(x,De.ERR_BAD_RESPONSE,this,null,this.response):x}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zt.classes.FormData,Blob:zt.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],t=>{Si.headers[t]={}});const bC=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yC=t=>{const a={};let l,r,o;return t&&t.split(`
`).forEach(function(m){o=m.indexOf(":"),l=m.substring(0,o).trim().toLowerCase(),r=m.substring(o+1).trim(),!(!l||a[l]&&bC[l])&&(l==="set-cookie"?a[l]?a[l].push(r):a[l]=[r]:a[l]=a[l]?a[l]+", "+r:r)}),a},c0=Symbol("internals");function ii(t){return t&&String(t).trim().toLowerCase()}function ac(t){return t===!1||t==null?t:ue.isArray(t)?t.map(ac):String(t)}function wC(t){const a=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=l.exec(t);)a[r[1]]=r[2];return a}const vC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Sm(t,a,l,r,o){if(ue.isFunction(r))return r.call(this,a,l);if(o&&(a=l),!!ue.isString(a)){if(ue.isString(r))return a.indexOf(r)!==-1;if(ue.isRegExp(r))return r.test(a)}}function jC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,l,r)=>l.toUpperCase()+r)}function NC(t,a){const l=ue.toCamelCase(" "+a);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+l,{value:function(o,d,m){return this[r].call(this,a,o,d,m)},configurable:!0})})}let as=class{constructor(a){a&&this.set(a)}set(a,l,r){const o=this;function d(x,h,p){const g=ii(h);if(!g)throw new Error("header name must be a non-empty string");const y=ue.findKey(o,g);(!y||o[y]===void 0||p===!0||p===void 0&&o[y]!==!1)&&(o[y||h]=ac(x))}const m=(x,h)=>ue.forEach(x,(p,g)=>d(p,g,h));if(ue.isPlainObject(a)||a instanceof this.constructor)m(a,l);else if(ue.isString(a)&&(a=a.trim())&&!vC(a))m(yC(a),l);else if(ue.isObject(a)&&ue.isIterable(a)){let x={},h,p;for(const g of a){if(!ue.isArray(g))throw TypeError("Object iterator must return a key-value pair");x[p=g[0]]=(h=x[p])?ue.isArray(h)?[...h,g[1]]:[h,g[1]]:g[1]}m(x,l)}else a!=null&&d(l,a,r);return this}get(a,l){if(a=ii(a),a){const r=ue.findKey(this,a);if(r){const o=this[r];if(!l)return o;if(l===!0)return wC(o);if(ue.isFunction(l))return l.call(this,o,r);if(ue.isRegExp(l))return l.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,l){if(a=ii(a),a){const r=ue.findKey(this,a);return!!(r&&this[r]!==void 0&&(!l||Sm(this,this[r],r,l)))}return!1}delete(a,l){const r=this;let o=!1;function d(m){if(m=ii(m),m){const x=ue.findKey(r,m);x&&(!l||Sm(r,r[x],x,l))&&(delete r[x],o=!0)}}return ue.isArray(a)?a.forEach(d):d(a),o}clear(a){const l=Object.keys(this);let r=l.length,o=!1;for(;r--;){const d=l[r];(!a||Sm(this,this[d],d,a,!0))&&(delete this[d],o=!0)}return o}normalize(a){const l=this,r={};return ue.forEach(this,(o,d)=>{const m=ue.findKey(r,d);if(m){l[m]=ac(o),delete l[d];return}const x=a?jC(d):String(d).trim();x!==d&&delete l[d],l[x]=ac(o),r[x]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const l=Object.create(null);return ue.forEach(this,(r,o)=>{r!=null&&r!==!1&&(l[o]=a&&ue.isArray(r)?r.join(", "):r)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,l])=>a+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...l){const r=new this(a);return l.forEach(o=>r.set(o)),r}static accessor(a){const r=(this[c0]=this[c0]={accessors:{}}).accessors,o=this.prototype;function d(m){const x=ii(m);r[x]||(NC(o,m),r[x]=!0)}return ue.isArray(a)?a.forEach(d):d(a),this}};as.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(as.prototype,({value:t},a)=>{let l=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(r){this[l]=r}}});ue.freezeMethods(as);function Cm(t,a){const l=this||Si,r=a||l,o=as.from(r.headers);let d=r.data;return ue.forEach(t,function(x){d=x.call(l,d,o.normalize(),a?a.status:void 0)}),o.normalize(),d}function sy(t){return!!(t&&t.__CANCEL__)}function er(t,a,l){De.call(this,t??"canceled",De.ERR_CANCELED,a,l),this.name="CanceledError"}ue.inherits(er,De,{__CANCEL__:!0});function ay(t,a,l){const r=l.config.validateStatus;!l.status||!r||r(l.status)?t(l):a(new De("Request failed with status code "+l.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function SC(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function CC(t,a){t=t||10;const l=new Array(t),r=new Array(t);let o=0,d=0,m;return a=a!==void 0?a:1e3,function(h){const p=Date.now(),g=r[d];m||(m=p),l[o]=h,r[o]=p;let y=d,j=0;for(;y!==o;)j+=l[y++],y=y%t;if(o=(o+1)%t,o===d&&(d=(d+1)%t),p-m<a)return;const E=g&&p-g;return E?Math.round(j*1e3/E):void 0}}function kC(t,a){let l=0,r=1e3/a,o,d;const m=(p,g=Date.now())=>{l=g,o=null,d&&(clearTimeout(d),d=null),t.apply(null,p)};return[(...p)=>{const g=Date.now(),y=g-l;y>=r?m(p,g):(o=p,d||(d=setTimeout(()=>{d=null,m(o)},r-y)))},()=>o&&m(o)]}const cc=(t,a,l=3)=>{let r=0;const o=CC(50,250);return kC(d=>{const m=d.loaded,x=d.lengthComputable?d.total:void 0,h=m-r,p=o(h),g=m<=x;r=m;const y={loaded:m,total:x,progress:x?m/x:void 0,bytes:h,rate:p||void 0,estimated:p&&x&&g?(x-m)/p:void 0,event:d,lengthComputable:x!=null,[a?"download":"upload"]:!0};t(y)},l)},d0=(t,a)=>{const l=t!=null;return[r=>a[0]({lengthComputable:l,total:t,loaded:r}),a[1]]},u0=t=>(...a)=>ue.asap(()=>t(...a)),EC=zt.hasStandardBrowserEnv?((t,a)=>l=>(l=new URL(l,zt.origin),t.protocol===l.protocol&&t.host===l.host&&(a||t.port===l.port)))(new URL(zt.origin),zt.navigator&&/(msie|trident)/i.test(zt.navigator.userAgent)):()=>!0,AC=zt.hasStandardBrowserEnv?{write(t,a,l,r,o,d){const m=[t+"="+encodeURIComponent(a)];ue.isNumber(l)&&m.push("expires="+new Date(l).toGMTString()),ue.isString(r)&&m.push("path="+r),ue.isString(o)&&m.push("domain="+o),d===!0&&m.push("secure"),document.cookie=m.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function OC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function RC(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function ny(t,a,l){let r=!OC(a);return t&&(r||l==!1)?RC(t,a):a}const m0=t=>t instanceof as?{...t}:t;function Kn(t,a){a=a||{};const l={};function r(p,g,y,j){return ue.isPlainObject(p)&&ue.isPlainObject(g)?ue.merge.call({caseless:j},p,g):ue.isPlainObject(g)?ue.merge({},g):ue.isArray(g)?g.slice():g}function o(p,g,y,j){if(ue.isUndefined(g)){if(!ue.isUndefined(p))return r(void 0,p,y,j)}else return r(p,g,y,j)}function d(p,g){if(!ue.isUndefined(g))return r(void 0,g)}function m(p,g){if(ue.isUndefined(g)){if(!ue.isUndefined(p))return r(void 0,p)}else return r(void 0,g)}function x(p,g,y){if(y in a)return r(p,g);if(y in t)return r(void 0,p)}const h={url:d,method:d,data:d,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:x,headers:(p,g,y)=>o(m0(p),m0(g),y,!0)};return ue.forEach(Object.keys(Object.assign({},t,a)),function(g){const y=h[g]||o,j=y(t[g],a[g],g);ue.isUndefined(j)&&y!==x||(l[g]=j)}),l}const ly=t=>{const a=Kn({},t);let{data:l,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:d,headers:m,auth:x}=a;a.headers=m=as.from(m),a.url=Jb(ny(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),x&&m.set("Authorization","Basic "+btoa((x.username||"")+":"+(x.password?unescape(encodeURIComponent(x.password)):"")));let h;if(ue.isFormData(l)){if(zt.hasStandardBrowserEnv||zt.hasStandardBrowserWebWorkerEnv)m.setContentType(void 0);else if((h=m.getContentType())!==!1){const[p,...g]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];m.setContentType([p||"multipart/form-data",...g].join("; "))}}if(zt.hasStandardBrowserEnv&&(r&&ue.isFunction(r)&&(r=r(a)),r||r!==!1&&EC(a.url))){const p=o&&d&&AC.read(d);p&&m.set(o,p)}return a},TC=typeof XMLHttpRequest<"u",PC=TC&&function(t){return new Promise(function(l,r){const o=ly(t);let d=o.data;const m=as.from(o.headers).normalize();let{responseType:x,onUploadProgress:h,onDownloadProgress:p}=o,g,y,j,E,b;function k(){E&&E(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(g),o.signal&&o.signal.removeEventListener("abort",g)}let w=new XMLHttpRequest;w.open(o.method.toUpperCase(),o.url,!0),w.timeout=o.timeout;function S(){if(!w)return;const N=as.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),T={data:!x||x==="text"||x==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:N,config:t,request:w};ay(function(z){l(z),k()},function(z){r(z),k()},T),w=null}"onloadend"in w?w.onloadend=S:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(S)},w.onabort=function(){w&&(r(new De("Request aborted",De.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new De("Network Error",De.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let P=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const T=o.transitional||ey;o.timeoutErrorMessage&&(P=o.timeoutErrorMessage),r(new De(P,T.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,t,w)),w=null},d===void 0&&m.setContentType(null),"setRequestHeader"in w&&ue.forEach(m.toJSON(),function(P,T){w.setRequestHeader(T,P)}),ue.isUndefined(o.withCredentials)||(w.withCredentials=!!o.withCredentials),x&&x!=="json"&&(w.responseType=o.responseType),p&&([j,b]=cc(p,!0),w.addEventListener("progress",j)),h&&w.upload&&([y,E]=cc(h),w.upload.addEventListener("progress",y),w.upload.addEventListener("loadend",E)),(o.cancelToken||o.signal)&&(g=N=>{w&&(r(!N||N.type?new er(null,t,w):N),w.abort(),w=null)},o.cancelToken&&o.cancelToken.subscribe(g),o.signal&&(o.signal.aborted?g():o.signal.addEventListener("abort",g)));const v=SC(o.url);if(v&&zt.protocols.indexOf(v)===-1){r(new De("Unsupported protocol "+v+":",De.ERR_BAD_REQUEST,t));return}w.send(d||null)})},MC=(t,a)=>{const{length:l}=t=t?t.filter(Boolean):[];if(a||l){let r=new AbortController,o;const d=function(p){if(!o){o=!0,x();const g=p instanceof Error?p:this.reason;r.abort(g instanceof De?g:new er(g instanceof Error?g.message:g))}};let m=a&&setTimeout(()=>{m=null,d(new De(`timeout ${a} of ms exceeded`,De.ETIMEDOUT))},a);const x=()=>{t&&(m&&clearTimeout(m),m=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),t=null)};t.forEach(p=>p.addEventListener("abort",d));const{signal:h}=r;return h.unsubscribe=()=>ue.asap(x),h}},LC=function*(t,a){let l=t.byteLength;if(l<a){yield t;return}let r=0,o;for(;r<l;)o=r+a,yield t.slice(r,o),r=o},FC=async function*(t,a){for await(const l of DC(t))yield*LC(l,a)},DC=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:l,value:r}=await a.read();if(l)break;yield r}}finally{await a.cancel()}},f0=(t,a,l,r)=>{const o=FC(t,a);let d=0,m,x=h=>{m||(m=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:p,value:g}=await o.next();if(p){x(),h.close();return}let y=g.byteLength;if(l){let j=d+=y;l(j)}h.enqueue(new Uint8Array(g))}catch(p){throw x(p),p}},cancel(h){return x(h),o.return()}},{highWaterMark:2})},Fc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ry=Fc&&typeof ReadableStream=="function",_C=Fc&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),iy=(t,...a)=>{try{return!!t(...a)}catch{return!1}},qC=ry&&iy(()=>{let t=!1;const a=new Request(zt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),h0=64*1024,lf=ry&&iy(()=>ue.isReadableStream(new Response("").body)),dc={stream:lf&&(t=>t.body)};Fc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!dc[a]&&(dc[a]=ue.isFunction(t[a])?l=>l[a]():(l,r)=>{throw new De(`Response type '${a}' is not supported`,De.ERR_NOT_SUPPORT,r)})})})(new Response);const zC=async t=>{if(t==null)return 0;if(ue.isBlob(t))return t.size;if(ue.isSpecCompliantForm(t))return(await new Request(zt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(t)||ue.isArrayBuffer(t))return t.byteLength;if(ue.isURLSearchParams(t)&&(t=t+""),ue.isString(t))return(await _C(t)).byteLength},UC=async(t,a)=>{const l=ue.toFiniteNumber(t.getContentLength());return l??zC(a)},$C=Fc&&(async t=>{let{url:a,method:l,data:r,signal:o,cancelToken:d,timeout:m,onDownloadProgress:x,onUploadProgress:h,responseType:p,headers:g,withCredentials:y="same-origin",fetchOptions:j}=ly(t);p=p?(p+"").toLowerCase():"text";let E=MC([o,d&&d.toAbortSignal()],m),b;const k=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let w;try{if(h&&qC&&l!=="get"&&l!=="head"&&(w=await UC(g,r))!==0){let T=new Request(a,{method:"POST",body:r,duplex:"half"}),F;if(ue.isFormData(r)&&(F=T.headers.get("content-type"))&&g.setContentType(F),T.body){const[z,q]=d0(w,cc(u0(h)));r=f0(T.body,h0,z,q)}}ue.isString(y)||(y=y?"include":"omit");const S="credentials"in Request.prototype;b=new Request(a,{...j,signal:E,method:l.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:S?y:void 0});let v=await fetch(b);const N=lf&&(p==="stream"||p==="response");if(lf&&(x||N&&k)){const T={};["status","statusText","headers"].forEach(I=>{T[I]=v[I]});const F=ue.toFiniteNumber(v.headers.get("content-length")),[z,q]=x&&d0(F,cc(u0(x),!0))||[];v=new Response(f0(v.body,h0,z,()=>{q&&q(),k&&k()}),T)}p=p||"text";let P=await dc[ue.findKey(dc,p)||"text"](v,t);return!N&&k&&k(),await new Promise((T,F)=>{ay(T,F,{data:P,headers:as.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:b})})}catch(S){throw k&&k(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,t,b),{cause:S.cause||S}):De.from(S,S&&S.code,t,b)}}),rf={http:sC,xhr:PC,fetch:$C};ue.forEach(rf,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const x0=t=>`- ${t}`,IC=t=>ue.isFunction(t)||t===null||t===!1,oy={getAdapter:t=>{t=ue.isArray(t)?t:[t];const{length:a}=t;let l,r;const o={};for(let d=0;d<a;d++){l=t[d];let m;if(r=l,!IC(l)&&(r=rf[(m=String(l)).toLowerCase()],r===void 0))throw new De(`Unknown adapter '${m}'`);if(r)break;o[m||"#"+d]=r}if(!r){const d=Object.entries(o).map(([x,h])=>`adapter ${x} `+(h===!1?"is not supported by the environment":"is not available in the build"));let m=a?d.length>1?`since :
`+d.map(x0).join(`
`):" "+x0(d[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return r},adapters:rf};function km(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new er(null,t)}function p0(t){return km(t),t.headers=as.from(t.headers),t.data=Cm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),oy.getAdapter(t.adapter||Si.adapter)(t).then(function(r){return km(t),r.data=Cm.call(t,t.transformResponse,r),r.headers=as.from(r.headers),r},function(r){return sy(r)||(km(t),r&&r.response&&(r.response.data=Cm.call(t,t.transformResponse,r.response),r.response.headers=as.from(r.response.headers))),Promise.reject(r)})}const cy="1.9.0",Dc={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{Dc[t]=function(r){return typeof r===t||"a"+(a<1?"n ":" ")+t}});const g0={};Dc.transitional=function(a,l,r){function o(d,m){return"[Axios v"+cy+"] Transitional option '"+d+"'"+m+(r?". "+r:"")}return(d,m,x)=>{if(a===!1)throw new De(o(m," has been removed"+(l?" in "+l:"")),De.ERR_DEPRECATED);return l&&!g0[m]&&(g0[m]=!0,console.warn(o(m," has been deprecated since v"+l+" and will be removed in the near future"))),a?a(d,m,x):!0}};Dc.spelling=function(a){return(l,r)=>(console.warn(`${r} is likely a misspelling of ${a}`),!0)};function BC(t,a,l){if(typeof t!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const d=r[o],m=a[d];if(m){const x=t[d],h=x===void 0||m(x,d,t);if(h!==!0)throw new De("option "+d+" must be "+h,De.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new De("Unknown option "+d,De.ERR_BAD_OPTION)}}const nc={assertOptions:BC,validators:Dc},Xs=nc.validators;let Hn=class{constructor(a){this.defaults=a||{},this.interceptors={request:new o0,response:new o0}}async request(a,l){try{return await this._request(a,l)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const d=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch{}}throw r}}_request(a,l){typeof a=="string"?(l=l||{},l.url=a):l=a||{},l=Kn(this.defaults,l);const{transitional:r,paramsSerializer:o,headers:d}=l;r!==void 0&&nc.assertOptions(r,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1),o!=null&&(ue.isFunction(o)?l.paramsSerializer={serialize:o}:nc.assertOptions(o,{encode:Xs.function,serialize:Xs.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),nc.assertOptions(l,{baseUrl:Xs.spelling("baseURL"),withXsrfToken:Xs.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let m=d&&ue.merge(d.common,d[l.method]);d&&ue.forEach(["delete","get","head","post","put","patch","common"],b=>{delete d[b]}),l.headers=as.concat(m,d);const x=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(l)===!1||(h=h&&k.synchronous,x.unshift(k.fulfilled,k.rejected))});const p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let g,y=0,j;if(!h){const b=[p0.bind(this),void 0];for(b.unshift.apply(b,x),b.push.apply(b,p),j=b.length,g=Promise.resolve(l);y<j;)g=g.then(b[y++],b[y++]);return g}j=x.length;let E=l;for(y=0;y<j;){const b=x[y++],k=x[y++];try{E=b(E)}catch(w){k.call(this,w);break}}try{g=p0.call(this,E)}catch(b){return Promise.reject(b)}for(y=0,j=p.length;y<j;)g=g.then(p[y++],p[y++]);return g}getUri(a){a=Kn(this.defaults,a);const l=ny(a.baseURL,a.url,a.allowAbsoluteUrls);return Jb(l,a.params,a.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(a){Hn.prototype[a]=function(l,r){return this.request(Kn(r||{},{method:a,url:l,data:(r||{}).data}))}});ue.forEach(["post","put","patch"],function(a){function l(r){return function(d,m,x){return this.request(Kn(x||{},{method:a,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:m}))}}Hn.prototype[a]=l(),Hn.prototype[a+"Form"]=l(!0)});let HC=class dy{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(d){l=d});const r=this;this.promise.then(o=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](o);r._listeners=null}),this.promise.then=o=>{let d;const m=new Promise(x=>{r.subscribe(x),d=x}).then(o);return m.cancel=function(){r.unsubscribe(d)},m},a(function(d,m,x){r.reason||(r.reason=new er(d,m,x),l(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const l=this._listeners.indexOf(a);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const a=new AbortController,l=r=>{a.abort(r)};return this.subscribe(l),a.signal.unsubscribe=()=>this.unsubscribe(l),a.signal}static source(){let a;return{token:new dy(function(o){a=o}),cancel:a}}};function QC(t){return function(l){return t.apply(null,l)}}function GC(t){return ue.isObject(t)&&t.isAxiosError===!0}const of={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(of).forEach(([t,a])=>{of[a]=t});function uy(t){const a=new Hn(t),l=$b(Hn.prototype.request,a);return ue.extend(l,Hn.prototype,a,{allOwnKeys:!0}),ue.extend(l,a,null,{allOwnKeys:!0}),l.create=function(o){return uy(Kn(t,o))},l}const Qe=uy(Si);Qe.Axios=Hn;Qe.CanceledError=er;Qe.CancelToken=HC;Qe.isCancel=sy;Qe.VERSION=cy;Qe.toFormData=Lc;Qe.AxiosError=De;Qe.Cancel=Qe.CanceledError;Qe.all=function(a){return Promise.all(a)};Qe.spread=QC;Qe.isAxiosError=GC;Qe.mergeConfig=Kn;Qe.AxiosHeaders=as;Qe.formToJSON=t=>ty(ue.isHTMLForm(t)?new FormData(t):t);Qe.getAdapter=oy.getAdapter;Qe.HttpStatusCode=of;Qe.default=Qe;const{Axios:eP,AxiosError:tP,CanceledError:sP,isCancel:aP,CancelToken:nP,VERSION:lP,all:rP,Cancel:iP,isAxiosError:oP,spread:cP,toFormData:dP,AxiosHeaders:uP,HttpStatusCode:mP,formToJSON:fP,getAdapter:hP,mergeConfig:xP}=Qe;function Mt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var KC=typeof Symbol=="function"&&Symbol.observable||"@@observable",b0=KC,Em=()=>Math.random().toString(36).substring(7).split("").join("."),VC={INIT:`@@redux/INIT${Em()}`,REPLACE:`@@redux/REPLACE${Em()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Em()}`},uc=VC;function Rf(t){if(typeof t!="object"||t===null)return!1;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a||Object.getPrototypeOf(t)===null}function my(t,a,l){if(typeof t!="function")throw new Error(Mt(2));if(typeof a=="function"&&typeof l=="function"||typeof l=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof a=="function"&&typeof l>"u"&&(l=a,a=void 0),typeof l<"u"){if(typeof l!="function")throw new Error(Mt(1));return l(my)(t,a)}let r=t,o=a,d=new Map,m=d,x=0,h=!1;function p(){m===d&&(m=new Map,d.forEach((w,S)=>{m.set(S,w)}))}function g(){if(h)throw new Error(Mt(3));return o}function y(w){if(typeof w!="function")throw new Error(Mt(4));if(h)throw new Error(Mt(5));let S=!0;p();const v=x++;return m.set(v,w),function(){if(S){if(h)throw new Error(Mt(6));S=!1,p(),m.delete(v),d=null}}}function j(w){if(!Rf(w))throw new Error(Mt(7));if(typeof w.type>"u")throw new Error(Mt(8));if(typeof w.type!="string")throw new Error(Mt(17));if(h)throw new Error(Mt(9));try{h=!0,o=r(o,w)}finally{h=!1}return(d=m).forEach(v=>{v()}),w}function E(w){if(typeof w!="function")throw new Error(Mt(10));r=w,j({type:uc.REPLACE})}function b(){const w=y;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Mt(11));function v(){const P=S;P.next&&P.next(g())}return v(),{unsubscribe:w(v)}},[b0](){return this}}}return j({type:uc.INIT}),{dispatch:j,subscribe:y,getState:g,replaceReducer:E,[b0]:b}}function YC(t){Object.keys(t).forEach(a=>{const l=t[a];if(typeof l(void 0,{type:uc.INIT})>"u")throw new Error(Mt(12));if(typeof l(void 0,{type:uc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function WC(t){const a=Object.keys(t),l={};for(let d=0;d<a.length;d++){const m=a[d];typeof t[m]=="function"&&(l[m]=t[m])}const r=Object.keys(l);let o;try{YC(l)}catch(d){o=d}return function(m={},x){if(o)throw o;let h=!1;const p={};for(let g=0;g<r.length;g++){const y=r[g],j=l[y],E=m[y],b=j(E,x);if(typeof b>"u")throw x&&x.type,new Error(Mt(14));p[y]=b,h=h||b!==E}return h=h||r.length!==Object.keys(m).length,h?p:m}}function mc(...t){return t.length===0?a=>a:t.length===1?t[0]:t.reduce((a,l)=>(...r)=>a(l(...r)))}function XC(...t){return a=>(l,r)=>{const o=a(l,r);let d=()=>{throw new Error(Mt(15))};const m={getState:o.getState,dispatch:(h,...p)=>d(h,...p)},x=t.map(h=>h(m));return d=mc(...x)(o.dispatch),{...o,dispatch:d}}}function ZC(t){return Rf(t)&&"type"in t&&typeof t.type=="string"}var fy=Symbol.for("immer-nothing"),y0=Symbol.for("immer-draftable"),ps=Symbol.for("immer-state");function $s(t,...a){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Vl=Object.getPrototypeOf;function Vn(t){return!!t&&!!t[ps]}function Ea(t){var a;return t?hy(t)||Array.isArray(t)||!!t[y0]||!!((a=t.constructor)!=null&&a[y0])||qc(t)||zc(t):!1}var JC=Object.prototype.constructor.toString();function hy(t){if(!t||typeof t!="object")return!1;const a=Vl(t);if(a===null)return!0;const l=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return l===Object?!0:typeof l=="function"&&Function.toString.call(l)===JC}function fc(t,a){_c(t)===0?Reflect.ownKeys(t).forEach(l=>{a(l,t[l],t)}):t.forEach((l,r)=>a(r,l,t))}function _c(t){const a=t[ps];return a?a.type_:Array.isArray(t)?1:qc(t)?2:zc(t)?3:0}function cf(t,a){return _c(t)===2?t.has(a):Object.prototype.hasOwnProperty.call(t,a)}function xy(t,a,l){const r=_c(t);r===2?t.set(a,l):r===3?t.add(l):t[a]=l}function e1(t,a){return t===a?t!==0||1/t===1/a:t!==t&&a!==a}function qc(t){return t instanceof Map}function zc(t){return t instanceof Set}function Ln(t){return t.copy_||t.base_}function df(t,a){if(qc(t))return new Map(t);if(zc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const l=hy(t);if(a===!0||a==="class_only"&&!l){const r=Object.getOwnPropertyDescriptors(t);delete r[ps];let o=Reflect.ownKeys(r);for(let d=0;d<o.length;d++){const m=o[d],x=r[m];x.writable===!1&&(x.writable=!0,x.configurable=!0),(x.get||x.set)&&(r[m]={configurable:!0,writable:!0,enumerable:x.enumerable,value:t[m]})}return Object.create(Vl(t),r)}else{const r=Vl(t);if(r!==null&&l)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function Tf(t,a=!1){return Uc(t)||Vn(t)||!Ea(t)||(_c(t)>1&&(t.set=t.add=t.clear=t.delete=t1),Object.freeze(t),a&&Object.entries(t).forEach(([l,r])=>Tf(r,!0))),t}function t1(){$s(2)}function Uc(t){return Object.isFrozen(t)}var s1={};function Yn(t){const a=s1[t];return a||$s(0,t),a}var xi;function py(){return xi}function a1(t,a){return{drafts_:[],parent_:t,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function w0(t,a){a&&(Yn("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=a)}function uf(t){mf(t),t.drafts_.forEach(n1),t.drafts_=null}function mf(t){t===xi&&(xi=t.parent_)}function v0(t){return xi=a1(xi,t)}function n1(t){const a=t[ps];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function j0(t,a){a.unfinalizedDrafts_=a.drafts_.length;const l=a.drafts_[0];return t!==void 0&&t!==l?(l[ps].modified_&&(uf(a),$s(4)),Ea(t)&&(t=hc(a,t),a.parent_||xc(a,t)),a.patches_&&Yn("Patches").generateReplacementPatches_(l[ps].base_,t,a.patches_,a.inversePatches_)):t=hc(a,l,[]),uf(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),t!==fy?t:void 0}function hc(t,a,l){if(Uc(a))return a;const r=a[ps];if(!r)return fc(a,(o,d)=>N0(t,r,a,o,d,l)),a;if(r.scope_!==t)return a;if(!r.modified_)return xc(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let d=o,m=!1;r.type_===3&&(d=new Set(o),o.clear(),m=!0),fc(d,(x,h)=>N0(t,r,o,x,h,l,m)),xc(t,o,!1),l&&t.patches_&&Yn("Patches").generatePatches_(r,l,t.patches_,t.inversePatches_)}return r.copy_}function N0(t,a,l,r,o,d,m){if(Vn(o)){const x=d&&a&&a.type_!==3&&!cf(a.assigned_,r)?d.concat(r):void 0,h=hc(t,o,x);if(xy(l,r,h),Vn(h))t.canAutoFreeze_=!1;else return}else m&&l.add(o);if(Ea(o)&&!Uc(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;hc(t,o),(!a||!a.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(l,r)&&xc(t,o)}}function xc(t,a,l=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Tf(a,l)}function l1(t,a){const l=Array.isArray(t),r={type_:l?1:0,scope_:a?a.scope_:py(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,d=Pf;l&&(o=[r],d=pi);const{revoke:m,proxy:x}=Proxy.revocable(o,d);return r.draft_=x,r.revoke_=m,x}var Pf={get(t,a){if(a===ps)return t;const l=Ln(t);if(!cf(l,a))return r1(t,l,a);const r=l[a];return t.finalized_||!Ea(r)?r:r===Am(t.base_,a)?(Om(t),t.copy_[a]=hf(r,t)):r},has(t,a){return a in Ln(t)},ownKeys(t){return Reflect.ownKeys(Ln(t))},set(t,a,l){const r=gy(Ln(t),a);if(r!=null&&r.set)return r.set.call(t.draft_,l),!0;if(!t.modified_){const o=Am(Ln(t),a),d=o==null?void 0:o[ps];if(d&&d.base_===l)return t.copy_[a]=l,t.assigned_[a]=!1,!0;if(e1(l,o)&&(l!==void 0||cf(t.base_,a)))return!0;Om(t),ff(t)}return t.copy_[a]===l&&(l!==void 0||a in t.copy_)||Number.isNaN(l)&&Number.isNaN(t.copy_[a])||(t.copy_[a]=l,t.assigned_[a]=!0),!0},deleteProperty(t,a){return Am(t.base_,a)!==void 0||a in t.base_?(t.assigned_[a]=!1,Om(t),ff(t)):delete t.assigned_[a],t.copy_&&delete t.copy_[a],!0},getOwnPropertyDescriptor(t,a){const l=Ln(t),r=Reflect.getOwnPropertyDescriptor(l,a);return r&&{writable:!0,configurable:t.type_!==1||a!=="length",enumerable:r.enumerable,value:l[a]}},defineProperty(){$s(11)},getPrototypeOf(t){return Vl(t.base_)},setPrototypeOf(){$s(12)}},pi={};fc(Pf,(t,a)=>{pi[t]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});pi.deleteProperty=function(t,a){return pi.set.call(this,t,a,void 0)};pi.set=function(t,a,l){return Pf.set.call(this,t[0],a,l,t[0])};function Am(t,a){const l=t[ps];return(l?Ln(l):t)[a]}function r1(t,a,l){var o;const r=gy(a,l);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function gy(t,a){if(!(a in t))return;let l=Vl(t);for(;l;){const r=Object.getOwnPropertyDescriptor(l,a);if(r)return r;l=Vl(l)}}function ff(t){t.modified_||(t.modified_=!0,t.parent_&&ff(t.parent_))}function Om(t){t.copy_||(t.copy_=df(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var i1=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,l,r)=>{if(typeof a=="function"&&typeof l!="function"){const d=l;l=a;const m=this;return function(h=d,...p){return m.produce(h,g=>l.call(this,g,...p))}}typeof l!="function"&&$s(6),r!==void 0&&typeof r!="function"&&$s(7);let o;if(Ea(a)){const d=v0(this),m=hf(a,void 0);let x=!0;try{o=l(m),x=!1}finally{x?uf(d):mf(d)}return w0(d,r),j0(o,d)}else if(!a||typeof a!="object"){if(o=l(a),o===void 0&&(o=a),o===fy&&(o=void 0),this.autoFreeze_&&Tf(o,!0),r){const d=[],m=[];Yn("Patches").generateReplacementPatches_(a,o,d,m),r(d,m)}return o}else $s(1,a)},this.produceWithPatches=(a,l)=>{if(typeof a=="function")return(m,...x)=>this.produceWithPatches(m,h=>a(h,...x));let r,o;return[this.produce(a,l,(m,x)=>{r=m,o=x}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ea(t)||$s(8),Vn(t)&&(t=o1(t));const a=v0(this),l=hf(t,void 0);return l[ps].isManual_=!0,mf(a),l}finishDraft(t,a){const l=t&&t[ps];(!l||!l.isManual_)&&$s(9);const{scope_:r}=l;return w0(r,a),j0(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,a){let l;for(l=a.length-1;l>=0;l--){const o=a[l];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}l>-1&&(a=a.slice(l+1));const r=Yn("Patches").applyPatches_;return Vn(t)?r(t,a):this.produce(t,o=>r(o,a))}};function hf(t,a){const l=qc(t)?Yn("MapSet").proxyMap_(t,a):zc(t)?Yn("MapSet").proxySet_(t,a):l1(t,a);return(a?a.scope_:py()).drafts_.push(l),l}function o1(t){return Vn(t)||$s(10,t),by(t)}function by(t){if(!Ea(t)||Uc(t))return t;const a=t[ps];let l;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,l=df(t,a.scope_.immer_.useStrictShallowCopy_)}else l=df(t,!0);return fc(l,(r,o)=>{xy(l,r,by(o))}),a&&(a.finalized_=!1),l}var gs=new i1,yy=gs.produce;gs.produceWithPatches.bind(gs);gs.setAutoFreeze.bind(gs);gs.setUseStrictShallowCopy.bind(gs);gs.applyPatches.bind(gs);gs.createDraft.bind(gs);gs.finishDraft.bind(gs);function wy(t){return({dispatch:l,getState:r})=>o=>d=>typeof d=="function"?d(l,r,t):o(d)}var c1=wy(),d1=wy,u1=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mc:mc.apply(null,arguments)};function S0(t,a){function l(...r){if(a){let o=a(...r);if(!o)throw new Error(Sa(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:r[0]}}return l.toString=()=>`${t}`,l.type=t,l.match=r=>ZC(r)&&r.type===t,l}var vy=class ci extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,ci.prototype)}static get[Symbol.species](){return ci}concat(...a){return super.concat.apply(this,a)}prepend(...a){return a.length===1&&Array.isArray(a[0])?new ci(...a[0].concat(this)):new ci(...a.concat(this))}};function C0(t){return Ea(t)?yy(t,()=>{}):t}function Yo(t,a,l){return t.has(a)?t.get(a):t.set(a,l(a)).get(a)}function m1(t){return typeof t=="boolean"}var f1=()=>function(a){const{thunk:l=!0,immutableCheck:r=!0,serializableCheck:o=!0,actionCreatorCheck:d=!0}=a??{};let m=new vy;return l&&(m1(l)?m.push(c1):m.push(d1(l.extraArgument))),m},h1="RTK_autoBatch",k0=t=>a=>{setTimeout(a,t)},x1=(t={type:"raf"})=>a=>(...l)=>{const r=a(...l);let o=!0,d=!1,m=!1;const x=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:k0(10):t.type==="callback"?t.queueNotification:k0(t.timeout),p=()=>{m=!1,d&&(d=!1,x.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const y=()=>o&&g(),j=r.subscribe(y);return x.add(g),()=>{j(),x.delete(g)}},dispatch(g){var y;try{return o=!((y=g==null?void 0:g.meta)!=null&&y[h1]),d=!o,d&&(m||(m=!0,h(p))),r.dispatch(g)}finally{o=!0}}})},p1=t=>function(l){const{autoBatch:r=!0}=l??{};let o=new vy(t);return r&&o.push(x1(typeof r=="object"?r:void 0)),o};function g1(t){const a=f1(),{reducer:l=void 0,middleware:r,devTools:o=!0,preloadedState:d=void 0,enhancers:m=void 0}=t||{};let x;if(typeof l=="function")x=l;else if(Rf(l))x=WC(l);else throw new Error(Sa(1));let h;typeof r=="function"?h=r(a):h=a();let p=mc;o&&(p=u1({trace:!1,...typeof o=="object"&&o}));const g=XC(...h),y=p1(g);let j=typeof m=="function"?m(y):y();const E=p(...j);return my(x,d,E)}function jy(t){const a={},l=[];let r;const o={addCase(d,m){const x=typeof d=="string"?d:d.type;if(!x)throw new Error(Sa(28));if(x in a)throw new Error(Sa(29));return a[x]=m,o},addMatcher(d,m){return l.push({matcher:d,reducer:m}),o},addDefaultCase(d){return r=d,o}};return t(o),[a,l,r]}function b1(t){return typeof t=="function"}function y1(t,a){let[l,r,o]=jy(a),d;if(b1(t))d=()=>C0(t());else{const x=C0(t);d=()=>x}function m(x=d(),h){let p=[l[h.type],...r.filter(({matcher:g})=>g(h)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[o]),p.reduce((g,y)=>{if(y)if(Vn(g)){const E=y(g,h);return E===void 0?g:E}else{if(Ea(g))return yy(g,j=>y(j,h));{const j=y(g,h);if(j===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return j}}return g},x)}return m.getInitialState=d,m}var w1=Symbol.for("rtk-slice-createasyncthunk");function v1(t,a){return`${t}/${a}`}function j1({creators:t}={}){var l;const a=(l=t==null?void 0:t.asyncThunk)==null?void 0:l[w1];return function(o){const{name:d,reducerPath:m=d}=o;if(!d)throw new Error(Sa(11));const x=(typeof o.reducers=="function"?o.reducers(S1()):o.reducers)||{},h=Object.keys(x),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(P,T){const F=typeof P=="string"?P:P.type;if(!F)throw new Error(Sa(12));if(F in p.sliceCaseReducersByType)throw new Error(Sa(13));return p.sliceCaseReducersByType[F]=T,g},addMatcher(P,T){return p.sliceMatchers.push({matcher:P,reducer:T}),g},exposeAction(P,T){return p.actionCreators[P]=T,g},exposeCaseReducer(P,T){return p.sliceCaseReducersByName[P]=T,g}};h.forEach(P=>{const T=x[P],F={reducerName:P,type:v1(d,P),createNotation:typeof o.reducers=="function"};k1(T)?A1(F,T,g,a):C1(F,T,g)});function y(){const[P={},T=[],F=void 0]=typeof o.extraReducers=="function"?jy(o.extraReducers):[o.extraReducers],z={...P,...p.sliceCaseReducersByType};return y1(o.initialState,q=>{for(let I in z)q.addCase(I,z[I]);for(let I of p.sliceMatchers)q.addMatcher(I.matcher,I.reducer);for(let I of T)q.addMatcher(I.matcher,I.reducer);F&&q.addDefaultCase(F)})}const j=P=>P,E=new Map,b=new WeakMap;let k;function w(P,T){return k||(k=y()),k(P,T)}function S(){return k||(k=y()),k.getInitialState()}function v(P,T=!1){function F(q){let I=q[P];return typeof I>"u"&&T&&(I=Yo(b,F,S)),I}function z(q=j){const I=Yo(E,T,()=>new WeakMap);return Yo(I,q,()=>{const de={};for(const[Q,B]of Object.entries(o.selectors??{}))de[Q]=N1(B,q,()=>Yo(b,q,S),T);return de})}return{reducerPath:P,getSelectors:z,get selectors(){return z(F)},selectSlice:F}}const N={name:d,reducer:w,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:S,...v(m),injectInto(P,{reducerPath:T,...F}={}){const z=T??m;return P.inject({reducerPath:z,reducer:w},F),{...N,...v(z,!0)}}};return N}}function N1(t,a,l,r){function o(d,...m){let x=a(d);return typeof x>"u"&&r&&(x=l()),t(x,...m)}return o.unwrapped=t,o}var tr=j1();function S1(){function t(a,l){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...l}}return t.withTypes=()=>t,{reducer(a){return Object.assign({[a.name](...l){return a(...l)}}[a.name],{_reducerDefinitionType:"reducer"})},preparedReducer(a,l){return{_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:l}},asyncThunk:t}}function C1({type:t,reducerName:a,createNotation:l},r,o){let d,m;if("reducer"in r){if(l&&!E1(r))throw new Error(Sa(17));d=r.reducer,m=r.prepare}else d=r;o.addCase(t,d).exposeCaseReducer(a,d).exposeAction(a,m?S0(t,m):S0(t))}function k1(t){return t._reducerDefinitionType==="asyncThunk"}function E1(t){return t._reducerDefinitionType==="reducerWithPrepare"}function A1({type:t,reducerName:a},l,r,o){if(!o)throw new Error(Sa(18));const{payloadCreator:d,fulfilled:m,pending:x,rejected:h,settled:p,options:g}=l,y=o(t,d,g);r.exposeAction(a,y),m&&r.addCase(y.fulfilled,m),x&&r.addCase(y.pending,x),h&&r.addCase(y.rejected,h),p&&r.addMatcher(y.settled,p),r.exposeCaseReducer(a,{fulfilled:m||Wo,pending:x||Wo,rejected:h||Wo,settled:p||Wo})}function Wo(){}function Sa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const E0={userId:"",userName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ny=tr({name:"ownerprofile",initialState:E0,reducers:{setOwnerProfileData:(t,a)=>{const{userId:l,userName:r,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,userId:l,userName:r,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetOwnerProfile:()=>E0}}),{setOwnerProfileData:pc,setAuth:Rm,resetOwnerProfile:gc}=Ny.actions,O1=Ny.reducer,A0={staffId:"",staffName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Sy=tr({name:"staffprofile",initialState:A0,reducers:{setStaffProfileData:(t,a)=>{const{staffId:l,staffName:r,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,staffId:l,staffName:r,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetStaffProfile:()=>A0}}),{setStaffProfileData:$c,setAuth:Tm,resetStaffProfile:bc}=Sy.actions,R1=Sy.reducer,O0={workerId:"",workerName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Cy=tr({name:"workerprofile",initialState:O0,reducers:{setWorkerProfileData:(t,a)=>{const{workerId:l,workerName:r,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,workerId:l,workerName:r,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetWorkerProfile:()=>O0}}),{setWorkerProfileData:Ic,setAuth:Pm,resetWorkerProfile:yc}=Cy.actions,T1=Cy.reducer,P1={role:null,isauthenticated:!1,_id:null},ky=tr({name:"auth",initialState:P1,reducers:{setRole:(t,a)=>a.payload,logout:t=>{t.role=null,t.isauthenticated=!1,t._id=null}}}),{setRole:Lt,logout:wc}=ky.actions,M1=ky.reducer,R0={CTOId:"",CTOName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ey=tr({name:"CTOprofile",initialState:R0,reducers:{setCTOProfileData:(t,a)=>{const{CTOId:l,CTOName:r,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,CTOId:l,CTOName:r,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetCTOProfile:()=>R0}}),{setCTOProfileData:Bc,setAuth:Mm,resetCTOProfile:vc}=Ey.actions,L1=Ey.reducer,T0={clientId:"",clientName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ay=tr({name:"clientprofile",initialState:T0,reducers:{setClientProfileData:(t,a)=>{const{clientId:l,clientName:r,email:o,phoneNo:d,isauthenticated:m,role:x}=a.payload;return{...t,clientId:l,clientName:r,email:o,phoneNo:d,role:x,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetClientProfile:()=>T0}}),{setClientProfileData:Hc,setAuth:Lm,resetClientProfile:jc}=Ay.actions,F1=Ay.reducer,Ut=g1({reducer:{userProfileStore:O1,workerProfileStore:T1,staffProfileStore:R1,CTOProfileStore:L1,clientProfileStore:F1,authStore:M1}}),D1=async()=>{try{let{data:t}=await sa.get("/auth/staff/refreshtoken");return Ut.dispatch(Tm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Tm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Tm({isAuthenticated:!1})),{ok:!1}}},sa=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});sa.interceptors.request.use(t=>t,t=>Promise.reject(t));sa.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/staff/isauthenticated"))return Promise.reject(t);if(((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403){a._retry=!0;try{console.log("gettingcalled infingite time from staff api servive");const{ok:o}=await D1();if(o)return console.log("ok entering into it",o),sa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const _1=async()=>{try{let{data:t}=await sa.get("/auth/CTO/refreshtoken");return Ut.dispatch(Mm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Mm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Mm({isAuthenticated:!1})),{ok:!1}}};let fn=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});fn.interceptors.request.use(t=>t,t=>Promise.reject(t));fn.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/CTO/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO CTOApi servive");try{const{ok:o}=await _1();if(o)return fn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const q1=async({email:t,password:a})=>{const{data:l}=await fn.post("/auth/CTO/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},z1=()=>ie({mutationFn:q1,onSuccess:()=>{ke.invalidateQueries({queryKey:["CTOProfile"]})}}),U1=async t=>{const{data:a}=await fn.post("/auth/CTO/registerCTO",t);if(!a.ok)throw new Error(a.message);return a},$1=()=>ie({mutationFn:U1}),I1=async()=>{const{data:t}=await fn.post("/auth/CTO/logout");if(!t.ok)throw new Error(t.message);return t},Oy=()=>ie({mutationFn:I1,onSuccess:()=>{ke.clear()}}),B1=async()=>{try{let{data:t}=await Aa.get("/auth/client/refreshtoken");return Ut.dispatch(Lm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Lm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Lm({isAuthenticated:!1})),{ok:!1}}};let Aa=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});Aa.interceptors.request.use(t=>t,t=>Promise.reject(t));Aa.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/client/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO clientApi servive");try{const{ok:o}=await B1();if(o)return Aa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const H1=async({email:t,password:a})=>{const{data:l}=await Aa.post("/auth/client/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},Q1=()=>ie({mutationFn:H1,onSuccess:()=>{ke.invalidateQueries({queryKey:["clientprofile"]})}}),G1=async({token:t,payload:a})=>{const{data:l}=await Aa.post(`/auth/client/registerclient?invite=${t}`,a);if(!l.ok)throw new Error(l.message);return l},K1=()=>ie({mutationFn:G1}),V1=async()=>{const{data:t}=await Aa.post("/auth/client/logout");if(!t.ok)throw new Error(t.message);return t},Ry=()=>ie({mutationFn:V1,onSuccess:()=>{ke.clear()}}),Y1=async({email:t,password:a})=>{const{data:l}=await sa.post("/auth/staff/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},W1=()=>ie({mutationFn:Y1,onSuccess:()=>{ke.invalidateQueries({queryKey:["staffProfile"]})}}),X1=async t=>{const{data:a}=await sa.post("/auth/staff/registerstaff",t);if(!a.ok)throw new Error(a.message);return a},Z1=()=>ie({mutationFn:X1}),J1=async()=>{const{data:t}=await sa.post("/auth/staff/logout");if(!t.ok)throw new Error(t.message);return t},Ty=()=>ie({mutationFn:J1,onSuccess:()=>{ke.clear()}}),ek=async()=>{try{let{data:t}=await Is.get("/auth/refreshtoken");return Ut.dispatch(Rm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Rm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Rm({isAuthenticated:!1})),{ok:!1}}};let Is=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});Is.interceptors.request.use(t=>t,t=>Promise.reject(t));Is.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await ek();if(o)return Is(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const tk=async({email:t,password:a,userName:l,phoneNo:r})=>{try{const o={email:t,password:a,username:l,phoneNo:r,role:"owner"};let{data:d}=await Is.post("/auth/registeruser",o);if(d.ok)return d}catch(o){throw o}},sk=async({email:t,password:a})=>{try{let{data:l}=await Is.post("/auth/login",{email:t,password:a});if(console.log("data from login user",l),l.ok)return l}catch(l){throw l}},ak=async()=>{try{let{data:t}=await Is.post("/auth/logout");if(t.ok)return t.data}catch(t){throw t}},nk=()=>ie({mutationFn:tk}),lk=()=>ie({mutationFn:sk}),Py=()=>ie({mutationFn:ak}),rk=async()=>{try{let{data:t}=await hn.get("/auth/worker/refreshtoken");return Ut.dispatch(Pm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Qe.isAxiosError(t)&&t.response?Ut.dispatch(Pm({isAuthenticated:t.response.data.ok})):Ut.dispatch(Pm({isAuthenticated:!1})),{ok:!1}}},hn=Qe.create({baseURL:"https://houseofram.in/api",withCredentials:!0});hn.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/worker/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await rk();if(o)return hn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const ik=async t=>{const{data:a}=await hn.post("/auth/worker/login",t);if(!a.ok)throw new Error(a.message);return a.data},ok=async({invite:t,payload:a})=>{const{data:l}=await hn.post(`/auth/worker/registerworker?invite=${t}`,a);if(console.log("data form register worker",l),!l.ok)throw new Error(l.message);return l.data},ck=async()=>{const{data:t}=await hn.post("/auth/worker/logout");if(!t.ok)throw new Error(t.message);return t.data},dk=()=>ie({mutationFn:ik}),uk=()=>ie({mutationFn:ok}),My=()=>ie({mutationFn:ck}),M=({variant:t="primary",size:a="md",children:l,isLoading:r=!1,className:o="",disabled:d,...m})=>{const x="inline-flex cursor-pointer items-center justify-center font-medium transition-colors focus:outline-none",h={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm",secondary:"bg-blue-100 hover:bg-blue-200 text-blue-700",outline:"border border-blue-200 hover:bg-blue-50 text-blue-600",danger:"border border-red-200 hover:bg-red-500 text-red-600",ghost:"hover:bg-gray-100 text-gray-700",link:"text-blue-600 hover:underline p-0 h-auto"},p={sm:"text-xs px-2.5 py-1.5 rounded-lg",md:"text-sm px-4 py-2 rounded-xl",lg:"text-base px-6 py-3 rounded-xl",icon:"p-2 rounded-lg"},j=`
    ${x} 
    ${h[t]} 
    ${p[a]} 
    ${d?"opacity-50 cursor-not-allowed":""} 
    ${r?"opacity-80 cursor-wait":""}
    ${o}
  `.trim();return e.jsxs("button",{className:j,disabled:d||r,...m,children:[r&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})};let Fm=null;function D(t){const{title:a,description:l,variant:r="default",duration:o=3e3}=t,d=document.getElementById("toast-container");d&&(document.body.removeChild(d),Fm&&window.clearTimeout(Fm));const m=document.createElement("div");m.id="toast-container",m.className="fixed bottom-4 right-4 z-50 max-w-xs";const x=document.createElement("div");x.className=`p-4 rounded-lg shadow-lg border ${r==="destructive"?"bg-red-50 border-red-200":"bg-white border-blue-100"}`;let h="";a&&(h+=`<h4 class="${r==="destructive"?"text-red-800":"text-blue-800"} font-medium">${a}</h4>`),h+=`<p class="${r==="destructive"?"text-red-600":"text-gray-600"} text-sm">${l}</p>`,x.innerHTML=h,m.appendChild(x),document.body.appendChild(m),Fm=window.setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},o)}const mk=({labels:t,icons:a,path:l})=>{const[r,o]=A.useState(!0),d=Me(),{organizationId:m}=Ae(),x=ys(),{role:h}=xs(Q=>Q.authStore),{mutateAsync:p,isPending:g}=Oy(),{mutateAsync:y,isPending:j}=Ry(),{mutateAsync:E,isPending:b}=Ty(),{mutateAsync:k,isPending:w}=Py(),{mutateAsync:S,isPending:v}=My(),N=()=>{o(!1)},P=()=>{o(!0)},T=location.pathname.split("/"),F=T[2]==="projectdetails",z=()=>{F&&d(`/organizations/${m}/projects`)},[q,I]=A.useState("");A.useEffect(()=>{const B=location.pathname.split("/")[4];I(r?()=>T2[B]:()=>P2[B])},[location.pathname,r]),q2(P,N);const de=async()=>{var Q,B;try{h==="CTO"?await p():h==="client"?await y():h==="staff"?await E():h==="owner"?await k():h==="worker"&&await S(),x(gc()),x(jc()),x(yc()),x(vc()),x(bc()),x(wc()),D({title:"Success",description:"logout successfull"}),(!g||!j||!b||!w||!v)&&d("/")}catch(ee){D({title:"Error",description:((B=(Q=ee==null?void 0:ee.response)==null?void 0:Q.data)==null?void 0:B.message)||"Failed to logout",variant:"destructive"})}};return e.jsx(e.Fragment,{children:r?e.jsxs("aside",{className:"relative flex flex-col bg-[#2f303a] w-[17%] min-h-screen max-h-screen text-[#9ca3af] select-none transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-col flex-grow overflow-y-auto overflow-x-hidden custom-scrollbar p-2",children:[e.jsxs("div",{onClick:z,className:`flex ${F?"cursor-pointer":""} justify-between items-center border-b-1 py-2`,children:[e.jsx("span",{className:"text-xl",children:yt.COMPANY_NAME}),e.jsx("div",{className:"w-[30px] h-[30px]",children:e.jsx("img",{className:"w-full h-full",src:yt.COMPANY_LOGO,alt:"LOGO"})})]}),e.jsxs("section",{className:"py-2 space-y-2",children:[" ",Object.entries(t).map(([Q,B])=>l[Q]&&e.jsx($t,{to:l[Q],className:"outline-none",children:e.jsxs("div",{onClick:()=>I(B),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${q===B?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:[e.jsx("span",{className:"text-lg",children:B}),e.jsx("span",{children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]})},B))]})]}),e.jsxs("div",{className:"flex flex-col p-2 border-t border-[#3a3b45]",children:[T[1]!=="login"&&e.jsxs(M,{isLoading:g||j||b||w||v,onClick:de,className:"flex items-center gap-2 px-4 py-3 rounded-lg !bg-[#3a3b45] !text-[#9ca3af] hover:!bg-[#464751] hover:!text-white transition",children:[e.jsx("i",{className:"fa-solid fa-right-from-bracket"}),e.jsx("span",{children:"Logout"})]}),e.jsx("button",{title:"Ctrl+] to close",onClick:N,className:"mt-2 flex items-center justify-center outline-none border border-blue-600 text-blue-500 hover:bg-[#3a3b45] rounded-lg w-full py-2",children:e.jsx("i",{className:"fa-solid fa-chevron-left"})})]})]}):e.jsxs("aside",{className:"flex flex-col relative justify-between bg-[#2f303a] w-[6%]  max-h-full  text-[#9ca3af] transition-all duration-300 ",children:[e.jsx("div",{className:"max-h-[95%] overflow-y-auto overflow-x-hidden custom-scrollbar",children:e.jsx("div",{className:"flex items-center flex-col justify-between w-full",children:Object.entries(a).map(([Q,B])=>l[Q]?e.jsx($t,{to:l[Q],className:`${l[Q]?"":"cursor-not-allowed"}`,children:e.jsx("div",{onClick:()=>I(Q),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${(q==null?void 0:q.toLowerCase())===Q.toLowerCase()?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:e.jsx("i",{className:`${B} ${(q==null?void 0:q.toLowerCase())===Q.toLowerCase()?"text-[#4a86f7]":"text-[#9ca3af]"} `})})}):e.jsx("div",{className:"cursor-not-allowed flex justify-between max-w-[95%] py-4 px-4",children:e.jsx("i",{className:`${B}`})}))})}),e.jsxs("div",{className:"flex flex-col items-center p-2 border-t border-[#3a3b45]",children:[T[1]!=="login"&&e.jsx(M,{isLoading:g||j||b||w||v,title:"logout",onClick:de,className:"w-[40px] h-[40px] flex items-center justify-center !bg-[#3a3b45] !text-[#9ca3af] hover:!text-red-500 transition",children:e.jsx("i",{className:"fa-solid fa-right-from-bracket"})}),e.jsx("button",{title:"Ctrl+[ to open",onClick:P,className:"mt-2 cursor-pointer outline-none border-[#9ca3af] h-[40px] w-[40px] flex items-center justify-center border rounded-lg",children:e.jsx("i",{className:"fa-solid fa-chevron-right text-[#4a86f7]"})})]})]})})},Ci=A.memo(mk),ki=({isOpen:t,onClose:a,labels:l,path:r})=>{const o=Me(),{organizationId:d}=Ae(),m=ys(),{role:x}=xs(z=>z.authStore),{mutateAsync:h,isPending:p}=Oy(),{mutateAsync:g,isPending:y}=Ry(),{mutateAsync:j,isPending:E}=Ty(),{mutateAsync:b,isPending:k}=Py(),{mutateAsync:w,isPending:S}=My(),v=async()=>{var z,q;try{x==="CTO"?await h():x==="client"?await g():x==="staff"?await j():x==="owner"?await b():x==="worker"&&await w(),m(gc()),m(jc()),m(yc()),m(vc()),m(bc()),m(wc()),D({title:"Success",description:"logout successfull"}),(!p||!y||!E||!k||!S)&&o("/")}catch(I){D({title:"Error",description:((q=(z=I==null?void 0:I.response)==null?void 0:z.data)==null?void 0:q.message)||"Failed to logout",variant:"destructive"})}},N=Object.entries(l),P=location.pathname.split("/"),T=P[2]==="projectdetails",F=()=>{T&&o(`/organizations/${d}/projects`)};return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:a}),e.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${t?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{onClick:F,className:`flex items-center gap-3 ${T?"cursor-pointer":""}`,children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:yt.COMPANY_NAME})]}),e.jsx("button",{onClick:a,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("nav",{className:"flex flex-col flex-grow overflow-y-auto p-4",children:N.map(([z,q],I)=>e.jsxs(ct.Fragment,{children:[r[z]?e.jsx($t,{to:r[z],onClick:a,className:"text-gray-800 hover:bg-gray-100 p-3 rounded block",children:q}):e.jsx("span",{className:"text-gray-400 p-3 rounded cursor-not-allowed block",children:q}),I<N.length-1&&e.jsx("hr",{className:"border-t border-gray-200 my-1"})]},z))}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:P[1]!=="login"&&e.jsxs(M,{className:"w-full flex items-center justify-center gap-2",isLoading:p||y||E||k||S,onClick:v,children:[e.jsx("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})]})},fk=({projectId:t,setProjectId:a})=>{const{organizationId:l}=Ae(),[r,o]=A.useState(!1),[d,m]=A.useState(window.innerWidth<470),x={PROJECTS:`/organizations/${l}/projects`,ORGANIZATION:`/organizations/${l}/invitecto`};return A.useEffect(()=>{const h=()=>{m(window.innerWidth<470)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-full h-full",children:[d?e.jsx(ki,{labels:Im,path:x,isOpen:r,onClose:()=>o(!1)}):e.jsx(Ci,{path:x,labels:Im,icons:A2}),e.jsx("main",{className:"!w-[100%] h-full p-4",children:e.jsx(It,{context:{projectId:t,setProjectId:a,organizationId:l,isMobile:d,isMobileSidebarOpen:r,openMobileSidebar:()=>o(!0),closeMobileSidebar:()=>o(!1)}})})]})})},P0=t=>{var l;const a={};return console.log("projectData",t),(l=t.projectName)!=null&&l.trim()||(a.projectName="project name is required"),t.startDate||(a.startDate="start date is required"),t.dueDate||(a.dueDate="Due date is Required"),t.startDate&&t.endDate&&t.endDate<=t.startDate&&(a.endDate="End date must be after start date."),t.startDate&&t.dueDate&&t.dueDate<=t.startDate&&(a.endDate="Due date must be after start date."),a},hk=t=>{var l;const a={};return(l=t.email)!=null&&l.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",a},xk=t=>{var l;const a={};return(l=t.email)!=null&&l.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",t.userName||(a.userName="user name is not provided"),t.phoneNo||(a.phoneNo="phone Number is required"),/^\d{10}$/.test(t.phoneNo.trim())||(a.phoneNo="Phone number should contain exactly 10 digits"),t.confirmPassword.trim()?t.password!==t.confirmPassword&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="please confirm your password",a},Le=({className:t="",children:a})=>e.jsx("div",{className:`bg-white/70 backdrop-blur-sm border-0 rounded-2xl shadow-lg ${t}`,children:a}),bs=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-3 ${t}`,children:a}),Kt=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pt-3 ${t}`,children:a}),Ps=({className:t="",children:a})=>e.jsx("h3",{className:`text-xl font-semibold text-blue-900 ${t}`,children:a}),aa=({className:t="",children:a})=>e.jsx("p",{className:`text-sm text-gray-500 ${t}`,children:a}),ce=({className:t="",error:a,...l})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("input",{className:d,...l}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},fe=({className:t="",...a})=>e.jsx("label",{className:`text-sm font-medium text-gray-700 ${t}`,...a}),M0=()=>{const[t,a]=A.useState({email:"",password:""}),[l,r]=A.useState({email:"",password:"",userName:"",phoneNo:"",confirmPassword:""}),[o,d]=A.useState({}),[m,x]=A.useState({}),[h,p]=A.useState(!1),g=ys(),y=Me(),[j,E]=A.useState(!1),{isMobile:b,openMobileSidebar:k}=Ke(),{mutateAsync:w,isPending:S}=lk(),{mutateAsync:v,isPending:N}=nk(),P=q=>{a(I=>({...I,[q.target.name]:q.target.value}))},T=q=>{r(I=>({...I,[q.target.name]:q.target.value}))},F=async q=>{var I,de;q.preventDefault();try{d({});const Q=hk(t);if(d(Q),Object.keys(Q).length===0&&!S){const B=await w(t);if(B.ok){const ee=B==null?void 0:B.data;g(Lt({_id:ee==null?void 0:ee.userId,role:ee==null?void 0:ee.role,isauthenticated:!0})),g(pc({userId:ee==null?void 0:ee.userId,userName:ee==null?void 0:ee.userName,email:ee==null?void 0:ee.email,phoneNo:ee==null?void 0:ee.phoneNo,role:ee==null?void 0:ee.role,isauthenticated:!0})),D({title:"Success",description:"Login successfull"}),y("/organizations")}}}catch(Q){D({title:"Error",description:((de=(I=Q==null?void 0:Q.response)==null?void 0:I.data)==null?void 0:de.message)||"Failed to login",variant:"destructive"})}},z=async q=>{var I,de;q.preventDefault();try{x({});const Q=xk(l);if(x(Q),Object.keys(Q).length===0&&!S){const B=await v(l);if(B.ok){const ee=B==null?void 0:B.data;g(Lt({_id:ee==null?void 0:ee.userId,role:ee.role,isauthenticated:!0})),g(pc({userId:ee.userId,userName:ee.userName,email:ee.email,phoneNo:ee.phoneNo,role:ee.role,isauthenticated:!0})),D({title:"Success",description:"Registraiton successfull"}),y("/organizations")}}}catch(Q){D({title:"Error",description:((de=(I=Q==null?void 0:Q.response)==null?void 0:I.data)==null?void 0:de.message)||"Failed to Register",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen overflow-y-auto relative bg-gradient-to-br from-blue-50 p-4 via-white to-blue-100 flex items-center justify-center",children:[e.jsx("div",{className:"absolute top-2 left-2",children:b&&e.jsx("button",{onClick:k,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),j?e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sm:p-8 lg:p-10",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Registration"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Create your owner account to get started                            "})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"userName",name:"userName",type:"text",value:l.userName,onChange:T,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${m.userName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.userName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:l.email,onChange:T,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:l.phoneNo,onChange:T,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${m.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:h?"text":"password",value:l.password,onChange:T,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",value:l.confirmPassword,onChange:T,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>E(!1),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Sign In"})]})})]})}):e.jsx("div",{className:"w-full max-w-md ",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs("form",{onSubmit:F,className:"space-y-5 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:t.email,onChange:P,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${o.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.email})]})]}),e.jsxs("div",{children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:h?"text":"password",value:t.password,onChange:P,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${o.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.password}),e.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?e.jsx("i",{className:"fas fa-eye-slash"}):e.jsx("i",{className:"fas fa-eye"})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Don't have an account? ",e.jsx("button",{onClick:()=>E(!0),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Register here"})]})})]})})]})},pk=({projectId:t,setProjectId:a,organizationId:l,setOrganizationId:r})=>{const o=pt(),[d,m]=A.useState(!1),[x,h]=A.useState(window.innerWidth<470);A.useLayoutEffect(()=>{const g=o.pathname.split("/");a(g[3]),r(g[1])},[o.pathname]),A.useEffect(()=>{const g=()=>{h(window.innerWidth<470)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const p={WORKERS:t?`/${l}/projectdetails/${t}/workers`:"",INVITECLIENT:t?`/${l}/projectdetails/${t}/inviteclient`:"",PREREQUIRETIES:t?`/${l}/projectdetails/${t}/prerequireties`:"",REQUIREMENTFORM:t?`/${l}/projectdetails/${t}/requirementform`:"",SITEMEASUREMENT:t?`/${l}/projectdetails/${t}/sitemeasurement`:"",SAMPLEDESIGN:t?`/${l}/projectdetails/${t}/sampledesign`:"",TECHNICALCONSULTANT:t?`/${l}/projectdetails/${t}/technicalconsultant`:"",MATERIALSELECTION:t?`/${l}/projectdetails/${t}/materialselection`:"",COSTESTIMATION:t?`/${l}/projectdetails/${t}/costestimation`:"",PAYMENTCONFIRMATION:t?`/${l}/projectdetails/${t}/paymentconfirmation`:"",ORDERMATERIALS:t?`/${l}/projectdetails/${t}/ordermaterial`:"",MATERIALARRIVED:t?`/${l}/projectdetails/${t}/materialarrival`:"",WORKSCHEDULE:t?`/${l}/projectdetails/${t}/workmainschedule`:"",INSTALLATION:t?`/${l}/projectdetails/${t}/installation`:"",QUALITYCHECK:t?`/${l}/projectdetails/${t}/qualitycheck`:"",CLEANINGSANITATION:t?`/${l}/projectdetails/${t}/cleaning`:"",PROJECTDELIVERY:t?`/${l}/projectdetails/${t}/projectdelivery`:""};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-screen h-screen",children:[x?e.jsx(ki,{labels:Kg,path:p,isOpen:d,onClose:()=>m(!1)}):e.jsx(Ci,{path:p,labels:Kg,icons:R2}),e.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:e.jsx(It,{context:{projectId:t,setProjectId:a,isMobile:x,isMobileSidebarOpen:d,openMobileSidebar:()=>m(!0),closeMobileSidebar:()=>m(!1)}})})]})})},gk=({tags:t,setState:a})=>{const[l,r]=A.useState(""),o=m=>{(m.key==="Enter"||m.key===",")&&l.trim()?(m.preventDefault(),t.includes(l.trim())||a(x=>({...x,tags:[...t,l.trim()]})),r("")):m.key==="Backspace"&&!l&&a(x=>({...x,tags:t.slice(0,-1)}))},d=m=>{a(x=>({...x,tags:t.filter((h,p)=>p!==m)}))};return e.jsxs("div",{className:"flex flex-wrap items-center border-b-1 border-[#565656] p-2 gap-2",children:[t.map((m,x)=>e.jsxs("div",{className:"bg-blue-600 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[m,e.jsx("span",{className:"cursor-pointer ml-1 text-xs",onClick:()=>d(x),children:""})]},x)),e.jsx("input",{type:"text",value:l,onChange:m=>r(m.target.value),onKeyDown:o,className:"input flex-1 outline-none text-sm border-none",placeholder:"Type and press Enter"})]})},bk=A.memo(gk),J=t=>t==="owner"?Is:t==="staff"?sa:t==="worker"?hn:t==="CTO"?fn:t==="client"?Aa:null,Z=()=>xs(t=>t.authStore),yk=async({api:t,projectData:a,orgsId:l})=>{try{let{data:r}=await t.post(`/project/createproject/${l}`,a);if(console.log("create project",r),r.ok)return r}catch(r){throw r}},wk=async({orgsId:t,api:a})=>{try{let{data:l}=await a.get(`/project/getprojects/${t}`);return l.ok?l.data:[]}catch(l){throw l}},vk=async(t,a)=>{try{let{data:l}=await a.delete(`/project/deleteproject/${t}`);if(l.ok)return l.data}catch(l){throw l}},jk=async({projectId:t,formData:a,api:l})=>{try{let{data:r}=await l.put(`/project/updateproject/${t}`,a);if(r.ok)return r}catch(r){throw r}},Nk=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["project"],queryFn:async()=>{if(!a)throw new Error("Not Allowed");if(!r.includes(a))throw new Error("Not Allowed");if(!l)throw new Error("API not found");return await wk({orgsId:t,api:l})},enabled:!!a,refetchOnWindowFocus:!1,retry:!1,staleTime:1e3*60*10})},Sk=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectData:r,orgsId:o})=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await yk({api:a,orgsId:o,projectData:r})},onSuccess:()=>{ke.invalidateQueries({queryKey:["project"]})}})},Ck=()=>{const{role:t}=Z(),a=J(t),l=["owner","CTO"];return ie({mutationFn:async r=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await vk(r,a)},onSuccess:()=>{ke.invalidateQueries({queryKey:["project"]})}})},kk=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,formData:o})=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await jk({projectId:r,formData:o,api:a})},onSuccess:()=>{ke.invalidateQueries({queryKey:["project"]})}})},L0=({message:t,onClick:a})=>{const[l,r]=A.useState(!0),[o,d]=A.useState("in"),m=()=>{d("out")},x=()=>{o==="out"&&(r(!1),a())};return l?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes bounceScaleIn {
          0% { transform: scale(0); }
          60% { transform: scale(1.1); }
          80% { transform: scale(0.95); }
          100% { transform: scale(1); }
        }
        @keyframes bounceScaleOut {
          0% { transform: scale(1); }
          20% { transform: scale(1.1); }
          100% { transform: scale(0); }
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-[#0a0a0a10] z-[1099] flex items-center justify-center px-4",onClick:()=>m(),children:e.jsxs("div",{onClick:h=>h.stopPropagation(),style:{animation:o==="in"?"bounceScaleIn 0.2s ease-out forwards":"bounceScaleOut 0.2s ease-in forwards"},onAnimationEnd:x,className:"bg-[#2f303a] text-gray-800 rounded-2xl !w-[30%] shadow-lg !px-6 max-w-lg sm:!px-3 sm:py-2 sm:w-full text-center !space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-red-500 pb-2",children:[e.jsx("span",{className:"text-white text-lg",children:"Error occured"}),e.jsx("span",{className:"cursor-pointer",onClick:m,children:e.jsx("i",{className:"fa-solid fa-xmark text-red-500 text-lg"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-lg",children:t[0].toUpperCase()+t.slice(1)}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:m,className:"cursor-pointer inline-block bg-red-500 hover:bg-red-800 duration-200 px-5 py-1 rounded-md text-white",children:"OK"})})]})]})})]}):null},Ek=["none","low","medium","high"],Ak=["Active","Delayed","In Progress","In Testing","On Track","On Hold","Approved","Cancelled","Planning","Invoice"],Ok={Active:"bg-green-100 text-green-800",Delayed:"bg-red-100 text-red-800","In Progress":"bg-blue-100 text-blue-800","In Testing":"bg-yellow-100 text-yellow-800","On Track":"bg-emerald-100 text-emerald-800","On Hold":"bg-gray-100 text-gray-800",Approved:"bg-indigo-100 text-indigo-800",Cancelled:"bg-rose-100 text-rose-800",Planning:"bg-purple-100 text-purple-800",Invoice:"bg-pink-100 text-pink-800"},Rk=({onClose:t,refetch:a,setShowForm:l,organizationId:r,isEditing:o,setEditForm:d,editForm:m,editProjectId:x})=>{var q,I,de,Q;const[h,p]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,y]=A.useState({}),j=(B,ee)=>{let{name:V,value:oe}=B.target;if(V==="tags"){ee(_=>({..._,tags:Array.from(new Set([..._.tags,oe]))}));return}if(V.includes("Date")){const _=oe?new Date(oe):null;ee(W=>{const me={...W,[V]:_};if(me.startDate&&me.dueDate){const le=me.dueDate.getTime()-me.startDate.getTime();le>=0?me.duration=Math.ceil(le/(1e3*3600*24)):me.duration=0}return me});return}ee(_=>({..._,[V]:oe}))},{mutateAsync:E,isPending:b,error:k,isError:w,reset:S}=Sk(),{mutateAsync:v,isPending:N,error:P,isError:T,reset:F}=kk(),z=async B=>{var ee,V;B.preventDefault(),B.stopPropagation();try{const oe=P0(o?m:h);y(oe),Object.keys(oe).length===0&&(o&&x?N||(await v({projectId:x,formData:m}),D({title:"Success",description:"Project Edited Successfully"})):b||(await E({projectData:h,orgsId:r}),D({title:"Success",description:"Project Created Successfully"})),a(),l(!1))}catch(oe){D({title:"Error",description:((V=(ee=oe==null?void 0:oe.response)==null?void 0:ee.data)==null?void 0:V.message)||(oe==null?void 0:oe.message)||"Operation Failed",variant:"destructive"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{onClick:B=>B.stopPropagation(),className:"bg-white w-full h-full overflow-y-auto custom-scrollbar max-w-3xl mx-auto rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 border border-gray-200 relative",children:[!b&&w&&e.jsx(L0,{message:((I=(q=k==null?void 0:k.response)==null?void 0:q.data)==null?void 0:I.message)||(k==null?void 0:k.message)||"Something went wrong",onClick:()=>S()}),!N&&T&&e.jsx(L0,{message:((Q=(de=P==null?void 0:P.response)==null?void 0:de.data)==null?void 0:Q.message)||(P==null?void 0:P.message)||"Something went wrong",onClick:()=>F()}),e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-edit"})," Edit Project"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-plus"})," Create Project"]})}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-red-500 text-xl",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),e.jsx("input",{autoFocus:!0,name:"projectName",value:o?m.projectName:h.projectName,onChange:B=>j(B,o?d:p),type:"text",placeholder:"Enter name",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.projectName&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.projectName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (days)"}),e.jsx("input",{disabled:!0,type:"number",name:"duration",onChange:B=>j(B,o?d:p),value:o?m.duration:h.duration,placeholder:"Ex: 15",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{rows:3,name:"description",onChange:B=>j(B,o?d:p),value:o?m.description:h.description,placeholder:"Brief project overview",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx(bk,{tags:o?m.tags:h.tags,setState:o?d:p})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",onChange:B=>j(B,o?d:p),value:o?m.startDate?m.startDate.toISOString().split("T")[0]:"":h.startDate?h.startDate.toISOString().split("T")[0]:"",name:"startDate",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.startDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",onChange:B=>j(B,o?d:p),value:o?m.endDate?m.endDate.toISOString().split("T")[0]:"":h.endDate?h.endDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.endDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.endDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",onChange:B=>j(B,o?d:p),value:o?m.dueDate?m.dueDate.toISOString().split("T")[0]:"":h.dueDate?h.dueDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.dueDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.dueDate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("select",{name:"priority",onChange:B=>j(B,o?d:p),value:o?m.priority:h.priority,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:Ek.map(B=>e.jsx("option",{value:B,children:B},B))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{name:"status",onChange:B=>j(B,o?d:p),value:o?m.status:h.status,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:Ak.map(B=>e.jsx("option",{value:B,children:B},B))})]})]}),e.jsx("div",{className:"text-end",children:e.jsx(M,{isLoading:b||N,type:"submit",disabled:b||N,className:"bg-blue-600 text-white px-6 w-full sm:w-40 py-2 rounded-xl hover:bg-blue-700 transition-all",children:b||N?e.jsx("div",{className:"mx-auto w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):o?"Edit Project":"Create Project"})})]})]})})},Tk=A.memo(Rk);function ui(t){if(!t)return"N/A";const a=new Date(t).getFullYear(),l=new Date(t).getMonth()+1;return`${new Date(t).getDate()}-${l}-${a}`}const Pk=({project:t,onEdit:a,organizationId:l,refetch:r})=>{const{setProjectId:o}=Ke(),{mutateAsync:d,isPending:m}=Ck(),x=E=>{o(E)},h=E=>{switch(E){case"high":return"bg-red-100 text-red-500";case"medium":return"bg-yellow-100 text-yellow-600";case"low":return"bg-green-100 text-green-600";default:return"bg-white shadow-sm"}},p=A.useMemo(()=>{var E;return(E=t.projectInformation)!=null&&E.startDate?ui(t.projectInformation.startDate):null},[]),g=A.useMemo(()=>{var E;return(E=t.projectInformation)!=null&&E.endDate?ui(t.projectInformation.endDate):null},[]),y=A.useMemo(()=>{var E;return(E=t.projectInformation)!=null&&E.dueDate?ui(t.projectInformation.dueDate):null},[]),j=async()=>{var E,b;try{if(!window.confirm("Are you sure you want to delete this project?"))return;await d(t._id),D({title:"Success",description:"Project Deleted Successfully"}),r()}catch(k){D({title:"Error",description:((b=(E=k==null?void 0:k.response)==null?void 0:E.data)==null?void 0:b.message)||(k==null?void 0:k.message)||"Failed to Delete",variant:"destructive"})}};return e.jsxs("div",{className:"p-2 sm:p-5 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xl font-semibold text-[#1f2d3d]",children:[e.jsx("i",{className:"fa-solid fa-folder-open text-blue-600"}),t.projectName]}),e.jsxs("span",{className:`text-sm px-3 py-1 rounded-full font-medium ${h(t.projectInformation.priority)}`,children:[t.projectInformation.priority," priority"]})]}),e.jsxs("div",{className:"text-sm text-gray-700 grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-y-1 sm:gap-y-2 gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-day text-gray-500"}),e.jsx("strong",{children:"Start:"})," ",p||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"End:"})," ",g||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"Due:"})," ",y||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Duration: ",t.projectInformation.duration," days"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Status: ",e.jsx("span",{className:`${Ok[t.projectInformation.status]} !bg-transparent`,children:t.projectInformation.status})," "]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Progress"}),e.jsx("div",{className:"mt-1 w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600",style:{width:`${t.completionPercentage}%`}})}),e.jsxs("div",{className:"text-sm text-right text-gray-600 mt-1",children:[t.completionPercentage,"% Complete"]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-2 text-sm text-blue-600",children:[e.jsxs($t,{to:`/${l}/projectdetails/${t._id}/requirementform`,onClick:()=>x(t._id),className:"hover:underline cursor-pointer flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-eye"}),"View"]}),e.jsxs(M,{isLoading:m,variant:"outline",onClick:j,className:"hover:underline cursor-pointer flex items-center gap-1 text-red-500 !border-0",children:[e.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),e.jsxs("button",{onClick:()=>a(t,t._id),className:"hover:underline cursor-pointer flex items-center gap-1 text-amber-500",children:[e.jsx("i",{className:"fa-solid fa-pencil"}),"edit"]})]})]})},Mk=A.memo(Pk);function Lk(t){return{projectName:t.projectName,description:t.description??"",duration:t.projectInformation.duration??0,tags:t.projectInformation.tags??[],startDate:t.projectInformation.startDate?new Date(t.projectInformation.startDate):null,endDate:t.projectInformation.endDate?new Date(t.projectInformation.endDate):null,dueDate:t.projectInformation.dueDate?new Date(t.projectInformation.dueDate):null,priority:t.projectInformation.priority??"none",status:t.projectInformation.status??"Active"}}const F0=()=>e.jsxs("div",{className:"animate-pulse bg-white border-l-8 border-blue-600 shadow-md rounded-xl p-4 flex flex-col justify-between min-h-[250px] w-full max-w-[500px]",children:[e.jsx("div",{className:"h-5 w-1/2 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"})]})]}),Fk=()=>{var T,F;const{organizationId:t}=Ae(),{openMobileSidebar:a,isMobile:l}=Ke(),{role:r}=xs(z=>z.authStore),[o,d]=A.useState(!1),[m,x]=A.useState(!1),[h,p]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,y]=A.useState(null);let{data:j,refetch:E,isPending:b,error:k,isLoading:w}=Nk(t);const S=["owner","CTO","staff"],v=A.useCallback((z,q)=>{const I=Lk(z);p(I),y(q),x(!0),d(!0)},[]),N=A.useCallback(()=>{d(!1),x(!1)},[]),P=A.useCallback((z,q)=>{v(z,q)},[v]);return w?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(z=>e.jsx(F0,{},z))}):e.jsxs("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex ",children:[l&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border-none border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-[#1f2d3d] flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-diagram-project text-blue-600 text-2xl"}),e.jsx("p",{children:Im.PROJECTS})]})]}),S.includes(r)&&e.jsx("div",{onClick:()=>{d(!o)},className:"bg-blue-600  cursor-pointer !h-[40px] !w-[40px] flex justify-center items-center rounded-full",children:e.jsx("i",{className:`fa-solid fa-plus text-white transition-transform duration-300 ${o?"rotate-135":"rotate-0"}`})})]}),e.jsx("hr",{className:"my-2 border-b-1 border-gray-300"}),!b&&((j==null?void 0:j.length)??0)===0&&e.jsxs("div",{className:"flex h-full flex-col items-center justify-center w-full py-16 text-center text-gray-500",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Projects Found"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 max-w-md",children:"Looks like you havent added any projects yet. Click the + button to get started and create your first project."}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 cursor-pointer hover:bg-blue-700 text-white px-4 py-2 rounded-md transition",children:"Create New Project"})]}),k&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((F=(T=k==null?void 0:k.response)==null?void 0:T.data)==null?void 0:F.message)||"Failed to load the projects"}),e.jsx(M,{onClick:()=>E(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!k&&e.jsxs("div",{className:"h-full flex-1 !overflow-y-auto custom-scrollbar grid md:grid-cols-2 gap-6",children:[b&&[...Array(6)].map((z,q)=>e.jsx(A.Fragment,{children:e.jsx(F0,{})},q)),!b&&(j==null?void 0:j.length)>0&&(j==null?void 0:j.map((z,q)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-[256px] sm:!h-[270px] md:!h-[330px] lg:!h-[282px] flex flex-col shadow-md rounded-xl overflow-hidden border-l-8 border-blue-600 bg-white",children:e.jsx(Mk,{refetch:E,onEdit:P,index:q,project:z,organizationId:t})},z._id)})))]}),o&&e.jsx("div",{onClick:N,className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx(Tk,{onClose:N,refetch:E,setShowForm:d,organizationId:t,isEditing:m,setEditForm:p,editForm:h,editProjectId:g})})]})},Dk=()=>{const t=Me();return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center px-4 py-10 bg-gray-100",children:e.jsxs("div",{className:"max-w-lg w-full text-center bg-white rounded-xl shadow-md p-8 space-y-6 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-6xl sm:text-7xl font-extrabold text-blue-700",children:"404"}),e.jsx("p",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mt-2",children:"Page Not Found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sorry! The page youre looking for doesnt exist or has been moved."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:()=>t("/organizations"),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-house mr-2"}),"Go to Home"]}),e.jsxs("button",{onClick:()=>t(-1),className:"w-full sm:w-auto px-6 py-3 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-2"}),"Go Back"]})]})]})})},_k=async t=>{const{data:a}=await Is.post("/orgs/createorganziation",t);if(!a.ok)throw new Error(a.message);return a.data},qk=async t=>{const{data:a}=await t.get("/orgs/getorganizations");return a.ok?a.data:null},zk=async(t,a)=>{const{data:l}=await a.get(`/orgs/getsingleorganization/${t}`);return l.ok?l.data:{}},Uk=async({updateField:t,orgsId:a,api:l})=>{const{data:r}=await l.put(`/orgs/updateorganization/${a}`,t);if(!r.ok)throw new Error(r.message);return r.data},$k=async(t,a)=>{const{data:l}=await a.put(`/orgs/deleteorganization/${t}`);if(!l.ok)throw new Error(l.message);return l},Ik=()=>{const t=["owner","staff","CTO","client","worker"],{role:a}=Z(),l=J(a);return Fe({queryKey:["myOrgs"],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await qk(l)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},Bk=t=>{const a=["owner","staff","CTO","client","worker"],{role:l}=Z(),r=J(l);return Fe({queryKey:["myOrgs"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await zk(t,r)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},Hk=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await _k(r)},onSuccess:()=>{ke.invalidateQueries({queryKey:["myOrgs"]})}})},Qk=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({updateField:r,orgsId:o})=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Uk({updateField:r,orgsId:o,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["myOrgs"]})}})},Gk=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await $k(r,l)},onSuccess:()=>{ke.invalidateQueries({queryKey:["myOrgs"]})}})},Kk=async(t,a)=>{const{data:l}=await a.get(`/orgs/getstaffsoforganization/${t}`);return l.ok,l.data},Vk=async(t,a)=>{const{data:l}=await a.post("/orgs/invitestafftoorganization",t);if(!l.ok)throw new Error(l.message);return l.data},Yk=async({staffId:t,orgId:a,api:l})=>{const{data:r}=await l.patch(`/orgs/removestafffromorganziation?staffId=${t}&orgId=${a}`);if(!r.ok)throw new Error(r.message);return r.data},Wk=t=>{const a=["owner","staff","CTO"],{role:l}=Z(),r=J(l);return Fe({queryKey:["staffs",t],queryFn:async()=>{if(!l)throw new Error("Not authrized");if(!a.includes(l))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await Kk(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},Xk=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Vk(r,l)}})},Zk=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({staffId:r,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Yk({staffId:r,orgId:o,api:l})},onSuccess:(r,o)=>{ke.invalidateQueries({queryKey:["staffs",o.orgId]})}})},Jk=async(t,a)=>{const{data:l}=await a.get(`/orgs/getctooforganization/${t}`);return l.ok,l.data},eE=async(t,a)=>{const{data:l}=await a.post("/orgs/invitectotoorganization",t);if(!l.ok)throw new Error(l.message);return l.data},tE=async({CTOId:t,orgId:a,api:l})=>{const{data:r}=await l.patch(`/orgs/removectofromorganziation?CTOId=${t}&orgId=${a}`);if(!r.ok)throw new Error(r.message);return r.data},sE=t=>{const a=["owner","staff","CTO"],{role:l}=Z(),r=J(l);return Fe({queryKey:["CTO",t],queryFn:async()=>{if(!l)throw new Error("Not authrized");if(!a.includes(l))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await Jk(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},aE=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async r=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await eE(r,l)}})},nE=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({CTOId:r,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await tE({CTOId:r,orgId:o,api:l})},onSuccess:(r,o)=>{ke.invalidateQueries({queryKey:["CTO",o.orgId]})}})},lE=async({projectId:t,api:a,organizationId:l})=>{const{data:r}=await a.post("orgs/inviteclienttoproject",{projectId:t,organizationId:l});if(!r.ok)throw new Error(r.message);return r.data},rE=()=>{const t=["owner","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,organizationId:o})=>{if(!a)throw new Error("not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await lE({projectId:r,api:l,organizationId:o})}})},iE=async(t,a)=>{const{data:l}=await Is.get(`/orgs/getclientsofproject/${t}/${a}`);return l.ok,console.log("data",l),l.data},oE=(t,a)=>{const l=["owner","staff","CTO"],{role:r}=Z(),o=J(r);return Fe({queryKey:["CTO",t],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await iE(t,a)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},cE=async({payload:t,api:a})=>{console.log("payload",t);const{data:l}=await a.post("orgs/inviteworker",t);if(!l.ok)throw new Error(l.message);return l.data},dE=async(t,a)=>{const{data:l}=await a.get(`orgs/getworker/${t}`);if(!l.ok)throw new Error(l.message);return l.data},uE=async({workerId:t,projectId:a,api:l})=>{const{data:r}=await l.put(`orgs/removeworker/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},mE=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async r=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await cE({api:l,payload:r})}})},fE=t=>{const a=["owner","staff","CTO"],{role:l}=Z(),r=J(l);return Fe({queryKey:["workers",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not Allowed to Make this api Call");if(!r)throw new Error("API instance not found for role");return await dE(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},hE=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({workerId:r,projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await uE({workerId:r,projectId:o,api:l})},onSuccess:()=>ke.invalidateQueries({queryKey:["workers"]})})},xE=({children:t})=>{const[a,l]=A.useState(!1),r=A.useRef(null);return A.useEffect(()=>{const o=d=>{r.current&&!r.current.contains(d.target)&&l(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]),e.jsx("div",{ref:r,className:"relative inline-block text-left",children:ct.Children.map(t,o=>{if(ct.isValidElement(o)){if(o.type===Ly)return ct.cloneElement(o,{onClick:()=>l(!a)});if(o.type===Fy)return ct.cloneElement(o,{isOpen:a,onClose:()=>l(!1)})}return o})})},Ly=({asChild:t=!1,children:a,onClick:l})=>t&&ct.isValidElement(a)?ct.cloneElement(a,{onClick:r=>{var o;if(r.stopPropagation(),l==null||l(),ct.isValidElement(a)){const d=(o=a.props)==null?void 0:o.onClick;typeof d=="function"&&d(r)}}}):e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),l==null||l()},className:"inline-flex items-center justify-center",children:a}),Fy=({align:t="start",className:a="",children:l,isOpen:r=!1,onClose:o})=>{if(!r)return null;const d=t==="end"?"right-0":"left-0";return e.jsx("div",{className:`absolute ${d} mt-2 w-48 rounded-xl bg-white shadow-lg border border-gray-200 py-1 z-50 ${a}`,children:ct.Children.map(l,m=>ct.isValidElement(m)&&m.type===Dy?ct.cloneElement(m,{onClose:o}):m)})},Dy=({className:t="",children:a,onClick:l,onClose:r})=>{const o=()=>{l==null||l(),r==null||r()};return e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center ${t}`,onClick:o,children:a})},sr=({variant:t="default",className:a="",children:l})=>{const d=`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${{default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",outline:"border border-blue-200 text-blue-700"}[t]} ${a}`.trim();return e.jsx("span",{className:d,children:l})};var _y={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},D0=ct.createContext&&ct.createContext(_y),pE=["attr","size","title"];function gE(t,a){if(t==null)return{};var l=bE(t,a),r,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(o=0;o<d.length;o++)r=d[o],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(l[r]=t[r])}return l}function bE(t,a){if(t==null)return{};var l={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(a.indexOf(r)>=0)continue;l[r]=t[r]}return l}function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r])}return t},Nc.apply(this,arguments)}function _0(t,a){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),l.push.apply(l,r)}return l}function Sc(t){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?_0(Object(l),!0).forEach(function(r){yE(t,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):_0(Object(l)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(l,r))})}return t}function yE(t,a,l){return a=wE(a),a in t?Object.defineProperty(t,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[a]=l,t}function wE(t){var a=vE(t,"string");return typeof a=="symbol"?a:a+""}function vE(t,a){if(typeof t!="object"||!t)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var r=l.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function qy(t){return t&&t.map((a,l)=>ct.createElement(a.tag,Sc({key:l},a.attr),qy(a.child)))}function Ei(t){return a=>ct.createElement(jE,Nc({attr:Sc({},t.attr)},a),qy(t.child))}function jE(t){var a=l=>{var{attr:r,size:o,title:d}=t,m=gE(t,pE),x=o||l.size||"1em",h;return l.className&&(h=l.className),t.className&&(h=(h?h+" ":"")+t.className),ct.createElement("svg",Nc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,r,m,{className:h,style:Sc(Sc({color:t.color||l.color},l.style),t.style),height:x,width:x,xmlns:"http://www.w3.org/2000/svg"}),d&&ct.createElement("title",null,d),t.children)};return D0!==void 0?ct.createElement(D0.Consumer,null,l=>a(l)):a(_y)}function NE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function SE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function CE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function kE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function EE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function AE({organization:t}){const a=Gk(),l=Me(),r=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await a.mutateAsync(t._id),D({title:"Success",description:"Organization deleted successfully"})}catch(o){D({title:"Error",description:o.message||"Failed to delete organization",variant:"destructive"})}};return e.jsxs(Le,{className:"group hover:shadow-2xl transition-all duration-300 hover:bg-white hover:scale-105",children:[e.jsx(bs,{className:"pb-4 bg-gradient-to-br from-blue-50 to-blue-100/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t!=null&&t.logoUrl?e.jsx("img",{src:t.logoUrl||"/placeholder.svg",alt:t.organizationName,className:"w-8 h-8 rounded-lg object-cover"}):e.jsx(EE,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-blue-900 text-lg truncate",children:t==null?void 0:t.organizationName}),t.type&&e.jsx(sr,{variant:"default",className:"mt-1",children:t.type})]})]}),e.jsxs(xE,{children:[e.jsx(Ly,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(SE,{className:"h-4 w-4"})})}),e.jsx(Fy,{align:"end",children:e.jsxs(Dy,{onClick:r,className:"text-red-600 focus:text-red-600",children:[e.jsx(kE,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]})}),e.jsx(Kt,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx(NE,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),(t==null?void 0:t.address)||"N/A"]}),(t==null?void 0:t.organizationPhoneNo)&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(CE,{className:"w-4 h-4 mr-2 text-blue-500"}),t.organizationPhoneNo]}),e.jsx("div",{className:"flex items-center justify-end pt-3 border-t border-blue-100",children:e.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(`/organizations/${t._id}`),className:"border-blue-200 text-blue-600 hover:bg-blue-50",children:"View Details"})})]})})]})}const Ls=({className:t="",error:a,...l})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("textarea",{className:d,...l}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},zy=({open:t,onOpenChange:a,children:l})=>{const r=A.useRef(null);return A.useEffect(()=>{const o=m=>{m.key==="Escape"&&a(!1)},d=m=>{r.current&&!r.current.contains(m.target)&&a(!1)};return t&&(document.addEventListener("keydown",o),document.addEventListener("mousedown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.removeEventListener("mousedown",d),document.body.style.overflow="unset"}},[t,a]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{ref:r,className:"relative z-50 w-full max-w-lg mx-4",children:l})]}):null},OE=({className:t="",children:a})=>e.jsx("div",{className:`bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto ${t}`,children:a}),RE=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-4 ${t}`,children:a}),TE=({className:t="",children:a})=>e.jsx("h2",{className:`text-xl font-semibold text-gray-900 ${t}`,children:a});function PE({isOpen:t,onClose:a}){const[l,r]=A.useState({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),o=Hk(),d=async x=>{var h,p;if(x.preventDefault(),!l.organizationName.trim()){D({title:"Error",description:"Organization name is required",variant:"destructive"});return}try{await o.mutateAsync(l),D({title:"Success",description:"Organization created successfully"}),r({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),a()}catch(g){D({title:"Error",description:((p=(h=g==null?void 0:g.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to create organization",variant:"destructive"})}},m=x=>{r(h=>({...h,[x.target.name]:x.target.value}))};return e.jsx(zy,{open:t,onOpenChange:a,children:e.jsxs(OE,{className:"sm:max-w-md p-4",children:[e.jsx(RE,{children:e.jsx(TE,{className:"text-blue-900",children:"Create New Organization"})}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"organizationName",className:"text-blue-800",children:"Organization Name *"}),e.jsx(ce,{id:"organizationName",name:"organizationName",value:l.organizationName,onChange:m,placeholder:"Enter organization name",className:"border-blue-200 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"type",className:"text-blue-800",children:"Type"}),e.jsx(ce,{id:"type",name:"type",value:l.type,onChange:m,placeholder:"e.g., Company, NGO, Startup",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"organizationPhoneNo",className:"text-blue-800",children:"Phone Number"}),e.jsx(ce,{id:"organizationPhoneNo",name:"organizationPhoneNo",value:l.organizationPhoneNo,onChange:m,placeholder:"Enter phone number",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"address",className:"text-blue-800",children:"Address"}),e.jsx(Ls,{id:"address",name:"address",value:l.address,onChange:m,placeholder:"Enter organization address",className:"border-blue-200 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"logoUrl",className:"text-blue-800",children:"Logo URL"}),e.jsx(ce,{id:"logoUrl",name:"logoUrl",value:l.logoUrl,onChange:m,placeholder:"Enter logo URL",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:a,className:"border-blue-200 text-blue-600",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:o.isPending,className:"bg-blue-600 hover:bg-blue-700",children:o.isPending?"Creating...":"Create Organization"})]})]})]})})}const _e=({className:t=""})=>e.jsx("div",{className:`animate-pulse rounded-md bg-gray-200 ${t}`});function ME(){var E,b;const[t,a]=A.useState(!1),[l,r]=A.useState(!1),[o,d]=A.useState(window.innerWidth<470),m=Me();let{data:x,isLoading:h,error:p,refetch:g}=Ik();const y={ADMIN:"/login",STAFF:"/login/staff",CTO:"/login/cto",WORKER:"/login/worker",CLIENT:"/login/client"},j=()=>{r(!0)};return A.useEffect(()=>{const k=()=>{d(window.innerWidth<470)};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),h?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(_e,{className:"h-8 w-48 mb-2"}),e.jsx(_e,{className:"h-4 w-64"})]}),e.jsx(_e,{className:"h-10 w-40"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(k=>e.jsx(_e,{className:"h-24 w-full rounded-2xl"},k))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6].map(k=>e.jsx(_e,{className:"h-64 w-full rounded-2xl"},k))})]})]}):p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Organizations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:((b=(E=p==null?void 0:p.response)==null?void 0:E.data)==null?void 0:b.message)||(p==null?void 0:p.message)||"Something happened try again please"}),e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[e.jsxs(M,{onClick:()=>g(),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]}),e.jsxs(M,{onClick:()=>m("/login/staff"),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Login"]})]})]})}):e.jsxs("main",{className:"w-screen h-screen flex flex:1",children:[o?e.jsx(ki,{labels:rc,path:y,isOpen:l,onClose:()=>r(!1)}):e.jsx(Ci,{path:y,labels:rc,icons:Sb}),e.jsxs("section",{className:"w-full h-full",children:[e.jsx("div",{className:"max-w-full min-h-[10%] bg-white/90 backdrop-blur-sm border-b border-blue-200",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 py-3",children:e.jsxs("div",{className:"flex  sm:flex-row items-center sm:items-center justify-between gap-3 sm:gap-6",children:[e.jsxs("div",{className:"flex flex:1 items-center",children:[o&&e.jsx("button",{onClick:j,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"flex flex-col gap-1 w-[50vw]",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-blue-800",children:[e.jsx("i",{className:"fas fa-building mr-2 text-blue-600"}),"Organization"]}),e.jsx("p",{className:"text-sm sm:inline hidden text-blue-500",children:"Manage your organization and teams"})]})]}),!x&&e.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3 sm:gap-4 w-full sm:w-auto",children:e.jsxs(M,{onClick:()=>a(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Organization"}),e.jsx("span",{className:"inline sm:hidden",children:"Create"})]})})]})})}),e.jsx("div",{className:" min-h-[calc(100vh-10%)] sm:min-h-[calc(100vh-11%)] bg-gradient-to-br from-blue-50 via-white to-blue-100",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 py-6 relative",children:[x?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Your Organization"})}),e.jsx("div",{className:" xl:!w-[30%] lg:w-[50%] sm:w-[60%] w-[100%]",children:e.jsx(AE,{organization:x})})]}):e.jsx("div",{className:"text-center py-2 overflow-y-auto max-h-[calc(100vh-15vh)]",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-4xl"})}),e.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:"No Organizations Yet"}),e.jsx("p",{className:"text-blue-600 mb-6 text-sm sm:text-base",children:"Create your first organization to start managing your teams and projects effectively"}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-6 text-left",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-4 text-center",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Getting Started"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Create your organization with basic details"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Invite team members to join your organization"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Start managing tasks and projects together"})]})]})]}),e.jsxs(M,{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Create Your First Organization"]})]})}),e.jsx(PE,{isOpen:t,onClose:()=>a(!1)})]})})]})]})}const LE=async(t,a,l)=>(await l.get(`/getusers/${t}/${a}`)).data.data,di=(t,a)=>{const{role:l}=Z(),r=J(l),o=["owner","staff","CTO"];return Fe({queryKey:["get-users",t,a],queryFn:async()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return await LE(t,a,r)},retry:!1,refetchOnMount:!1})},Xo=({title:t,icon:a,list:l,isLoading:r})=>{const[o,d]=A.useState(""),m=A.useMemo(()=>l!=null&&l.length?l==null?void 0:l.filter(x=>{var h,p;return((h=x.name)==null?void 0:h.toLowerCase().includes(o.toLowerCase()))||((p=x.email)==null?void 0:p.toLowerCase().includes(o.toLowerCase()))}):[],[l,o]);return e.jsxs("div",{className:"bg-white border rounded-xl !min-h-[50%] !max-h-[93%] overflow-hidden border-blue-100 shadow-sm px-4 py-5 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-blue-800 font-semibold flex items-center gap-2 text-base",children:[e.jsx("i",{className:`fas ${a} text-blue-600 text-lg`}),t]}),l&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs font-medium px-2 py-0.5 rounded-full",children:[l==null?void 0:l.length," total"]})]}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search name or email",value:o,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 border border-blue-200 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-400"})}),e.jsx("div",{className:"max-h-[100%] overflow-y-auto custom-scrollbar pr-1 scroll-smooth scrollbar-thin scrollbar-thumb-blue-300 hover:scrollbar-thumb-blue-400 scrollbar-track-blue-100",children:r?e.jsx(_e,{className:"h-4 w-1/2 mx-2 mb-2"}):(m==null?void 0:m.length)>0?e.jsx("ul",{className:"space-y-3 pt-1",children:m==null?void 0:m.map(x=>e.jsxs("li",{className:"flex items-start gap-3 px-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mt-0.5",children:e.jsx("i",{className:"fas fa-user"})}),e.jsxs("div",{className:"text-sm text-gray-700 leading-tight",children:[e.jsx("p",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:x.email})]})]},x._id))}):e.jsxs("p",{className:"text-sm text-gray-500 text-center py-6",children:["No ",t.toLowerCase()," found."]})})]})};function FE(){const{organizationId:t}=Ae(),{openMobileSidebar:a,isMobile:l}=Ke(),r=Me(),[o,d]=A.useState(!1),[m,x]=A.useState(""),[h,p]=A.useState(!1),[g,y]=A.useState(!1),[j,E]=A.useState(""),[b,k]=A.useState("");let{data:w,isLoading:S,error:v}=Bk(t);Array.isArray(w)&&(w=w[0]);const N=Qk(),{data:P,isLoading:T}=di(t,"staff"),{data:F,isLoading:z}=di(t,"CTO"),{data:q,isLoading:I}=di(t,"worker"),{data:de,isLoading:Q}=di(t,"client"),B=async()=>{if(!m.trim()){D({title:"Error",description:"Organization name cannot be empty",variant:"destructive"});return}try{await N.mutateAsync({updateField:{organizationName:m},orgsId:t}),D({title:"Success",description:"Organization name updated successfully"}),d(!1)}catch(U){D({title:"Error",description:U.message||"Failed to update organization name",variant:"destructive"})}},ee=()=>{x((w==null?void 0:w.organizationName)||""),d(!0)},V=()=>{x(""),d(!1)},oe=()=>{E((w==null?void 0:w.organizationPhoneNo)||""),p(!0)},_=()=>{k((w==null?void 0:w.address)||""),y(!0)},W=async()=>{var U,L;if(!j.trim()){D({title:"Error",description:"Phone number cannot be empty",variant:"destructive"});return}if(!/^\d{10}$/.test(j)){D({title:"Error",description:"Phone number should contain 10 digits number",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{organizationPhoneNo:j}}),D({title:"Success",description:"Phone number updated successfully"}),p(!1)}catch(K){D({title:"Error",description:((L=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:L.message)||(K==null?void 0:K.message)||"Failed to update phone number",variant:"destructive"})}},me=async()=>{var U,L;if(!b.trim()){D({title:"Error",description:"Address cannot be empty",variant:"destructive"});return}if(b.length>150){D({title:"Error",description:"Address cannot be more than 150 characters",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{address:b}}),D({title:"Success",description:"Address updated successfully"}),y(!1)}catch(K){D({title:"Error",description:((L=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:L.message)||(K==null?void 0:K.message)||"Failed to update address",variant:"destructive"})}},le=()=>{E(""),p(!1)},R=()=>{k(""),y(!1)};return S?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(_e,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(_e,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(_e,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(_e,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(_e,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_e,{className:"h-96 w-full rounded-2xl"})})]})})]}):v||!w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(M,{onClick:()=>r("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsx("div",{className:"flex w-full h-full ",children:e.jsxs("div",{className:"min-h-full w-full max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white bg-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10 w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-3 flex flex-row sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-6",children:e.jsxs("div",{className:"flex flex-row sm:items-center justify-between  w-full gap-3 sm:gap-4",children:[l?e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}):e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>r("/organizations"),className:"text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Back to Organizations"}),e.jsx("span",{className:"md:hidden",children:"Back"})]}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:w!=null&&w.logoUrl?e.jsx("img",{src:(w==null?void 0:w.logoUrl)||yt.COMPANY_LOGO,alt:w==null?void 0:w.organizationName,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"}):e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Company Logo",className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"})}),e.jsx("div",{className:"min-w-0 flex-1 ",children:o?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx(ce,{value:m,onChange:U=>x(U.target.value),onKeyPress:U=>U.key==="Enter"&&B(),placeholder:"Organization name",className:"w-full text-lg sm:text-xl font-bold border-2 border-blue-300 focus:border-blue-500 rounded-xl bg-white/90 backdrop-blur-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"primary",onClick:B,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:V,className:"border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-blue-900 truncate",children:(w==null?void 0:w.organizationName)||"N/A"}),(w==null?void 0:w.type)&&e.jsx(sr,{className:"mt-1 bg-blue-100 text-blue-700 text-xs",children:w==null?void 0:w.type})]})})]}),!o&&e.jsx("div",{className:"flex justify-end sm:justify-start  w-fit flex-shrink-0",children:e.jsxs(M,{variant:"outline",onClick:ee,className:"border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl bg-white/80 backdrop-blur-sm",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Name"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})})]})})}),e.jsx("div",{className:"max-w-full mx-auto p-4 sm:p-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm h-fit",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx(ce,{value:j,type:"tel",onChange:U=>E(U.target.value),placeholder:"Enter phone number",className:"text-sm border-blue-200 focus:border-blue-500 bg-white flex-1",onKeyPress:U=>U.key==="Enter"&&W()})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:le,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(M,{size:"sm",variant:"primary",onClick:W,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:(w==null?void 0:w.organizationPhoneNo)||"N/A"})]}),e.jsx(M,{size:"sm",variant:"ghost",onClick:oe,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm ",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:b,onChange:U=>k(U.target.value),placeholder:"Enter address",className:"w-full text-sm border-2 border-blue-200 focus:border-blue-500 bg-white rounded-lg p-2 resize-none focus:outline-none",rows:3,onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),me())}}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-600",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-[13px]"}),e.jsx("span",{className:"text-[12px] sm:text-sm",children:"Press Shift + Enter for next line"})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:R,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(M,{size:"sm",variant:"primary",onClick:me,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-start gap-3  w-full",children:[e.jsxs("div",{className:"flex items-start gap-3 ",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsx("div",{className:"max-w-[90%] overflow-h-auto !max-h-[150px] ",children:e.jsx("span",{className:"text-gray-700 text-sm sm:text-base break-words whitespace-pre-wrap",children:(w==null?void 0:w.address)||"N/A"})})]}),e.jsx(M,{size:"sm",variant:"ghost",onClick:_,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto flex-shrink-0",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})})]})})})}),e.jsxs("div",{className:"px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-3  sm:min-h-[65vh] sm:max-h-[100%]",children:[e.jsx(Xo,{title:"Staffs",icon:"fa-user-tie",list:P,isLoading:T}),e.jsx(Xo,{title:"CTOs",icon:"fa-user-cog",list:F,isLoading:z}),e.jsx(Xo,{title:"Workers",icon:"fa-user-hard-hat",list:q,isLoading:I}),e.jsx(Xo,{title:"Clients",icon:"fa-user-friends",list:de,isLoading:Q})]})]})})}function DE(){const t=Me(),[a]=Oc(),l=a.get("invite"),[r,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",staffName:""}),[d,m]=A.useState(!1),[x,h]=A.useState(!1),[p,g]=A.useState({}),y=Z1(),j=ys();A.useEffect(()=>{l||(D({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[l,t]);const E=()=>{const w={};return r.staffName.trim()?r.staffName.trim().length<2&&(w.staffName="Name must be at least 2 characters"):w.staffName="Full name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(w.email="Please enter a valid email address"):w.email="Email is required",r.phoneNo.trim()?/^\d{10}$/.test(r.phoneNo.trim())||(w.phoneNo="Please enter a valid phone number"):w.phoneNo="Phone number is required",r.password.trim()?r.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",r.confirmPassword.trim()?r.password!==r.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",g(w),Object.keys(w).length===0},b=w=>{const{name:S,value:v}=w.target;o(N=>({...N,[S]:v})),p[S]&&g(N=>({...N,[S]:""}))},k=async w=>{if(w.preventDefault(),!l){D({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(E())try{const S=await y.mutateAsync({invite:l,email:r.email,password:r.password,phoneNo:r.phoneNo,staffName:r.staffName});D({title:"Success",description:"Registration successful! You can now login with your credentials."});const v=S.data;j(Lt({_id:v._id,role:v.role,isauthenticated:!0})),j($c({staffId:v._id,staffName:v.staffName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),setTimeout(()=>{t("/")},2e3)}catch(S){D({title:"Registration Failed",description:S.message||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute z-[10] top-[5%]  right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-plus text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as staff member"})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"staffName",name:"staffName",type:"text",value:r.staffName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${p.staffName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.staffName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:r.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${p.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:r.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${p.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:d?"text":"password",value:r.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:r.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password===r.confirmPassword&&r.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/stafflogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Kt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function q0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),[r,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:x,openMobileSidebar:h}=Ke(),p=ys(),g=W1(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",m(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;l(S=>({...S,[k]:w})),d[k]&&m(S=>({...S,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const v=(await g.mutateAsync(a)).data;p(Lt({_id:v.staffId,role:v.role,isauthenticated:!0})),p($c({staffId:v.staffId,staffName:v.staffName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),D({title:"Success",description:"Registration successful"}),t("/organizations")}catch(S){D({title:"Login Failed",description:((w=(k=S==null?void 0:S.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:x&&e.jsx("button",{onClick:h,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Staff Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:r?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!r),children:e.jsx("i",{className:`fas ${r?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}const Qc=({className:t="",children:a})=>e.jsx("div",{className:`relative inline-block rounded-full overflow-hidden ${t}`,children:a}),Uy=({className:t="",...a})=>e.jsx("img",{className:`h-full w-full object-cover ${t}`,...a}),Gc=({className:t="",children:a})=>e.jsx("div",{className:`flex h-full w-full items-center justify-center bg-blue-100 text-blue-800 ${t}`,children:a});function z0(){const{projectId:t,organizationId:a}=Ae(),{openMobileSidebar:l,isMobile:r}=Ke(),[o,d]=A.useState(""),[m,x]=A.useState(!1),{data:h,isLoading:p}=fE(t||""),g=mE(),y=hE(),j=async()=>{var v,N;try{const P=await g.mutateAsync({projectId:t||"",role:"worker",organizationId:a});d((P==null?void 0:P.inviteLink)||P),D({title:"Success",description:"Worker invitation link generated successfully"})}catch(P){D({title:"Error",description:((N=(v=P==null?void 0:P.response)==null?void 0:v.data)==null?void 0:N.message)||(P==null?void 0:P.message)||"Failed to generate invitation link",variant:"destructive"})}},E=async()=>{try{await navigator.clipboard.writeText(o),x(!0),D({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{D({title:"Error",description:"Failed to copy link",variant:"destructive"})}},b=()=>{const v=`You're invited to work with us Click this link to join: ${o}`,N=`https://wa.me/?text=${encodeURIComponent(v)}`;window.open(N,"_blank")},k=async(v,N)=>{if(window.confirm(`Are you sure you want to remove ${N} from this project?`))try{await y.mutateAsync({workerId:v,projectId:t||""}),D({title:"Success",description:`${N} has been removed from the project`})}catch(P){D({title:"Error",description:P.message||"Failed to remove worker",variant:"destructive"})}},w=v=>v?v.split(" ").map(N=>N[0]).join("").toUpperCase():"WK",S=v=>({carpenter:"bg-amber-100 text-amber-800 border-amber-200",plumber:"bg-blue-100 text-blue-800 border-blue-200",electrician:"bg-yellow-100 text-yellow-800 border-yellow-200",painter:"bg-green-100 text-green-800 border-green-200",mason:"bg-gray-100 text-gray-800 border-gray-200",welder:"bg-red-100 text-red-800 border-red-200"})[v.toLowerCase()]||"bg-purple-100 text-purple-800 border-purple-200";return e.jsxs("div",{className:"max-h-full sm:overflow-y-hidden custom-scrollbar",children:[e.jsx("div",{className:"bg-white ",children:e.jsx("div",{className:"max-w-full mx-auto  py-2",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Workers"]})})})]})})})}),e.jsx("div",{className:"max-w-full !max-h-[100%] overflow-y-auto custom-scrollbar mx-auto p-2",children:e.jsxs("div",{className:"grid grid-cols-1 max-h-full lg:grid-cols-3 gap-6 lg:gap-8 w-full",children:[e.jsx("div",{className:"lg:col-span-1 h-fit space-y-6",children:e.jsxs(Le,{className:"bg-white backdrop-blur-sm rounded-2xl shadow-md border-l-4 border-green-600 ",children:[e.jsx(bs,{children:e.jsxs(Ps,{className:"text-gray-800 flex items-center text-lg",children:[e.jsx("i",{className:"fas fa-user-plus mr-2 text-green-600"}),"Invite Workers"]})}),e.jsx(Kt,{className:"space-y-4",children:o?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{className:"text-gray-700 font-medium",children:"Invitation Link"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ce,{value:o,readOnly:!0,className:"border-green-200 bg-green-50 text-sm flex-1 min-w-0"}),e.jsx(M,{onClick:E,variant:"outline",size:"icon",className:"border-green-200 text-green-600 hover:bg-green-50 rounded-xl flex-shrink-0",children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(M,{onClick:E,variant:"outline",className:"w-full border-green-200 text-green-600 hover:bg-green-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-copy mr-2"}),"Copy Link"]}),e.jsxs(M,{onClick:b,className:"w-full bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"}),"Share on WhatsApp"]}),e.jsxs(M,{onClick:()=>{d("")},variant:"outline",className:"w-full border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Generate Another"]})]})]}):e.jsxs(M,{onClick:j,isLoading:g.isPending,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-link mr-2"}),g.isPending?"Generating...":"Generate Invitation Link"]})})]})}),e.jsx("div",{className:"lg:col-span-2 sm:max-h-[43%] lg:!max-h-[48%] rounded-2xl border-l-4 border-orange-600  overflow-y-auto shadow-md custom-scrollbar",children:e.jsxs(Le,{className:"bg-white/70 backdrop-blur-sm border-0  shadow-xl",children:[e.jsx(bs,{children:e.jsx(Ps,{className:"text-gray-800 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-hard-hat mr-2 text-orange-600"}),e.jsxs("span",{className:"text-lg",children:["Project Workers (",(h==null?void 0:h.length)||0,")"]})]})})}),e.jsx(Kt,{children:p?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-blue-100 rounded-xl",children:[e.jsx(_e,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(_e,{className:"h-4 w-32"}),e.jsx(_e,{className:"h-3 w-48"})]}),e.jsx(_e,{className:"h-8 w-20"})]},v))}):h&&h.length>0?e.jsx("div",{className:"space-y-4 overflow-hidden",children:h.map(v=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border border-blue-100 rounded-xl hover:bg-blue-50/50 transition-all duration-200 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[e.jsx(Qc,{className:"w-12 h-12 border-2 border-blue-200 flex-shrink-0",children:e.jsx(Gc,{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white font-semibold",children:w(v==null?void 0:v.workerName)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 truncate",children:(v==null?void 0:v.workerName)||(v==null?void 0:v.name)}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-gray-600 gap-1 sm:gap-0",children:[v.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-envelope text-xs"}),e.jsx("span",{className:"truncate",children:v.email})]}),v.phoneNo&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-phone text-xs"}),e.jsx("span",{children:v.phoneNo})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs(sr,{className:`text-xs ${S((v==null?void 0:v.specifiedRole)||(v==null?void 0:v.role)||"worker")}`,children:[e.jsx("i",{className:"fas fa-tools mr-1"}),(v==null?void 0:v.specifiedRole)||(v==null?void 0:v.role)||"Worker"]})})]})]}),e.jsxs(M,{onClick:()=>k(v._id,(v==null?void 0:v.workerName)||(v==null?void 0:v.name)),variant:"danger",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50 rounded-xl w-full sm:w-auto",isLoading:y.isPending,children:[e.jsx("i",{className:"fas fa-user-minus mr-1"}),"Remove"]})]},v._id))}):e.jsxs("div",{className:"text-center py-12 min-h-[100vh]",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-hard-hat text-orange-500 text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Workers Assigned"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm sm:text-base",children:"Start building your team by inviting skilled workers to this project"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6"}),e.jsxs(M,{onClick:()=>{j()},className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Invite First Worker"]})]})})]})})]})})]})}function _E(){const t=Me(),[a]=Oc(),l=a.get("invite"),r=ys(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",workerName:""}),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState(null),b=uk();A.useEffect(()=>{if(!l){D({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3);return}try{const v=JSON.parse(atob(l));E(v)}catch{D({title:"Invalid Invitation",description:"The invitation link is corrupted or invalid.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3)}},[l,t]);const k=()=>{const v={};return o.workerName.trim()?o.workerName.trim().length<2&&(v.workerName="workerName must be at least 2 characters"):v.workerName="workerName is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(v.email="Please enter a valid email address"):v.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(v.phoneNo="Please enter a valid phone number"):v.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(v.password="Password must be at least 6 characters"):v.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(v.confirmPassword="Passwords do not match"):v.confirmPassword="Please confirm your password",y(v),Object.keys(v).length===0},w=v=>{const{name:N,value:P}=v.target;d(T=>({...T,[N]:P})),g[N]&&y(T=>({...T,[N]:""}))},S=async v=>{var N,P;try{if(v.preventDefault(),!l){D({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(!k())return;const T=await b.mutateAsync({invite:l,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,workerName:o.workerName}}),F=T==null?void 0:T.data;r(Lt({role:F==null?void 0:F.role,isauthenticated:!0,_id:F==null?void 0:F._id})),r(Ic({workerId:F==null?void 0:F._id,workerName:F==null?void 0:F.workerName,email:F==null?void 0:F.email,phoneNo:F==null?void 0:F.phoneNo,role:F==null?void 0:F.role,isauthenticated:!0})),D({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(T){D({title:"Registration Failed",description:((P=(N=T==null?void 0:T.response)==null?void 0:N.data)==null?void 0:P.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-full bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full max-w-lg",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-800 bg-clip-text text-transparent",children:"Join as Worker"}),e.jsxs(aa,{className:"text-blue-700 text-base",children:[(j==null?void 0:j.specifiedRole)&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mb-2",children:["Role: ",j.specifiedRole]}),e.jsx("br",{}),"Complete your registration to join the project"]})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:S,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"workerName",className:"text-blue-800 font-medium",children:"workerName *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"workerName",name:"workerName",type:"text",value:o.workerName,onChange:w,placeholder:"Enter your workerName",className:`pl-10 border-2 transition-all duration-200 ${g.workerName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.workerName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:o.email,onChange:w,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:w,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:w,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",value:o.confirmPassword,onChange:w,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-green-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-green-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:b.isPending,children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/workerlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Kt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function U0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),r=ys(),{isMobile:o,openMobileSidebar:d}=Ke(),[m,x]=A.useState(!1),[h,p]=A.useState({}),g=dk(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",p(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;l(S=>({...S,[k]:w})),h[k]&&p(S=>({...S,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const S=await g.mutateAsync(a),v=S==null?void 0:S.data;r(Lt({role:v.role,isauthenticated:!0,_id:v._id})),r(Ic({workerId:v._id,workerName:v.workerName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),t("/organizations"),D({title:"Success",description:"Login successfull"})}catch(S){D({title:"Login Failed",description:((w=(k=S==null?void 0:S.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:o&&e.jsx("button",{onClick:d,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Worker Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your projects and tasks"})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${h.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:m?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your project manager for an invitation"})]})})]})]})})]})}const $y=()=>{const t=ys(),[a,l]=A.useState(!0),[r,o]=A.useState(null),[d,m]=A.useState({role:null,isauthenticated:!1,_id:null});return A.useEffect(()=>{(async()=>{l(!0),o(null);try{const[h,p,g,y,j]=await Promise.allSettled([Is.get("/auth/isauthenticated"),sa.get("/auth/staff/isauthenticated"),hn.get("/auth/worker/isauthenticated"),fn.get("/auth/CTO/isauthenticated"),Aa.get("/auth/client/isauthenticated")]);if(h.status==="fulfilled"&&h.value.data.ok){const E={role:"owner",isauthenticated:!0,_id:h.value.data.data.userId};return t(Lt(E)),t(pc(h.value.data.data)),m({...E,_id:h.value.data.data.userId}),l(!1)}if(p.status==="fulfilled"&&p.value.data.ok){const E={role:"staff",isauthenticated:!0,_id:p.value.data.data.staffId};return t(Lt(E)),t($c(p.value.data.data)),m({...E,_id:p.value.data.data.staffId}),l(!1)}if(g.status==="fulfilled"&&g.value.data.ok){const E={role:"worker",isauthenticated:!0,_id:g.value.data.data.workerId};return t(Lt(E)),t(Ic(g.value.data.data)),m({...E,_id:g.value.data.data.workerId}),l(!1)}if(y.status==="fulfilled"&&y.value.data.ok){const E={role:"CTO",isauthenticated:!0,_id:y.value.data.data.CTOId};return t(Lt(E)),t(Bc(y.value.data.data)),m({...E,_id:y.value.data.data.CTOId}),l(!1)}if(j.status==="fulfilled"&&j.value.data.ok){const E={role:"client",isauthenticated:!0,_id:j.value.data.data.clientId};return t(Lt(E)),t(Hc(j.value.data.data)),m({...E,_id:j.value.data.data.clientId}),l(!1)}t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),t(gc()),t(bc()),t(yc()),t(vc()),t(jc()),t(wc()),l(!1)}catch{t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),o("Something went wrong while checking authentication."),t(gc()),t(bc()),t(yc()),t(vc()),t(jc()),t(wc()),l(!1)}})()},[]),{loading:a,error:r,...d}},Iy=()=>{const t=Me(),a=()=>{t(-1)};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 bg-gray-100 text-center",children:e.jsx("div",{className:"w-full max-w-md p-6 md:p-8 bg-white rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation text-red-500 text-6xl md:text-7xl"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 text-base md:text-lg",children:"Sorry, you don't have permission to view this page."}),e.jsx("button",{onClick:a,className:"mt-4 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-full transition",children:"Go Back"})]})})})},Pe=({allowedRoles:t,children:a})=>{const{loading:l,error:r,role:o,isauthenticated:d}=$y(),m=pt();return!d&&l===!1?e.jsx(zm,{to:`${o==="owner"||o===null?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):l||o===void 0||o===null?e.jsx("div",{className:"p-6 text-center",children:" Loading..."}):t.includes(o)?r||!d?e.jsx(zm,{to:`${o==="owner"?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):e.jsx(e.Fragment,{children:a}):e.jsx(Iy,{})},qE=()=>{const{organizationId:t}=Ae(),{openMobileSidebar:a,isMobile:l}=Ke(),r=Me(),[o,d]=A.useState(""),[m,x]=A.useState(!1),{data:h,isLoading:p,error:g,isError:y}=Wk(t),j=Zk(),E=Xk(),b=async(N,P)=>{if(window.confirm(`Are you sure you want to remove ${P} from this organization?`))try{await j.mutateAsync({staffId:N,orgId:t}),D({title:"Success",description:`${P} has been removed from the organization`})}catch(T){D({title:"Error",description:T.message||"Failed to remove staff member",variant:"destructive"})}},k=async()=>{try{const N=await E.mutateAsync({organizationId:t,role:"staff"});d(N.inviteLink||N),D({title:"Success",description:"Invitation link generated successfully"})}catch(N){D({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},w=async()=>{try{await navigator.clipboard.writeText(o),x(!0),D({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{D({title:"Error",description:"Failed to copy link",variant:"destructive"})}},S=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,P=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(P,"_blank")},v=N=>N.split(" ").map(P=>P[0]).join("").toUpperCase();return p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(_e,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(_e,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(_e,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(_e,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(_e,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_e,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||y||!h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(M,{onClick:()=>r("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 lg:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"Staff Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),h==null?void 0:h.length," ",(h==null?void 0:h.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh] h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite Staffs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite Staffs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:w,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:S,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:w,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(M,{onClick:k,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(M,{onClick:k,isLoading:E.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full  !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2 rounded-2xl shadow-lg overflow-y-auto max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Staff Members (",h==null?void 0:h.length,")"]}),h.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No Staffs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:h==null?void 0:h.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Qc,{className:"w-12 h-12",children:[e.jsx(Uy,{src:N.avatarUrl||yt.COMPANY_LOGO}),e.jsx(Gc,{className:"bg-blue-600 text-white",children:v(N.staffName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N==null?void 0:N.staffName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(sr,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsxs(M,{variant:"danger",onClick:()=>b(N._id,N.staffName),isLoading:E.isPending,className:"text-white bg-red-600 border border-red-200 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-user-minus mr-1"})," Remove"]})]},N._id))})]})]})]})},zE=()=>{const{organizationId:t}=Ae(),a=Me(),{openMobileSidebar:l,isMobile:r}=Ke(),[o,d]=A.useState(""),[m,x]=A.useState(!1),{data:h,isLoading:p,error:g,isError:y}=sE(t),j=nE(),E=aE(),b=async(N,P)=>{if(window.confirm(`Are you sure you want to remove ${P} from this organization?`))try{await j.mutateAsync({CTOId:N,orgId:t}),D({title:"Success",description:`${P} has been removed from the organization`})}catch(T){D({title:"Error",description:T.message||"Failed to remove CTO member",variant:"destructive"})}},k=async()=>{try{const N=await E.mutateAsync({organizationId:t,role:"CTO"});d(N.inviteLink||N),D({title:"Success",description:"Invitation link generated successfully"})}catch(N){D({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},w=async()=>{try{await navigator.clipboard.writeText(o),x(!0),D({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{D({title:"Error",description:"Failed to copy link",variant:"destructive"})}},S=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,P=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(P,"_blank")},v=N=>N.split(" ").map(P=>P[0]).join("").toUpperCase();return p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(_e,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(_e,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(_e,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(_e,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(_e,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_e,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||y||!h?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-white",children:e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-md w-full max-w-md",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-building text-blue-600 text-xl"})}),e.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You either do not have access or the organization does not exist."}),e.jsxs(M,{onClick:()=>a("/organizations"),className:"bg-blue-600 text-white w-full",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto  min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"CTO Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user-tie text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),h==null?void 0:h.length," ",(h==null?void 0:h.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh]  h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite CTOs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite CTOs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:w,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:S,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:w,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(M,{onClick:k,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(M,{onClick:k,isLoading:E.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2  rounded-2xl shadow-lg overflow-y-auto  max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," CTO Members (",h.length,")"]}),h.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No CTOs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:h.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Qc,{className:"w-12 h-12",children:[e.jsx(Uy,{src:N.avatarUrl||yt.COMPANY_LOGO}),e.jsx(Gc,{className:"bg-blue-600 text-white",children:v(N.CTOName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N.CTOName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(sr,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsx(M,{onClick:()=>b(N._id,N.CTOName),isLoading:j.isPending,variant:"danger",className:" text-white bg-red-600 border border-red-200 hover:bg-red-700",children:e.jsx("i",{className:"fas fa-trash-can mr-1 text-white"})})]},N._id))})]})]})]})},UE=()=>{const{organizationId:t}=Ae(),[a,l]=A.useState(!1),[r,o]=A.useState(window.innerWidth<470),d={PROJECTS:`/organizations/${t}/projects`,DETAILS:`/organizations/${t}`,INVITECTO:`/organizations/${t}/invitecto`,INVITESTAFFS:`/organizations/${t}/invitestaff`,PLAN:`/organizations/${t}/subscriptionplan`,PROFILE:`/organizations/${t}/userprofile`,MODULAR:`/organizations/${t}/modularunits`};return A.useEffect(()=>{const m=()=>{o(window.innerWidth<470)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[r?e.jsx(ki,{labels:Gg,path:d,isOpen:a,onClose:()=>l(!1)}):e.jsx(Ci,{path:d,labels:Gg,icons:O2}),e.jsx("main",{className:"!w-[100%] h-full",children:e.jsx(It,{context:{isMobile:r,isMobileSidebarOpen:a,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})};function $E(){const t=Me(),[a]=Oc(),l=a.get("invite"),[r,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",CTOName:""}),[d,m]=A.useState(!1),[x,h]=A.useState(!1),[p,g]=A.useState({}),y=$1(),j=ys();A.useEffect(()=>{l||(D({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[l,t]);const E=()=>{const w={};return r.CTOName.trim()?r.CTOName.trim().length<2&&(w.CTOName="Name must be at least 2 characters"):w.CTOName="Full name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(w.email="Please enter a valid email address"):w.email="Email is required",r.phoneNo.trim()?/^\d{10}$/.test(r.phoneNo.trim())||(w.phoneNo="Please enter a valid phone number"):w.phoneNo="Phone number is required",r.password.trim()?r.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",r.confirmPassword.trim()?r.password!==r.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",g(w),Object.keys(w).length===0},b=w=>{const{name:S,value:v}=w.target;o(N=>({...N,[S]:v})),p[S]&&g(N=>({...N,[S]:""}))},k=async w=>{var S,v;if(w.preventDefault(),!l){D({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(E())try{const P=(await y.mutateAsync({invite:l,email:r.email,password:r.password,phoneNo:r.phoneNo,CTOName:r.CTOName})).data;j(Lt({role:P.role,isauthenticated:!0,_id:P._id})),j(Bc({CTOId:P._id,CTOName:P.CTOName,email:P.email,phoneNo:P.phoneNo,role:P.role,isauthenticated:!0})),D({title:"Success",description:"Registration successful"}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){D({title:"Registration Failed",description:((v=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:v.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as CTO"})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"CTOName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"CTOName",name:"CTOName",type:"text",value:r.CTOName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${p.CTOName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.CTOName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:r.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${p.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:r.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${p.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:d?"text":"password",value:r.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:r.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${p.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:p.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password===r.confirmPassword&&r.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/ctologin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Kt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function $0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),[r,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:x,openMobileSidebar:h}=Ke(),p=z1(),g=ys(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",m(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;l(S=>({...S,[k]:w})),d[k]&&m(S=>({...S,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const v=(await p.mutateAsync(a)).data;g(Lt({role:v.role,isauthenticated:!0,_id:v.CTOId})),g(Bc({CTOId:v.CTOId,CTOName:v.CTOName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),D({title:"Success",description:"Login successful! Welcome back."}),t("/")}catch(S){D({title:"Login Failed",description:((w=(k=S==null?void 0:S.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:x&&e.jsx("button",{onClick:h,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Cheif Technical Officer Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:r?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!r),children:e.jsx("i",{className:`fas ${r?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:p.isPending,children:p.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}function I0(){const t=Me(),[a,l]=A.useState({email:"",password:""}),r=ys(),[o,d]=A.useState(!1),[m,x]=A.useState({}),{isMobile:h,openMobileSidebar:p}=Ke(),g=Q1(),y=()=>{const b={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(b.email="Please enter a valid email address"):b.email="Email is required",a.password.trim()?a.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",x(b),Object.keys(b).length===0},j=b=>{const{name:k,value:w}=b.target;l(S=>({...S,[k]:w})),m[k]&&x(S=>({...S,[k]:""}))},E=async b=>{var k,w;if(b.preventDefault(),!!y())try{const v=(await g.mutateAsync(a)).data;r(Lt({role:v.role,isauthenticated:!0,_id:v.clientId})),r(Hc({clientId:v.clientId,clientName:v.clientName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),D({title:"Success",description:"Login successful! Welcome back."}),t("/organizations")}catch(S){D({title:"Login Failed",description:((w=(k=S==null?void 0:S.response)==null?void 0:k.data)==null?void 0:w.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:h&&e.jsx("button",{onClick:p,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Client Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your project Dashboard"})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:a.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:o?"text":"password",value:a.password,onChange:j,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>d(!o),children:e.jsx("i",{className:`fas ${o?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your admin for an invitation"})]})})]})]})})]})}function IE(){const t=Me(),[a]=Oc(),l=a.get("invite"),r=ys(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",clientName:""}),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),j=K1();A.useEffect(()=>{l||(D({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/organizations")},3e3))},[l,t]);const E=()=>{const w={};return o.clientName.trim()?o.clientName.trim().length<2&&(w.clientName="Name must be at least 2 characters"):w.clientName="Full name is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(w.email="Please enter a valid email address"):w.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(w.phoneNo="Please enter a valid phone number with 10 digits"):w.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",y(w),Object.keys(w).length===0},b=w=>{const{name:S,value:v}=w.target;d(N=>({...N,[S]:v})),g[S]&&y(N=>({...N,[S]:""}))},k=async w=>{var S,v;if(w.preventDefault(),!l){D({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(E())try{const P=(await j.mutateAsync({token:l,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,clientName:o.clientName}})).data;r(Lt({role:P.role,isauthenticated:!0,_id:P._id})),r(Hc({clientId:P._id,clientName:P.clientName,email:P.email,phoneNo:P.phoneNo,role:P.role,isauthenticated:!0})),D({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){D({title:"Registration Failed",description:((v=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:v.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(M,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(bs,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(Ps,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as Client"})]}),e.jsxs(Kt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"clientName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(ce,{id:"clientName",name:"clientName",type:"text",value:o.clientName,onChange:b,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${g.clientName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.clientName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(ce,{id:"email",name:"email",type:"email",value:o.email,onChange:b,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(ce,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:b,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:b,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(ce,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",value:o.confirmPassword,onChange:b,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!h),children:e.jsx("i",{className:`fas ${h?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:j.isPending,children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/clientlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(Le,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Kt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}const BE=()=>{const{projectId:t,organizationId:a}=Ae(),[l,r]=A.useState(""),[o,d]=A.useState(!1),{openMobileSidebar:m,isMobile:x}=Ke(),h=rE(),{data:p,isLoading:g,isError:y}=oE(a,t),j=async()=>{var w,S;try{const v=await h.mutateAsync({projectId:t,organizationId:a});r(v.inviteLink||v),D({title:"Success",description:"Invitation link generated successfully"})}catch(v){D({title:"Error",description:((S=(w=v==null?void 0:v.response)==null?void 0:w.data)==null?void 0:S.message)||"Failed to generate invitation link",variant:"destructive"})}},E=async()=>{try{await navigator.clipboard.writeText(l),d(!0),D({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>d(!1),2e3)}catch{D({title:"Error",description:"Failed to copy link",variant:"destructive"})}},b=()=>{const w=`You're invited to join in the project! Click this link to register: ${l}`,S=`https://wa.me/?text=${encodeURIComponent(w)}`;window.open(S,"_blank")},k=w=>{var S,v;return(v=(S=w==null?void 0:w.split(" ").map(N=>N[0]))==null?void 0:S.join(""))==null?void 0:v.toUpperCase()};return e.jsxs("div",{className:"min-h-full min-w-full ",children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"max-w-full mx-auto",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[x&&e.jsx("button",{onClick:m,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block  w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Client"]})})})]})})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full ",children:[e.jsx("div",{className:"flex-1 border-l-4 border-blue-600  bg-white p-4 max-h-[45vh]  h-fit overflow-y-auto rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-2 flex items-center",children:"Generate Client"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite a client by generating a link."}),l?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:l,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:E,children:e.jsx("i",{className:`fas ${o?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:b,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:E,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(M,{onClick:j,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(M,{onClick:j,isLoading:h.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"flex-1 bg-white border-2 border-blue-200 p-6 rounded-2xl shadow-lg py-4 max-h-[70vh] sm:!max-h-[63vh] md:!max-h-[100vh]  lg:!max-h-[85vh] xl:!max-h-[90vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Clients (",(p==null?void 0:p.length)||0,")"]}),g?e.jsx("p",{className:"text-blue-700",children:"Loading clients..."}):y?e.jsx("p",{className:"text-red-600",children:"Failed to get clients."}):(p==null?void 0:p.length)===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No clients have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite them."})]}):e.jsx("div",{className:"space-y-4 h-[85%]",children:p==null?void 0:p.map(w=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Qc,{className:"w-12 h-12",children:e.jsx(Gc,{className:"bg-blue-600 text-white font-bold",children:k(w.clientName)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:w.clientName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"})," ",w.email]}),w.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"})," ",w.phoneNo]})]})]})},w._id))})]})]})]})},Je=({value:t,onValueChange:a,children:l})=>{const[r,o]=A.useState(!1),[d,m]=A.useState(t||""),x=A.useRef(null);A.useEffect(()=>{const p=g=>{x.current&&!x.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const h=p=>{m(p),a==null||a(p),o(!1)};return e.jsx("div",{ref:x,className:"relative",children:ct.Children.map(l,p=>{if(ct.isValidElement(p)){if(p.type===Xe)return ct.cloneElement(p,{isOpen:r,onClick:()=>o(!r),selectedValue:d});if(p.type===Ze)return ct.cloneElement(p,{isOpen:r,onValueChange:h})}return p})})},Xe=({className:t="",children:a,isOpen:l=!1,onClick:r})=>e.jsxs("button",{type:"button",className:`w-full px-3 py-2 border border-blue-200 rounded-xl bg-white text-left flex items-center justify-between focus:outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 ${t}`,onClick:r,children:[a,e.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),et=({placeholder:t="Select...",selectedValue:a})=>e.jsx("span",{className:"text-gray-900",children:a||t}),Ze=({className:t="",children:a,isOpen:l=!1,onValueChange:r})=>l?e.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-50 py-1 ${t}`,children:ct.Children.map(a,o=>ct.isValidElement(o)&&o.type===ye?ct.cloneElement(o,{onSelect:r}):o)}):null,ye=({value:t,children:a,onSelect:l})=>e.jsx("button",{type:"button",className:"w-full cursor-pointer text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700",onClick:()=>l==null?void 0:l(t),children:a}),HE=({formData:t,setFormData:a})=>{var d,m,x,h,p,g,y,j,E,b,k;const l=w=>{const S=w.target,{name:v,type:N,value:P}=S;let T=P;if(N==="checkbox")T=S.checked;else if(N==="number"){const F=parseFloat(P);T=isNaN(F)?0:Math.max(0,F)}["top","left","right"].includes(v)?a(F=>{var z;return{...F,kitchen:{...F.kitchen,measurements:{...(z=F.kitchen)==null?void 0:z.measurements,[v]:T}}}}):a(F=>({...F,kitchen:{...F.kitchen,[v]:T}}))},r=(w,S)=>{a(v=>({...v,kitchen:{...v.kitchen,[w]:S}}))},o=()=>{a(w=>({...w,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Kitchen Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Layout Type"}),e.jsxs(Je,{onValueChange:w=>r("layoutType",w),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select layout",selectedValue:((d=t==null?void 0:t.kitchen)==null?void 0:d.layoutType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Kitchen Package"}),e.jsxs(Je,{onValueChange:w=>r("kitchenPackage",w),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((m=t==null?void 0:t.kitchen)==null?void 0:m.kitchenPackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:(x=t==null?void 0:t.kitchen)==null?void 0:x.numberOfShelves,onChange:l,placeholder:"e.g., 3"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Top (ft)"}),e.jsx(ce,{type:"number",name:"top",value:((p=(h=t==null?void 0:t.kitchen)==null?void 0:h.measurements)==null?void 0:p.top)??0,onChange:l,placeholder:"Length Top"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Left (ft)"}),e.jsx(ce,{type:"number",name:"left",value:(y=(g=t==null?void 0:t.kitchen)==null?void 0:g.measurements)==null?void 0:y.left,onChange:l,placeholder:"Length Left"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Right (ft)"}),e.jsx(ce,{type:"number",name:"right",value:(E=(j=t==null?void 0:t.kitchen)==null?void 0:j.measurements)==null?void 0:E.right,onChange:l,placeholder:"Length right"})]}),e.jsxs("div",{className:"flex  items-center",children:[e.jsx("input",{id:"graniteCountertop",type:"checkbox",name:"graniteCountertop",checked:((b=t==null?void 0:t.kitchen)==null?void 0:b.graniteCountertop)||!1,onChange:l,className:"!w-[10%]"}),e.jsx(fe,{htmlFor:"graniteCountertop",children:"Granite Countertop?"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((k=t==null?void 0:t.kitchen)==null?void 0:k.notes)||"",onChange:l,placeholder:"Mention any additional kitchen preferences",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Kitchen Section"]})})]})},QE=A.memo(HE),GE=({formData:t,setFormData:a})=>{const l=d=>{const{name:m,value:x,type:h}=d.target;let p=x;if(h==="number"){const g=parseFloat(x);p=isNaN(g)?0:Math.max(0,g)}a(g=>({...g,livingHall:{...g.livingHall,[m]:p}}))},r=(d,m)=>{a(x=>({...x,livingHall:{...x.livingHall,[d]:m}}))},o=()=>{a(d=>({...d,livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Living Hall Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Seating Style"}),e.jsxs(Je,{onValueChange:d=>r("seatingStyle",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select seating style",selectedValue:t.livingHall.seatingStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"TV Unit Design Required"}),e.jsxs(Je,{onValueChange:d=>r("tvUnitDesignRequired",d==="Yes"),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select option",selectedValue:t.livingHall.tvUnitDesignRequired===!0?"Yes":t.livingHall.tvUnitDesignRequired===!1?"No":""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"False Ceiling Required"}),e.jsxs(Je,{onValueChange:d=>r("falseCeilingRequired",d==="Yes"),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select option",selectedValue:t.livingHall.falseCeilingRequired===!0?"Yes":t.livingHall.falseCeilingRequired===!1?"No":""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wall Decor Style"}),e.jsxs(Je,{onValueChange:d=>r("wallDecorStyle",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wall decor",selectedValue:t.livingHall.wallDecorStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Fans"}),e.jsx(ce,{name:"numberOfFans",type:"number",value:t.livingHall.numberOfFans,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Lights"}),e.jsx(ce,{name:"numberOfLights",type:"number",value:t.livingHall.numberOfLights,onChange:l,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Living Hall Package"}),e.jsxs(Je,{onValueChange:d=>r("livingHallPackage",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:t.livingHall.livingHallPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(ce,{name:"notes",value:t.livingHall.notes||"",onChange:l,placeholder:"Any special preferences or notes"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset LivingHall Section"]})})]})},KE=({formData:t,setFormData:a})=>{var d,m,x,h,p,g,y,j;const l=E=>{const b=E.target,{name:k,type:w,value:S}=b;let v=S;if(w==="checkbox")v=b.checked;else if(w==="number"){const N=parseFloat(S);v=isNaN(N)?0:Math.max(0,N)}a(N=>({...N,bedroom:{...N.bedroom,[k]:v}}))},r=(E,b)=>{a(k=>({...k,bedroom:{...k.bedroom,[E]:b}}))},o=()=>{a(E=>({...E,bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Bedroom Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Bedrooms"}),e.jsx(ce,{type:"number",name:"numberOfBedrooms",value:(d=t==null?void 0:t.bedroom)==null?void 0:d.numberOfBedrooms,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bed Type"}),e.jsxs(Je,{onValueChange:E=>r("bedType",E),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select bed type",selectedValue:((m=t==null?void 0:t.bedroom)==null?void 0:m.bedType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",id:"wardrobeIncluded",checked:((x=t==null?void 0:t.bedroom)==null?void 0:x.wardrobeIncluded)||!1,onChange:l}),e.jsx(fe,{htmlFor:"wardrobeIncluded",children:"Wardrobe Included?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"falseCeilingRequired",type:"checkbox",name:"falseCeilingRequired",checked:((h=t==null?void 0:t.bedroom)==null?void 0:h.falseCeilingRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"falseCeilingRequired",children:"False Ceiling Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"tvUnitRequired",type:"checkbox",name:"tvUnitRequired",checked:((p=t==null?void 0:t.bedroom)==null?void 0:p.tvUnitRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"tvUnitRequired",children:"TV Unit Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",id:"studyTableRequired",checked:((g=t==null?void 0:t.bedroom)==null?void 0:g.studyTableRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"studyTableRequired",children:"Study Table Required?"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bedroom Package"}),e.jsxs(Je,{onValueChange:E=>r("bedroomPackage",E),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((y=t==null?void 0:t.bedroom)==null?void 0:y.bedroomPackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((j=t==null?void 0:t.bedroom)==null?void 0:j.notes)||"",onChange:l,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Bedroom Section"]})})]})},VE=A.memo(KE),YE=({formData:t,setFormData:a})=>{var d,m,x,h,p,g,y,j;const l=E=>{const{name:b,value:k,type:w}=E.target;let S=k;if(w==="checkbox")S=E.target.checked;else if(w==="number"){const v=parseFloat(k);S=isNaN(v)?0:Math.max(0,v)}a(v=>({...v,wardrobe:{...v.wardrobe,[b]:S}}))},r=(E,b)=>{a(k=>({...k,wardrobe:{...k.wardrobe,[E]:b}}))},o=()=>{a(E=>({...E,wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Wardrobe Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Type"}),e.jsxs(Je,{onValueChange:E=>r("wardrobeType",E),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select type",selectedValue:((d=t==null?void 0:t.wardrobe)==null?void 0:d.wardrobeType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Length (ft)"}),e.jsx(ce,{type:"number",name:"lengthInFeet",value:(m=t==null?void 0:t.wardrobe)==null?void 0:m.lengthInFeet,onChange:l,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Height (ft)"}),e.jsx(ce,{type:"number",name:"heightInFeet",value:(x=t==null?void 0:t.wardrobe)==null?void 0:x.heightInFeet,onChange:l,placeholder:"e.g., 8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"mirrorIncluded",type:"checkbox",name:"mirrorIncluded",checked:((h=t==null?void 0:t.wardrobe)==null?void 0:h.mirrorIncluded)||!1,onChange:l}),e.jsx(fe,{htmlFor:"mirrorIncluded",children:"Mirror Included?"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:(p=t==null?void 0:t.wardrobe)==null?void 0:p.numberOfShelves,onChange:l,placeholder:"e.g., 4"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Drawers"}),e.jsx(ce,{type:"number",name:"numberOfDrawers",value:(g=t==null?void 0:t.wardrobe)==null?void 0:g.numberOfDrawers,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Package"}),e.jsxs(Je,{onValueChange:E=>r("wardrobePackage",E),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((y=t==null?void 0:t.wardrobe)==null?void 0:y.wardrobePackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:((j=t==null?void 0:t.wardrobe)==null?void 0:j.notes)||"",onChange:l,placeholder:"Mention any preferences or requirements",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(M,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Wardrobe Section"]})})]})},WE=A.memo(YE),XE=async({projectId:t,payload:a,token:l,api:r})=>{const{data:o}=await r.post(`/requirementform/createrequirement/${t}?token=${l}`,a);if(!o.ok)throw new Error(o.message);return o.data},ZE=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/requirementform/getrequirementform/${t}`);if(!l.ok)throw new Error(l.message);return l.data},JE=async({projectId:t,api:a})=>{const{data:l}=await a.post(`/requirementform/formsharelink/${t}`);if(!l.ok)throw new Error(l.message);return l.data},eA=async({formId:t,projectId:a,api:l})=>{console.log("formId",t);const{data:r}=await l.patch(`/requirementform/formcompleted/${a}/${t}`);if(!r.ok)throw new Error(r.message);return r.data},tA=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.patch(`/requirementform/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},sA=async({formId:t,projectId:a,files:l,api:r})=>{console.log("getig iside 1");const o=new FormData;l.forEach(m=>o.append("file",m)),console.log("getig iside 1");const d=await r.post(`/requirementform/upload/multiple/${a}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}});return console.log("reposen",d),d.data},aA=async(t,a,l)=>{const{data:r}=await l.patch(`/requirementform/${t}/deleteuploadedfile/${a}`);if(!r.ok)throw new Error(r.message);return r.data},nA=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,fileId:o})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await aA(r,o,a)},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["requirementForm",o]})}})},lA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatekitchen`,{kitchen:l});if(!r.ok)throw new Error(r.message);return r.data},rA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatebedroom`,{bedroom:l});if(!r.ok)throw new Error(r.message);return r.data},iA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatewardrobe`,{wardrobe:l});if(!r.ok)throw new Error(r.message);return r.data},oA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatelivinghall`,{livingHall:l});if(!r.ok)throw new Error(r.message);return r.data},cA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,payload:o,token:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await XE({projectId:r,payload:o,token:d,api:l})}})},dA=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:l}=Z(),r=J(l);return Fe({queryKey:["requirementForm"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await ZE({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},uA=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await JE({projectId:r,api:l})}})},mA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,projectId:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await eA({formId:r,projectId:o,api:l})}})},fA=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you dont have the access to make this api");if(!l)throw new Error("api is not available");return await tA({formId:r,deadLine:o,projectId:d,api:l})}})},hA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await sA({formId:r,projectId:d,files:o,api:l})}})},xA=()=>{const t=["client","owner","staff"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await lA({projectId:r,api:l,updateData:o})}})},pA=()=>{const t=["client","owner","staff"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await rA({projectId:r,api:l,updateData:o})}})},gA=()=>{const t=["client","owner","staff"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await iA({projectId:r,api:l,updateData:o})}})},bA=()=>{const t=["client","owner","staff"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await oA({projectId:r,api:l,updateData:o})}})},yA=()=>{var S,v;const{token:t,projectId:a}=Ae(),[l,r]=A.useState({clientData:{clientName:null,email:null,whatsapp:null,location:null},isEditable:!0,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null},livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null},bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null},wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null},additionalNotes:null}),[o,d]=A.useState({}),[m,x]=A.useState(0),{mutateAsync:h,isPending:p,isSuccess:g,isError:y,error:j}=cA(),E=N=>{let{name:P,value:T}=N.target;P==="whatsapp"&&(T=T.replace(/[^0-9]/g,"")),r(F=>({...F,clientData:{...F.clientData,[P]:T}}))},b=N=>{let P={};const{clientName:T,email:F,whatsapp:z}=N.clientData;return(!T||T.trim()==="")&&(P.clientName="Client name is required"),(!F||F.trim()==="")&&(P.email="Email is required"),!z||z.trim()===""?P.whatsapp="WhatsApp number is required":z.trim().length!==10&&(P.whatsapp="Number should be 10 digits long"),P},k=async()=>{var N,P;try{if(d({}),!a)return;const T=b(l);if(Object.keys(T).length){d(T);return}await h({projectId:a,payload:l,token:t}),D({title:"Success",description:"form data submitted successfully"})}catch(T){D({title:"Error",description:((P=(N=T==null?void 0:T.response)==null?void 0:N.data)==null?void 0:P.message)||(T==null?void 0:T.message)||"Failed to generate invitation link",variant:"destructive"})}},w=[{label:"Kitchen",content:e.jsx(QE,{formData:l,setFormData:r})},{label:"Living Hall",content:e.jsx(GE,{formData:l,setFormData:r})},{label:"Bedroom",content:e.jsx(VE,{formData:l,setFormData:r})},{label:"Wardrobe",content:e.jsx(WE,{formData:l,setFormData:r})},{label:"Client Info",content:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Client Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Client Name"}),e.jsx(ce,{name:"clientName",value:l.clientData.clientName??"",onChange:E,required:!0,error:o.clientName||""})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Email"}),e.jsx(ce,{type:"email",name:"email",value:l.clientData.email??"",onChange:E,required:!0,error:o.email||""})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"WhatsApp Number"}),e.jsx(ce,{name:"whatsapp",type:"text",inputMode:"numeric",pattern:"[0-9]{10}",value:l.clientData.whatsapp??"",onChange:E,required:!0,error:o.whatsapp||"",maxLength:10})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Location"}),e.jsx(ce,{name:"location",value:l.clientData.location??"",onChange:E})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"additionalNotes",value:l.additionalNotes||"",onChange:N=>r(P=>({...P,additionalNotes:N.target.value})),className:"w-full px-3 py-2 border rounded-xl focus:outline-none focus:ring focus:ring-blue-200",rows:4})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(M,{variant:"primary",size:"lg",onClick:k,isLoading:p,children:"Submit Requirement Form"})}),g&&e.jsx("p",{className:"text-green-600 mt-4",children:"Form submitted successfully!"}),y&&e.jsx("p",{className:"text-red-600 mt-4",children:((v=(S=j==null?void 0:j.response)==null?void 0:S.data)==null?void 0:v.message)||j.message||"Form Submission Failed"})]})}];return e.jsx("div",{className:"space-y-8  max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white to-blue-100 !p-6 h-full w-full",children:e.jsxs("div",{className:"max-w-5xl max-h-full mx-auto space-y-5",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-blue-800",children:"House Requirements Form"}),e.jsx("div",{className:"max-w-5xl  mx-auto",children:w[m].content}),e.jsxs("div",{className:`flex ${m>0?"justify-between":"justify-end"} mt-2`,children:[m>0&&e.jsx(M,{variant:"secondary",onClick:()=>x(N=>N-1),children:"Previous"}),m<w.length-1&&e.jsx(M,{variant:"primary",onClick:()=>x(N=>N+1),children:"Skip & Continue"})]})]})})},wA=({data:t,setVisibleSection:a})=>{var g,y,j;const{projectId:l}=Ae(),[r,o]=A.useState({layoutType:(t==null?void 0:t.layoutType)||"L-shaped",measurements:(t==null?void 0:t.measurements)||{top:0,left:0,right:0},kitchenPackage:(t==null?void 0:t.kitchenPackage)||"Essentials",graniteCountertop:(t==null?void 0:t.graniteCountertop)||!1,numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=xA(),x=E=>{const b=E.target,{name:k,type:w,value:S}=b;let v=S;if(w==="checkbox")v=b.checked;else if(w==="number"){const N=parseFloat(S);v=isNaN(N)?0:Math.max(0,N)}["top","left","right"].includes(k)?o(N=>({...N,measurements:{...N==null?void 0:N.measurements,[k]:v}})):o(N=>({...N,[k]:v}))},h=(E,b)=>{o(k=>({...k,[E]:b}))},p=async()=>{var E,b;try{if(!l)return;await d({projectId:l,updateData:r}),D({title:"Success",description:"Kitchen data updated successfully"})}catch(k){D({title:"Error",description:((b=(E=k==null?void 0:k.response)==null?void 0:E.data)==null?void 0:b.message)||(k==null?void 0:k.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Kitchen Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Layout Type"}),e.jsxs(Je,{onValueChange:E=>h("layoutType",E),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select layout",selectedValue:r.layoutType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Kitchen Package"}),e.jsxs(Je,{onValueChange:E=>h("kitchenPackage",E),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.kitchenPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"graniteCountertop",checked:r.graniteCountertop??void 0,onChange:x}),e.jsx(fe,{children:"Granite Countertop"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Top (in feet)"}),e.jsx(ce,{type:"number",name:"top",value:((g=r.measurements)==null?void 0:g.top)||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Left (in feet)"}),e.jsx(ce,{type:"number",name:"left",value:((y=r.measurements)==null?void 0:y.left)||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Right (in feet)"}),e.jsx(ce,{type:"number",name:"right",value:((j=r.measurements)==null?void 0:j.right)||"",onChange:x,min:0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Kitchen Requirements"})})]})},vA=({data:t,setVisibleSection:a})=>{const{projectId:l}=Ae(),[r,o]=A.useState({seatingStyle:(t==null?void 0:t.seatingStyle)||"Sofa Set",tvUnitDesignRequired:(t==null?void 0:t.tvUnitDesignRequired)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,wallDecorStyle:(t==null?void 0:t.wallDecorStyle)||"Paint",numberOfFans:(t==null?void 0:t.numberOfFans)||0,numberOfLights:(t==null?void 0:t.numberOfLights)||0,livingHallPackage:(t==null?void 0:t.livingHallPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=bA(),x=g=>{const y=g.target,{name:j,type:E,value:b}=y;let k=b;if(E==="checkbox")k=y.checked;else if(E==="number"){const w=parseFloat(b);k=isNaN(w)?0:Math.max(0,w)}o(w=>({...w,[j]:k}))},h=(g,y)=>{o(j=>({...j,[g]:y}))},p=async()=>{var g,y;try{if(!l)return;await d({projectId:l,updateData:r}),D({title:"Success",description:"Living Hall data updated successfully"})}catch(j){D({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Living Hall Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Seating Style"}),e.jsxs(Je,{onValueChange:g=>h("seatingStyle",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select seating style",selectedValue:r.seatingStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wall Decor Style"}),e.jsxs(Je,{onValueChange:g=>h("wallDecorStyle",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wall decor",selectedValue:r.wallDecorStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Fans"}),e.jsx(ce,{type:"number",name:"numberOfFans",value:r.numberOfFans||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Lights"}),e.jsx(ce,{type:"number",name:"numberOfLights",value:r.numberOfLights||"",onChange:x,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitDesignRequired",checked:r.tvUnitDesignRequired||void 0,onChange:x}),e.jsx(fe,{children:"TV Unit Design Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired||void 0,onChange:x}),e.jsx(fe,{children:"False Ceiling Required"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>h("livingHallPackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.livingHallPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Living Hall Requirements"})})]})},jA=({data:t,setVisibleSection:a})=>{const{projectId:l}=Ae(),[r,o]=A.useState({numberOfBedrooms:(t==null?void 0:t.numberOfBedrooms)||1,bedType:(t==null?void 0:t.bedType)||"Queen",wardrobeIncluded:(t==null?void 0:t.wardrobeIncluded)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,tvUnitRequired:(t==null?void 0:t.tvUnitRequired)||!1,studyTableRequired:(t==null?void 0:t.studyTableRequired)||!1,bedroomPackage:(t==null?void 0:t.bedroomPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=pA(),x=g=>{const y=g.target,{name:j,type:E,value:b}=y;let k=b;if(E==="checkbox")k=y.checked;else if(E==="number"){const w=parseFloat(b);k=isNaN(w)?0:Math.max(0,w)}o(w=>({...w,[j]:k}))},h=(g,y)=>{o(j=>({...j,[g]:y}))},p=async()=>{var g,y;try{if(!l)return;await d({projectId:l,updateData:r}),D({title:"Success",description:"bedroom data updated successfully"})}catch(j){D({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Bedroom Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Bedrooms"}),e.jsx(ce,{type:"number",name:"numberOfBedrooms",value:r.numberOfBedrooms??"",onChange:x,min:1})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bed Type"}),e.jsxs(Je,{onValueChange:g=>h("bedType",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select bed type",selectedValue:r.bedType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",checked:r.wardrobeIncluded??void 0,onChange:x}),e.jsx(fe,{children:"Wardrobe Included"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired??void 0,onChange:x}),e.jsx(fe,{children:"False Ceiling Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitRequired",checked:r.tvUnitRequired??void 0,onChange:x}),e.jsx(fe,{children:"TV Unit Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",checked:r.studyTableRequired??void 0,onChange:x}),e.jsx(fe,{children:"Study Table Required"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>h("bedroomPackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.bedroomPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Bedroom Requirements"})})]})},NA=({data:t,setVisibleSection:a})=>{const{projectId:l}=Ae(),[r,o]=A.useState({wardrobeType:(t==null?void 0:t.wardrobeType)||"Sliding",lengthInFeet:(t==null?void 0:t.lengthInFeet)||0,heightInFeet:(t==null?void 0:t.heightInFeet)||0,mirrorIncluded:(t==null?void 0:t.mirrorIncluded)||!1,wardrobePackage:(t==null?void 0:t.wardrobePackage)||"Essentials",numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,numberOfDrawers:(t==null?void 0:t.numberOfDrawers)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=gA(),x=g=>{const y=g.target,{name:j,type:E,value:b}=y;let k=b;if(E==="checkbox")k=y.checked;else if(E==="number"){const w=parseFloat(b);k=isNaN(w)?0:Math.max(0,w)}o(w=>({...w,[j]:k}))},h=(g,y)=>{o(j=>({...j,[g]:y}))},p=async()=>{var g,y;try{if(!l)return;await d({projectId:l,updateData:r}),D({title:"Success",description:"Wardrobe data updated successfully"})}catch(j){D({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Wardrobe Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Type"}),e.jsxs(Je,{onValueChange:g=>h("wardrobeType",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wardrobe type",selectedValue:r.wardrobeType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Length (in feet)"}),e.jsx(ce,{type:"number",name:"lengthInFeet",value:r.lengthInFeet||0,onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Height (in feet)"}),e.jsx(ce,{type:"number",name:"heightInFeet",value:r.heightInFeet||0,onChange:x,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"mirrorIncluded",checked:r.mirrorIncluded??void 0,onChange:x}),e.jsx(fe,{children:"Mirror Included"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(ce,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Drawers"}),e.jsx(ce,{type:"number",name:"numberOfDrawers",value:r.numberOfDrawers||"",onChange:x,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>h("wardrobePackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.wardrobePackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(Ls,{name:"notes",value:r.notes||"",onChange:x,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:p,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Wardrobe Requirements"})})]})},SA=async({stageName:t,projectId:a,api:l,startedAt:r})=>{const o=r?{startedAt:r}:{},{data:d}=await l.post(`/starttimer/start/${t}/${a}`,o);if(!d.ok)throw new Error(d.message);return d.data},CA=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({stageName:o,projectId:d,startedAt:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to start timer.");if(!l)throw new Error("API instance missing.");return await SA({stageName:o,projectId:d,api:l,startedAt:m})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["stage",d.stageName,d.projectId]})}})},Dm=t=>{const a=Math.floor(t/1e3),l=Math.floor(a/(3600*24)),r=Math.floor(a%(3600*24)/3600),o=Math.floor(a%3600/60),d=a%60;return`${l}d ${r}h ${o}m ${d}s`},ns=({startedAt:t,stageName:a,projectId:l,completedAt:r,deadLine:o,formId:d,deadLineMutate:m,isPending:x,refetchStageMutate:h})=>{const[p,g]=A.useState(new Date),[y,j]=A.useState(o?new Date(o).toISOString().split("T")[0]:""),[E,b]=A.useState(!1),[k,w]=A.useState(!1),[S,v]=A.useState(""),{mutateAsync:N,isPending:P}=CA();A.useEffect(()=>{const B=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(B)},[]);const T=t?new Date(t):null,F=r?new Date(r):null,z=o?new Date(o):null,q=()=>{if(!T)return"Not started yet";if(T&&F){const ee=F.getTime()-T.getTime();return` Completed in: ${Dm(ee)}`}if(z){const ee=z.getTime()-p.getTime();return ee<=0?e.jsx("span",{className:"text-red-600 font-semibold",children:" Deadline has reached"}):` Remaining: ${Dm(ee)}`}const B=p.getTime()-T.getTime();return` Running: ${Dm(B)}`},I=B=>B?B.toLocaleString("en-IN",{timeZone:"Asia/Kolkata",dateStyle:"medium",timeStyle:"short"}):"Not Available",de=async()=>{var B,ee;try{if(!d||!y)return;const V=y.length===10?`${y}T00:00:00`:y,oe=new Date(V);if(isNaN(oe.getTime()))return D({title:"Invalid Date",description:"Please pick a valid date & time",variant:"destructive"});if(oe<new Date)return D({title:"Invalid Date",description:"Deadline cannot be in the past",variant:"destructive"});await m({formId:d,projectId:l,deadLine:V}),h(),b(!1),D({title:"Success",description:"Deadline updated successfully"})}catch(V){D({title:"Error",description:((ee=(B=V==null?void 0:V.response)==null?void 0:B.data)==null?void 0:ee.message)||"Failed to update deadline",variant:"destructive"})}},Q=async()=>{var B,ee;try{if(!S)return D({title:"Error",description:"Please pick a date"});const V=new Date(S);if(isNaN(V.getTime()))return D({title:"Invalid Date",description:"Please provide a valid date & time.",variant:"destructive"});if(V<new Date)return D({title:"Invalid Date",description:"The started time cannot be in the past.",variant:"destructive"});await N({projectId:l,stageName:a,startedAt:V.toISOString()}),await h(),D({title:"Success",description:"Started time updated"}),w(!1)}catch(V){D({title:"Error",description:((ee=(B=V==null?void 0:V.response)==null?void 0:B.data)==null?void 0:ee.message)||(V==null?void 0:V.message)||"Failed to update started time",variant:"destructive"})}};return e.jsxs("div",{className:"text-sm w-full text-blue-900 space-y-3",children:[e.jsxs("div",{className:"flex w-full justify-between flex-wrap gap-x-6 gap-y-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-play text-blue-500"}),e.jsx("strong",{children:"Started On:"})," ",I(T),!k&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>w(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-flag-checkered text-green-500"}),e.jsx("strong",{children:"Completed On:"})," ",I(F)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar text-purple-600"}),e.jsx("strong",{children:"Deadline:"})," ",I(z),!E&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>b(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]})]}),e.jsx("div",{className:"font-semibold text-blue-700",children:q()}),k&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(ce,{type:"datetime-local",value:S,min:new Date().toISOString().slice(0,16),onChange:B=>v(B.target.value),className:"max-w-xs"}),e.jsx(M,{onClick:Q,isLoading:P,variant:"primary",children:"Update StartedAt"}),e.jsx(M,{onClick:()=>w(!1),variant:"ghost",children:"Cancel"})]}),E&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(ce,{type:"datetime-local",value:y,min:new Date().toISOString().slice(0,16),onChange:B=>j(B.target.value),className:"max-w-xs"}),e.jsx(M,{onClick:de,isLoading:x,className:"bg-blue-600 text-white",children:"Update Deadline"}),e.jsx(M,{onClick:()=>b(!1),variant:"ghost",children:"Cancel"})]})]})},Vt=async({src:t,alt:a})=>{var l,r;try{console.log("im donwloadin");const o=t.split(".com/")[1],{data:d}=await Qe.get(`https://houseofram.in/api/download-url?key=${encodeURIComponent(o)}&filename=${encodeURIComponent(a)}`),m=document.createElement("a");m.href=d.url,m.download="",document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(o){D({title:"Error",description:((r=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:r.message)||"failed to download"})}},By=({formId:t,projectId:a,refetch:l,existingUploads:r=[],onUploadComplete:o,uploadFilesMutate:d,uploadPending:m,onDeleteUpload:x,deleteFilePending:h})=>{const[p,g]=A.useState([]),[y,j]=A.useState(null),E=v=>{v.target.files&&g(Array.from(v.target.files))},b=async()=>{var v,N;if(!(!t||p.length===0))try{await d({formId:t,files:p,projectId:a}),D({title:"Success",description:"Files uploaded successfully."}),g([]),o==null||o()}catch(P){D({title:"Upload Failed",description:((N=(v=P==null?void 0:P.response)==null?void 0:v.data)==null?void 0:N.message)||"Try again later.",variant:"destructive"})}},k=async v=>{var N,P;try{await(x==null?void 0:x({fileId:v,projectId:a})),D({title:"Success",description:"Files Deleted successfully."}),l()}catch(T){D({title:"Upload Failed",description:((P=(N=T==null?void 0:T.response)==null?void 0:N.data)==null?void 0:P.message)||"Try again later.",variant:"destructive"})}},w=r.filter(v=>v.type==="pdf"),S=r.filter(v=>v.type==="image");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(ce,{type:"file",multiple:!0,onChange:E,accept:"image/jpeg,image/png,application/pdf"}),e.jsx(M,{onClick:b,isLoading:m,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px]  rounded-lg  border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto ",children:[w.length===0&&e.jsx("div",{className:"min-h-[145px]   flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),w==null?void 0:w.map((v,N)=>e.jsxs("li",{className:"flex justify-between items-center  bg-blue-50 p-2 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:v.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(M,{onClick:()=>Vt({src:v==null?void 0:v.url,alt:(v==null?void 0:v.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:h,onClick:()=>k(v==null?void 0:v._id),className:"text-green-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]}),e.jsxs("div",{className:"overflow-y-auto",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2  max-h-[180px] rounded-lg border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto custom-scrollbar",children:[S.length===0&&e.jsx("div",{className:"min-h-[145px]  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),S.map((v,N)=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 sm:p-2 p-1 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:v.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>j(v==null?void 0:v.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",onClick:()=>Vt({src:v.url,alt:v.originalName||"file.pdf"}),className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:h,onClick:()=>k(v==null?void 0:v._id),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]})]}),y&&e.jsx("div",{onClick:()=>j(null),className:"fixed inset-0 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:v=>v.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>j(null)}),e.jsx("img",{src:y,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},kA=async({projectId:t,stageNumber:a,stagePath:l,api:r})=>{const{data:o}=await r.put(`/stage${a}/${l}/${t}`);if(!o.ok)throw new Error(o.message);return o},EA=()=>{const{role:t}=Z(),a=J(t),l=["staff","owner","CTO"];return ie({mutationFn:async({projectId:r,stageNumber:o,stagePath:d})=>{if(!t||!l.includes(t))throw new Error("You are not authorized to reset this stage.");if(!a)throw new Error("API instance not available.");return await kA({projectId:r,stageNumber:o,stagePath:d,api:a})}})},ws=({projectId:t,stageNumber:a,stagePath:l,buttonClass:r="bg-red-600 text-white",iconClass:o="fas fa-rotate-left",disabled:d=!1,className:m=""})=>{const{mutateAsync:x,isPending:h}=EA(),p=async()=>{var g,y;try{await x({projectId:t,stageNumber:a,stagePath:l}),D({description:"Stage Reset successfully",title:"Success"})}catch(j){D({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||"Failed to Reset the stage",variant:"destructive"})}};return e.jsx("div",{className:`space-y-1 w-full ${m}`,children:e.jsxs(M,{onClick:p,variant:"danger",disabled:h||d,className:`${r} flex items-center gap-2 !p-2 w-full`,children:[e.jsx("i",{className:o}),e.jsx("span",{children:h?"Resetting...":"Reset Stage"})]})})},jt=()=>{const t=Array.from({length:13});return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(_e,{className:"h-8 w-40 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map((a,l)=>e.jsxs("div",{className:"bg-white p-4 shadow rounded-lg",children:[e.jsx(_e,{className:"h-6 w-32 mb-2"}),e.jsx(_e,{className:"h-4 w-24 mb-4"}),e.jsx(_e,{className:"h-4 w-16"})]},l))})]})},AA=({client:t})=>e.jsxs(Le,{className:"p-4 bg-white shadow border-l-4 border-blue-500",children:[e.jsxs("h2",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-user-tie mr-2"})," Client Info"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(Zo,{label:"Name",value:t==null?void 0:t.clientName,icon:"fa-user"}),e.jsx(Zo,{label:"Email",value:t==null?void 0:t.email,icon:"fa-envelope"}),e.jsx(Zo,{label:"WhatsApp",value:t==null?void 0:t.whatsapp,icon:"fa-phone"}),e.jsx(Zo,{label:"Location",value:t==null?void 0:t.location,icon:"fa-location-dot"})]})]}),Zo=({label:t,value:a,icon:l})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${l} text-gray-600`}),e.jsxs("strong",{children:[t,":"]})," ",a||"No data"]}),OA=A.memo(AA),RA=({sections:t,setVisibleSection:a})=>e.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(({key:l,label:r,icon:o})=>e.jsx("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer group",onClick:()=>a(l),children:e.jsxs("div",{className:"flex items-center justify-between p-5 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-3 rounded-full text-xl",children:e.jsx("i",{className:o})}),e.jsx("span",{className:"text-sm font-medium text-gray-800 group-hover:text-blue-700",children:r})]}),e.jsx("i",{className:"fa-solid fa-chevron-right text-blue-400 group-hover:text-blue-600"})]})},l))}),TA=ct.memo(RA),PA=async(t,a,l,r)=>(console.log("staffId",a),(await r.put(`/assignstafftostage/${t}/${a}/${l}`)).data),MA=()=>{const{role:t}=Z(),a=J(t),l=["owner","CTO","staff"];return ie({mutationFn:async({projectId:r,staffId:o,stageName:d})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("Not allowed to Access this api");if(!a)throw new Error("API not found");return PA(r,o,d,a)}})};function ls({stageName:t,projectId:a,organizationId:l,currentAssignedStaff:r,className:o=""}){const[d,m]=A.useState(!1),[x,h]=A.useState(r),{data:p,isLoading:g}=di(l,"staff"),{mutateAsync:y}=MA(),j=p,E=async b=>{var k,w;try{await y({projectId:a,staffId:b._id,stageName:t}),h(b),D({title:"Success",description:`${b.staffName} assigned to ${t}`}),m(!1)}catch(S){D({title:"Error",description:((w=(k=S==null?void 0:S.response)==null?void 0:k.data)==null?void 0:w.message)||(S==null?void 0:S.message)||"Failed to assign staff",variant:"destructive"})}};return e.jsxs("div",{className:`relative inline-flex items-center px-2 py-2 sm:py-1 rounded-lg text-sm shadow-sm border-[#92abc4] sm:border-none ${o} `,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-700 whitespace-nowrap",children:[e.jsx("span",{className:"font-medium hidden sm:inline text-blue-800",children:"Staff:"})," ",e.jsx("span",{className:"font-medium inline sm:hidden text-blue-800",children:"Staff Member:"})," ",x?e.jsx("span",{className:"text-gray-800 font-semibold",children:x==null?void 0:x.staffName}):e.jsx("span",{className:"text-gray-400 text-[12px]  italic",children:"Not Assigned"})]}),e.jsx(M,{size:"sm",variant:"ghost",className:"text-blue-600 hover:bg-blue-50 px-2 py-1 text-xs",onClick:()=>m(!d),children:d?e.jsx("i",{className:"fas fa-xmark text-red-600"}):e.jsx("i",{className:"fas fa-pencil text-blue-600"})})]}),d&&e.jsx("div",{className:"absolute z-10 top-full left-[0%] sm:left-[-20%] mt-2 w-[200px] bg-white border border-blue-200 rounded-md shadow-lg max-h-48 overflow-auto text-sm",children:g?e.jsx("div",{className:"p-3 text-gray-500 text-center",children:"Loading..."}):j.length===0?e.jsx("div",{className:"p-3 text-gray-400 text-center",children:"No staff available"}):e.jsx("ul",{className:"divide-y divide-blue-100 max-h-40 overflow-y-auto custom-scrollbar",children:j==null?void 0:j.map(b=>e.jsxs("li",{onClick:()=>E(b),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",children:[e.jsx("span",{className:"font-medium text-blue-700 block truncate",children:(b==null?void 0:b.staffName)||(b==null?void 0:b.name)}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:b==null?void 0:b.email})]},b==null?void 0:b._id))})})]})}const B0=[{Component:jA,icon:"fa-solid fa-bed",label:"Bedroom Section",key:"bedroom"},{Component:wA,icon:"fa-solid fa-kitchen-set",label:"Kitchen Section",key:"kitchen"},{Component:vA,icon:"fa-solid fa-house",label:"Living Hall Section",key:"livingHall"},{Component:NA,icon:"fa-solid fa-shirt",label:"Wardrobe Section",key:"wardrobe"}];function LA(){var V,oe,_,W,me;const{projectId:t,organizationId:a}=Ae(),{role:l}=Z(),{isMobile:r,openMobileSidebar:o}=Ke(),[d,m]=A.useState(""),[x,h]=A.useState(!1),[p,g]=A.useState(null),{data:y,isLoading:j,error:E,refetch:b}=dA({projectId:t}),{mutateAsync:k,isPending:w}=uA(),{mutateAsync:S,isPending:v}=mA(),{mutateAsync:N,isPending:P}=fA(),{mutateAsync:T,isPending:F}=hA(),{mutateAsync:z,isPending:q}=nA();if(j)return e.jsx(jt,{});const I=async()=>{var le,R;if(window.confirm("Are you sure want to mark it as completed?"))try{v||(await S({formId:y._id,projectId:t}),D({title:"Success",description:"completion updated successfully"}))}catch(U){D({title:"Error",description:((R=(le=U==null?void 0:U.response)==null?void 0:le.data)==null?void 0:R.message)||"Failed to update to complete the form",variant:"destructive"})}},de=async le=>{try{const R=["owner","staff","CTO"];if(!l)throw new Error("Not Authorized");if(!R.includes(l))throw new Error("Dont have the access");await navigator.clipboard.writeText(le),h(!0),D({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>h(!1),4e3)}catch(R){D({title:"Error",description:R.message||"Failed to copy link",variant:"destructive"})}},Q=async()=>{var le,R;try{const U=await k({projectId:t});m(U.inviteLink||U),D({title:"Success",description:"Invitation link generated successfully"})}catch(U){D({title:"Error",description:((R=(le=U==null?void 0:U.response)==null?void 0:le.data)==null?void 0:R.message)||U.message||"Failed to generate invitation link",variant:"destructive"})}},B=async()=>{try{await navigator.clipboard.writeText(d),h(!0),D({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>h(!1),2e3)}catch{D({title:"Error",description:"Failed to copy link",variant:"destructive"})}},ee=()=>{const le=`You're requeted to fill the form, Click this link to fill the form: ${d}`,R=`https://wa.me/?text=${encodeURIComponent(le)}`;window.open(R,"_blank")};return e.jsx("div",{className:"h-full w-full overflow-y-auto ",children:p?e.jsx("div",{className:"min-h-screen",children:B0.map(({Component:le,key:R})=>p===R&&e.jsx("div",{className:"pt-6",children:e.jsx(le,{data:y==null?void 0:y[R],isEditable:y==null?void 0:y.isEditable,setVisibleSection:g})},R))}):e.jsxs("div",{className:"h-full w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col w-full sm:flex-row justify-between sm:items-center items-start gap-4",children:[e.jsx("div",{className:"",children:e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})," ",e.jsx("i",{className:"fa-solid fa-pencil mr-2"})," Client Requirement"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-end lg:justify-end",children:[e.jsxs(M,{isLoading:v,onClick:I,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:1,stagePath:"requirementform",className:"sm:!max-w-[20%] w-full"}),e.jsx(ls,{stageName:"RequirementFormModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),E&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((oe=(V=E==null?void 0:E.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>b(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!E&&e.jsxs("main",{className:"h-[calc(100vh-90px)] overflow-y-auto custom-scrollbar space-y-6",children:[e.jsxs(Le,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{startedAt:(_=y==null?void 0:y.timer)==null?void 0:_.startedAt,projectId:t,stageName:"requirementform",refetchStageMutate:b,completedAt:(W=y==null?void 0:y.timer)==null?void 0:W.completedAt,deadLine:(me=y==null?void 0:y.timer)==null?void 0:me.deadLine,formId:y==null?void 0:y._id,deadLineMutate:N,isPending:P})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(OA,{client:y==null?void 0:y.clientData}),e.jsx(Le,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(By,{formId:y==null?void 0:y._id,existingUploads:y==null?void 0:y.uploads,onUploadComplete:b,uploadFilesMutate:T,uploadPending:F,projectId:t,refetch:b,onDeleteUpload:z,deleteFilePending:q})})]}),e.jsx(TA,{sections:B0,setVisibleSection:g}),e.jsx("div",{className:"pb-6",children:y!=null&&y.shareToken?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(ce,{value:y==null?void 0:y.shareToken,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:()=>de(y==null?void 0:y.shareToken),className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${x?"fa-check":"fa-copy"}`})})]})]}):e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-lg space-y-4",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-blue-900 flex items-center",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request to fill the form by generating a link."}),d?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(ce,{value:d,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(M,{onClick:B,className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${x?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(M,{onClick:ee,className:"w-full sm:w-auto bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(M,{onClick:B,className:"w-full sm:w-auto border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]})]}):e.jsxs(M,{onClick:Q,isLoading:w,className:"w-full bg-blue-600 text-white py-2.5 sm:py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]})]})})]})]})})}const FA=async({projectId:t,siteDetails:a,api:l})=>{const{data:r}=await l.post(`/sitemeasurement/createmeasurement/${t}`,{siteDetails:a});if(!r.ok)throw new Error(r.message);return r.data},DA=async({projectId:t,room:a,api:l})=>{const{data:r}=await l.post(`/sitemeasurement/createroom/${t}`,{room:a});if(!r.ok)throw new Error(r.message);return r.data},_A=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/sitemeasurement/getmeasurement/${t}`);if(!l.ok)throw new Error(l.message);return l.data},qA=async({projectId:t,api:a,payload:l})=>{const{data:r}=await a.put(`/sitemeasurement/updatecommonmeasurement/${t}`,l);if(!r.ok)throw new Error(r.message);return r.data},zA=async({projectId:t,api:a,roomId:l,room:r})=>{const{data:o}=await a.put(`/sitemeasurement/updateroommeasurement/${t}/${l}`,{room:r});if(!o.ok)throw new Error(o.message);return o.data},UA=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sitemeasurement/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},$A=async({projectId:t,roomId:a,api:l})=>{const{data:r}=await l.patch(`/sitemeasurement/deleteroom/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},IA=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sitemeasurement/deletesitemeasurement/${t}`);if(!l.ok)throw new Error(l.message);return l.data},BA=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/sitemeasurement/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},HA=async({formId:t,files:a,api:l,projectId:r})=>{const o=new FormData;a.forEach(m=>o.append("file",m));for(let[m,x]of o.entries())console.log(m,x);const d=await l.post(`/sitemeasurement/upload/multiple/${r}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}});return console.log("reposen",d),d.data},QA=async(t,a,l)=>{const{data:r}=await l.patch(`/sitemeasurement/${t}/deleteuploadedfile/${a}`);if(!r.ok)throw new Error(r.message);return r.data},GA=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO","client"];return ie({mutationFn:async({projectId:r,fileId:o})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await QA(r,o,a)},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["siteMeasurement",o]})}})},KA=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:l}=Z(),r=J(l);return Fe({queryKey:["siteMeasurement"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await _A({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},VA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,siteDetails:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await FA({projectId:r,api:l,siteDetails:o})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},YA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,room:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await DA({projectId:r,api:l,room:o})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},WA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,payload:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await qA({projectId:r,api:l,payload:o})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},XA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,roomId:o,room:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await zA({projectId:r,api:l,roomId:o,room:d})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},ZA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await UA({projectId:r,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},JA=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await $A({projectId:r,api:l,roomId:o})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},e4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await IA({projectId:r,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},t4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await BA({formId:r,deadLine:d,projectId:o,api:l})}})},s4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await HA({formId:r,files:o,projectId:d,api:l})}})},a4=({room:t,onEdit:a,onDelete:l,deleteRoomLoading:r})=>{const o=t.length&&t.breadth?(t.length*t.breadth).toFixed(2):null;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:t.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(t),className:"text-blue-600 hover:text-blue-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(M,{isLoading:r,onClick:l,variant:"ghost",className:"!text-red-600 hover:text-red-800 bg-white shadow-none hover:!bg-none",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Length"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.length," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Breadth"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.breadth," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Height"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.height||"N/A"," ft"]})]})]}),o&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-blue-700 font-medium text-center",children:["Total Area: ",o," sq.ft"]})})]})},n4=({measurementData:t,handleDeleteSiteMeasurement:a,deleteRoomLoading:l,setShowSiteForm:r,setShowRoomForm:o,handleEditRoom:d,handleDeleteRoom:m})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Site Measurements"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(!0),className:"px-2 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit"}),e.jsx("button",{onClick:()=>a(),className:"px-2 sm:px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Plot Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.totalPlotAreaSqFt!==null?`${t.siteDetails.totalPlotAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Built-up Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.builtUpAreaSqFt!=null?`${t.siteDetails.builtUpAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Road Facing"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.roadFacing===!0?"YES":t.siteDetails.roadFacing===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Number of Floors"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.numberOfFloors!=null?t.siteDetails.numberOfFloors:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is having Slope"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.hasSlope===!0?"YES":t.siteDetails.hasSlope===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is Boundary Wall exists"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.boundaryWallExists===!0?"YES":t.siteDetails.boundaryWallExists===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Additional Notes"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.additionalNotes?t.siteDetails.additionalNotes:"Not mentioned"})]})]})]}),t.siteDetails.totalPlotAreaSqFt!==null&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Rooms"}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Add Room"})]}),t.rooms.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("p",{className:"text-gray-500",children:"No rooms added yet"})]}):e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.rooms.map((x,h)=>e.jsx(a4,{room:x,onEdit:()=>d(x),onDelete:()=>m(x._id),deleteRoomLoading:l},h))})]})]}),l4=A.memo(n4),r4=({roomDetails:t,setRoomDetails:a,handleRoomSubmit:l,setShowRoomForm:r,updateRoomLoading:o,createRoomLoading:d,editingRoomId:m})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:m?"Edit Room":"Add New Room"}),e.jsxs("select",{value:t.name||"",onChange:x=>a(h=>({...h,name:x.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",children:[e.jsx("option",{value:"",children:"Select Room Type"}),L2.map(x=>e.jsx("option",{value:x,children:x}))]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Length (ft)"}),e.jsx("input",{type:"number",placeholder:"Length (ft)",value:t.length||0,onChange:x=>a({...t,length:Number(x.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Breadth (ft)"}),e.jsx("input",{type:"number",placeholder:"Breadth (ft)",value:t.breadth||0,onChange:x=>a({...t,breadth:Number(x.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Height (ft)"}),e.jsx("input",{type:"number",placeholder:"Height (ft)",value:t.height||0,onChange:x=>a({...t,height:Number(x.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.length&&t.breadth&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-blue-700 font-medium",children:["Calculated Area: ",(Number(t.length)*Number(t.breadth)).toFixed(2)," sq.ft"]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(M,{isLoading:m?o:d,onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Edit Room":"Add Room"})]})]})}),i4=({siteDetails:t,updatePending:a,setSiteDetails:l,handleSiteSubmit:r,setShowSiteForm:o})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Site Measurements"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Total Plot Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Total Plot Area (sq.ft)",value:t.totalPlotAreaSqFt||0,onChange:d=>l({...t,totalPlotAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Built-up Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Built-up Area (sq.ft)",value:t.builtUpAreaSqFt||0,onChange:d=>l({...t,builtUpAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Number of Floors"}),e.jsx("input",{type:"number",placeholder:"Number of Floors",value:t.numberOfFloors||0,onChange:d=>l({...t,numberOfFloors:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.hasSlope??!1,onChange:d=>l({...t,hasSlope:d.target.checked}),className:"mr-2"}),"Has Slope"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.roadFacing??!1,onChange:d=>l({...t,roadFacing:d.target.checked}),className:"mr-2"}),"Road Facing"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.boundaryWallExists??!1,onChange:d=>l({...t,boundaryWallExists:d.target.checked}),className:"mr-2"}),"Boundary Wall Exists"]})]}),e.jsx("textarea",{placeholder:"Additional Notes",value:t.additionalNotes||"",onChange:d=>l({...t,additionalNotes:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",rows:4}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(M,{variant:"secondary",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(M,{variant:"primary",onClick:r,isLoading:a,children:"Save Details"})]})]})}),o4=A.memo(i4),c4={totalPlotAreaSqFt:null,builtUpAreaSqFt:null,roadFacing:null,numberOfFloors:null,hasSlope:!1,boundaryWallExists:!1,additionalNotes:null},H0={name:null,length:null,breadth:null,height:null};function d4(){var U,L,K,Y,ge;const{projectId:t,organizationId:a}=Ae(),{isMobile:l,openMobileSidebar:r}=Ke();if(!t)return;const[o,d]=A.useState(!1),[m,x]=A.useState(!1),[h,p]=A.useState(c4),[g,y]=A.useState(H0),[j,E]=A.useState(null);let{data:b,isLoading:k,refetch:w,error:S}=KA({projectId:t});const v=VA(),N=YA(),P=WA(),T=XA(),F=JA(),z=e4(),q=ZA(),{mutateAsync:I,isPending:de}=t4(),{mutateAsync:Q,isPending:B}=s4(),{mutateAsync:ee,isPending:V}=GA(),oe=async()=>{var se,Ne;try{b?await P.mutateAsync({projectId:t,payload:h}):await v.mutateAsync({projectId:t,siteDetails:h}),d(!1),D({description:"Site details updated successfully",title:"Success"})}catch(be){D({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||be.message||"Failed to save site details",variant:"destructive"})}},_=async()=>{var se,Ne;try{if(!g.name)throw new Error("please select the name");const be=g.length&&g.breadth?(Number(g.length)*Number(g.breadth)).toFixed(2):null,Ve={...g,area:be};j?await T.mutateAsync({projectId:t,roomId:j,room:Ve}):await N.mutateAsync({projectId:t,room:Ve}),x(!1),E(null),y(H0),D({description:j?"Room updated":"Room added",title:"Success"})}catch(be){D({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Operation failed",variant:"destructive"})}},W=async se=>{var Ne,be;try{await F.mutateAsync({projectId:t,roomId:se}),D({description:"Room deleted",title:"Success"})}catch(Ve){D({title:"Error",description:((be=(Ne=Ve==null?void 0:Ve.response)==null?void 0:Ne.data)==null?void 0:be.message)||"Delete failed",variant:"destructive"})}},me=async()=>{var se,Ne;try{await z.mutateAsync({projectId:t}),D({description:"Site measurement deleted",title:"Success"})}catch(be){D({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||"Delete failed",variant:"destructive"})}},le=async()=>{var se,Ne;try{await q.mutateAsync({projectId:t}),D({description:"Completion updated",title:"Success"})}catch(be){D({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||"Update failed",variant:"destructive"})}},R=se=>{y(se),E(se==null?void 0:se._id),x(!0)};return k?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-2 max-w-full h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"})," Site Measurement"]}),e.jsx("p",{className:"text-gray-600 hidden sm:block text-sm sm:text-base",children:"Plan your dream home"})]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-start lg:justify-end",children:[e.jsxs(M,{isLoading:q.isPending,onClick:le,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2  w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"})," Mark Complete"]}),e.jsx(ws,{projectId:t,stageNumber:2,stagePath:"sitemeasurement",className:"sm:!max-w-[20%] w-full"}),e.jsx(ls,{stageName:"SiteMeasurementModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),S&&e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((L=(U=S==null?void 0:S.response)==null?void 0:U.data)==null?void 0:L.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>w(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!S&&e.jsxs(Le,{className:"p-4 mb-4 shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(K=b==null?void 0:b.timer)==null?void 0:K.compltedAt,stageName:"sitemeasurement",formId:b==null?void 0:b._id,projectId:t,deadLine:(Y=b==null?void 0:b.timer)==null?void 0:Y.deadLine,startedAt:(ge=b==null?void 0:b.timer)==null?void 0:ge.startedAt,refetchStageMutate:w,deadLineMutate:I,isPending:de})]}),!S&&e.jsx("div",{className:"mb-6",children:e.jsx(Le,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(By,{formId:b==null?void 0:b._id,refetch:w,existingUploads:b==null?void 0:b.uploads,onUploadComplete:w,uploadFilesMutate:Q,uploadPending:B,projectId:t,onDeleteUpload:ee,deleteFilePending:V})})}),!S&&e.jsxs(e.Fragment,{children:[!Object.values((b==null?void 0:b.siteDetails)||{}).some(se=>se!==null)&&!o?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No Site Details Added"}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add Site Details"})]}):e.jsx(l4,{measurementData:b,handleDeleteSiteMeasurement:me,setShowSiteForm:d,setShowRoomForm:x,handleEditRoom:R,handleDeleteRoom:W,deleteRoomLoading:F.isPending}),o&&e.jsx(o4,{siteDetails:h,setSiteDetails:p,handleSiteSubmit:oe,setShowSiteForm:d,updatePending:P.isPending}),m&&e.jsx(r4,{handleRoomSubmit:_,setShowRoomForm:x,roomDetails:g,setRoomDetails:y,updateRoomLoading:T.isPending,createRoomLoading:N.isPending,editingRoomId:j})]})]})}const u4=async({projectId:t,roomName:a,api:l})=>{const{data:r}=await l.post(`/sampledesign/${t}/rooms`,{roomName:a});if(!r.ok)throw new Error(r.message);return r.data},m4=async({projectId:t,roomName:a,files:l,api:r})=>{const o=new FormData;l.forEach(m=>o.append("files",m));const{data:d}=await r.post(`/sampledesign/${t}/rooms/${a}/upload`,o,{headers:{"Content-Type":"multipart/form-data"}});if(!d.ok)throw new Error(d.message);return d.data},f4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/sampledesign/${t}/rooms`);if(!l.ok)throw new Error(l.message);return l.data},h4=async({projectId:t,roomName:a,fileIndex:l,api:r})=>{const{data:o}=await r.delete(`/sampledesign/${t}/rooms/${a}/delete/${l}`);if(!o.ok)throw new Error(o.message);return o.data},x4=async({projectId:t,api:a,roomId:l})=>{const{data:r}=await a.delete(`/sampledesign/${t}/${l}/deleteroom`);if(!r.ok)throw new Error(r.message);return r.data},p4=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sampledesign/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},g4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/sampledesign/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},b4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,roomName:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await u4({projectId:r,roomName:o,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["sampledesign","rooms"]})}})},y4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,roomName:o,files:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await m4({projectId:r,roomName:o,files:d,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},w4=t=>{const a=["owner","staff","CTO","client"],{role:l}=Z(),r=J(l);return Fe({queryKey:["sampledesign","roomfiles",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await f4({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},v4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,roomName:o,fileIndex:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await h4({projectId:r,roomName:o,fileIndex:d,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},j4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await x4({projectId:r,roomId:o,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},N4=()=>{const t=["owner","staff","CTO","client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await p4({projectId:r,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},S4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await g4({formId:r,projectId:o,deadLine:d,api:l})}})},C4=({isOpen:t,onClose:a,onSubmit:l,addPending:r})=>{const[o,d]=A.useState(""),m=async x=>{x.preventDefault(),await l(o),d(""),a()};return t?e.jsx("div",{onClick:a,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{onClick:x=>x.stopPropagation(),className:"bg-white rounded-lg p-6 w-[80%] sm:w-[60%] lg:w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4",children:"Add New Room"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Room Name"}),e.jsx("input",{type:"text",value:o,onChange:x=>d(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx(M,{isLoading:r,type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Room"})]})]})]})}):null},k4=({files:t,onUpload:a,onDelete:l,uploadPending:r,deletePending:o})=>{const d=A.useRef(null),[m,x]=A.useState([]),h=t.filter(b=>b.type==="pdf"),p=t.filter(b=>b.type==="image"),[g,y]=A.useState(null),j=b=>{var k;(k=b.target.files)!=null&&k.length&&x(Array.from(b.target.files))},E=async()=>{var b,k;if(m.length!==0)try{await a(m),D({description:"File uploaded successfully",title:"Success"})}catch(w){D({title:"Error",description:((k=(b=w==null?void 0:w.response)==null?void 0:b.data)==null?void 0:k.message)||w.message||" Failed to upload the files",variant:"destructive"})}};return e.jsxs("div",{className:"bg-white h-auto rounded-lg p-2 sm:p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs("div",{className:"w-full space-x-2",children:[e.jsx("input",{id:"fileInput",ref:d,type:"file",accept:".pdf,image/*",multiple:!0,className:"mb-1 sm:mb-0 w-[55%] sm:w-[80%] h-full py-2 border-1 px-2 rounded-lg",onChange:j}),e.jsxs(M,{variant:"primary",onClick:()=>{var b;return(b=d.current)==null?void 0:b.click()},className:"",children:[e.jsx("span",{className:"hidden sm:block",children:" Select Files"}),e.jsx("span",{className:"block sm:hidden",children:" Select"})]}),e.jsx(M,{isLoading:r,onClick:E,className:"px-2 sm:px-4 py-2 rounded-lg",variant:"primary",children:"upload"})]})}),e.jsxs("div",{className:"grid h-auto grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-file-pdf text-lg"}),e.jsx("h3",{className:"font-medium",children:"PDF Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:h.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No PDF files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%]",children:h.map((b,k)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[100%] flex-1 ",children:b.originalName||"Unnamed PDF"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{onClick:()=>Vt({src:b==null?void 0:b.url,alt:(b==null?void 0:b.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:o,onClick:()=>l(k),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},k))})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-images text-lg"}),e.jsx("h3",{className:"font-medium",children:"Image Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:p.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No image files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%] ",children:p.map((b,k)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[80%] ",children:b.originalName||"Unnamed Image"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>y(b==null?void 0:b.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{onClick:()=>Vt({src:b==null?void 0:b.url,alt:(b==null?void 0:b.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:o,onClick:()=>l(k),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},k))})})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:b=>b.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},E4=()=>{var q,I,de,Q,B;const{projectId:t,organizationId:a}=Ae(),{isMobile:l,openMobileSidebar:r}=Ke();if(!t)return null;const[o,d]=A.useState(!1),m=b4(),x=y4(),h=v4(),{mutateAsync:p,isPending:g}=j4(),{data:y,isLoading:j,refetch:E,error:b}=w4(t),{mutateAsync:k,isPending:w}=N4(),{mutateAsync:S,isPending:v}=S4(),N=async()=>{var ee,V;try{w||await k({projectId:t}),D({description:"Completion status updated successfully",title:"Success"})}catch(oe){D({title:"Error",description:((V=(ee=oe==null?void 0:oe.response)==null?void 0:ee.data)==null?void 0:V.message)||"Failed to update completion status",variant:"destructive"})}},P=async ee=>{var V,oe;try{await m.mutateAsync({projectId:t,roomName:ee}),D({description:"Room Created successfully",title:"Success"})}catch(_){D({title:"Error",description:((oe=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to create room status",variant:"destructive"})}},T=async ee=>{var V,oe;try{w||await p({projectId:t,roomId:ee}),D({description:"Room section Deleted successfully",title:"Success"})}catch(_){D({title:"Error",description:((oe=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to delete the room",variant:"destructive"})}},F=async(ee,V)=>{var oe,_;try{await x.mutateAsync({projectId:t,roomName:ee,files:V}),D({description:"File uploaded successfully",title:"Success"}),E()}catch(W){D({title:"Error",description:((_=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:_.message)||" Failed to upload the files",variant:"destructive"})}},z=async(ee,V)=>{var oe,_;try{await h.mutateAsync({projectId:t,roomName:ee,fileIndex:V}),D({description:"File deleted successfully",title:"Success"}),E()}catch(W){D({title:"Error",description:((_=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:_.message)||"Failed to delete the files",variant:"destructive"})}};return j?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full min-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md  border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-object-group mr-2"}),"Sample Design Files"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsxs(M,{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!b,children:[e.jsx("i",{className:"fas fa-plus mr-2"}),e.jsx("span",{className:"",children:"Add room"})]}),e.jsxs(M,{isLoading:w,onClick:N,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!b,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:3,stagePath:"sampledesign",className:"flex-1 sm:flex-initial min-w-max",disabled:!!b}),e.jsx(ls,{stageName:"SampleDesignModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),b&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((I=(q=b==null?void 0:b.response)==null?void 0:q.data)==null?void 0:I.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>E(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"sampledesign",completedAt:(de=y==null?void 0:y.timer)==null?void 0:de.compltedAt,formId:y==null?void 0:y._id,projectId:t,deadLine:(Q=y==null?void 0:y.timer)==null?void 0:Q.deadLine,startedAt:(B=y==null?void 0:y.timer)==null?void 0:B.startedAt,refetchStageMutate:E,deadLineMutate:S,isPending:v})]}),!(y!=null&&y.rooms)||y.rooms.length===0?e.jsxs("div",{className:"text-center py-10 sm:py-16 bg-white rounded-lg shadow-sm",children:[e.jsx("i",{className:"fas fa-home text-blue-200 text-5xl sm:text-6xl mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Start by adding a room to upload design files"}),e.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 min-w-[200px]",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Your First Room"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:max-h-[60vh] md:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[65vh] overflow-y-auto custom-scrollbar gap-6",children:y.rooms.map(ee=>e.jsxs("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-sm p-1 sm:p-6 flex flex-col",children:[e.jsxs("div",{className:"flex sm:flex-row items-center justify-between gap-3 mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-700 truncate",children:[e.jsx("i",{className:"fas fa-door-open mr-2"}),ee.roomName]}),e.jsxs(M,{isLoading:g,onClick:()=>T(ee._id),variant:"danger",className:"bg-red-600 text-white  sm:w-auto mt-2 sm:mt-0",children:[e.jsx("i",{className:"fa-solid fa-trash mr-2"}),"Delete"]})]}),e.jsx("div",{className:"flex-grow",children:e.jsx(k4,{files:ee.files,onUpload:V=>F(ee.roomName,V),onDelete:V=>z(ee.roomName,V),uploadPending:x.isPending,deletePending:h.isPending})})]},ee.roomName))})]}),e.jsx(C4,{isOpen:o,onClose:()=>d(!1),onSubmit:P,addPending:m.isPending})]})},A4=async({projectId:t,formData:a,api:l})=>{for(const[o,d]of a.entries())console.log("form data",o,d);const{data:r}=await l.post(`/technicalconsultation/createmessage/${t}`,a);if(!r.ok)throw new Error(r.message);return r.data},O4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/technicalconsultation/getmessages/${t}`);if(console.log("data form the message",l),!l.ok)throw new Error(l.message);return l.data},R4=async({projectId:t,messageId:a,message:l,senderId:r,senderRole:o,api:d})=>{const{data:m}=await d.put(`/technicalconsultation/editmessage/${t}/${a}`,{message:l,senderId:r,senderRole:o});if(!m.ok)throw new Error(m.message);return m.data},T4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/technicalconsultation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},P4=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/technicalconsultation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},M4=t=>{const a=["owner","staff","CTO","worker"],{role:l}=Z(),r=J(l);return Fe({queryKey:["consultationMessages",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API not found");return await O4({projectId:t,api:r})},enabled:!!t,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1})},L4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,formData:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await A4({projectId:r,formData:o,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["consultationMessages"]})}})},F4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,messageId:o,message:d,senderId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await R4({projectId:r,messageId:o,message:d,senderId:m,senderRole:a,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["consultationMessages"]})}})},D4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await P4({projectId:r,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["siteMeasurement"]})}})},_4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await T4({formId:r,projectId:o,deadLine:d,api:l})}})},q4=()=>{var R,U,L,K,Y,ge;const{projectId:t,organizationId:a}=Ae(),{isMobile:l,openMobileSidebar:r}=Ke(),{role:o,_id:d}=Z(),[m,x]=A.useState(""),[h,p]=A.useState([]),[g,y]=A.useState(null),[j,E]=A.useState(""),[b,k]=A.useState(null),[w,S]=A.useState(!1);let{data:v,isLoading:N,error:P,isError:T,refetch:F}=M4(t);const z=v,{mutateAsync:q,isPending:I}=L4(),{mutateAsync:de,isPending:Q}=F4(),{mutateAsync:B,isPending:ee}=_4(),V=D4(),oe=async()=>{var se,Ne;try{await V.mutateAsync({projectId:t}),D({description:"Completion status updated successfully",title:"Success"})}catch(be){D({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||be.message||"Failed to update completion status",variant:"destructive"})}},_=async()=>{var se,Ne;try{if(!m&&h.length===0)throw new Error("please write anything");const be=new FormData;m&&be.append("message",m),o&&be.append("senderRole",o),be.append("sender",d),h.forEach(Ve=>be.append("attachments",Ve)),await q({projectId:t,formData:be}),x(""),p([]),D({description:"message sent successfully",title:"Success"})}catch(be){D({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Failed to send the message",variant:"destructive"})}},W=(se,Ne)=>{y(se),E(Ne)},me=()=>{y(null),E("")},le=async()=>{var se,Ne;try{if(!g||!j)throw new Error("please write anything");await de({projectId:t,messageId:g,message:j,senderId:d}),y(null),E(""),D({description:"message edited successfully",title:"Success"})}catch(be){D({title:"Error",description:((Ne=(se=be==null?void 0:be.response)==null?void 0:se.data)==null?void 0:Ne.message)||(be==null?void 0:be.message)||"Failed to edit the message",variant:"destructive"})}};return N?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full max-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-2",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-comments mr-2"})," Technical Consultation"]}),e.jsxs("div",{className:"w-full lg:w-[60%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs(M,{isLoading:V.isPending,onClick:oe,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:4,stagePath:"technicalconsultation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(ls,{stageName:"TechnicalConsultationModel",projectId:t,organizationId:a,currentAssignedStaff:(z==null?void 0:z.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),e.jsxs(Le,{className:"p-4 mb-3 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"technicalconsultation",completedAt:(R=z==null?void 0:z.timer)==null?void 0:R.completedAt,projectId:t,formId:z==null?void 0:z._id,deadLine:(U=z==null?void 0:z.timer)==null?void 0:U.deadLine,startedAt:(L=z==null?void 0:z.timer)==null?void 0:L.startedAt,refetchStageMutate:F,deadLineMutate:B,isPending:ee})]}),e.jsx("div",{className:" flex flex-col bg-white rounded-xl p-2 shadow-md border custom-scrollbar min-h-[200px] sm:min-h-[170px] md:min-h-[190px] lg:min-h-[300px] border-gray-200 mb-2 flex-grow max-h-[70vh] sm:!max-h-[30vh] md:!max-h-[30vh] lg:!max-h-[42vh] xl:!max-h-[49vh] overflow-y-auto ",children:e.jsxs("div",{className:"flex flex-col-reverse overflow-y-auto custom-scrollbar  flex-grow p-2  md:!max-h-full space-y-reverse space-y-4",children:[(T||P)&&e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-ban text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:((Y=(K=P==null?void 0:P.response)==null?void 0:K.data)==null?void 0:Y.message)||(P==null?void 0:P.message)||"Failed to load messages, please try again"}),e.jsxs(M,{onClick:()=>F(),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx("i",{className:"fas fa-redo mr-2"})," Retry"]})]})}),N?e.jsxs("div",{className:"flex h-full items-center justify-center py-10",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-2xl"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Loading messages..."})]}):(z==null?void 0:z.messages.length)===0?e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-envelope text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"No messages have been posted yet."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start the conversation using the box below."})]})}):e.jsx("div",{className:"overflow-y-auto custom-scrollbar flex flex-col-reverse space-y-reverse space-y-4",children:(ge=z==null?void 0:z.messages)==null?void 0:ge.slice().sort((se,Ne)=>new Date(Ne.createdAt).getTime()-new Date(se.createdAt).getTime()).map(se=>{var Ne;return e.jsxs("div",{className:"bg-blue-50 w-full group px-4 py-[5px] rounded-lg shadow flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs sm:text-[10px] text-gray-600",children:[se.senderRole.toUpperCase()," - ",new Date(se.createdAt).toLocaleString(),se.isEdited&&e.jsxs(sr,{className:"sm:ml-2 my-1 sm:my-0",children:[" ",e.jsxs("p",{className:"hidden sm:inline-block",children:["message is  "," "," "]}),"  edited by ",se.senderRole]})]}),e.jsx("div",{className:"opacity-0 scale-95 group-hover:opacity-100 transition-all duration-300",children:(se.sender===d||o==="owner"||o==="CTO")&&e.jsx("div",{className:"flex gap-2",children:e.jsx(M,{variant:"secondary",onClick:()=>W(se._id,se.message),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fas fa-edit"})})})})]}),g===se._id?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mt-2",children:[e.jsx(ce,{value:j,onChange:be=>E(be.target.value),className:"flex-grow"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(M,{isLoading:Q,onClick:le,className:"w-full sm:w-auto",children:"Save"}),e.jsx(M,{variant:"danger",className:"w-full sm:w-auto border-red-200 hover:bg-red-700 bg-red-600 text-white",onClick:me,children:"Cancel"})]})]}):e.jsx("p",{className:"text-gray-900 text-sm",children:se.message}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-3",children:(Ne=se.attachments)==null?void 0:Ne.map((be,Ve)=>e.jsxs("div",{className:"flex items-center gap-2 bg-white border px-3 py-2 rounded shadow-sm w-full max-w-[280px]",children:[e.jsx("i",{className:`fas ${be.type==="pdf"?"fa-file-pdf text-red-500":"fa-image text-blue-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 truncate flex-grow min-w-0",children:be.originalName}),be.type==="image"&&e.jsx(M,{size:"sm",variant:"primary",onClick:()=>{k(be.url),S(!0)},children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{onClick:()=>Vt({src:be==null?void 0:be.url,alt:(be==null?void 0:be.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})})]},Ve))})]},se._id)})})]})}),e.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl shadow-md",children:[e.jsx(fe,{htmlFor:"message",children:"Your Message"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-3",children:[e.jsx(ce,{id:"message",placeholder:"Write something...",value:m,onChange:se=>x(se.target.value),onKeyDown:se=>{se.key==="Enter"&&_()},className:"flex-grow"}),e.jsxs(M,{isLoading:I,onClick:_,className:"w-full sm:w-auto",children:["Send ",e.jsx("i",{className:"ml-2 fa-solid fa-paper-plane"})]})]}),e.jsx(fe,{children:"Attach Files (PDF or Image)"}),e.jsx(ce,{type:"file",multiple:!0,accept:".pdf,image/*",onChange:se=>p(Array.from(se.target.files||[])),className:""})]}),b&&e.jsx("div",{onClick:()=>k(null),className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{onClick:se=>se.stopPropagation(),className:"bg-white p-2 sm:p-4 rounded-lg shadow-lg max-w-[90%] max-h-[90%] overflow-auto relative",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:()=>k(null),className:"text-red-500 text-xl",children:e.jsx("i",{className:"fas fa-times"})})}),e.jsxs("div",{className:"relative min-w-80 ",children:[w&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-gray-600"})}),e.jsx("img",{src:b,onLoad:()=>S(!1),loading:"lazy",alt:"Preview",className:`max-h-[80vh] rounded transition duration-500 ${w?"blur-sm scale-105":""}`})]})]})})]})};function Q0({room:t,projectId:a,organizationId:l}){var o;const r=Me();return e.jsxs("div",{onClick:()=>r(`/${l}/projectdetails/${a}/materialselection/materialroom/${t._id}`),className:"cursor-pointer border-l-6 border-blue-600 shadow-md hover:border-blue-400 transition-all duration-200 rounded-lg p-5 bg-white hover:shadow-lg flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-sm  text-blue-500",children:["No of Fields:",(o=Object.keys(t.roomFields))==null?void 0:o.length]})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium underline hover:no-underline",children:"View "})]})}const z4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/materialconfirmation/${t}`);if(!l.ok)throw new Error(l.message);return console.log(l),l.data},U4=async({projectId:t,roomId:a,api:l})=>{const{data:r}=await l.get(`/materialconfirmation/${t}/predefinedroom/${a}`);if(!r.ok)throw new Error(r.message);return r.data},$4=async({projectId:t,roomId:a,fieldKey:l,updates:r,api:o})=>{const{data:d}=await o.put(`/materialconfirmation/${t}/predefinedroom/${a}/field/${l}`,r);if(!d.ok)throw new Error(d.message);return d.data},I4=async({projectId:t,name:a,api:l})=>{const{data:r}=await l.post(`/materialconfirmation/${t}/customroom`,{name:a});if(!r.ok)throw new Error(r.message);return r.data},B4=async({projectId:t,roomId:a,fieldKey:l,api:r})=>{const{data:o}=await r.delete(`/materialconfirmation/${t}/customroom/${a}/field/${l}`);if(!o.ok)throw new Error(o.message);return o.data},H4=async({projectId:t,roomId:a,formData:l,api:r})=>{const{data:o}=await r.post(`/materialconfirmation/${t}/uploads/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},Q4=async({projectId:t,roomId:a,fileId:l,api:r})=>{const{data:o}=await r.patch(`/materialconfirmation/${t}/deleteuploadedfile/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},G4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/materialconfirmation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},K4=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/materialconfirmation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},V4=t=>{const a=["owner","staff","CTO","client","worker"],{role:l}=Z(),r=J(l);return Fe({queryKey:["material-confirmation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not authorized");if(!r)throw new Error("API instance not available");return await z4({projectId:t,api:r})},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},Y4=({projectId:t,roomId:a})=>{const l=["owner","staff","CTO","client","worker"],{role:r}=Z(),o=J(r);return Fe({queryKey:["material-room",t,a],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("Not authorized");if(!o)throw new Error("API instance unavailable");return await U4({projectId:t,roomId:a,api:o})},enabled:!!t&&!!a,retry:!1,refetchOnWindowFocus:!1})},W4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomId:d,fieldKey:m,updates:x})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await $4({projectId:o,roomId:d,fieldKey:m,updates:x,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},X4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,name:d})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await I4({projectId:o,name:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},Z4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomId:d,fieldKey:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await B4({projectId:o,roomId:d,fieldKey:m,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},J4=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomId:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await H4({projectId:o,roomId:d,formData:m,api:l})},onSuccess:(o,{projectId:d,roomId:m})=>{r.invalidateQueries({queryKey:["material-room",d,m]})}})},eO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomId:d,fileId:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await Q4({projectId:o,roomId:d,fileId:m,api:l})},onSuccess:(o,{projectId:d,roomId:m})=>{r.invalidateQueries({queryKey:["material-room",d,m]})}})},tO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await G4({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["material-rooms"]})}})},sO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await K4({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-rooms",d]})}})},aO=({onClose:t,projectId:a})=>{const[l,r]=A.useState(""),{mutateAsync:o,isPending:d}=X4(),m=async()=>{var x,h;if(!l.trim()){D({title:"Error",description:"Room name is required",variant:"destructive"});return}try{await o({projectId:a,name:l}),D({title:"Success",description:"Room created successfully "}),t()}catch(p){D({title:"Error",description:((h=(x=p==null?void 0:p.response)==null?void 0:x.data)==null?void 0:h.message)||p.message||"Failed to create room",variant:"destructive"})}};return e.jsx("div",{onClick:t,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsxs("div",{children:[e.jsxs(fe,{htmlFor:"roomName",className:"text-sm text-gray-700",children:["Room Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ce,{id:"roomName",value:l,onChange:x=>r(x.target.value),placeholder:"e.g., Master Bedroom, Kitchen",className:"mt-1"})]}),e.jsx(M,{onClick:m,disabled:d,className:"w-full bg-blue-600 text-white hover:bg-blue-700 transition rounded-xl",children:"Create Room"})]})})};function nO(){var T,F,z,q,I,de,Q;const{projectId:t,organizationId:a}=Ae(),{isMobile:l,openMobileSidebar:r}=Ke(),o=pt(),{data:d,isLoading:m,error:x,refetch:h}=V4(t),{mutateAsync:p,isPending:g}=tO(),{mutateAsync:y,isPending:j}=sO(),[E,b]=A.useState(!1);if(m)return e.jsx(jt,{});const k=!((T=d==null?void 0:d.customRooms)!=null&&T.length)&&!((F=d==null?void 0:d.rooms)!=null&&F.length),w=o.pathname.includes("/materialroom"),S=async()=>{var B,ee;try{await y({projectId:t}),D({description:"Completion status updated successfully",title:"Success"})}catch(V){D({title:"Error",description:((ee=(B=V==null?void 0:V.response)==null?void 0:B.data)==null?void 0:ee.message)||V.message||"Failed to update completion status",variant:"destructive"})}},{rooms:v,customRooms:N}=d||{},P=((v==null?void 0:v.length)||0)+((N==null?void 0:N.length)||0);return e.jsx("div",{className:"flex flex-col h-full w-full  py-4",children:w?e.jsx(It,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-box mr-2"})," Material Selection"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%]  flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap  md:flex-nowrap gap-2 justify-end",children:[e.jsxs(M,{isLoading:j,onClick:S,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),!w&&e.jsx(M,{variant:"primary",onClick:()=>b(!0),className:"bg-blue-600 text-white flex-1 sm:flex-initial min-w-max",children:"+ Add Room"})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:5,stagePath:"materialconfirmation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(ls,{stageName:"MaterialRoomConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),x&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-4",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=(z=x==null?void 0:x.response)==null?void 0:z.data)==null?void 0:q.message)||(x==null?void 0:x.message)||"Failed to load room data"}),e.jsx(M,{onClick:()=>h(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),e.jsx("div",{className:"flex-grow min-h-0 flex flex-col",children:!x&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(I=d==null?void 0:d.timer)==null?void 0:I.completedAt,stageName:"materialconfirmation",projectId:t,formId:d==null?void 0:d._id,deadLine:(de=d==null?void 0:d.timer)==null?void 0:de.deadLine,startedAt:(Q=d==null?void 0:d.timer)==null?void 0:Q.startedAt,refetchStageMutate:h,deadLineMutate:p,isPending:g})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold",children:["Total Rooms: ",P]})}),E&&e.jsx(zy,{open:E,onOpenChange:b,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-700",children:"Create New Room"}),e.jsx(aO,{onClose:()=>b(!1),projectId:t})]})}),e.jsx("div",{className:"flex-grow min-h-[100%] py-2 sm:!min-h-0  overflow-y-auto",children:k?e.jsx("div",{className:"h-full flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-door-open text-5xl sm:text-6xl text-blue-300 mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add rooms to start selecting materials"}),e.jsxs("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Your First Room"]})]})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[v==null?void 0:v.map(B=>e.jsx(Q0,{organizationId:a,room:B,projectId:t},B._id)),N==null?void 0:N.map(B=>e.jsx(Q0,{organizationId:a,room:B,projectId:t},B._id))]})})]})})]})})}const xn=()=>{const t=Array.from({length:11});return e.jsxs("div",{className:"w-full max-h-full overflow-hidden mx-auto mt-4 bg-white shadow rounded p-6",children:[e.jsx(_e,{className:"h-6 w-40 mb-2"}),e.jsx(_e,{className:"h-4 w-32 mb-6"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border border-gray-200 rounded-lg",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-100 text-left",children:["Item","Quantity","Unit","Remarks","Actions"].map((a,l)=>e.jsx("th",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-20"})},l))})}),e.jsx("tbody",{children:t.map((a,l)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-32"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-12"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-10"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-3",children:e.jsx(_e,{className:"h-8 w-8 rounded-full"})})]},l))})]})})]})},G0={primary:"text-blue-400",danger:"text-red-400",success:"text-green-400",warning:"text-yellow-400",gray:"text-gray-400"},K0={envelope:"fas fa-envelope",box:"fas fa-box-open",message:"fas fa-comment-dots",chat:"fas fa-comments",warning:"fas fa-exclamation-triangle"},Hy=({message:t,icon:a="box",customIconClass:l,color:r="gray"})=>{const d=`${a==="custom"?l||"fas fa-question-circle":K0[a]||K0.box} text-7xl mb-4 ${G0[r]||G0.gray}`;return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center py-12 px-4 text-center",children:[e.jsx("i",{className:d}),e.jsx("p",{className:"text-lg text-gray-600",children:t})]})},lO=({projectId:t,roomId:a,initialFiles:l,refetch:r})=>{const[o,d]=A.useState([]),[m,x]=A.useState(l.filter(N=>N.type==="pdf")),[h,p]=A.useState(l.filter(N=>N.type==="image")),[g,y]=A.useState(null),{mutateAsync:j,isPending:E}=J4(),{mutateAsync:b,isPending:k}=eO(),w=N=>{N.target.files&&d(Array.from(N.target.files))},S=async()=>{var P,T;if(o.length===0)return;const N=new FormData;o.forEach(F=>N.append("files",F));try{const F=await j({projectId:t,roomId:a,formData:N}),z=F.filter(I=>I.type==="pdf"),q=F.filter(I=>I.type==="image");x(I=>[...I,...z]),p(I=>[...I,...q]),d([]),D({title:"Success",description:"file uploaded successfully"}),r()}catch(F){D({title:"error",description:((T=(P=F==null?void 0:F.response)==null?void 0:P.data)==null?void 0:T.message)||"failed to upload file",variant:"destructive"})}},v=async(N,P)=>{var T,F;try{await b({projectId:t,roomId:a,fileId:N}),P==="pdf"?x(z=>z.filter(q=>q._id!==N)):p(z=>z.filter(q=>q._id!==N)),D({title:"Success",description:"deleted successfully"}),r()}catch(z){D({title:"error",description:((F=(T=z==null?void 0:z.response)==null?void 0:T.data)==null?void 0:F.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 ",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(ce,{type:"file",multiple:!0,onChange:w,accept:"image/*,application/pdf"}),e.jsx(M,{onClick:S,isLoading:E,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{onClick:()=>v(N._id,"pdf"),size:"sm",isLoading:k,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[h.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),h.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>y(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{onClick:()=>v(N._id,"image"),size:"sm",isLoading:k,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function rO(){const{projectId:t,roomId:a}=Ae(),l=Me();if(!t||!a)return null;const{data:r,isLoading:o,refetch:d}=Y4({projectId:t,roomId:a}),[m,x]=A.useState(null),[h,p]=A.useState({quantity:0,unit:"",remarks:""}),{mutateAsync:g,isPending:y}=W4(),{mutateAsync:j,isPending:E}=Z4();if(o)return e.jsx(xn,{});if(!r)return e.jsx(Hy,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const b="items"in r,k=b?r.items.map(N=>[N.itemKey,N]):Object.entries(r.roomFields),w=(N,P)=>{x(N),p({quantity:P.quantity||0,unit:P.unit||"",remarks:P.remarks||""})},S=async N=>{var P,T;try{await g({projectId:t,roomId:a,fieldKey:N,updates:h}),x(null),D({description:"Field updated successfully",title:"Success"}),d()}catch(F){D({title:"Error",description:((T=(P=F==null?void 0:F.response)==null?void 0:P.data)==null?void 0:T.message)||F.message||"Failed to update field",variant:"destructive"})}},v=async N=>{var P,T;try{confirm("Are you sure you want to delete this field?")&&await j({projectId:t,roomId:a,fieldKey:N}),D({description:"Field deleted successfully",title:"Success"}),d()}catch(F){D({title:"Error",description:((T=(P=F==null?void 0:F.response)==null?void 0:P.data)==null?void 0:T.message)||F.message||"Failed to delete field",variant:"destructive"})}};return e.jsxs("div",{className:"flex flex-col h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:r.name}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Room Material Items"})]}),e.jsx(M,{variant:"primary",className:"h-10 text-sm sm:text-base",onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("section",{className:"w-full min-h-[100%] flex flex-col",children:e.jsx("div",{className:"overflow-x-auto min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:"min-w-[700px] w-full flex flex-col border-2 border-gray-100 rounded-lg",children:[e.jsxs("div",{className:"rounded-md grid grid-cols-5 bg-gray-100 text-sm font-semibold text-gray-700 px-2 sm:px-4 py-3 sticky top-0 z-10",children:[e.jsx("div",{className:"truncate text-center",children:"Item"}),e.jsx("div",{className:"truncate text-center",children:"Quantity"}),e.jsx("div",{className:"truncate text-center",children:"Unit"}),e.jsx("div",{className:"truncate text-center",children:"Remarks"}),e.jsx("div",{className:"truncate text-center",children:"Actions"})]}),e.jsx("div",{className:"flex-grow min-h-0 overflow-y-auto custom-scrollbar",children:k.map(([N,P])=>e.jsxs("div",{className:"grid text-center mx-auto grid-cols-5 items-center px-2 sm:px-4 py-3 text-sm hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate pr-2",children:N}),m===N?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(ce,{type:"number",value:h.quantity,onChange:T=>p({...h,quantity:+T.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(ce,{value:h.unit,onChange:T=>p({...h,unit:T.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(ce,{value:h.remarks,onChange:T=>p({...h,remarks:T.target.value}),className:"w-full text-sm"})}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(M,{variant:"primary",isLoading:y,onClick:()=>S(N),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{variant:"secondary",onClick:()=>x(null),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"truncate pr-2",children:P.quantity??"N/A"}),e.jsx("div",{className:"truncate pr-2",children:P.unit||"N/A"}),e.jsx("div",{className:"max-h-[70px] overflow-y-auto custom-scrollbar cursor-grab pr-2",children:P.remarks||"N/A"}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(M,{variant:"primary",onClick:()=>w(N,P),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-pencil "})}),b&&e.jsx(M,{variant:"danger",isLoading:E,onClick:()=>v(N),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]})]},N))})]})})}),e.jsx("section",{className:"mt-4",children:e.jsx(lO,{projectId:t,roomId:a,initialFiles:r.uploads,refetch:d})})]})}const ar=["owner","staff","CTO"],iO=async(t,a)=>{const{data:l}=await a.get(`/costestimation/${t}`);if(!l.ok)throw new Error(l.message);return l.data},oO=async(t,a,l)=>{const{data:r}=await l.get(`/costestimation/${t}/room/${a}`);if(!r.ok)throw new Error(r.message);return r.data},cO=async(t,a)=>{const{data:l}=await a.get(`/costestimation/${t}/labour/getlabour`);if(console.log(l,"data form labour estiamtion"),!l.ok)throw new Error(l.message);return l.data},dO=async(t,a,l,r)=>{const{data:o}=await r.patch(`/costestimation/${t}/material/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},uO=async(t,a,l)=>{console.log("labordata",a);const{data:r}=await l.post(`/costestimation/${t}/labour`,a);if(!r.ok)throw new Error(r.message);return r.data},mO=async(t,a,l,r)=>{const{data:o}=await r.patch(`/costestimation/${t}/labour/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},fO=async(t,a,l)=>{const{data:r}=await l.delete(`/costestimation/${t}/labour/${a}`);if(!r.ok)throw new Error(r.message);return r.data},hO=async(t,a,l,r)=>{const{data:o}=await r.post(`/costestimation/${t}/uploads/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},xO=async(t,a,l,r)=>{console.log(l);const{data:o}=await r.patch(`/costestimation/${t}/deleteuploadedfile/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},pO=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/costestimation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},gO=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/costestimation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},bO=t=>{const a=["staff","CTO","owner"],{role:l}=Z(),r=J(l);return Fe({queryKey:["cost-estimation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await iO(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},yO=(t,a)=>{const{role:l}=Z(),r=J(l);return Fe({queryKey:["cost-estimation-room",t,a],queryFn:async()=>{if(!l||!ar.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await oO(t,a,r)},enabled:!!l&&!!t&&!!a&&!!r,retry:!1,refetchOnMount:!1})},wO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,materialKey:d,updates:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API not available");return await dO(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cost-estimation-room",d]})}})},vO=t=>{const a=["owner","staff","CTO"],{role:l}=Z(),r=J(l);return Fe({queryKey:["labourEstimatation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await cO(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1,staleTime:0})},jO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,labourData:o})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await uO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["labourEstimatation",o]})}})},NO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,labourId:o,updates:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await mO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation",o]})}})},SO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,labourId:o})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await fO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation",o]})}})},CO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomId:o,formData:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await hO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},kO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomId:o,fileId:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await xO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},EO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await pO({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["cost-estimation"]})}})},AO=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await gO({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cost-estimation",d]})}})},OO=({room:t,projectId:a,organizationId:l})=>{var o;const r=Me();return e.jsxs("div",{onClick:()=>r(`/${l}/projectdetails/${a}/costestimation/roomdetails/${t._id}`),className:"cursor-pointer border-l-6 border-blue-600 shadow-md hover:border-blue-400 transition-all duration-200 rounded-lg p-5 bg-white hover:shadow-lg flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-sm text-blue-500",children:["No of Fields: ",((o=t.materials)==null?void 0:o.length)||0]})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium underline hover:no-underline",children:"View "})]})},RO=({data:t})=>{if(!t)return null;const{totalMaterialCost:a,totalLabourCost:l,totalEstimation:r}=t;return e.jsxs("section",{className:"mt-6 w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Cost Estimation Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-blue-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Material Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(a==null?void 0:a.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-green-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Labour Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(l==null?void 0:l.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-purple-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Grand Total Estimation"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(r==null?void 0:r.toLocaleString())||0]})]})]})]})},TO=A.memo(RO),PO=()=>{var S,v,N,P,T,F;const{projectId:t,organizationId:a}=Ae(),{isMobile:l,openMobileSidebar:r}=Ke(),o=pt(),d=Me(),{data:m,isLoading:x,isError:h,error:p,refetch:g}=bO(t),{mutateAsync:y,isPending:j}=EO(),{mutateAsync:E,isPending:b}=AO(),k=async()=>{var z,q;try{await E({projectId:t}),D({description:"Completion status updated successfully",title:"Success"})}catch(I){D({title:"Error",description:((q=(z=I==null?void 0:I.response)==null?void 0:z.data)==null?void 0:q.message)||I.message||"Failed to update completion status",variant:"destructive"})}},w=o.pathname.includes("/roomdetails");return x?e.jsx(jt,{}):e.jsx("div",{className:"container mx-auto px-2 py-2 w-full  max-h-full overflow-y-auto custom-scrollbar",children:w?e.jsx(It,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-money-bill-1-wave mr-2"})," Cost Estimation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap  gap-2 justify-end",children:e.jsxs(M,{isLoading:b,onClick:k,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap  gap-2 justify-end",children:[e.jsx(ws,{projectId:t,stageNumber:6,stagePath:"costestimation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(ls,{stageName:"CostEstimation",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),p&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((v=(S=p==null?void 0:p.response)==null?void 0:S.data)==null?void 0:v.message)||(p==null?void 0:p.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>g(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(N=m==null?void 0:m.timer)==null?void 0:N.completedAt,stageName:"costestimation",formId:m==null?void 0:m._id,projectId:t,deadLine:(P=m==null?void 0:m.timer)==null?void 0:P.deadLine,startedAt:(T=m==null?void 0:m.timer)==null?void 0:T.startedAt,refetchStageMutate:g,deadLineMutate:y,isPending:j})]}),e.jsxs("section",{className:"mb-6 ",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Material Cost Estimation"}),e.jsxs(M,{className:"bg-blue-600 text-white px-2 lg:px-4 py-2 w-full sm:w-auto",onClick:()=>d(`/${a}/projectdetails/${t}/costestimation/roomdetails/labour`),children:["Labour Cost Estimation ",e.jsx("i",{className:"ml-2 fa-solid fa-arrow-up-right-from-square"})]})]}),e.jsx("div",{className:"max-h-[100%] grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(F=m==null?void 0:m.materialEstimation)==null?void 0:F.map(z=>e.jsx(OO,{room:z,projectId:t,organizationId:a},z.key))})]}),!x&&!h&&m&&e.jsx(TO,{data:m})]})]})})},MO=({projectId:t,roomId:a,initialFiles:l,refetch:r})=>{const[o,d]=A.useState([]),[m,x]=A.useState(l.filter(N=>N.type==="pdf")),[h,p]=A.useState(l.filter(N=>N.type==="image")),[g,y]=A.useState(null),{mutateAsync:j,isPending:E}=CO(),{mutateAsync:b,isPending:k}=kO(),w=N=>{N.target.files&&d(Array.from(N.target.files))},S=async()=>{var P,T;if(o.length===0)return;const N=new FormData;o.forEach(F=>N.append("files",F));try{const F=await j({projectId:t,roomId:a,formData:N}),z=F.filter(I=>I.type==="pdf"),q=F.filter(I=>I.type==="image");x(I=>[...I,...z]),p(I=>[...I,...q]),d([]),D({title:"Success",description:"file uploaded successfully"}),window.location.reload(),r()}catch(F){D({title:"error",description:((T=(P=F==null?void 0:F.response)==null?void 0:P.data)==null?void 0:T.message)||"failed to upload file",variant:"destructive"})}},v=async(N,P)=>{var T,F;try{await b({projectId:t,roomId:a,fileId:N}),P==="pdf"?x(z=>z.filter(q=>q._id!==N)):p(z=>z.filter(q=>q._id!==N)),D({title:"Success",description:"deleted successfully"}),r()}catch(z){D({title:"error",description:((F=(T=z==null?void 0:z.response)==null?void 0:T.data)==null?void 0:F.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(ce,{type:"file",multiple:!0,onChange:w,accept:"image/*,application/pdf"}),e.jsx(M,{onClick:S,isLoading:E,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{onClick:()=>v(N._id,"pdf"),disabled:k,variant:"primary",size:"sm",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] min-h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[h.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),h.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>y(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",onClick:()=>v(N._id,"image"),disabled:k,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>y(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function LO(){var k;const{projectId:t,roomId:a,organizationId:l}=Ae(),r=Me();if(!t||!a)return null;const{data:o,isLoading:d,refetch:m}=yO(t,a),{mutateAsync:x,isPending:h}=wO(),[p,g]=A.useState(null),[y,j]=A.useState({areaSqFt:0,predefinedRate:0,overriddenRate:null});if(d)return e.jsx(xn,{});if(!o)return e.jsx(Hy,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const E=(w,S)=>{g(w),j({areaSqFt:S.areaSqFt||0,predefinedRate:S.predefinedRate||0,overriddenRate:S.overriddenRate??null})},b=async w=>{var S,v;try{await x({projectId:t,materialKey:w,updates:y}),g(null),D({description:"Field updated successfully",title:"Success"})}catch(N){D({title:"Error",description:((v=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:v.message)||N.message||"Failed to update field",variant:"destructive"})}};return e.jsxs("div",{className:"max-w-full h-full overflow-y-scroll custom-scrollbar mx-auto mt-0 bg-white  rounded py-2 px-0",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.name}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Room Material Items"})]}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),e.jsxs("section",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-2 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Material Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["",(k=o==null?void 0:o.totalCost)==null?void 0:k.toLocaleString()]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-6 bg-blue-50 text-sm font-semibold text-gray-600 px-6 py-1 sm:py-3 ",children:[e.jsx("div",{className:"text-left px-3 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Sq.Ft"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Predefined Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overridden Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-gray-100 max-h-[70vh] overflow-y-auto custom-scrollbar bg-white",children:o.materials.map(w=>{var S,v,N;return e.jsxs("div",{className:`grid grid-cols-6 items-center px-6 py-4 text-sm ${p===w.key?"":"hover:bg-[#f7fbff]"}`,children:[e.jsx("div",{className:"font-medium text-gray-800",children:w.key}),p===w.key?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center",children:e.jsx(ce,{className:"text-center",type:"number",value:y.areaSqFt,onChange:P=>j({...y,areaSqFt:+P.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(ce,{className:"text-center",type:"number",value:y.predefinedRate,onChange:P=>j({...y,predefinedRate:+P.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(ce,{className:"text-center",type:"number",value:y.overriddenRate??"",onChange:P=>j({...y,overriddenRate:+P.target.value})})}),e.jsx("div",{className:"text-center text-gray-900 font-semibold",children:typeof y.areaSqFt=="number"&&(typeof y.predefinedRate=="number"||typeof y.overriddenRate=="number")?""+(y.areaSqFt*(y.overriddenRate&&y.overriddenRate>0?y.overriddenRate:y.predefinedRate??0)).toLocaleString("en-IN"):"N/A"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(M,{variant:"primary",isLoading:h,onClick:()=>b(w.key),children:[" ",e.jsx("i",{className:"fas fa-check"})," "]}),e.jsx(M,{variant:"secondary",onClick:()=>g(null),children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-center  text-gray-700",children:w.areaSqFt??"N/A"}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["",((S=w.predefinedRate)==null?void 0:S.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["",((v=w.overriddenRate)==null?void 0:v.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"text-center text-black font-semibold",children:["",((N=w.totalCost)==null?void 0:N.toLocaleString("en-IN"))??"N/A"]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(M,{variant:"primary",onClick:()=>E(w.key,w),children:""})})]})]},w.key)})})]})})]}),e.jsx("section",{className:"mt-4",children:e.jsx(MO,{projectId:t,roomId:a,initialFiles:o.uploads,refetch:m})})]})}const FO=({handleAdd:t,newData:a,setNewData:l,addPending:r,setShowForm:o})=>e.jsxs("div",{className:"space-y-3 bg-white px-6 py-3 sm:w-[40%] w-[80%] rounded-2xl",children:[e.jsx("h2",{className:"font-medium text-gray-700 text-center",children:"Add Labour"}),e.jsxs("div",{children:[e.jsx(fe,{children:"Work Type"}),e.jsx(ce,{required:!0,placeholder:"Work Type",value:a.workType,onChange:d=>l({...a,workType:d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"No.Of People"}),e.jsx(ce,{placeholder:"No of people",value:a.noOfPeople,onChange:d=>l({...a,noOfPeople:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"No of Days"}),e.jsx(ce,{placeholder:"Days",type:"number",value:a.daysPlanned,onChange:d=>l({...a,daysPlanned:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Per Day Salary"}),e.jsx(ce,{placeholder:"Per Day Salary",type:"number",value:a.perdaySalary,onChange:d=>l({...a,perdaySalary:+d.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{children:"Weekly Cost:"}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["",a.perdaySalary*a.noOfPeople*7||0]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{children:"Total Cost:"}),":",e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["",a.daysPlanned*a.perdaySalary*a.noOfPeople||0]})]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(M,{onClick:t,isLoading:r,children:"Add"}),e.jsx(M,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]}),DO=()=>{var V,oe;const{projectId:t,organizationId:a}=Ae(),l=Me(),[r,o]=A.useState(null),[d,m]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[x,h]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[p,g]=A.useState(!1),[y,j]=A.useState(!1),{data:E,isLoading:b,isError:k,error:w,refetch:S}=vO(t),{mutateAsync:v,isPending:N}=SO(),{mutateAsync:P,isPending:T}=NO(),{mutateAsync:F,isPending:z}=jO(),q=A.useMemo(()=>E==null?void 0:E.reduce((_,W)=>_+(W==null?void 0:W.totalCost),0),[E]);if(b)return e.jsx(jt,{});if(k)return e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((oe=(V=w==null?void 0:w.response)==null?void 0:V.data)==null?void 0:oe.message)||(w==null?void 0:w.message)||"Failed to load , please try again"}),e.jsx(M,{isLoading:b,onClick:()=>S(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]});const I=_=>{o(_._id),m({workType:_.workType,noOfPeople:_.noOfPeople,daysPlanned:_.daysPlanned,perdaySalary:_.perdaySalary})},de=()=>{o(null),m({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0})},Q=async _=>{var W,me;try{await v({projectId:t,labourId:_}),D({description:"Deleted successfully",title:"Success"}),S()}catch(le){D({title:"Error",description:((me=(W=le==null?void 0:le.response)==null?void 0:W.data)==null?void 0:me.message)||le.message||"Failed to update completion status",variant:"destructive"})}},B=async _=>{var W,me;try{if(!d.workType)throw new Error("workType is mandatory");await P({projectId:t,labourId:_,updates:d}),D({description:"edited successfully",title:"Success"}),de(),S()}catch(le){D({title:"Error",description:((me=(W=le==null?void 0:le.response)==null?void 0:W.data)==null?void 0:me.message)||le.message||"Failed to update completion status",variant:"destructive"})}},ee=async()=>{try{if(!x.workType)throw new Error("Please Enter the workType");await F({projectId:t,labourData:x}),h({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),g(!1),j(!1),D({title:"Success",description:"Labour estimation added"}),S()}catch(_){D({title:"Error",description:_.message,variant:"destructive"})}};return e.jsxs("main",{className:"h-full w-full",children:[e.jsxs("div",{className:"w-full flex justify-between ",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-600 mb-5",children:"Labour Estimation"}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>l(`/${a}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),!(E!=null&&E.length)&&e.jsxs("div",{className:"w-full bg-white border border-gray-200 rounded-lg p-10 h-[60%] shadow-sm flex flex-col items-center justify-center text-center",children:[e.jsx("i",{className:"fa-solid fa-person-digging text-7xl text-gray-400 mb-6"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Labour Estimations"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Create your first labour estimation to start managing your workforce"}),e.jsxs(M,{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 text-lg font-medium rounded",children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"})," Create Labour Estimation"]})]}),e.jsx("section",{children:y&&e.jsx("div",{className:"fixed bg-black/70 flex justify-center items-center h-full w-full z-50 top-0 left-0",children:e.jsx(FO,{handleAdd:ee,newData:x,setNewData:h,addPending:z,setShowForm:j})})}),(E==null?void 0:E.length)>0&&e.jsxs("div",{className:"bg-white rounded  overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Labour Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["",(q==null?void 0:q.toLocaleString())||e.jsx("span",{children:"0"})]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsx("div",{className:"min-w-[1000px]",children:e.jsxs("section",{className:"shadow-lg !rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-50 px-6 py-3 font-semibold text-gray-700 text-sm",children:[e.jsx("div",{className:"text-left px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Work Type"}),e.jsx("div",{className:"text-center px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No.Of People"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Planned"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Per Day Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("div",{className:"divide-y divide-gray-100 shadow-md  rounded-lg max-h-[65vh] overflow-y-auto bg-white",children:[E==null?void 0:E.map(_=>e.jsx("div",{className:`grid grid-cols-7 rounded-lg items-center gap-2 px-6 py-4 text-sm ${r===_._id?"":"hover:bg-[#f7fbff]"}`,children:r===_._id?e.jsxs(e.Fragment,{children:[e.jsx(ce,{required:!0,value:d.workType,onChange:W=>m({...d,workType:W.target.value})}),e.jsx(ce,{type:"number",value:d.noOfPeople,onChange:W=>m({...d,noOfPeople:+W.target.value})}),e.jsx(ce,{type:"number",value:d.daysPlanned,onChange:W=>m({...d,daysPlanned:+W.target.value})}),e.jsx(ce,{type:"number",value:d.perdaySalary,onChange:W=>m({...d,perdaySalary:+W.target.value})}),e.jsxs("div",{className:"text-gray-700",children:["",d.perdaySalary*7||0]}),e.jsxs("div",{className:"text-gray-700",children:["",d.daysPlanned*d.perdaySalary||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(M,{onClick:()=>B(_._id),isLoading:T,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{variant:"ghost",onClick:()=>o(null),children:""})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-left   text-gray-700",children:_.workType||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:(_==null?void 0:_.noOfPeople)||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:_.daysPlanned||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`${_.perdaySalary}`||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`${_.weeklySalary}`||"N/A"}),e.jsxs("div",{className:"text-gray-800 font-medium text-center",children:["",_.totalCost||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(M,{onClick:()=>I(_),children:[" ",e.jsx("i",{className:"fas fa-pen"})]}),e.jsxs(M,{variant:"danger",className:"bg-red-500 text-white",isLoading:N,onClick:()=>Q(_._id),children:[" ",e.jsx("i",{className:"fas fa-trash-can"})," "]})]})]})},_._id)),p&&e.jsxs("div",{className:"grid grid-cols-7 gap-2  px-6 py-4 text-sm  !bg-none",children:[e.jsx(ce,{required:!0,placeholder:"Work Type",value:x.workType,onChange:_=>h({...x,workType:_.target.value})}),e.jsx(ce,{placeholder:"No of people",value:x.noOfPeople,onChange:_=>h({...x,noOfPeople:+_.target.value})}),e.jsx(ce,{placeholder:"Days",type:"number",value:x.daysPlanned,onChange:_=>h({...x,daysPlanned:+_.target.value})}),e.jsx(ce,{placeholder:"Per Day Salary",type:"number",value:x.perdaySalary,onChange:_=>h({...x,perdaySalary:+_.target.value})}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["",x.perdaySalary*x.noOfPeople*7||0]}),e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["",x.daysPlanned*x.perdaySalary*x.noOfPeople||0]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(M,{onClick:ee,isLoading:z,children:"Add"}),e.jsx(M,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(M,{variant:"primary",onClick:()=>g(!0),children:"+ Add Labour Estimation"})})]})})})]})]})},nr=["owner","staff","CTO"],_O=async(t,a,l)=>{const{data:r}=await l.put(`/orderingmaterial/${t}/shop`,a);if(!r.ok)throw new Error(r.message);return r.data},qO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update shop details");if(!a)throw new Error("API instance not available");return await _O(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["ordering-material",o]})}})},zO=async(t,a,l)=>{const{data:r}=await l.put(`/orderingmaterial/${t}/delivery-location`,a);if(!r.ok)throw new Error(r.message);return r.data},UO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update delivery location");if(!a)throw new Error("API instance not available");return await zO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["ordering-material",o]})}})},$O=async(t,a,l,r,o)=>{const{data:d}=await o.put(`/orderingmaterial/${t}/room/${l}/${a}`,{items:r});if(!d.ok)throw new Error(d.message);return d.data},IO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomKey:o,itemId:d,updates:m})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update room materials");if(!a)throw new Error("API instance not available");return await $O(r,o,d,m,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["ordering-material",o,d]})}})},BO=async(t,a,l,r)=>{const{data:o}=await r.post(`/orderingmaterial/${t}/room/${a}/add`,l);if(!o.ok)throw new Error(o.message);return o.data},HO=()=>{const{role:t}=Z(),a=J(t);return ie({mutationFn:async({projectId:l,roomKey:r,newItem:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to add item");if(!a)throw new Error("API instance not available");return await BO(l,r,o,a)},onSuccess:(l,{projectId:r,roomKey:o})=>{ke.invalidateQueries({queryKey:["ordering-material",r,o]})}})},QO=async(t,a,l,r)=>{const{data:o}=await r.delete(`/orderingmaterial/${t}/room/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},GO=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomKey:o,itemId:d})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to delete item");if(!a)throw new Error("API instance not available");return await QO(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["ordering-material",o,d]})}})},KO=async(t,a)=>{const{data:l}=await a.get(`/orderingmaterial/${t}`);if(!l.ok)throw new Error(l.message);return l.data},VO=t=>{const a=["owner","staff","CTO","worker","client"],{role:l}=Z(),r=J(l);return Fe({queryKey:["ordering-material",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to fetch ordering material");if(!r)throw new Error("API not available");return await KO(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},YO=async(t,a,l)=>{const{data:r}=await l.get(`/orderingmaterial/${t}/room/${a}`);if(!r.ok)throw new Error(r.message);return r.data},WO=(t,a)=>{const l=["owner","staff","CTO","worker","client"],{role:r}=Z(),o=J(r);return Fe({queryKey:["ordering-material",t,a],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("Not allowed to fetch room materials");if(!o)throw new Error("API not available");return await YO(t,a,o)},enabled:!!r&&!!t&&!!a&&!!o,retry:!1,refetchOnMount:!1})},XO=async(t,a)=>{const{data:l}=await a.post(`/orderingmaterial/${t}/generate-link`);if(!l.ok)throw new Error(l.message);return l.data},ZO=async(t,a)=>{const{data:l}=await Qe.get(`https://houseofram.in/api/orderingmaterial/public/${t}/${a}`);if(console.log(l),!l.ok)throw new Error(l.message);return l.data},JO=()=>{const{role:t}=Z(),a=J(t);return ie({mutationFn:async({projectId:l})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to generate link");if(!a)throw new Error("API instance not found");return await XO(l,a)}})},eR=(t,a)=>Fe({queryKey:["ordering-material-public",t,a],queryFn:async()=>await ZO(t,a),enabled:!!t&&!!a,retry:!1,refetchOnMount:!1}),tR=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/orderingmaterial/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},sR=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/orderingmaterial/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},aR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await tR({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},nR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await sR({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["ordering-material",d]})}})},Qy=({projectId:t,context:a,label:l,generateLink:r,isPending:o,data:d})=>{const[m,x]=A.useState(""),[h,p]=A.useState(!1);A.useEffect(()=>{typeof d=="string"&&x(d)},[d]);const g=async()=>{try{await navigator.clipboard.writeText(m),p(!0),setTimeout(()=>p(!1),1500)}catch{D({title:"Error",description:"Failed to copy link",variant:"destructive"})}},y=()=>{const E=encodeURIComponent(`Hey, please check this ${a} link:\`${m}`);window.open(`https://wa.me/?text=${E}`,"_blank")},j=async()=>{var E,b;try{const k=await r({projectId:t});k!=null&&k.shareableUrl&&(x(k.shareableUrl),D({title:"Link generated",description:"You can now share the link",variant:"default"}))}catch(k){D({title:"Error",description:((b=(E=k==null?void 0:k.response)==null?void 0:E.data)==null?void 0:b.message)||(k==null?void 0:k.message)||"Failed to generate link",variant:"destructive"})}};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 shadow-sm w-full max-w-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-link"})," ",l||"Generate Shareable Link"]})}),m?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[e.jsx(ce,{readOnly:!0,value:m,className:"flex-1 text-sm cursor-default"}),e.jsxs(M,{onClick:g,variant:"outline",className:"flex gap-2",children:[e.jsx("i",{className:`fas ${h?"fa-check-circle":"fa-copy"}`}),h?"Copied":"Copy"]}),e.jsxs(M,{onClick:y,className:"bg-green-500 hover:bg-green-600 text-white flex gap-2",children:[e.jsx("i",{className:"fab fa-whatsapp"}),"Share"]})]}):e.jsx(M,{onClick:j,disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:o?"Generating...":"Generate Link"})]})},lR=()=>{var le,R,U,L,K;const{projectId:t,organizationId:a}=Ae(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ke(),d=location.pathname.includes("/ordermaterialroom"),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState({}),{data:b,isLoading:k,isError:w,error:S,refetch:v}=VO(t),{mutateAsync:N,isPending:P}=JO(),{mutateAsync:T}=qO(),{mutateAsync:F}=UO(),{mutateAsync:z,isPending:q}=aR(),{mutateAsync:I,isPending:de}=nR(),Q=async()=>{var Y,ge;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await T({projectId:t,updates:g}),D({title:"Success",description:"Shop Details Updated"}),x(!1),v()}catch(se){D({variant:"destructive",title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||(se==null?void 0:se.message)||"Update failed"})}},B=async()=>{var Y,ge;try{if(j.phoneNumber&&!/^\d{10}$/.test(j.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await F({projectId:t,updates:j}),p(!1),D({title:"Success",description:"Delivery Details Updated"}),v()}catch(se){D({variant:"destructive",title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||(se==null?void 0:se.message)||"Update failed"})}},ee=async()=>{var Y,ge;try{await I({projectId:t}),D({description:"Completion status updated successfully",title:"Success"})}catch(se){D({title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||se.message||"Failed to update completion status",variant:"destructive"})}};if(k)return e.jsx(jt,{});const V=Object.keys((b==null?void 0:b.materialOrderingList)||{}),{shopDetails:oe,deliveryLocationDetails:_,generatedLink:W,materialOrderingList:me}=b||{};return e.jsx("div",{className:"w-full h-full flex flex-col",children:d?e.jsx(It,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-cart-shopping mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ordering Material"}),e.jsx("span",{className:"sm:hidden",children:"Order Material"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:de,onClick:ee,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:8,stagePath:"orderingmaterial"}),e.jsx(ls,{stageName:"OrderingMaterialModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null})]})]}),w&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((R=(le=S==null?void 0:S.response)==null?void 0:le.data)==null?void 0:R.message)||"Failed to load ordering material"}),e.jsx(M,{isLoading:k,onClick:()=>v(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!w&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(Le,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(U=b==null?void 0:b.timer)==null?void 0:U.completedAt,stageName:"orderingmaterial",formId:b==null?void 0:b._id,projectId:t,deadLine:(L=b==null?void 0:b.timer)==null?void 0:L.deadLine,startedAt:(K=b==null?void 0:b.timer)==null?void 0:K.startedAt,refetchStageMutate:v,deadLineMutate:z,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Shop Name",value:g.shopName||"",onChange:Y=>y({...g,shopName:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:Y=>y({...g,contactPerson:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",value:g.phoneNumber||"",type:"tel",maxLength:10,onChange:Y=>y({...g,phoneNumber:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:g.address||"",onChange:Y=>y({...g,address:Y.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:Q,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>x(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(oe==null?void 0:oe.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(oe==null?void 0:oe.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(oe==null?void 0:oe.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(oe==null?void 0:oe.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{y(oe),x(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),h?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Site Name",value:j.siteName||"",onChange:Y=>E({...j,siteName:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Site Supervisor",value:j.siteSupervisor||"",onChange:Y=>E({...j,siteSupervisor:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",type:"tel",maxLength:10,value:j.phoneNumber||"",onChange:Y=>E({...j,phoneNumber:Y.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:j.address||"",onChange:Y=>E({...j,address:Y.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:B,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",(_==null?void 0:_.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",(_==null?void 0:_.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(_==null?void 0:_.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(_==null?void 0:_.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{E(_),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(Y=>{const ge=me[Y]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white transform hover:scale-[1.02]",onClick:()=>l(`ordermaterialroom/${Y}`),children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold capitalize text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-door-open"}),Y.replace(/([A-Z])/g," $1")]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:[e.jsx("i",{className:"fa-solid fa-box mr-1"}),"Items: ",ge.length]}),e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-mouse-pointer"}),"Click to view details"]})]},Y)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Qy,{projectId:t,context:"order material",stage:"ordermaterial",data:W,isPending:P,generateLink:N})})]})]})})},rR=async({category:t})=>{const{data:a}=await Qe.get(`/api/ai/brands/${t}`);return a.data},iR=t=>{const l=["electricalFittings","ceramicSanitaryware","upholsteryCurtains","falseCeilingMaterials"].includes(t);return Fe({queryKey:["brands",t],queryFn:()=>rR({category:t}),enabled:!!t&&!l})},oR=()=>{var ee,V,oe,_,W;const{projectId:t,roomKey:a,organizationId:l}=Ae(),r=Me();if(!a)return;const[o,d]=A.useState({}),[m,x]=A.useState(!1),[h,p]=A.useState(null),[g,y]=A.useState({}),{data:j,isLoading:E,isError:b,refetch:k,error:w}=WO(t,a),{mutateAsync:S,isPending:v}=HO(),{mutateAsync:N,isPending:P}=IO(),{mutateAsync:T,isPending:F}=GO(),{data:z}=iR(a);if(E)return e.jsx(xn,{});if(b)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((V=(ee=w==null?void 0:w.response)==null?void 0:ee.data)==null?void 0:V.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>k(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const q=j||[],I=(me,le)=>{y(R=>({...R,[me]:le}))},de=async me=>{try{const le=ya[a];if(!le||le.length===0)throw new Error("Invalid room type or no fields defined.");const R=le[0],U=g[R];if(!U||U.toString().trim()==="")throw new Error(`The field "${R}" is required.`);if(Object.values(g).every(Y=>!Y||Y.toString().trim()===""))throw new Error("At least one field must be filled.");await N({itemId:me,projectId:t,roomKey:a,updates:[g]}),D({title:"Success",description:"Item updated."}),p(null),y({}),x(!1),k()}catch(le){D({title:"Error",description:(le==null?void 0:le.message)||"Failed",variant:"destructive"})}},Q=async()=>{var me,le;try{const R=ya[a];if(!R||R.length===0)throw new Error("Invalid room type or no fields defined.");const U=R[0],L=o[U];if(!L||L.toString().trim()==="")throw new Error(`The field "${U}" is required.`);if(Object.values(o).every(se=>!se||se.toString().trim()===""))throw new Error("At least one field must be filled.");if(q==null?void 0:q.some(se=>{var Ne;return((Ne=se[U])==null?void 0:Ne.toString().trim().toLowerCase())===L.toString().trim().toLowerCase()}))throw new Error(`"${L}" already exists. Please use a unique value.`);await S({projectId:t,roomKey:a,newItem:o}),D({title:"Success",description:"Item added."}),d({}),x(!1),k()}catch(R){D({title:"Error",description:((le=(me=R==null?void 0:R.response)==null?void 0:me.data)==null?void 0:le.message)||(R==null?void 0:R.message)||"Failed",variant:"destructive"})}},B=async me=>{var le,R;try{await T({projectId:t,roomKey:a,itemId:me}),D({title:"Deleted",description:"Item removed"}),k()}catch(U){D({title:"Error",description:((R=(le=U==null?void 0:U.response)==null?void 0:le.data)==null?void 0:R.message)||(U==null?void 0:U.message)||"Failed to delete",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-800 capitalize ",children:a}),e.jsxs("div",{className:" px-6 flex gap-2",children:[e.jsx(M,{onClick:()=>x(()=>!0),children:"Add Item"}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/ordermaterial`),children:"Go Back"})]})]}),e.jsx("div",{className:"w-full !min-h-[85vh] rounded-lg ",children:e.jsx("div",{className:"overflow-x-auto custom-scrollbar min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:" w-full flex flex-col border-2 border-gray-100 rounded-lg",style:{minWidth:`${(((oe=ya[a])==null?void 0:oe.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid items-center px-6 py-3 bg-blue-100 text-blue-800 text-sm font-semibold",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(_=ya[a])==null?void 0:_.map((me,le)=>e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:me},le)),e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"text-sm text-blue-900 divide-y  !h-[75vh] overflow-y-auto divide-blue-100",children:!m&&q.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center text-gray-500 bg-gray-50",children:[e.jsx("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-700",children:["No ",a.replace(/([A-Z])/g," $1")," Items"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Add your first ",a.replace(/([A-Z])/g," $1").toLowerCase()," item to start tracking"]}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded font-medium",children:["Add ",a.replace(/([A-Z])/g," $1")," Item"]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[q==null?void 0:q.map((me,le)=>e.jsxs("div",{className:"grid border text-center px-6 py-3 gap-2 border-b border-gray-200 hover:bg-gray-50 transition-colors",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[ya[a].map((R,U)=>{const L=R==="brandName"&&vm.brandName[a],K=R==="fabric"&&a==="upholsteryCurtains";return e.jsx("div",{className:"text-center px-6 py-3 gap-4 hover:bg-gray-50 transition-colors text-sm min-w-[120px]",children:h===le?L||K?e.jsxs(Je,{value:g[R]||"",onValueChange:Y=>I(R,Y),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:g[R],placeholder:`Select ${R==="brandName"?"brand":"fabric"}`})}),e.jsx(Ze,{children:z==null?void 0:z.map(Y=>e.jsx(ye,{value:Y,children:Y},Y))})]}):e.jsx(ce,{className:"text-xs",value:g[R]||"",onChange:Y=>I(R,Y.target.value)}):me[R]||"-"},U)}),e.jsx("div",{className:"flex justify-center gap-2 items-center",children:h===le?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",isLoading:P,onClick:()=>de(me._id),children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>p(null),children:e.jsx("i",{className:"fas fa-xmark text-red-600"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"primary",children:e.jsx("i",{className:"fas fa-pen",onClick:()=>{y(me),p(le)}})}),e.jsx(M,{isLoading:F,variant:"ghost",children:e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>B(me._id)})})]})})]},me._id)),m&&e.jsxs("div",{className:"grid items-center px-6 py-3 gap-2 bg-white mt-2",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(W=ya[a])==null?void 0:W.map((me,le)=>{const R=me==="brandName"&&vm.brandName[a];if(R||me==="fabric"&&a==="upholsteryCurtains"){const L=R?M2[a]:vm.fabric[a];return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsxs(Je,{onValueChange:K=>d(Y=>({...Y,[me]:K})),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:o[me],placeholder:`Select ${me==="brandName"?"brand":"fabric"}`})}),e.jsx(Ze,{children:L.map(K=>e.jsx(ye,{value:K,children:K},K))})]})},le)}return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsx(ce,{className:"text-xs text-center",placeholder:me,value:o[me]||"",onChange:L=>d(K=>({...K,[me]:L.target.value}))})},le)}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{isLoading:v,onClick:Q,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{onClick:()=>x(()=>!1),children:e.jsx("i",{className:"fas fa-xmark"})})]})]})]})})})]})})})]})},Ai=["owner","staff","CTO"],cR=async(t,a,l)=>(await l.put(`/materialarrivalcheck/${t}/shop`,a)).data,dR=async(t,a,l)=>(await l.put(`/materialarrivalcheck/${t}/delivery-location`,a)).data,uR=async(t,a,l,r)=>(await r.put(`/materialarrivalcheck/${t}/room/${a}`,l)).data,mR=async(t,a,l,r)=>(await r.delete(`/materialarrivalcheck/${t}/room/${a}/${l}`)).data,fR=async(t,a)=>(await a.get(`/materialarrivalcheck/${t}`)).data.data,hR=async(t,a,l)=>{const r=await l.get(`/materialarrivalcheck/${t}/room/${a}`);return console.log("data form the get mateiralarrival room details",r.data.data),r.data.data},xR=async(t,a)=>(await a.post(`/materialarrivalcheck/${t}/generate-link`)).data.data,pR=async(t,a)=>(await Qe.get(`https://houseofram.in/api/materialarrivalcheck/public/${t}/${a}`)).data.data,gR=t=>{const a=["owner","staff","CTO","worker","client"],{role:l}=Z(),r=J(l);return Fe({queryKey:["material-arrival",t],queryFn:()=>fR(t,r),enabled:!!t&&!!l&&a.includes(l),retry:!1,refetchOnMount:!1})},bR=(t,a)=>{const l=["owner","staff","CTO","worker","client"],{role:r}=Z(),o=J(r);return Fe({queryKey:["material-arrival-room",t,a],queryFn:()=>hR(t,a,o),enabled:!!t&&!!a&&!!r&&l.includes(r),retry:!1,refetchOnMount:!1})},yR=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await cR(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["material-arrival",o]})}})},wR=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await dR(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["material-arrival",o]})}})},Gy=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomKey:o,formData:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await uR(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},Ky=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomKey:o,itemId:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await mR(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},vR=()=>{const{role:t}=Z(),a=J(t);return ie({mutationFn:async({projectId:l})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await xR(l,a)}})},jR=(t,a)=>Fe({queryKey:["material-arrival-public",t,a],queryFn:async()=>await pR(t,a),enabled:!!t&&!!a}),NR=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/materialarrivalcheck/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},SR=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/materialarrivalcheck/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},CR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await NR({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},kR=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await SR({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["ordering-material",d]})}})},ER=()=>{var R,U;const{projectId:t,organizationId:a}=Ae(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ke(),d=location.pathname.includes("/materialarrivalroom/"),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState({}),{data:b,isLoading:k,isError:w,error:S,refetch:v}=gR(t),{mutateAsync:N}=yR(),{mutateAsync:P}=wR(),{mutateAsync:T,isPending:F}=vR(),{mutateAsync:z,isPending:q}=CR(),{mutateAsync:I,isPending:de}=kR();if(k)return e.jsx(jt,{});const{shopDetails:Q,deliveryLocationDetails:B,materialArrivalList:ee,timer:V,generatedLink:oe}=b||{},_=Object.keys(ee||{}),W=async()=>{var L,K;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await N({projectId:t,updates:g}),D({title:"Success",description:"Shop details updated"}),x(!1),v()}catch(Y){D({variant:"destructive",title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Update failed"})}},me=async()=>{var L,K;try{if(j.phoneNumber&&!/^\d{10}$/.test(j.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await P({projectId:t,updates:j}),D({title:"Success",description:"Delivery location updated"}),p(!1),v()}catch(Y){D({variant:"destructive",title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Update failed"})}},le=async()=>{var L,K;try{await I({projectId:t}),D({description:"Completion status updated successfully",title:"Success"})}catch(Y){D({title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Failed to update completion status",variant:"destructive"})}};return e.jsx("div",{className:"w-full h-full flex flex-col p-2 ",children:d?e.jsx(It,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 pb-3 ",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Material Checking"}),e.jsx("span",{className:"sm:hidden",children:"Material Check"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:de,onClick:le,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:9,stagePath:"materialarrival"}),e.jsx(ls,{stageName:"MaterialArrivalModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null})]})]}),w&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((U=(R=S==null?void 0:S.response)==null?void 0:R.data)==null?void 0:U.message)||"Failed to load material arrival data"}),e.jsx(M,{onClick:()=>v(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!w&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(Le,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"materialarrivalcheck",completedAt:V==null?void 0:V.completedAt,projectId:t,formId:b==null?void 0:b._id,deadLine:V==null?void 0:V.deadLine,startedAt:V==null?void 0:V.startedAt,refetchStageMutate:v,deadLineMutate:z,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Shop Name",value:g.shopName||"",onChange:L=>y({...g,shopName:L.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:L=>y({...g,contactPerson:L.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",type:"tel",maxLength:10,value:g.phoneNumber||"",onChange:L=>y({...g,phoneNumber:L.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:g.address||"",onChange:L=>y({...g,address:L.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:W,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>x(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(Q==null?void 0:Q.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(Q==null?void 0:Q.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(Q==null?void 0:Q.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(Q==null?void 0:Q.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{y(Q),x(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),h?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{placeholder:"Site Name",value:j.siteName||"",onChange:L=>E({...j,siteName:L.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Site Supervisor",value:j.siteSupervisor||"",onChange:L=>E({...j,siteSupervisor:L.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Phone Number",type:"tel",maxLength:10,value:j.phoneNumber||"",onChange:L=>E({...j,phoneNumber:L.target.value}),className:"w-full"}),e.jsx(ce,{placeholder:"Address",value:j.address||"",onChange:L=>E({...j,address:L.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(M,{onClick:me,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(M,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",(B==null?void 0:B.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",(B==null?void 0:B.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(B==null?void 0:B.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(B==null?void 0:B.address)||"-"]}),(b==null?void 0:b.status)!=="completed"&&e.jsxs("button",{onClick:()=>{E(B),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(L=>{const K=ee[L]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",onClick:()=>l(`materialarrivalroom/${L}`),children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:L.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Items: ",K.length]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},L)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Qy,{projectId:t,context:"Material",stage:"materialarrival",data:oe,isPending:F,generateLink:T})})]})]})})},AR=()=>{var V,oe,_,W,me,le,R;const{projectId:t,roomKey:a,organizationId:l}=Ae(),r=Me(),[o,d]=A.useState(null),[m,x]=A.useState(null),[h,p]=A.useState(null),[g,y]=A.useState({}),[j,E]=A.useState({}),[b,k]=A.useState(!1),[w,S]=A.useState(null),{data:v,isLoading:N,isError:P,error:T,refetch:F}=bR(t,a),{mutateAsync:z}=Gy(),{mutateAsync:q}=Ky();if(!a)return;if(N)return e.jsx(xn,{});if(P)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((oe=(V=T==null?void 0:T.response)==null?void 0:V.data)==null?void 0:oe.message)||"Failed to load data"}),e.jsx(M,{onClick:()=>F(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const I=v||[],de=(U,L)=>{y(K=>({...K,[U]:L}))},Q=async()=>{var U,L;try{const K=Zs[a];if(!K||K.length===0)throw new Error("No required fields defined for this section.");const Y=K[0],ge=g[Y];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${Y}" is required.`);if(K.every(be=>{const Ve=g[be];return!Ve||Ve.toString().trim()===""}))throw new Error("At least one field must be filled.");const Ne=new FormData;Ne.append("itemData",JSON.stringify(g)),m&&Ne.append("upload",m),await z({projectId:t,roomKey:a,formData:Ne}),D({title:"Success",description:"Item updated successfully"}),p(null),y({}),x(null),F()}catch(K){D({title:"Error",description:((L=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:L.message)||K.message||"Failed to update",variant:"destructive"})}},B=async()=>{var U,L;try{const K=Zs[a];if(!K||K.length===0)throw new Error("No required fields defined for this section.");const Y=K[0],ge=j[Y];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${Y}" is required.`);if(K.every(be=>{const Ve=j[be];return!Ve||Ve.toString().trim()===""}))throw new Error("At least one field must be filled.");const Ne=new FormData;Ne.append("itemData",JSON.stringify(j)),o&&Ne.append("upload",o),await z({projectId:t,roomKey:a,formData:Ne}),D({title:"Success",description:"Item added successfully"}),k(!1),E({}),F(),d(null)}catch(K){D({title:"Error",description:((L=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:L.message)||K.message||"Failed to add item",variant:"destructive"})}},ee=async U=>{try{await q({projectId:t,roomKey:a,itemId:U}),D({title:"Deleted",description:"Item removed"}),F()}catch(L){D({title:"Error",description:(L==null?void 0:L.message)||"Failed",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-blue-800 capitalize",children:[e.jsx("span",{className:"text-black font-semibold",children:"Section:"})," ",a]}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/materialarrival`),children:"Go Back"})]}),e.jsx("div",{className:"w-full overflow-x-auto roundex-lg mt-2 custom-scrollbar",children:e.jsxs("div",{style:{minWidth:`${(((_=Zs[a])==null?void 0:_.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid gap-2 bg-blue-100 text-blue-800 text-xs font-semibold uppercase px-4 py-2",style:{gridTemplateColumns:`repeat(${((W=Zs[a])==null?void 0:W.length)+1}, minmax(120px, 1fr))`},children:[(me=Zs[a])==null?void 0:me.map((U,L)=>e.jsx("div",{className:"text-center",children:U==="verifiedByAccountant"?"Verified":U},L)),e.jsx("div",{className:"text-center",children:"Actions"})]}),I==null?void 0:I.map((U,L)=>{var K,Y;return e.jsxs("div",{className:"grid gap-2 px-4 py-2 items-center hover:bg-gray-50",style:{gridTemplateColumns:`repeat(${((K=Zs[a])==null?void 0:K.length)+1}, minmax(120px, 1fr))`},children:[(Y=Zs[a])==null?void 0:Y.map((ge,se)=>{var Ne;return ge==="image"?e.jsx("div",{className:"flex justify-center items-center",children:h===L?e.jsx(ce,{type:"file",accept:"image/*",onChange:be=>{var Ve;return x(((Ve=be.target.files)==null?void 0:Ve[0])||null)},className:"text-xs"}):(Ne=U==null?void 0:U.upload)!=null&&Ne.url?e.jsx("div",{className:"w-10 h-10 cursor-pointer",onClick:()=>S(U.upload.url),children:e.jsx("img",{src:U.upload.url,alt:"Preview",className:"w-full h-full object-cover rounded border shadow"})}):e.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})},se):ge==="verifiedByAccountant"?e.jsx("div",{className:"text-center",children:h===L?e.jsx("input",{type:"checkbox",checked:!!g[ge],onChange:be=>y(Ve=>({...Ve,[ge]:be.target.checked}))}):U[ge]?e.jsx("i",{className:"fas fa-check text-blue-600 text-lg"}):e.jsx("i",{className:"fas fa-times text-red-500 text-lg"})},se):ge==="remarks"?h===L?e.jsx(Ls,{value:g[ge]||"",className:"text-sm",onChange:be=>y(Ve=>({...Ve,remarks:be.target.value}))},ge):e.jsx("div",{className:"text-sm text-center px-2 overflow-x-auto max-w-[150px] custom-scrollbar whitespace-nowrap",children:U[ge]}):e.jsx("div",{className:"text-sm text-center px-2 max-w-[140px] overflow-auto whitespace-nowrap",children:h===L?e.jsx(ce,{className:"text-xs w-full",value:g[ge]||"",onChange:be=>de(ge,be.target.value)}):U[ge]||"-"},se)}),e.jsx("div",{className:"flex justify-center gap-2 text-lg",children:h===L?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",onClick:Q,children:"Save"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>p(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-pen text-blue-600 cursor-pointer",onClick:()=>{y(U),p(L)}}),e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>ee(U._id)})]})})]},U._id)}),b&&e.jsxs("div",{className:"grid gap-2 px-4 py-2  bg-blue-50 items-center",style:{gridTemplateColumns:`repeat(${((le=Zs[a])==null?void 0:le.length)+1}, minmax(120px, 1fr))`},children:[(R=Zs[a])==null?void 0:R.map((U,L)=>U==="image"?e.jsx("input",{type:"file",accept:"image/*",className:"text-xs w-full",onChange:K=>{var Y;return d(((Y=K.target.files)==null?void 0:Y[0])||null)}},L):U==="verified"?e.jsx("input",{type:"checkbox",checked:!!j[U],onChange:K=>E(Y=>({...Y,[U]:K.target.checked}))},L):e.jsx(ce,{className:"text-xs text-center w-full",placeholder:U,value:j[U]||"",onChange:K=>E(Y=>({...Y,[U]:K.target.value}))},L)),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{size:"sm",onClick:B,children:"Add"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>k(!1),children:"Cancel"})]})]}),!b&&e.jsx("div",{className:"py-4 px-4",children:e.jsx(M,{onClick:()=>k(!0),children:"Add Item"})})]})}),w&&e.jsx("div",{onClick:()=>S(null),className:"fixed inset-0 bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:U=>U.stopPropagation,className:"relative bg-white rounded p-4 sm:p-8 shadow-lg max-w-[90vw] max-h-[80vh]",children:[e.jsx("i",{className:"fas fa-times absolute top-[0px] right-1 sm:top-2 sm:right-3 text-xl sm:text-2xl cursor-pointer text-gray-700 hover:text-red-500",onClick:()=>S(null)}),e.jsx("img",{src:w,alt:"Full View",className:"max-h-[70vh] max-w-[100%] sm:max-w-full object-contain rounded"})]})})]})},OR=()=>{const{projectId:t,token:a}=Ae(),[l,r]=A.useState(null),{data:o,isLoading:d,isError:m}=eR(t,a),x=h=>{r(p=>p===h?null:h)};return e.jsxs("div",{className:"min-h-screen  outline-none  w-full bg-gray-50 text-gray-800 flex flex-col",children:[e.jsx(Vy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[70%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ordered Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),d?e.jsx(_m,{}):m||!(o!=null&&o.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.shopDetails).map(([h,p])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:h.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof p=="string"||typeof p=="number"?p:typeof p=="boolean"?p?"":"":"-"]})]},h))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),d?e.jsx(_m,{}):m||!(o!=null&&o.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.deliveryLocationDetails).map(([h,p])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:h.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof p=="string"||typeof p=="number"?p:typeof p=="boolean"?p?"":"":"-"]})]},h))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),d?e.jsx(_m,{}):m||!(o!=null&&o.materialOrderingList)?e.jsx("p",{className:"text-red-500",children:"Failed to load material data"}):Object.entries(o.materialOrderingList).map(([h,p])=>e.jsxs("div",{className:"mb-4 bg-white outline-noneh rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>x(h),className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:h.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${l===h?"up":"down"}`})]}),e.jsx("div",{className:`transition-all duration-300 overflow-hidden ${l===h?"max-h-[1000px] p-4":"max-h-0"}`,children:p.length===0?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No items needed for this section."})]}):e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] max-h-[400px] overflow-y-auto custom-scrollbar rounded border border-gray-200",children:[e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] bg-blue-50 text-xs text-blue-900 font-semibold border-b border-blue-200 py-2 px-2 sticky top-0",children:Object.keys(p[0]).filter(g=>g!=="_id").map(g=>e.jsx("div",{className:"text-center capitalize",children:g==="upload"?"Image":g.replace(/([A-Z])/g," $1")},g))}),p.map((g,y)=>e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] text-xs text-gray-800 border-b border-gray-100 py-2 px-2 hover:bg-gray-50",children:Object.entries(g).filter(([j])=>j!=="_id").map(([j,E],b)=>e.jsx("div",{className:"text-center break-words",children:typeof E=="boolean"?E?"":"":typeof E=="string"||typeof E=="number"?E:"-"},b))},y))]})})})]},h))]})]}),e.jsx(Yy,{})]})},_m=()=>e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),Vy=()=>e.jsx("header",{className:"bg-white shadow sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-full w-full mx-auto flex items-center gap-4 px-4 py-3",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 object-contain"}),e.jsx("h1",{className:"text-xl font-bold",children:yt.COMPANY_NAME})]})}),Yy=()=>e.jsxs("footer",{className:"bg-gray-100 border-t border-gray-200 py-6 px-6 text-center text-sm text-gray-600",children:[" ",new Date().getFullYear()," ",yt.COMPANY_NAME,". All rights reserved."]});function RR(){var h,p;const{projectId:t,token:a}=Ae(),{data:l,isLoading:r,isError:o,error:d,refetch:m}=jR(t,a);if(r)return e.jsx(jt,{});if(o||!l)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((p=(h=d==null?void 0:d.response)==null?void 0:h.data)==null?void 0:p.message)||(d==null?void 0:d.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const x=Object.entries(l.materialArrivalList||{});return e.jsxs("div",{className:"min-h-screen  bg-gray-50  space-y-6",children:[e.jsx(Vy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[90%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Arrived Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),r?e.jsx(_e,{}):o||!(l!=null&&l.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(l.shopDetails).map(([g,y])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof y=="string"||typeof y=="number"?y:typeof y=="boolean"?y?"":"":"-"]})]},g))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),r?e.jsx(_e,{}):o||!(l!=null&&l.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(l.deliveryLocationDetails).map(([g,y])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof y=="string"||typeof y=="number"?y:typeof y=="boolean"?y?"":"":"-"]})]},g))})]}),e.jsxs("section",{className:"max-w-full mx-auto space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),x.map(([g,y])=>e.jsx(TR,{projectId:t,token:a,roomKey:g,items:y,refetch:m},g))]})]}),e.jsx(Yy,{})]})}const TR=({projectId:t,roomKey:a,items:l,refetch:r})=>{const o=Gy(),d=Ky(),[m,x]=A.useState(!1),[h,p]=A.useState(!1),[g,y]=A.useState({}),[j,E]=A.useState(null),[b,k]=A.useState(null),[w,S]=A.useState({}),[v,N]=A.useState(null),P=Zs[a],T=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(g)),j&&q.append("upload",j);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),D({title:"Added",description:"New item saved."}),p(!1),y({}),E(null),r()}catch(I){D({title:"Error",description:I.message,variant:"destructive"})}},F=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(w)),v&&q.append("upload",v);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),D({title:"Updated",description:"Item saved."}),r(),k(null),S({}),N(null)}catch(I){D({title:"Error",description:I.message,variant:"destructive"})}},z=async q=>{try{await d.mutateAsync({projectId:t,roomKey:a,itemId:q}),D({title:"Deleted",description:"Item removed."}),r()}catch(I){D({title:"Error",description:I.message,variant:"destructive"})}};return e.jsxs("div",{className:"mb-4 bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",onClick:()=>x(!m),children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:a==null?void 0:a.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${m?"up":"down"}`})]}),e.jsx("div",{className:`transition-max-h duration-300 ease-out overflow-hidden ${m?"max-h-[500px] p-4":"max-h-0 p-0"}`,children:P&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1200px] space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] bg-blue-50 text-xs sm:text-sm font-semibold text-blue-900 border-b border-blue-200 py-2 px-2 rounded-t mb-2",children:[P.map(q=>e.jsx("div",{className:"text-center capitalize truncate",children:q==="image"?"Upload":q==="verifiedByAccountant"?"Verified":q},q)),e.jsx("div",{className:"text-center truncate",children:"Actions"})]}),(l==null?void 0:l.length)===0&&!h?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Start by adding your first item to this room."}),e.jsxs(M,{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 text-sm rounded",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add One"]})]}):l==null?void 0:l.map((q,I)=>e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 py-2 border-b border-gray-100 hover:bg-gray-50 min-h-[60px]",children:[P.map(de=>{var Q;return de==="image"?b===I?e.jsx(ce,{type:"file",accept:"image/*",onChange:B=>{var ee;return N(((ee=B.target.files)==null?void 0:ee[0])||null)},className:"w-full text-sm"},de):(Q=q.upload)!=null&&Q.url?e.jsx("img",{src:q.upload.url,alt:"",className:"w-12 h-12 object-cover rounded mx-auto"}):e.jsx("div",{className:"text-center",children:"No image"}):de==="verifiedByAccountant"?b===I?e.jsx(ce,{type:"checkbox",className:"text-center",checked:!!w.verifiedByAccountant,onChange:B=>S(ee=>({...ee,verifiedByAccountant:B.target.checked}))},de):q!=null&&q.verifiedByAccountant?e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-check text-green-600 text-lg"})}):e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-xmark text-red-500 text-lg"})}):de==="remarks"?b===I?e.jsx(Ls,{value:w[de]||"",className:"text-center w-full text-sm",onChange:B=>S(ee=>({...ee,remarks:B.target.value}))},de):e.jsx("div",{className:"w-full text-center overflow-x-auto max-h-[70px] overflow-y-auto custom-scrollbar",children:q[de]||"N/A"}):b===I?e.jsx(ce,{value:w[de]||"",onChange:B=>S(ee=>({...ee,[de]:B.target.value})),className:"w-full text-sm"},de):e.jsx("div",{className:"text-center truncate",children:q[de]??"-"})}),e.jsx("div",{className:"flex gap-2 justify-center",children:b===I?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",onClick:F,children:"Save"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>k(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>{k(I),S(q)},children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>z(q._id),children:e.jsx("i",{className:"fas fa-trash text-red-500"})})]})})]},I)),!h&&l.length>0&&e.jsx("div",{className:"pt-3 text-center",children:e.jsx(M,{onClick:()=>p(!0),children:" Add Item"})}),h&&e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 bg-white p-2 rounded mb-4",children:[P.map(q=>q==="image"?e.jsx(ce,{type:"file",accept:"image/*",onChange:I=>{var de;return E(((de=I.target.files)==null?void 0:de[0])||null)},className:"border-2 w-full text-sm"},q):q==="verifiedByAccountant"?e.jsx(ce,{type:"checkbox",className:"text-center w-full text-sm",checked:!!g.verifiedByAccountant,onChange:I=>y(de=>({...de,verifiedByAccountant:I.target.checked}))},q):e.jsx(ce,{placeholder:q,value:g[q]||"",onChange:I=>y(de=>({...de,[q]:I.target.value})),className:"w-full text-sm"},q)),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(M,{size:"sm",className:"h-10",onClick:T,children:"Add"}),e.jsx(M,{size:"sm",variant:"secondary",onClick:()=>p(!1),children:"Cancel"})]})]})]})})})]})},PR=async(t,a)=>(await a.get(`/worktasks/getworktaksmain/${t}`)).data.data,MR=async(t,a)=>(await a.get(`/worktasks/getworkschedule/${t}`)).data.data,LR=async(t,a)=>(await a.get(`/worktasks/getdailyschedule/${t}`)).data.data,FR=async(t,a)=>{const l=await a.get(`/worktasks/${t}/getworkers`);return console.log("res",l),l.data.data},DR=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/daily-task/${t}`,a)).data,_R=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/work-plan/${t}`,a)).data,qR=async(t,a,l,r,o)=>(await o.put(`/worktasks/${l}/daily-task/${t}/${a}`,r)).data,zR=async(t,a,l,r,o)=>(await o.put(`/worktasks/${l}/work-plan/${t}/${a}`,r)).data,UR=async(t,a,l,r)=>(await r.delete(`/worktasks/${l}/daily-task/${t}/${a}`)).data,$R=async(t,a,l,r)=>(await r.delete(`/worktasks/${l}/work-plan/${t}/${a}`)).data,IR=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/md-approval/${t}`,a)).data,BR=async(t,a,l,r)=>(await r.patch(`/worktasks/${l}/daily-schedule/${t}/status`,a)).data,HR=async(t,a,l,r)=>(await r.patch(`/worktasks/${l}/work-schedule/${t}/status`,a)).data,QR=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["work-main-stage",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return PR(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},GR=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["work-schedule",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return MR(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},KR=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO","worker","client"];return Fe({queryKey:["daily-schedule",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return LR(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},Wy=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO"];return Fe({queryKey:["project-workers",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return FR(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},VR=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,projectId:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return DR(r,d,o,a)}})},YR=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,formData:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return console.log("workschlksdflask",r),_R(r,o,d,a)}})},WR=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,taskId:o,formData:d,projectId:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return qR(r,o,m,d,a)}})},XR=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,planId:o,formData:d,projectId:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return zR(r,o,m,d,a)}})},ZR=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,taskId:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return UR(r,o,d,a)}})},JR=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,planId:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return $R(r,o,d,a)}})},e6=()=>{const{role:t}=Z(),a=J(t),l=["owner"];return ie({mutationFn:async({mainStageId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return IR(r,o,d,a)}})},t6=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({dailyScheduleId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return BR(r,o,d,a)}})},s6=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({workScheduleId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return HR(r,o,d,a)}})},a6=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/worktasks/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},n6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/worktasks/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},l6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await a6({formId:r,projectId:o,deadLine:d,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["material-rooms"]})}})},r6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await n6({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["material-rooms",o]})}})},i6=()=>{var z,q,I,de,Q,B,ee,V;const{projectId:t,organizationId:a}=Ae(),l=pt(),{isMobile:r,openMobileSidebar:o}=Ke(),{data:d,isLoading:m,refetch:x,error:h}=QR(t),{mutateAsync:p,isPending:g}=l6(),{mutateAsync:y,isPending:j}=r6(),{mutateAsync:E,isPending:b}=e6(),[k,w]=A.useState(!1),[S,v]=A.useState("pending"),N=l.pathname.includes("/workschedule")||l.pathname.includes("/dailyschedule"),P=()=>{w(!0)},T=async()=>{var oe,_;try{await y({projectId:t}),D({description:"Completion status updated successfully.",title:"Success"}),x()}catch(W){D({title:"Error",description:((_=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:_.message)||W.message||"Failed to update completion.",variant:"destructive"})}},F=async()=>{var oe,_;try{await E({projectId:t,mainStageId:d==null?void 0:d._id,payload:{action:S}}),D({description:"MD Approval updated successfully.",title:"Success"}),w(!1),x()}catch(W){D({title:"Error",description:((_=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:_.message)||W.message||"Failed to update Approval.",variant:"destructive"})}};return N?e.jsx(It,{}):m?e.jsx(jt,{}):e.jsxs("main",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-200 hover:bg-gray-100",title:"Open menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-digging mr-2"})," Work Schedule Overview"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:j,onClick:T,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ws,{projectId:t,stageNumber:10,stagePath:"worktasks",className:"w-full sm:w-auto"}),e.jsx(ls,{className:"w-full sm:w-auto",stageName:"WorkMainStageScheduleModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null})]})]}),h?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=(z=h==null?void 0:h.response)==null?void 0:z.data)==null?void 0:q.message)||(h==null?void 0:h.message)||"Couldn't load data."}),e.jsx(M,{isLoading:m,onClick:()=>x(),className:"bg-red-600 text-white hover:bg-red-700 px-4 py-2",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full border-l-4 border-blue-600 shadow bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"worktasks",completedAt:(I=d==null?void 0:d.timer)==null?void 0:I.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(de=d==null?void 0:d.timer)==null?void 0:de.deadLine,startedAt:(Q=d==null?void 0:d.timer)==null?void 0:Q.startedAt,refetchStageMutate:x,deadLineMutate:p,isPending:g})]}),e.jsxs(Le,{className:"p-2 mb-4 border-l-4 border-blue-600 bg-white border shadow-md rounded-xl",children:[e.jsxs("div",{className:"text-blue-600 rounded-t flex items-center gap-2 mb-4",children:[e.jsx("i",{className:"fas fa-user-shield"}),e.jsx("h2",{className:"text-lg font-semibold",children:"MD Approval"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 font-medium ",children:"Status:"}),k?e.jsxs(Je,{value:S,onValueChange:oe=>v(oe),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S,placeholder:"Select status"})}),e.jsx(Ze,{children:["pending","approved","rejected"].map(oe=>e.jsx(ye,{value:oe,children:oe.charAt(0).toUpperCase()+oe.slice(1)},oe))})]}):e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${((B=d==null?void 0:d.mdApproval)==null?void 0:B.status)==="approved"?"bg-green-200 text-green-700":((ee=d==null?void 0:d.mdApproval)==null?void 0:ee.status)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-200 text-red-700"}`,children:((V=d==null?void 0:d.mdApproval)==null?void 0:V.status)||"N/A"}),k?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"primary",isLoading:b,onClick:F,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(M,{size:"sm",variant:"secondary",onClick:()=>w(!1),children:e.jsx("i",{className:"fas fa-xmark"})})]}):e.jsx(M,{size:"md",onClick:P,children:e.jsx("i",{className:"fas fa-pencil"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs($t,{to:`workschedule/${d==null?void 0:d.workScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-list-alt text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Work Plans"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Manage detailed work plans for the project."})]})]}),e.jsxs($t,{to:`dailyschedule/${d==null?void 0:d.dailyScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-calendar-check text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Daily Tasks"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Track daily activities and progress reports."})]})]})]})]})]})},o6=()=>{var V,oe,_,W,me;const{sectionId:t,projectId:a,organizationId:l}=Ae(),r=Me();if(!a)return;const{data:o,isLoading:d,refetch:m,error:x}=GR(a),{data:h}=Wy(a),{mutateAsync:p,isPending:g}=s6(),y=YR(),j=XR(),E=JR(),[b,k]=A.useState(null),[w,S]=A.useState(null),[v,N]=A.useState(null),[P,T]=A.useState("pending"),[F,z]=A.useState(!1);if(d)return e.jsx(xn,{});x&&(oe=(V=x==null?void 0:x.response)==null?void 0:V.data)!=null&&oe.message;const q=()=>{k({workType:"",startDate:"",endDate:"",assignedTo:"",notes:""})},I=()=>z(!0),de=async()=>{var le,R;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await p({projectId:a,workScheduleId:o._id,payload:{status:P}}),D({title:"Success",description:"Work Schedule status updated successfully."}),z(!1),m()}catch(U){D({title:"Error",description:((R=(le=U==null?void 0:U.response)==null?void 0:le.data)==null?void 0:R.message)||U.message||"Failed to update status.",variant:"destructive"})}},Q=async()=>{var le,R,U;try{if(!b)return;if(!((le=b.workType)!=null&&le.trim()))throw new Error("work field is mandatory");await y.mutateAsync({workScheduleId:t,formData:b,projectId:a}),k(null),D({title:"Success",description:"Item Saved"}),m()}catch(L){D({variant:"destructive",title:"Error",description:((U=(R=L==null?void 0:L.response)==null?void 0:R.data)==null?void 0:U.message)||(L==null?void 0:L.message)||"failed to add"})}},B=async()=>{var le,R,U;try{if(!v||!w)return;if(!((le=v.workType)!=null&&le.trim()))throw new Error("work field is mandatory");await j.mutateAsync({workScheduleId:o._id,planId:w,formData:v,projectId:a}),S(null),N(null),D({title:"Success",description:"Item Saved"}),m()}catch(L){D({variant:"destructive",title:"Error",description:((U=(R=L==null?void 0:L.response)==null?void 0:R.data)==null?void 0:U.message)||(L==null?void 0:L.message)||"Update failed"})}},ee=async le=>{var R,U;try{await E.mutateAsync({workScheduleId:o._id,planId:le,projectId:a}),D({title:"Success",description:"Item deleted"}),m()}catch(L){D({variant:"destructive",title:"Error",description:((U=(R=L==null?void 0:L.response)==null?void 0:R.data)==null?void 0:U.message)||(L==null?void 0:L.message)||"Update failed"})}};return e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-6 px-4",children:" Work Plans"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),F?e.jsxs(e.Fragment,{children:[e.jsxs(Je,{value:P,onValueChange:le=>T(le),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select status",selectedValue:P})}),e.jsx(Ze,{children:["pending","completed"].map(le=>e.jsx(ye,{value:le,children:le},le))})]}),e.jsx(M,{size:"sm",variant:"primary",disabled:g,onClick:de,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(M,{size:"sm",onClick:I,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1024px]",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 bg-blue-100 text-sm font-semibold text-blue-900 rounded-t-lg shadow-md",children:[e.jsx("div",{className:"text-center",children:"S.No"}),e.jsx("div",{className:"text-center",children:"Work Type"}),e.jsx("div",{className:"text-center",children:"Start Date"}),e.jsx("div",{className:"text-center",children:"End Date"}),e.jsx("div",{className:"text-center",children:"Assigned To"}),e.jsx("div",{className:"text-center",children:"Notes"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col divide-y",children:[((_=o==null?void 0:o.plans)==null?void 0:_.length)>0?o.plans.map((le,R)=>{var U;return e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 border-b border-[#5557584a] items-center bg-white hover:bg-blue-50 transition",children:[e.jsx("div",{className:"font-medium text-gray-700 text-center",children:R+1}),w===le._id?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.workType,onChange:L=>N({...v,workType:L.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.startDate,onChange:L=>N({...v,startDate:L.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.endDate,onChange:L=>N({...v,endDate:L.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.assignedTo,onChange:L=>N({...v,assignedTo:L.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(L=>e.jsx("option",{value:L==null?void 0:L._id,children:L.workerName},L==null?void 0:L._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.notes,onChange:L=>N({...v,notes:L.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{variant:"primary",isLoading:j.isPending,onClick:B,children:"Save"}),e.jsx("button",{onClick:()=>{S(null),N(null)},className:"bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-gray-700 text-center",children:le.workType||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:le.startDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:le.endDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:((U=h==null?void 0:h.find(L=>{var K;return L._id===((K=le.assignedTo)==null?void 0:K._id)}))==null?void 0:U.workerName)||"Not Assigned"}),e.jsx("div",{className:"text-gray-700 text-center",children:le.notes||"N/A"}),e.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[e.jsx("button",{onClick:()=>{S(le._id),N(le)},className:"text-blue-600 hover:text-blue-800",title:"Edit",children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(M,{isLoading:E.isPending,onClick:()=>ee(le._id),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]})]},le._id)}):!b&&e.jsxs("div",{className:"mt-6 text-center border border-blue-100 p-8 rounded-lg bg-blue-50",children:[e.jsx("p",{className:"text-blue-600 text-sm",children:"No work plans created yet."}),e.jsxs("button",{onClick:q,className:"mt-3 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Work Plan"]})]}),b&&e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 items-center bg-white",children:[e.jsx("div",{className:"text-center font-medium text-gray-700",children:(W=o==null?void 0:o.plans)!=null&&W.length?o.plans.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Work Type",value:b.workType,onChange:le=>k({...b,workType:le.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:b.startDate,onChange:le=>k({...b,startDate:le.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:b.endDate,onChange:le=>k({...b,endDate:le.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:b.assignedTo,onChange:le=>k({...b,assignedTo:le.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(le=>e.jsx("option",{value:le._id,children:le.workerName},le._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Notes",value:b.notes,onChange:le=>k({...b,notes:le.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{variant:"primary",isLoading:y.isPending,onClick:Q,children:"Save"}),e.jsx(M,{variant:"secondary",onClick:()=>k(null),children:"Cancel"})]})]})]}),!b&&((me=o==null?void 0:o.plans)==null?void 0:me.length)>0&&e.jsx("div",{className:"mt-5 text-left",children:e.jsxs(M,{size:"sm",variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Work"]})})]})})]})},c6=()=>{var W,me,le,R,U;const{sectionId:t,projectId:a,organizationId:l}=Ae(),r=Me();if(!t)return;const{data:o,isLoading:d,refetch:m,isError:x,error:h}=KR(a),{data:p,isLoading:g}=Wy(a),{mutateAsync:y,isPending:j}=t6(),E=VR(),b=WR(),k=ZR(),[w,S]=A.useState(!1),[v,N]=A.useState({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),[P,T]=A.useState(null),[F,z]=A.useState(null),[q,I]=A.useState("pending"),[de,Q]=A.useState(!1),B=()=>Q(!0),ee=async()=>{var L,K;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await y({projectId:a,dailyScheduleId:o._id,payload:{status:q}}),D({title:"Success",description:"Work Schedule status updated successfully."}),Q(!1),m()}catch(Y){D({title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||Y.message||"Failed to update status.",variant:"destructive"})}},V=async()=>{var L,K,Y;try{if(!((L=v.taskName)!=null&&L.trim()))throw new Error("task Name field is mandatory");const ge=new FormData;ge.append("taskName",v.taskName),ge.append("description",v.description),ge.append("date",v.date),ge.append("status",v.status),ge.append("assignedTo",v.assignedTo),await E.mutateAsync({dailyScheduleId:t,formData:ge,projectId:a}),S(!1),N({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),D({title:"Success",description:"Item Saved"}),m()}catch(ge){D({variant:"destructive",title:"Error",description:((Y=(K=ge==null?void 0:ge.response)==null?void 0:K.data)==null?void 0:Y.message)||(ge==null?void 0:ge.message)||"failed to save"})}},oe=async L=>{var K,Y,ge;try{if(!((K=F.taskName)!=null&&K.trim()))throw new Error("task Name field is mandatory");const se=new FormData;se.append("taskName",F.taskName),se.append("description",F.description),se.append("date",F.date),se.append("status",F.status),se.append("assignedTo",F.assignedTo),await b.mutateAsync({dailyScheduleId:t,taskId:L,formData:se,projectId:a}),T(null),z(null),D({title:"Success",description:"Item updated"}),m()}catch(se){D({variant:"destructive",title:"Error",description:((ge=(Y=se==null?void 0:se.response)==null?void 0:Y.data)==null?void 0:ge.message)||(se==null?void 0:se.message)||"Update failed"})}},_=async L=>{var K,Y;try{await k.mutateAsync({dailyScheduleId:t,taskId:L,projectId:a}),D({title:"Deleted",description:"Item removed"}),m()}catch(ge){D({title:"Error",description:((Y=(K=ge==null?void 0:ge.response)==null?void 0:K.data)==null?void 0:Y.message)||(ge==null?void 0:ge.message)||"Failed to delete",variant:"destructive"})}};return d?e.jsx(xn,{}):(x&&(me=(W=h==null?void 0:h.response)==null?void 0:W.data)!=null&&me.message,g?e.jsx("p",{children:"getting the worksrs"}):e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4 px-4",children:" Daily Tasks"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),de?e.jsxs(e.Fragment,{children:[e.jsxs(Je,{value:q,onValueChange:L=>I(L),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select status",selectedValue:q})}),e.jsx(Ze,{children:["pending","completed"].map(L=>e.jsx(ye,{value:L,children:L},L))})]}),e.jsx(M,{size:"sm",variant:"primary",disabled:j,onClick:ee,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(M,{size:"sm",onClick:B,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"rounded-lg overflow-x-auto shadow-sm",children:e.jsxs("div",{className:"min-w-[1100px]",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-100 px-4 py-3 font-semibold text-blue-800 text-center text-sm",children:[e.jsx("div",{children:"S.No"}),e.jsx("div",{children:"Task Name"}),e.jsx("div",{children:"Description"}),e.jsx("div",{children:"Date"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Assigned To"}),e.jsx("div",{children:"Actions"})]}),((le=o==null?void 0:o.tasks)==null?void 0:le.length)>0?o.tasks.map((L,K)=>{var Y,ge;return e.jsxs("div",{className:"grid grid-cols-7 gap-1 items-center px-4 py-2 text-center hover:bg-blue-50 transition border-b border-[#81838556]",children:[e.jsx("div",{children:K+1}),P===K?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:F.taskName,onChange:se=>z({...F,taskName:se.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:F.description,onChange:se=>z({...F,description:se.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:F.date,onChange:se=>z({...F,date:se.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:F.status,onChange:se=>z({...F,status:se.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:F.assignedTo,onChange:se=>z({...F,assignedTo:se.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),p==null?void 0:p.map(se=>e.jsx("option",{value:se._id,children:se.workerName},se._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{isLoading:b.isPending,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded",onClick:()=>oe(L._id),children:"Save"}),e.jsx("button",{className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded",onClick:()=>{T(null),z(null)},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:L.taskName||"N/A"}),e.jsx("div",{children:L.description||"N/A"}),e.jsx("div",{children:L.date||"N/A"}),e.jsx("div",{className:"capitalize",children:((Y=L==null?void 0:L.status)==null?void 0:Y.replace("_"," "))||"N/A"}),e.jsx("div",{children:((ge=p==null?void 0:p.find(se=>{var Ne;return(se==null?void 0:se._id)===((Ne=L==null?void 0:L.assignedTo)==null?void 0:Ne._id)}))==null?void 0:ge.workerName)||"Not Assigned"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded",onClick:()=>{T(K),z(L)},children:"Edit"}),e.jsx(M,{isLoading:k.isPending,onClick:()=>_(L._id),children:"Delete"})]})]})]},L._id)}):w?null:e.jsxs("div",{className:"text-center text-gray-600 py-6",children:["No tasks created yet.",e.jsx("br",{}),e.jsxs(M,{variant:"primary",className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",onClick:()=>S(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add First Task"]})]}),w&&e.jsxs("div",{className:"grid grid-cols-7 items-center gap-2 px-4 py-3 text-center bg-white",children:[e.jsx("div",{children:(R=o==null?void 0:o.tasks)!=null&&R.length?o.tasks.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:v.taskName,onChange:L=>N({...v,taskName:L.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:v.description,onChange:L=>N({...v,description:L.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:v.date,onChange:L=>N({...v,date:L.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:v.status,onChange:L=>N({...v,status:L.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:v.assignedTo,onChange:L=>N({...v,assignedTo:L.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),p==null?void 0:p.map(L=>e.jsx("option",{value:L==null?void 0:L._id,children:L.workerName},L==null?void 0:L._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{variant:"primary",isLoading:E.isPending,onClick:V,children:"Add"}),e.jsx(M,{variant:"secondary",className:"",onClick:()=>S(!1),children:"Cancel"})]})]})]})}),!w&&((U=o==null?void 0:o.tasks)==null?void 0:U.length)>0&&e.jsx("div",{className:"text-left mt-6",children:e.jsxs(M,{size:"md",variant:"primary",onClick:()=>S(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Task"]})})]}))},d6=async(t,a,l,r)=>{console.log("formData",l);const{data:o}=await r.post(`/installation/${t}/${a}/item/create`,l);if(!o.ok)throw new Error(o.message);return o.data},u6=async(t,a,l,r)=>{const{data:o}=await r.put(`/installation/${t}/${a}/item/edit`,l);if(!o.ok)throw new Error(o.message);return o.data},m6=async(t,a)=>{const{data:l}=await a.delete(`/installation/${t.projectId}/item/delete`,{data:t});if(!l.ok)throw new Error(l.message);return l.message},f6=async(t,a)=>{const{data:l}=await a.get(`/installation/${t}/getalldetail`);if(!l.ok)throw new Error(l.message);return l.data},h6=()=>{const t=["CTO","owner","staff","worker"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await d6(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},x6=()=>{const t=["CTO","owner","staff","worker"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await u6(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},p6=()=>{const t=["CTO","owner","staff","worker"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async o=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await m6(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},Xy=t=>{const a=["CTO","owner","staff","worker","client"],{role:l}=Z(),r=J(l);return Fe({queryKey:["installation-details",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to make this API call.");if(!r)throw new Error("API instance not found.");return await f6(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},g6=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/installation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},b6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/installation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},y6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await g6({formId:r,projectId:o,deadLine:d,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["installation-details"]})}})},w6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await b6({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["installation-details",o]})}})},v6=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"];function j6(){var w,S,v,N,P;const{projectId:t,organizationId:a}=Ae(),l=pt(),{isMobile:r,openMobileSidebar:o}=Ke(),d=l.pathname.includes("/installationroom"),{data:m,isLoading:x,isError:h,refetch:p,error:g}=Xy(t),{mutateAsync:y,isPending:j}=w6(),{mutateAsync:E,isPending:b}=y6(),k=async()=>{var T,F;try{await y({projectId:t}),D({title:"Success",description:"Completion status updated successfully"})}catch(z){D({title:"Error",description:((F=(T=z==null?void 0:z.response)==null?void 0:T.data)==null?void 0:F.message)||z.message||"Failed to update status",variant:"destructive"})}};return x?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full",children:d?e.jsx(It,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-tools mr-2"})," Installation Overview"]}),e.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:flex-row gap-2",children:[e.jsxs(M,{isLoading:j,onClick:k,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsx(ws,{projectId:t,stageNumber:11,stagePath:"installation",className:"w-full sm:w-auto"}),e.jsx(ls,{stageName:"InstallationModel",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),h?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(w=g==null?void 0:g.response)==null?void 0:w.data)==null?void 0:S.message)||(g==null?void 0:g.message)||"Something went wrong"}),e.jsx(M,{isLoading:x,onClick:()=>p(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):m&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(v=m==null?void 0:m.timer)==null?void 0:v.completedAt,stageName:"installation",projectId:t,formId:m==null?void 0:m._id,deadLine:(N=m==null?void 0:m.timer)==null?void 0:N.deadLine,startedAt:(P=m==null?void 0:m.timer)==null?void 0:P.startedAt,refetchStageMutate:p,deadLineMutate:E,isPending:b})]}),e.jsx("div",{className:"sm:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[70vh] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:v6.map(T=>{var F;return e.jsxs($t,{to:`installationroom/${T}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:T}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((F=m==null?void 0:m[T])==null?void 0:F.length)||0," work items"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tap to view details"})]},T)})})]})]})})}function N6(){var B,ee;const{roomkey:t,projectId:a,organizationId:l}=Ae(),r=Me(),[o,d]=A.useState(null),{data:m,isLoading:x,refetch:h,error:p,isError:g}=Xy(a),{mutateAsync:y,isPending:j}=h6(),{mutateAsync:E,isPending:b}=x6(),{mutateAsync:k,isPending:w}=p6(),[S,v]=A.useState({workName:"",descritpion:"",completedDate:"",file:void 0}),[N,P]=A.useState(!1),[T,F]=A.useState(null),z=(m==null?void 0:m[t])||[],q=async()=>{var V,oe;try{if(!S.workName.trim())throw new Error("work Name field is mandatory");const _=new FormData;_.append("workName",S.workName),S.descritpion&&_.append("descritpion",S.descritpion),S.completedDate&&_.append("completedDate",S.completedDate),S.file&&_.append("file",S.file),await y({projectId:a,roomName:t,formData:_}),P(!1),D({description:"created successfully",title:"Success"})}catch(_){D({title:"Error",description:((oe=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:oe.message)||_.message||"Failed to update completion status",variant:"destructive"})}},I=async()=>{var V,oe;try{if(!T)return;if(!S.workName.trim())throw new Error("work Name field is mandatory");const _=new FormData;_.append("itemId",T),S.workName&&_.append("workName",S.workName),S.descritpion&&_.append("descritpion",S.descritpion),S.completedDate&&_.append("completedDate",S.completedDate),S.file&&_.append("file",S.file),await E({projectId:a,roomName:t,formData:_},{onSuccess:()=>{v({workName:"",descritpion:"",completedDate:"",file:void 0}),F(null)}}),D({description:"edited successfully",title:"Success"})}catch(_){D({title:"Error",description:((oe=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:oe.message)||_.message||"Failed to update completion status",variant:"destructive"})}},de=async V=>{var oe,_;try{await k({projectId:a,roomName:t,itemId:V}),D({description:"deleted successfully",title:"Success"}),h()}catch(W){D({title:"Error",description:((_=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:_.message)||W.message||"Failed to update completion status",variant:"destructive"})}},Q=()=>{v({workName:"",descritpion:"",completedDate:"",file:void 0}),P(!1),F(null)};return x?e.jsx(xn,{}):(g&&(ee=(B=p==null?void 0:p.response)==null?void 0:B.data)!=null&&ee.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(M,{variant:"primary",className:"",onClick:()=>r(`/${l}/projectdetails/${a}/installation`),children:"Go Back"})]}),z.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-5 mb-2  gap-2 font-semibold bg-blue-100  text-blue-900 p-2 rounded ",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-tasks text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No works added yet for this room."}),e.jsxs(M,{onClick:()=>P(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]}):e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("section",{className:"!max-h-[100%] overflow-y-auto",children:[z.map(V=>{var oe,_;return T===V._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",value:S.workName,onChange:W=>v({...S,workName:W.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",value:S.descritpion,onChange:W=>v({...S,descritpion:W.target.value})}),e.jsx("input",{type:"date",className:"border-b p-1 focus:outline-none",value:S.completedDate,onChange:W=>v({...S,completedDate:W.target.value})}),e.jsx("input",{className:"border-b p-2 text-xs max-w-[80%] ",type:"file",accept:"image/*",onChange:W=>{var le;const me=(le=W.target.files)==null?void 0:le[0];v({...S,file:me})}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"primary",isLoading:b,onClick:I,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(M,{variant:"secondary",onClick:Q,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},V._id):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:V.workName||"N/A"}),e.jsx("div",{className:"text-center",children:V.descritpion||"N/A"}),e.jsx("div",{className:"text-center",children:V.completedDate?ui(V.completedDate.toLocaleString()):"N/A"}),e.jsx("div",{className:"text-center",children:((oe=V.upload)==null?void 0:oe.type)==="image"?e.jsx("img",{loading:"lazy",src:V.upload.url,alt:"preview",className:"w-10 mx-auto block h-10 object-cover border rounded shadow cursor-pointer",onClick:()=>{var W;return d((W=V.upload)==null?void 0:W.url)}}):((_=V.upload)==null?void 0:_.type)==="pdf"?e.jsx("a",{href:V.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(M,{onClick:()=>{F(V._id),P(!1),v({workName:V.workName||"",descritpion:V.descritpion||"",completedDate:V.completedDate?new Date(V.completedDate).toISOString().split("T")[0]:"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(M,{isLoading:w,variant:"danger",onClick:()=>de(V._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},V._id)}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-4 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Work Name",value:S.workName,onChange:V=>v({...S,workName:V.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Description",value:S.descritpion,onChange:V=>v({...S,descritpion:V.target.value})}),e.jsx("input",{type:"date",className:"border-b  p-1 focus:outline-none",value:S.completedDate,onChange:V=>v({...S,completedDate:V.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx("input",{className:"border-b max-w-[80%]",type:"file",accept:"image/*",onChange:V=>{var _;const oe=(_=V.target.files)==null?void 0:_[0];v({...S,file:oe})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(M,{isLoading:j,variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:Q,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),!N&&e.jsxs(M,{onClick:()=>P(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]})}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0  bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:V=>V.stopPropagation(),className:"relative bg-white rounded p-4 lg:p-8 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-3 right-4 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{loading:"lazy",src:o,alt:"Full Preview",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const S6=async(t,a,l,r)=>{const{data:o}=await r.post(`/qualitycheck/${t}/${a}/item/create`,l);if(!o.ok)throw new Error(o.message);return o.data},C6=async(t,a,l,r,o)=>{const{data:d}=await o.put(`/qualitycheck/${t}/${a}/${l}/item/edit`,r);if(!d.ok)throw new Error(d.message);return d.data},k6=async(t,a,l,r)=>{const{data:o}=await r.delete(`/qualitycheck/${t}/${a}/${l}/item/delete`);if(!o.ok)throw new Error(o.message);return o},E6=async(t,a)=>{const{data:l}=await a.get(`/qualitycheck/${t}`);if(!l.ok)throw new Error(l.message);return l.data},A6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await S6(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},O6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomName:d,itemId:m,formData:x})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await C6(o,d,m,x,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},R6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomName:d,itemId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await k6(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},Zy=t=>{const a=["owner","CTO","staff","worker"],{role:l}=Z(),r=J(l);return Fe({queryKey:["quality-checkup",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed.");if(!r)throw new Error("can't make the call");return await E6(t,r)},enabled:!!t,retry:!1,retryOnMount:!1})},T6=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/qualitycheck/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},P6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/qualitycheck/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},M6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await T6({formId:r,projectId:d,deadLine:o,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["quality-checkup"]})}})},L6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await P6({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["quality-checkup",o]})}})},F6=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"],D6=[{path:"adminwall",sectionName:"Admin Section"},{path:"workerwall",sectionName:"Worker Section"}];function _6(){var w,S,v,N,P;const{projectId:t,organizationId:a}=Ae(),l=pt(),{isMobile:r,openMobileSidebar:o}=Ke();if(!t)return null;const{data:d,isLoading:m,isError:x,error:h,refetch:p}=Zy(t),{mutateAsync:g,isPending:y}=M6(),{mutateAsync:j,isPending:E}=L6(),b=l.pathname.includes("/qualitycheckroom/"),k=async()=>{var T,F;try{await j({projectId:t}),D({title:"Success",description:"Quality Check marked as complete."}),p()}catch(z){D({title:"Error",description:((F=(T=z==null?void 0:z.response)==null?void 0:T.data)==null?void 0:F.message)||z.message||"Failed to update completion status",variant:"destructive"})}};return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full  overflow-y-auto custom-scrollbar",children:b?e.jsx(It,{context:{isMobile:r,openMobileSidebar:o}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[r&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-check-double"}),"Quality Check Overview"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-2 justify-end",children:[e.jsxs(M,{isLoading:E,onClick:k,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark as Complete"}),e.jsx("span",{className:"inline sm:hidden",children:"Complete"})]}),e.jsx(ws,{projectId:t,stageNumber:12,stagePath:"qualitycheck",className:"w-full sm:w-auto"}),e.jsx(ls,{stageName:"QualityCheckupModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(w=h==null?void 0:h.response)==null?void 0:w.data)==null?void 0:S.message)||(h==null?void 0:h.message)||"Failed to load, please try again"}),e.jsx(M,{isLoading:m,onClick:()=>p(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"qualitycheck",completedAt:(v=d==null?void 0:d.timer)==null?void 0:v.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(P=d==null?void 0:d.timer)==null?void 0:P.startedAt,refetchStageMutate:p,deadLineMutate:g,isPending:y})]}),e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Rooms"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 mb-10",children:F6.map(T=>{var F;return e.jsxs($t,{to:`qualitycheckroom/${T}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:T.replace(/([A-Z])/g," $1").trim()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((F=d==null?void 0:d[T])==null?void 0:F.length)||0," works completed"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},T)})}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Walls SOP Section"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10",children:D6.map(T=>e.jsxs($t,{to:`qualitycheckroom/${T.path}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:T.sectionName.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},T.sectionName))})]})]})]})})}function q6(){var B,ee;const{roomkey:t,projectId:a,organizationId:l}=Ae(),r=Me(),[o,d]=A.useState(null),{data:m,isLoading:x,error:h,isError:p,refetch:g}=Zy(a),{mutateAsync:y,isPending:j}=A6(),{mutateAsync:E,isPending:b}=O6(),{mutateAsync:k,isPending:w}=R6(),[S,v]=A.useState({workName:"",status:"pending",remarks:"",file:void 0}),[N,P]=A.useState(!1),[T,F]=A.useState(null),z=(m==null?void 0:m[t])||[],q=async()=>{var V,oe;try{if(!S.workName.trim())throw new Error("Work name is mandatory");const _=new FormData;_.append("workName",S.workName),_.append("status",S.status),S.remarks&&_.append("remarks",S.remarks),S.file&&_.append("file",S.file),await y({projectId:a,roomName:t,formData:_}),D({description:"Created successfully",title:"Success"}),Q(),g()}catch(_){D({title:"Error",description:((oe=(V=_==null?void 0:_.response)==null?void 0:V.data)==null?void 0:oe.message)||(_==null?void 0:_.message)||"Failed to create item",variant:"destructive"})}},I=async V=>{var oe,_;try{if(!T)return;if(!S.workName.trim())throw new Error("Work name is mandatory");const W=new FormData;W.append("itemId",T),S.workName&&W.append("workName",S.workName),W.append("status",S.status),S.remarks&&W.append("remarks",S.remarks),S.file&&W.append("file",S.file),await E({projectId:a,roomName:t,formData:W,itemId:V},{onSuccess:()=>{Q()}}),D({description:"Edited successfully",title:"Success"}),g()}catch(W){D({title:"Error",description:((_=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:_.message)||(W==null?void 0:W.message)||"Failed to edit item",variant:"destructive"})}},de=async V=>{var oe,_;try{await k({projectId:a,roomName:t,itemId:V}),D({description:"Deleted successfully",title:"Success"}),g()}catch(W){D({title:"Error",description:((_=(oe=W==null?void 0:W.response)==null?void 0:oe.data)==null?void 0:_.message)||W.message||"Failed to delete item",variant:"destructive"})}},Q=()=>{v({workName:"",status:"pending",remarks:"",file:void 0}),P(!1),F(null)};return x?e.jsx(xn,{}):(p&&(ee=(B=h==null?void 0:h.response)==null?void 0:B.data)!=null&&ee.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(M,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/qualitycheck`),children:"Go Back"})]}),z.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] grid grid-cols-5 gap-2 font-semibold bg-blue-100 text-blue-900 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-check-double text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No items added yet for this room."}),e.jsxs(M,{onClick:()=>P(!0),variant:"primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded-t",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsx("div",{className:"overflow-y-auto relative z-[-10] max-h-[70vh] sm:max-h-[75vh] md:max-h-[80vh] lg:max-h-[45vh] xl:max-h-[77vh]",children:z.map((V,oe)=>{var _,W;return T===V._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx(ce,{value:S.workName,placeholder:"Work Name",onChange:me=>v({...S,workName:me.target.value})}),e.jsx("div",{className:"relative z-50",children:e.jsxs(Je,{value:S.status,onValueChange:me=>v({...S,status:me}),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S.status,placeholder:"Select status"})}),e.jsx(Ze,{children:["pass","fail","pending"].map(me=>e.jsx(ye,{value:me,children:me},me))})]})}),e.jsx(ce,{value:S.remarks,placeholder:"Remarks",onChange:me=>v({...S,remarks:me.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(ce,{type:"file",accept:"image/*",onChange:me=>{var R;const le=(R=me.target.files)==null?void 0:R[0];v({...S,file:le})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(M,{variant:"primary",isLoading:b,onClick:()=>I(V._id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(M,{variant:"secondary",onClick:Q,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},V._id+oe):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:V.workName||"N/A"}),e.jsx("div",{className:"text-center",children:V.status||"N/A"}),e.jsx("div",{className:"text-center",children:V.remarks||"N/A"}),e.jsx("div",{className:"text-center",children:((_=V.upload)==null?void 0:_.type)==="image"?e.jsx("img",{src:V.upload.url,alt:"Preview",className:"w-10 h-10 object-cover rounded border cursor-pointer mx-auto",onClick:()=>d(V.upload.url)}):((W=V.upload)==null?void 0:W.type)==="pdf"?e.jsx("a",{href:V.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No Image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>{F(V._id),P(!1),v({workName:V.workName||"",status:V.status||"pending",remarks:V.remarks||"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(M,{variant:"primary",isLoading:w,onClick:()=>de(V._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},V._id+oe)})}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 bg-white border-b border-gray-200 items-center",children:[e.jsx(ce,{placeholder:"Work Name",value:S.workName,onChange:V=>v({...S,workName:V.target.value})}),e.jsxs(Je,{value:S.status,onValueChange:V=>v({...S,status:V}),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S.status,placeholder:"Select status"})}),e.jsx(Ze,{children:["pass","fail","pending"].map(V=>e.jsx(ye,{value:V,children:V},V))})]}),e.jsx(ce,{placeholder:"Remarks",value:S.remarks,onChange:V=>v({...S,remarks:V.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(ce,{type:"file",accept:"image/*",onChange:V=>{var _;const oe=(_=V.target.files)==null?void 0:_[0];v({...S,file:oe})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:q,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:Q,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})]})}),!N&&z.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs(M,{isLoading:j,variant:"primary",onClick:()=>{P(!0),F(null),v({workName:"",status:"pending",remarks:"",file:void 0})},children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:V=>V.stopPropagation(),className:"relative bg-white rounded p-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const z6=async(t,a,l,r)=>{const{data:o}=await r.post(`/cleaning/${t}/${a}/upload`,l);if(!o.ok)throw new Error(o.message);return o.data},U6=async(t,a,l,r)=>{const{data:o}=await r.delete(`/cleaning/${t}/${a}/${l}/file`);if(!o.ok)throw new Error(o.message);return o},$6=async({projectId:t,roomId:a,notes:l,api:r})=>{const{data:o}=await r.put(`/cleaning/${t}/room/${a}/notes`,{notes:l});if(!o.ok)throw new Error(o.message);return o.data},I6=async(t,a,l,r)=>{const{data:o}=await r.put(`/cleaning/${t}/${a}/cleaning-status`,{completelyCleaned:l});if(!o.ok)throw new Error(o.message);return o},B6=async(t,a)=>{const{data:l}=await a.get(`/cleaning/${t}`);if(!l.ok)throw new Error(l.message);return l.data},H6=async(t,a,l)=>{const{data:r}=await l.get(`/cleaning/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},Mf=["owner","CTO","staff"],Q6=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomId:o,formData:d})=>{if(!t||!Mf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await z6(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},G6=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomId:o,fileId:d})=>{if(!t||!Mf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await U6(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},K6=()=>{const t=["owner","CTO","staff"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,roomId:d,notes:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("Missing API instance");return await $6({projectId:o,roomId:d,notes:m,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cleaning-and-sanitation",d]})}})},V6=()=>{const{role:t}=Z(),a=J(t),l=Ce();return ie({mutationFn:async({projectId:r,roomId:o,completelyCleaned:d})=>{if(!t||!Mf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await I6(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},Y6=t=>{const{role:a}=Z(),l=J(a),r=["owner","CTO","staff","worker"];return Fe({queryKey:["cleaning-and-sanitation",t],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("No API instance available.");return await B6(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},W6=(t,a)=>{const{role:l}=Z(),r=J(l),o=["owner","CTO","staff","worker"];return Fe({queryKey:["cleaning-and-sanitation",t,a],queryFn:async()=>{if(!l||!o.includes(l))throw new Error("Not allowed.");if(!r)throw new Error("No API instance available.");return await H6(t,a,r)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},X6=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/cleaning/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},Z6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/cleaning/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},J6=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await X6({formId:r,deadLine:o,projectId:d,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["cleaning-and-sanitation"]})}})},eT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await Z6({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})};function tT(){var w,S,v,N,P,T;const{projectId:t,organizationId:a}=Ae(),l=pt(),{isMobile:r,openMobileSidebar:o}=Ke();if(!t)return null;const{data:d,isLoading:m,isError:x,refetch:h,error:p}=Y6(t),{mutateAsync:g,isPending:y}=J6(),{mutateAsync:j,isPending:E}=eT(),b=async()=>{var F,z;try{await j({projectId:t}),D({description:"Cleaning & Sanitation marked as complete.",title:"Success"}),h()}catch(q){D({title:"Error",description:((z=(F=q==null?void 0:q.response)==null?void 0:F.data)==null?void 0:z.message)||q.message||"Failed to update completion status",variant:"destructive"})}},k=l.pathname.includes("/cleaningroom/");return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar",children:k?e.jsx(It,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-broom"}),e.jsx("span",{className:"hidden sm:inline text-2xl",children:" Cleaning & Sanitation Overview"}),e.jsx("span",{className:"inline sm:hidden text-2xl",children:" Cleaning Stage"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:E,onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white sm:w-auto w-full",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline-block",children:"Mark as Completed"}),e.jsx("span",{className:"inline sm:hidden",children:"Mark as Completed"})]}),e.jsxs("div",{className:"flex items-center justify-between w-full sm:gap-2",children:[e.jsx(ws,{projectId:t,stageNumber:13,stagePath:"cleaning",className:"!w-[48%] sm:!w-auto"}),e.jsx(ls,{stageName:"CleaningAndSanitationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"!w-[48%] sm:!w-auto"})]})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(w=p==null?void 0:p.response)==null?void 0:w.data)==null?void 0:S.message)||(p==null?void 0:p.message)||"Failed to load, please try again"}),e.jsx(M,{isLoading:m,onClick:()=>h(),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-600 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{stageName:"cleaning",completedAt:(v=d==null?void 0:d.timer)==null?void 0:v.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(P=d==null?void 0:d.timer)==null?void 0:P.startedAt,refetchStageMutate:h,deadLineMutate:g,isPending:y})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:(T=d==null?void 0:d.rooms)==null?void 0:T.map(F=>{var z;return e.jsx($t,{to:`cleaningroom/${F._id}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-md font-semibold capitalize text-blue-800 mb-1",children:F.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((z=F.uploads)==null?void 0:z.length)||0," uploads"]}),e.jsx("p",{className:"text-xs text-gray-500",children:F.completelyCleaned?" Completely Cleaned":" Not Cleaned"})]})},F._id)})})]})]})})}function sT(){var _,W,me,le,R,U;const{projectId:t,roomId:a,organizationId:l}=Ae(),r=Me(),{data:o,isLoading:d,refetch:m,isError:x,error:h}=W6(t,a),[p,g]=A.useState(null),{mutateAsync:y,isPending:j}=Q6(),{mutateAsync:E,isPending:b}=G6(),{mutateAsync:k,isPending:w}=V6(),{mutateAsync:S,isPending:v}=K6(),[N,P]=A.useState((o==null?void 0:o.completelyCleaned)||!1),[T,F]=A.useState((o==null?void 0:o.notes)||""),[z,q]=A.useState(!1),[I,de]=A.useState(null),Q=L=>{var K;(K=L.target.files)!=null&&K.length&&de(L.target.files)},B=async()=>{var L,K;try{if(!I)throw new Error("select the files before uploading");const Y=new FormData;for(let ge=0;ge<I.length;ge++)Y.append("files",I[ge]);await y({projectId:t,roomId:a,formData:Y}),D({title:"Success",description:"Files uploaded successfully."}),de(null),m()}catch(Y){D({title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||Y.message,variant:"destructive"})}},ee=async L=>{var K,Y;try{await E({projectId:t,roomId:a,fileId:L}),D({title:"Deleted",description:"File deleted successfully."}),m()}catch(ge){D({title:"Error",description:((Y=(K=ge==null?void 0:ge.response)==null?void 0:K.data)==null?void 0:Y.message)||ge.message,variant:"destructive"})}},V=async()=>{var L,K;try{if(!T.trim())throw new Error("please enter some notes");await S({projectId:t,roomId:a,notes:T}),D({title:"Notes updated!",description:"Room notes saved."}),q(!1)}catch(Y){D({title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Failed to update",variant:"destructive"})}},oe=async()=>{var L,K;try{await k({projectId:t,roomId:a,completelyCleaned:!N}),D({title:"Updated",description:`Marked as ${N?"not cleaned":"completely cleaned"}.`}),P(!N),m()}catch(Y){D({title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||Y.message,variant:"destructive"})}};return d?e.jsx(jt,{}):(x&&(W=(_=h==null?void 0:h.response)==null?void 0:_.data)!=null&&W.message,e.jsxs("div",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar-none sm:custom-scrollbar",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center w-full",children:[e.jsxs("h2",{className:"text-md sm:text-2xl font-semibold mb-4 text-blue-700 flex items-center",children:[e.jsx("i",{className:"fas fa-broom mr-2"})," ",o==null?void 0:o.roomName," - Details"]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(M,{isLoading:w,onClick:oe,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm !p-2 lg:p-4 ",children:N?"Mark as Not Cleaned":"Mark as Cleaned"}),e.jsx(M,{variant:"primary",className:"",onClick:()=>r(`/${l}/projectdetails/${t}/cleaning`),children:"Go Back"})]})]}),e.jsxs("div",{className:"mb-2 grid grid-cols-1 md:grid-cols-2 gap-1 items-center place-content-center",children:[e.jsxs(Le,{className:"p-2 border-gray-100 border-2",children:[e.jsxs("div",{className:"w-full justify-between flex items-center",children:[e.jsx("h3",{className:"text-md font-semibold  text-blue-700",children:"Notes"}),!z&&e.jsxs(M,{onClick:()=>{F(o==null?void 0:o.notes),q(!0)},className:"bg-blue-600 text-white hover:bg-blue-700",children:["Edit ",e.jsx("i",{className:"fas fa-pencil ml-2 "})]})]}),z?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{rows:4,className:"w-full border rounded p-2",value:T,onChange:L=>F(L.target.value),placeholder:"Enter notes here..."}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(M,{onClick:V,disabled:v,className:"bg-blue-600 text-white hover:bg-blue-700",children:v?"Saving...":"Save"}),e.jsx(M,{onClick:()=>{q(!1),F((o==null?void 0:o.notes)??"")},variant:"outline",className:"border-gray-400",children:"Cancel"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative overflow-x-auto overflow-y-auto break-words h-[6rem] max-h-[6rem] leading-5 custom-scrollbar",children:[" ",e.jsx("p",{className:"text-gray-700 mb-2 ",children:(me=o==null?void 0:o.notes)!=null&&me.trim()?o==null?void 0:o.notes:"No notes present."})]})})]}),e.jsxs(Le,{className:"p-2 h-full border-gray-100 border-2",children:[e.jsx(fe,{className:"block mb-2 font-semibold !text-blue-700",children:"Upload Images or PDFs:"}),e.jsx(ce,{type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:Q,disabled:j,className:"border-b w-full"}),e.jsx(M,{onClick:B,isLoading:j,className:"mt-3 bg-blue-600 text-white hover:bg-blue-700",children:j?"Uploading...":`Upload ${I?I.length:""} file(s)`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 h-[95%] sm:h-[65%]",children:[e.jsxs(Le,{className:"p-2 lg:p-4 max-h-full overflow-y-auto custom-scrollbar border-1 border-[#8485887a]",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"Images"}),((le=o==null?void 0:o.uploads)==null?void 0:le.filter(L=>L.type==="image").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No images uploaded."}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(R=o==null?void 0:o.uploads)==null?void 0:R.filter(L=>L.type==="image").map(L=>e.jsxs("div",{className:"relative group rounded overflow-hidden",children:[e.jsx("img",{src:L.url,alt:L.originalName,className:"w-full h-40 object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-3/4 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(M,{size:"sm",variant:"danger",isLoading:b,onClick:()=>ee(L._id),disabled:b,className:"absolute  top-2 right-2 bg-red-600 text-white border-none rounded-full w-7 h-7 flex items-center justify-center text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("i",{className:"fas fa-trash"})}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>g(L.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:L==null?void 0:L.url,alt:(L==null?void 0:L.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})})]})]},L.url))})]}),e.jsxs(Le,{className:"p-4 max-h-full overflow-y-auto border-1 border-[#8485887a] custom-scrollbar",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"PDFs"}),((U=o.uploads)==null?void 0:U.filter(L=>L.type==="pdf").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No PDFs uploaded."}):e.jsx("ul",{className:"space-y-2",children:o==null?void 0:o.uploads.filter(L=>L.type==="pdf").map(L=>e.jsxs("li",{className:"flex items-center justify-between shadow-md p-2 rounded h-full",children:[e.jsx("a",{href:L.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline truncate max-w-[50%]",children:L.originalName}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:L==null?void 0:L.url,alt:(L==null?void 0:L.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:b,onClick:()=>ee(L._id),disabled:b,variant:"danger",className:"bg-red-600 text-white rounded px-2 py-1 text-xs",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]},L.url))})]})]}),p&&e.jsx("div",{onClick:()=>g(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:L=>L.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>g(null)}),e.jsx("img",{src:p,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const aT=async(t,a,l)=>{const{data:r}=await l.post(`/projectdelivery/${t}/upload`,a);if(!r.ok)throw new Error(r.message);return r.data},nT=()=>{const{role:t}=Z(),a=J(t),l=["owner","CTO","staff"],r=Ce();return ie({mutationFn:async({projectId:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await aT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},lT=async(t,a,l)=>{console.log("fielid",a);const{data:r}=await l.delete(`/projectdelivery/${t}/upload/${a}`);if(!r.ok)throw new Error(r.message);return r.data},rT=()=>{const{role:t}=Z(),a=J(t),l=["owner","CTO","staff"],r=Ce();return ie({mutationFn:async({projectId:o,fileId:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await lT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},iT=async(t,a,l)=>{const{data:r}=await l.put(`/projectdelivery/${t}/client-confirmation`,{confirmed:a});if(!r.ok)throw new Error(r.message);return r.data},oT=()=>{const{role:t}=Z(),a=J(t),l=["client"],r=Ce();return ie({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await iT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},cT=async(t,a,l)=>{const{data:r}=await l.put(`/projectdelivery/${t}/owner-confirmation`,{confirmed:a});if(!r.ok)throw new Error(r.message);return r.data},dT=()=>{const{role:t}=Z(),a=J(t),l=["owner"],r=Ce();return ie({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await cT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},uT=async(t,a)=>{const{data:l}=await a.get(`/projectdelivery/${t}`);if(!l.ok)throw new Error(l.message);return l.data},mT=t=>{const{role:a}=Z(),l=J(a),r=["owner","CTO","client","staff"];return Fe({queryKey:["project-delivery",t],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("API instance missing");return await uT(t,l)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},fT=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/projectdelivery/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},hT=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/projectdelivery/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},xT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await fT({formId:r,projectId:d,deadLine:o,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["project-delivery"]})}})},pT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await hT({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["project-delivery",o]})}})};function gT(){var oe,_,W,me,le;const{projectId:t,organizationId:a}=Ae(),{isMobile:l,openMobileSidebar:r}=Ke(),[o,d]=A.useState(null),{data:m,isLoading:x,error:h,refetch:p}=mT(t),{mutateAsync:g,isPending:y}=nT(),{mutateAsync:j,isPending:E,variables:b}=rT(),{mutateAsync:k}=oT(),{mutateAsync:w}=dT(),{mutateAsync:S,isPending:v}=xT(),{mutateAsync:N,isPending:P}=pT(),[T,F]=A.useState([]),z=A.useRef(null),q=async()=>{var R,U;try{await N({projectId:t}),D({description:"Project Delivery marked as complete.",title:"Success"}),p()}catch(L){D({title:"Error",description:((U=(R=L==null?void 0:L.response)==null?void 0:R.data)==null?void 0:U.message)||L.message||"Failed to update status",variant:"destructive"})}},I=R=>{R.target.files&&F(Array.from(R.target.files))},de=async()=>{var U,L;if(!T.length){D({title:"Error",description:"Please select at least one file.",variant:"destructive"});return}const R=new FormData;T.forEach(K=>{R.append("files",K)});try{await g({projectId:t,formData:R}),D({title:"Success",description:"Files uploaded successfully."}),p(),F([]),z.current&&(z.current.value="")}catch(K){D({title:"Error",description:((L=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:L.message)||K.message||"Upload failed",variant:"destructive"})}},Q=async R=>{var U,L;try{await j({projectId:t,fileId:R}),D({title:"Success",description:"File deleted."}),p()}catch(K){D({title:"Error",description:((L=(U=K==null?void 0:K.response)==null?void 0:U.data)==null?void 0:L.message)||K.message||"Deletion failed",variant:"destructive"})}},B=async R=>{var L,K;const U=R==="client"?k:w;try{await U({projectId:t,confirm:!(m!=null&&m[`${R}Confirmation`])}),D({title:"Success",description:`${R==="client"?"Client":"Owner"} confirmation updated.`}),p()}catch(Y){D({title:"Error",description:((K=(L=Y==null?void 0:Y.response)==null?void 0:L.data)==null?void 0:K.message)||Y.message||"Failed to update confirmation",variant:"destructive"})}};let ee=((m==null?void 0:m.uploads)||[]).filter(R=>R.type==="pdf"),V=((m==null?void 0:m.uploads)||[]).filter(R=>R.type==="image");return x?e.jsx(jt,{}):e.jsxs("div",{className:"w-full sm:min-h-full sm:overflow-y-auto space-y-6 py-1 sm:py-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start lg:items-center gap-4pb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-handshake mr-2"}),"Project Delivery"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(M,{isLoading:P,onClick:q,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(ls,{projectId:t,organizationId:a,stageName:"ProjectDeliveryModel",currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),h?e.jsxs("div",{className:"max-w-xl mx-auto bg-red-50 border border-red-200 rounded-lg shadow p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-bold mb-2",children:" Error Loading Data"}),e.jsx("p",{className:"text-sm text-red-500 mb-4",children:((_=(oe=h==null?void 0:h.response)==null?void 0:oe.data)==null?void 0:_.message)||(h==null?void 0:h.message)||"Something went wrong while fetching project delivery details."}),e.jsx(M,{onClick:()=>p(),isLoading:x,className:"bg-red-600 hover:bg-red-700 text-white",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 border-l-[4px] border-blue-600 shadow w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:(W=m==null?void 0:m.timer)==null?void 0:W.completedAt,stageName:"projectdelivery",projectId:t,formId:m==null?void 0:m._id,deadLine:(me=m==null?void 0:m.timer)==null?void 0:me.deadLine,startedAt:(le=m==null?void 0:m.timer)==null?void 0:le.startedAt,refetchStageMutate:p,deadLineMutate:S,isPending:v})]}),e.jsxs(Le,{className:"p-6 border-2 border-blue-200 shadow w-full flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-blue-800 mb-3",children:[e.jsx("i",{className:"fas fa-paperclip mr-2 text-blue-600"}),"Upload Files"]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[e.jsx("input",{multiple:!0,ref:z,type:"file",onChange:I,accept:".pdf,image/*",className:"w-full sm:w-[300px] border border-blue-300 px-3 py-2 rounded text-sm"}),e.jsx(M,{onClick:de,isLoading:y,className:"bg-blue-600 text-white hover:bg-blue-700",children:"Upload Files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"min-h-[220px] sm:max-h-[150px] sm:min-h-[150px]  lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-pdf"}),"PDF Files"]}),ee.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No PDF files uploaded."})}):e.jsx("ul",{className:"space-y-2",children:ee.map(R=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:R.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:R==null?void 0:R.url,alt:(R==null?void 0:R.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:(b==null?void 0:b.fileId)===R._id&&E,onClick:()=>Q(R._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},R._id))})]}),e.jsxs("div",{className:" min-h-[220px] sm:max-h-[150px]  sm:min-h-[150px] lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-image"}),"Image Files"]}),V.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No images uploaded."})}):e.jsx("ul",{className:"space-y-2",children:V.map(R=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:R.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(M,{size:"sm",variant:"primary",onClick:()=>d(R==null?void 0:R.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(M,{size:"sm",variant:"primary",onClick:()=>Vt({src:R==null?void 0:R.url,alt:(R==null?void 0:R.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(M,{size:"sm",isLoading:(b==null?void 0:b.fileId)===R._id&&E,onClick:()=>Q(R._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},R._id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-4",children:[e.jsxs(M,{onClick:()=>B("client"),className:`w-full ${m!=null&&m.clientConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.clientConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.clientConfirmation?"Client Confirmed":"Client not confirmed"]}),e.jsxs(M,{onClick:()=>B("owner"),className:`w-full ${m!=null&&m.ownerConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.ownerConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.ownerConfirmation?"Owner Confirmed":"Owner not confirmed"]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded px-4 py-3 flex items-center gap-3 text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-user-check text-blue-600 text-base"}),e.jsxs("p",{className:"font-medium",children:["Client Confirmed At:"," ",e.jsx("span",{className:"font-semibold text-blue-900",children:m!=null&&m.clientAcceptedAt?new Date(m.clientAcceptedAt).toLocaleDateString():"Not Confirmed Yet"})]})]})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:R=>R.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})]})}const bT=async(t,a)=>(await a.get(`/paymentconfirmation/getschedule/${t}`)).data.data,yT=async({projectId:t,dueDate:a,api:l})=>(await l.put(`/paymentconfirmation/dueDate/${t}`,{dueDate:a})).data.data,wT=async({projectId:t,status:a,api:l})=>(await l.put(`/paymentconfirmation/clientapprovalstatus/${t}`,{status:a})).data.data,vT=async({projectId:t,notes:a,api:l})=>(await l.put(`/paymentconfirmation/clientnotes/${t}`,{notes:a})).data.data,jT=async({projectId:t,status:a,api:l})=>(await l.put(`/paymentconfirmation/mdapprovalstatus/${t}`,{status:a})).data.data,NT=async({projectId:t,notes:a,api:l})=>(await l.put(`/paymentconfirmation/mdnotes/${t}`,{notes:a})).data.data,ST=t=>{const a=["owner","staff","CTO","client"],{role:l}=Z(),r=J(l);return Fe({queryKey:["payment-schedule",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to fetch payment schedule");if(!r)throw new Error("API instance missing");return await bT(t,r)},enabled:!!t&&!!l,retry:!1,refetchOnMount:!1})},CT=()=>{const t=["CTO","owner","staff"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,dueDate:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await yT({projectId:o,dueDate:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},kT=()=>{const t=["client"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await wT({projectId:o,status:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},ET=()=>{const t=["client"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await vT({projectId:o,notes:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},AT=()=>{const t=["owner"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await jT({projectId:o,status:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},OT=()=>{const t=["owner"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await NT({projectId:o,notes:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},V0=["pending","approved","rejected"],RT=()=>{var I,de;const{projectId:t,organizationId:a}=Ae(),l=Me(),{data:r,isLoading:o,error:d,refetch:m}=ST(t),x=kT(),h=ET(),p=AT(),g=OT(),[y,j]=A.useState(""),[E,b]=A.useState(""),[k,w]=A.useState(r==null?void 0:r.dueDate),[S,v]=A.useState(!1),N=CT(),P=async()=>{var Q,B;try{await N.mutateAsync({projectId:t,dueDate:k}),m(),D({title:"Success",description:"Due date updated successfully."}),v(!1)}catch(ee){D({title:"Error",description:((B=(Q=ee==null?void 0:ee.response)==null?void 0:Q.data)==null?void 0:B.message)||ee.message||"Failed to update due date.",variant:"destructive"})}},T=Q=>{x.mutate({projectId:t,status:Q},{onSuccess:()=>D({title:"Success",description:"Client approval status updated."}),onError:B=>{var ee,V;return D({title:"Error",description:((V=(ee=B==null?void 0:B.response)==null?void 0:ee.data)==null?void 0:V.message)||B.message||"Failed to update client status",variant:"destructive"})}})},F=Q=>{p.mutate({projectId:t,status:Q},{onSuccess:()=>D({title:"Success",description:"MD approval status updated."}),onError:B=>{var ee,V;return D({title:"Error",description:((V=(ee=B==null?void 0:B.response)==null?void 0:ee.data)==null?void 0:V.message)||B.message||"Failed to update MD status",variant:"destructive"})}})},z=()=>{h.mutate({projectId:t,notes:y},{onSuccess:()=>D({title:"Success",description:"Client note updated."}),onError:Q=>{var B,ee;return D({title:"Error",description:((ee=(B=Q==null?void 0:Q.response)==null?void 0:B.data)==null?void 0:ee.message)||Q.message||"Failed to update notes",variant:"destructive"})}})},q=()=>{g.mutate({projectId:t,notes:E},{onSuccess:()=>D({title:"Success",description:"MD note updated."}),onError:Q=>{var B,ee;return D({title:"Error",description:((ee=(B=Q==null?void 0:Q.response)==null?void 0:B.data)==null?void 0:ee.message)||Q.message||"Failed to update notes",variant:"destructive"})}})};return o?e.jsx("p",{children:e.jsx(jt,{})}):d?e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((de=(I=d==null?void 0:d.response)==null?void 0:I.data)==null?void 0:de.message)||(d==null?void 0:d.message)||"Failed to load, please try again"}),e.jsx(M,{onClick:()=>m(),isLoading:o,className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):e.jsxs("div",{className:"w-full max-w-full max-h-full overflow-y-auto custom-scrollbar mx-auto space-y-6 px-4 py-6",children:[e.jsxs("div",{className:"w-full justify-between flex",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-regular fa-calendar-check text-blue-600"}),e.jsx("span",{className:"hidden sm:inline",children:"  Step 2: Payment Schedule Approval"}),e.jsx("span",{className:"inline sm:hidden",children:"  Payment Schedule"})]}),e.jsx(M,{variant:"primary",onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]}),e.jsx(Le,{className:"p-4 border border-gray-200 shadow-sm rounded mb-6",children:e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar-days"})," Payment Due Date"]}),S?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("input",{type:"date",value:k,onChange:Q=>w(Q.target.value),className:"border rounded px-3 py-1 text-sm"}),e.jsxs(M,{size:"sm",onClick:P,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-check mr-2"}),"Save"]}),e.jsxs(M,{size:"sm",onClick:()=>{var Q;w((Q=r==null?void 0:r.dueDate)==null?void 0:Q.slice(0,10)),v(!1)},variant:"outline",className:"px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-xmark mr-1"}),"Cancel"]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-md font-medium text-gray-800",children:r!=null&&r.dueDate?ui(r==null?void 0:r.dueDate):"Not set"}),e.jsxs(M,{size:"sm",onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-regular fa-pen-to-square mr-2"}),"Edit"]})]})]})}),e.jsxs(Le,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user"})," Client Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:V0.map(Q=>{var B;return e.jsx(M,{isLoading:x.isPending&&((B=x.variables)==null?void 0:B.status)===Q,size:"sm",onClick:()=>T(Q),className:`text-white text-xs ${r.clientApprovalStatus===Q?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:Q.toUpperCase()},Q)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:r.clientApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:r.clientNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add client notes...",value:y,onChange:Q=>j(Q.target.value),rows:3}),e.jsxs(M,{onClick:z,isLoading:h.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save Client Notes"]})]})]}),e.jsxs(Le,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user-tie"})," MD Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:V0.map(Q=>{var B;return e.jsx(M,{isLoading:p.isPending&&((B=p.variables)==null?void 0:B.status)===Q,size:"sm",onClick:()=>F(Q),className:`text-white text-xs ${r.mdApprovalStatus===Q?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:Q.toUpperCase()},Q)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:r.mdApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:r.mdNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add MD notes...",value:E,onChange:Q=>b(Q.target.value),rows:3}),e.jsxs(M,{onClick:q,isLoading:g.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save MD Notes"]})]})]})]})},Jy=t=>new Promise(a=>{const l=document.createElement("script");l.src=t,l.onload=()=>{a(!0)},l.onerror=()=>{a(!1)},document.body.appendChild(l)}),TT=async({projectId:t,clientId:a,api:l})=>(await l.post(`/paymentconfirmation/createorder/${t}`,{clientId:a})).data.data,PT=async({projectId:t,razorpay_order_id:a,razorpay_payment_id:l,razorpay_signature:r,api:o})=>(await o.post(`/paymentconfirmation/verifypayment/${t}`,{razorpay_order_id:a,razorpay_payment_id:l,razorpay_signature:r})).data.data,MT=async({projectId:t,api:a})=>{const l=await a.get(`/paymentconfirmation/gettransaction/${t}`);return console.log(l,"drjklsjklfjsldfjasdjfsdj"),l.data.data},LT=()=>{const t=["client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,clientId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await TT({projectId:r,clientId:o,api:l})},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["payment-confirmation",o]})}})},FT=()=>{const t=["client"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({projectId:r,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await PT({projectId:r,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m,api:l})},onSuccess:(r,{projectId:o})=>{ke.invalidateQueries({queryKey:["payment-confirmation",o]})}})},DT=t=>{const a=["client","staff","owner","CTO"],{role:l}=Z(),r=J(l);return Fe({queryKey:["payment-confirmation",t,"transaction"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await MT({projectId:t,api:r})},enabled:!!t&&!!r&&!!l,retry:!1,refetchOnMount:!1})},_T=()=>{var w,S;const{projectId:t,organizationId:a}=Ae(),l=Me(),{data:r,refetch:o,isError:d,error:m,isLoading:x}=DT(t),h=r==null?void 0:r.paymentTransaction,p=r==null?void 0:r.totalAmount,{mutateAsync:g,isPending:y}=LT(),{mutateAsync:j,isPending:E}=FT(),b=xs(v=>v.clientProfileStore);if(x)return e.jsx(jt,{});if(d||!r)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(w=m==null?void 0:m.response)==null?void 0:w.data)==null?void 0:S.message)||(m==null?void 0:m.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>o(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const k=async()=>{try{const v=await g({projectId:t,clientId:b.clientId});if(!await Jy("https://checkout.razorpay.com/v1/checkout.js")){D({title:"Error",description:"Failed to load Razorpay SDK.",variant:"destructive"});return}const P={key:"rzp_test_Lc5DxL3uS4I6F9",amount:v.amount,currency:"INR",name:"Vertical Living",description:"Project Payment",order_id:v.orderId,handler:async function(F){await j({projectId:t,razorpay_order_id:F.razorpay_order_id,razorpay_payment_id:F.razorpay_payment_id,razorpay_signature:F.razorpay_signature}),D({title:"Success",description:"Payment successful!"})},prefill:{name:b.clientName||"",email:b.email||"",contact:b.phoneNo||""},theme:{color:"#0050b3"}};new window.Razorpay(P).open()}catch(v){D({title:"Error",description:v.message||"Payment failed. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 p-2 sm:p-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4",children:[e.jsx("div",{className:"flex items-center gap-3 justify-between",children:e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-money-check-dollar"}),e.jsx("span",{className:"hidden sm:inline",children:"Payment Transaction"}),e.jsx("span",{className:"sm:hidden",children:"Payment"})]})}),e.jsxs(M,{onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),"Go Back"]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-lg border border-gray-200 p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-blue-700 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600"}),"Secure Payment Gateway"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"Securely make your payment to proceed with the project."})]}),e.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 sm:p-5 bg-blue-50 text-center shadow-sm",children:[e.jsx("p",{className:"text-gray-700 text-xs sm:text-sm mb-1",children:"Amount Payable"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:[" ",(p==null?void 0:p.toLocaleString("en-IN"))||"0"]})]}),(h==null?void 0:h.status)&&e.jsxs("div",{className:"bg-gray-100 p-3 sm:p-4 rounded-lg border border-gray-300 space-y-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${h.status==="successful"?"fa-circle-check text-green-600":"fa-circle-xmark text-red-600"}`}),e.jsx("span",{className:"font-medium",children:"Status:"})]}),e.jsx("span",{className:`font-semibold ${h.status==="successful"?"text-green-700":"text-red-700"}`,children:h.status.toUpperCase()})]}),h.status==="successful"&&e.jsxs("p",{className:"text-green-700 break-words",children:[e.jsx("span",{className:"font-medium",children:"Paid At:"})," ",new Date(h.paidAt).toLocaleString()]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Order ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:h.gatewayOrderId})]}),h.gatewayPaymentId&&e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Payment ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:h.gatewayPaymentId})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:k,disabled:y||E||(h==null?void 0:h.status)==="successful",className:`w-full py-3 sm:py-4 rounded-md text-white text-base sm:text-lg font-medium transition ${y||E?"bg-blue-400 cursor-not-allowed":(h==null?void 0:h.status)==="successful"?"bg-green-600 cursor-default":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800"}`,children:(h==null?void 0:h.status)==="successful"?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-check"}),"Payment Completed"]}):y||E?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Processing Payment..."}),e.jsx("span",{className:"sm:hidden",children:"Processing..."})]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Pay Now"]})})}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center justify-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-green-600"}),"Secured by Razorpay"]})})]})})]})},qT=async(t,a)=>(await a.get(`/paymentconfirmation/getpaymentconfirmation/${t}`)).data.data,zT=async(t,a)=>(await a.put(`/paymentconfirmation/toggleconsent/${t}`)).data.data,UT=async(t,a)=>(await a.post(`/paymentconfirmation/generatepayementconsentlink/${t}`)).data.data,$T=async({projectId:t,token:a,api:l})=>(await l.post(`/paymentconfirmation/acceptconsent/${t}/${a}`)).data.data,ew=t=>{const a=["CTO","owner","staff","client"],{role:l}=Z(),r=J(l);return Fe({enabled:!!t&&!!l,queryKey:["payment-confirmation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await qT(t,r)},retry:!1,refetchOnMount:!1})},IT=()=>{const t=["CTO","owner","staff"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await zT(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},BT=()=>{const t=["CTO","owner","staff"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await UT(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},HT=()=>{const t=["CTO","owner","client"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o,token:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await $T({projectId:o,token:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},QT=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/paymentconfirmation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},GT=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/paymentconfirmation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},KT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await QT({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["payment-confirmation"]})}})},VT=()=>{const t=["owner","staff","CTO"],{role:a}=Z(),l=J(a),r=Ce();return ie({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await GT({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},YT=[{title:"Consent Form",description:"Review and accept client consent agreements.",icon:"",path:"consent"},{title:"Schedule Approval",description:"Manage milestone approvals from client & MD.",icon:"",path:"schedule"},{title:"Payment Transaction",description:"Track actual payment gateway transactions.",icon:"",path:"transaction"}],WT=()=>{var N,P;const{projectId:t,organizationId:a}=Ae(),{isMobile:l,openMobileSidebar:r}=Ke(),o=pt(),d=Me(),{data:m,isLoading:x,isError:h,refetch:p}=ew(t),{mutateAsync:g,isPending:y}=VT(),{mutateAsync:j,isPending:E}=KT();if(o.pathname.includes("/consent")||o.pathname.includes("/schedule")||o.pathname.includes("/transaction"))return e.jsx(It,{});const b=async()=>{var T,F;try{await g({projectId:t}),D({title:"Success",description:"Completion status updated successfully"}),p()}catch(z){D({title:"Error",description:((F=(T=z==null?void 0:z.response)==null?void 0:T.data)==null?void 0:F.message)||z.message||"Failed to update completion status",variant:"destructive"})}};if(x)return e.jsx(jt,{});const{assignedTo:k,timer:w,totalAmount:S,_id:v}=m||{};return e.jsxs("div",{className:"container mx-auto p-2 max-w-full max-h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-sack-dollar mr-2"})," Payment Confirmation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[80%] lg:w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:e.jsxs(M,{isLoading:y,onClick:b,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(ws,{stageNumber:7,stagePath:"paymentconfirmation",projectId:t,className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(ls,{stageName:"PaymentConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:k||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),h&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((P=(N=h==null?void 0:h.response)==null?void 0:N.data)==null?void 0:P.message)||(h==null?void 0:h.message)||"Failed to load payment confirmation data"}),e.jsx(M,{onClick:()=>p(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ns,{completedAt:w==null?void 0:w.completedAt,stageName:"paymentconfirmation",formId:v,projectId:t,deadLine:w==null?void 0:w.deadLine,startedAt:w==null?void 0:w.startedAt,refetchStageMutate:p,deadLineMutate:j,isPending:E})]}),e.jsxs(Le,{className:"p-4 mb-6 bg-blue-50 border-l-4 border-blue-600 shadow-md",children:[e.jsxs("div",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Total Payment Amount"]}),e.jsxs("p",{className:"text-3xl text-blue-700 mt-2 font-bold",children:[" ",(S==null?void 0:S.toLocaleString())||0]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:YT.map(T=>e.jsx("div",{onClick:()=>d(T.path),className:"cursor-pointer",children:e.jsxs(Le,{className:"hover:shadow-xl border-l-6 border-blue-600 transition bg-blue-100 p-4 sm:p-6 !rounded-xl h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl",children:T.icon}),e.jsx("h3",{className:"text-xl mt-3 font-bold text-blue-800",children:T.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:T.description})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsxs("span",{className:"inline-block bg-blue-600 text-white text-xs px-3 py-1 rounded",children:["Go to ",T.title]})})]})},T.path))})]})]})},XT=()=>{var P,T;const{projectId:t,organizationId:a}=Ae(),l=Me(),{data:r,isLoading:o,isError:d,refetch:m,error:x}=ew(t),h=IT(),p=BT(),g=F=>{navigator.clipboard.writeText(F),D({title:"Copied",description:"Link copied to clipboard."})},y=F=>{const z=`Please review and approve the payment consent:

${F}`,q=encodeURIComponent(z);window.open(`https://wa.me/?text=${q}`,"_blank")},j=async()=>{var F,z;try{await h.mutateAsync({projectId:t}),D({title:"Success",description:"Consent requirement updated."}),m()}catch(q){D({title:"Error",description:((z=(F=q==null?void 0:q.response)==null?void 0:F.data)==null?void 0:z.message)||q.message,variant:"destructive"})}},E=async()=>{var F,z;try{await p.mutateAsync({projectId:t}),D({title:"Success",description:"Consent link generated."}),m()}catch(q){D({title:"Error",description:((z=(F=q==null?void 0:q.response)==null?void 0:F.data)==null?void 0:z.message)||q.message,variant:"destructive"})}};if(o)return e.jsx(jt,{});if(d||!r)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((T=(P=x==null?void 0:x.response)==null?void 0:P.data)==null?void 0:T.message)||(x==null?void 0:x.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const{isConsentRequired:b,paymentClientConsent:{content:k,agreedAt:w,isAgreed:S,agreementToken:v,link:N}}=r;return e.jsxs("div",{className:"space-y-6 w-full max-w-full max-h-full sm:overflow-y-auto mx-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl  lg:text-3xl font-bold text-blue-700 flex items-center",children:[e.jsx("i",{className:"hidden sm:block fa-solid fa-handshake-angle mr-[3px] sm:mr-2"})," Client Consent"]}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(M,{isLoading:h.isPending,size:"sm",onClick:j,className:`text-sm text-white px-2 py-2 rounded ${b?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Make Consent Optional"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Optional"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Require Client Consent"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Mandatory"})]})}),e.jsx(M,{variant:"primary",onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]})]}),e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-circle-info"}),"Consent Status"]})}),e.jsx("div",{className:"p-4",children:w?e.jsxs("div",{className:"bg-green-50 p-4 rounded text-green-800 text-sm border border-green-200 shadow-sm",children:[e.jsx("span",{className:"mr-2",children:"Client Status:"}),e.jsx("strong",{className:"mr-2",children:S?e.jsxs(e.Fragment,{children:["Agreed ",e.jsx("i",{className:"fa-solid fa-circle-check text-green-600 mr-2"})]}):S===null?"Not Agreed Yet":e.jsxs(e.Fragment,{children:["Not Agreed ",e.jsx("i",{className:"fa-solid fa-circle-xmark text-red-600 mr-2"})]})}),e.jsx("br",{}),e.jsxs("span",{children:["Agreed on: ",e.jsx("strong",{children:new Date(w).toLocaleDateString()})]})]}):v?e.jsxs("div",{className:"bg-yellow-50 p-4 rounded text-yellow-800 border border-yellow-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half mr-2"}),"Consent link was generated, waiting for client to approve."]}):e.jsxs("div",{className:"bg-red-50 p-4 rounded text-red-700 border border-red-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-times-circle mr-2"}),"Client has ",e.jsx("strong",{children:"Not yet agreed"}),".",e.jsx("br",{}),"No consent link generated."]})})]}),b&&!w&&e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-link"}),"Consent Link"]})}),e.jsx("div",{className:"p-4 space-y-3",children:!v&&!N?e.jsxs(M,{isLoading:p.isPending,onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded",children:[e.jsx("i",{className:"fa-solid fa-wand-magic-sparkles mr-2"}),"Generate Consent Link"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-100",children:[e.jsx("span",{className:"text-sm truncate",children:N}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(M,{variant:"outline",className:"bg-blue-600 text-white hover:bg-blue-700 px-3 py-1 text-sm",onClick:()=>g(N),children:[e.jsx("i",{className:"fa-regular fa-copy mr-1"}),"Copy"]}),e.jsxs(M,{variant:"outline",className:"bg-green-600 text-white hover:bg-green-700 px-3 py-1 text-sm",onClick:()=>y(N),children:[e.jsx("i",{className:"fa-brands fa-whatsapp mr-1"}),"Share"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Share this link with the client to collect consent."})]})})]}),e.jsxs("div",{className:`rounded-lg shadow border border-gray-200 max-h-70 overflow-y-auto custom-scrollbar ${w?"!max-h-[480px]":""} `,children:[e.jsxs("div",{className:"bg-gray-100 px-5 py-3 text-gray-700 font-medium text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-contract"}),"Consent Form Content"]}),e.jsx("div",{className:"prose prose-sm sm:prose base p-5",style:{fontFamily:"Segoe UI, sans-serif"},dangerouslySetInnerHTML:{__html:k||"<p>No content available.</p>"}})]})]})},ZT=()=>{var b,k;const{projectId:t,token:a}=Ae(),[l,r]=A.useState(""),[o,d]=A.useState(!1),[m,x]=A.useState(!0),{mutateAsync:h,isPending:p,isError:g,error:y}=HT();if(g)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((k=(b=y==null?void 0:y.response)==null?void 0:b.data)==null?void 0:k.message)||(y==null?void 0:y.message)||"Failed to load cost estimation data"}),e.jsx(M,{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const j=async()=>{var w,S,v,N;try{const{data:P}=await Qe.get(`https://houseofram.in/api/paymentconfirmation/getpaymentconfirmation/${t}`);r(((S=(w=P==null?void 0:P.data)==null?void 0:w.paymentClientConsent)==null?void 0:S.content)||"")}catch(P){D({title:"Error",description:((N=(v=P==null?void 0:P.response)==null?void 0:v.data)==null?void 0:N.message)||"Unable to fetch consent form.",variant:"destructive"})}finally{x(!1)}},E=async()=>{var w,S;if(!(!t||!a))try{await h({projectId:t,token:a}),D({title:"Thank you!",description:"Your consent has been submitted successfully."})}catch(v){D({title:"Error",description:((S=(w=v==null?void 0:v.response)==null?void 0:w.data)==null?void 0:S.message)||"Submission failed.",variant:"destructive"})}};return A.useEffect(()=>{j()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col items-center bg-gray-50 pb-10 ",children:[e.jsx("header",{className:"w-full max-w-full mx-auto border-b border-gray-200 bg-white px-4 py-4 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-start border-black md:justify-start text-center md:text-left",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Company Logo",className:"h-14 w-14 rounded-md object-cover   border-gray-300"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-extrabold text-blue-700 leading-tight",children:yt.COMPANY_NAME}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-500 font-medium",children:"Secure Payment Consent Form"})]})]})}),e.jsxs("div",{className:"w-full bg-white p-4 max-w-3xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-white max-h-[500px] rounded-md border-2 border-[#4e51543a] custom-scrollbar  overflow-y-auto ",children:m?e.jsx("p",{className:"text-gray-600",children:"Loading form content..."}):l?e.jsx("div",{className:"prose prose-sm sm:prose max-w-none",dangerouslySetInnerHTML:{__html:l}}):e.jsx("p",{className:"text-red-500 text-sm",children:"Content not found."})}),e.jsxs("div",{className:"px-5 py-4 bg-white flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("label",{className:"flex items-start gap-2 text-sm text-gray-700 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",onChange:w=>d(w.target.checked),checked:o,className:"mt-1 w-4 h-4 accent-blue-600"}),"I confirm that I have read, understood, and accept the above terms."]}),e.jsxs(M,{disabled:!o,isLoading:p,onClick:E,className:`px-6 py-2 text-white ${o?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Submit Consent"]})]})]}),e.jsxs("footer",{className:"mt-10 w-full text-center text-sm text-gray-500 border-t border-black/70 px-4",children:[e.jsxs("div",{className:"mb-1 font-medium text-gray-600",children:[" ",new Date().getFullYear()," ",yt.COMPANY_NAME]}),e.jsx("div",{className:"text-xs",children:"All rights reserved. For queries, contact our team."})]})]})},JT=async({newPlanType:t,api:a})=>(await a.post("/subscriptionpayment/choosesubscriptionmode",{newPlanType:t})).data.data,e3=async({razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:l,api:r})=>(await r.post("/subscriptionpayment/verify",{razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:l})).data.data,t3=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({newPlanType:r})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await JT({newPlanType:r,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["organization-subscription"]})}})},s3=()=>{const t=["owner"],{role:a}=Z(),l=J(a);return ie({mutationFn:async({razorpay_order_id:r,razorpay_payment_id:o,razorpay_signature:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await e3({razorpay_order_id:r,razorpay_payment_id:o,razorpay_signature:d,api:l})},onSuccess:()=>{ke.invalidateQueries({queryKey:["organization-subscription"]})}})},tw=({openMobileSidebar:t,isMobile:a})=>{const l=pt(),[r,o]=A.useState(null),d=l.pathname.split("/").includes("organizations"),{mutateAsync:m,isPending:x}=t3(),{mutateAsync:h,isPending:p}=s3(),g=async y=>{var j,E;try{o(y);const b=await m({newPlanType:y});if(b!=null&&b.orderId){if(!await Jy("https://checkout.razorpay.com/v1/checkout.js")){D({title:"Error",description:"Razorpay failed to load",variant:"destructive"});return}const w={key:"rzp_test_Lc5DxL3uS4I6F9",amount:b.amount,currency:b.currency,name:"Vertical Living",description:"Subscription Payment",order_id:b.orderId,handler:async function(v){await h({razorpay_order_id:v.razorpay_order_id,razorpay_payment_id:v.razorpay_payment_id,razorpay_signature:v.razorpay_signature}),D({title:"Success",description:"Subscription payment verified."})},theme:{color:"#0A71F2"}};new window.Razorpay(w).open()}else D({title:"Plan Changed",description:"You have switched your plan successfully."})}catch(b){D({title:"Error",description:((E=(j=b==null?void 0:b.response)==null?void 0:j.data)==null?void 0:E.message)||b.message||"Failed to switch plan",variant:"destructive"})}finally{o(null)}};return e.jsxs("div",{className:"min-h-full bg-gray-100  flex flex-col items-center",children:[e.jsx(e.Fragment,{children:d&&a?e.jsxs("div",{className:"w-full flex items-center justify-center mb-2 py-2 px-2 bg-white",children:[e.jsx("button",{onClick:t,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"w-full",children:e.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold text-gray-800",children:"Upgrade Plan"})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-4xl w-full text-center py-5",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-[#2f303a] mb-2",children:d?"Upgrade your Plan":"Choose Plan"}),e.jsx("p",{className:"text-md text-gray-500",children:"Choose a subscription plan to match your needs"})]})})}),e.jsx("div",{className:" px-4 py-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Cb.map(y=>e.jsxs("div",{className:`group border-t-[6px] ${y.color} rounded-xl bg-white shadow-md p-6 flex flex-col justify-between transition hover:shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-2xl font-bold ${y.planNameColor}`,children:y.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Billed every 30 days"})]}),e.jsxs("div",{className:"text-center my-5",children:[e.jsx("h3",{className:`${y.price?"text-3xl":"text-xl"} font-extrabold text-gray-800`,children:y.price?` ${y.price}`:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-400",children:"/ month"})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:y.features.length>0?y.features.map((j,E)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${j.includes("")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:j.replace("","").replace("","")})]},E)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})}),y.price?e.jsx(M,{isLoading:p||x,onClick:()=>g(y.key),disabled:r===y.key||p,className:`w-full py-2 mt-auto text-white rounded-md font-medium ${r===y.key||p?"bg-gray-400 !cursor-not-allowed":y.btnColor} transition`,children:r===y.key||p?"Processing...":"Choose Plan"}):e.jsx(M,{disabled:!0,className:"w-full py-2 mt-auto text-white rounded-md font-medium bg-gray-400 hover:!bg-gray-400 !cursor-not-allowed",children:"Coming Soon"})]},y.key))})]})},Y0={ADMIN:"/login",CTO:"/login/cto",STAFF:"/login/staff",WORKER:"/login/worker",CLIENT:"/login/client"};function a3(){const[t,a]=A.useState(!1),[l,r]=A.useState(window.innerWidth<470),o=()=>{a(!0)};return A.useEffect(()=>{const d=()=>{r(window.innerWidth<470)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[l?e.jsx(ki,{labels:rc,path:Y0,isOpen:t,onClose:()=>a(!1)}):e.jsx(Ci,{path:Y0,labels:rc,icons:Sb}),e.jsx("main",{className:"flex-1 relative",children:e.jsx(It,{context:{isMobile:l,openMobileSidebar:o}})})]})}const n3=async(t,a)=>{var r;const l=await a.get(`/adminwall/${t}`);return(r=l==null?void 0:l.data)==null?void 0:r.data},l3=async(t,a,l)=>(await l.get(`/adminwall/${t}/step/${a}`)).data,r3=async(t,a,l,r)=>(await r.post(`/adminwall/${t}/step/${a}/correction`,l,{headers:{"Content-Type":"multipart/form-data"}})).data,i3=async(t,a,l,r)=>(await r.patch(`/adminwall/${t}/step/${a}/approve`,l)).data,o3=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO"];return Fe({queryKey:["adminSOP",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return n3(t,l)}})},c3=(t,a)=>{const{role:l}=Z(),r=J(l),o=["owner","staff","CTO"];return Fe({queryKey:["adminStep",t,a],queryFn:()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return l3(t,a,r)}})},d3=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,stepNumber:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return r3(r,o,d,a)}})},u3=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({projectId:r,stepId:o,payload:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return i3(r,o,d,a)}})};function m3(){const{projectId:t}=Ae(),{pathname:a}=pt(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ke(),{data:d,isLoading:m,error:x}=o3(t),h=a.endsWith("/adminwall");return m?e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500",children:"Loading..."}):x?e.jsx("div",{className:"flex justify-center items-center h-40 text-red-500",children:x==null?void 0:x.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50 overflow-y-auto custom-scrollbar",children:h?e.jsxs("div",{className:"flex-1 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl text-left sm:text-center font-bold mb-2 text-gray-800",children:[r&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Admin Wall Painting Steps"]}),e.jsx("p",{className:"text-gray-600 text-base mb-2 text-center hidden sm:block",children:"Select a step to manage its details."})]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Eb.map(p=>{var y;const g=(y=d==null?void 0:d.steps)==null?void 0:y.find(j=>(j==null?void 0:j.stepNumber)===p.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs($t,{to:`step/${g==null?void 0:g._id}/${p.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:p.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",p.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},p.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4  bg-white border-b border-gray-200 shadow z-10",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl text-blue-600 font-semibold",children:"Admin Side"}),e.jsx(M,{onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(It,{context:{isMobile:r,openMobileSidebar:o}})})]})})}function f3(){var F,z;const{projectId:t,stepId:a,stepNumber:l}=Ae(),[r,o]=A.useState(""),[d,m]=A.useState(null),[x,h]=A.useState(!1),[p,g]=A.useState(null),{mutate:y}=u3(),{mutate:j}=d3(),{data:E,isLoading:b}=c3(t,a),k=Eb.find(q=>q.stepNumber===Number(l)),w=()=>{h(!1)},S=()=>{h(!1)},v=(q,I)=>{g({url:q,alt:I})},N=()=>{g(null)},P=()=>{if((!d||(d==null?void 0:d.length)===0)&&!r){alert("Please select files or write something in notes");return}const q=new FormData;if(d&&d.length)for(let I=0;I<d.length;I++)q.append("files",d[I]);q.append("adminNote",r),j({projectId:t,stepNumber:l,formData:q})};if(b)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!k)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const T=({src:q,alt:I})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>v(q,I),children:[x&&e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gray-200 animate-pulse rounded-lg flex items-center justify-center z-10",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:q,alt:I,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400 cursor-pointer",onLoadStart:()=>h(!0),onLoad:w,onError:S}),e.jsx("button",{onClick:de=>{de.stopPropagation(),Vt({src:q,alt:I})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[p&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors z-10",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:p.url,alt:p.alt,className:"max-w-full max-h-full object-contain rounded-lg"})]}),e.jsx("div",{className:"absolute inset-0 -z-10",onClick:N})]}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${l})`," "," ",k.label]})}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:px-6 sm:py-3 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:k.rules.map((q,I)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:""}),e.jsx("span",{children:q})]},I))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Worker latest Uploads"]}),(z=(F=E==null?void 0:E.step)==null?void 0:F.workerInitialUploads)!=null&&z.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:E.step.workerInitialUploads.map((q,I)=>e.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-3 shadow-sm",children:q.type==="image"?e.jsx(T,{src:q==null?void 0:q.url,alt:(q==null?void 0:q.originalName)||`Upload ${I+1}`}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 sm:h-40 md:h-48 bg-blue-50 rounded-lg border-2 border-dashed border-blue-300",children:[e.jsx("div",{className:"text-blue-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm text-center px-2 font-medium",children:q.originalName})]})},I))}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No initial uploads found."})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Review Actions"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:()=>y({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Approve Step"]}),e.jsxs("button",{onClick:()=>y({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Reject Step"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Add Correction"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Add Correction Note"}),e.jsx("textarea",{rows:4,value:r,onChange:q=>o(q.target.value),placeholder:"Provide detailed feedback and correction instructions...",className:"w-full p-3 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Correction Images:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:q=>m(q.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:P,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Submit Correction"})]})]})]})]})]})})]})})]})}const h3=async(t,a)=>{var r;return(r=(await a.get(`/workerwall/${t}`)).data)==null?void 0:r.data},x3=async(t,a,l)=>{const r=await l.get(`/workerwall/${t}/step/${a}`);return console.log("res form getsworkerdetialapi",r),r.data},p3=async(t,a,l,r)=>(await r.post(`/workerwall/${t}/step/${a}/initial`,l,{headers:{"Content-Type":"multipart/form-data"}})).data,g3=async(t,a,l,r,o)=>(await o.post(`/workerwall/${t}/step/${a}/correction/${l}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,b3=t=>{const{role:a}=Z(),l=J(a),r=["worker","staff","owner","CTO"];return Fe({queryKey:["workerSOP",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return h3(t,l)}})},y3=(t,a)=>{const{role:l}=Z(),r=J(l),o=["worker","staff","owner","CTO"];return Fe({queryKey:["workerStep",t,a],queryFn:()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return x3(t,a,r)}})},w3=()=>{const{role:t}=Z(),a=J(t),l=["worker","staff"];return ie({mutationFn:async({projectId:r,stepNumber:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return p3(r,o,d,a)}})},v3=()=>{const{role:t}=Z(),a=J(t),l=["worker","staff"];return ie({mutationFn:async({projectId:r,stepNumber:o,correctionRound:d,formData:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return g3(r,o,d,m,a)}})};function j3(){const{projectId:t}=Ae(),{pathname:a}=pt(),l=Me(),{isMobile:r,openMobileSidebar:o}=Ke(),{data:d,isLoading:m,error:x}=b3(t),h=a.endsWith("/workerwall");return m?e.jsx("p",{className:"text-gray-600",children:"Loading..."}):x?e.jsx("p",{className:"text-red-500",children:x==null?void 0:x.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50",children:h?e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:[e.jsxs("h2",{className:"text-xl md:text-3xl text-left font-bold mb-6 sm:text-center text-gray-800",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Wall Painting Steps"]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:kb.map(p=>{var y;const g=(y=d==null?void 0:d.steps)==null?void 0:y.find(j=>(j==null?void 0:j.stepNumber)===p.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs($t,{to:`step/${g==null?void 0:g._id}/${p.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:p.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",p.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},p.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4 py-4 bg-white border-b border-gray-200 shadow z-10",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Side"]}),e.jsx(M,{onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(It,{})})]})})}function N3(){var z,q,I,de;const{projectId:t,stepId:a,stepNumber:l}=Ae(),[r,o]=A.useState(null),[d,m]=A.useState(null),[x,h]=A.useState(!1),[p,g]=A.useState(null),{data:y,isLoading:j}=y3(t,a),{mutate:E}=w3(),{mutate:b}=v3(),k=kb.find(Q=>Q.stepNumber===Number(l)),w=()=>{h(!1)},S=()=>{h(!1)},v=(Q,B)=>{g({url:Q,alt:B})},N=()=>{g(null)};if(j)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!k)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const P=()=>{if(!r||r.length===0){alert("Please select files for initial upload.");return}const Q=new FormData;for(let B=0;B<r.length;B++)Q.append("files",r[B]);E({projectId:t,stepNumber:l,formData:Q})},T=Q=>{if(!d||d.length===0){alert("Please select files for correction upload.");return}const B=new FormData;for(let ee=0;ee<d.length;ee++)B.append("files",d[ee]);b({projectId:t,stepNumber:l,correctionRound:Q,formData:B})},F=({src:Q,alt:B})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>v(Q,B),children:[x&&e.jsx("div",{className:" pointer-events-none absolute z-20 inset-0 bg-gray-900 animate-pulse rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:Q,alt:B,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400",onLoadStart:()=>h(!0),onLoad:w,onError:S}),e.jsx("button",{onClick:ee=>{ee.stopPropagation(),Vt({src:Q,alt:B})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[p&&e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:N,children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:p.url||"/placeholder.svg",alt:p.alt,className:"max-w-full max-h-full object-contain rounded-lg",onClick:Q=>Q.stopPropagation()})]})}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${l})`," "," ",k.label]}),e.jsxs("p",{className:"text-blue-600 hidden",children:["Step ",l]})]}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-6 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:k.rules.map((Q,B)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:""}),e.jsx("span",{children:Q})]},B))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Your Initial Uploads"]}),(q=(z=y==null?void 0:y.data)==null?void 0:z.initialUploads)!=null&&q.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:y.data.initialUploads.map((Q,B)=>e.jsx(e.Fragment,{children:e.jsx(F,{src:(Q==null?void 0:Q.url)||"/placeholder.svg",alt:`Initial Upload ${B+1}`},B)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No initial uploads yet."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Initial Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:Q=>o(Q.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:P,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Files"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Correction Rounds"]}),(de=(I=y==null?void 0:y.data)==null?void 0:I.correctionRounds)!=null&&de.length?e.jsx("div",{className:"space-y-6",children:y.data.correctionRounds.map(Q=>{var B,ee;return e.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-2 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-blue-800",children:["Correction Round ",Q==null?void 0:Q.roundNumber]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-2",children:[e.jsx("i",{className:"fas fa-circle-info mr-1 sm:mr-2 "}),"Admin Note:"]}),e.jsxs("p",{className:"text-blue-700",children:[Q.adminNote," "]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Admin Reference Images:"}),Q!=null&&Q.adminUploads.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:(B=Q==null?void 0:Q.adminUploads)==null?void 0:B.map((V,oe)=>e.jsx(e.Fragment,{children:e.jsx(F,{src:V.url||"/placeholder.svg",alt:`Admin Upload ${oe+1}`},oe)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No Admin uploads"})]})]}),((ee=Q.workerCorrectedUploads)==null?void 0:ee.length)>0?e.jsxs("div",{className:"mb-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Your Correction Uploads:"}),e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:Q.workerCorrectedUploads.map((V,oe)=>e.jsx(e.Fragment,{children:e.jsx(F,{src:V.url||"/placeholder.svg",alt:`Worker Correction ${oe+1}`},oe)}))})})]}):e.jsxs("div",{className:"text-center py-8 border-t border-gray-200 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No Worker correction uploads"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Correction Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:V=>m(V.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:()=>T(Q==null?void 0:Q.roundNumber),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Corrections"})]})]})]},Q.roundNumber)})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No corrections requested yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Your work is on track!"})]})]})]})})]})})]})}const S3=()=>{const{openMobileSidebar:t,isMobile:a}=Ke();return e.jsx(tw,{openMobileSidebar:t,isMobile:a})},C3=async({api:t,profileData:a})=>{try{const{data:l}=await t.put("/profile/update-profile",a);if(l.ok)return l;throw new Error((l==null?void 0:l.message)||"Profile update failed.")}catch(l){throw console.error("Profile update error:",l),l}},k3=()=>{const{role:t}=Z(),a=J(t),l=["owner","client","staff","CTO","worker"];return ie({mutationFn:async({name:r,email:o,phoneNo:d})=>{if(!t)throw new Error("Not authorized.");if(!l.includes(t))throw new Error("Role not allowed.");if(!a)throw new Error("API not found.");return await C3({api:a,profileData:{name:r,email:o,phoneNo:d}})},onSuccess:()=>{ke.invalidateQueries({queryKey:["user-profile"]})}})},W0={owner:{label:"Owner",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},staff:{label:"Staff",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},CTO:{label:"CTO",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},client:{label:"Client",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},worker:{label:"Worker",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""}};function E3(){const{openMobileSidebar:t,isMobile:a}=Ke(),{role:l,_id:r}=xs(v=>v.authStore),o=ys(),d=l==="owner"?xs(v=>v.userProfileStore):l==="staff"?xs(v=>v.staffProfileStore):l==="CTO"?xs(v=>v.CTOProfileStore):l==="client"?xs(v=>v.clientProfileStore):l==="worker"?xs(v=>v.workerProfileStore):null,m=()=>d?"userName"in d?d.userName:"staffName"in d?d.staffName:"CTOName"in d?d.CTOName:"clientName"in d?d.clientName:"workerName"in d?d.workerName:"-":"-",[x,h]=A.useState({name:m(),email:(d==null?void 0:d.email)||"",phoneNo:(d==null?void 0:d.phoneNo)||""}),{mutateAsync:p,isPending:g}=k3(),[y,j]=A.useState(!1),E=v=>{h(N=>({...N,[v.target.name]:v.target.value}))},b=async()=>{var v,N;try{const P=await p({name:x.name,email:x.email,phoneNo:x.phoneNo});D({title:"Success",description:"Completion status updated successfully"});const T={email:x.email,phoneNo:x.phoneNo,role:l,isauthenticated:!0};switch(l){case"owner":o(pc({...T,userId:P.data._id,userName:x.name}));break;case"staff":o($c({...T,staffId:P.data._id,staffName:x.name}));break;case"CTO":o(Bc({...T,CTOId:P.data._id,CTOName:x.name}));break;case"client":o(Hc({...T,clientId:P.data._id,clientName:x.name}));break;case"worker":o(Ic({...T,workerId:P.data._id,workerName:x.name}));break;default:throw new Error("Unknown role")}j(!1)}catch(P){D({title:"Error",description:((N=(v=P==null?void 0:P.response)==null?void 0:v.data)==null?void 0:N.message)||P.message||"Failed to update profile data",variant:"destructive"})}},k=()=>{h({name:m(),email:"",phoneNo:""}),j(!1)},w=W0[l]||W0.worker,S=m().charAt(0).toUpperCase();return e.jsxs("div",{className:"max-h-screen overflow-y-auto bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0 flex-1",children:[a&&e.jsx("button",{onClick:t,className:"p-2 rounded-lg border border-gray-700 hover:bg-gray-300 transition-colors lg:hidden flex-shrink-0",title:"Open Menu",children:e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-bars !text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-gray-100 rounded-lg flex-shrink-0",children:e.jsx("i",{className:"w-5 h-5 sm:w-6 sm:h-6 fas fa-user text-gray-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 truncate",children:"My Profile"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Manage your personal information"})]})]})]}),!y&&e.jsxs(M,{onClick:()=>j(!0),className:"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs sm:text-sm font-medium flex-shrink-0",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pen"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Profile"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})]})})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 px-4 sm:px-6 py-6 sm:py-8 text-white",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:flex-row",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-2xl sm:text-3xl font-bold text-white border-2 sm:border-3 border-white/30 shadow-lg flex-shrink-0",children:S}),e.jsxs("div",{className:"text-center md:text-left flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2 sm:mb-3 break-words",children:m()}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 sm:gap-3 mb-2 flex-wrap",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:w.icon}),e.jsx("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-semibold bg-white/90 text-gray-800 border border-white/30",children:w.label})]}),e.jsxs("p",{className:"text-white/80 text-xs sm:text-sm break-all",children:["ID: ",r]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[y&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pencil"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Edit Mode"})]}),e.jsx("p",{className:"text-blue-700 text-xs sm:text-sm mt-1",children:"Make your changes and click save when you're done."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-user inline mr-2"}),"Full Name"]}),e.jsx("input",{type:"text",name:"name",value:x.name,onChange:E,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-envelope inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:x.email,onChange:E,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your email address"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-phone inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phoneNo",value:x.phoneNo,onChange:E,disabled:!y,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${y?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your phone number"})]})]}),y&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200",children:[e.jsxs(M,{isLoading:g,onClick:b,disabled:g,className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm sm:text-base order-1 sm:order-none",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-save"}),"Save Changes"]}),e.jsx("button",{onClick:k,disabled:g,className:"px-4 sm:px-6 py-2.5 sm:py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium text-sm sm:text-base order-2 sm:order-none",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-shield text-gray-600"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Account Summary"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"User ID:"}),e.jsx("span",{className:"text-gray-900 font-mono text-xs sm:text-sm bg-gray-100 px-2 py-1 rounded break-all",children:r||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"Role:"}),e.jsxs("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ${w.color} w-fit`,children:[w.icon," ",w.label]})]})]})]})]})})]})}const A3=async({api:t,id:a,section:l,notes:r})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/notes/${l}`,{notes:r});if(o.ok)return o;throw new Error(o.message||"Failed to update notes")},O3=async({api:t,id:a,section:l,isRequired:r})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/boolean/${l}`,{isRequired:r});if(o.ok)return o;throw new Error(o.message||"Failed to update boolean")},R3=async({api:t,projectId:a})=>{const{data:l}=await t.get(`/prerequireties/getalldetails/${a}`);if(l.ok)return l;throw new Error(l.message||"Failed to get all PreRequireties")},T3=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({id:r,section:o,notes:d})=>{if(!t)throw new Error("Not Authorized");if(!l.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await A3({api:a,id:r,section:o,notes:d})},onSuccess:()=>{ke.invalidateQueries({queryKey:["preRequireties"]})}})},P3=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({id:r,section:o,isRequired:d})=>{if(!t)throw new Error("Not Authorized");if(!l.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await O3({api:a,id:r,section:o,isRequired:d})},onSuccess:()=>{ke.invalidateQueries({queryKey:["preRequireties"]})}})},M3=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO"];return Fe({queryKey:["preRequireties",t],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!r.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await R3({api:l,projectId:t})},retry:!1,refetchOnMount:!1})},L3=({title:t,section:a,isRequired:l,notes:r,formId:o,onUpdate:d})=>{const[m,x]=A.useState(!1),[h,p]=A.useState(r),[g,y]=A.useState(!1),j=P3(),E=T3(),b=async v=>{try{await j.mutateAsync({id:o,section:a,isRequired:v}),D({title:"Success",description:`${t} requirement updated successfully`}),d()}catch(N){D({title:"Error",description:N instanceof Error?N.message:"Failed to update requirement",variant:"destructive"})}},k=async()=>{if(h!==r){y(!0);try{await E.mutateAsync({id:o,section:a,notes:h}),D({title:"Success",description:`${t} notes updated successfully`}),d()}catch(v){D({title:"Error",description:v instanceof Error?v.message:"Failed to update notes",variant:"destructive"}),p(r)}finally{y(!1)}}},w=()=>{k()},S=v=>{v.key==="Enter"&&v.ctrlKey&&k()};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100",onClick:()=>x(!m),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`fas ${m?"fa-chevron-down":"fa-chevron-right"} text-gray-400`}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),l?e.jsxs("span",{className:"flex items-center text-green-600 text-sm",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),"Required"]}):e.jsxs("span",{className:"flex items-center text-gray-500 text-sm",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-1"}),"Not Required"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:v=>{v.stopPropagation(),b(v.target.checked)},disabled:j.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-200"} ${j.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${l?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),j.isPending&&e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})]})]})}),m&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:v=>b(v.target.checked),disabled:j.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-200"} ${j.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${l?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"This work is required for the project"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes & Additional Details"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{placeholder:`Add notes about ${t.toLowerCase()}...`,value:h,onChange:v=>p(v.target.value),onBlur:w,onKeyDown:S,className:"w-full min-h-[100px] p-3 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:g}),g&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Press Ctrl+Enter to save or click outside the text area"})]})]})})]})},F3=()=>{var g,y,j,E,b;const{projectId:t}=Ae(),{isMobile:a,openMobileSidebar:l}=Ke(),{data:r,isLoading:o,error:d,refetch:m}=M3(t),x=[{key:"modularWork",title:"Modular Work",description:"Prefabricated components and modular construction",_id:(g=r==null?void 0:r.data)==null?void 0:g._id},{key:"electricalWork",title:"Electrical Work",description:"Wiring, fixtures, and electrical installations",_id:(y=r==null?void 0:r.data)==null?void 0:y._id},{key:"plumbingWork",title:"Plumbing Work",dzescription:"Water supply, drainage, and plumbing fixtures",_id:(j=r==null?void 0:r.data)==null?void 0:j._id},{key:"civilWork",title:"Civil Work",description:"Structural work, foundations, and civil engineering",_id:(E=r==null?void 0:r.data)==null?void 0:E._id},{key:"decorationWork",title:"Decoration Work",description:"Interior design, painting, and finishing touches",_id:(b=r==null?void 0:r.data)==null?void 0:b._id}],h=()=>{m()};if(o)return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading project prerequisites..."})]})});if(d)return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:d instanceof Error?d.message:"Failed to load prerequisites"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Try Again"})})]});if(!(r!=null&&r.data))return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-yellow-600 mr-2"}),e.jsx("p",{className:"text-yellow-800",children:"No prerequisites data found for this project. Please ensure the project exists and try again."})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh"})})]});const p=r.data;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"max-h-full overflow-y-auto mx-auto px-4 py-4 custom-scrollbar",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center hidden sm:block space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-700",children:"Project Prerequisites"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Configure the required work types for your project. These prerequisites must be completed before proceeding to the 14-step process."})]}),e.jsx("header",{className:"block sm:hidden space-y-2",children:e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Project Prerequisites"]})}),e.jsx("div",{className:"space-y-4",children:x.map(k=>{const w=p[k.key];return e.jsx(L3,{title:k.title,section:k.key,isRequired:(w==null?void 0:w.isRequired)||!1,notes:(w==null?void 0:w.notes)||"",formId:k._id,onUpdate:h},k.key)})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prerequisites Summary"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:x.map(k=>{const w=p[k.key],S=(w==null?void 0:w.isRequired)||!1;return e.jsxs("div",{className:"flex items-center space-x-2",children:[S?e.jsx("i",{className:"fas fa-check-circle text-green-600"}):e.jsx("i",{className:"fas fa-exclamation-circle text-gray-400"}),e.jsx("span",{className:`text-sm ${S?"text-green-600 font-medium":"text-gray-500"}`,children:k.title})]},k.key)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(M,{variant:"ghost",onClick:()=>m(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh Data"}),e.jsx(M,{onClick:()=>{D({title:"Success",description:"Prerequisites configured successfully. You can now proceed to the 14-step process."})},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Continue to Next Steps"})]})]})})})},D3=async(t,a,l,r,o)=>{const d=new FormData;Object.keys(l).forEach(x=>{const h=l[x];h!==void 0&&(Array.isArray(h)?h.forEach(p=>d.append(x,p)):d.append(x,h))}),r.forEach(x=>{d.append("images",x)});const{data:m}=await o.post(`/modularunit/create/${t}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});if(!m.ok)throw new Error(m.message);return m.data},_3=async(t,a,l,r,o)=>{const d=new FormData;Object.keys(l).forEach(x=>{const h=l[x];h!==void 0&&(Array.isArray(h)?h.forEach(p=>d.append(x,p)):d.append(x,h))}),r.forEach(x=>{d.append("images",x)}),console.log("formvalues form api",d);const{data:m}=await o.put(`/modularunit/update/${t}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});if(!m.ok)throw new Error(m.message);return m.data},q3=async(t,a,l,r)=>{console.log(a);const{data:o}=await r.delete(`/modularunit/delete/${t}/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},z3=async(t,a,l,r={},o="")=>{const d=new URLSearchParams;Object.entries(r).forEach(([p,g])=>{g.length>0&&d.append(p,g.join(","))}),o&&d.append("searchQuery",o);const m=d.toString(),x=`/modularunit/getunits/${a}/${t}${m?"?"+m:""}`,{data:h}=await l.get(x);if(!h.ok)throw new Error(h.message);return h.data},U3=async(t,a)=>{const{data:l}=await a.get(`/modularunit/getallunits/${t}`);if(!l.ok)throw new Error(l.message);return l.data},$3=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({organizationId:r,unitType:o,formValues:d,files:m})=>{if(!t)throw new Error("Role missing");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return console.log("formvalues form hooks",d),await D3(r,o,d,m,a)},onSuccess:(r,{unitType:o})=>{ke.invalidateQueries({queryKey:["modularUnits",o]})}})},I3=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({unitType:r,unitId:o,formValues:d,files:m})=>{if(!t)throw new Error("Role missing");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await _3(r,o,d,m,a)},onSuccess:(r,{unitType:o})=>{ke.invalidateQueries({queryKey:["modularUnits",o]})}})},B3=()=>{const{role:t}=Z(),a=J(t),l=["owner","staff","CTO"];return ie({mutationFn:async({organizationId:r,unitType:o,unitId:d})=>{if(!t)throw new Error("Role missing");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await q3(r,o,d,a)},onSuccess:(r,{unitType:o})=>{ke.invalidateQueries({queryKey:["modularUnits",o]})}})},H3=(t,a,l={},r="")=>{const{role:o}=Z(),d=J(o),m=["owner","staff","CTO","client"];return Fe({queryKey:["modularUnits",t,a,l,r],queryFn:async()=>{if(!o)throw new Error("Role missing");if(!m.includes(o))throw new Error("Not allowed to make this API call");if(!d)throw new Error("API instance not found for role");return await z3(t,a,d,l,r)},retry:!1,refetchOnMount:!1})},Q3=t=>{const{role:a}=Z(),l=J(a),r=["owner","staff","CTO","client"];return Fe({queryKey:["mixedUnits",t],queryFn:async()=>{if(!a)throw new Error("Role missing");if(!r.includes(a))throw new Error("Not allowed to make this API call");if(!l)throw new Error("API instance not found for role");return await U3(t,l)},retry:!1,refetchOnMount:!1})},Cc={showcase:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing","Floor-to-Ceiling","Corner Showcase","Floating Showcase"]},length:{label:"Length",type:"select",options:["600 mm","900 mm","1200 mm","1500 mm","1800 mm","2100+ mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm","600 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF","HDHMR","Particle Board","Engineered Wood"]},frontMaterial:{label:"Front Material",type:"select",options:["Laminate","Acrylic","PU","Membrane","Glass","Aluminium + Glass"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured","Wood Grain","Veneer","Lacquered"]},storageType:{label:"Storage Type",type:"select",options:["Open Display","Closed Shutters","Mixed Storage"]},shutterType:{label:"Shutter Type",type:"select",options:["Glass","Wooden","Aluminium-Framed Glass","Mirror Finish"]},glassVisibility:{label:"Glass Visibility",type:"select",options:["Clear","Frosted","Tinted"]},lighting:{label:"Lighting",type:"select",options:["Spotlights","Strip Lights","Warm Backlight","No Lighting"]},installationType:{label:"Installation Type",type:"select",options:["Floor Mounted","Wall Mounted","Hybrid"]},usagePurpose:{label:"Usage Purpose",type:"select",options:["Living Room","Dining Area","Hallway","Commercial Display","Puja Showcase"]},addOns:{label:"Add-ons",type:"checkbox",options:["Mirror Back Panel","Decorative Handles","Soft-Close Hinges","Lockable Sections"]},compartments:{label:"Compartments",type:"select",options:["1 Door","2 Doors","3+ Doors","14 Drawers","15+ Shelves"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["5,00010,000","10,00025,000","25,00050,000","50,000+"]},price:{label:"Price",type:"number",required:!0}},falseCeiling:{name:{label:"Name",type:"text",required:!0},ceilingType:{label:"Ceiling Type",type:"select",options:["Pop","Gypsum","PVC","Wooden","Metal"]},lightingType:{label:"Lighting Type",type:"select",options:["Spotlight","LED Strip","Cove","Pendant"]},roomType:{label:"Room Type",type:"select",options:["Living Room","Bedroom","Hallway","Commercial"]},materialType:{label:"Material Type",type:"select",options:["Gypsum","POP","PVC","Wood"]},designStyle:{label:"Design Style",type:"select",options:["Modern","Traditional","Minimalistic"]},colorTheme:{label:"Color Theme",type:"select",options:["White","Beige","Custom"]},levels:{label:"Levels",type:"select",options:["Single","Double","Multi"]},edgeProfile:{label:"Edge Profile",type:"select",options:["Straight","Curved"]},fixtureIntegration:{label:"Fixture Integration",type:"select",options:["Fan","Light","AC Vent"]},panelType:{label:"Panel Type",type:"select",options:["Flat","Recessed"]},shapeGeometry:{label:"Shape & Geometry",type:"select",options:["Rectangular","Circular","Custom"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},installationComplexity:{label:"Installation Complexity",type:"select",options:["Low","Medium","High"]},budgetRange:{label:"Budget Range",type:"select",options:["5,00010,000","10,00025,000","25,000+"]},price:{label:"Price",type:"number",required:!0}},shoeRack:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Open","Closed","Bench Style"]},length:{label:"Length",type:"select",options:["600 mm","900 mm","1200 mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm"]},height:{label:"Height",type:"select",options:["600 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF","Particle Board"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Laminate","Acrylic"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Pull"]},shoeCapacity:{label:"Shoe Capacity",type:"select",options:["6 Pairs","10 Pairs","15 Pairs+"]},ventilation:{label:"Ventilation",type:"select",options:["Louvered","Mesh"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},usagePurpose:{label:"Usage Purpose",type:"select",options:["Home","Office"]},addOns:{label:"Add-ons",type:"checkbox",options:["Soft-Close Hinges","Locks"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["5,00010,000","10,00025,000","25,000+"]},price:{label:"Price",type:"number",required:!0}},wardrobe:{name:{label:"Name",type:"text",required:!0},wardrobeType:{label:"Wardrobe Type",type:"select",options:["Sliding","Hinged","Walk-in"]},length:{label:"Length",type:"select",options:["1200 mm","1800 mm","2400 mm+"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["2100 mm","2400 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Laminate","Acrylic"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Handle-less"]},internalAccessories:{label:"Internal Accessories",type:"checkbox",options:["Pull-out Basket","Tie Rack"]},mirrorProvision:{label:"Mirror Provision",type:"select",options:["Yes","No"]},lighting:{label:"Lighting",type:"select",options:["LED Strip","Spotlight"]},lockType:{label:"Lock Type",type:"select",options:["Central Lock","Individual Lock"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000"]},price:{label:"Price",type:"number",required:!0}},tv:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing","Panel Unit"]},length:{label:"Length",type:"select",options:["1200 mm","1500 mm","1800 mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm"]},height:{label:"Height",type:"select",options:["1200 mm","1500 mm"]},panelMaterial:{label:"Panel Material",type:"select",options:["Plywood","MDF","Particle Board"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed","Mixed"]},shutterType:{label:"Shutter Type",type:"select",options:["Glass","Wooden","Aluminium-Framed"]},openShelves:{label:"Open Shelves",type:"select",options:["Yes","No"]},lighting:{label:"Lighting",type:"select",options:["Spotlights","Strip Lights","None"]},addOns:{label:"Add-ons",type:"checkbox",options:["Cable Manager","Sound Bar Mount"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000"]},price:{label:"Price",type:"number",required:!0}},BedCot:{name:{label:"Name",type:"text",required:!0},bedType:{label:"Bed Type",type:"select",options:["Single","Double","Queen","King"]},length:{label:"Length",type:"select",options:["1800 mm","2000 mm"]},breadth:{label:"Breadth",type:"select",options:["900 mm","1200 mm","1500 mm"]},height:{label:"Height",type:"select",options:["450 mm","600 mm"]},frameMaterial:{label:"Frame Material",type:"select",options:["Wood","Metal","Engineered Wood"]},headboardMaterial:{label:"Headboard Material",type:"select",options:["Plywood","Upholstered","MDF"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy","Textured"]},storageType:{label:"Storage Type",type:"select",options:["Box Storage","Drawer Storage","No Storage"]},addOns:{label:"Add-ons",type:"checkbox",options:["Hydraulic Lift","LED Headboard"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Knock Down","Pre-assembled"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000","50,000+"]},price:{label:"Price",type:"number",required:!0}},kitchenCabinet:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Base","Wall","Tall Unit"]},internalLayout:{label:"Internal Layout",type:"select",options:["Shelf","Drawer","Pull-out"]},compartments:{label:"Compartments",type:"select",options:["1 Door","2 Doors","3+ Doors"]},featureTags:{label:"Feature Tags",type:"checkbox",options:["Soft Close","Hydraulic Hinges"]},dimensions:{label:"Dimensions",type:"text"},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF","Particle Board"]},doorsMaterial:{label:"Doors Material",type:"select",options:["Laminate","Acrylic","PU"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured"]},ssHardwareBrand:{label:"SS Hardware Brand",type:"select",options:["Hettich","Hafele"]},visibilityType:{label:"Visibility Type",type:"select",options:["Open","Closed"]},positionUsage:{label:"Position Usage",type:"select",options:["Corner","Straight","L-Shape"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},designCollection:{label:"Design Collection",type:"select",options:["Modern","Classic","Contemporary"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["25,00050,000","50,000+"]},price:{label:"Price",type:"number",required:!0}},studyTable:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing"]},length:{label:"Length",type:"select",options:["900 mm","1200 mm","1500 mm"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["750 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF"]},tableTopMaterial:{label:"Table Top Material",type:"select",options:["Laminate","Acrylic","Wood"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},addOns:{label:"Add-ons",type:"checkbox",options:["Cable Tray","Drawer Lock"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Knock Down","Pre-assembled"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["5,00010,000","10,00025,000"]},price:{label:"Price",type:"number",required:!0}},crockery:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Base","Wall","Tall Unit"]},length:{label:"Length",type:"select",options:["900 mm","1200 mm","1500 mm"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["750 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Glass","Wooden"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte"]},glassType:{label:"Glass Type",type:"select",options:["Clear","Frosted"]},lighting:{label:"Lighting",type:"select",options:["Spotlight","Strip Lights"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Pull"]},addOns:{label:"Add-ons",type:"checkbox",options:["Soft-Close Hinges","Locks"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000"]},price:{label:"Price",type:"number",required:!0}}},sw=({unit:t,onEdit:a})=>{var x,h,p;const[l,r]=A.useState(!1),{mutateAsync:o,isPending:d}=B3();console.log("unit form deelete",t);const m=async()=>{var g,y;try{if(!window.confirm("Are you sure you want to delete this unit?"))return;await o({unitId:t._id,unitType:t.category,organizationId:t.organizationId}),D({title:"Success",description:"Product deleted successfully"})}catch(j){D({title:"Error",description:((y=(g=j==null?void 0:j.response)==null?void 0:g.data)==null?void 0:y.message)||(j==null?void 0:j.message)||"Failed to delete",variant:"destructive"})}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100 hover:border-blue-200",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200",children:[(h=(x=t.images)==null?void 0:x[0])!=null&&h.url&&!l?e.jsx("img",{src:t.images[0].url||"/placeholder.svg",alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:()=>r(!0)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-image text-gray-400 text-3xl mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No Image"})]})}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx("div",{className:"flex gap-2"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm",children:t==null?void 0:t.category})}),t.price&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"bg-green-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign"}),t.price.toLocaleString()]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-base mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:t.name||"Unnamed Product"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("i",{className:"fas fa-hashtag text-gray-400 text-xs"}),e.jsx("p",{className:"text-xs text-gray-500 font-mono truncate",children:t.customId||t._id})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-tag text-blue-500 text-xs"}),"Category"]}),e.jsx("span",{className:"font-medium text-gray-900 capitalize truncate ml-2",children:(t==null?void 0:t.category)||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign text-green-500 text-xs"}),"Price"]}),e.jsxs("span",{className:"font-bold text-green-600",children:["",((p=t.price)==null?void 0:p.toLocaleString())||"N/A"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[a&&e.jsxs(M,{onClick:()=>a(t),className:"flex-1 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 hover:border-blue-300 py-2 px-3 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(M,{variant:"danger",onClick:m,disabled:d,className:"flex-1 bg-red-600 text-white  py-2 px-3 rounded-lg transition-all disabled:opacity-50 text-sm",children:[e.jsx("i",{className:`fas ${d?"fa-spinner fa-spin":"fa-trash"} mr-1`}),d?"Deleting...":"Delete"]})]})]})]})};function G3(){const{isMobile:t,openMobileSidebar:a}=Ke(),{organizationId:l}=Ae(),[r,o]=A.useState(""),[d,m]=A.useState(""),[x,h]=A.useState(!1),p=Me(),g=pt(),{data:y,isLoading:j,isError:E}=Q3(l);if(j)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Loading products..."})]})});const b=g.pathname.includes("add")||g.pathname.includes("category"),k=Object.keys(Cc).filter(w=>w.toLowerCase().includes(d.toLowerCase()));return e.jsx(e.Fragment,{children:b?e.jsx("div",{className:"h-screen bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto",children:e.jsx(It,{context:{isMobile:t,openMobileSidebar:a}})}):e.jsxs("div",{className:"h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex flex-col overflow-hidden ",children:[e.jsx("div",{className:"bg-white shadow-lg border-b z-40 flex-shrink-0",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex ",children:[t&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx("i",{className:"fas fa-cube text-white text-xl"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl  font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Product Catalog"}),e.jsx("p",{className:"text-sm text-gray-500 sm:block hidden",children:"Manage your modular units"})]})]}),e.jsxs("div",{className:"flex sm:none",children:[e.jsxs(M,{onClick:()=>p("add"),className:"hidden md:flex  sm:px-4 py-2  items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-plus"}),"Add ",e.jsx("span",{className:"hidden sm:inline",children:"New Product"})]}),e.jsx("button",{onClick:()=>h(!x),className:"md:hidden border-2 border-gray-300  ml-1 cursor-pointer p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors",children:e.jsx("i",{className:"fas fa-box text-lg text-blue-600"})})]})]})})}),e.jsx("div",{className:"flex-1 flex overflow-hidden ",children:e.jsxs("div",{onClick:()=>h(!1),className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex gap-6 w-full overflow-hidden",children:[e.jsxs("aside",{className:`
                  fixed md:static inset-y-0 left-0 !z-50 w-80 md:w-72 bg-white md:bg-white/90 md:backdrop-blur-sm
                  transform ${x?"translate-x-0":"-translate-x-full"} md:translate-x-0
                  transition-transform duration-300 ease-in-out md:transition-none
                  shadow-2xl md:shadow-lg rounded-r-2xl md:rounded-2xl border-r md:border
                  flex flex-col md:h-full
                `,children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:hidden",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Categories"}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:d,onChange:w=>m(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-gray-50 focus:bg-white"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4 flex items-center gap-2 sticky top-0 bg-white py-2",children:[e.jsx("i",{className:"fas fa-layer-group"}),"Product Categories"]}),e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${r===""?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{o(""),h(!1)},children:[e.jsx("i",{className:"fas fa-th-large"}),e.jsx("span",{className:"font-medium",children:"All Products"}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${r===""?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:(y==null?void 0:y.length)||0})]}),k.map(w=>{var S;return e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${r===w?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{p(`category/${w}`),h(!1)},children:[e.jsx("i",{className:"fas fa-cube"}),e.jsx("span",{className:"font-medium capitalize",children:w}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${r===w?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:((S=y==null?void 0:y.filter(v=>v.unitType===w))==null?void 0:S.length)||0})]},w)})]})}),e.jsx("div",{className:"flex-shrink-0 p-2 sm:p-6 border-t md:hidden",children:e.jsxs(M,{onClick:()=>{p("add"),h(!1)},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-4 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus"}),"Add New Product"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 mb-3",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl sm:p-6 p-2 px-4 shadow-lg border",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between ",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 sm:mb-2 mb-1",children:r?`${r} Products`:"All Products"}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-info-circle"}),y!=null&&y.length?`${y.length} products available`:"No products found"]})]})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto ",children:j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):E?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(y==null?void 0:y.length)===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-cube text-gray-400 text-5xl mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first product to the catalog."}),e.jsxs(M,{onClick:()=>p("add"),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Product"]})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 pb-6 overflow-y-auto",children:y==null?void 0:y.map(w=>e.jsx(e.Fragment,{children:e.jsx(sw,{unit:w},`${w._id}-5`)}))})})})]})]})})]})})}const K3=["_id","organizationId","customId","images","createdAt","updatedAt","__v"];function aw({unitToEdit:t,setUnitToEdit:a}){const l=Me(),{organizationId:r}=Ae(),[o,d]=A.useState((t==null?void 0:t.category)||"showcase"),m=Cc[o],[x,h]=A.useState(t||{}),[p,g]=A.useState([]),{mutateAsync:y,isPending:j}=$3(),{mutateAsync:E,isPending:b}=I3();if(!m)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-red-200 max-w-md",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4 block text-center"}),e.jsx("p",{className:"text-red-600 text-center font-semibold",children:"Invalid unit type selected."})]})});const k=(T,F)=>{h(z=>({...z,[T]:F}))},w=T=>{T.target.files&&g(Array.from(T.target.files))},S=T=>Object.fromEntries(Object.entries(T).filter(([F])=>!K3.includes(F))),v=async T=>{var F,z;T.preventDefault();try{if(!x.name)throw new Error("Name is required");if(!x.price||x.price<0)throw new Error("Enter valid price");console.log("formValues",x);const q={...x,category:o};if(console.log("formValues after updated",q),t){const I=S(q);await E({unitId:t._id,formValues:I,unitType:o,files:p}),D({title:"Success",description:"Product updated successfully"})}else await y({organizationId:r,unitType:o,formValues:q,files:p}),D({title:"Success",description:"Product added successfully"})}catch(q){D({title:"Error",description:((z=(F=q==null?void 0:q.response)==null?void 0:F.data)==null?void 0:z.message)||(q==null?void 0:q.message)||"operation failed",variant:"destructive"})}},N=T=>{d(T),h({}),g([])},P=()=>{a&&a(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-lg border-b",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 lg:px-8 sm:py-6 py-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between sm:gap-4 gap-2",children:[e.jsxs("div",{className:"flex items-center sm:gap-4 gap-2",children:[e.jsxs("div",{onClick:()=>l(-1),className:"flex gap-2 items-center cursor-pointer rounded-full hover:bg-gray-100 p-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("p",{className:"",children:"Back"})]}),e.jsx("div",{className:"bg-gradient-to-r  from-blue-600 to-purple-600 p-3 rounded-xl",children:e.jsx("i",{className:`fas ${t?"fa-edit":"fa-plus"} text-white text-xl`})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:[t?"Edit":"Add New"," ",o," ",e.jsx("span",{className:"hidden sm:inline",children:"Unit"})]}),e.jsx("p",{className:"text-gray-600 mt-1 hidden sm:block",children:t?"Update product information":"Create a new product in your catalog"})]})]}),!t&&e.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 p-4 rounded-xl",children:[e.jsxs("label",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-layer-group text-blue-600"}),"Select Unit Type"]}),e.jsxs(Je,{value:o,onValueChange:N,children:[e.jsx(Xe,{className:"min-w-[200px] bg-white",children:e.jsx(et,{placeholder:"Choose Unit Type",selectedValue:o})}),e.jsx(Ze,{children:Object.keys(Cc).map(T=>e.jsx(ye,{value:T,children:e.jsx("span",{className:"capitalize",children:T})},T))})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border p-8",children:e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Object.entries(m).map(([T,F])=>{var z,q;return F.label==="Budget Range"||F.label==="Price Range"?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(fe,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-500"}),F.label,F.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),F.type==="text"&&e.jsx(ce,{value:x[T]||"",onChange:I=>k(T,I.target.value),required:F.required,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",placeholder:`Enter ${F.label.toLowerCase()}`}),F.type==="number"&&e.jsx(ce,{type:"number",value:x[T]||"",onChange:I=>k(T,+I.target.value),required:F.required,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",placeholder:`Enter ${F.label.toLowerCase()}`}),F.type==="select"&&e.jsxs(Je,{onValueChange:I=>k(T,I),value:x[T]||"",children:[e.jsx(Xe,{className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",children:e.jsx(et,{placeholder:`Select ${F.label}`,selectedValue:x[T]})}),e.jsx(Ze,{children:(z=F.options)==null?void 0:z.map(I=>e.jsx(ye,{value:I,children:I},I))})]}),F.type==="checkbox"&&e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 max-h-40 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:(q=F.options)==null?void 0:q.map(I=>{var de;return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-white rounded-lg p-2 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:((de=x[T])==null?void 0:de.includes(I))||!1,onChange:Q=>{const B=Q.target.checked;h(ee=>{const V=ee[T]||[];return{...ee,[T]:B?[...V,I]:V.filter(oe=>oe!==I)}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700",children:I})]},I)})})})]},T)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(fe,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-images text-blue-500"}),"Upload Images"]}),e.jsx("div",{className:"relative",children:e.jsx(ce,{type:"file",multiple:!0,accept:"image/*",onChange:w,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),p.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-check-circle"}),p.length," file(s) selected"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 pt-6 border-t border-gray-200",children:[e.jsx(M,{type:"submit",disabled:j||b,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-4 rounded-xl text-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:j||b?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`fas ${t?"fa-save":"fa-plus"} mr-2`}),t?"Update Unit":"Create Unit"]})}),t&&e.jsx(M,{variant:"secondary",className:" px-12 py-4 rounded-xl text-lg ",onClick:P,children:"Cancel"})]})]})})})]})}function V3(){const{isMobile:t,openMobileSidebar:a}=Ke(),{unitType:l,organizationId:r}=Ae(),[o,d]=A.useState({}),[m,x]=A.useState({}),[h,p]=A.useState(""),[g,y]=A.useState(""),[j,E]=A.useState(!1),{data:b,isLoading:k,isError:w}=H3(l,r,m,g),[S,v]=A.useState(null),N=Object.entries(Cc[l]||{}).filter(([z,q])=>q.type==="select"||q.type==="checkbox"),P=()=>{y(h)},T=z=>{z.key==="Enter"&&P()},F=Object.values(o).flat().length;return e.jsx(e.Fragment,{children:S?e.jsx(aw,{unitToEdit:S,setUnitToEdit:v}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-blue-800 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 sm:mb-0",children:[t&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white/20 rounded-xl",children:e.jsx("i",{className:"fas fa-cube text-xl"})}),e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold capitalize",children:[l," Collection"]}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Premium ",l," products"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx("i",{className:"fas fa-box text-sm"}),e.jsxs("span",{className:"text-sm font-medium",children:[(b==null?void 0:b.length)||0," Products"]})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border mb-6 sticky top-4 z-30",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-between",children:e.jsxs("div",{className:"flex-1 flex gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"}),e.jsx(ce,{placeholder:"Search by name, id, etc.",value:h,onChange:z=>p(z.target.value),onKeyDown:T,className:"pl-10 pr-4 py-2 rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white text-sm"})]}),e.jsxs(M,{isLoading:k,onClick:P,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-search mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]}),e.jsxs(M,{variant:"primary",onClick:()=>E(z=>!z),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-filter"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),F>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:F})]})]})})}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>E(!1)}),e.jsx("div",{className:"fixed inset-x-8  sm:top-32 top-13 bottom-4 sm:inset-x-8 md:left-1/2 md:transform md:-translate-x-1/2 md:w-full md:max-w-4xl bg-white rounded-2xl shadow-2xl border z-50 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-sliders-h text-blue-600"}),"Advanced Filters"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[F>0&&e.jsxs(M,{variant:"danger",onClick:()=>d({}),className:"bg-red-600 text-white px-3 py-1 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Clear All (",F,")"]}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times text-lg"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:N.map(([z,q])=>{var I;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-500"}),q.label]}),q.type==="select"&&q.options&&e.jsxs(Je,{onValueChange:de=>d(Q=>({...Q,[z]:de?[de]:[]})),children:[e.jsx(Xe,{className:"w-full rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500",children:e.jsx(et,{placeholder:"All",selectedValue:((I=o[z])==null?void 0:I[0])||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"All"}),q.options.map(de=>e.jsx(ye,{value:de,children:de},de))]})]}),q.type==="checkbox"&&q.options&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-32 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:q.options.map(de=>{var Q;return e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white rounded p-1 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:((Q=o[z])==null?void 0:Q.includes(de))||!1,onChange:B=>{d(ee=>{const V=ee[z]||[];return{...ee,[z]:B.target.checked?[...V,de]:V.filter(oe=>oe!==de)}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700 text-sm",children:de})]},de)})})})]},z)})})}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(M,{isLoading:k,onClick:()=>{x(o),E(!1)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-lg shadow-lg",children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Apply Filters"]})})})]})})]}),k?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):w?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-2xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(b==null?void 0:b.length)===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-search text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No Products Found"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["No ",l," products match your current filters."]}),e.jsxs(M,{onClick:()=>{d({}),x({}),p(""),y("")},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-refresh mr-2"}),"Clear Filters"]})]})}):e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:b==null?void 0:b.map(z=>e.jsx(sw,{unit:z,onEdit:v},z._id))})]})]})})}function Y3(){const[t,a]=A.useState(null),[l,r]=A.useState(null),{isauthenticated:o}=xs(d=>d.authStore);return $y(),e.jsx(e.Fragment,{children:e.jsxs(AN,{children:[e.jsx(we,{path:"/",element:o?e.jsx(zm,{to:"/organizations",replace:!0}):e.jsx(Yg,{})}),e.jsxs(we,{path:"/login",element:e.jsx(a3,{}),children:[e.jsx(we,{index:!0,element:e.jsx(M0,{})})," ",e.jsx(we,{path:"cto",element:e.jsx($0,{})}),e.jsx(we,{path:"staff",element:e.jsx(q0,{})}),e.jsx(we,{path:"worker",element:e.jsx(U0,{})}),e.jsx(we,{path:"client",element:e.jsx(I0,{})})]}),e.jsx(we,{path:"/home",element:e.jsx(Yg,{})}),e.jsx(we,{path:"/unauthorized",element:e.jsx(Iy,{})}),e.jsx(we,{path:"/stafflogin",element:e.jsx(q0,{})}),e.jsx(we,{path:"/login",element:e.jsx(M0,{})}),e.jsx(we,{path:"/workerlogin",element:e.jsx(U0,{})}),e.jsx(we,{path:"/ctologin",element:e.jsx($0,{})}),e.jsx(we,{path:"/clientlogin",element:e.jsx(I0,{})}),e.jsx(we,{path:"/staffregister",element:e.jsx(DE,{})}),e.jsx(we,{path:"/workerregister",element:e.jsx(_E,{})}),e.jsx(we,{path:"/ctoregister",element:e.jsx($E,{})}),e.jsx(we,{path:"/clientregister",element:e.jsx(IE,{})}),e.jsx(we,{path:"/subscription",element:e.jsx(tw,{})}),e.jsx(we,{path:"/organizations",element:e.jsx(Pe,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(ME,{})})}),e.jsxs(we,{path:"/organizations/:organizationId",element:e.jsx(Pe,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(UE,{})}),children:[e.jsx(we,{index:!0,element:e.jsx(Pe,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(FE,{})})}),e.jsx(we,{path:"invitestaff",element:e.jsx(Pe,{allowedRoles:["CTO","owner","staff"],children:e.jsx(qE,{})})}),e.jsx(we,{path:"invitecto",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(zE,{})})}),e.jsx(we,{path:"subscriptionplan",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(S3,{})})}),e.jsx(we,{path:"userprofile",element:e.jsx(Pe,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(E3,{})})}),e.jsxs(we,{path:"modularunits",element:e.jsx(Pe,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(G3,{})}),children:[e.jsx(we,{path:"add",element:e.jsx(Pe,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(aw,{})})}),e.jsx(we,{path:"category/:unitType",element:e.jsx(Pe,{allowedRoles:["owner","staff","CTO","client"],children:e.jsx(V3,{})})})]})]}),e.jsx(we,{path:"/organizations/:organizationId/projects",element:e.jsx(fk,{projectId:t,setProjectId:a}),children:e.jsx(we,{index:!0,element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(Fk,{})})})}),e.jsxs(we,{path:"/:organizationId/projectdetails/:projectId",element:e.jsx(Pe,{allowedRoles:["owner","client","CTO","worker","staff"],children:e.jsx(pk,{projectId:t,setProjectId:a,setOrganizationId:r,organizationId:l})}),children:[e.jsx(we,{path:"prerequireties",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(F3,{})})}),e.jsx(we,{path:"workers",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(z0,{})})}),e.jsx(we,{path:"inviteclient",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(BE,{})})}),e.jsx(we,{path:"requirementform",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(LA,{})})}),e.jsx(we,{path:"sitemeasurement",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(d4,{})})}),e.jsx(we,{path:"sampledesign",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(E4,{})})}),e.jsx(we,{path:"technicalconsultant",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(q4,{})})}),e.jsx(we,{path:"materialselection",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(nO,{})}),children:e.jsx(we,{path:"materialroom/:roomId",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(rO,{})})})}),e.jsxs(we,{path:"costestimation",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(PO,{})}),children:[e.jsx(we,{path:"roomdetails/:roomId",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(LO,{})})}),e.jsx(we,{path:"roomdetails/labour",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(DO,{})})})]}),e.jsxs(we,{path:"paymentconfirmation",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(WT,{})}),children:[e.jsx(we,{path:"consent",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(XT,{})})}),e.jsx(we,{path:"schedule",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(RT,{})})}),e.jsx(we,{path:"transaction",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(_T,{})})})]}),e.jsx(we,{path:"ordermaterial",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(lR,{})}),children:e.jsx(we,{path:"ordermaterialroom/:roomKey",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(oR,{})})})}),e.jsx(we,{path:"materialarrival",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(ER,{})}),children:e.jsx(we,{path:"materialarrivalroom/:roomKey",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(AR,{})})})}),e.jsxs(we,{path:"workmainschedule",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(i6,{})}),children:[e.jsx(we,{path:"workschedule/:sectionId",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(o6,{})})}),e.jsx(we,{path:"dailyschedule/:sectionId",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(c6,{})})})]}),e.jsx(we,{path:"installation",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(j6,{})}),children:e.jsx(we,{path:"installationroom/:roomkey",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(N6,{})})})}),e.jsxs(we,{path:"qualitycheck",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff"],children:e.jsx(_6,{})}),children:[e.jsx(we,{path:"qualitycheckroom/:roomkey",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(q6,{})})}),e.jsx(we,{path:"qualitycheckroom/adminwall",element:e.jsx(m3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(f3,{})})}),e.jsx(we,{path:"qualitycheckroom/workerwall",element:e.jsx(j3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(N3,{})})})]}),e.jsx(we,{path:"cleaning",element:e.jsx(tT,{}),children:e.jsx(we,{path:"cleaningroom/:roomId",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(sT,{})})})}),e.jsx(we,{path:"projectdelivery",element:e.jsx(Pe,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(gT,{})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(we,{path:"/phase",element:e.jsx(Pe,{allowedRoles:["owner"],children:e.jsx(D2,{})})}),e.jsx(we,{path:"/issues",element:e.jsx(Pe,{allowedRoles:["owner"],children:e.jsx(F2,{})})}),e.jsx(we,{path:"/tasks",element:e.jsx(Pe,{allowedRoles:["owner"],children:e.jsx(_2,{})})})]}),e.jsx(we,{path:"/workers",element:e.jsx(Pe,{allowedRoles:["staff"],children:e.jsx(z0,{})})}),e.jsx(we,{path:"/requirementform/:projectId/:token",element:e.jsx(yA,{})}),e.jsx(we,{path:"/ordermaterial/public/:projectId/:token",element:e.jsx(OR,{})}),e.jsx(we,{path:"/materialarrival/public/:projectId/:token",element:e.jsx(RR,{})}),e.jsx(we,{path:"/clientconsent/public/:projectId/:token",element:e.jsx(ZT,{})}),e.jsx(we,{path:"*",element:e.jsx(Dk,{})})]})})}Dj.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(N2,{store:Ut,children:e.jsx(lS,{client:ke,children:e.jsx(JN,{children:e.jsx(Y3,{})})})})}));
