import{a as x,j as e}from"./index-By5P0A7l.js";import{b as y,c as w,d as T}from"./toolMasterApi-BHuKq0rA.js";import{t as i}from"./toast-BSC5QTk1.js";import v from"./MaterialOverviewLoading-9Ck4pGPe.js";import{T as D}from"./ToolMasterForm-B8pJ5-Bm.js";import{T as j}from"./ToolHistoryTimeline-BBM_WaFD.js";import"./useQuery-Cc7pLKfK.js";import"./useMutation-7YLqc7VE.js";import"./useInfiniteQuery-DQF0m-E9.js";import"./roleCheck-YGaMnK_P.js";import"./Skeleton-FCBR4RgB.js";import"./Button-DLUK8O0t.js";import"./Label-TAdUzpu-.js";import"./ImageGalleryMain-D80ZvsH6.js";import"./downloadFile-DR20oZne.js";import"./index-BQTHaHB-.js";import"./TextArea-Bw4XrQML.js";import"./SearchSelectNew-B6SBCGTt.js";import"./toolOtpApi-Cj-5bnMm.js";import"./dateFormator-BGKi5rfZ.js";const q=()=>{const{id:o,organizationId:n}=x(),{data:d,isLoading:c,isError:l,error:u,refetch:r}=y(o),p=w(),s=T(),f=async(m,t)=>{try{if(await p.mutateAsync({id:o,updateData:m}),t.length>0){const a=new FormData;t.forEach(h=>a.append("files",h)),await s.mutateAsync({id:o,formData:a})}await r(),i({title:"Success",description:"Tool details updated"})}catch(a){i({title:"Update Failed",description:a.message,variant:"destructive"})}},g=async m=>{try{const t=new FormData;m.forEach(a=>t.append("files",a)),await s.mutateAsync({id:o,formData:t}),await r(),i({title:"Success",description:"images updloaded"})}catch(t){i({title:"Update Failed",description:t.message,variant:"destructive"})}};return c?e.jsx(v,{}):l?e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",u.message]}):e.jsxs("main",{className:"max-h-full space-y-2 overflow-y-auto p-2 !bg-white/20",children:[e.jsx(D,{mode:"view",initialData:d,organizationId:n,onSubmit:f,refetch:r,onQuickUpload:g,isSubmitting:p.isPending||s.isPending}),e.jsx(j,{toolId:o,organizationId:n})]})};export{q as default};
