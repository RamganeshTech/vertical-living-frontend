import{g as s}from"./roleCheck-D-Yu12LV.js";import{u as d}from"./useQuery-BPoeBSke.js";import{u as i}from"./useMutation-BbhnaANP.js";import{d as c,q as u,n as w}from"./index-DcYk0AxP.js";const m=async(t,e)=>(await e.get(`/worktasks/getworktaksmain/${t}`)).data.data,h=async(t,e)=>(await e.get(`/worktasks/getdailyschedule/${t}`)).data.data,k=async(t,e,a)=>(await a.post(`/worktasks/create/${t}`,e)).data.data,p=async(t,e,a,r)=>(console.log("im gettng called update workd api "),(await r.put(`/worktasks/update/${t}/${e}`,a)).data.data),g=async(t,e,a)=>(await a.delete(`/worktasks/${t}/${e}`)).data.data,E=async(t,e,a,r)=>{const o=new FormData;return o.append("date",a),r.forEach(l=>{o.append("files",l)}),(await w.post(`https://houseofram.in/api/worktasks/${t}/task/${e}/upload`,o,{headers:{"Content-Type":"multipart/form-data"}})).data.data},$=async({scheduleId:t,taskId:e,date:a,imageId:r})=>{const{data:o}=await w.delete(`https://houseofram.in/api/worktasks/${t}/deleteworkimage/${e}/date/${a}/image/${r}`);return o.data},S=async({projectId:t,formData:e,scheduleId:a=null,api:r})=>{const{data:o}=await r.post(`/worktasks/generatePdf/work/${t}/${a}`,e);if(!o.ok)throw new Error(o.message);return o.data},A=async(t,e)=>(await e.get(`/worktasks/getprojectassigne/${t}`)).data.data,C=async({scheduleId:t,formData:e,api:a})=>{const{data:r}=await a.post(`/worktasks/createcorrection/${t}`,e);if(!r.ok)throw new Error(r.message);return r.data},q=async({scheduleId:t,comparisonId:e,formData:a,api:r})=>{const{data:o}=await r.put(`/worktasks/uploadcorrectedimage/${t}/${e}`,a);if(!o.ok)throw new Error(o.message);return o.data},F=async({scheduleId:t,comparisonId:e,selectedImageId:a,formData:r,api:o})=>{const{data:n}=await o.put(`/worktasks/updateSelectimagecomment/${t}/${e}/${a}`,r);if(!n.ok)throw new Error(n.message);return n.data},I=async({scheduleId:t,comparisonId:e,imageId:a,api:r})=>{const{data:o}=await r.delete(`/worktasks/deletecorrectedimages/${t}/${e}/${a}`);if(!o.ok)throw new Error(o.message);return o.data},v=t=>{const{role:e}=c(),a=s(e),r=["owner","staff","CTO","worker","client"];return d({queryKey:["work-main-stage",t],queryFn:()=>{if(!e||!r.includes(e))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return m(t,a)},enabled:!!t,retry:!1,refetchOnMount:!1})},R=t=>{const{role:e}=c(),a=s(e),r=["owner","staff","CTO","worker","client"];return d({queryKey:["daily-schedule",t],queryFn:()=>{if(!e||!r.includes(e))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return h(t,a)},enabled:!!t,retry:!1,refetchOnMount:!1})},f=["owner","staff","CTO"],_=()=>{const{role:t}=c(),e=s(t);return i({mutationFn:async({projectId:a,formData:r})=>{if(!t||!f.includes(t))throw new Error("Unauthorized");if(!e)throw new Error("API not found");return k(a,r,e)},onSuccess:(a,{projectId:r})=>{u.invalidateQueries({queryKey:["daily-schedule",r]})}})},T=()=>{const{role:t}=c(),e=s(t);return i({mutationFn:async({projectId:a,scheduleId:r,formData:o})=>{if(!t||!f.includes(t))throw new Error("Unauthorized");if(!e)throw new Error("API not found");return p(a,r,o,e)},onSuccess:(a,{projectId:r})=>{u.invalidateQueries({queryKey:["daily-schedule",r]})}})},U=()=>{const{role:t}=c(),e=s(t);return i({mutationFn:async({scheduleId:a,taskId:r})=>{if(!t||!f.includes(t))throw new Error("Unauthorized");if(!e)throw new Error("API not found");return g(a,r,e)},onSuccess:(a,{projectId:r})=>{r&&u.invalidateQueries({queryKey:["work-schedule",r]})}})},z=()=>i({mutationFn:({scheduleId:t,taskId:e,date:a,files:r})=>E(t,e,a,r),onSuccess:(t,{projectId:e})=>{e&&u.invalidateQueries({queryKey:["work-schedule",e]})}}),M=()=>i({mutationFn:async({scheduleId:t,taskId:e,date:a,imageId:r})=>await $({scheduleId:t,taskId:e,date:a,imageId:r}),onSuccess:(t,{projectId:e})=>{u.invalidateQueries({queryKey:["daily-schedule",e]})}}),G=()=>{const t=["owner","staff","CTO"],{role:e}=c(),a=s(e);return i({mutationFn:async({projectId:r,formData:o,scheduleId:n=null})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance missing");return await S({projectId:r,formData:o,scheduleId:n,api:a})},onSuccess:(r,{projectId:o})=>{u.invalidateQueries({queryKey:["daily-schedule",o]})}})},b=t=>{const{role:e}=c(),a=s(e),r=["owner","staff","CTO","worker","client"];return d({queryKey:["projectassigne",t],queryFn:()=>{if(!e||!r.includes(e))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return A(t,a)},enabled:!!t,retry:!1,refetchOnMount:!1})},x=()=>{const t=["owner","staff","CTO"],{role:e}=c(),a=s(e);return i({mutationFn:async({scheduleId:r,formData:o})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance missing");return await C({scheduleId:r,formData:o,api:a})},onSuccess:(r,{projectId:o})=>{u.invalidateQueries({queryKey:["daily-schedule",o]})}})},L=()=>{const t=["owner","staff","CTO"],{role:e}=c(),a=s(e);return i({mutationFn:async({projectId:r,scheduleId:o,comparisonId:n,formData:l})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance missing");return await q({scheduleId:o,comparisonId:n,formData:l,api:a})},onSuccess:(r,{projectId:o})=>{u.invalidateQueries({queryKey:["daily-schedule",o]})}})},j=()=>{const t=["owner","staff","CTO"],{role:e}=c(),a=s(e);return i({mutationFn:async({projectId:r,scheduleId:o,comparisonId:n,selectedImageId:l,data:y})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance missing");return await F({scheduleId:o,comparisonId:n,selectedImageId:l,formData:y,api:a})},onSuccess:(r,{projectId:o})=>{u.invalidateQueries({queryKey:["daily-schedule",o]})}})},B=()=>{const t=["owner","staff","CTO"],{role:e}=c(),a=s(e);return i({mutationFn:async({projectId:r,scheduleId:o,comparisonId:n,imageId:l})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance missing");return await I({scheduleId:o,comparisonId:n,imageId:l,api:a})},onSuccess:(r,{projectId:o})=>{u.invalidateQueries({queryKey:["daily-schedule",o]})}})},P=async({formId:t,projectId:e,deadLine:a,api:r})=>{const{data:o}=await r.put(`/worktasks/deadline/${e}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},D=async({projectId:t})=>{console.log("im gettng called complete workd api ");const{data:e}=await w.put(`https://houseofram.in/api/worktasks/completionstatus/${t}`);if(!e.ok)throw new Error(e.message);return e.data},H=()=>{const t=["owner","staff","CTO"],{role:e}=c(),a=s(e);return i({mutationFn:async({formId:r,projectId:o,deadLine:n})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance missing");return await P({formId:r,projectId:o,deadLine:n,api:a})},onSuccess:(r,{projectId:o})=>{u.invalidateQueries({queryKey:["work-main-stage",o]})}})},J=()=>i({mutationFn:async({projectId:t})=>await D({projectId:t}),onSuccess:(t,{projectId:e})=>{u.invalidateQueries({queryKey:["work-main-stage",e]})}});export{H as a,J as b,b as c,_ as d,T as e,G as f,x as g,L as h,B as i,j,R as k,U as l,z as m,M as n,v as u};
