import{r as o,j as e,aa as x,u as H,s as Q,a as V,B as n,J as P,t as d}from"./index-Wihfhca_.js";import{B as X}from"./Badge-B4nYVk5f.js";import{I as O}from"./Input-IfonaLGO.js";import{c as Z,d as ee}from"./orgApi-BJ7puI9v.js";import{u as v}from"./getAllUsersApi-db49l7O2.js";const w=({title:i,icon:y,list:t,isLoading:b})=>{const[m,g]=o.useState(""),c=o.useMemo(()=>t!=null&&t.length?t==null?void 0:t.filter(r=>{var p,u;return((p=r.name)==null?void 0:p.toLowerCase().includes(m.toLowerCase()))||((u=r.email)==null?void 0:u.toLowerCase().includes(m.toLowerCase()))}):[],[t,m]);return e.jsxs("div",{className:"bg-white border rounded-xl !min-h-[50%] !max-h-[93%] overflow-hidden border-blue-100 shadow-sm px-4 py-5 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-blue-800 font-semibold flex items-center gap-2 text-base",children:[e.jsx("i",{className:`fas ${y} text-blue-600 text-lg`}),i]}),t&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs font-medium px-2 py-0.5 rounded-full",children:[t==null?void 0:t.length," total"]})]}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search name or email",value:m,onChange:r=>g(r.target.value),className:"w-full px-3 py-1.5 border border-blue-200 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-400"})}),e.jsx("div",{className:"max-h-[100%] overflow-y-auto custom-scrollbar pr-1 scroll-smooth scrollbar-thin scrollbar-thumb-blue-300 hover:scrollbar-thumb-blue-400 scrollbar-track-blue-100",children:b?e.jsx(x,{className:"h-4 w-1/2 mx-2 mb-2"}):(c==null?void 0:c.length)>0?e.jsx("ul",{className:"space-y-3 pt-1",children:c==null?void 0:c.map(r=>e.jsxs("li",{className:"flex items-start gap-3 px-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mt-0.5",children:e.jsx("i",{className:"fas fa-user"})}),e.jsxs("div",{className:"text-sm text-gray-700 leading-tight",children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:r.email})]})]},r._id))}):e.jsxs("p",{className:"text-sm text-gray-500 text-center py-6",children:["No ",i.toLowerCase()," found."]})})]})};function ie(){const{organizationId:i}=H(),{openMobileSidebar:y,isMobile:t}=Q(),b=V(),[m,g]=o.useState(!1),[c,r]=o.useState(""),[p,u]=o.useState(!1),[z,k]=o.useState(!1),[j,C]=o.useState(""),[N,E]=o.useState("");let{data:s,isLoading:F,error:I}=Z(i);Array.isArray(s)&&(s=s[0]);const h=ee(),{data:T,isLoading:B}=v(i,"staff"),{data:U,isLoading:D}=v(i,"CTO"),{data:G,isLoading:K}=v(i,"worker"),{data:M,isLoading:_}=v(i,"client"),L=async()=>{if(!c.trim()){d({title:"Error",description:"Organization name cannot be empty",variant:"destructive"});return}try{await h.mutateAsync({updateField:{organizationName:c},orgsId:i}),d({title:"Success",description:"Organization name updated successfully"}),g(!1)}catch(a){d({title:"Error",description:a.message||"Failed to update organization name",variant:"destructive"})}},Y=()=>{r((s==null?void 0:s.organizationName)||""),g(!0)},R=()=>{r(""),g(!1)},$=()=>{C((s==null?void 0:s.organizationPhoneNo)||""),u(!0)},J=()=>{E((s==null?void 0:s.address)||""),k(!0)},S=async()=>{var a,f;if(!j.trim()){d({title:"Error",description:"Phone number cannot be empty",variant:"destructive"});return}if(!/^\d{10}$/.test(j)){d({title:"Error",description:"Phone number should contain 10 digits number",variant:"destructive"});return}try{await h.mutateAsync({orgsId:i,updateField:{organizationPhoneNo:j}}),d({title:"Success",description:"Phone number updated successfully"}),u(!1)}catch(l){d({title:"Error",description:((f=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:f.message)||(l==null?void 0:l.message)||"Failed to update phone number",variant:"destructive"})}},A=async()=>{var a,f;if(!N.trim()){d({title:"Error",description:"Address cannot be empty",variant:"destructive"});return}if(N.length>150){d({title:"Error",description:"Address cannot be more than 150 characters",variant:"destructive"});return}try{await h.mutateAsync({orgsId:i,updateField:{address:N}}),d({title:"Success",description:"Address updated successfully"}),k(!1)}catch(l){d({title:"Error",description:((f=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:f.message)||(l==null?void 0:l.message)||"Failed to update address",variant:"destructive"})}},W=()=>{C(""),u(!1)},q=()=>{E(""),k(!1)};return F?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-full   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(x,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(x,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(x,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(x,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(x,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(x,{className:"h-96 w-full rounded-2xl"})})]})})]}):I||!s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(n,{onClick:()=>b("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsx("div",{className:"flex w-full h-full ",children:e.jsxs("div",{className:"min-h-full w-full max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white bg-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10 w-full",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 py-3 flex flex-row sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-6",children:e.jsxs("div",{className:"flex flex-row sm:items-center justify-between  w-full gap-3 sm:gap-4",children:[t?e.jsx("button",{onClick:y,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}):e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>b("/organizations"),className:"text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Back to Organizations"}),e.jsx("span",{className:"md:hidden",children:"Back"})]}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:s!=null&&s.logoUrl?e.jsx("img",{src:(s==null?void 0:s.logoUrl)||P.COMPANY_LOGO,alt:s==null?void 0:s.organizationName,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"}):e.jsx("img",{src:P.COMPANY_LOGO,alt:"Company Logo",className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"})}),e.jsx("div",{className:"min-w-0 flex-1 ",children:m?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx(O,{value:c,onChange:a=>r(a.target.value),onKeyPress:a=>a.key==="Enter"&&L(),placeholder:"Organization name",className:"w-full text-lg sm:text-xl font-bold border-2 border-blue-300 focus:border-blue-500 rounded-xl bg-white/90 backdrop-blur-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{size:"sm",variant:"primary",onClick:L,isLoading:h.isPending,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]}),e.jsxs(n,{size:"sm",variant:"outline",onClick:R,className:"border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-blue-900 truncate",children:(s==null?void 0:s.organizationName)||"N/A"}),(s==null?void 0:s.type)&&e.jsx(X,{className:"mt-1 bg-blue-100 text-blue-700 text-xs",children:s==null?void 0:s.type})]})})]}),!m&&e.jsx("div",{className:"flex justify-end sm:justify-start  w-fit flex-shrink-0",children:e.jsxs(n,{variant:"outline",onClick:Y,className:"border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl bg-white/80 backdrop-blur-sm",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Name"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})})]})})}),e.jsx("div",{className:"max-w-full mx-auto p-4 sm:p-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm h-fit",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx(O,{value:j,type:"tel",maxLength:10,onChange:a=>C(a.target.value),placeholder:"Enter phone number",className:"text-sm border-blue-200 focus:border-blue-500 bg-white flex-1",onKeyPress:a=>a.key==="Enter"&&S()})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsxs(n,{size:"sm",variant:"outline",onClick:W,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(n,{size:"sm",variant:"primary",onClick:S,isLoading:h.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:(s==null?void 0:s.organizationPhoneNo)||"N/A"})]}),e.jsx(n,{size:"sm",variant:"ghost",onClick:$,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm ",children:z?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:N,onChange:a=>E(a.target.value),placeholder:"Enter address",className:"w-full text-sm border-2 border-blue-200 focus:border-blue-500 bg-white rounded-lg p-2 resize-none focus:outline-none",rows:3,onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),A())}}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-600",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-[13px]"}),e.jsx("span",{className:"text-[12px] sm:text-sm",children:"Press Shift + Enter for next line"})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsxs(n,{size:"sm",variant:"outline",onClick:q,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(n,{size:"sm",variant:"primary",onClick:A,isLoading:h.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-start gap-3  w-full",children:[e.jsxs("div",{className:"flex items-start gap-3 ",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsx("div",{className:"max-w-[90%] overflow-h-auto !max-h-[150px] ",children:e.jsx("span",{className:"text-gray-700 text-sm sm:text-base break-words whitespace-pre-wrap",children:(s==null?void 0:s.address)||"N/A"})})]}),e.jsx(n,{size:"sm",variant:"ghost",onClick:J,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto flex-shrink-0",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})})]})})})}),e.jsxs("div",{className:"px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-3  sm:min-h-[65vh] sm:max-h-[100%]",children:[e.jsx(w,{title:"Staffs",icon:"fa-user-tie",list:T,isLoading:B}),e.jsx(w,{title:"CTOs",icon:"fa-user-cog",list:U,isLoading:D}),e.jsx(w,{title:"Workers",icon:"fa-user-hard-hat",list:G,isLoading:K}),e.jsx(w,{title:"Clients",icon:"fa-user-friends",list:M,isLoading:_})]})]})})}export{ie as default};
