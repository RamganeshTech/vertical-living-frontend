import{u as i,n as d,a as u,q as w,o as f,b as s}from"./index-CBsAK0nv.js";const m=async({organizationId:t,specification:a,api:e})=>{const{data:r}=await e.post(`/materialinventory?organizationId=${t}`,a);if(!r.ok)throw new Error(r.message);return r.data},g=async({id:t,specification:a,api:e})=>{const{data:r}=await e.put(`/materialinventory/${t}/updatematerial`,{specification:a});if(!r.ok)throw new Error(r.message);return r.data},v=async({id:t,api:a})=>{const{data:e}=await a.delete(`/materialinventory/${t}/deletematerial`);if(!e.ok)throw new Error(e.message);return e.data},p=async({id:t,api:a})=>{const{data:e}=await a.get(`/materialinventory/${t}/getsingle`);if(!e.ok)throw new Error(e.message);return e.data},h=async({organizationId:t,pageParam:a=1,filters:e={},api:r})=>{const o=new URLSearchParams({organizationId:t,page:String(a),...e}),{data:n}=await r.get(`/materialinventory/getallmaterial?${o.toString()}`);if(!n.ok)throw new Error(n.message);return n},l=["owner","staff","CTO"],E=()=>{const{role:t}=i(),a=s(t);return u({mutationFn:async({organizationId:e,specification:r})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await m({organizationId:e,specification:r,api:a})},onSuccess:(e,{organizationId:r})=>{w.invalidateQueries({queryKey:["materialinventory",r]})}})},P=()=>{const{role:t}=i(),a=s(t);return u({mutationFn:async({id:e,specification:r})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await g({id:e,specification:r,api:a})},onSuccess:(e,{id:r})=>{w.invalidateQueries({queryKey:["materialinventory",r]})}})},k=()=>{const{role:t}=i(),a=s(t);return u({mutationFn:async({id:e})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await v({id:e,api:a})},onSuccess:(e,{id:r})=>{w.invalidateQueries({queryKey:["materialinventory",r]})}})},M=t=>{const{role:a}=i(),e=s(a);return f({queryKey:["materialinventory",t],queryFn:async()=>{if(!a||!l.includes(a))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await p({id:t,api:e})},enabled:!!t&&!!a,retry:!1,refetchOnWindowFocus:!1})},q=(t,a={})=>{const{role:e}=i(),r=s(e);return d({queryKey:["materialinventory",t,a],enabled:!!t&&!!e,initialPageParam:1,queryFn:async({pageParam:o=1})=>{if(!e||!l.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await h({organizationId:t,pageParam:o,filters:a,api:r})},getNextPageParam:o=>{console.log("ğŸ” Last page received:",o),console.log("ğŸ” Available properties:",Object.keys(o));const n=o.page,c=o.totalPages;console.log("ğŸ” Pagination calculation:",{currentPage:n,totalPages:c,condition:`${n} < ${c}`,result:n<c});const y=n<c?n+1:void 0;return console.log("ğŸ” Next page will be:",y),y},retry:!1,refetchOnWindowFocus:!1})};export{E as a,P as b,k as c,M as d,q as u};
