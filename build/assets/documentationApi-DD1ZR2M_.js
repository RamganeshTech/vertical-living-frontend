import{f as i,b as d,g as u,h as l,s as w,i as c}from"./index-BAM0eJUz.js";const f=async(a,e)=>{const{data:t}=await e.get(`/documentation/${a}/getalldetails`);if(!t.ok)throw new Error(t.message);return t.data},y=async(a,e,t)=>{const{data:n}=await t.get(`/documentation/${a}/stage/${e}`);if(!n.ok)throw new Error(n.message);return n.data},g=async(a,e,t,n)=>{const o=new FormData;t.forEach(s=>o.append("files",s));const{data:r}=await n.post(`/documentation/${a}/${e}/upload`,o);if(!r.ok)throw new Error(r.message);return r.data},m=async(a,e,t,n)=>{const{data:o}=await n.delete(`/documentation/${a}/${e}/file/${t}`);if(!o.ok)throw new Error(o.message);return o.data},h=async(a,e,t,n)=>{const{data:o}=await n.patch(`/documentation/${a}/${e}/description`,{description:t});if(!o.ok)throw new Error(o.message);return o.data},S=a=>{const e=["owner","CTO","staff","client"],{role:t}=i(),n=c(t);return d({queryKey:["stage-documentation",a],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("Not allowed to make this API call.");if(!n)throw new Error("API instance not found.");return await f(a,n)},enabled:!!t&&!!a&&!!n,retry:!1,refetchOnMount:!1})},A=({projectId:a,stageNumber:e})=>{const t=["owner","CTO","staff","client"],{role:n}=i(),o=c(n);return d({queryKey:["stage-documentation",a,e],queryFn:async()=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call.");if(!o)throw new Error("API instance not found.");return await y(a,e,o)},enabled:!!n&&!!a&&e!==void 0&&!!o,retry:!1,refetchOnMount:!1})},q=()=>{const a=["owner","CTO","staff"],{role:e}=i(),t=c(e),n=u();return l({mutationFn:async({projectId:o,stageNumber:r,files:s})=>{if(!e||!a.includes(e))throw new Error("Not allowed.");if(!t)throw new Error("API not found.");return await g(o,r,s,t)},onSuccess:(o,{projectId:r})=>{n.invalidateQueries({queryKey:["stage-documentation",r]})}})},F=()=>{const a=["owner","CTO","staff"],{role:e}=i(),t=c(e),n=u();return l({mutationFn:async({projectId:o,stageNumber:r,fileId:s})=>{if(!e||!a.includes(e))throw new Error("Not allowed.");if(!t)throw new Error("API not found.");return await m(o,r,s,t)},onSuccess:(o,{projectId:r})=>{n.invalidateQueries({queryKey:["stage-documentation",r]})}})},$=()=>{const a=["owner","CTO","staff"],{role:e}=i(),t=c(e),n=u();return l({mutationFn:async({projectId:o,stageNumber:r,description:s})=>{if(!e||!a.includes(e))throw new Error("Not allowed.");if(!t)throw new Error("API not found.");return await h(o,r,s,t)},onSuccess:(o,{projectId:r})=>{n.invalidateQueries({queryKey:["stage-documentation",r]})}})},p=async(a,e,t)=>{const{data:n}=await t.put(`/documentation/updatedocument/${a}/${e}`);return n.data},C=()=>{const a=["owner","CTO","staff"],{role:e}=i(),t=c(e);return l({mutationFn:async({projectId:n,stageNumber:o})=>{if(console.log("stageNumber",o),!e||!a.includes(e))throw new Error("Not allowed to make this API call.");if(!t)throw new Error("API instance not found.");return await p(n,o,t)},onSuccess:(n,{projectId:o})=>{w.invalidateQueries({queryKey:["stage-documentation-message",o]})}})};export{A as a,q as b,F as c,$ as d,C as e,S as u};
