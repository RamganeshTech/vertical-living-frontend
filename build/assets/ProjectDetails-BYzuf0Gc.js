import{e as w,b as P,r as a,j as i,O as U,ae as N,af as v}from"./index-BZjlY-2Z.js";import{M as D,S as x}from"./MobileSidebar-DLJwl2Zj.js";import"./CTOApi-v3tC5pcE.js";import"./useMutation-BRRIqsxx.js";import"./clientApi-Bkf-lai5.js";import"./staffApi-DGdcqb0_.js";import"./userApi-yh800HUb.js";import"./workerApi-Crkvubo_.js";import"./Button-BGBzZFjk.js";import"./toast-BSC5QTk1.js";import"./currentActiveStageApi-CCZui8lE.js";import"./useQuery-Coz1VCY2.js";import"./roleCheck-DuKNZHKs.js";import"./notificationApi-IEQo3Zhb.js";import"./useInfiniteQuery--LmPAkvr.js";import"./issueDiscussionApi-FLaN1Xc3.js";const V={INVENTORY:"inventory",WORKERS:"inviteworker",INVITECLIENT:"inviteclient",PREREQUISTIES:"prerequisites",REQUIREMENTFORM:"clientrequirement",SITEMEASUREMENT:"sitemeasurement",SAMPLEDESIGN:"sampledesign",WORKSCHEDULE:"workschedule",TECHNICALCONSULTANT:"technicalconsultant",PAYMENTCONFIRMATION:"paymentconfirmation",MODULARUNIT:"modularunit",ORDERMATERIALS:"ordermaterial",MATERIALARRIVED:"materialarrival",INSTALLATION:"installation",QUALITYCHECK:"qualitycheck",CLEANINGSANITATION:"cleaning",PROJECTDELIVERY:"projectdelivery"},j=({projectId:e,setProjectId:R,organizationId:t,setOrganizationId:h})=>{const T=w(),{role:n,permission:r}=P(),C=(n==null?void 0:n.toLowerCase())||"",[o,m]=a.useState(!1),[A,p]=a.useState(window.innerWidth<470),[S,O]=a.useState("Vertical Living");a.useLayoutEffect(()=>{const s=T.pathname.split("/");R(s[3]),h(s[1])},[T.pathname]),a.useEffect(()=>{const s=()=>{p(window.innerWidth<470)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const L={INVENTORY:e?`/${t}/projectdetails/${e}/inventory`:"",WORKERS:e?`/${t}/projectdetails/${e}/workers`:"",INVITECLIENT:e?`/${t}/projectdetails/${e}/inviteclient`:"",PREREQUISTIES:e?`/${t}/projectdetails/${e}/prerequisites`:"",REQUIREMENTFORM:e?`/${t}/projectdetails/${e}/requirementform`:"",SITEMEASUREMENT:e?`/${t}/projectdetails/${e}/sitemeasurement`:"",SAMPLEDESIGN:e?`/${t}/projectdetails/${e}/sampledesign`:"",WORKSCHEDULE:e?`/${t}/projectdetails/${e}/workmainschedule`:"",TECHNICALCONSULTANT:e?`/${t}/projectdetails/${e}/technicalconsultant`:"",PAYMENTCONFIRMATION:e?`/${t}/projectdetails/${e}/paymentconfirmation`:"",MODULARUNIT:e?`/${t}/projectdetails/${e}/modularunitsnew`:"",ORDERMATERIALS:e?`/${t}/projectdetails/${e}/ordermaterial`:"",MATERIALARRIVED:e?`/${t}/projectdetails/${e}/materialarrival`:"",INSTALLATION:e?`/${t}/projectdetails/${e}/installation`:"",QUALITYCHECK:e?`/${t}/projectdetails/${e}/qualitycheck`:"",CLEANINGSANITATION:e?`/${t}/projectdetails/${e}/cleaning`:"",PROJECTDELIVERY:e?`/${t}/projectdetails/${e}/projectdelivery`:""},f=Object.keys(N);let u=[];u=f;let l={},c={},E={};return u.forEach(s=>{N[s]&&L[s]&&(l[s]=N[s],c[s]=v[s],E[s]=L[s])}),C!=="owner"&&Object.keys(l).forEach(s=>{const $=V[s];if($){const M=r==null?void 0:r[$];M&&Object.values(M).some(b=>b===!0)||(delete l[s],delete c[s],delete E[s])}}),i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex w-screen h-screen",children:[A?i.jsx(D,{labels:l,path:E,isOpen:o,onClose:()=>m(!1)}):i.jsx(x,{path:E,labels:l,icons:c,setProjectName:O,projectName:S}),i.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:i.jsx(U,{context:{projectId:e,setProjectId:R,isMobile:A,isMobileSidebarOpen:o,openMobileSidebar:()=>m(!0),closeMobileSidebar:()=>m(!1),setProjectName:O,projectName:S}})})]})})};export{j as default};
