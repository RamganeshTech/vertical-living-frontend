import{r as l,j as e,u as ie,d as de,R as xe,B as me,C as se,M as ue,t as re}from"./index-CKvTvGhg.js";import{a as pe,b as ae,c as he}from"./quoteVariantApi-Fh_le78z.js";import{R as ne}from"./FurnitureForm-e2KSNV0A.js";import{N as ge}from"./constants-CP15s2Qq.js";import{d as fe}from"./downloadFile-DlgctQJj.js";const Y=({options:s,placeholder:P="Select an option",searchPlaceholder:R="Search...",onSelect:u,selectedValue:y,className:L=""})=>{const[I,w]=l.useState(!1),[S,q]=l.useState(""),[x,T]=l.useState(null),g=l.useRef(null),A=s.filter(p=>p.toLowerCase().includes(S.toLowerCase()));l.useEffect(()=>{const p=o=>{g.current&&!g.current.contains(o.target)&&w(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),l.useEffect(()=>{if(y){const p=s.find(o=>o===y);T(p||null)}else T(null)},[y,s]);const D=p=>{T(p),u(p),w(!1),q("")},_=()=>{w(!0),q("")},C=p=>{q(p.target.value)};return e.jsxs("div",{className:`relative ${L}`,ref:g,children:[e.jsxs("div",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white cursor-pointer hover:border-gray-400 transition-colors",onClick:_,children:[x?e.jsx("span",{className:"text-gray-800",children:x}):e.jsx("span",{className:"text-gray-500",children:P}),e.jsx("span",{className:"absolute right-3 top-3 text-gray-400",children:"▼"})]}),I&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{type:"text",placeholder:R,value:S,onChange:C,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),e.jsx("div",{className:"py-1",children:A.length>0?A.map(p=>e.jsx("div",{className:`px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors ${x===p?"bg-blue-50 text-blue-600":""}`,onClick:()=>D(p),children:p},p)):e.jsx("div",{className:"px-4 py-2 text-gray-500 text-center",children:"No options found"})})]})]})},H=(s,P,R)=>{const u=String(s).toLowerCase().replace("mm","").trim(),y=P.find(L=>String(L.thickness).toLowerCase().replace("mm","").trim()===u);return(y==null?void 0:y.rs)!==void 0?y.rs:R==="laminate"?be:0},Ne=l.forwardRef(({data:s,index:P,brandOptions:R,laminateBrandOptions:u,laminateRatesByBrand:y,brandRatesByName:L,selectedBrand:I,selectedLaminateBrand:w,onFurnitureChange:S},q)=>{var m,k;const[x,T]=l.useState(null),[g,A]=l.useState(null),D=x?L[x]||[]:[],_=g?y[g]||[]:[],C=l.useRef(w),p=l.useRef(I),[o,F]=l.useState((s==null?void 0:s.coreMaterials)||[]);l.useEffect(()=>{F((s==null?void 0:s.coreMaterials)||[])},[s==null?void 0:s.coreMaterials]),l.useEffect(()=>{p.current!==I&&(T(I),p.current=I)},[I]),l.useEffect(()=>{C.current!==w&&(A(w),C.current=w)},[w]),l.useEffect(()=>{!x&&(R==null?void 0:R.length)>0&&T(R[0])},[R]),l.useEffect(()=>{!g&&(u==null?void 0:u.length)>0&&A(u[0])},[u]);const Z=()=>{let a=0;const f=x?L[x]||[]:[],M=g?y[g]||[]:[],j=o,d=j[0],N=((d==null?void 0:d.carpenters)||0)*((d==null?void 0:d.days)||0)*1300,B=j.length>0?N/j.length:0;for(const b of j){const G=H(b.plywoodNos.thickness,f,"plywood"),ce=H(b.laminateNos.thickness,M,"laminate"),le=b.plywoodNos.quantity*32*G,oe=b.laminateNos.quantity*32*ce;a+=le+oe+B}const h=b=>(b.quantity||0)*(b.cost||0),v=b=>b.cost||0,E=s.fittingsAndAccessories.reduce((b,G)=>b+h(G),0),K=s.glues.reduce((b,G)=>b+v(G),0),X=s.nonBrandMaterials.reduce((b,G)=>b+h(G),0);return a+=E+K+X,Math.round(a)},Q=(t,r)=>{if(!g&&!g)return t.rowTotal||0;const f=H(t.plywoodNos.thickness,D,"plywood"),M=H(t.laminateNos.thickness,_,"laminate");console.log("ply Rate",f),console.log("lami Rate",M);const j=32,d=t.plywoodNos.quantity*(f*j),N=t.laminateNos.quantity*(M*j);console.log("plyCost",d),console.log("lamiCost",N);const B=d+N;console.log("baseMaterialCost",B);const h=B*(t.profitOnMaterial/100);console.log("profitOnMaterial",h);const v=r.length,E=r[0],b=E.carpenters*E.days*ne.labour*(1+(E.profitOnLabour||0)/100)/v,G=B+h+b;return Math.round(G)},W=t=>t.quantity*t.cost,U=t=>t.cost,V=o.reduce((t,r)=>t+Q(r,o),0),O=s.fittingsAndAccessories.reduce((t,r)=>t+W(r),0),z=s.glues.reduce((t,r)=>t+U(r),0),$=s.nonBrandMaterials.reduce((t,r)=>t+W(r),0),ee=V+O+z+$;l.useImperativeHandle(q,()=>({getUpdatedFurniture:()=>{const r=o.map(d=>({...d,rowTotal:Q(d,o)})).reduce((d,N)=>d+(N.rowTotal||0),0),a=s.fittingsAndAccessories.reduce((d,N)=>d+(N.quantity||0)*(N.cost||0),0),f=s.glues.reduce((d,N)=>d+(N.cost||0),0),M=s.nonBrandMaterials.reduce((d,N)=>d+(N.quantity||0)*(N.cost||0),0),j=r+a+f+M;return{furnitureName:s.furnitureName,plywoodBrand:x,laminateBrand:g,coreMaterials:o.map(d=>({...d,rowTotal:Q(d,o)})),fittingsAndAccessories:s.fittingsAndAccessories,glues:s.glues,nonBrandMaterials:s.nonBrandMaterials,coreMaterialsTotal:r,fittingsAndAccessoriesTotal:a,gluesTotal:f,nonBrandMaterialsTotal:M,furnitureTotal:j,totals:{core:r,fittings:a,glues:f,nbms:M,furnitureTotal:j}}}}));const te=(t,r)=>{const a=[...o];a[t]={...a[t],profitOnMaterial:r||0},F(a),S==null||S()},J=t=>{if(!o[0])return;const r=[...o];r[0]={...r[0],profitOnLabour:t||0},F(r),S==null||S()};l.useEffect(()=>{S==null||S()},[x,g,o,s.fittingsAndAccessories,s.glues]);const i=()=>e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-semibold text-md text-gray-800 mb-2",children:["Core Materials (Total: ₹",V.toLocaleString("en-IN"),")"]}),e.jsx("div",{className:"overflow-x-auto rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsxs("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plywood"}),e.jsx("th",{colSpan:2,className:"text-center px-6 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Laminate"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Carpenters / Day"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Days"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Material"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit % Labour"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{rowSpan:2,className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-center px-6 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thk"})]})]}),e.jsx("tbody",{children:(o==null?void 0:o.length)>0&&(o==null?void 0:o.map((t,r)=>{var f,M,j,d,N,B,h,v;const a=Q(t,o);return e.jsxs("tr",{className:"group border",children:[r===0&&e.jsx("td",{rowSpan:(f=s==null?void 0:s.coreMaterials)==null?void 0:f.length,className:"text-center border-r-1 p-2",children:t!=null&&t.imageUrl?e.jsx("img",{src:(t==null?void 0:t.imageUrl)||ge,className:"h-10 mx-auto"}):e.jsx(e.Fragment,{children:"—"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(t==null?void 0:t.itemName)||"—"}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((M=t==null?void 0:t.plywoodNos)==null?void 0:M.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((j=t==null?void 0:t.plywoodNos)==null?void 0:j.thickness)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((d=t==null?void 0:t.laminateNos)==null?void 0:d.quantity)??0}),e.jsx("td",{className:"text-center border-r-1 p-2",children:((N=t==null?void 0:t.laminateNos)==null?void 0:N.thickness)??0}),r===0&&e.jsxs(e.Fragment,{children:[e.jsx("td",{rowSpan:(B=s==null?void 0:s.coreMaterials)==null?void 0:B.length,className:"text-center border-r-1 p-2",children:(t==null?void 0:t.carpenters)||0}),e.jsx("td",{rowSpan:(h=s==null?void 0:s.coreMaterials)==null?void 0:h.length,className:"text-center border-r-1 p-2",children:(t==null?void 0:t.days)||0})]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:o[r].profitOnMaterial,onChange:E=>te(r,parseFloat(E.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),r===0&&e.jsx("td",{rowSpan:(v=s==null?void 0:s.coreMaterials)==null?void 0:v.length,className:"text-center border-r-1 p-2",children:e.jsx("input",{type:"number",value:o[0].profitOnLabour,onChange:E=>J(parseFloat(E.target.value)),className:"w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm"})}),e.jsx("td",{className:"text-center border-r-1 p-2",children:(t==null?void 0:t.remarks)||"—"}),e.jsxs("td",{className:"text-center border-r-1 p-2 text-green-700 font-bold",children:["₹",a==null?void 0:a.toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border-r-1 p-2",children:"—"})]},r)}))})]})})]}),n=t=>t==="Fittings & Accessories"?O:t==="Glues"?z:t==="Non-Branded Materials"?$:0,c=(t,r)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-semibold text-md mb-2 text-gray-800",children:[t,"(Total: ₹",n(t).toLocaleString("en-IN"),")"]}),e.jsxs("table",{className:"min-w-full text-sm bg-white shadow-sm",children:[e.jsx("thead",{className:"bg-blue-50 text-sm font-semibold text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:r.length>0&&r.map((a,f)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.itemName)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.description)||"—"}),e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.quantity)||0}),e.jsx("td",{className:"text-center border p-2",children:(a==null?void 0:a.cost)||0}),t==="Fittings & Accessories"||t==="Non-Branded Materials"?e.jsxs("td",{className:"text-center border p-2 text-green-700 font-bold",children:["₹",W(a).toLocaleString("en-IN")]}):e.jsxs("td",{className:"text-center border p-2 text-green-700 font-bold",children:["₹",U(a).toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center border p-2",children:"—"})]},f))})]})]});return e.jsxs("div",{className:"shadow-md p-4 my-4 border rounded-lg bg-white",children:[e.jsxs("div",{className:" flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold  text-blue-600",children:["Product ",P+1,": ",s.furnitureName]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-right text-xl font-bold text-green-700",children:["Product Total: ₹",ee.toLocaleString("en-IN")]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Raw Cost (no profit)"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-700",children:["₹",Z().toLocaleString("en-IN")]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Plwyood Brand:"}),e.jsx(Y,{options:R,placeholder:"-- Choose Plwyood Brand --",searchPlaceholder:"Search Plywood brands...",onSelect:T,selectedValue:x||"",className:"mt-1"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Select Laminate Brand:"}),e.jsx(Y,{options:u,placeholder:"-- Choose Laminate Brand --",searchPlaceholder:"Search laminate brands...",onSelect:A,selectedValue:g||"",className:"mt-1"})]})]}),e.jsxs("div",{children:[x&&((m=L[x])==null?void 0:m.length)>0&&e.jsxs("div",{className:"mt-6 border border-gray-200 bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Available Thickness & Rates for ",e.jsx("span",{className:"text-blue-600",children:x})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left border border-gray-100",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:L[x].map((t,r)=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-r text-gray-700 font-medium",children:t.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",t.rs.toFixed(2)]})]},r))})]})})]}),g&&((k=y[g])==null?void 0:k.length)>0&&e.jsxs("div",{className:"mt-4 border bg-white rounded-md shadow-sm p-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:["Laminate Rates for ",e.jsx("span",{className:"text-blue-600",children:g})]}),e.jsxs("table",{className:"min-w-full text-sm border",children:[e.jsx("thead",{className:"bg-blue-50 text-xs text-gray-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-r",children:"Thickness"}),e.jsx("th",{className:"px-4 py-2",children:"Rate (₹/sqft)"})]})}),e.jsx("tbody",{children:y[g].map((t,r)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2 border-r font-medium",children:t.thickness}),e.jsxs("td",{className:"px-4 py-2 text-green-800 font-bold",children:["₹",t.rs.toFixed(2)]})]},r))})]})]})]})]}),i(),c("Fittings & Accessories",s.fittingsAndAccessories),c("Glues",s.glues),c("Non-Branded Materials",s.nonBrandMaterials)]})}),be=10,we=()=>{var J;const{organizationId:s,quoteId:P}=ie(),R=de(),{data:u,isLoading:y}=pe(s,P);let{data:L,isLoading:I}=ae(s,"plywood"),{data:w}=ae(s,"Laminate");const{mutateAsync:S,isPending:q}=he(),x=l.useRef([]),[T,g]=l.useState(null),[A,D]=l.useState(null),_=l.useMemo(()=>{if(!L)return{};const i={};return L.forEach(n=>{const c=(n==null?void 0:n.data)||{},m=c.Brand??c.brand,k=c["thickness (mm)"]||c.thickness||c.Thickness;let t=c.Rs||c.rs;if(m&&k&&t){const r=String(m).trim(),a=String(k).trim(),f=parseFloat(t);i[r]||(i[r]=[]),i[r].push({thickness:a,rs:f})}}),i},[L]),C=l.useMemo(()=>Object.keys(_),[_]),p=l.useMemo(()=>{if(!w)return{};const i={};return w.forEach(n=>{const c=(n==null?void 0:n.data)||{},m=c.Brand??c.brand,k=c["thickness (mm)"]||c.thickness||c.Thickness,t=c.Rs||c.rs;if(m&&k&&t){const r=String(m).trim(),a=String(k).trim(),f=parseFloat(t);i[r]||(i[r]=[]),i[r].push({thickness:a,rs:f})}}),i},[w]),o=l.useMemo(()=>Object.keys(p),[p]),[F,Z]=l.useState([]),[Q,W]=l.useState(0),[U,V]=l.useState(0),O=()=>{const i=x.current.map(c=>c.current).filter(c=>c!==null).map(c=>c.getUpdatedFurniture());console.log("updatedFurnitures",i);const n=i.reduce((c,m)=>c+m.totals.furnitureTotal,0);console.log("total",n),W(n),V(ee())},{profitDifference:z,profitPercentage:$}=l.useMemo(()=>{const i=Q-U,n=U>0?i/U*100:0;return{profitDifference:Math.round(i),profitPercentage:n}},[Q,U]),ee=()=>{const i=x.current.map(m=>m.current).filter(m=>m!==null).map(m=>m.getUpdatedFurniture()),n=32;let c=0;return i.forEach(m=>{const k=m.plywoodBrand?_[m.plywoodBrand]||[]:[],t=m.laminateBrand?p[m.laminateBrand]||[]:[],r=m.coreMaterials,a=r[0],f=((a==null?void 0:a.carpenters)||0)*((a==null?void 0:a.days)||0)*ne.labour,M=r.length>0?f/r.length:0;r.forEach(h=>{const v=H(h.plywoodNos.thickness,k,"plywood"),E=H(h.laminateNos.thickness,t,"laminate"),K=h.plywoodNos.quantity*(v*n),X=h.laminateNos.quantity*(E*n),b=K+X;c+=b+M});const j=h=>h.quantity*h.cost,d=m.fittingsAndAccessories.reduce((h,v)=>h+j(v),0),N=m.glues.reduce((h,v)=>h+(v.cost||0),0),B=m.nonBrandMaterials.reduce((h,v)=>h+j(v),0);c+=d+N+B}),Math.round(c)},te=async()=>{var i,n;try{if(!s||!P||!u||!T){re({title:"Missing info",description:"Please ensure brand and all details are selected",variant:"destructive"});return}const c=x.current.map(t=>t.current).filter(t=>t!==null).map(t=>t.getUpdatedFurniture()),m=c.reduce((t,r)=>t+r.totals.furnitureTotal,0),k=await S({quoteId:P,organizationId:s,data:{quoteId:P,organizationId:s,projectId:u.projectId,brandName:T,laminateBrand:A,furnitures:c,grandTotal:m,notes:"Generated with brand variant"}});fe({src:k.url,alt:k.fileName}),re({title:"success",description:"scuesssfully vrated"})}catch(c){re({title:"Error",description:((n=(i=c==null?void 0:c.response)==null?void 0:i.data)==null?void 0:n.message)??"Operation failed"})}};return l.useEffect(()=>{if(!(u!=null&&u.furnitures))return;const i=u.furnitures.map(n=>({furnitureName:n.furnitureName,coreMaterials:n.coreMaterials||[],fittingsAndAccessories:n.fittingsAndAccessories||[],glues:n.glues||[],nonBrandMaterials:n.nonBrandMaterials||[],totals:{core:n.coreMaterialsTotal||0,fittings:n.fittingsAndAccessoriesTotal||0,glues:n.gluesTotal||0,nbms:n.nonBrandMaterialsTotal||0,furnitureTotal:n.furnitureTotal||0},plywoodBrand:T,laminateBrand:A}));Z(i)},[u]),x.current.length!==F.length&&(x.current=F.map((i,n)=>x.current[n]??xe.createRef())),l.useEffect(()=>{console.log("furnitureRefs Array",x),x.current=F.map((i,n)=>x.current[n]??l.createRef())},[F]),l.useEffect(()=>{!T&&(C==null?void 0:C.length)>0&&g(C[0])},[C]),l.useEffect(()=>{!A&&(o==null?void 0:o.length)>0&&D(o[0])},[o]),e.jsxs("div",{className:"p-2 max-h-full overflow-y-auto",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 pb-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("button",{onClick:()=>R(-1),className:"flex items-center justify-center w-8 h-8 bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-md transition-colors flex-shrink-0",children:e.jsx("i",{className:"fas fa-arrow-left text-gray-600 text-sm"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:((J=u==null?void 0:u.projectId)==null?void 0:J.projectName)||"Project"}),e.jsxs("p",{className:"text-md text-gray-500",children:["Quote: #",(u==null?void 0:u.quoteNo)||"-"]})]})]}),e.jsx(me,{onClick:te,disabled:q,className:"flex-shrink-0",children:q?"Generating...":"Generate Quote"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Plywood Brand:"}),e.jsx(Y,{options:C,placeholder:"Select Plywood Brand",searchPlaceholder:"Search brands...",onSelect:g,selectedValue:T||"",className:"flex-1"})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 whitespace-nowrap",children:"Laminate Brand:"}),e.jsx(Y,{options:o,placeholder:"Select Laminate Brand",searchPlaceholder:"Search brands...",onSelect:D,selectedValue:A||"",className:"flex-1"})]})})]}),e.jsxs("div",{className:" grid grid-cols-3 gap-2",children:[e.jsx(se,{className:"px-2 py-4 border-l-4 border-blue-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Project Cost "," "," ",e.jsx("span",{className:"font-bold",children:"(without profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-blue-600",children:["₹",U.toLocaleString("en-IN")]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-green-600",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Client Quote Amount "," "," ",e.jsx("span",{className:"font-bold",children:"(with profit)"})]}),e.jsxs("p",{className:"text-md font-bold text-green-600",children:["₹",Q.toLocaleString("en-IN")]})]})}),e.jsx(se,{className:"px-2 py-4 border-l-4 border-violet-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-md text-gray-600",children:"Profit Amount"}),e.jsxs("p",{className:"text-md font-bold text-violet-600",children:["₹",z.toLocaleString("en-IN")," ",e.jsxs("span",{className:"text-black !text-[12px] ml-[5px] font-semibold",children:["(",$.toFixed(2),"%)"]})]})]})})]})]}),y||I?e.jsx(ue,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[F.map((i,n)=>e.jsx(Ne,{index:n,data:i,ref:x.current[n],laminateRatesByBrand:p,brandRatesByName:_,selectedBrand:T,selectedLaminateBrand:A,brandOptions:C,laminateBrandOptions:o,onFurnitureChange:O},n)),e.jsx("div",{className:"mt-10 text-right",children:e.jsxs("div",{className:"inline-block bg-green-50 border border-green-200 rounded-md px-6 py-4",children:[e.jsx("p",{className:"text-md font-medium text-gray-700 mb-1",children:"Total Estimate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["₹",Q.toLocaleString("en-IN")]})]})})]})})]})};export{be as DEFAULT_LAMINATE_RATE_PER_SQFT,we as default};
