import{c as u,j as a,M as w,t as e,h as B}from"./index-CBsAK0nv.js";import{b,c as j,d as I}from"./billAccountApi-BasDRrT4.js";import{B as S}from"./BillAccForm-CuvMrd5k.js";import"./vendorAccApi-Bo3h5kOy.js";import"./OrderMaterialOverview-DPfqeiU4.js";import"./AssignStaff-sIZdITJf.js";import"./ResetStageButton-B7sMo0Hh.js";import"./ShareDocumentWhatsapp-B5KdABdk.js";import"./documentationApi-D-dHEfnd.js";import"./requirementFormApi-Kwdfn7sN.js";import"./orderMaterialHistoryApi-Tv_wZzhK.js";import"./shopLibDetailApi-7Q-KTTTk.js";import"./StageGuide-DK1G5Ici.js";import"./TextArea-CXePV1lw.js";import"./InfoToolTip-Bzqq-lrW.js";const q=()=>{const{id:i}=u(),{organizationId:p}=u(),{data:f,isLoading:g,isError:x,error:h,refetch:s}=b(i||""),l=j(),n=I(),v=async o=>{var r,c,d,m;if(i)try{const t=await l.mutateAsync({billId:i,billData:o});await s(),await B({src:(r=t==null?void 0:t.pdfData)==null?void 0:r.url,alt:(c=t==null?void 0:t.pdfData)==null?void 0:c.originalName}),e({title:"Success",description:"Bill updated successfully"})}catch(t){e({title:"Error",description:((m=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:m.message)||(t==null?void 0:t.message)||"Failed to update",variant:"destructive"})}},y=async o=>{if(i)try{await n.mutateAsync({billId:i,files:o}),s(),e({title:"Success",description:"Documents uploaded successfully"})}catch{e({title:"Error",description:"Failed to upload documents",variant:"destructive"})}};return g?a.jsx(w,{}):x?a.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",h.message]}):a.jsx("main",{className:"max-h-full overflow-y-auto",children:a.jsx(S,{mode:"view",organizationId:p,initialData:f,onSubmit:v,onQuickUpload:y,refetch:s,isSubmitting:l.isPending||n.isPending})})};export{q as default};
