import{c as w,q as m}from"./index-DLaY3p7d.js";import{g as d}from"./roleCheck-BlurDUv2.js";import{u as E}from"./useQuery-CsoXJJPn.js";import{u as g}from"./useMutation-BqZ7KIEa.js";import{u as A}from"./useInfiniteQuery-CNErvLuT.js";const b=async({organizationId:n,vendorId:t,page:e,limit:a,date:o,billToDate:s,billFromDate:f,createdFromDate:l,createdToDate:c,search:u,sortBy:y,sortOrder:h,api:p})=>{const r=new URLSearchParams;n&&r.append("organizationId",n),t&&r.append("vendorId",t),e&&r.append("page",e.toString()),a&&r.append("limit",a.toString()),o&&r.append("date",o),y&&r.append("sortBy",y),h&&r.append("sortOrder",h),u&&r.append("search",u),s&&r.append("billToDate",s),f&&r.append("billFromDate",f),l&&r.append("createdFromDate",l),c&&r.append("createdToDate",c);const{data:i}=await p.get(`/department/accounting/bill/getallbill?${r.toString()}`);if(!i.ok)throw new Error(i.message);return i},P=async({billData:n,files:t,api:e})=>{const a=new FormData,{images:o,items:s,...f}=n;Object.entries(f).forEach(([c,u])=>{u!=null&&a.append(c,String(u))}),s&&a.append("items",JSON.stringify(s)),t&&t.length>0&&t.forEach(c=>a.append("files",c));const{data:l}=await e.post("/department/accounting/bill/createbill",a);if(!l.ok)throw new Error(l.message);return l.data},S=async({billData:n,billId:t,api:e})=>{const{data:a}=await e.post(`/department/accounting/bill/updatebill/${t}`,n);if(!a.ok)throw new Error(a.message);return a.data},k=async({billId:n,api:t})=>{const{data:e}=await t.post(`/department/accounting/bill/synctoaccounts/${n}`);if(!e.ok)throw new Error(e.message);return e.data},B=async({billId:n,files:t,api:e})=>{const a=new FormData;t.forEach(s=>a.append("files",s));const{data:o}=await e.post(`/department/accounting/bill/upload-images/${n}`,a);if(!o.ok)throw new Error(o.message);return o.data},I=async({billId:n,api:t})=>{const{data:e}=await t.delete(`/department/accounting/bill/deletebill/${n}`);if(!e.ok)throw new Error(e.message);return e.data},q=async({billId:n,imageId:t,api:e})=>{const{data:a}=await e.delete(`/department/accounting/bill/deleteimage/${n}/${t}`);if(!a.ok)throw new Error(a.message);return a.data},R=async({billId:n,api:t})=>{const{data:e}=await t.get(`/department/accounting/bill/getsinglebill/${n}`);if(!e.ok)throw new Error(e.message);return e.data},Q=({organizationId:n,vendorId:t,limit:e=10,search:a,date:o,billToDate:s,billFromDate:f,createdFromDate:l,createdToDate:c,sortBy:u,sortOrder:y})=>{const h=["owner","staff","CTO"],{role:p}=w(),r=d(p);return A({queryKey:["bills",n,t,e,o,a,u,y,s,f,l,c],queryFn:async({pageParam:i=1})=>{if(!p||!h.includes(p))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await b({organizationId:n,vendorId:t,page:i,limit:e,date:o,billToDate:s,billFromDate:f,createdFromDate:l,createdToDate:c,search:a,sortBy:u,sortOrder:y,api:r})},getNextPageParam:i=>{if(i.pagination.page<i.pagination.totalPages)return i.pagination.page+1},getPreviousPageParam:i=>{if(i.pagination.page>1)return i.pagination.page-1},initialPageParam:1,enabled:!!p&&h.includes(p)&&!!n})},$=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=d(t);return g({mutationFn:async({billData:a,files:o})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await P({billData:a,files:o,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["bills"]})}})},v=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=d(t);return g({mutationFn:async({billData:a,billId:o})=>{if(!t||!n.includes(t))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await S({billData:a,billId:o,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["bills"]})}})},T=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=d(t);return g({mutationFn:async({billId:a})=>{if(!t||!n.includes(t))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await k({billId:a,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["bills"]})}})},U=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=d(t);return g({mutationFn:async({billId:a,files:o})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await B({billId:a,files:o,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["bills"]})}})},G=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=d(t);return g({mutationFn:async({billId:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await I({billId:a,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["bills"]})}})},x=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=d(t);return g({mutationFn:async({billId:a,imageId:o})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await q({billId:a,api:e,imageId:o})},onSuccess:()=>{m.invalidateQueries({queryKey:["bills"]})}})},D=n=>{const t=["owner","staff","CTO"],{role:e}=w(),a=d(e);return E({queryKey:["bill",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await R({billId:n,api:a})},enabled:!!n&&!!e&&t.includes(e)})};export{G as a,D as b,v as c,U as d,$ as e,x as f,T as g,Q as u};
