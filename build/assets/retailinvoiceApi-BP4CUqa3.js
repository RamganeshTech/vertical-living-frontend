import{e as w,q as p}from"./index-DbiIFs0V.js";import{g as f}from"./roleCheck-Daj0VMmM.js";import{u as g}from"./useQuery-BZZcyQnK.js";import{u as d}from"./useMutation-YUV1wh1S.js";import{u as m}from"./useInfiniteQuery-Cvw7XQ4x.js";const v=async({organizationId:n,customerId:t,page:e,limit:a,date:s,search:c,api:u,sortBy:l,sortOrder:i})=>{const o=new URLSearchParams;n&&o.append("organizationId",n),t&&o.append("customerId",t),e&&o.append("page",e.toString()),a&&o.append("limit",a.toString()),s&&o.append("date",s),l&&o.append("sortBy",l),i&&o.append("sortOrder",i),c&&o.append("search",c);const{data:r}=await u.get(`/department/accounting/retailinvoice/getallinvoice?${o.toString()}`);if(!r.ok)throw new Error(r.message);return r},y=async({invoiceData:n,api:t})=>{const{data:e}=await t.post("/department/accounting/retailinvoice/createinvocie",n);if(!e.ok)throw new Error(e.message);return e.data},h=async({invoiceId:n,api:t})=>{const{data:e}=await t.delete(`/department/accounting/retailinvoice/deleteinvoice/${n}`);if(!e.ok)throw new Error(e.message);return e.data},R=async({invoiceId:n,api:t})=>{const{data:e}=await t.get(`/department/accounting/retailinvoice/getsingleinvoice/${n}`);if(!e.ok)throw new Error(e.message);return e.data},q=({organizationId:n,customerId:t,limit:e=10,search:a,date:s,sortBy:c,sortOrder:u})=>{const l=["owner","staff","CTO"],{role:i}=w(),o=f(i);return m({queryKey:["retailinvoices",n,t,e,s,a,c,u],queryFn:async({pageParam:r=1})=>{if(!i||!l.includes(i))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await v({organizationId:n,customerId:t,page:r,limit:e,date:s,search:a,api:o,sortBy:c,sortOrder:u})},getNextPageParam:r=>{if(r.pagination.page<r.pagination.totalPages)return r.pagination.page+1},getPreviousPageParam:r=>{if(r.pagination.page>1)return r.pagination.page-1},initialPageParam:1,enabled:!!i&&l.includes(i)&&!!n})},S=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=f(t);return d({mutationFn:async({invoiceData:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await y({invoiceData:a,api:e})},onSuccess:()=>{p.invalidateQueries({queryKey:["retailinvoices"]})}})},C=()=>{const n=["owner","staff","CTO"],{role:t}=w(),e=f(t);return d({mutationFn:async({invoiceId:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await h({invoiceId:a,api:e})},onSuccess:()=>{p.invalidateQueries({queryKey:["retailinvoices"]})}})},F=n=>{const t=["owner","staff","CTO"],{role:e}=w(),a=f(e);return g({queryKey:["retailinvoice",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await R({invoiceId:n,api:a})},enabled:!!n&&!!e&&t.includes(e)})};export{C as a,S as b,F as c,q as u};
