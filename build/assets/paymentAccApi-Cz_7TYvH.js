import{c as s,i as c,x as u,d as i,k as l,q as y,g as r}from"./index-CUvv9ev0.js";const w=async({api:t,filters:n,pageParam:e=1})=>{const{data:a}=await t.get("/department/accounting/payments/section/getallpayments",{params:{...n,page:e,limit:10}});if(!a.success)throw new Error("Failed to fetch payments");return a},m=async({api:t,id:n})=>{const{data:e}=await t.get(`/department/accounting/payments/section/getsinglepayments/${n}`);if(!e.success&&!e.ok)throw new Error(e.message||"Failed to fetch payment");return e.data},d=async({api:t,id:n})=>{const{data:e}=await t.delete(`/department/accounting/payments/section/deletepayments/${n}`);if(!e.success&&!e.ok)throw new Error(e.message||"Failed to delete payment");return e},f=async({id:t,api:n})=>{const{data:e}=await n.post(`/department/accounting/payments/section/syncpaymenttoaccounts/${t}`);if(!e.success)throw new Error(e.message);return e.data},g=(t={})=>{const n=["owner","staff","CTO"],{role:e}=s(),a=r(e);return c({queryKey:["accounting","payments","infinite",t],queryFn:async({pageParam:o=1})=>{if(!e||!n.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not found");return await w({api:a,filters:t,pageParam:o})},initialPageParam:1,getNextPageParam:o=>o.pagination.nextPage??void 0,enabled:!!e&&!!a})},h=t=>{const n=["owner","staff","CTO"],{role:e}=s(),a=r(e);return l({queryKey:["accounting","payments","single",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this api call");if(!a)throw new Error("API instance not found for role");if(!t)throw new Error("Payment ID is required");return await m({api:a,id:t})},enabled:!!e&&!!a&&!!t})},P=()=>{const t=["owner","staff","CTO"],{role:n}=s(),e=r(n),a=u();return i({mutationFn:async o=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await d({api:e,id:o})},onSuccess:()=>{a.invalidateQueries({queryKey:["accounting","payments","all"]})}})},E=()=>{const t=["owner","staff","CTO"],{role:n}=s(),e=r(n);return i({mutationFn:async({id:a})=>{if(!n||!t.includes(n))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await f({id:a,api:e})},onSuccess:()=>{y.invalidateQueries({queryKey:["bills"]})}})};export{P as a,h as b,E as c,g as u};
