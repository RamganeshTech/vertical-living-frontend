import{n as m,m as i,o as c,q as w,A as d,p as s,E as h}from"./index-BO7-A9Kz.js";const p=async({projectId:a,api:e})=>{const{data:t}=await e.get(`/orderingmaterial/getalldetails/${a}`);if(!t.ok)throw new Error(t.message);return t.data},K=a=>{const e=["owner","staff","CTO","worker","client"],{role:t}=i(),r=s(t);return m({queryKey:["ordering-material-history",a],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("Not allowed to fetch ordering material");if(!r)throw new Error("API not available");return await p({projectId:a,api:r})},enabled:!!t&&!!a&&!!r,retry:!1,refetchOnMount:!1})},g=async({formId:a,projectId:e,deadLine:t,api:r})=>{const{data:n}=await r.put(`/orderingmaterial/deadline/${e}/${a}`,{deadLine:t});if(!n.ok)throw new Error(n.message);return n.data},E=async({projectId:a,api:e})=>{const{data:t}=await e.put(`/orderingmaterial/completionstatus/${a}`);if(!t.ok)throw new Error(t.message);return t.data},O=async(a,e,t)=>{const{data:r}=await t.put(`/orderingmaterial/${a}/delivery-location`,e);if(!r.ok)throw new Error(r.message);return r.data},Q=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=d();return c({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update delivery location");if(!t)throw new Error("API instance not available");return await O(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material",o]})}})},T=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return c({mutationFn:async({formId:r,projectId:n,deadLine:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await g({formId:r,projectId:n,deadLine:o,api:t})},onSuccess:(r,n)=>{w.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})},M=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return c({mutationFn:async({projectId:r})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await E({projectId:r,api:t})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},q=async({projectId:a})=>{const{data:e}=await h.get(`https://houseofram.in/api/orderingmaterial/getpublic/${a}`);if(console.log("data",e),!e.ok)throw new Error(e.message);return e.data},F=a=>m({queryKey:["ordering-material-public",a],queryFn:async()=>await q({projectId:a}),enabled:!!a,retry:!1,refetchOnMount:!1}),v=async({projectId:a,organizationId:e,api:t})=>{const{data:r}=await t.patch(`/orderingmaterial/generatelink/${a}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},k=async({projectId:a,pdfId:e,status:t,api:r})=>{const{data:n}=await r.patch(`/orderingmaterial/upddatepdfstatus/${a}/${e}`,{status:t});if(!n.ok)throw new Error(n.message);return n.data},R=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return c({mutationFn:async({projectId:r,organizationId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await v({projectId:r,api:t,organizationId:n})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},_=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e);return c({mutationFn:async({projectId:r,pdfId:n,status:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await k({projectId:r,pdfId:n,status:o,api:t})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},A=async({projectId:a,unitId:e,subItemName:t,quantity:r,unit:n,api:o})=>{const{data:l}=await o.post(`/orderingmaterial/${a}/unit/${e}/addsubitem`,{subItemName:t,quantity:r,unit:n});if(!l.ok)throw new Error(l.message);return l.data},D=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=d();return c({mutationFn:async({projectId:n,unitId:o,subItemName:l,quantity:u,unit:y})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await A({projectId:n,unitId:o,subItemName:l,quantity:u,unit:y,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},S=async({projectId:a,unitId:e,subItemId:t,api:r})=>{const{data:n}=await r.delete(`/orderingmaterial/${a}/unit/${e}/deletesubitem/${t}`);if(!n.ok)throw new Error(n.message);return n.data},b=async(a,e)=>{const{data:t}=await e.delete(`/orderingmaterial/deleteallsubunits/${a}`);if(!t.ok)throw new Error(t.message);return t.data},j=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=d();return c({mutationFn:async({projectId:n,unitId:o,subItemId:l})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await S({projectId:n,unitId:o,subItemId:l,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},H=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=d();return c({mutationFn:async({projectId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await b(n,t)},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},I=async({projectId:a,unitId:e,subItemId:t,subItemName:r,quantity:n,unit:o,api:l})=>{const{data:u}=await l.put(`/orderingmaterial/${a}/unit/${e}/updatesubitem/${t}`,{subItemName:r,quantity:n,unit:o});if(!u.ok)throw new Error(u.message);return u.data},U=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=d();return c({mutationFn:async({projectId:n,unitId:o,subItemId:l,subItemName:u,quantity:y,unit:f})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await I({projectId:n,unitId:o,subItemId:l,subItemName:u,quantity:y,unit:f,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},$=async(a,e,t)=>{const{data:r}=await t.put(`/orderingmaterial/${a}/shop`,e);if(!r.ok)throw new Error(r.message);return r.data},G=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=d();return c({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update shop details");if(!t)throw new Error("API instance not available");return await $(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material-history",o]})}})},C=async(a,e,t)=>{const{data:r}=await t.delete(`/orderingmaterial/delete/${a}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},L=()=>{const a=["owner","staff","CTO"],{role:e}=i(),t=s(e),r=d();return c({mutationFn:async({projectId:n,pdfId:o})=>{if(!e||!a.includes(e))throw new Error("Youre not allowed to delete pdf");if(!t)throw new Error("API instance not available");return await C(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material-history",o]})}})};export{R as a,_ as b,D as c,j as d,U as e,T as f,M as g,Q as h,L as i,G as j,H as k,F as l,K as u};
