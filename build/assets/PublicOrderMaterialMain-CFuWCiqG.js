import{u as h,a as j,r as m,j as e,B as c,C as f,t as d}from"./index-BAM0eJUz.js";import{u as b,a as N,P as y}from"./PublicOrderMaterialCompo-C4JydCmI.js";import"./OrderMaterialOverview-6X9CUgR9.js";import"./Card-CdxfjEr-.js";import"./AssignStaff-Bt6qrEbL.js";import"./Input-1UBXZqEj.js";import"./getAllUsersApi-O0JEgRtZ.js";import"./ResetStageButton-DaUxSSZv.js";import"./orderMaterialHistoryApi-CM4FQ_Il.js";import"./downloadFile-BbGV_BaX.js";import"./SearchSelectNew-IGAHiELy.js";import"./ImageGalleryMain-B3g6b13d.js";import"./index-C8BdbktQ.js";import"./ShortListMain-CkHPlJB3.js";import"./StageGuide-e28gQ0h1.js";import"./vendorAccApi-m3R96_-K.js";import"./useInfiniteQuery-BGz0VllC.js";import"./dateFormator-BGKi5rfZ.js";const Y=()=>{const{organizationId:i}=h(),x=j(),[a,n]=m.useState(""),{data:l}=b(i),s=l==null?void 0:l.map(t=>({_id:t._id,projectName:t.projectName}));m.useEffect(()=>{var t;s&&s.length>0&&!a&&n((t=s[0])==null?void 0:t._id)},[s,a]);const{mutateAsync:u,isPending:p}=N(),g=async()=>{var t,o;try{await u({projectId:a}),d({title:"Success",description:"Order Sent to Ordering Material Stage"})}catch(r){d({title:"Error",description:((o=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:o.message)||(r==null?void 0:r.message)||"Failed to generate link",variant:"destructive"})}};return i?e.jsxs("div",{className:"min-h-screen max-h-screen overflow-y-auto bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-3 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>x(-1),children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:f.COMPANY_NAME}),e.jsx("span",{className:"text-sm text-gray-500",children:" Order Materials"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"min-w-[250px]",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Select Project"}),e.jsx("select",{value:a,onChange:t=>n(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:s==null?void 0:s.map(t=>e.jsx("option",{value:t._id,children:t.projectName},t._id))})]}),e.jsx(c,{onClick:g,disabled:p,className:"min-w-[140px] bg-blue-600 hover:bg-blue-700 text-white font-medium",size:"lg",children:"Send To Order Material"})]})]})})}),e.jsx("main",{className:"max-w-full mx-auto px-4 py-8",children:a?e.jsx("div",{children:e.jsx(y,{selectedProjectId:a,organizationId:i})}):e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("i",{className:"fas fa-project-diagram text-gray-300 text-5xl mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Please select a project to continue"})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-red-500 text-5xl mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"No Organization ID Found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Please set up your organization first."}),e.jsx(c,{onClick:()=>window.location.href="/ordermaterial/setup",className:"mt-4",children:"Go to Setup"})]})})};export{Y as default};
