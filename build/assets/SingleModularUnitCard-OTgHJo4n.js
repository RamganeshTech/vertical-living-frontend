import{b as U,r as d,i as P,j as e,B as n,I as A,t as i}from"./index-N5JcrWW5.js";import{a as D}from"./fieldConfigs-D8rzC0F2.js";import{u as L}from"./selectedModularUnitApi-DFCbi1VK.js";const F=({unit:s,onEdit:m})=>{var g,p,u;const{projectId:f}=U(),[h,y]=d.useState(!1),{mutateAsync:j,isPending:o}=D(),{mutateAsync:b,isPending:N}=L(),v=P(),[w,x]=d.useState(!1),[c,S]=d.useState(1),I=v.pathname.includes("projectdetails"),C=async()=>{var t,r;try{if(!window.confirm("Are you sure you want to delete this unit?"))return;await j({unitId:s._id,unitType:s.category,organizationId:s.organizationId}),i({title:"Success",description:"Product deleted successfully"})}catch(a){i({title:"Error",description:((r=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:r.message)||(a==null?void 0:a.message)||"Failed to delete",variant:"destructive"})}},E=async()=>{var t,r,a;if(!c||c<=0){i({title:"Invalid Quantity",description:"Quantity must be greater than 0"});return}try{const l={image:(t=s==null?void 0:s.images[0])==null?void 0:t.url,customId:s.customId,unitId:s._id,projectId:f,category:s.category,singleUnitCost:s.price,quantity:c};await b(l),i({title:"Success",description:"Unit selected successfully"}),x(!1)}catch(l){i({title:"Error",description:((a=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to select unit"})}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100 hover:border-blue-200",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200",children:[(p=(g=s.images)==null?void 0:g[0])!=null&&p.url&&!h?e.jsx("img",{src:s.images[0].url||"/placeholder.svg",alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:()=>y(!0)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-image text-gray-400 text-3xl mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No Image"})]})}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx("div",{className:"flex gap-2"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm",children:s==null?void 0:s.category})}),s.price&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"bg-green-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign"}),s.price.toLocaleString()]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-base mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:s.name||"Unnamed Product"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("i",{className:"fas fa-hashtag text-gray-400 text-xs"}),e.jsx("p",{className:"text-xs text-gray-500 font-mono truncate",children:s.customId||s._id})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-tag text-blue-500 text-xs"}),"Category"]}),e.jsx("span",{className:"font-medium text-gray-900 capitalize truncate ml-2",children:(s==null?void 0:s.category)||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign text-green-500 text-xs"}),"Price"]}),e.jsxs("span",{className:"font-bold text-green-600",children:["â‚¹",((u=s.price)==null?void 0:u.toLocaleString())||"N/A"]})]})]}),I?e.jsx(e.Fragment,{children:w?e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{type:"number",min:1,value:c,onChange:t=>S(Number(t.target.value)),placeholder:"Enter Quantity",className:"w-full"}),e.jsx(n,{variant:"primary",isLoading:N,onClick:E,className:"w-full",children:"Submit"})]}):e.jsxs(n,{variant:"primary",className:"w-full",onClick:()=>x(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Select"]})}):e.jsxs("div",{className:"flex gap-2",children:[m&&e.jsxs(n,{onClick:()=>m(s),className:"flex-1 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 hover:border-blue-300 py-2 px-3 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(n,{variant:"danger",onClick:C,disabled:o,className:"flex-1 bg-red-600 text-white  py-2 px-3 rounded-lg transition-all disabled:opacity-50 text-sm",children:[e.jsx("i",{className:`fas ${o?"fa-spinner fa-spin":"fa-trash"} mr-1`}),o?"Deleting...":"Delete"]})]})]})]})};export{F as S};
