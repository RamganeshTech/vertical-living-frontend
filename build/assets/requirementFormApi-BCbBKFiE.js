import{u as d}from"./useQuery-h0LZ4b8f.js";import{g as a,q as m,h as l,i as f}from"./index-Dkf7SbMA.js";import{u as c}from"./useMutation-DtRxugN4.js";import{g as i}from"./roleCheck-CXq1v0D5.js";const s=["owner","staff","CTO","client","worker"],y=async({projectId:e,payload:t,token:o})=>{const{data:r}=await f.post(`https://houseofram.in/api/requirementform/createrequirement/${e}?token=${o}`,t);if(!r.ok)throw new Error(r.message);return r.data},h=async({projectId:e,payload:t,api:o})=>{const{data:r}=await o.post(`/requirementform/createRoom/${e}`,t);if(!r.ok)throw new Error(r.message);return r},p=async({projectId:e,roomId:t,api:o})=>{const{data:r}=await o.delete(`/requirementform/deleteroom/${e}/${t}`);if(!r.ok)throw new Error(r.message);return r},q=async({projectId:e,roomId:t,itemId:o,payload:r,api:n})=>{const{data:u}=await n.put(`/requirementform/updateroomitem/${e}/${t}/${o}`,r);if(!u.ok)throw new Error(u.message);return u},F=async({projectId:e,roomId:t,itemId:o,api:r})=>{const{data:n}=await r.delete(`/requirementform/deleteitem/${e}/${t}/${o}`);if(!n.ok)throw new Error(n.message);return n},E=async({projectId:e,api:t})=>{const{data:o}=await t.get(`/requirementform/getrequirementform/${e}`);if(!o.ok)throw new Error(o.message);return o==null?void 0:o.data},R=async({projectId:e,roomId:t,api:o})=>{const{data:r}=await o.get(`/requirementform/getroomwise/${e}/${t}`);if(!r.ok)throw new Error(r.message);return r.data},$=async({projectId:e,api:t})=>{const{data:o}=await t.post(`/requirementform/formsharelink/${e}`);if(!o.ok)throw new Error(o.message);return o.data},g=async({formId:e,projectId:t,api:o})=>{const{data:r}=await o.patch(`/requirementform/formcompleted/${t}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},k=async({formId:e,projectId:t,deadLine:o,api:r})=>{const{data:n}=await r.patch(`/requirementform/deadline/${t}/${e}`,{deadLine:o});if(!n.ok)throw new Error(n.message);return n.data},A=async({formId:e,projectId:t,files:o,api:r})=>{const n=new FormData;return o.forEach(w=>n.append("file",w)),(await r.post(`/requirementform/upload/multiple/${t}/${e}`,n,{headers:{"Content-Type":"multipart/form-data"}})).data},S=async(e,t,o)=>{const{data:r}=await o.patch(`/requirementform/${e}/deleteuploadedfile/${t}`);if(!r.ok)throw new Error(r.message);return r.data},_=()=>{const{role:e}=a(),t=i(e);return c({mutationFn:async({projectId:o,fileId:r})=>{if(!e||!s.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await S(o,r,t)},onSuccess:(o,{projectId:r})=>{m.invalidateQueries({queryKey:["requirementForm",r]})}})},D=()=>c({mutationFn:async({projectId:e,payload:t,token:o})=>await y({projectId:e,payload:t,token:o}),onSuccess:(e,{projectId:t})=>{m.invalidateQueries({queryKey:["requirementForm",t]})}}),b=()=>{const{role:e}=a(),t=i(e);return c({mutationFn:async({projectId:o})=>{if(!e||!s.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await $({projectId:o,api:t})},onSuccess:(o,{projectId:r})=>{m.invalidateQueries({queryKey:["requirementForm",r]})}})},N=()=>{const{role:e}=a(),t=i(e);return c({mutationFn:async({formId:o,projectId:r})=>{if(!e)throw new Error("not authorized");if(!s.includes(e))throw new Error("you  dont have the access to make this api");if(!t)throw new Error("api is null");return await g({formId:o,projectId:r,api:t})},onSuccess:(o,{projectId:r})=>{m.invalidateQueries({queryKey:["requirementForm"]}),m.invalidateQueries({queryKey:["siteMeasurement",r]})}})},U=()=>{const{role:e}=a(),t=i(e);return c({mutationFn:async({formId:o,deadLine:r,projectId:n})=>{if(!e)throw new Error("not authorized");if(!s.includes(e))throw new Error("you dont have the access to make this api");if(!t)throw new Error("api is not available");return await k({formId:o,deadLine:r,projectId:n,api:t})},onSuccess:(o,{projectId:r})=>{m.invalidateQueries({queryKey:["requirementForm",r]})}})},G=()=>{const{role:e}=a(),t=i(e);return c({mutationFn:async({formId:o,files:r,projectId:n})=>{if(!e)throw new Error("not authorized");if(!s.includes(e))throw new Error("you  dont have the access to make this api");if(!t)throw new Error("api is null");return await A({formId:o,projectId:n,files:r,api:t})},onSuccess:(o,{projectId:r})=>{m.invalidateQueries({queryKey:["requirementForm",r]})}})},z=()=>{const{role:e}=a(),t=i(e),o=l();return c({mutationFn:async({projectId:r,payload:n})=>{if(!e||!s.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found");return await h({projectId:r,payload:n,api:t})},onSuccess:(r,{projectId:n})=>{o.invalidateQueries({queryKey:["requirementForm",n]})}})},L=()=>{const{role:e}=a(),t=i(e),o=l();return c({mutationFn:async({projectId:r,roomId:n})=>{if(!e||!s.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found");return await p({projectId:r,roomId:n,api:t})},onSuccess:(r,{projectId:n})=>{o.invalidateQueries({queryKey:["requirementForm",n]})}})},T=()=>{const{role:e}=a(),t=i(e),o=l();return c({mutationFn:async({projectId:r,roomId:n,itemId:u,payload:w})=>{if(!e||!s.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found");return await q({projectId:r,roomId:n,itemId:u,payload:w,api:t})},onSuccess:(r,{projectId:n,roomId:u})=>{o.invalidateQueries({queryKey:["requirementFormRoom",n,u]})}})},x=()=>{const{role:e}=a(),t=i(e),o=l();return c({mutationFn:async({projectId:r,roomId:n,itemId:u})=>{if(!e||!s.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found");return await F({projectId:r,roomId:n,itemId:u,api:t})},onSuccess:(r,{projectId:n,roomId:u})=>{o.invalidateQueries({queryKey:["requirementFormRoom",n,u]})}})},M=({projectId:e})=>{const{role:t}=a(),o=i(t);return d({queryKey:["requirementForm",e],queryFn:async()=>{if(!t||!s.includes(t))throw new Error("Not allowed");if(!o)throw new Error("API instance not found");return await E({projectId:e,api:o})},retry:!1})},Y=({projectId:e,roomId:t})=>{const{role:o}=a(),r=i(o);return d({queryKey:["requirementFormRoom",e,t],queryFn:async()=>{if(!o||!s.includes(o))throw new Error("Not allowed");if(!r)throw new Error("API instance not found");return await R({projectId:e,roomId:t,api:r})},enabled:!!e&&!!t,retry:!1})},v=async(e,t,o,r)=>{const{data:n}=await r.post(`/requirementform/${e}/${t}/upload`,o,{headers:{"Content-Type":"multipart/form-data"}});if(!n.ok)throw new Error(n.message);return n.data},O=()=>{const{role:e}=a(),t=i(e);return c({mutationFn:async({projectId:o,sectionName:r,files:n})=>{if(!e||!s.includes(e))throw new Error("You are not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await v(o,r,n,t)},onSuccess:(o,{projectId:r})=>{m.invalidateQueries({queryKey:["requirementForm",r]})}})},K=async(e,t,o,r)=>{const{data:n}=await r.delete(`/requirementform/${e}/${t}/${o}/deletefile`);if(!n.ok)throw new Error(n.message);return n.data},B=()=>{const{role:e}=a(),t=i(e);return c({mutationFn:async({projectId:o,sectionName:r,fileId:n})=>{if(!e||!s.includes(e))throw new Error("You are not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await K(o,r,n,t)},onSuccess:(o,{projectId:r})=>{m.invalidateQueries({queryKey:["requirementForm",r]})}})};export{O as a,B as b,Y as c,T as d,x as e,D as f,L as g,b as h,N as i,U as j,G as k,_ as l,z as m,M as u};
