import{f as a,h as u,s as l,b as c,i as s}from"./index-BAM0eJUz.js";import{u as w}from"./useInfiniteQuery-BGz0VllC.js";const d=async(e,r)=>{const{data:o}=await r.post("/toolroom/create",e);if(!o.ok)throw new Error(o.message);return o.data},m=async({id:e,updateData:r,api:o})=>{const{data:t}=await o.patch(`/toolroom/update/${e}`,r);if(!t.ok)throw new Error(t.message);return t.data},f=async({params:e,api:r})=>{const{data:o}=await r.get("/toolroom/getall",{params:e});if(!o.ok)throw new Error(o.message);return o},y=async(e,r)=>{const{data:o}=await r.get(`/toolroom/get/${e}`);if(!o.ok)throw new Error(o.message);return o.data},h=async(e,r)=>{const{data:o}=await r.delete(`/toolroom/delete/${e}`);if(!o.ok)throw new Error(o.message);return o},i=["owner","staff","CTO"],E=()=>{const{role:e}=a(),r=s(e);return u({mutationFn:async o=>{if(!e||!i.includes(e))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await d(o,r)},onSuccess:()=>{l.invalidateQueries({queryKey:["toolroom"]})}})},R=()=>{const{role:e}=a(),r=s(e);return u({mutationFn:async({id:o,updateData:t})=>{if(!e||!i.includes(e))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await m({id:o,updateData:t,api:r})},onSuccess:()=>{l.invalidateQueries({queryKey:["toolroom"]})}})},A=e=>{const r=["owner","staff","CTO","worker"],{role:o}=a(),t=s(o);return w({queryKey:["toolroom","all",e],queryFn:async({pageParam:n=1})=>{if(!o||!r.includes(o))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await f({params:{...e,page:n,limit:10},api:t})},initialPageParam:1,getNextPageParam:n=>{if(n.currentPage<n.totalPages)return n.currentPage+1},enabled:!!o&&!!t})},T=e=>{const{role:r}=a(),o=s(r);return c({queryKey:["toolroom",e],queryFn:async()=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await y(e,o)},enabled:!!e&&!!r&&!!o})},P=()=>{const{role:e}=a(),r=s(e);return u({mutationFn:async o=>{if(!e||!i.includes(e))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await h(o,r)},onSuccess:()=>{l.invalidateQueries({queryKey:["toolroom"]})}})};export{P as a,T as b,R as c,E as d,A as u};
