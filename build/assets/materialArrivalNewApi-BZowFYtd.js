import{u}from"./useQuery-BPoeBSke.js";import{d as s,f as c,n as w}from"./index-DcYk0AxP.js";import{u as l}from"./useMutation-BbhnaANP.js";import{g as o}from"./roleCheck-D-Yu12LV.js";const m=async(a,e,r)=>(await w.put(`https://houseofram.in/api/materialarrivalcheck/updateImage/${a}/${e}`,r)).data,$=()=>{const a=c();return l({mutationFn:async({projectId:e,fieldId:r,formData:t})=>await m(e,r,t),onSuccess:(e,{projectId:r})=>{a.invalidateQueries({queryKey:["material-arrival",r]})}})},y=async(a,e,r,t)=>(await t.put(`/materialarrivalcheck/updateverification/${a}/${e}`,{isVerified:r})).data,q=()=>{const{role:a}=s(),e=o(a),r=c(),t=["owner","staff","CTO"];return l({mutationFn:async({projectId:i,unitName:n,toggle:d})=>{if(!a||!t.includes(a))throw new Error("Unauthorized");return await y(i,n,d,e)},onSuccess:(i,{projectId:n})=>{r.invalidateQueries({queryKey:["material-arrival",n]})}})},f=async(a,e)=>(await e.get(`/materialarrivalcheck/getalldetails/${a}`)).data.data,b=a=>{const{role:e}=s(),r=o(e),t=["owner","staff","CTO"];return u({queryKey:["material-arrival",a],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Unauthorized");return await f(a,r)},enabled:!!a&&!!e,retry:!1,refetchOnMount:!1})},p=async(a,e)=>(await e.post(`/materialarrivalcheck/${a}/generate-link`)).data.data,v=async(a,e)=>(await w.get(`https://houseofram.in/api/materialarrivalcheck/public/${a}/${e}`)).data.data,k=()=>{const{role:a}=s(),e=o(a),r=["owner","staff","CTO"];return l({mutationFn:async({projectId:t})=>{if(!a||!r.includes(a))throw new Error("Unauthorized");return await p(t,e)}})},C=(a,e)=>u({queryKey:["material-arrival-public",a,e],queryFn:async()=>await v(a,e),enabled:!!a&&!!e});export{b as a,k as b,C as c,$ as d,q as u};
