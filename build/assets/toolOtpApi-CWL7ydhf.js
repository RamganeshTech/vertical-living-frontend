import{f as e,h as s,b as w,s as f,i as n}from"./index-BAM0eJUz.js";import{u as p}from"./useInfiniteQuery-BGz0VllC.js";const y=async(t,r)=>{const{data:o}=await t.get(`/tool/getalltool/${r}`);if(!o.ok)throw new Error(o.message);return o.data},m=async(t,r)=>{const{data:o}=await t.get(`/tool/getalltoolroom/${r}`);if(!o.ok)throw new Error(o.message);return o.data},g=async(t,r)=>{const{data:o}=await r.post("/tool/issue/generateotp",t);if(!o.ok)throw new Error(o.message);return o.data},E=async(t,r)=>{const{data:o}=await r.patch("/tool/issue/enterotp",t);if(!o.ok)throw new Error(o.message);return o.data},T=async(t,r)=>{const{data:o}=await r.post("/tool/issue/resendotp",t);if(!o.ok)throw new Error(o.message);return o.data},A=async(t,r)=>{const{data:o}=await r.post("/tool/return/generateotp",t);if(!o.ok)throw new Error(o.message);return o.data},I=async(t,r)=>{const{data:o}=await r.patch("/tool/return/enterotp",t);if(!o.ok)throw new Error(o.message);return o.data},P=async(t,r)=>{const{data:o}=await r.post("/tool/return/resendotp",t);if(!o.ok)throw new Error(o.message);return o.data},i=["owner","staff","CTO"],d=["owner","staff","CTO","worker"],q=t=>{const{role:r}=e(),o=n(r);return w({queryKey:["toolmaster","withoutpagination",t],queryFn:async()=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await y(o,t)},enabled:!!t})},U=t=>{const{role:r}=e(),o=n(r);return w({queryKey:["toolroom","withoutpagination",t],queryFn:async()=>{if(!r||!i.includes(r))throw new Error("Unauthorized");if(!o)throw new Error("API instance not found for role");return await m(o,t)},enabled:!!t})},v=()=>{const{role:t}=e(),r=n(t);return s({mutationFn:async o=>{if(!t||!i.includes(t))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await g(o,r)}})},O=()=>{const{role:t}=e(),r=n(t);return s({mutationFn:async o=>{if(!t||!d.includes(t))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await E(o,r)},onSuccess:()=>{f.invalidateQueries({queryKey:["toolmaster"]})}})},b=()=>{const{role:t}=e(),r=n(t);return s({mutationFn:async o=>{if(!t||!i.includes(t))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await A(o,r)}})},K=()=>{const{role:t}=e(),r=n(t);return s({mutationFn:async o=>{if(!t||!d.includes(t))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await I(o,r)},onSuccess:()=>{f.invalidateQueries({queryKey:["toolmaster"]})}})},z=()=>{const{role:t}=e(),r=n(t);return s({mutationFn:async o=>{if(!t||!i.includes(t))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await T(o,r)}})},C=()=>{const{role:t}=e(),r=n(t);return s({mutationFn:async o=>{if(!t||!i.includes(t))throw new Error("Unauthorized");if(!r)throw new Error("API instance not found for role");return await P(o,r)}})},R=async({toolId:t,params:r,api:o})=>{const{data:a}=await o.get(`/tool/history/${t}`,{params:r});if(!a.ok)throw new Error(a.message);return a},D=(t,r)=>{const o=["owner","staff","CTO","worker"],{role:a}=e(),u=n(a);return p({queryKey:["tool","history",t,r],queryFn:async({pageParam:c=1})=>{if(!a||!o.includes(a))throw new Error("not allowed to make this api call");if(!u)throw new Error("API instance not found for role");return await R({toolId:t,params:{...r,page:c,limit:10},api:u})},initialPageParam:1,getNextPageParam:c=>{const{currentPage:l,totalPages:h}=c.pagination||{};if(l<h)return l+1},enabled:!!a&&!!u&&!!t})};export{D as a,z as b,C as c,q as d,v as e,b as f,O as g,K as h,U as u};
