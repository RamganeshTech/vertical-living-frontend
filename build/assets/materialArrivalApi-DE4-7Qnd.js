import{u as d}from"./useQuery-mUmMtORz.js";import{z as c,V as w}from"./index-DkfQDeIt.js";import{u as l}from"./useMutation-BWlLDX_I.js";import{u as s,g as o}from"./roleCheck-DNL7PxQZ.js";const u=["owner","staff","CTO"],y=async(a,e,r)=>(await r.put(`/materialarrivalcheck/${a}/shop`,e)).data,v=async(a,e,r)=>(await r.put(`/materialarrivalcheck/${a}/delivery-location`,e)).data,p=async(a,e,r,t)=>(await t.put(`/materialarrivalcheck/${a}/room/${e}`,r)).data,h=async(a,e,r,t)=>(await t.delete(`/materialarrivalcheck/${a}/room/${e}/${r}`)).data,f=async(a,e)=>(await e.get(`/materialarrivalcheck/${a}`)).data.data,A=async(a,e,r)=>(await r.get(`/materialarrivalcheck/${a}/room/${e}`)).data.data,M=async(a,e)=>(await e.post(`/materialarrivalcheck/${a}/generate-link`)).data.data,g=async(a,e)=>(await w.get(`https://houseofram.in/api/materialarrivalcheck/public/${a}/${e}`)).data.data,F=a=>{const e=["owner","staff","CTO","worker","client"],{role:r}=s(),t=o(r);return d({queryKey:["material-arrival",a],queryFn:()=>f(a,t),enabled:!!a&&!!r&&e.includes(r),retry:!1,refetchOnMount:!1})},R=(a,e)=>{const r=["owner","staff","CTO","worker","client"],{role:t}=s(),i=o(t);return d({queryKey:["material-arrival-room",a,e],queryFn:()=>A(a,e,i),enabled:!!a&&!!e&&!!t&&r.includes(t),retry:!1,refetchOnMount:!1})},b=()=>{const{role:a}=s(),e=o(a),r=c();return l({mutationFn:async({projectId:t,updates:i})=>{if(!a||!u.includes(a))throw new Error("Unauthorized");return await y(t,i,e)},onSuccess:(t,{projectId:i})=>{r.invalidateQueries({queryKey:["material-arrival",i]})}})},Q=()=>{const{role:a}=s(),e=o(a),r=c();return l({mutationFn:async({projectId:t,updates:i})=>{if(!a||!u.includes(a))throw new Error("Unauthorized");return await v(t,i,e)},onSuccess:(t,{projectId:i})=>{r.invalidateQueries({queryKey:["material-arrival",i]})}})},U=()=>{const{role:a}=s(),e=o(a),r=c();return l({mutationFn:async({projectId:t,roomKey:i,formData:n})=>{if(!a||!u.includes(a))throw new Error("Unauthorized");return await p(t,i,n,e)},onSuccess:(t,{projectId:i,roomKey:n})=>{r.invalidateQueries({queryKey:["material-arrival-room",i,n]})}})},D=()=>{const{role:a}=s(),e=o(a),r=c();return l({mutationFn:async({projectId:t,roomKey:i,itemId:n})=>{if(!a||!u.includes(a))throw new Error("Unauthorized");return await h(t,i,n,e)},onSuccess:(t,{projectId:i,roomKey:n})=>{r.invalidateQueries({queryKey:["material-arrival-room",i,n]})}})},K=()=>{const{role:a}=s(),e=o(a);return l({mutationFn:async({projectId:r})=>{if(!a||!u.includes(a))throw new Error("Unauthorized");return await M(r,e)}})},O=(a,e)=>d({queryKey:["material-arrival-public",a,e],queryFn:async()=>await g(a,e),enabled:!!a&&!!e}),q=async({formId:a,projectId:e,deadLine:r,api:t})=>{const{data:i}=await t.put(`/materialarrivalcheck/deadline/${e}/${a}`,{deadLine:r});if(!i.ok)throw new Error(i.message);return i.data},k=async({projectId:a,api:e})=>{const{data:r}=await e.put(`/materialarrivalcheck/completionstatus/${a}`);if(!r.ok)throw new Error(r.message);return r.data},z=()=>{const a=["owner","staff","CTO"],{role:e}=s(),r=o(e),t=c();return l({mutationFn:async({formId:i,projectId:n,deadLine:m})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await q({formId:i,projectId:n,deadLine:m,api:r})},onSuccess:(i,n)=>{t.invalidateQueries({queryKey:["ordering-material",n.formId]})}})},_=()=>{const a=["owner","staff","CTO"],{role:e}=s(),r=o(e),t=c();return l({mutationFn:async({projectId:i})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await k({projectId:i,api:r})},onSuccess:(i,{projectId:n})=>{t.invalidateQueries({queryKey:["ordering-material",n]})}})};export{b as a,Q as b,K as c,z as d,_ as e,R as f,U as g,D as h,O as i,F as u};
