import{f as p,b as v,r as a,j as l,O as P,au as R,av as U}from"./index-hYGmCEO1.js";import{M as D,S as x}from"./MobileSidebar-DramAlWT.js";import"./CTOApi-zcZBp4ES.js";import"./clientApi-Bzqkqq6k.js";import"./staffApi-B-gnBjmC.js";import"./userApi-DWOCneiF.js";import"./workerApi-D7n0wQHM.js";import"./currentActiveStageApi-BwW21U35.js";import"./notificationApi-e37HAKjH.js";import"./issueDiscussionApi-B7UGzClZ.js";const V={INVENTORY:"inventory",WORKERS:"inviteworker",INVITECLIENT:"inviteclient",PREREQUISTIES:"prerequisites",REQUIREMENTFORM:"clientrequirement",SITEMEASUREMENT:"sitemeasurement",SAMPLEDESIGN:"sampledesign",WORKSCHEDULE:"workschedule",TECHNICALCONSULTANT:"technicalconsultant",PAYMENTCONFIRMATION:"paymentconfirmation",MODULARUNIT:"modularunit",ORDERMATERIALS:"ordermaterial",MATERIALARRIVED:"materialarrival",INSTALLATION:"installation",QUALITYCHECK:"qualitycheck",CLEANINGSANITATION:"cleaning",PROJECTDELIVERY:"projectdelivery"},_=({projectId:e,setProjectId:m,organizationId:t,setOrganizationId:h})=>{const T=p(),{role:n,permission:r}=v(),C=(n==null?void 0:n.toLowerCase())||"",[A,c]=a.useState(!1),[S,f]=a.useState(window.innerWidth<470),[o,O]=a.useState("Vertical Living");a.useLayoutEffect(()=>{const s=T.pathname.split("/");m(s[3]),h(s[1])},[T.pathname]),a.useEffect(()=>{const s=()=>{f(window.innerWidth<470)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const u={INVENTORY:e?`/${t}/projectdetails/${e}/inventory`:"",WORKERS:e?`/${t}/projectdetails/${e}/workers`:"",INVITECLIENT:e?`/${t}/projectdetails/${e}/inviteclient`:"",PREREQUISTIES:e?`/${t}/projectdetails/${e}/prerequisites`:"",REQUIREMENTFORM:e?`/${t}/projectdetails/${e}/requirementform`:"",SITEMEASUREMENT:e?`/${t}/projectdetails/${e}/sitemeasurement`:"",SAMPLEDESIGN:e?`/${t}/projectdetails/${e}/sampledesign`:"",WORKSCHEDULE:e?`/${t}/projectdetails/${e}/workmainschedule`:"",TECHNICALCONSULTANT:e?`/${t}/projectdetails/${e}/technicalconsultant`:"",PAYMENTCONFIRMATION:e?`/${t}/projectdetails/${e}/paymentconfirmation`:"",MODULARUNIT:e?`/${t}/projectdetails/${e}/modularunitsnew`:"",ORDERMATERIALS:e?`/${t}/projectdetails/${e}/ordermaterial`:"",MATERIALARRIVED:e?`/${t}/projectdetails/${e}/materialarrival`:"",INSTALLATION:e?`/${t}/projectdetails/${e}/installation`:"",QUALITYCHECK:e?`/${t}/projectdetails/${e}/qualitycheck`:"",CLEANINGSANITATION:e?`/${t}/projectdetails/${e}/cleaning`:"",PROJECTDELIVERY:e?`/${t}/projectdetails/${e}/projectdelivery`:""},b=Object.keys(R);let L=[];L=b;let i={},N={},E={};return L.forEach(s=>{R[s]&&u[s]&&(i[s]=R[s],N[s]=U[s],E[s]=u[s])}),C!=="owner"&&Object.keys(i).forEach(s=>{const $=V[s];if($){const M=r==null?void 0:r[$];M&&Object.values(M).some(w=>w===!0)||(delete i[s],delete N[s],delete E[s])}}),l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex w-screen h-screen",children:[S?l.jsx(D,{labels:i,path:E,isOpen:A,onClose:()=>c(!1)}):l.jsx(x,{path:E,labels:i,icons:N,setProjectName:O,projectName:o}),l.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:l.jsx(P,{context:{projectId:e,setProjectId:m,isMobile:S,isMobileSidebarOpen:A,openMobileSidebar:()=>c(!0),closeMobileSidebar:()=>c(!1),setProjectName:O,projectName:o}})})]})})};export{_ as default};
