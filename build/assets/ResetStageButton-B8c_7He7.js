import{k as w,j as r,B as m,t as d}from"./index-Dre-3JFT.js";import{u as h,g as R}from"./roleCheck-CIuNrpTb.js";const x=async({projectId:t,stageNumber:s,stagePath:a,api:n})=>{const{data:e}=await n.put(`/stage${s}/${a}/${t}`);if(!e.ok)throw new Error(e.message);return e},y=()=>{const{role:t}=h(),s=R(t),a=["staff","owner","CTO"];return w({mutationFn:async({projectId:n,stageNumber:e,stagePath:o})=>{if(!t||!a.includes(t))throw new Error("You are not authorized to reset this stage.");if(!s)throw new Error("API instance not available.");return await x({projectId:n,stageNumber:e,stagePath:o,api:s})}})},v=({projectId:t,stageNumber:s,stagePath:a,buttonClass:n="bg-red-600 text-white",iconClass:e="fas fa-rotate-left",disabled:o=!1,className:g=""})=>{const{mutateAsync:f,isPending:c}=y(),p=async()=>{var l,u;try{await f({projectId:t,stageNumber:s,stagePath:a}),d({description:"Stage Reset successfully",title:"Success"})}catch(i){d({title:"Error",description:((u=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:u.message)||"Failed to Reset the stage",variant:"destructive"})}};return r.jsx("div",{className:`space-y-1 w-full ${g}`,children:r.jsxs(m,{onClick:p,variant:"danger",disabled:c||o,className:`${n} flex items-center gap-2 !p-2 w-full`,children:[r.jsx("i",{className:e}),r.jsx("span",{children:c?"Resetting...":"Reset Stage"})]})})};export{v as R};
