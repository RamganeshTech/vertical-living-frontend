import{r as n,j as t}from"./index-e8sHY52i.js";import{B as l}from"./Button-45UYJ-Fj.js";import{I as w}from"./Input-BH7aLFkl.js";import{t as i}from"./toast-BSC5QTk1.js";const C=({projectId:x,context:h,label:f,generateLink:u,isPending:o,data:r})=>{const[s,c]=n.useState(""),[d,p]=n.useState(!1);n.useEffect(()=>{typeof r=="string"&&c(r)},[r]);const b=async()=>{try{await navigator.clipboard.writeText(s),p(!0),setTimeout(()=>p(!1),1500)}catch{i({title:"Error",description:"Failed to copy link",variant:"destructive"})}},g=()=>{const a=encodeURIComponent(`Hey, please check this ${h} link:\`${s}`);window.open(`https://wa.me/?text=${a}`,"_blank")},k=async()=>{var a,m;try{const e=await u({projectId:x});e!=null&&e.shareableUrl&&(c(e.shareableUrl),i({title:"Link generated",description:"You can now share the link",variant:"default"}))}catch(e){i({title:"Error",description:((m=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:m.message)||(e==null?void 0:e.message)||"Failed to generate link",variant:"destructive"})}};return t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 shadow-sm w-full max-w-xl",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[t.jsx("i",{className:"fas fa-link"})," ",f||"Generate Shareable Link"]})}),s?t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[t.jsx(w,{readOnly:!0,value:s,className:"flex-1 text-sm cursor-default"}),t.jsxs(l,{onClick:b,variant:"outline",className:"flex gap-2",children:[t.jsx("i",{className:`fas ${d?"fa-check-circle":"fa-copy"}`}),d?"Copied":"Copy"]}),t.jsxs(l,{onClick:g,className:"bg-green-500 hover:bg-green-600 text-white flex gap-2",children:[t.jsx("i",{className:"fab fa-whatsapp"}),"Share"]})]}):t.jsx(l,{onClick:k,disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:o?"Generating...":"Generate Link"})]})};export{C as G};
