import{u as l}from"./useQuery-C2l_NFV4.js";import{u as i}from"./useMutation-BNs_TkNH.js";import{e as a,q as o,h as d}from"./index-Duiduteo.js";import{g as s}from"./roleCheck-CeVvsM7Q.js";const p=async({id:e,payload:t,api:r})=>{const{data:n}=await r.put(`/department/procurement/updateshop/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},w=async({id:e,payload:t,api:r})=>{const{data:n}=await r.put(`/department/procurement/updatedelivery/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},m=async({id:e,api:t})=>{const{data:r}=await t.delete(`/department/procurement/deleteprocurement/${e}`);if(!r.ok)throw new Error(r.message);return r.data},y=async({organizationId:e,projectId:t,api:r})=>{const n=new URLSearchParams;e&&n.append("organizationId",e),t&&n.append("projectId",t);const{data:c}=await r.get(`/department/procurement/getprocurementall?${n.toString()}`);if(!c.ok)throw new Error(c.message);return c.data},f=async({id:e})=>{const{data:t}=await d.get(`https://houseofram.in/api/department/procurement/getprocurementsingle/${e}`);if(!t.ok)throw new Error(t.message);return t.data},h=async({id:e,payload:t,api:r})=>{const{data:n}=await r.put(`/department/procurement/updatetotalcost/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},g=async({id:e,api:t})=>{const{data:r}=await t.patch(`/department/procurement/generatepdf/${e}`);if(!r.ok)throw new Error(r.message);return r.data},P=async(e,t,r)=>{const{data:n}=await r.delete(`/department/procurement/deletepdf/${e}/${t}`);if(!n.ok)throw new Error(n.message);return n.data},E=async(e,t)=>{const{data:r}=await t.post(`/department/procurement/synclogistics/${e}`);if(!r.ok)throw new Error(r.message);return r.data},u=["owner","CTO","staff"],Q=()=>{const{role:e}=a(),t=s(e);return i({mutationFn:async({id:r,payload:n})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await p({id:r,payload:n,api:t})},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},S=()=>{const{role:e}=a(),t=s(e);return i({mutationFn:async({id:r,payload:n})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await w({id:r,payload:n,api:t})},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},k=()=>{const{role:e}=a(),t=s(e);return i({mutationFn:async({id:r})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await m({id:r,api:t})},onSuccess:()=>{o.invalidateQueries({queryKey:["procurement","details"]})}})},D=(e,t)=>{const{role:r}=a(),n=s(r);return l({queryKey:["procurement","details",e,t],queryFn:async()=>{if(!r||!u.includes(r))throw new Error("Not allowed");if(!n)throw new Error("API instance not found for role");return await y({organizationId:e,api:n,projectId:t.projectId})},enabled:!!e&&!!r&&!!n})},$=e=>l({queryKey:["procurement","single",e],queryFn:async()=>await f({id:e}),enabled:!!e}),F=()=>{const{role:e}=a(),t=s(e);return i({mutationFn:async({id:r,payload:n})=>{if(!e||!u.includes(e))throw new Error("Not allowed");if(!t)throw new Error("API instance not found for role");return await h({id:r,payload:n,api:t})},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},I=()=>{const e=["owner","staff","CTO"],{role:t}=a(),r=s(t);return i({mutationFn:async({id:n})=>{if(!t||!e.includes(t))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await g({id:n,api:r})},onSuccess:(n,{id:c})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",c]})}})},N=()=>{const{role:e}=a(),t=s(e);return i({mutationFn:async({id:r,pdfId:n})=>{if(!e||!u.includes(e))throw new Error("Youre not allowed to delete pdf");if(!t)throw new Error("API instance not available");return await P(r,n,t)},onSuccess:(r,{id:n})=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["procurement","single",n]})}})},L=()=>{const{role:e}=a(),t=s(e);return i({mutationFn:async({id:r})=>{if(!e||!u.includes(e))throw new Error("Youre not allowed to delete pdf");if(!t)throw new Error("API instance not available");return await E(r,t)},onSuccess:()=>{o.invalidateQueries({queryKey:["procurement","details"]}),o.invalidateQueries({queryKey:["logistics","shipments"]})}})};export{Q as a,S as b,F as c,I as d,N as e,L as f,D as g,k as h,$ as u};
