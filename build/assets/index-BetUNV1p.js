var Ag=t=>{throw TypeError(t)};var cm=(t,a,l)=>a.has(t)||Ag("Cannot "+l);var Q=(t,a,l)=>(cm(t,a,"read from private field"),l?l.call(t):a.get(t)),Ae=(t,a,l)=>a.has(t)?Ag("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(t):a.set(t,l),ve=(t,a,l,r)=>(cm(t,a,"write to private field"),r?r.call(t,l):a.set(t,l),l),ze=(t,a,l)=>(cm(t,a,"access private method"),l);var Qo=(t,a,l,r)=>({set _(o){ve(t,a,o,l)},get _(){return Q(t,a,r)}});(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function l(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=l(o);fetch(o.href,d)}})();function Rj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dm={exports:{}},si={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function Tj(){if(Og)return si;Og=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(r,o,d){var m=null;if(d!==void 0&&(m=""+d),o.key!==void 0&&(m=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:t,type:r,key:m,ref:o!==void 0?o:null,props:d}}return si.Fragment=a,si.jsx=l,si.jsxs=l,si}var Rg;function Pj(){return Rg||(Rg=1,dm.exports=Tj()),dm.exports}var e=Pj(),um={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg;function Mj(){if(Tg)return qe;Tg=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,C={};function j(O,$,D){this.props=O,this.context=$,this.refs=C,this.updater=D||k}j.prototype.isReactComponent={},j.prototype.setState=function(O,$){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,$,"setState")},j.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function S(){}S.prototype=j.prototype;function v(O,$,D){this.props=O,this.context=$,this.refs=C,this.updater=D||k}var N=v.prototype=new S;N.constructor=v,y(N,j.prototype),N.isPureReactComponent=!0;var M=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function z(O,$,D,V,J,ge){return D=ge.ref,{$$typeof:t,type:O,key:$,ref:D!==void 0?D:null,props:ge}}function q(O,$){return z(O.type,$,void 0,void 0,void 0,O.props)}function H(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function ue(O){var $={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(D){return $[D]})}var U=/\/+/g;function I(O,$){return typeof O=="object"&&O!==null&&O.key!=null?ue(""+O.key):$.toString(36)}function Y(){}function G(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Y,Y):(O.status="pending",O.then(function($){O.status==="pending"&&(O.status="fulfilled",O.value=$)},function($){O.status==="pending"&&(O.status="rejected",O.reason=$)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function re(O,$,D,V,J){var ge=typeof O;(ge==="undefined"||ge==="boolean")&&(O=null);var ae=!1;if(O===null)ae=!0;else switch(ge){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(O.$$typeof){case t:case a:ae=!0;break;case g:return ae=O._init,re(ae(O._payload),$,D,V,J)}}if(ae)return J=J(O),ae=V===""?"."+I(O,0):V,M(J)?(D="",ae!=null&&(D=ae.replace(U,"$&/")+"/"),re(J,$,D,"",function(Ve){return Ve})):J!=null&&(H(J)&&(J=q(J,D+(J.key==null||O&&O.key===J.key?"":(""+J.key).replace(U,"$&/")+"/")+ae)),$.push(J)),1;ae=0;var Se=V===""?".":V+":";if(M(O))for(var be=0;be<O.length;be++)V=O[be],ge=Se+I(V,be),ae+=re(V,$,D,ge,J);else if(be=w(O),typeof be=="function")for(O=be.call(O),be=0;!(V=O.next()).done;)V=V.value,ge=Se+I(V,be++),ae+=re(V,$,D,ge,J);else if(ge==="object"){if(typeof O.then=="function")return re(G(O),$,D,V,J);throw $=String(O),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ae}function _(O,$,D){if(O==null)return O;var V=[],J=0;return re(O,V,"","",function(ge){return $.call(D,ge,J++)}),V}function X(O){if(O._status===-1){var $=O._result;$=$(),$.then(function(D){(O._status===0||O._status===-1)&&(O._status=1,O._result=D)},function(D){(O._status===0||O._status===-1)&&(O._status=2,O._result=D)}),O._status===-1&&(O._status=0,O._result=$)}if(O._status===1)return O._result.default;throw O._result}var ce=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function te(){}return qe.Children={map:_,forEach:function(O,$,D){_(O,function(){$.apply(this,arguments)},D)},count:function(O){var $=0;return _(O,function(){$++}),$},toArray:function(O){return _(O,function($){return $})||[]},only:function(O){if(!H(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},qe.Component=j,qe.Fragment=l,qe.Profiler=o,qe.PureComponent=v,qe.StrictMode=r,qe.Suspense=x,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,qe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return P.H.useMemoCache(O)}},qe.cache=function(O){return function(){return O.apply(null,arguments)}},qe.cloneElement=function(O,$,D){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var V=y({},O.props),J=O.key,ge=void 0;if($!=null)for(ae in $.ref!==void 0&&(ge=void 0),$.key!==void 0&&(J=""+$.key),$)!L.call($,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&$.ref===void 0||(V[ae]=$[ae]);var ae=arguments.length-2;if(ae===1)V.children=D;else if(1<ae){for(var Se=Array(ae),be=0;be<ae;be++)Se[be]=arguments[be+2];V.children=Se}return z(O.type,J,void 0,void 0,ge,V)},qe.createContext=function(O){return O={$$typeof:m,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:d,_context:O},O},qe.createElement=function(O,$,D){var V,J={},ge=null;if($!=null)for(V in $.key!==void 0&&(ge=""+$.key),$)L.call($,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(J[V]=$[V]);var ae=arguments.length-2;if(ae===1)J.children=D;else if(1<ae){for(var Se=Array(ae),be=0;be<ae;be++)Se[be]=arguments[be+2];J.children=Se}if(O&&O.defaultProps)for(V in ae=O.defaultProps,ae)J[V]===void 0&&(J[V]=ae[V]);return z(O,ge,void 0,void 0,null,J)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(O){return{$$typeof:p,render:O}},qe.isValidElement=H,qe.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:X}},qe.memo=function(O,$){return{$$typeof:h,type:O,compare:$===void 0?null:$}},qe.startTransition=function(O){var $=P.T,D={};P.T=D;try{var V=O(),J=P.S;J!==null&&J(D,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(te,ce)}catch(ge){ce(ge)}finally{P.T=$}},qe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},qe.use=function(O){return P.H.use(O)},qe.useActionState=function(O,$,D){return P.H.useActionState(O,$,D)},qe.useCallback=function(O,$){return P.H.useCallback(O,$)},qe.useContext=function(O){return P.H.useContext(O)},qe.useDebugValue=function(){},qe.useDeferredValue=function(O,$){return P.H.useDeferredValue(O,$)},qe.useEffect=function(O,$,D){var V=P.H;if(typeof D=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(O,$)},qe.useId=function(){return P.H.useId()},qe.useImperativeHandle=function(O,$,D){return P.H.useImperativeHandle(O,$,D)},qe.useInsertionEffect=function(O,$){return P.H.useInsertionEffect(O,$)},qe.useLayoutEffect=function(O,$){return P.H.useLayoutEffect(O,$)},qe.useMemo=function(O,$){return P.H.useMemo(O,$)},qe.useOptimistic=function(O,$){return P.H.useOptimistic(O,$)},qe.useReducer=function(O,$,D){return P.H.useReducer(O,$,D)},qe.useRef=function(O){return P.H.useRef(O)},qe.useState=function(O){return P.H.useState(O)},qe.useSyncExternalStore=function(O,$,D){return P.H.useSyncExternalStore(O,$,D)},qe.useTransition=function(){return P.H.useTransition()},qe.version="19.1.0",qe}var Pg;function Ec(){return Pg||(Pg=1,um.exports=Mj()),um.exports}var A=Ec();const ct=Rj(A);var mm={exports:{}},ai={},fm={exports:{}},hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function Fj(){return Mg||(Mg=1,function(t){function a(_,X){var ce=_.length;_.push(X);e:for(;0<ce;){var te=ce-1>>>1,O=_[te];if(0<o(O,X))_[te]=X,_[ce]=O,ce=te;else break e}}function l(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var X=_[0],ce=_.pop();if(ce!==X){_[0]=ce;e:for(var te=0,O=_.length,$=O>>>1;te<$;){var D=2*(te+1)-1,V=_[D],J=D+1,ge=_[J];if(0>o(V,ce))J<O&&0>o(ge,V)?(_[te]=ge,_[J]=ce,te=J):(_[te]=V,_[D]=ce,te=D);else if(J<O&&0>o(ge,ce))_[te]=ge,_[J]=ce,te=J;else break e}}return X}function o(_,X){var ce=_.sortIndex-X.sortIndex;return ce!==0?ce:_.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var m=Date,p=m.now();t.unstable_now=function(){return m.now()-p}}var x=[],h=[],g=1,b=null,w=3,k=!1,y=!1,C=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(_){for(var X=l(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=_)r(h),X.sortIndex=X.expirationTime,a(x,X);else break;X=l(h)}}function P(_){if(C=!1,M(_),!y)if(l(x)!==null)y=!0,L||(L=!0,I());else{var X=l(h);X!==null&&re(P,X.startTime-_)}}var L=!1,z=-1,q=5,H=-1;function ue(){return j?!0:!(t.unstable_now()-H<q)}function U(){if(j=!1,L){var _=t.unstable_now();H=_;var X=!0;try{e:{y=!1,C&&(C=!1,v(z),z=-1),k=!0;var ce=w;try{t:{for(M(_),b=l(x);b!==null&&!(b.expirationTime>_&&ue());){var te=b.callback;if(typeof te=="function"){b.callback=null,w=b.priorityLevel;var O=te(b.expirationTime<=_);if(_=t.unstable_now(),typeof O=="function"){b.callback=O,M(_),X=!0;break t}b===l(x)&&r(x),M(_)}else r(x);b=l(x)}if(b!==null)X=!0;else{var $=l(h);$!==null&&re(P,$.startTime-_),X=!1}}break e}finally{b=null,w=ce,k=!1}X=void 0}}finally{X?I():L=!1}}}var I;if(typeof N=="function")I=function(){N(U)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,G=Y.port2;Y.port1.onmessage=U,I=function(){G.postMessage(null)}}else I=function(){S(U,0)};function re(_,X){z=S(function(){_(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(_){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var ce=w;w=X;try{return _()}finally{w=ce}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(_,X){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var ce=w;w=_;try{return X()}finally{w=ce}},t.unstable_scheduleCallback=function(_,X,ce){var te=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?te+ce:te):ce=te,_){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ce+O,_={id:g++,callback:X,priorityLevel:_,startTime:ce,expirationTime:O,sortIndex:-1},ce>te?(_.sortIndex=ce,a(h,_),l(x)===null&&_===l(h)&&(C?(v(z),z=-1):C=!0,re(P,ce-te))):(_.sortIndex=O,a(x,_),y||k||(y=!0,L||(L=!0,I()))),_},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(_){var X=w;return function(){var ce=w;w=X;try{return _.apply(this,arguments)}finally{w=ce}}}}(hm)),hm}var Fg;function Lj(){return Fg||(Fg=1,fm.exports=Fj()),fm.exports}var xm={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function Dj(){if(Lg)return Ut;Lg=1;var t=Ec();function a(x){var h="https://react.dev/errors/"+x;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+x+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var r={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(x,h,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:x,containerInfo:h,implementation:g}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,h){if(x==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ut.createPortal=function(x,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(a(299));return d(x,h,null,g)},Ut.flushSync=function(x){var h=m.T,g=r.p;try{if(m.T=null,r.p=2,x)return x()}finally{m.T=h,r.p=g,r.d.f()}},Ut.preconnect=function(x,h){typeof x=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(x,h))},Ut.prefetchDNS=function(x){typeof x=="string"&&r.d.D(x)},Ut.preinit=function(x,h){if(typeof x=="string"&&h&&typeof h.as=="string"){var g=h.as,b=p(g,h.crossOrigin),w=typeof h.integrity=="string"?h.integrity:void 0,k=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?r.d.S(x,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:k}):g==="script"&&r.d.X(x,{crossOrigin:b,integrity:w,fetchPriority:k,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ut.preinitModule=function(x,h){if(typeof x=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=p(h.as,h.crossOrigin);r.d.M(x,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(x)},Ut.preload=function(x,h){if(typeof x=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,b=p(g,h.crossOrigin);r.d.L(x,g,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ut.preloadModule=function(x,h){if(typeof x=="string")if(h){var g=p(h.as,h.crossOrigin);r.d.m(x,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(x)},Ut.requestFormReset=function(x){r.d.r(x)},Ut.unstable_batchedUpdates=function(x,h){return x(h)},Ut.useFormState=function(x,h,g){return m.H.useFormState(x,h,g)},Ut.useFormStatus=function(){return m.H.useHostTransitionStatus()},Ut.version="19.1.0",Ut}var Dg;function _j(){if(Dg)return xm.exports;Dg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),xm.exports=Dj(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function qj(){if(_g)return ai;_g=1;var t=Lj(),a=Ec(),l=_j();function r(s){var n="https://react.dev/errors/"+s;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+s+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var n=s,i=s;if(s.alternate)for(;n.return;)n=n.return;else{s=n;do n=s,(n.flags&4098)!==0&&(i=n.return),s=n.return;while(s)}return n.tag===3?i:null}function m(s){if(s.tag===13){var n=s.memoizedState;if(n===null&&(s=s.alternate,s!==null&&(n=s.memoizedState)),n!==null)return n.dehydrated}return null}function p(s){if(d(s)!==s)throw Error(r(188))}function x(s){var n=s.alternate;if(!n){if(n=d(s),n===null)throw Error(r(188));return n!==s?null:s}for(var i=s,c=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(c=u.return,c!==null){i=c;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return p(u),s;if(f===c)return p(u),n;f=f.sibling}throw Error(r(188))}if(i.return!==c.return)i=u,c=f;else{for(var E=!1,R=u.child;R;){if(R===i){E=!0,i=u,c=f;break}if(R===c){E=!0,c=u,i=f;break}R=R.sibling}if(!E){for(R=f.child;R;){if(R===i){E=!0,i=f,c=u;break}if(R===c){E=!0,c=f,i=u;break}R=R.sibling}if(!E)throw Error(r(189))}}if(i.alternate!==c)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?s:n}function h(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s;for(s=s.child;s!==null;){if(n=h(s),n!==null)return n;s=s.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function I(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Symbol.for("react.client.reference");function G(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Y?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case y:return"Fragment";case j:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case N:return(s.displayName||"Context")+".Provider";case v:return(s._context.displayName||"Context")+".Consumer";case M:var n=s.render;return s=s.displayName,s||(s=n.displayName||n.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return n=s.displayName||null,n!==null?n:G(s.type)||"Memo";case q:n=s._payload,s=s._init;try{return G(s(n))}catch{}}return null}var re=Array.isArray,_=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},te=[],O=-1;function $(s){return{current:s}}function D(s){0>O||(s.current=te[O],te[O]=null,O--)}function V(s,n){O++,te[O]=s.current,s.current=n}var J=$(null),ge=$(null),ae=$(null),Se=$(null);function be(s,n){switch(V(ae,n),V(ge,s),V(J,null),n.nodeType){case 9:case 11:s=(s=n.documentElement)&&(s=s.namespaceURI)?sg(s):0;break;default:if(s=n.tagName,n=n.namespaceURI)n=sg(n),s=ag(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}D(J),V(J,s)}function Ve(){D(J),D(ge),D(ae)}function Vc(s){s.memoizedState!==null&&V(Se,s);var n=J.current,i=ag(n,s.type);n!==i&&(V(ge,s),V(J,i))}function Oi(s){ge.current===s&&(D(J),D(ge)),Se.current===s&&(D(Se),Xr._currentValue=ce)}var Yc=Object.prototype.hasOwnProperty,Wc=t.unstable_scheduleCallback,Xc=t.unstable_cancelCallback,ow=t.unstable_shouldYield,cw=t.unstable_requestPaint,Qs=t.unstable_now,dw=t.unstable_getCurrentPriorityLevel,Df=t.unstable_ImmediatePriority,_f=t.unstable_UserBlockingPriority,Ri=t.unstable_NormalPriority,uw=t.unstable_LowPriority,qf=t.unstable_IdlePriority,mw=t.log,fw=t.unstable_setDisableYieldValue,lr=null,is=null;function Ra(s){if(typeof mw=="function"&&fw(s),is&&typeof is.setStrictMode=="function")try{is.setStrictMode(lr,s)}catch{}}var os=Math.clz32?Math.clz32:pw,hw=Math.log,xw=Math.LN2;function pw(s){return s>>>=0,s===0?32:31-(hw(s)/xw|0)|0}var Ti=256,Pi=4194304;function gn(s){var n=s&42;if(n!==0)return n;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Mi(s,n,i){var c=s.pendingLanes;if(c===0)return 0;var u=0,f=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~f,c!==0?u=gn(c):(E&=R,E!==0?u=gn(E):i||(i=R&~s,i!==0&&(u=gn(i))))):(R=c&~f,R!==0?u=gn(R):E!==0?u=gn(E):i||(i=c&~s,i!==0&&(u=gn(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function rr(s,n){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&n)===0}function gw(s,n){switch(s){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zf(){var s=Ti;return Ti<<=1,(Ti&4194048)===0&&(Ti=256),s}function Uf(){var s=Pi;return Pi<<=1,(Pi&62914560)===0&&(Pi=4194304),s}function Zc(s){for(var n=[],i=0;31>i;i++)n.push(s);return n}function ir(s,n){s.pendingLanes|=n,n!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function bw(s,n,i,c,u,f){var E=s.pendingLanes;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=i,s.entangledLanes&=i,s.errorRecoveryDisabledLanes&=i,s.shellSuspendCounter=0;var R=s.entanglements,B=s.expirationTimes,ne=s.hiddenUpdates;for(i=E&~i;0<i;){var he=31-os(i),pe=1<<he;R[he]=0,B[he]=-1;var ie=ne[he];if(ie!==null)for(ne[he]=null,he=0;he<ie.length;he++){var oe=ie[he];oe!==null&&(oe.lane&=-536870913)}i&=~pe}c!==0&&If(s,c,0),f!==0&&u===0&&s.tag!==0&&(s.suspendedLanes|=f&~(E&~n))}function If(s,n,i){s.pendingLanes|=n,s.suspendedLanes&=~n;var c=31-os(n);s.entangledLanes|=n,s.entanglements[c]=s.entanglements[c]|1073741824|i&4194090}function $f(s,n){var i=s.entangledLanes|=n;for(s=s.entanglements;i;){var c=31-os(i),u=1<<c;u&n|s[c]&n&&(s[c]|=n),i&=~u}}function Jc(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ed(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bf(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:jg(s.type))}function yw(s,n){var i=X.p;try{return X.p=s,n()}finally{X.p=i}}var Ta=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ta,Yt="__reactProps$"+Ta,Xn="__reactContainer$"+Ta,td="__reactEvents$"+Ta,ww="__reactListeners$"+Ta,vw="__reactHandles$"+Ta,Hf="__reactResources$"+Ta,or="__reactMarker$"+Ta;function sd(s){delete s[qt],delete s[Yt],delete s[td],delete s[ww],delete s[vw]}function Zn(s){var n=s[qt];if(n)return n;for(var i=s.parentNode;i;){if(n=i[Xn]||i[qt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(s=ig(s);s!==null;){if(i=s[qt])return i;s=ig(s)}return n}s=i,i=s.parentNode}return null}function Jn(s){if(s=s[qt]||s[Xn]){var n=s.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return s}return null}function cr(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s.stateNode;throw Error(r(33))}function el(s){var n=s[Hf];return n||(n=s[Hf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function kt(s){s[or]=!0}var Qf=new Set,Gf={};function bn(s,n){tl(s,n),tl(s+"Capture",n)}function tl(s,n){for(Gf[s]=n,s=0;s<n.length;s++)Qf.add(n[s])}var jw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kf={},Vf={};function Nw(s){return Yc.call(Vf,s)?!0:Yc.call(Kf,s)?!1:jw.test(s)?Vf[s]=!0:(Kf[s]=!0,!1)}function Fi(s,n,i){if(Nw(n))if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":s.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(n);return}}s.setAttribute(n,""+i)}}function Li(s,n,i){if(i===null)s.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(n);return}s.setAttribute(n,""+i)}}function na(s,n,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttributeNS(n,i,""+c)}}var ad,Yf;function sl(s){if(ad===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);ad=n&&n[1]||"",Yf=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ad+s+Yf}var nd=!1;function ld(s,n){if(!s||nd)return"";nd=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var ie=oe}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(oe){ie=oe}s.call(pe.prototype)}}else{try{throw Error()}catch(oe){ie=oe}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&ie&&typeof oe.stack=="string")return[oe.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),E=f[0],R=f[1];if(E&&R){var B=E.split(`
`),ne=R.split(`
`);for(u=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;u<ne.length&&!ne[u].includes("DetermineComponentFrameRoot");)u++;if(c===B.length||u===ne.length)for(c=B.length-1,u=ne.length-1;1<=c&&0<=u&&B[c]!==ne[u];)u--;for(;1<=c&&0<=u;c--,u--)if(B[c]!==ne[u]){if(c!==1||u!==1)do if(c--,u--,0>u||B[c]!==ne[u]){var he=`
`+B[c].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=c&&0<=u);break}}}finally{nd=!1,Error.prepareStackTrace=i}return(i=s?s.displayName||s.name:"")?sl(i):""}function Sw(s){switch(s.tag){case 26:case 27:case 5:return sl(s.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 15:return ld(s.type,!1);case 11:return ld(s.type.render,!1);case 1:return ld(s.type,!0);case 31:return sl("Activity");default:return""}}function Wf(s){try{var n="";do n+=Sw(s),s=s.return;while(s);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Ns(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Xf(s){var n=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Cw(s){var n=Xf(s)?"checked":"value",i=Object.getOwnPropertyDescriptor(s.constructor.prototype,n),c=""+s[n];if(!s.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(s,n,{configurable:!0,get:function(){return u.call(this)},set:function(E){c=""+E,f.call(this,E)}}),Object.defineProperty(s,n,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){s._valueTracker=null,delete s[n]}}}}function Di(s){s._valueTracker||(s._valueTracker=Cw(s))}function Zf(s){if(!s)return!1;var n=s._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return s&&(c=Xf(s)?s.checked?"true":"false":s.value),s=c,s!==i?(n.setValue(s),!0):!1}function _i(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var kw=/[\n"\\]/g;function Ss(s){return s.replace(kw,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function rd(s,n,i,c,u,f,E,R){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),n!=null?E==="number"?(n===0&&s.value===""||s.value!=n)&&(s.value=""+Ns(n)):s.value!==""+Ns(n)&&(s.value=""+Ns(n)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),n!=null?id(s,E,Ns(n)):i!=null?id(s,E,Ns(i)):c!=null&&s.removeAttribute("value"),u==null&&f!=null&&(s.defaultChecked=!!f),u!=null&&(s.checked=u&&typeof u!="function"&&typeof u!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Ns(R):s.removeAttribute("name")}function Jf(s,n,i,c,u,f,E,R){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(s.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;i=i!=null?""+Ns(i):"",n=n!=null?""+Ns(n):i,R||n===s.value||(s.value=n),s.defaultValue=n}c=c??u,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function id(s,n,i){n==="number"&&_i(s.ownerDocument)===s||s.defaultValue===""+i||(s.defaultValue=""+i)}function al(s,n,i,c){if(s=s.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<s.length;i++)u=n.hasOwnProperty("$"+s[i].value),s[i].selected!==u&&(s[i].selected=u),u&&c&&(s[i].defaultSelected=!0)}else{for(i=""+Ns(i),n=null,u=0;u<s.length;u++){if(s[u].value===i){s[u].selected=!0,c&&(s[u].defaultSelected=!0);return}n!==null||s[u].disabled||(n=s[u])}n!==null&&(n.selected=!0)}}function eh(s,n,i){if(n!=null&&(n=""+Ns(n),n!==s.value&&(s.value=n),i==null)){s.defaultValue!==n&&(s.defaultValue=n);return}s.defaultValue=i!=null?""+Ns(i):""}function th(s,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(r(92));if(re(c)){if(1<c.length)throw Error(r(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=Ns(n),s.defaultValue=i,c=s.textContent,c===i&&c!==""&&c!==null&&(s.value=c)}function nl(s,n){if(n){var i=s.firstChild;if(i&&i===s.lastChild&&i.nodeType===3){i.nodeValue=n;return}}s.textContent=n}var Ew=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sh(s,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?s.setProperty(n,""):n==="float"?s.cssFloat="":s[n]="":c?s.setProperty(n,i):typeof i!="number"||i===0||Ew.has(n)?n==="float"?s.cssFloat=i:s[n]=(""+i).trim():s[n]=i+"px"}function ah(s,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(s=s.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var u in n)c=n[u],n.hasOwnProperty(u)&&i[u]!==c&&sh(s,u,c)}else for(var f in n)n.hasOwnProperty(f)&&sh(s,f,n[f])}function od(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ow=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(s){return Ow.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var cd=null;function dd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ll=null,rl=null;function nh(s){var n=Jn(s);if(n&&(s=n.stateNode)){var i=s[Yt]||null;e:switch(s=n.stateNode,n.type){case"input":if(rd(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=s;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ss(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==s&&c.form===s.form){var u=c[Yt]||null;if(!u)throw Error(r(90));rd(c,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===s.form&&Zf(c)}break e;case"textarea":eh(s,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&al(s,!!i.multiple,n,!1)}}}var ud=!1;function lh(s,n,i){if(ud)return s(n,i);ud=!0;try{var c=s(n);return c}finally{if(ud=!1,(ll!==null||rl!==null)&&(So(),ll&&(n=ll,s=rl,rl=ll=null,nh(n),s)))for(n=0;n<s.length;n++)nh(s[n])}}function dr(s,n){var i=s.stateNode;if(i===null)return null;var c=i[Yt]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=!1;if(la)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){md=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{md=!1}var Pa=null,fd=null,zi=null;function rh(){if(zi)return zi;var s,n=fd,i=n.length,c,u="value"in Pa?Pa.value:Pa.textContent,f=u.length;for(s=0;s<i&&n[s]===u[s];s++);var E=i-s;for(c=1;c<=E&&n[i-c]===u[f-c];c++);return zi=u.slice(s,1<c?1-c:void 0)}function Ui(s){var n=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&n===13&&(s=13)):s=n,s===10&&(s=13),32<=s||s===13?s:0}function Ii(){return!0}function ih(){return!1}function Wt(s){function n(i,c,u,f,E){this._reactName=i,this._targetInst=u,this.type=c,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(i=s[R],this[R]=i?i(f):f[R]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ii:ih,this.isPropagationStopped=ih,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),n}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$i=Wt(yn),mr=g({},yn,{view:0,detail:0}),Rw=Wt(mr),hd,xd,fr,Bi=g({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fr&&(fr&&s.type==="mousemove"?(hd=s.screenX-fr.screenX,xd=s.screenY-fr.screenY):xd=hd=0,fr=s),hd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),oh=Wt(Bi),Tw=g({},Bi,{dataTransfer:0}),Pw=Wt(Tw),Mw=g({},mr,{relatedTarget:0}),pd=Wt(Mw),Fw=g({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lw=Wt(Fw),Dw=g({},yn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_w=Wt(Dw),qw=g({},yn,{data:0}),ch=Wt(qw),zw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $w(s){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(s):(s=Iw[s])?!!n[s]:!1}function gd(){return $w}var Bw=g({},mr,{key:function(s){if(s.key){var n=zw[s.key]||s.key;if(n!=="Unidentified")return n}return s.type==="keypress"?(s=Ui(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Uw[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(s){return s.type==="keypress"?Ui(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ui(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Hw=Wt(Bw),Qw=g({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=Wt(Qw),Gw=g({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),Kw=Wt(Gw),Vw=g({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yw=Wt(Vw),Ww=g({},Bi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Xw=Wt(Ww),Zw=g({},yn,{newState:0,oldState:0}),Jw=Wt(Zw),ev=[9,13,27,32],bd=la&&"CompositionEvent"in window,hr=null;la&&"documentMode"in document&&(hr=document.documentMode);var tv=la&&"TextEvent"in window&&!hr,uh=la&&(!bd||hr&&8<hr&&11>=hr),mh=" ",fh=!1;function hh(s,n){switch(s){case"keyup":return ev.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var il=!1;function sv(s,n){switch(s){case"compositionend":return xh(n);case"keypress":return n.which!==32?null:(fh=!0,mh);case"textInput":return s=n.data,s===mh&&fh?null:s;default:return null}}function av(s,n){if(il)return s==="compositionend"||!bd&&hh(s,n)?(s=rh(),zi=fd=Pa=null,il=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return uh&&n.locale!=="ko"?null:n.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ph(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n==="input"?!!nv[s.type]:n==="textarea"}function gh(s,n,i,c){ll?rl?rl.push(c):rl=[c]:ll=c,n=Ro(n,"onChange"),0<n.length&&(i=new $i("onChange","change",null,i,c),s.push({event:i,listeners:n}))}var xr=null,pr=null;function lv(s){Xp(s,0)}function Hi(s){var n=cr(s);if(Zf(n))return s}function bh(s,n){if(s==="change")return n}var yh=!1;if(la){var yd;if(la){var wd="oninput"in document;if(!wd){var wh=document.createElement("div");wh.setAttribute("oninput","return;"),wd=typeof wh.oninput=="function"}yd=wd}else yd=!1;yh=yd&&(!document.documentMode||9<document.documentMode)}function vh(){xr&&(xr.detachEvent("onpropertychange",jh),pr=xr=null)}function jh(s){if(s.propertyName==="value"&&Hi(pr)){var n=[];gh(n,pr,s,dd(s)),lh(lv,n)}}function rv(s,n,i){s==="focusin"?(vh(),xr=n,pr=i,xr.attachEvent("onpropertychange",jh)):s==="focusout"&&vh()}function iv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hi(pr)}function ov(s,n){if(s==="click")return Hi(n)}function cv(s,n){if(s==="input"||s==="change")return Hi(n)}function dv(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var cs=typeof Object.is=="function"?Object.is:dv;function gr(s,n){if(cs(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;var i=Object.keys(s),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var u=i[c];if(!Yc.call(n,u)||!cs(s[u],n[u]))return!1}return!0}function Nh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Sh(s,n){var i=Nh(s);s=0;for(var c;i;){if(i.nodeType===3){if(c=s+i.textContent.length,s<=n&&c>=n)return{node:i,offset:n-s};s=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Nh(i)}}function Ch(s,n){return s&&n?s===n?!0:s&&s.nodeType===3?!1:n&&n.nodeType===3?Ch(s,n.parentNode):"contains"in s?s.contains(n):s.compareDocumentPosition?!!(s.compareDocumentPosition(n)&16):!1:!1}function kh(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var n=_i(s.document);n instanceof s.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)s=n.contentWindow;else break;n=_i(s.document)}return n}function vd(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n&&(n==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||n==="textarea"||s.contentEditable==="true")}var uv=la&&"documentMode"in document&&11>=document.documentMode,ol=null,jd=null,br=null,Nd=!1;function Eh(s,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Nd||ol==null||ol!==_i(c)||(c=ol,"selectionStart"in c&&vd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),br&&gr(br,c)||(br=c,c=Ro(jd,"onSelect"),0<c.length&&(n=new $i("onSelect","select",null,n,i),s.push({event:n,listeners:c}),n.target=ol)))}function wn(s,n){var i={};return i[s.toLowerCase()]=n.toLowerCase(),i["Webkit"+s]="webkit"+n,i["Moz"+s]="moz"+n,i}var cl={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionrun:wn("Transition","TransitionRun"),transitionstart:wn("Transition","TransitionStart"),transitioncancel:wn("Transition","TransitionCancel"),transitionend:wn("Transition","TransitionEnd")},Sd={},Ah={};la&&(Ah=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function vn(s){if(Sd[s])return Sd[s];if(!cl[s])return s;var n=cl[s],i;for(i in n)if(n.hasOwnProperty(i)&&i in Ah)return Sd[s]=n[i];return s}var Oh=vn("animationend"),Rh=vn("animationiteration"),Th=vn("animationstart"),mv=vn("transitionrun"),fv=vn("transitionstart"),hv=vn("transitioncancel"),Ph=vn("transitionend"),Mh=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function Ls(s,n){Mh.set(s,n),bn(n,[s])}var Fh=new WeakMap;function Cs(s,n){if(typeof s=="object"&&s!==null){var i=Fh.get(s);return i!==void 0?i:(n={value:s,source:n,stack:Wf(n)},Fh.set(s,n),n)}return{value:s,source:n,stack:Wf(n)}}var ks=[],dl=0,kd=0;function Qi(){for(var s=dl,n=kd=dl=0;n<s;){var i=ks[n];ks[n++]=null;var c=ks[n];ks[n++]=null;var u=ks[n];ks[n++]=null;var f=ks[n];if(ks[n++]=null,c!==null&&u!==null){var E=c.pending;E===null?u.next=u:(u.next=E.next,E.next=u),c.pending=u}f!==0&&Lh(i,u,f)}}function Gi(s,n,i,c){ks[dl++]=s,ks[dl++]=n,ks[dl++]=i,ks[dl++]=c,kd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Ed(s,n,i,c){return Gi(s,n,i,c),Ki(s)}function ul(s,n){return Gi(s,null,null,n),Ki(s)}function Lh(s,n,i){s.lanes|=i;var c=s.alternate;c!==null&&(c.lanes|=i);for(var u=!1,f=s.return;f!==null;)f.childLanes|=i,c=f.alternate,c!==null&&(c.childLanes|=i),f.tag===22&&(s=f.stateNode,s===null||s._visibility&1||(u=!0)),s=f,f=f.return;return s.tag===3?(f=s.stateNode,u&&n!==null&&(u=31-os(i),s=f.hiddenUpdates,c=s[u],c===null?s[u]=[n]:c.push(n),n.lane=i|536870912),f):null}function Ki(s){if(50<Br)throw Br=0,Mu=null,Error(r(185));for(var n=s.return;n!==null;)s=n,n=s.return;return s.tag===3?s.stateNode:null}var ml={};function xv(s,n,i,c){this.tag=s,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(s,n,i,c){return new xv(s,n,i,c)}function Ad(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ra(s,n){var i=s.alternate;return i===null?(i=ds(s.tag,n,s.key,s.mode),i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.alternate=s,s.alternate=i):(i.pendingProps=n,i.type=s.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=s.flags&65011712,i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,n=s.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i.refCleanup=s.refCleanup,i}function Dh(s,n){s.flags&=65011714;var i=s.alternate;return i===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,n=i.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s}function Vi(s,n,i,c,u,f){var E=0;if(c=s,typeof s=="function")Ad(s)&&(E=1);else if(typeof s=="string")E=gj(s,i,J.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=ds(31,i,n,u),s.elementType=H,s.lanes=f,s;case y:return jn(i.children,u,f,n);case C:E=8,u|=24;break;case j:return s=ds(12,i,n,u|2),s.elementType=j,s.lanes=f,s;case P:return s=ds(13,i,n,u),s.elementType=P,s.lanes=f,s;case L:return s=ds(19,i,n,u),s.elementType=L,s.lanes=f,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:case N:E=10;break e;case v:E=9;break e;case M:E=11;break e;case z:E=14;break e;case q:E=16,c=null;break e}E=29,i=Error(r(130,s===null?"null":typeof s,"")),c=null}return n=ds(E,i,n,u),n.elementType=s,n.type=c,n.lanes=f,n}function jn(s,n,i,c){return s=ds(7,s,c,n),s.lanes=i,s}function Od(s,n,i){return s=ds(6,s,null,n),s.lanes=i,s}function Rd(s,n,i){return n=ds(4,s.children!==null?s.children:[],s.key,n),n.lanes=i,n.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},n}var fl=[],hl=0,Yi=null,Wi=0,Es=[],As=0,Nn=null,ia=1,oa="";function Sn(s,n){fl[hl++]=Wi,fl[hl++]=Yi,Yi=s,Wi=n}function _h(s,n,i){Es[As++]=ia,Es[As++]=oa,Es[As++]=Nn,Nn=s;var c=ia;s=oa;var u=32-os(c)-1;c&=~(1<<u),i+=1;var f=32-os(n)+u;if(30<f){var E=u-u%5;f=(c&(1<<E)-1).toString(32),c>>=E,u-=E,ia=1<<32-os(n)+u|i<<u|c,oa=f+s}else ia=1<<f|i<<u|c,oa=s}function Td(s){s.return!==null&&(Sn(s,1),_h(s,1,0))}function Pd(s){for(;s===Yi;)Yi=fl[--hl],fl[hl]=null,Wi=fl[--hl],fl[hl]=null;for(;s===Nn;)Nn=Es[--As],Es[As]=null,oa=Es[--As],Es[As]=null,ia=Es[--As],Es[As]=null}var Ht=null,ht=null,We=!1,Cn=null,Gs=!1,Md=Error(r(519));function kn(s){var n=Error(r(418,""));throw vr(Cs(n,s)),Md}function qh(s){var n=s.stateNode,i=s.type,c=s.memoizedProps;switch(n[qt]=s,n[Yt]=c,i){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(i=0;i<Qr.length;i++)Be(Qr[i],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Be("invalid",n),Jf(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Di(n);break;case"select":Be("invalid",n);break;case"textarea":Be("invalid",n),th(n,c.value,c.defaultValue,c.children),Di(n)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||tg(n.textContent,i)?(c.popover!=null&&(Be("beforetoggle",n),Be("toggle",n)),c.onScroll!=null&&Be("scroll",n),c.onScrollEnd!=null&&Be("scrollend",n),c.onClick!=null&&(n.onclick=To),n=!0):n=!1,n||kn(s)}function zh(s){for(Ht=s.return;Ht;)switch(Ht.tag){case 5:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:Ht=Ht.return}}function yr(s){if(s!==Ht)return!1;if(!We)return zh(s),We=!0,!1;var n=s.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=s.type,i=!(i!=="form"&&i!=="button")||Yu(s.type,s.memoizedProps)),i=!i),i&&ht&&kn(s),zh(s),n===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,n=0;s;){if(s.nodeType===8)if(i=s.data,i==="/$"){if(n===0){ht=_s(s.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;s=s.nextSibling}ht=null}}else n===27?(n=ht,Va(s.type)?(s=Ju,Ju=null,ht=s):ht=n):ht=Ht?_s(s.stateNode.nextSibling):null;return!0}function wr(){ht=Ht=null,We=!1}function Uh(){var s=Cn;return s!==null&&(Jt===null?Jt=s:Jt.push.apply(Jt,s),Cn=null),s}function vr(s){Cn===null?Cn=[s]:Cn.push(s)}var Fd=$(null),En=null,ca=null;function Ma(s,n,i){V(Fd,n._currentValue),n._currentValue=i}function da(s){s._currentValue=Fd.current,D(Fd)}function Ld(s,n,i){for(;s!==null;){var c=s.alternate;if((s.childLanes&n)!==n?(s.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),s===i)break;s=s.return}}function Dd(s,n,i,c){var u=s.child;for(u!==null&&(u.return=s);u!==null;){var f=u.dependencies;if(f!==null){var E=u.child;f=f.firstContext;e:for(;f!==null;){var R=f;f=u;for(var B=0;B<n.length;B++)if(R.context===n[B]){f.lanes|=i,R=f.alternate,R!==null&&(R.lanes|=i),Ld(f.return,i,s),c||(E=null);break e}f=R.next}}else if(u.tag===18){if(E=u.return,E===null)throw Error(r(341));E.lanes|=i,f=E.alternate,f!==null&&(f.lanes|=i),Ld(E,i,s),E=null}else E=u.child;if(E!==null)E.return=u;else for(E=u;E!==null;){if(E===s){E=null;break}if(u=E.sibling,u!==null){u.return=E.return,E=u;break}E=E.return}u=E}}function jr(s,n,i,c){s=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var E=u.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var R=u.type;cs(u.pendingProps.value,E.value)||(s!==null?s.push(R):s=[R])}}else if(u===Se.current){if(E=u.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(s!==null?s.push(Xr):s=[Xr])}u=u.return}s!==null&&Dd(n,s,i,c),n.flags|=262144}function Xi(s){for(s=s.firstContext;s!==null;){if(!cs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function An(s){En=s,ca=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function zt(s){return Ih(En,s)}function Zi(s,n){return En===null&&An(s),Ih(s,n)}function Ih(s,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ca===null){if(s===null)throw Error(r(308));ca=n,s.dependencies={lanes:0,firstContext:n},s.flags|=524288}else ca=ca.next=n;return i}var pv=typeof AbortController<"u"?AbortController:function(){var s=[],n=this.signal={aborted:!1,addEventListener:function(i,c){s.push(c)}};this.abort=function(){n.aborted=!0,s.forEach(function(i){return i()})}},gv=t.unstable_scheduleCallback,bv=t.unstable_NormalPriority,Nt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new pv,data:new Map,refCount:0}}function Nr(s){s.refCount--,s.refCount===0&&gv(bv,function(){s.controller.abort()})}var Sr=null,qd=0,xl=0,pl=null;function yv(s,n){if(Sr===null){var i=Sr=[];qd=0,xl=Uu(),pl={status:"pending",value:void 0,then:function(c){i.push(c)}}}return qd++,n.then($h,$h),n}function $h(){if(--qd===0&&Sr!==null){pl!==null&&(pl.status="fulfilled");var s=Sr;Sr=null,xl=0,pl=null;for(var n=0;n<s.length;n++)(0,s[n])()}}function wv(s,n){var i=[],c={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return s.then(function(){c.status="fulfilled",c.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(c.status="rejected",c.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),c}var Bh=_.S;_.S=function(s,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&yv(s,n),Bh!==null&&Bh(s,n)};var On=$(null);function zd(){var s=On.current;return s!==null?s:ot.pooledCache}function Ji(s,n){n===null?V(On,On.current):V(On,n.pool)}function Hh(){var s=zd();return s===null?null:{parent:Nt._currentValue,pool:s}}var Cr=Error(r(460)),Qh=Error(r(474)),eo=Error(r(542)),Ud={then:function(){}};function Gh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function to(){}function Kh(s,n,i){switch(i=s[i],i===void 0?s.push(n):i!==n&&(n.then(to,to),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Yh(s),s;default:if(typeof n.status=="string")n.then(to,to);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=n,s.status="pending",s.then(function(c){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=c}},function(c){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,Yh(s),s}throw kr=n,Cr}}var kr=null;function Vh(){if(kr===null)throw Error(r(459));var s=kr;return kr=null,s}function Yh(s){if(s===Cr||s===eo)throw Error(r(483))}var Fa=!1;function Id(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(s,n){s=s.updateQueue,n.updateQueue===s&&(n.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function La(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Da(s,n,i){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var u=c.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),c.pending=n,n=Ki(s),Lh(s,null,i),n}return Gi(s,c,n,i),Ki(s)}function Er(s,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,$f(s,i)}}function Bd(s,n){var i=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var E={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=E:f=f.next=E,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:c.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},s.updateQueue=i;return}s=i.lastBaseUpdate,s===null?i.firstBaseUpdate=n:s.next=n,i.lastBaseUpdate=n}var Hd=!1;function Ar(){if(Hd){var s=pl;if(s!==null)throw s}}function Or(s,n,i,c){Hd=!1;var u=s.updateQueue;Fa=!1;var f=u.firstBaseUpdate,E=u.lastBaseUpdate,R=u.shared.pending;if(R!==null){u.shared.pending=null;var B=R,ne=B.next;B.next=null,E===null?f=ne:E.next=ne,E=B;var he=s.alternate;he!==null&&(he=he.updateQueue,R=he.lastBaseUpdate,R!==E&&(R===null?he.firstBaseUpdate=ne:R.next=ne,he.lastBaseUpdate=B))}if(f!==null){var pe=u.baseState;E=0,he=ne=B=null,R=f;do{var ie=R.lane&-536870913,oe=ie!==R.lane;if(oe?(Ke&ie)===ie:(c&ie)===ie){ie!==0&&ie===xl&&(Hd=!0),he!==null&&(he=he.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Me=s,Oe=R;ie=n;var rt=i;switch(Oe.tag){case 1:if(Me=Oe.payload,typeof Me=="function"){pe=Me.call(rt,pe,ie);break e}pe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Oe.payload,ie=typeof Me=="function"?Me.call(rt,pe,ie):Me,ie==null)break e;pe=g({},pe,ie);break e;case 2:Fa=!0}}ie=R.callback,ie!==null&&(s.flags|=64,oe&&(s.flags|=8192),oe=u.callbacks,oe===null?u.callbacks=[ie]:oe.push(ie))}else oe={lane:ie,tag:R.tag,payload:R.payload,callback:R.callback,next:null},he===null?(ne=he=oe,B=pe):he=he.next=oe,E|=ie;if(R=R.next,R===null){if(R=u.shared.pending,R===null)break;oe=R,R=oe.next,oe.next=null,u.lastBaseUpdate=oe,u.shared.pending=null}}while(!0);he===null&&(B=pe),u.baseState=B,u.firstBaseUpdate=ne,u.lastBaseUpdate=he,f===null&&(u.shared.lanes=0),Ha|=E,s.lanes=E,s.memoizedState=pe}}function Wh(s,n){if(typeof s!="function")throw Error(r(191,s));s.call(n)}function Xh(s,n){var i=s.callbacks;if(i!==null)for(s.callbacks=null,s=0;s<i.length;s++)Wh(i[s],n)}var gl=$(null),so=$(0);function Zh(s,n){s=ga,V(so,s),V(gl,n),ga=s|n.baseLanes}function Qd(){V(so,ga),V(gl,gl.current)}function Gd(){ga=so.current,D(gl),D(so)}var _a=0,Ue=null,nt=null,wt=null,ao=!1,bl=!1,Rn=!1,no=0,Rr=0,yl=null,vv=0;function gt(){throw Error(r(321))}function Kd(s,n){if(n===null)return!1;for(var i=0;i<n.length&&i<s.length;i++)if(!cs(s[i],n[i]))return!1;return!0}function Vd(s,n,i,c,u,f){return _a=f,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_.H=s===null||s.memoizedState===null?Lx:Dx,Rn=!1,f=i(c,u),Rn=!1,bl&&(f=ex(n,i,c,u)),Jh(s),f}function Jh(s){_.H=uo;var n=nt!==null&&nt.next!==null;if(_a=0,wt=nt=Ue=null,ao=!1,Rr=0,yl=null,n)throw Error(r(300));s===null||Et||(s=s.dependencies,s!==null&&Xi(s)&&(Et=!0))}function ex(s,n,i,c){Ue=s;var u=0;do{if(bl&&(yl=null),Rr=0,bl=!1,25<=u)throw Error(r(301));if(u+=1,wt=nt=null,s.updateQueue!=null){var f=s.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}_.H=Av,f=n(i,c)}while(bl);return f}function jv(){var s=_.H,n=s.useState()[0];return n=typeof n.then=="function"?Tr(n):n,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(Ue.flags|=1024),n}function Yd(){var s=no!==0;return no=0,s}function Wd(s,n,i){n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~i}function Xd(s){if(ao){for(s=s.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}ao=!1}_a=0,wt=nt=Ue=null,bl=!1,Rr=no=0,yl=null}function Xt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ue.memoizedState=wt=s:wt=wt.next=s,wt}function vt(){if(nt===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var n=wt===null?Ue.memoizedState:wt.next;if(n!==null)wt=n,nt=s;else{if(s===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},wt===null?Ue.memoizedState=wt=s:wt=wt.next=s}return wt}function Zd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tr(s){var n=Rr;return Rr+=1,yl===null&&(yl=[]),s=Kh(yl,s,n),n=Ue,(wt===null?n.memoizedState:wt.next)===null&&(n=n.alternate,_.H=n===null||n.memoizedState===null?Lx:Dx),s}function lo(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tr(s);if(s.$$typeof===N)return zt(s)}throw Error(r(438,String(s)))}function Jd(s){var n=null,i=Ue.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Zd(),Ue.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(s),c=0;c<s;c++)i[c]=ue;return n.index++,i}function ua(s,n){return typeof n=="function"?n(s):n}function ro(s){var n=vt();return eu(n,nt,s)}function eu(s,n,i){var c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var u=s.baseQueue,f=c.pending;if(f!==null){if(u!==null){var E=u.next;u.next=f.next,f.next=E}n.baseQueue=u=f,c.pending=null}if(f=s.baseState,u===null)s.memoizedState=f;else{n=u.next;var R=E=null,B=null,ne=n,he=!1;do{var pe=ne.lane&-536870913;if(pe!==ne.lane?(Ke&pe)===pe:(_a&pe)===pe){var ie=ne.revertLane;if(ie===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),pe===xl&&(he=!0);else if((_a&ie)===ie){ne=ne.next,ie===xl&&(he=!0);continue}else pe={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},B===null?(R=B=pe,E=f):B=B.next=pe,Ue.lanes|=ie,Ha|=ie;pe=ne.action,Rn&&i(f,pe),f=ne.hasEagerState?ne.eagerState:i(f,pe)}else ie={lane:pe,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},B===null?(R=B=ie,E=f):B=B.next=ie,Ue.lanes|=pe,Ha|=pe;ne=ne.next}while(ne!==null&&ne!==n);if(B===null?E=f:B.next=R,!cs(f,s.memoizedState)&&(Et=!0,he&&(i=pl,i!==null)))throw i;s.memoizedState=f,s.baseState=E,s.baseQueue=B,c.lastRenderedState=f}return u===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function tu(s){var n=vt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=s;var c=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var E=u=u.next;do f=s(f,E.action),E=E.next;while(E!==u);cs(f,n.memoizedState)||(Et=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,c]}function tx(s,n,i){var c=Ue,u=vt(),f=We;if(f){if(i===void 0)throw Error(r(407));i=i()}else i=n();var E=!cs((nt||u).memoizedState,i);E&&(u.memoizedState=i,Et=!0),u=u.queue;var R=nx.bind(null,c,u,s);if(Pr(2048,8,R,[s]),u.getSnapshot!==n||E||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,wl(9,io(),ax.bind(null,c,u,i,n),null),ot===null)throw Error(r(349));f||(_a&124)!==0||sx(c,n,i)}return i}function sx(s,n,i){s.flags|=16384,s={getSnapshot:n,value:i},n=Ue.updateQueue,n===null?(n=Zd(),Ue.updateQueue=n,n.stores=[s]):(i=n.stores,i===null?n.stores=[s]:i.push(s))}function ax(s,n,i,c){n.value=i,n.getSnapshot=c,lx(n)&&rx(s)}function nx(s,n,i){return i(function(){lx(n)&&rx(s)})}function lx(s){var n=s.getSnapshot;s=s.value;try{var i=n();return!cs(s,i)}catch{return!0}}function rx(s){var n=ul(s,2);n!==null&&xs(n,s,2)}function su(s){var n=Xt();if(typeof s=="function"){var i=s;if(s=i(),Rn){Ra(!0);try{i()}finally{Ra(!1)}}}return n.memoizedState=n.baseState=s,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:s},n}function ix(s,n,i,c){return s.baseState=i,eu(s,nt,typeof c=="function"?c:ua)}function Nv(s,n,i,c,u){if(co(s))throw Error(r(485));if(s=n.action,s!==null){var f={payload:u,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};_.T!==null?i(!0):f.isTransition=!1,c(f),i=n.pending,i===null?(f.next=n.pending=f,ox(n,f)):(f.next=i.next,n.pending=i.next=f)}}function ox(s,n){var i=n.action,c=n.payload,u=s.state;if(n.isTransition){var f=_.T,E={};_.T=E;try{var R=i(u,c),B=_.S;B!==null&&B(E,R),cx(s,n,R)}catch(ne){au(s,n,ne)}finally{_.T=f}}else try{f=i(u,c),cx(s,n,f)}catch(ne){au(s,n,ne)}}function cx(s,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){dx(s,n,c)},function(c){return au(s,n,c)}):dx(s,n,i)}function dx(s,n,i){n.status="fulfilled",n.value=i,ux(n),s.state=i,n=s.pending,n!==null&&(i=n.next,i===n?s.pending=null:(i=i.next,n.next=i,ox(s,i)))}function au(s,n,i){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,ux(n),n=n.next;while(n!==c)}s.action=null}function ux(s){s=s.listeners;for(var n=0;n<s.length;n++)(0,s[n])()}function mx(s,n){return n}function fx(s,n){if(We){var i=ot.formState;if(i!==null){e:{var c=Ue;if(We){if(ht){t:{for(var u=ht,f=Gs;u.nodeType!==8;){if(!f){u=null;break t}if(u=_s(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){ht=_s(u.nextSibling),c=u.data==="F!";break e}}kn(c)}c=!1}c&&(n=i[0])}}return i=Xt(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mx,lastRenderedState:n},i.queue=c,i=Px.bind(null,Ue,c),c.dispatch=i,c=su(!1),f=ou.bind(null,Ue,!1,c.queue),c=Xt(),u={state:n,dispatch:null,action:s,pending:null},c.queue=u,i=Nv.bind(null,Ue,u,f,i),u.dispatch=i,c.memoizedState=s,[n,i,!1]}function hx(s){var n=vt();return xx(n,nt,s)}function xx(s,n,i){if(n=eu(s,n,mx)[0],s=ro(ua)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Tr(n)}catch(E){throw E===Cr?eo:E}else c=n;n=vt();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(Ue.flags|=2048,wl(9,io(),Sv.bind(null,u,i),null)),[c,f,s]}function Sv(s,n){s.action=n}function px(s){var n=vt(),i=nt;if(i!==null)return xx(n,i,s);vt(),n=n.memoizedState,i=vt();var c=i.queue.dispatch;return i.memoizedState=s,[n,c,!1]}function wl(s,n,i,c){return s={tag:s,create:i,deps:c,inst:n,next:null},n=Ue.updateQueue,n===null&&(n=Zd(),Ue.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=s.next=s:(c=i.next,i.next=s,s.next=c,n.lastEffect=s),s}function io(){return{destroy:void 0,resource:void 0}}function gx(){return vt().memoizedState}function oo(s,n,i,c){var u=Xt();c=c===void 0?null:c,Ue.flags|=s,u.memoizedState=wl(1|n,io(),i,c)}function Pr(s,n,i,c){var u=vt();c=c===void 0?null:c;var f=u.memoizedState.inst;nt!==null&&c!==null&&Kd(c,nt.memoizedState.deps)?u.memoizedState=wl(n,f,i,c):(Ue.flags|=s,u.memoizedState=wl(1|n,f,i,c))}function bx(s,n){oo(8390656,8,s,n)}function yx(s,n){Pr(2048,8,s,n)}function wx(s,n){return Pr(4,2,s,n)}function vx(s,n){return Pr(4,4,s,n)}function jx(s,n){if(typeof n=="function"){s=s();var i=n(s);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return s=s(),n.current=s,function(){n.current=null}}function Nx(s,n,i){i=i!=null?i.concat([s]):null,Pr(4,4,jx.bind(null,n,s),i)}function nu(){}function Sx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&Kd(n,c[1])?c[0]:(i.memoizedState=[s,n],s)}function Cx(s,n){var i=vt();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&Kd(n,c[1]))return c[0];if(c=s(),Rn){Ra(!0);try{s()}finally{Ra(!1)}}return i.memoizedState=[c,n],c}function lu(s,n,i){return i===void 0||(_a&1073741824)!==0?s.memoizedState=n:(s.memoizedState=i,s=Ap(),Ue.lanes|=s,Ha|=s,i)}function kx(s,n,i,c){return cs(i,n)?i:gl.current!==null?(s=lu(s,i,c),cs(s,n)||(Et=!0),s):(_a&42)===0?(Et=!0,s.memoizedState=i):(s=Ap(),Ue.lanes|=s,Ha|=s,n)}function Ex(s,n,i,c,u){var f=X.p;X.p=f!==0&&8>f?f:8;var E=_.T,R={};_.T=R,ou(s,!1,n,i);try{var B=u(),ne=_.S;if(ne!==null&&ne(R,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var he=wv(B,c);Mr(s,n,he,hs(s))}else Mr(s,n,c,hs(s))}catch(pe){Mr(s,n,{then:function(){},status:"rejected",reason:pe},hs())}finally{X.p=f,_.T=E}}function Cv(){}function ru(s,n,i,c){if(s.tag!==5)throw Error(r(476));var u=Ax(s).queue;Ex(s,u,n,ce,i===null?Cv:function(){return Ox(s),i(c)})}function Ax(s){var n=s.memoizedState;if(n!==null)return n;n={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:ce},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:i},next:null},s.memoizedState=n,s=s.alternate,s!==null&&(s.memoizedState=n),n}function Ox(s){var n=Ax(s).next.queue;Mr(s,n,{},hs())}function iu(){return zt(Xr)}function Rx(){return vt().memoizedState}function Tx(){return vt().memoizedState}function kv(s){for(var n=s.return;n!==null;){switch(n.tag){case 24:case 3:var i=hs();s=La(i);var c=Da(n,s,i);c!==null&&(xs(c,n,i),Er(c,n,i)),n={cache:_d()},s.payload=n;return}n=n.return}}function Ev(s,n,i){var c=hs();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},co(s)?Mx(n,i):(i=Ed(s,n,i,c),i!==null&&(xs(i,s,c),Fx(i,n,c)))}function Px(s,n,i){var c=hs();Mr(s,n,i,c)}function Mr(s,n,i,c){var u={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(co(s))Mx(n,u);else{var f=s.alternate;if(s.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var E=n.lastRenderedState,R=f(E,i);if(u.hasEagerState=!0,u.eagerState=R,cs(R,E))return Gi(s,n,u,0),ot===null&&Qi(),!1}catch{}finally{}if(i=Ed(s,n,u,c),i!==null)return xs(i,s,c),Fx(i,n,c),!0}return!1}function ou(s,n,i,c){if(c={lane:2,revertLane:Uu(),action:c,hasEagerState:!1,eagerState:null,next:null},co(s)){if(n)throw Error(r(479))}else n=Ed(s,i,c,2),n!==null&&xs(n,s,2)}function co(s){var n=s.alternate;return s===Ue||n!==null&&n===Ue}function Mx(s,n){bl=ao=!0;var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}function Fx(s,n,i){if((i&4194048)!==0){var c=n.lanes;c&=s.pendingLanes,i|=c,n.lanes=i,$f(s,i)}}var uo={readContext:zt,use:lo,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},Lx={readContext:zt,use:lo,useCallback:function(s,n){return Xt().memoizedState=[s,n===void 0?null:n],s},useContext:zt,useEffect:bx,useImperativeHandle:function(s,n,i){i=i!=null?i.concat([s]):null,oo(4194308,4,jx.bind(null,n,s),i)},useLayoutEffect:function(s,n){return oo(4194308,4,s,n)},useInsertionEffect:function(s,n){oo(4,2,s,n)},useMemo:function(s,n){var i=Xt();n=n===void 0?null:n;var c=s();if(Rn){Ra(!0);try{s()}finally{Ra(!1)}}return i.memoizedState=[c,n],c},useReducer:function(s,n,i){var c=Xt();if(i!==void 0){var u=i(n);if(Rn){Ra(!0);try{i(n)}finally{Ra(!1)}}}else u=n;return c.memoizedState=c.baseState=u,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},c.queue=s,s=s.dispatch=Ev.bind(null,Ue,s),[c.memoizedState,s]},useRef:function(s){var n=Xt();return s={current:s},n.memoizedState=s},useState:function(s){s=su(s);var n=s.queue,i=Px.bind(null,Ue,n);return n.dispatch=i,[s.memoizedState,i]},useDebugValue:nu,useDeferredValue:function(s,n){var i=Xt();return lu(i,s,n)},useTransition:function(){var s=su(!1);return s=Ex.bind(null,Ue,s.queue,!0,!1),Xt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,n,i){var c=Ue,u=Xt();if(We){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),ot===null)throw Error(r(349));(Ke&124)!==0||sx(c,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,bx(nx.bind(null,c,f,s),[s]),c.flags|=2048,wl(9,io(),ax.bind(null,c,f,i,n),null),i},useId:function(){var s=Xt(),n=ot.identifierPrefix;if(We){var i=oa,c=ia;i=(c&~(1<<32-os(c)-1)).toString(32)+i,n=""+n+"R"+i,i=no++,0<i&&(n+="H"+i.toString(32)),n+=""}else i=vv++,n=""+n+"r"+i.toString(32)+"";return s.memoizedState=n},useHostTransitionStatus:iu,useFormState:fx,useActionState:fx,useOptimistic:function(s){var n=Xt();n.memoizedState=n.baseState=s;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=ou.bind(null,Ue,!0,i),i.dispatch=n,[s,n]},useMemoCache:Jd,useCacheRefresh:function(){return Xt().memoizedState=kv.bind(null,Ue)}},Dx={readContext:zt,use:lo,useCallback:Sx,useContext:zt,useEffect:yx,useImperativeHandle:Nx,useInsertionEffect:wx,useLayoutEffect:vx,useMemo:Cx,useReducer:ro,useRef:gx,useState:function(){return ro(ua)},useDebugValue:nu,useDeferredValue:function(s,n){var i=vt();return kx(i,nt.memoizedState,s,n)},useTransition:function(){var s=ro(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tr(s),n]},useSyncExternalStore:tx,useId:Rx,useHostTransitionStatus:iu,useFormState:hx,useActionState:hx,useOptimistic:function(s,n){var i=vt();return ix(i,nt,s,n)},useMemoCache:Jd,useCacheRefresh:Tx},Av={readContext:zt,use:lo,useCallback:Sx,useContext:zt,useEffect:yx,useImperativeHandle:Nx,useInsertionEffect:wx,useLayoutEffect:vx,useMemo:Cx,useReducer:tu,useRef:gx,useState:function(){return tu(ua)},useDebugValue:nu,useDeferredValue:function(s,n){var i=vt();return nt===null?lu(i,s,n):kx(i,nt.memoizedState,s,n)},useTransition:function(){var s=tu(ua)[0],n=vt().memoizedState;return[typeof s=="boolean"?s:Tr(s),n]},useSyncExternalStore:tx,useId:Rx,useHostTransitionStatus:iu,useFormState:px,useActionState:px,useOptimistic:function(s,n){var i=vt();return nt!==null?ix(i,nt,s,n):(i.baseState=s,[s,i.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:Tx},vl=null,Fr=0;function mo(s){var n=Fr;return Fr+=1,vl===null&&(vl=[]),Kh(vl,s,n)}function Lr(s,n){n=n.props.ref,s.ref=n!==void 0?n:null}function fo(s,n){throw n.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(n),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s)))}function _x(s){var n=s._init;return n(s._payload)}function qx(s){function n(ee,K){if(s){var se=ee.deletions;se===null?(ee.deletions=[K],ee.flags|=16):se.push(K)}}function i(ee,K){if(!s)return null;for(;K!==null;)n(ee,K),K=K.sibling;return null}function c(ee){for(var K=new Map;ee!==null;)ee.key!==null?K.set(ee.key,ee):K.set(ee.index,ee),ee=ee.sibling;return K}function u(ee,K){return ee=ra(ee,K),ee.index=0,ee.sibling=null,ee}function f(ee,K,se){return ee.index=se,s?(se=ee.alternate,se!==null?(se=se.index,se<K?(ee.flags|=67108866,K):se):(ee.flags|=67108866,K)):(ee.flags|=1048576,K)}function E(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function R(ee,K,se,xe){return K===null||K.tag!==6?(K=Od(se,ee.mode,xe),K.return=ee,K):(K=u(K,se),K.return=ee,K)}function B(ee,K,se,xe){var je=se.type;return je===y?he(ee,K,se.props.children,xe,se.key):K!==null&&(K.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&_x(je)===K.type)?(K=u(K,se.props),Lr(K,se),K.return=ee,K):(K=Vi(se.type,se.key,se.props,null,ee.mode,xe),Lr(K,se),K.return=ee,K)}function ne(ee,K,se,xe){return K===null||K.tag!==4||K.stateNode.containerInfo!==se.containerInfo||K.stateNode.implementation!==se.implementation?(K=Rd(se,ee.mode,xe),K.return=ee,K):(K=u(K,se.children||[]),K.return=ee,K)}function he(ee,K,se,xe,je){return K===null||K.tag!==7?(K=jn(se,ee.mode,xe,je),K.return=ee,K):(K=u(K,se),K.return=ee,K)}function pe(ee,K,se){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Od(""+K,ee.mode,se),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return se=Vi(K.type,K.key,K.props,null,ee.mode,se),Lr(se,K),se.return=ee,se;case k:return K=Rd(K,ee.mode,se),K.return=ee,K;case q:var xe=K._init;return K=xe(K._payload),pe(ee,K,se)}if(re(K)||I(K))return K=jn(K,ee.mode,se,null),K.return=ee,K;if(typeof K.then=="function")return pe(ee,mo(K),se);if(K.$$typeof===N)return pe(ee,Zi(ee,K),se);fo(ee,K)}return null}function ie(ee,K,se,xe){var je=K!==null?K.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return je!==null?null:R(ee,K,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return se.key===je?B(ee,K,se,xe):null;case k:return se.key===je?ne(ee,K,se,xe):null;case q:return je=se._init,se=je(se._payload),ie(ee,K,se,xe)}if(re(se)||I(se))return je!==null?null:he(ee,K,se,xe,null);if(typeof se.then=="function")return ie(ee,K,mo(se),xe);if(se.$$typeof===N)return ie(ee,K,Zi(ee,se),xe);fo(ee,se)}return null}function oe(ee,K,se,xe,je){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ee=ee.get(se)||null,R(K,ee,""+xe,je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case w:return ee=ee.get(xe.key===null?se:xe.key)||null,B(K,ee,xe,je);case k:return ee=ee.get(xe.key===null?se:xe.key)||null,ne(K,ee,xe,je);case q:var Ie=xe._init;return xe=Ie(xe._payload),oe(ee,K,se,xe,je)}if(re(xe)||I(xe))return ee=ee.get(se)||null,he(K,ee,xe,je,null);if(typeof xe.then=="function")return oe(ee,K,se,mo(xe),je);if(xe.$$typeof===N)return oe(ee,K,se,Zi(K,xe),je);fo(K,xe)}return null}function Me(ee,K,se,xe){for(var je=null,Ie=null,ke=K,Pe=K=0,Ot=null;ke!==null&&Pe<se.length;Pe++){ke.index>Pe?(Ot=ke,ke=null):Ot=ke.sibling;var Ye=ie(ee,ke,se[Pe],xe);if(Ye===null){ke===null&&(ke=Ot);break}s&&ke&&Ye.alternate===null&&n(ee,ke),K=f(Ye,K,Pe),Ie===null?je=Ye:Ie.sibling=Ye,Ie=Ye,ke=Ot}if(Pe===se.length)return i(ee,ke),We&&Sn(ee,Pe),je;if(ke===null){for(;Pe<se.length;Pe++)ke=pe(ee,se[Pe],xe),ke!==null&&(K=f(ke,K,Pe),Ie===null?je=ke:Ie.sibling=ke,Ie=ke);return We&&Sn(ee,Pe),je}for(ke=c(ke);Pe<se.length;Pe++)Ot=oe(ke,ee,Pe,se[Pe],xe),Ot!==null&&(s&&Ot.alternate!==null&&ke.delete(Ot.key===null?Pe:Ot.key),K=f(Ot,K,Pe),Ie===null?je=Ot:Ie.sibling=Ot,Ie=Ot);return s&&ke.forEach(function(Ja){return n(ee,Ja)}),We&&Sn(ee,Pe),je}function Oe(ee,K,se,xe){if(se==null)throw Error(r(151));for(var je=null,Ie=null,ke=K,Pe=K=0,Ot=null,Ye=se.next();ke!==null&&!Ye.done;Pe++,Ye=se.next()){ke.index>Pe?(Ot=ke,ke=null):Ot=ke.sibling;var Ja=ie(ee,ke,Ye.value,xe);if(Ja===null){ke===null&&(ke=Ot);break}s&&ke&&Ja.alternate===null&&n(ee,ke),K=f(Ja,K,Pe),Ie===null?je=Ja:Ie.sibling=Ja,Ie=Ja,ke=Ot}if(Ye.done)return i(ee,ke),We&&Sn(ee,Pe),je;if(ke===null){for(;!Ye.done;Pe++,Ye=se.next())Ye=pe(ee,Ye.value,xe),Ye!==null&&(K=f(Ye,K,Pe),Ie===null?je=Ye:Ie.sibling=Ye,Ie=Ye);return We&&Sn(ee,Pe),je}for(ke=c(ke);!Ye.done;Pe++,Ye=se.next())Ye=oe(ke,ee,Pe,Ye.value,xe),Ye!==null&&(s&&Ye.alternate!==null&&ke.delete(Ye.key===null?Pe:Ye.key),K=f(Ye,K,Pe),Ie===null?je=Ye:Ie.sibling=Ye,Ie=Ye);return s&&ke.forEach(function(Oj){return n(ee,Oj)}),We&&Sn(ee,Pe),je}function rt(ee,K,se,xe){if(typeof se=="object"&&se!==null&&se.type===y&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case w:e:{for(var je=se.key;K!==null;){if(K.key===je){if(je=se.type,je===y){if(K.tag===7){i(ee,K.sibling),xe=u(K,se.props.children),xe.return=ee,ee=xe;break e}}else if(K.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===q&&_x(je)===K.type){i(ee,K.sibling),xe=u(K,se.props),Lr(xe,se),xe.return=ee,ee=xe;break e}i(ee,K);break}else n(ee,K);K=K.sibling}se.type===y?(xe=jn(se.props.children,ee.mode,xe,se.key),xe.return=ee,ee=xe):(xe=Vi(se.type,se.key,se.props,null,ee.mode,xe),Lr(xe,se),xe.return=ee,ee=xe)}return E(ee);case k:e:{for(je=se.key;K!==null;){if(K.key===je)if(K.tag===4&&K.stateNode.containerInfo===se.containerInfo&&K.stateNode.implementation===se.implementation){i(ee,K.sibling),xe=u(K,se.children||[]),xe.return=ee,ee=xe;break e}else{i(ee,K);break}else n(ee,K);K=K.sibling}xe=Rd(se,ee.mode,xe),xe.return=ee,ee=xe}return E(ee);case q:return je=se._init,se=je(se._payload),rt(ee,K,se,xe)}if(re(se))return Me(ee,K,se,xe);if(I(se)){if(je=I(se),typeof je!="function")throw Error(r(150));return se=je.call(se),Oe(ee,K,se,xe)}if(typeof se.then=="function")return rt(ee,K,mo(se),xe);if(se.$$typeof===N)return rt(ee,K,Zi(ee,se),xe);fo(ee,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,K!==null&&K.tag===6?(i(ee,K.sibling),xe=u(K,se),xe.return=ee,ee=xe):(i(ee,K),xe=Od(se,ee.mode,xe),xe.return=ee,ee=xe),E(ee)):i(ee,K)}return function(ee,K,se,xe){try{Fr=0;var je=rt(ee,K,se,xe);return vl=null,je}catch(ke){if(ke===Cr||ke===eo)throw ke;var Ie=ds(29,ke,null,ee.mode);return Ie.lanes=xe,Ie.return=ee,Ie}finally{}}}var jl=qx(!0),zx=qx(!1),Os=$(null),Ks=null;function qa(s){var n=s.alternate;V(St,St.current&1),V(Os,s),Ks===null&&(n===null||gl.current!==null||n.memoizedState!==null)&&(Ks=s)}function Ux(s){if(s.tag===22){if(V(St,St.current),V(Os,s),Ks===null){var n=s.alternate;n!==null&&n.memoizedState!==null&&(Ks=s)}}else za()}function za(){V(St,St.current),V(Os,Os.current)}function ma(s){D(Os),Ks===s&&(Ks=null),D(St)}var St=$(0);function ho(s){for(var n=s;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Zu(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function cu(s,n,i,c){n=s.memoizedState,i=i(c,n),i=i==null?n:g({},n,i),s.memoizedState=i,s.lanes===0&&(s.updateQueue.baseState=i)}var du={enqueueSetState:function(s,n,i){s=s._reactInternals;var c=hs(),u=La(c);u.payload=n,i!=null&&(u.callback=i),n=Da(s,u,c),n!==null&&(xs(n,s,c),Er(n,s,c))},enqueueReplaceState:function(s,n,i){s=s._reactInternals;var c=hs(),u=La(c);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Da(s,u,c),n!==null&&(xs(n,s,c),Er(n,s,c))},enqueueForceUpdate:function(s,n){s=s._reactInternals;var i=hs(),c=La(i);c.tag=2,n!=null&&(c.callback=n),n=Da(s,c,i),n!==null&&(xs(n,s,i),Er(n,s,i))}};function Ix(s,n,i,c,u,f,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,f,E):n.prototype&&n.prototype.isPureReactComponent?!gr(i,c)||!gr(u,f):!0}function $x(s,n,i,c){s=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==s&&du.enqueueReplaceState(n,n.state,null)}function Tn(s,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(s=s.defaultProps){i===n&&(i=g({},i));for(var u in s)i[u]===void 0&&(i[u]=s[u])}return i}var xo=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Bx(s){xo(s)}function Hx(s){console.error(s)}function Qx(s){xo(s)}function po(s,n){try{var i=s.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function Gx(s,n,i){try{var c=s.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function uu(s,n,i){return i=La(i),i.tag=3,i.payload={element:null},i.callback=function(){po(s,n)},i}function Kx(s){return s=La(s),s.tag=3,s}function Vx(s,n,i,c){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=c.value;s.payload=function(){return u(f)},s.callback=function(){Gx(n,i,c)}}var E=i.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){Gx(n,i,c),typeof u!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function Ov(s,n,i,c,u){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&jr(n,i,u,!0),i=Os.current,i!==null){switch(i.tag){case 13:return Ks===null?Lu():i.alternate===null&&xt===0&&(xt=3),i.flags&=-257,i.flags|=65536,i.lanes=u,c===Ud?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),_u(s,c,u)),!1;case 22:return i.flags|=65536,c===Ud?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),_u(s,c,u)),!1}throw Error(r(435,i.tag))}return _u(s,c,u),Lu(),!1}if(We)return n=Os.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,c!==Md&&(s=Error(r(422),{cause:c}),vr(Cs(s,i)))):(c!==Md&&(n=Error(r(423),{cause:c}),vr(Cs(n,i))),s=s.current.alternate,s.flags|=65536,u&=-u,s.lanes|=u,c=Cs(c,i),u=uu(s.stateNode,c,u),Bd(s,u),xt!==4&&(xt=2)),!1;var f=Error(r(520),{cause:c});if(f=Cs(f,i),$r===null?$r=[f]:$r.push(f),xt!==4&&(xt=2),n===null)return!0;c=Cs(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,s=u&-u,i.lanes|=s,s=uu(i.stateNode,c,s),Bd(i,s),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Qa===null||!Qa.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Kx(u),Vx(u,s,i,c),Bd(i,u),!1}i=i.return}while(i!==null);return!1}var Yx=Error(r(461)),Et=!1;function Tt(s,n,i,c){n.child=s===null?zx(n,null,i,c):jl(n,s.child,i,c)}function Wx(s,n,i,c,u){i=i.render;var f=n.ref;if("ref"in c){var E={};for(var R in c)R!=="ref"&&(E[R]=c[R])}else E=c;return An(n),c=Vd(s,n,i,E,f,u),R=Yd(),s!==null&&!Et?(Wd(s,n,u),fa(s,n,u)):(We&&R&&Td(n),n.flags|=1,Tt(s,n,c,u),n.child)}function Xx(s,n,i,c,u){if(s===null){var f=i.type;return typeof f=="function"&&!Ad(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,Zx(s,n,f,c,u)):(s=Vi(i.type,null,c,n,n.mode,u),s.ref=n.ref,s.return=n,n.child=s)}if(f=s.child,!yu(s,u)){var E=f.memoizedProps;if(i=i.compare,i=i!==null?i:gr,i(E,c)&&s.ref===n.ref)return fa(s,n,u)}return n.flags|=1,s=ra(f,c),s.ref=n.ref,s.return=n,n.child=s}function Zx(s,n,i,c,u){if(s!==null){var f=s.memoizedProps;if(gr(f,c)&&s.ref===n.ref)if(Et=!1,n.pendingProps=c=f,yu(s,u))(s.flags&131072)!==0&&(Et=!0);else return n.lanes=s.lanes,fa(s,n,u)}return mu(s,n,i,c,u)}function Jx(s,n,i){var c=n.pendingProps,u=c.children,f=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((n.flags&128)!==0){if(c=f!==null?f.baseLanes|i:i,s!==null){for(u=n.child=s.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;n.childLanes=f&~c}else n.childLanes=0,n.child=null;return ep(s,n,c,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ji(n,f!==null?f.cachePool:null),f!==null?Zh(n,f):Qd(),Ux(n);else return n.lanes=n.childLanes=536870912,ep(s,n,f!==null?f.baseLanes|i:i,i)}else f!==null?(Ji(n,f.cachePool),Zh(n,f),za(),n.memoizedState=null):(s!==null&&Ji(n,null),Qd(),za());return Tt(s,n,u,i),n.child}function ep(s,n,i,c){var u=zd();return u=u===null?null:{parent:Nt._currentValue,pool:u},n.memoizedState={baseLanes:i,cachePool:u},s!==null&&Ji(n,null),Qd(),Ux(n),s!==null&&jr(s,n,c,!0),null}function go(s,n){var i=n.ref;if(i===null)s!==null&&s.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(s===null||s.ref!==i)&&(n.flags|=4194816)}}function mu(s,n,i,c,u){return An(n),i=Vd(s,n,i,c,void 0,u),c=Yd(),s!==null&&!Et?(Wd(s,n,u),fa(s,n,u)):(We&&c&&Td(n),n.flags|=1,Tt(s,n,i,u),n.child)}function tp(s,n,i,c,u,f){return An(n),n.updateQueue=null,i=ex(n,c,i,u),Jh(s),c=Yd(),s!==null&&!Et?(Wd(s,n,f),fa(s,n,f)):(We&&c&&Td(n),n.flags|=1,Tt(s,n,i,f),n.child)}function sp(s,n,i,c,u){if(An(n),n.stateNode===null){var f=ml,E=i.contextType;typeof E=="object"&&E!==null&&(f=zt(E)),f=new i(c,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=du,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=c,f.state=n.memoizedState,f.refs={},Id(n),E=i.contextType,f.context=typeof E=="object"&&E!==null?zt(E):ml,f.state=n.memoizedState,E=i.getDerivedStateFromProps,typeof E=="function"&&(cu(n,i,E,c),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&du.enqueueReplaceState(f,f.state,null),Or(n,c,f,u),Ar(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(s===null){f=n.stateNode;var R=n.memoizedProps,B=Tn(i,R);f.props=B;var ne=f.context,he=i.contextType;E=ml,typeof he=="object"&&he!==null&&(E=zt(he));var pe=i.getDerivedStateFromProps;he=typeof pe=="function"||typeof f.getSnapshotBeforeUpdate=="function",R=n.pendingProps!==R,he||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(R||ne!==E)&&$x(n,f,c,E),Fa=!1;var ie=n.memoizedState;f.state=ie,Or(n,c,f,u),Ar(),ne=n.memoizedState,R||ie!==ne||Fa?(typeof pe=="function"&&(cu(n,i,pe,c),ne=n.memoizedState),(B=Fa||Ix(n,i,B,c,ie,ne,E))?(he||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=ne),f.props=c,f.state=ne,f.context=E,c=B):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{f=n.stateNode,$d(s,n),E=n.memoizedProps,he=Tn(i,E),f.props=he,pe=n.pendingProps,ie=f.context,ne=i.contextType,B=ml,typeof ne=="object"&&ne!==null&&(B=zt(ne)),R=i.getDerivedStateFromProps,(ne=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==pe||ie!==B)&&$x(n,f,c,B),Fa=!1,ie=n.memoizedState,f.state=ie,Or(n,c,f,u),Ar();var oe=n.memoizedState;E!==pe||ie!==oe||Fa||s!==null&&s.dependencies!==null&&Xi(s.dependencies)?(typeof R=="function"&&(cu(n,i,R,c),oe=n.memoizedState),(he=Fa||Ix(n,i,he,c,ie,oe,B)||s!==null&&s.dependencies!==null&&Xi(s.dependencies))?(ne||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,oe,B),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,oe,B)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===s.memoizedProps&&ie===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&ie===s.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=oe),f.props=c,f.state=oe,f.context=B,c=he):(typeof f.componentDidUpdate!="function"||E===s.memoizedProps&&ie===s.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&ie===s.memoizedState||(n.flags|=1024),c=!1)}return f=c,go(s,n),c=(n.flags&128)!==0,f||c?(f=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,s!==null&&c?(n.child=jl(n,s.child,null,u),n.child=jl(n,null,i,u)):Tt(s,n,i,u),n.memoizedState=f.state,s=n.child):s=fa(s,n,u),s}function ap(s,n,i,c){return wr(),n.flags|=256,Tt(s,n,i,c),n.child}var fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hu(s){return{baseLanes:s,cachePool:Hh()}}function xu(s,n,i){return s=s!==null?s.childLanes&~i:0,n&&(s|=Rs),s}function np(s,n,i){var c=n.pendingProps,u=!1,f=(n.flags&128)!==0,E;if((E=f)||(E=s!==null&&s.memoizedState===null?!1:(St.current&2)!==0),E&&(u=!0,n.flags&=-129),E=(n.flags&32)!==0,n.flags&=-33,s===null){if(We){if(u?qa(n):za(),We){var R=ht,B;if(B=R){e:{for(B=R,R=Gs;B.nodeType!==8;){if(!R){R=null;break e}if(B=_s(B.nextSibling),B===null){R=null;break e}}R=B}R!==null?(n.memoizedState={dehydrated:R,treeContext:Nn!==null?{id:ia,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},B=ds(18,null,null,0),B.stateNode=R,B.return=n,n.child=B,Ht=n,ht=null,B=!0):B=!1}B||kn(n)}if(R=n.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return Zu(R)?n.lanes=32:n.lanes=536870912,null;ma(n)}return R=c.children,c=c.fallback,u?(za(),u=n.mode,R=bo({mode:"hidden",children:R},u),c=jn(c,u,i,null),R.return=n,c.return=n,R.sibling=c,n.child=R,u=n.child,u.memoizedState=hu(i),u.childLanes=xu(s,E,i),n.memoizedState=fu,c):(qa(n),pu(n,R))}if(B=s.memoizedState,B!==null&&(R=B.dehydrated,R!==null)){if(f)n.flags&256?(qa(n),n.flags&=-257,n=gu(s,n,i)):n.memoizedState!==null?(za(),n.child=s.child,n.flags|=128,n=null):(za(),u=c.fallback,R=n.mode,c=bo({mode:"visible",children:c.children},R),u=jn(u,R,i,null),u.flags|=2,c.return=n,u.return=n,c.sibling=u,n.child=c,jl(n,s.child,null,i),c=n.child,c.memoizedState=hu(i),c.childLanes=xu(s,E,i),n.memoizedState=fu,n=u);else if(qa(n),Zu(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var ne=E.dgst;E=ne,c=Error(r(419)),c.stack="",c.digest=E,vr({value:c,source:null,stack:null}),n=gu(s,n,i)}else if(Et||jr(s,n,i,!1),E=(i&s.childLanes)!==0,Et||E){if(E=ot,E!==null&&(c=i&-i,c=(c&42)!==0?1:Jc(c),c=(c&(E.suspendedLanes|i))!==0?0:c,c!==0&&c!==B.retryLane))throw B.retryLane=c,ul(s,c),xs(E,s,c),Yx;R.data==="$?"||Lu(),n=gu(s,n,i)}else R.data==="$?"?(n.flags|=192,n.child=s.child,n=null):(s=B.treeContext,ht=_s(R.nextSibling),Ht=n,We=!0,Cn=null,Gs=!1,s!==null&&(Es[As++]=ia,Es[As++]=oa,Es[As++]=Nn,ia=s.id,oa=s.overflow,Nn=n),n=pu(n,c.children),n.flags|=4096);return n}return u?(za(),u=c.fallback,R=n.mode,B=s.child,ne=B.sibling,c=ra(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,ne!==null?u=ra(ne,u):(u=jn(u,R,i,null),u.flags|=2),u.return=n,c.return=n,c.sibling=u,n.child=c,c=u,u=n.child,R=s.child.memoizedState,R===null?R=hu(i):(B=R.cachePool,B!==null?(ne=Nt._currentValue,B=B.parent!==ne?{parent:ne,pool:ne}:B):B=Hh(),R={baseLanes:R.baseLanes|i,cachePool:B}),u.memoizedState=R,u.childLanes=xu(s,E,i),n.memoizedState=fu,c):(qa(n),i=s.child,s=i.sibling,i=ra(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,s!==null&&(E=n.deletions,E===null?(n.deletions=[s],n.flags|=16):E.push(s)),n.child=i,n.memoizedState=null,i)}function pu(s,n){return n=bo({mode:"visible",children:n},s.mode),n.return=s,s.child=n}function bo(s,n){return s=ds(22,s,null,n),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function gu(s,n,i){return jl(n,s.child,null,i),s=pu(n,n.pendingProps.children),s.flags|=2,n.memoizedState=null,s}function lp(s,n,i){s.lanes|=n;var c=s.alternate;c!==null&&(c.lanes|=n),Ld(s.return,n,i)}function bu(s,n,i,c,u){var f=s.memoizedState;f===null?s.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:u}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=i,f.tailMode=u)}function rp(s,n,i){var c=n.pendingProps,u=c.revealOrder,f=c.tail;if(Tt(s,n,c.children,i),c=St.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=n.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&lp(s,i,n);else if(s.tag===19)lp(s,i,n);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(V(St,c),u){case"forwards":for(i=n.child,u=null;i!==null;)s=i.alternate,s!==null&&ho(s)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),bu(n,!1,u,i,f);break;case"backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(s=u.alternate,s!==null&&ho(s)===null){n.child=u;break}s=u.sibling,u.sibling=i,i=u,u=s}bu(n,!0,i,null,f);break;case"together":bu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fa(s,n,i){if(s!==null&&(n.dependencies=s.dependencies),Ha|=n.lanes,(i&n.childLanes)===0)if(s!==null){if(jr(s,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(s!==null&&n.child!==s.child)throw Error(r(153));if(n.child!==null){for(s=n.child,i=ra(s,s.pendingProps),n.child=i,i.return=n;s.sibling!==null;)s=s.sibling,i=i.sibling=ra(s,s.pendingProps),i.return=n;i.sibling=null}return n.child}function yu(s,n){return(s.lanes&n)!==0?!0:(s=s.dependencies,!!(s!==null&&Xi(s)))}function Rv(s,n,i){switch(n.tag){case 3:be(n,n.stateNode.containerInfo),Ma(n,Nt,s.memoizedState.cache),wr();break;case 27:case 5:Vc(n);break;case 4:be(n,n.stateNode.containerInfo);break;case 10:Ma(n,n.type,n.memoizedProps.value);break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(qa(n),n.flags|=128,null):(i&n.child.childLanes)!==0?np(s,n,i):(qa(n),s=fa(s,n,i),s!==null?s.sibling:null);qa(n);break;case 19:var u=(s.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(jr(s,n,i,!1),c=(i&n.childLanes)!==0),u){if(c)return rp(s,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),V(St,St.current),c)break;return null;case 22:case 23:return n.lanes=0,Jx(s,n,i);case 24:Ma(n,Nt,s.memoizedState.cache)}return fa(s,n,i)}function ip(s,n,i){if(s!==null)if(s.memoizedProps!==n.pendingProps)Et=!0;else{if(!yu(s,i)&&(n.flags&128)===0)return Et=!1,Rv(s,n,i);Et=(s.flags&131072)!==0}else Et=!1,We&&(n.flags&1048576)!==0&&_h(n,Wi,n.index);switch(n.lanes=0,n.tag){case 16:e:{s=n.pendingProps;var c=n.elementType,u=c._init;if(c=u(c._payload),n.type=c,typeof c=="function")Ad(c)?(s=Tn(c,s),n.tag=1,n=sp(null,n,c,s,i)):(n.tag=0,n=mu(null,n,c,s,i));else{if(c!=null){if(u=c.$$typeof,u===M){n.tag=11,n=Wx(null,n,c,s,i);break e}else if(u===z){n.tag=14,n=Xx(null,n,c,s,i);break e}}throw n=G(c)||c,Error(r(306,n,""))}}return n;case 0:return mu(s,n,n.type,n.pendingProps,i);case 1:return c=n.type,u=Tn(c,n.pendingProps),sp(s,n,c,u,i);case 3:e:{if(be(n,n.stateNode.containerInfo),s===null)throw Error(r(387));c=n.pendingProps;var f=n.memoizedState;u=f.element,$d(s,n),Or(n,c,null,i);var E=n.memoizedState;if(c=E.cache,Ma(n,Nt,c),c!==f.cache&&Dd(n,[Nt],i,!0),Ar(),c=E.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:E.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=ap(s,n,c,i);break e}else if(c!==u){u=Cs(Error(r(424)),n),vr(u),n=ap(s,n,c,i);break e}else{switch(s=n.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ht=_s(s.firstChild),Ht=n,We=!0,Cn=null,Gs=!0,i=zx(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(wr(),c===u){n=fa(s,n,i);break e}Tt(s,n,c,i)}n=n.child}return n;case 26:return go(s,n),s===null?(i=ug(n.type,null,n.pendingProps,null))?n.memoizedState=i:We||(i=n.type,s=n.pendingProps,c=Po(ae.current).createElement(i),c[qt]=n,c[Yt]=s,Mt(c,i,s),kt(c),n.stateNode=c):n.memoizedState=ug(n.type,s.memoizedProps,n.pendingProps,s.memoizedState),null;case 27:return Vc(n),s===null&&We&&(c=n.stateNode=og(n.type,n.pendingProps,ae.current),Ht=n,Gs=!0,u=ht,Va(n.type)?(Ju=u,ht=_s(c.firstChild)):ht=u),Tt(s,n,n.pendingProps.children,i),go(s,n),s===null&&(n.flags|=4194304),n.child;case 5:return s===null&&We&&((u=c=ht)&&(c=nj(c,n.type,n.pendingProps,Gs),c!==null?(n.stateNode=c,Ht=n,ht=_s(c.firstChild),Gs=!1,u=!0):u=!1),u||kn(n)),Vc(n),u=n.type,f=n.pendingProps,E=s!==null?s.memoizedProps:null,c=f.children,Yu(u,f)?c=null:E!==null&&Yu(u,E)&&(n.flags|=32),n.memoizedState!==null&&(u=Vd(s,n,jv,null,null,i),Xr._currentValue=u),go(s,n),Tt(s,n,c,i),n.child;case 6:return s===null&&We&&((s=i=ht)&&(i=lj(i,n.pendingProps,Gs),i!==null?(n.stateNode=i,Ht=n,ht=null,s=!0):s=!1),s||kn(n)),null;case 13:return np(s,n,i);case 4:return be(n,n.stateNode.containerInfo),c=n.pendingProps,s===null?n.child=jl(n,null,c,i):Tt(s,n,c,i),n.child;case 11:return Wx(s,n,n.type,n.pendingProps,i);case 7:return Tt(s,n,n.pendingProps,i),n.child;case 8:return Tt(s,n,n.pendingProps.children,i),n.child;case 12:return Tt(s,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,Ma(n,n.type,c.value),Tt(s,n,c.children,i),n.child;case 9:return u=n.type._context,c=n.pendingProps.children,An(n),u=zt(u),c=c(u),n.flags|=1,Tt(s,n,c,i),n.child;case 14:return Xx(s,n,n.type,n.pendingProps,i);case 15:return Zx(s,n,n.type,n.pendingProps,i);case 19:return rp(s,n,i);case 31:return c=n.pendingProps,i=n.mode,c={mode:c.mode,children:c.children},s===null?(i=bo(c,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=ra(s.child,c),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return Jx(s,n,i);case 24:return An(n),c=zt(Nt),s===null?(u=zd(),u===null&&(u=ot,f=_d(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:c,cache:u},Id(n),Ma(n,Nt,u)):((s.lanes&i)!==0&&($d(s,n),Or(n,null,null,i),Ar()),u=s.memoizedState,f=n.memoizedState,u.parent!==c?(u={parent:c,cache:c},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Ma(n,Nt,c)):(c=f.cache,Ma(n,Nt,c),c!==u.cache&&Dd(n,[Nt],i,!0))),Tt(s,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function ha(s){s.flags|=4}function op(s,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!pg(n)){if(n=Os.current,n!==null&&((Ke&4194048)===Ke?Ks!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||n!==Ks))throw kr=Ud,Qh;s.flags|=8192}}function yo(s,n){n!==null&&(s.flags|=4),s.flags&16384&&(n=s.tag!==22?Uf():536870912,s.lanes|=n,kl|=n)}function Dr(s,n){if(!We)switch(s.tailMode){case"hidden":n=s.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?s.tail=null:i.sibling=null;break;case"collapsed":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ft(s){var n=s.alternate!==null&&s.alternate.child===s.child,i=0,c=0;if(n)for(var u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags&65011712,c|=u.flags&65011712,u.return=s,u=u.sibling;else for(u=s.child;u!==null;)i|=u.lanes|u.childLanes,c|=u.subtreeFlags,c|=u.flags,u.return=s,u=u.sibling;return s.subtreeFlags|=c,s.childLanes=i,n}function Tv(s,n,i){var c=n.pendingProps;switch(Pd(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(n),null;case 1:return ft(n),null;case 3:return i=n.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),da(Nt),Ve(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(s===null||s.child===null)&&(yr(n)?ha(n):s===null||s.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Uh())),ft(n),null;case 26:return i=n.memoizedState,s===null?(ha(n),i!==null?(ft(n),op(n,i)):(ft(n),n.flags&=-16777217)):i?i!==s.memoizedState?(ha(n),ft(n),op(n,i)):(ft(n),n.flags&=-16777217):(s.memoizedProps!==c&&ha(n),ft(n),n.flags&=-16777217),null;case 27:Oi(n),i=ae.current;var u=n.type;if(s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return ft(n),null}s=J.current,yr(n)?qh(n):(s=og(u,c,i),n.stateNode=s,ha(n))}return ft(n),null;case 5:if(Oi(n),i=n.type,s!==null&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return ft(n),null}if(s=J.current,yr(n))qh(n);else{switch(u=Po(ae.current),s){case 1:s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=u.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?u.createElement("select",{is:c.is}):u.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?u.createElement(i,{is:c.is}):u.createElement(i)}}s[qt]=n,s[Yt]=c;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=s;e:switch(Mt(s,i,c),i){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ha(n)}}return ft(n),n.flags&=-16777217,null;case 6:if(s&&n.stateNode!=null)s.memoizedProps!==c&&ha(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(r(166));if(s=ae.current,yr(n)){if(s=n.stateNode,i=n.memoizedProps,c=null,u=Ht,u!==null)switch(u.tag){case 27:case 5:c=u.memoizedProps}s[qt]=n,s=!!(s.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||tg(s.nodeValue,i)),s||kn(n)}else s=Po(s).createTextNode(c),s[qt]=n,n.stateNode=s}return ft(n),null;case 13:if(c=n.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(u=yr(n),c!==null&&c.dehydrated!==null){if(s===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[qt]=n}else wr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ft(n),u=!1}else u=Uh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(ma(n),n):(ma(n),null)}if(ma(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=c!==null,s=s!==null&&s.memoizedState!==null,i){c=n.child,u=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(u=c.alternate.memoizedState.cachePool.pool);var f=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==u&&(c.flags|=2048)}return i!==s&&i&&(n.child.flags|=8192),yo(n,n.updateQueue),ft(n),null;case 4:return Ve(),s===null&&Hu(n.stateNode.containerInfo),ft(n),null;case 10:return da(n.type),ft(n),null;case 19:if(D(St),u=n.memoizedState,u===null)return ft(n),null;if(c=(n.flags&128)!==0,f=u.rendering,f===null)if(c)Dr(u,!1);else{if(xt!==0||s!==null&&(s.flags&128)!==0)for(s=n.child;s!==null;){if(f=ho(s),f!==null){for(n.flags|=128,Dr(u,!1),s=f.updateQueue,n.updateQueue=s,yo(n,s),n.subtreeFlags=0,s=i,i=n.child;i!==null;)Dh(i,s),i=i.sibling;return V(St,St.current&1|2),n.child}s=s.sibling}u.tail!==null&&Qs()>jo&&(n.flags|=128,c=!0,Dr(u,!1),n.lanes=4194304)}else{if(!c)if(s=ho(f),s!==null){if(n.flags|=128,c=!0,s=s.updateQueue,n.updateQueue=s,yo(n,s),Dr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!We)return ft(n),null}else 2*Qs()-u.renderingStartTime>jo&&i!==536870912&&(n.flags|=128,c=!0,Dr(u,!1),n.lanes=4194304);u.isBackwards?(f.sibling=n.child,n.child=f):(s=u.last,s!==null?s.sibling=f:n.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Qs(),n.sibling=null,s=St.current,V(St,c?s&1|2:s&1),n):(ft(n),null);case 22:case 23:return ma(n),Gd(),c=n.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(ft(n),n.subtreeFlags&6&&(n.flags|=8192)):ft(n),i=n.updateQueue,i!==null&&yo(n,i.retryQueue),i=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),s!==null&&D(On),null;case 24:return i=null,s!==null&&(i=s.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),da(Nt),ft(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function Pv(s,n){switch(Pd(n),n.tag){case 1:return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 3:return da(Nt),Ve(),s=n.flags,(s&65536)!==0&&(s&128)===0?(n.flags=s&-65537|128,n):null;case 26:case 27:case 5:return Oi(n),null;case 13:if(ma(n),s=n.memoizedState,s!==null&&s.dehydrated!==null){if(n.alternate===null)throw Error(r(340));wr()}return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 19:return D(St),null;case 4:return Ve(),null;case 10:return da(n.type),null;case 22:case 23:return ma(n),Gd(),s!==null&&D(On),s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 24:return da(Nt),null;case 25:return null;default:return null}}function cp(s,n){switch(Pd(n),n.tag){case 3:da(Nt),Ve();break;case 26:case 27:case 5:Oi(n);break;case 4:Ve();break;case 13:ma(n);break;case 19:D(St);break;case 10:da(n.type);break;case 22:case 23:ma(n),Gd(),s!==null&&D(On);break;case 24:da(Nt)}}function _r(s,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var u=c.next;i=u;do{if((i.tag&s)===s){c=void 0;var f=i.create,E=i.inst;c=f(),E.destroy=c}i=i.next}while(i!==u)}}catch(R){it(n,n.return,R)}}function Ua(s,n,i){try{var c=n.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var f=u.next;c=f;do{if((c.tag&s)===s){var E=c.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,u=n;var B=i,ne=R;try{ne()}catch(he){it(u,B,he)}}}c=c.next}while(c!==f)}}catch(he){it(n,n.return,he)}}function dp(s){var n=s.updateQueue;if(n!==null){var i=s.stateNode;try{Xh(n,i)}catch(c){it(s,s.return,c)}}}function up(s,n,i){i.props=Tn(s.type,s.memoizedProps),i.state=s.memoizedState;try{i.componentWillUnmount()}catch(c){it(s,n,c)}}function qr(s,n){try{var i=s.ref;if(i!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof i=="function"?s.refCleanup=i(c):i.current=c}}catch(u){it(s,n,u)}}function Vs(s,n){var i=s.ref,c=s.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(u){it(s,n,u)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){it(s,n,u)}else i.current=null}function mp(s){var n=s.type,i=s.memoizedProps,c=s.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(u){it(s,s.return,u)}}function wu(s,n,i){try{var c=s.stateNode;Jv(c,s.type,i,n),c[Yt]=n}catch(u){it(s,s.return,u)}}function fp(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Va(s.type)||s.tag===4}function vu(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||fp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Va(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ju(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(s,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(s),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=To));else if(c!==4&&(c===27&&Va(s.type)&&(i=s.stateNode,n=null),s=s.child,s!==null))for(ju(s,n,i),s=s.sibling;s!==null;)ju(s,n,i),s=s.sibling}function wo(s,n,i){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?i.insertBefore(s,n):i.appendChild(s);else if(c!==4&&(c===27&&Va(s.type)&&(i=s.stateNode),s=s.child,s!==null))for(wo(s,n,i),s=s.sibling;s!==null;)wo(s,n,i),s=s.sibling}function hp(s){var n=s.stateNode,i=s.memoizedProps;try{for(var c=s.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Mt(n,c,i),n[qt]=s,n[Yt]=i}catch(f){it(s,s.return,f)}}var xa=!1,bt=!1,Nu=!1,xp=typeof WeakSet=="function"?WeakSet:Set,At=null;function Mv(s,n){if(s=s.containerInfo,Ku=qo,s=kh(s),vd(s)){if("selectionStart"in s)var i={start:s.selectionStart,end:s.selectionEnd};else e:{i=(i=s.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var u=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var E=0,R=-1,B=-1,ne=0,he=0,pe=s,ie=null;t:for(;;){for(var oe;pe!==i||u!==0&&pe.nodeType!==3||(R=E+u),pe!==f||c!==0&&pe.nodeType!==3||(B=E+c),pe.nodeType===3&&(E+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)ie=pe,pe=oe;for(;;){if(pe===s)break t;if(ie===i&&++ne===u&&(R=E),ie===f&&++he===c&&(B=E),(oe=pe.nextSibling)!==null)break;pe=ie,ie=pe.parentNode}pe=oe}i=R===-1||B===-1?null:{start:R,end:B}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vu={focusedElem:s,selectionRange:i},qo=!1,At=n;At!==null;)if(n=At,s=n.child,(n.subtreeFlags&1024)!==0&&s!==null)s.return=n,At=s;else for(;At!==null;){switch(n=At,f=n.alternate,s=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&f!==null){s=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,c=i.stateNode;try{var Me=Tn(i.type,u,i.elementType===i.type);s=c.getSnapshotBeforeUpdate(Me,f),c.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){it(i,i.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=n.stateNode.containerInfo,i=s.nodeType,i===9)Xu(s);else if(i===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Xu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=n.sibling,s!==null){s.return=n.return,At=s;break}At=n.return}}function pp(s,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Ia(s,i),c&4&&_r(5,i);break;case 1:if(Ia(s,i),c&4)if(s=i.stateNode,n===null)try{s.componentDidMount()}catch(E){it(i,i.return,E)}else{var u=Tn(i.type,n.memoizedProps);n=n.memoizedState;try{s.componentDidUpdate(u,n,s.__reactInternalSnapshotBeforeUpdate)}catch(E){it(i,i.return,E)}}c&64&&dp(i),c&512&&qr(i,i.return);break;case 3:if(Ia(s,i),c&64&&(s=i.updateQueue,s!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Xh(s,n)}catch(E){it(i,i.return,E)}}break;case 27:n===null&&c&4&&hp(i);case 26:case 5:Ia(s,i),n===null&&c&4&&mp(i),c&512&&qr(i,i.return);break;case 12:Ia(s,i);break;case 13:Ia(s,i),c&4&&yp(s,i),c&64&&(s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(i=$v.bind(null,i),rj(s,i))));break;case 22:if(c=i.memoizedState!==null||xa,!c){n=n!==null&&n.memoizedState!==null||bt,u=xa;var f=bt;xa=c,(bt=n)&&!f?$a(s,i,(i.subtreeFlags&8772)!==0):Ia(s,i),xa=u,bt=f}break;case 30:break;default:Ia(s,i)}}function gp(s){var n=s.alternate;n!==null&&(s.alternate=null,gp(n)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(n=s.stateNode,n!==null&&sd(n)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ut=null,Zt=!1;function pa(s,n,i){for(i=i.child;i!==null;)bp(s,n,i),i=i.sibling}function bp(s,n,i){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(lr,i)}catch{}switch(i.tag){case 26:bt||Vs(i,n),pa(s,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bt||Vs(i,n);var c=ut,u=Zt;Va(i.type)&&(ut=i.stateNode,Zt=!1),pa(s,n,i),Kr(i.stateNode),ut=c,Zt=u;break;case 5:bt||Vs(i,n);case 6:if(c=ut,u=Zt,ut=null,pa(s,n,i),ut=c,Zt=u,ut!==null)if(Zt)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(i.stateNode)}catch(f){it(i,n,f)}else try{ut.removeChild(i.stateNode)}catch(f){it(i,n,f)}break;case 18:ut!==null&&(Zt?(s=ut,rg(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.stateNode),ti(s)):rg(ut,i.stateNode));break;case 4:c=ut,u=Zt,ut=i.stateNode.containerInfo,Zt=!0,pa(s,n,i),ut=c,Zt=u;break;case 0:case 11:case 14:case 15:bt||Ua(2,i,n),bt||Ua(4,i,n),pa(s,n,i);break;case 1:bt||(Vs(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&up(i,n,c)),pa(s,n,i);break;case 21:pa(s,n,i);break;case 22:bt=(c=bt)||i.memoizedState!==null,pa(s,n,i),bt=c;break;default:pa(s,n,i)}}function yp(s,n){if(n.memoizedState===null&&(s=n.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ti(s)}catch(i){it(n,n.return,i)}}function Fv(s){switch(s.tag){case 13:case 19:var n=s.stateNode;return n===null&&(n=s.stateNode=new xp),n;case 22:return s=s.stateNode,n=s._retryCache,n===null&&(n=s._retryCache=new xp),n;default:throw Error(r(435,s.tag))}}function Su(s,n){var i=Fv(s);n.forEach(function(c){var u=Bv.bind(null,s,c);i.has(c)||(i.add(c),c.then(u,u))})}function us(s,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var u=i[c],f=s,E=n,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(Va(R.type)){ut=R.stateNode,Zt=!1;break e}break;case 5:ut=R.stateNode,Zt=!1;break e;case 3:case 4:ut=R.stateNode.containerInfo,Zt=!0;break e}R=R.return}if(ut===null)throw Error(r(160));bp(f,E,u),ut=null,Zt=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)wp(n,s),n=n.sibling}var Ds=null;function wp(s,n){var i=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:us(n,s),ms(s),c&4&&(Ua(3,s,s.return),_r(3,s),Ua(5,s,s.return));break;case 1:us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),c&64&&xa&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(i=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var u=Ds;if(us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),c&4){var f=i!==null?i.memoizedState:null;if(c=s.memoizedState,i===null)if(c===null)if(s.stateNode===null){e:{c=s.type,i=s.memoizedProps,u=u.ownerDocument||u;t:switch(c){case"title":f=u.getElementsByTagName("title")[0],(!f||f[or]||f[qt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(c),u.head.insertBefore(f,u.querySelector("head > title"))),Mt(f,c,i),f[qt]=s,kt(f),c=f;break e;case"link":var E=hg("link","href",u).get(c+(i.href||""));if(E){for(var R=0;R<E.length;R++)if(f=E[R],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){E.splice(R,1);break t}}f=u.createElement(c),Mt(f,c,i),u.head.appendChild(f);break;case"meta":if(E=hg("meta","content",u).get(c+(i.content||""))){for(R=0;R<E.length;R++)if(f=E[R],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){E.splice(R,1);break t}}f=u.createElement(c),Mt(f,c,i),u.head.appendChild(f);break;default:throw Error(r(468,c))}f[qt]=s,kt(f),c=f}s.stateNode=c}else xg(u,s.type,s.stateNode);else s.stateNode=fg(u,c,s.memoizedProps);else f!==c?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,c===null?xg(u,s.type,s.stateNode):fg(u,c,s.memoizedProps)):c===null&&s.stateNode!==null&&wu(s,s.memoizedProps,i.memoizedProps)}break;case 27:us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),i!==null&&c&4&&wu(s,s.memoizedProps,i.memoizedProps);break;case 5:if(us(n,s),ms(s),c&512&&(bt||i===null||Vs(i,i.return)),s.flags&32){u=s.stateNode;try{nl(u,"")}catch(oe){it(s,s.return,oe)}}c&4&&s.stateNode!=null&&(u=s.memoizedProps,wu(s,u,i!==null?i.memoizedProps:u)),c&1024&&(Nu=!0);break;case 6:if(us(n,s),ms(s),c&4){if(s.stateNode===null)throw Error(r(162));c=s.memoizedProps,i=s.stateNode;try{i.nodeValue=c}catch(oe){it(s,s.return,oe)}}break;case 3:if(Lo=null,u=Ds,Ds=Mo(n.containerInfo),us(n,s),Ds=u,ms(s),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ti(n.containerInfo)}catch(oe){it(s,s.return,oe)}Nu&&(Nu=!1,vp(s));break;case 4:c=Ds,Ds=Mo(s.stateNode.containerInfo),us(n,s),ms(s),Ds=c;break;case 12:us(n,s),ms(s);break;case 13:us(n,s),ms(s),s.child.flags&8192&&s.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Ru=Qs()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Su(s,c)));break;case 22:u=s.memoizedState!==null;var B=i!==null&&i.memoizedState!==null,ne=xa,he=bt;if(xa=ne||u,bt=he||B,us(n,s),bt=he,xa=ne,ms(s),c&8192)e:for(n=s.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||B||xa||bt||Pn(s)),i=null,n=s;;){if(n.tag===5||n.tag===26){if(i===null){B=i=n;try{if(f=B.stateNode,u)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=B.stateNode;var pe=B.memoizedProps.style,ie=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;R.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(oe){it(B,B.return,oe)}}}else if(n.tag===6){if(i===null){B=n;try{B.stateNode.nodeValue=u?"":B.memoizedProps}catch(oe){it(B,B.return,oe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===s)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=s.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Su(s,i))));break;case 19:us(n,s),ms(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Su(s,c)));break;case 30:break;case 21:break;default:us(n,s),ms(s)}}function ms(s){var n=s.flags;if(n&2){try{for(var i,c=s.return;c!==null;){if(fp(c)){i=c;break}c=c.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var u=i.stateNode,f=vu(s);wo(s,f,u);break;case 5:var E=i.stateNode;i.flags&32&&(nl(E,""),i.flags&=-33);var R=vu(s);wo(s,R,E);break;case 3:case 4:var B=i.stateNode.containerInfo,ne=vu(s);ju(s,ne,B);break;default:throw Error(r(161))}}catch(he){it(s,s.return,he)}s.flags&=-3}n&4096&&(s.flags&=-4097)}function vp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var n=s;vp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),s=s.sibling}}function Ia(s,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)pp(s,n.alternate,n),n=n.sibling}function Pn(s){for(s=s.child;s!==null;){var n=s;switch(n.tag){case 0:case 11:case 14:case 15:Ua(4,n,n.return),Pn(n);break;case 1:Vs(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&up(n,n.return,i),Pn(n);break;case 27:Kr(n.stateNode);case 26:case 5:Vs(n,n.return),Pn(n);break;case 22:n.memoizedState===null&&Pn(n);break;case 30:Pn(n);break;default:Pn(n)}s=s.sibling}}function $a(s,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,u=s,f=n,E=f.flags;switch(f.tag){case 0:case 11:case 15:$a(u,f,i),_r(4,f);break;case 1:if($a(u,f,i),c=f,u=c.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(ne){it(c,c.return,ne)}if(c=f,u=c.updateQueue,u!==null){var R=c.stateNode;try{var B=u.shared.hiddenCallbacks;if(B!==null)for(u.shared.hiddenCallbacks=null,u=0;u<B.length;u++)Wh(B[u],R)}catch(ne){it(c,c.return,ne)}}i&&E&64&&dp(f),qr(f,f.return);break;case 27:hp(f);case 26:case 5:$a(u,f,i),i&&c===null&&E&4&&mp(f),qr(f,f.return);break;case 12:$a(u,f,i);break;case 13:$a(u,f,i),i&&E&4&&yp(u,f);break;case 22:f.memoizedState===null&&$a(u,f,i),qr(f,f.return);break;case 30:break;default:$a(u,f,i)}n=n.sibling}}function Cu(s,n){var i=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(s!=null&&s.refCount++,i!=null&&Nr(i))}function ku(s,n){s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nr(s))}function Ys(s,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jp(s,n,i,c),n=n.sibling}function jp(s,n,i,c){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Ys(s,n,i,c),u&2048&&_r(9,n);break;case 1:Ys(s,n,i,c);break;case 3:Ys(s,n,i,c),u&2048&&(s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&Nr(s)));break;case 12:if(u&2048){Ys(s,n,i,c),s=n.stateNode;try{var f=n.memoizedProps,E=f.id,R=f.onPostCommit;typeof R=="function"&&R(E,n.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(B){it(n,n.return,B)}}else Ys(s,n,i,c);break;case 13:Ys(s,n,i,c);break;case 23:break;case 22:f=n.stateNode,E=n.alternate,n.memoizedState!==null?f._visibility&2?Ys(s,n,i,c):zr(s,n):f._visibility&2?Ys(s,n,i,c):(f._visibility|=2,Nl(s,n,i,c,(n.subtreeFlags&10256)!==0)),u&2048&&Cu(E,n);break;case 24:Ys(s,n,i,c),u&2048&&ku(n.alternate,n);break;default:Ys(s,n,i,c)}}function Nl(s,n,i,c,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=s,E=n,R=i,B=c,ne=E.flags;switch(E.tag){case 0:case 11:case 15:Nl(f,E,R,B,u),_r(8,E);break;case 23:break;case 22:var he=E.stateNode;E.memoizedState!==null?he._visibility&2?Nl(f,E,R,B,u):zr(f,E):(he._visibility|=2,Nl(f,E,R,B,u)),u&&ne&2048&&Cu(E.alternate,E);break;case 24:Nl(f,E,R,B,u),u&&ne&2048&&ku(E.alternate,E);break;default:Nl(f,E,R,B,u)}n=n.sibling}}function zr(s,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=s,c=n,u=c.flags;switch(c.tag){case 22:zr(i,c),u&2048&&Cu(c.alternate,c);break;case 24:zr(i,c),u&2048&&ku(c.alternate,c);break;default:zr(i,c)}n=n.sibling}}var Ur=8192;function Sl(s){if(s.subtreeFlags&Ur)for(s=s.child;s!==null;)Np(s),s=s.sibling}function Np(s){switch(s.tag){case 26:Sl(s),s.flags&Ur&&s.memoizedState!==null&&yj(Ds,s.memoizedState,s.memoizedProps);break;case 5:Sl(s);break;case 3:case 4:var n=Ds;Ds=Mo(s.stateNode.containerInfo),Sl(s),Ds=n;break;case 22:s.memoizedState===null&&(n=s.alternate,n!==null&&n.memoizedState!==null?(n=Ur,Ur=16777216,Sl(s),Ur=n):Sl(s));break;default:Sl(s)}}function Sp(s){var n=s.alternate;if(n!==null&&(s=n.child,s!==null)){n.child=null;do n=s.sibling,s.sibling=null,s=n;while(s!==null)}}function Ir(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,kp(c,s)}Sp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cp(s),s=s.sibling}function Cp(s){switch(s.tag){case 0:case 11:case 15:Ir(s),s.flags&2048&&Ua(9,s,s.return);break;case 3:Ir(s);break;case 12:Ir(s);break;case 22:var n=s.stateNode;s.memoizedState!==null&&n._visibility&2&&(s.return===null||s.return.tag!==13)?(n._visibility&=-3,vo(s)):Ir(s);break;default:Ir(s)}}function vo(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];At=c,kp(c,s)}Sp(s)}for(s=s.child;s!==null;){switch(n=s,n.tag){case 0:case 11:case 15:Ua(8,n,n.return),vo(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,vo(n));break;default:vo(n)}s=s.sibling}}function kp(s,n){for(;At!==null;){var i=At;switch(i.tag){case 0:case 11:case 15:Ua(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nr(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,At=c;else e:for(i=s;At!==null;){c=At;var u=c.sibling,f=c.return;if(gp(c),c===i){At=null;break e}if(u!==null){u.return=f,At=u;break e}At=f}}}var Lv={getCacheForType:function(s){var n=zt(Nt),i=n.data.get(s);return i===void 0&&(i=s(),n.data.set(s,i)),i}},Dv=typeof WeakMap=="function"?WeakMap:Map,st=0,ot=null,$e=null,Ke=0,at=0,fs=null,Ba=!1,Cl=!1,Eu=!1,ga=0,xt=0,Ha=0,Mn=0,Au=0,Rs=0,kl=0,$r=null,Jt=null,Ou=!1,Ru=0,jo=1/0,No=null,Qa=null,Pt=0,Ga=null,El=null,Al=0,Tu=0,Pu=null,Ep=null,Br=0,Mu=null;function hs(){if((st&2)!==0&&Ke!==0)return Ke&-Ke;if(_.T!==null){var s=xl;return s!==0?s:Uu()}return Bf()}function Ap(){Rs===0&&(Rs=(Ke&536870912)===0||We?zf():536870912);var s=Os.current;return s!==null&&(s.flags|=32),Rs}function xs(s,n,i){(s===ot&&(at===2||at===9)||s.cancelPendingCommit!==null)&&(Ol(s,0),Ka(s,Ke,Rs,!1)),ir(s,i),((st&2)===0||s!==ot)&&(s===ot&&((st&2)===0&&(Mn|=i),xt===4&&Ka(s,Ke,Rs,!1)),Ws(s))}function Op(s,n,i){if((st&6)!==0)throw Error(r(327));var c=!i&&(n&124)===0&&(n&s.expiredLanes)===0||rr(s,n),u=c?zv(s,n):Du(s,n,!0),f=c;do{if(u===0){Cl&&!c&&Ka(s,n,0,!1);break}else{if(i=s.current.alternate,f&&!_v(i)){u=Du(s,n,!1),f=!1;continue}if(u===2){if(f=n,s.errorRecoveryDisabledLanes&f)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){n=E;e:{var R=s;u=$r;var B=R.current.memoizedState.isDehydrated;if(B&&(Ol(R,E).flags|=256),E=Du(R,E,!1),E!==2){if(Eu&&!B){R.errorRecoveryDisabledLanes|=f,Mn|=f,u=4;break e}f=Jt,Jt=u,f!==null&&(Jt===null?Jt=f:Jt.push.apply(Jt,f))}u=E}if(f=!1,u!==2)continue}}if(u===1){Ol(s,0),Ka(s,n,0,!0);break}e:{switch(c=s,f=u,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Ka(c,n,Rs,!Ba);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=Ru+300-Qs(),10<u)){if(Ka(c,n,Rs,!Ba),Mi(c,0,!0)!==0)break e;c.timeoutHandle=ng(Rp.bind(null,c,i,Jt,No,Ou,n,Rs,Mn,kl,Ba,f,2,-0,0),u);break e}Rp(c,i,Jt,No,Ou,n,Rs,Mn,kl,Ba,f,0,-0,0)}}break}while(!0);Ws(s)}function Rp(s,n,i,c,u,f,E,R,B,ne,he,pe,ie,oe){if(s.timeoutHandle=-1,pe=n.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Wr={stylesheets:null,count:0,unsuspend:bj},Np(n),pe=wj(),pe!==null)){s.cancelPendingCommit=pe(_p.bind(null,s,n,f,i,c,u,E,R,B,he,1,ie,oe)),Ka(s,f,E,!ne);return}_p(s,n,f,i,c,u,E,R,B)}function _v(s){for(var n=s;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var u=i[c],f=u.getSnapshot;u=u.value;try{if(!cs(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ka(s,n,i,c){n&=~Au,n&=~Mn,s.suspendedLanes|=n,s.pingedLanes&=~n,c&&(s.warmLanes|=n),c=s.expirationTimes;for(var u=n;0<u;){var f=31-os(u),E=1<<f;c[f]=-1,u&=~E}i!==0&&If(s,i,n)}function So(){return(st&6)===0?(Hr(0),!1):!0}function Fu(){if($e!==null){if(at===0)var s=$e.return;else s=$e,ca=En=null,Xd(s),vl=null,Fr=0,s=$e;for(;s!==null;)cp(s.alternate,s),s=s.return;$e=null}}function Ol(s,n){var i=s.timeoutHandle;i!==-1&&(s.timeoutHandle=-1,tj(i)),i=s.cancelPendingCommit,i!==null&&(s.cancelPendingCommit=null,i()),Fu(),ot=s,$e=i=ra(s.current,null),Ke=n,at=0,fs=null,Ba=!1,Cl=rr(s,n),Eu=!1,kl=Rs=Au=Mn=Ha=xt=0,Jt=$r=null,Ou=!1,(n&8)!==0&&(n|=n&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=n;0<c;){var u=31-os(c),f=1<<u;n|=s[u],c&=~f}return ga=n,Qi(),i}function Tp(s,n){Ue=null,_.H=uo,n===Cr||n===eo?(n=Vh(),at=3):n===Qh?(n=Vh(),at=4):at=n===Yx?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,fs=n,$e===null&&(xt=1,po(s,Cs(n,s.current)))}function Pp(){var s=_.H;return _.H=uo,s===null?uo:s}function Mp(){var s=_.A;return _.A=Lv,s}function Lu(){xt=4,Ba||(Ke&4194048)!==Ke&&Os.current!==null||(Cl=!0),(Ha&134217727)===0&&(Mn&134217727)===0||ot===null||Ka(ot,Ke,Rs,!1)}function Du(s,n,i){var c=st;st|=2;var u=Pp(),f=Mp();(ot!==s||Ke!==n)&&(No=null,Ol(s,n)),n=!1;var E=xt;e:do try{if(at!==0&&$e!==null){var R=$e,B=fs;switch(at){case 8:Fu(),E=6;break e;case 3:case 2:case 9:case 6:Os.current===null&&(n=!0);var ne=at;if(at=0,fs=null,Rl(s,R,B,ne),i&&Cl){E=0;break e}break;default:ne=at,at=0,fs=null,Rl(s,R,B,ne)}}qv(),E=xt;break}catch(he){Tp(s,he)}while(!0);return n&&s.shellSuspendCounter++,ca=En=null,st=c,_.H=u,_.A=f,$e===null&&(ot=null,Ke=0,Qi()),E}function qv(){for(;$e!==null;)Fp($e)}function zv(s,n){var i=st;st|=2;var c=Pp(),u=Mp();ot!==s||Ke!==n?(No=null,jo=Qs()+500,Ol(s,n)):Cl=rr(s,n);e:do try{if(at!==0&&$e!==null){n=$e;var f=fs;t:switch(at){case 1:at=0,fs=null,Rl(s,n,f,1);break;case 2:case 9:if(Gh(f)){at=0,fs=null,Lp(n);break}n=function(){at!==2&&at!==9||ot!==s||(at=7),Ws(s)},f.then(n,n);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Gh(f)?(at=0,fs=null,Lp(n)):(at=0,fs=null,Rl(s,n,f,7));break;case 5:var E=null;switch($e.tag){case 26:E=$e.memoizedState;case 5:case 27:var R=$e;if(!E||pg(E)){at=0,fs=null;var B=R.sibling;if(B!==null)$e=B;else{var ne=R.return;ne!==null?($e=ne,Co(ne)):$e=null}break t}}at=0,fs=null,Rl(s,n,f,5);break;case 6:at=0,fs=null,Rl(s,n,f,6);break;case 8:Fu(),xt=6;break e;default:throw Error(r(462))}}Uv();break}catch(he){Tp(s,he)}while(!0);return ca=En=null,_.H=c,_.A=u,st=i,$e!==null?0:(ot=null,Ke=0,Qi(),xt)}function Uv(){for(;$e!==null&&!ow();)Fp($e)}function Fp(s){var n=ip(s.alternate,s,ga);s.memoizedProps=s.pendingProps,n===null?Co(s):$e=n}function Lp(s){var n=s,i=n.alternate;switch(n.tag){case 15:case 0:n=tp(i,n,n.pendingProps,n.type,void 0,Ke);break;case 11:n=tp(i,n,n.pendingProps,n.type.render,n.ref,Ke);break;case 5:Xd(n);default:cp(i,n),n=$e=Dh(n,ga),n=ip(i,n,ga)}s.memoizedProps=s.pendingProps,n===null?Co(s):$e=n}function Rl(s,n,i,c){ca=En=null,Xd(n),vl=null,Fr=0;var u=n.return;try{if(Ov(s,u,n,i,Ke)){xt=1,po(s,Cs(i,s.current)),$e=null;return}}catch(f){if(u!==null)throw $e=u,f;xt=1,po(s,Cs(i,s.current)),$e=null;return}n.flags&32768?(We||c===1?s=!0:Cl||(Ke&536870912)!==0?s=!1:(Ba=s=!0,(c===2||c===9||c===3||c===6)&&(c=Os.current,c!==null&&c.tag===13&&(c.flags|=16384))),Dp(n,s)):Co(n)}function Co(s){var n=s;do{if((n.flags&32768)!==0){Dp(n,Ba);return}s=n.return;var i=Tv(n.alternate,n,ga);if(i!==null){$e=i;return}if(n=n.sibling,n!==null){$e=n;return}$e=n=s}while(n!==null);xt===0&&(xt=5)}function Dp(s,n){do{var i=Pv(s.alternate,s);if(i!==null){i.flags&=32767,$e=i;return}if(i=s.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(s=s.sibling,s!==null)){$e=s;return}$e=s=i}while(s!==null);xt=6,$e=null}function _p(s,n,i,c,u,f,E,R,B){s.cancelPendingCommit=null;do ko();while(Pt!==0);if((st&6)!==0)throw Error(r(327));if(n!==null){if(n===s.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=kd,bw(s,i,f,E,R,B),s===ot&&($e=ot=null,Ke=0),El=n,Ga=s,Al=i,Tu=f,Pu=u,Ep=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Hv(Ri,function(){return $p(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=_.T,_.T=null,u=X.p,X.p=2,E=st,st|=4;try{Mv(s,n,i)}finally{st=E,X.p=u,_.T=c}}Pt=1,qp(),zp(),Up()}}function qp(){if(Pt===1){Pt=0;var s=Ga,n=El,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=_.T,_.T=null;var c=X.p;X.p=2;var u=st;st|=4;try{wp(n,s);var f=Vu,E=kh(s.containerInfo),R=f.focusedElem,B=f.selectionRange;if(E!==R&&R&&R.ownerDocument&&Ch(R.ownerDocument.documentElement,R)){if(B!==null&&vd(R)){var ne=B.start,he=B.end;if(he===void 0&&(he=ne),"selectionStart"in R)R.selectionStart=ne,R.selectionEnd=Math.min(he,R.value.length);else{var pe=R.ownerDocument||document,ie=pe&&pe.defaultView||window;if(ie.getSelection){var oe=ie.getSelection(),Me=R.textContent.length,Oe=Math.min(B.start,Me),rt=B.end===void 0?Oe:Math.min(B.end,Me);!oe.extend&&Oe>rt&&(E=rt,rt=Oe,Oe=E);var ee=Sh(R,Oe),K=Sh(R,rt);if(ee&&K&&(oe.rangeCount!==1||oe.anchorNode!==ee.node||oe.anchorOffset!==ee.offset||oe.focusNode!==K.node||oe.focusOffset!==K.offset)){var se=pe.createRange();se.setStart(ee.node,ee.offset),oe.removeAllRanges(),Oe>rt?(oe.addRange(se),oe.extend(K.node,K.offset)):(se.setEnd(K.node,K.offset),oe.addRange(se))}}}}for(pe=[],oe=R;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<pe.length;R++){var xe=pe[R];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}qo=!!Ku,Vu=Ku=null}finally{st=u,X.p=c,_.T=i}}s.current=n,Pt=2}}function zp(){if(Pt===2){Pt=0;var s=Ga,n=El,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=_.T,_.T=null;var c=X.p;X.p=2;var u=st;st|=4;try{pp(s,n.alternate,n)}finally{st=u,X.p=c,_.T=i}}Pt=3}}function Up(){if(Pt===4||Pt===3){Pt=0,cw();var s=Ga,n=El,i=Al,c=Ep;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Pt=5:(Pt=0,El=Ga=null,Ip(s,s.pendingLanes));var u=s.pendingLanes;if(u===0&&(Qa=null),ed(i),n=n.stateNode,is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(lr,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=_.T,u=X.p,X.p=2,_.T=null;try{for(var f=s.onRecoverableError,E=0;E<c.length;E++){var R=c[E];f(R.value,{componentStack:R.stack})}}finally{_.T=n,X.p=u}}(Al&3)!==0&&ko(),Ws(s),u=s.pendingLanes,(i&4194090)!==0&&(u&42)!==0?s===Mu?Br++:(Br=0,Mu=s):Br=0,Hr(0)}}function Ip(s,n){(s.pooledCacheLanes&=n)===0&&(n=s.pooledCache,n!=null&&(s.pooledCache=null,Nr(n)))}function ko(s){return qp(),zp(),Up(),$p()}function $p(){if(Pt!==5)return!1;var s=Ga,n=Tu;Tu=0;var i=ed(Al),c=_.T,u=X.p;try{X.p=32>i?32:i,_.T=null,i=Pu,Pu=null;var f=Ga,E=Al;if(Pt=0,El=Ga=null,Al=0,(st&6)!==0)throw Error(r(331));var R=st;if(st|=4,Cp(f.current),jp(f,f.current,E,i),st=R,Hr(0,!1),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(lr,f)}catch{}return!0}finally{X.p=u,_.T=c,Ip(s,n)}}function Bp(s,n,i){n=Cs(i,n),n=uu(s.stateNode,n,2),s=Da(s,n,2),s!==null&&(ir(s,2),Ws(s))}function it(s,n,i){if(s.tag===3)Bp(s,s,i);else for(;n!==null;){if(n.tag===3){Bp(n,s,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Qa===null||!Qa.has(c))){s=Cs(i,s),i=Kx(2),c=Da(n,i,2),c!==null&&(Vx(i,c,n,s),ir(c,2),Ws(c));break}}n=n.return}}function _u(s,n,i){var c=s.pingCache;if(c===null){c=s.pingCache=new Dv;var u=new Set;c.set(n,u)}else u=c.get(n),u===void 0&&(u=new Set,c.set(n,u));u.has(i)||(Eu=!0,u.add(i),s=Iv.bind(null,s,n,i),n.then(s,s))}function Iv(s,n,i){var c=s.pingCache;c!==null&&c.delete(n),s.pingedLanes|=s.suspendedLanes&i,s.warmLanes&=~i,ot===s&&(Ke&i)===i&&(xt===4||xt===3&&(Ke&62914560)===Ke&&300>Qs()-Ru?(st&2)===0&&Ol(s,0):Au|=i,kl===Ke&&(kl=0)),Ws(s)}function Hp(s,n){n===0&&(n=Uf()),s=ul(s,n),s!==null&&(ir(s,n),Ws(s))}function $v(s){var n=s.memoizedState,i=0;n!==null&&(i=n.retryLane),Hp(s,i)}function Bv(s,n){var i=0;switch(s.tag){case 13:var c=s.stateNode,u=s.memoizedState;u!==null&&(i=u.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(n),Hp(s,i)}function Hv(s,n){return Wc(s,n)}var Eo=null,Tl=null,qu=!1,Ao=!1,zu=!1,Fn=0;function Ws(s){s!==Tl&&s.next===null&&(Tl===null?Eo=Tl=s:Tl=Tl.next=s),Ao=!0,qu||(qu=!0,Gv())}function Hr(s,n){if(!zu&&Ao){zu=!0;do for(var i=!1,c=Eo;c!==null;){if(s!==0){var u=c.pendingLanes;if(u===0)var f=0;else{var E=c.suspendedLanes,R=c.pingedLanes;f=(1<<31-os(42|s)+1)-1,f&=u&~(E&~R),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Vp(c,f))}else f=Ke,f=Mi(c,c===ot?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||rr(c,f)||(i=!0,Vp(c,f));c=c.next}while(i);zu=!1}}function Qv(){Qp()}function Qp(){Ao=qu=!1;var s=0;Fn!==0&&(ej()&&(s=Fn),Fn=0);for(var n=Qs(),i=null,c=Eo;c!==null;){var u=c.next,f=Gp(c,n);f===0?(c.next=null,i===null?Eo=u:i.next=u,u===null&&(Tl=i)):(i=c,(s!==0||(f&3)!==0)&&(Ao=!0)),c=u}Hr(s)}function Gp(s,n){for(var i=s.suspendedLanes,c=s.pingedLanes,u=s.expirationTimes,f=s.pendingLanes&-62914561;0<f;){var E=31-os(f),R=1<<E,B=u[E];B===-1?((R&i)===0||(R&c)!==0)&&(u[E]=gw(R,n)):B<=n&&(s.expiredLanes|=R),f&=~R}if(n=ot,i=Ke,i=Mi(s,s===n?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,i===0||s===n&&(at===2||at===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Xc(c),s.callbackNode=null,s.callbackPriority=0;if((i&3)===0||rr(s,i)){if(n=i&-i,n===s.callbackPriority)return n;switch(c!==null&&Xc(c),ed(i)){case 2:case 8:i=_f;break;case 32:i=Ri;break;case 268435456:i=qf;break;default:i=Ri}return c=Kp.bind(null,s),i=Wc(i,c),s.callbackPriority=n,s.callbackNode=i,n}return c!==null&&c!==null&&Xc(c),s.callbackPriority=2,s.callbackNode=null,2}function Kp(s,n){if(Pt!==0&&Pt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var i=s.callbackNode;if(ko()&&s.callbackNode!==i)return null;var c=Ke;return c=Mi(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Op(s,c,n),Gp(s,Qs()),s.callbackNode!=null&&s.callbackNode===i?Kp.bind(null,s):null)}function Vp(s,n){if(ko())return null;Op(s,n,!0)}function Gv(){sj(function(){(st&6)!==0?Wc(Df,Qv):Qp()})}function Uu(){return Fn===0&&(Fn=zf()),Fn}function Yp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:qi(""+s)}function Wp(s,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,s.id&&i.setAttribute("form",s.id),n.parentNode.insertBefore(i,n),s=new FormData(s),i.parentNode.removeChild(i),s}function Kv(s,n,i,c,u){if(n==="submit"&&i&&i.stateNode===u){var f=Yp((u[Yt]||null).action),E=c.submitter;E&&(n=(n=E[Yt]||null)?Yp(n.formAction):E.getAttribute("formAction"),n!==null&&(f=n,E=null));var R=new $i("action","action",null,c,u);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Fn!==0){var B=E?Wp(u,E):new FormData(u);ru(i,{pending:!0,data:B,method:u.method,action:f},null,B)}}else typeof f=="function"&&(R.preventDefault(),B=E?Wp(u,E):new FormData(u),ru(i,{pending:!0,data:B,method:u.method,action:f},f,B))},currentTarget:u}]})}}for(var Iu=0;Iu<Cd.length;Iu++){var $u=Cd[Iu],Vv=$u.toLowerCase(),Yv=$u[0].toUpperCase()+$u.slice(1);Ls(Vv,"on"+Yv)}Ls(Oh,"onAnimationEnd"),Ls(Rh,"onAnimationIteration"),Ls(Th,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(mv,"onTransitionRun"),Ls(fv,"onTransitionStart"),Ls(hv,"onTransitionCancel"),Ls(Ph,"onTransitionEnd"),tl("onMouseEnter",["mouseout","mouseover"]),tl("onMouseLeave",["mouseout","mouseover"]),tl("onPointerEnter",["pointerout","pointerover"]),tl("onPointerLeave",["pointerout","pointerover"]),bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qr));function Xp(s,n){n=(n&4)!==0;for(var i=0;i<s.length;i++){var c=s[i],u=c.event;c=c.listeners;e:{var f=void 0;if(n)for(var E=c.length-1;0<=E;E--){var R=c[E],B=R.instance,ne=R.currentTarget;if(R=R.listener,B!==f&&u.isPropagationStopped())break e;f=R,u.currentTarget=ne;try{f(u)}catch(he){xo(he)}u.currentTarget=null,f=B}else for(E=0;E<c.length;E++){if(R=c[E],B=R.instance,ne=R.currentTarget,R=R.listener,B!==f&&u.isPropagationStopped())break e;f=R,u.currentTarget=ne;try{f(u)}catch(he){xo(he)}u.currentTarget=null,f=B}}}}function Be(s,n){var i=n[td];i===void 0&&(i=n[td]=new Set);var c=s+"__bubble";i.has(c)||(Zp(n,s,2,!1),i.add(c))}function Bu(s,n,i){var c=0;n&&(c|=4),Zp(i,s,c,n)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Hu(s){if(!s[Oo]){s[Oo]=!0,Qf.forEach(function(i){i!=="selectionchange"&&(Wv.has(i)||Bu(i,!1,s),Bu(i,!0,s))});var n=s.nodeType===9?s:s.ownerDocument;n===null||n[Oo]||(n[Oo]=!0,Bu("selectionchange",!1,n))}}function Zp(s,n,i,c){switch(jg(n)){case 2:var u=Nj;break;case 8:u=Sj;break;default:u=nm}i=u.bind(null,n,i,s),u=void 0,!md||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),c?u!==void 0?s.addEventListener(n,i,{capture:!0,passive:u}):s.addEventListener(n,i,!0):u!==void 0?s.addEventListener(n,i,{passive:u}):s.addEventListener(n,i,!1)}function Qu(s,n,i,c,u){var f=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var R=c.stateNode.containerInfo;if(R===u)break;if(E===4)for(E=c.return;E!==null;){var B=E.tag;if((B===3||B===4)&&E.stateNode.containerInfo===u)return;E=E.return}for(;R!==null;){if(E=Zn(R),E===null)return;if(B=E.tag,B===5||B===6||B===26||B===27){c=f=E;continue e}R=R.parentNode}}c=c.return}lh(function(){var ne=f,he=dd(i),pe=[];e:{var ie=Mh.get(s);if(ie!==void 0){var oe=$i,Me=s;switch(s){case"keypress":if(Ui(i)===0)break e;case"keydown":case"keyup":oe=Hw;break;case"focusin":Me="focus",oe=pd;break;case"focusout":Me="blur",oe=pd;break;case"beforeblur":case"afterblur":oe=pd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Pw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Kw;break;case Oh:case Rh:case Th:oe=Lw;break;case Ph:oe=Yw;break;case"scroll":case"scrollend":oe=Rw;break;case"wheel":oe=Xw;break;case"copy":case"cut":case"paste":oe=_w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=dh;break;case"toggle":case"beforetoggle":oe=Jw}var Oe=(n&4)!==0,rt=!Oe&&(s==="scroll"||s==="scrollend"),ee=Oe?ie!==null?ie+"Capture":null:ie;Oe=[];for(var K=ne,se;K!==null;){var xe=K;if(se=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||se===null||ee===null||(xe=dr(K,ee),xe!=null&&Oe.push(Gr(K,xe,se))),rt)break;K=K.return}0<Oe.length&&(ie=new oe(ie,Me,null,i,he),pe.push({event:ie,listeners:Oe}))}}if((n&7)===0){e:{if(ie=s==="mouseover"||s==="pointerover",oe=s==="mouseout"||s==="pointerout",ie&&i!==cd&&(Me=i.relatedTarget||i.fromElement)&&(Zn(Me)||Me[Xn]))break e;if((oe||ie)&&(ie=he.window===he?he:(ie=he.ownerDocument)?ie.defaultView||ie.parentWindow:window,oe?(Me=i.relatedTarget||i.toElement,oe=ne,Me=Me?Zn(Me):null,Me!==null&&(rt=d(Me),Oe=Me.tag,Me!==rt||Oe!==5&&Oe!==27&&Oe!==6)&&(Me=null)):(oe=null,Me=ne),oe!==Me)){if(Oe=oh,xe="onMouseLeave",ee="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=dh,xe="onPointerLeave",ee="onPointerEnter",K="pointer"),rt=oe==null?ie:cr(oe),se=Me==null?ie:cr(Me),ie=new Oe(xe,K+"leave",oe,i,he),ie.target=rt,ie.relatedTarget=se,xe=null,Zn(he)===ne&&(Oe=new Oe(ee,K+"enter",Me,i,he),Oe.target=se,Oe.relatedTarget=rt,xe=Oe),rt=xe,oe&&Me)t:{for(Oe=oe,ee=Me,K=0,se=Oe;se;se=Pl(se))K++;for(se=0,xe=ee;xe;xe=Pl(xe))se++;for(;0<K-se;)Oe=Pl(Oe),K--;for(;0<se-K;)ee=Pl(ee),se--;for(;K--;){if(Oe===ee||ee!==null&&Oe===ee.alternate)break t;Oe=Pl(Oe),ee=Pl(ee)}Oe=null}else Oe=null;oe!==null&&Jp(pe,ie,oe,Oe,!1),Me!==null&&rt!==null&&Jp(pe,rt,Me,Oe,!0)}}e:{if(ie=ne?cr(ne):window,oe=ie.nodeName&&ie.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ie.type==="file")var je=bh;else if(ph(ie))if(yh)je=cv;else{je=iv;var Ie=rv}else oe=ie.nodeName,!oe||oe.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&od(ne.elementType)&&(je=bh):je=ov;if(je&&(je=je(s,ne))){gh(pe,je,i,he);break e}Ie&&Ie(s,ie,ne),s==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&id(ie,"number",ie.value)}switch(Ie=ne?cr(ne):window,s){case"focusin":(ph(Ie)||Ie.contentEditable==="true")&&(ol=Ie,jd=ne,br=null);break;case"focusout":br=jd=ol=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Eh(pe,i,he);break;case"selectionchange":if(uv)break;case"keydown":case"keyup":Eh(pe,i,he)}var ke;if(bd)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else il?hh(s,i)&&(Pe="onCompositionEnd"):s==="keydown"&&i.keyCode===229&&(Pe="onCompositionStart");Pe&&(uh&&i.locale!=="ko"&&(il||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&il&&(ke=rh()):(Pa=he,fd="value"in Pa?Pa.value:Pa.textContent,il=!0)),Ie=Ro(ne,Pe),0<Ie.length&&(Pe=new ch(Pe,s,null,i,he),pe.push({event:Pe,listeners:Ie}),ke?Pe.data=ke:(ke=xh(i),ke!==null&&(Pe.data=ke)))),(ke=tv?sv(s,i):av(s,i))&&(Pe=Ro(ne,"onBeforeInput"),0<Pe.length&&(Ie=new ch("onBeforeInput","beforeinput",null,i,he),pe.push({event:Ie,listeners:Pe}),Ie.data=ke)),Kv(pe,s,ne,i,he)}Xp(pe,n)})}function Gr(s,n,i){return{instance:s,listener:n,currentTarget:i}}function Ro(s,n){for(var i=n+"Capture",c=[];s!==null;){var u=s,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=dr(s,i),u!=null&&c.unshift(Gr(s,u,f)),u=dr(s,n),u!=null&&c.push(Gr(s,u,f))),s.tag===3)return c;s=s.return}return[]}function Pl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Jp(s,n,i,c,u){for(var f=n._reactName,E=[];i!==null&&i!==c;){var R=i,B=R.alternate,ne=R.stateNode;if(R=R.tag,B!==null&&B===c)break;R!==5&&R!==26&&R!==27||ne===null||(B=ne,u?(ne=dr(i,f),ne!=null&&E.unshift(Gr(i,ne,B))):u||(ne=dr(i,f),ne!=null&&E.push(Gr(i,ne,B)))),i=i.return}E.length!==0&&s.push({event:n,listeners:E})}var Xv=/\r\n?/g,Zv=/\u0000|\uFFFD/g;function eg(s){return(typeof s=="string"?s:""+s).replace(Xv,`
`).replace(Zv,"")}function tg(s,n){return n=eg(n),eg(s)===n}function To(){}function lt(s,n,i,c,u,f){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||nl(s,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&nl(s,""+c);break;case"className":Li(s,"class",c);break;case"tabIndex":Li(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Li(s,i,c);break;case"style":ah(s,c,f);break;case"data":if(n!=="object"){Li(s,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){s.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&lt(s,n,"name",u.name,u,null),lt(s,n,"formEncType",u.formEncType,u,null),lt(s,n,"formMethod",u.formMethod,u,null),lt(s,n,"formTarget",u.formTarget,u,null)):(lt(s,n,"encType",u.encType,u,null),lt(s,n,"method",u.method,u,null),lt(s,n,"target",u.target,u,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(i);break}c=qi(""+c),s.setAttribute(i,c);break;case"onClick":c!=null&&(s.onclick=To);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(r(60));s.innerHTML=i}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}i=qi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""+c):s.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,""):s.removeAttribute(i);break;case"capture":case"download":c===!0?s.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(i,c):s.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(i,c):s.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(i):s.setAttribute(i,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),Fi(s,"popover",c);break;case"xlinkActuate":na(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":na(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":na(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":na(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":na(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":na(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":na(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":na(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":na(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Fi(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Aw.get(i)||i,Fi(s,i,c))}}function Gu(s,n,i,c,u,f){switch(i){case"style":ah(s,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(u.children!=null)throw Error(r(60));s.innerHTML=i}}break;case"children":typeof c=="string"?nl(s,c):(typeof c=="number"||typeof c=="bigint")&&nl(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=To);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gf.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=s[Yt]||null,f=f!=null?f[i]:null,typeof f=="function"&&s.removeEventListener(n,f,u),typeof c=="function")){typeof f!="function"&&f!==null&&(i in s?s[i]=null:s.hasAttribute(i)&&s.removeAttribute(i)),s.addEventListener(n,c,u);break e}i in s?s[i]=c:c===!0?s.setAttribute(i,""):Fi(s,i,c)}}}function Mt(s,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var E=i[f];if(E!=null)switch(f){case"src":c=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(s,n,f,E,i,null)}}u&&lt(s,n,"srcSet",i.srcSet,i,null),c&&lt(s,n,"src",i.src,i,null);return;case"input":Be("invalid",s);var R=f=E=u=null,B=null,ne=null;for(c in i)if(i.hasOwnProperty(c)){var he=i[c];if(he!=null)switch(c){case"name":u=he;break;case"type":E=he;break;case"checked":B=he;break;case"defaultChecked":ne=he;break;case"value":f=he;break;case"defaultValue":R=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,n));break;default:lt(s,n,c,he,i,null)}}Jf(s,f,R,B,ne,E,u,!1),Di(s);return;case"select":Be("invalid",s),c=E=f=null;for(u in i)if(i.hasOwnProperty(u)&&(R=i[u],R!=null))switch(u){case"value":f=R;break;case"defaultValue":E=R;break;case"multiple":c=R;default:lt(s,n,u,R,i,null)}n=f,i=E,s.multiple=!!c,n!=null?al(s,!!c,n,!1):i!=null&&al(s,!!c,i,!0);return;case"textarea":Be("invalid",s),f=u=c=null;for(E in i)if(i.hasOwnProperty(E)&&(R=i[E],R!=null))switch(E){case"value":c=R;break;case"defaultValue":u=R;break;case"children":f=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:lt(s,n,E,R,i,null)}th(s,c,u,f),Di(s);return;case"option":for(B in i)if(i.hasOwnProperty(B)&&(c=i[B],c!=null))switch(B){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(s,n,B,c,i,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<Qr.length;c++)Be(Qr[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in i)if(i.hasOwnProperty(ne)&&(c=i[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(s,n,ne,c,i,null)}return;default:if(od(n)){for(he in i)i.hasOwnProperty(he)&&(c=i[he],c!==void 0&&Gu(s,n,he,c,i,void 0));return}}for(R in i)i.hasOwnProperty(R)&&(c=i[R],c!=null&&lt(s,n,R,c,i,null))}function Jv(s,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,E=null,R=null,B=null,ne=null,he=null;for(oe in i){var pe=i[oe];if(i.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":B=pe;default:c.hasOwnProperty(oe)||lt(s,n,oe,null,c,pe)}}for(var ie in c){var oe=c[ie];if(pe=i[ie],c.hasOwnProperty(ie)&&(oe!=null||pe!=null))switch(ie){case"type":f=oe;break;case"name":u=oe;break;case"checked":ne=oe;break;case"defaultChecked":he=oe;break;case"value":E=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,n));break;default:oe!==pe&&lt(s,n,ie,oe,c,pe)}}rd(s,E,R,B,ne,he,f,u);return;case"select":oe=E=R=ie=null;for(f in i)if(B=i[f],i.hasOwnProperty(f)&&B!=null)switch(f){case"value":break;case"multiple":oe=B;default:c.hasOwnProperty(f)||lt(s,n,f,null,c,B)}for(u in c)if(f=c[u],B=i[u],c.hasOwnProperty(u)&&(f!=null||B!=null))switch(u){case"value":ie=f;break;case"defaultValue":R=f;break;case"multiple":E=f;default:f!==B&&lt(s,n,u,f,c,B)}n=R,i=E,c=oe,ie!=null?al(s,!!i,ie,!1):!!c!=!!i&&(n!=null?al(s,!!i,n,!0):al(s,!!i,i?[]:"",!1));return;case"textarea":oe=ie=null;for(R in i)if(u=i[R],i.hasOwnProperty(R)&&u!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:lt(s,n,R,null,c,u)}for(E in c)if(u=c[E],f=i[E],c.hasOwnProperty(E)&&(u!=null||f!=null))switch(E){case"value":ie=u;break;case"defaultValue":oe=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==f&&lt(s,n,E,u,c,f)}eh(s,ie,oe);return;case"option":for(var Me in i)if(ie=i[Me],i.hasOwnProperty(Me)&&ie!=null&&!c.hasOwnProperty(Me))switch(Me){case"selected":s.selected=!1;break;default:lt(s,n,Me,null,c,ie)}for(B in c)if(ie=c[B],oe=i[B],c.hasOwnProperty(B)&&ie!==oe&&(ie!=null||oe!=null))switch(B){case"selected":s.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:lt(s,n,B,ie,c,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in i)ie=i[Oe],i.hasOwnProperty(Oe)&&ie!=null&&!c.hasOwnProperty(Oe)&&lt(s,n,Oe,null,c,ie);for(ne in c)if(ie=c[ne],oe=i[ne],c.hasOwnProperty(ne)&&ie!==oe&&(ie!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,n));break;default:lt(s,n,ne,ie,c,oe)}return;default:if(od(n)){for(var rt in i)ie=i[rt],i.hasOwnProperty(rt)&&ie!==void 0&&!c.hasOwnProperty(rt)&&Gu(s,n,rt,void 0,c,ie);for(he in c)ie=c[he],oe=i[he],!c.hasOwnProperty(he)||ie===oe||ie===void 0&&oe===void 0||Gu(s,n,he,ie,c,oe);return}}for(var ee in i)ie=i[ee],i.hasOwnProperty(ee)&&ie!=null&&!c.hasOwnProperty(ee)&&lt(s,n,ee,null,c,ie);for(pe in c)ie=c[pe],oe=i[pe],!c.hasOwnProperty(pe)||ie===oe||ie==null&&oe==null||lt(s,n,pe,ie,c,oe)}var Ku=null,Vu=null;function Po(s){return s.nodeType===9?s:s.ownerDocument}function sg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ag(s,n){if(s===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&n==="foreignObject"?0:s}function Yu(s,n){return s==="textarea"||s==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wu=null;function ej(){var s=window.event;return s&&s.type==="popstate"?s===Wu?!1:(Wu=s,!0):(Wu=null,!1)}var ng=typeof setTimeout=="function"?setTimeout:void 0,tj=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,sj=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(s){return lg.resolve(null).then(s).catch(aj)}:ng;function aj(s){setTimeout(function(){throw s})}function Va(s){return s==="head"}function rg(s,n){var i=n,c=0,u=0;do{var f=i.nextSibling;if(s.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<c&&8>c){i=c;var E=s.ownerDocument;if(i&1&&Kr(E.documentElement),i&2&&Kr(E.body),i&4)for(i=E.head,Kr(i),E=i.firstChild;E;){var R=E.nextSibling,B=E.nodeName;E[or]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&E.rel.toLowerCase()==="stylesheet"||i.removeChild(E),E=R}}if(u===0){s.removeChild(f),ti(n);return}u--}else i==="$"||i==="$?"||i==="$!"?u++:c=i.charCodeAt(0)-48;else c=0;i=f}while(i);ti(n)}function Xu(s){var n=s.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Xu(i),sd(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}s.removeChild(i)}}function nj(s,n,i,c){for(;s.nodeType===1;){var u=i;if(s.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[or])switch(n){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(f=s.getAttribute("rel"),f==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(f!==u.rel||s.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||s.getAttribute("title")!==(u.title==null?null:u.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(f=s.getAttribute("src"),(f!==(u.src==null?null:u.src)||s.getAttribute("type")!==(u.type==null?null:u.type)||s.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(n==="input"&&s.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&s.getAttribute("name")===f)return s}else return s;if(s=_s(s.nextSibling),s===null)break}return null}function lj(s,n,i){if(n==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=_s(s.nextSibling),s===null))return null;return s}function Zu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function rj(s,n){var i=s.ownerDocument;if(s.data!=="$?"||i.readyState==="complete")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function _s(s){for(;s!=null;s=s.nextSibling){var n=s.nodeType;if(n===1||n===3)break;if(n===8){if(n=s.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return s}var Ju=null;function ig(s){s=s.previousSibling;for(var n=0;s;){if(s.nodeType===8){var i=s.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return s;n--}else i==="/$"&&n++}s=s.previousSibling}return null}function og(s,n,i){switch(n=Po(i),s){case"html":if(s=n.documentElement,!s)throw Error(r(452));return s;case"head":if(s=n.head,!s)throw Error(r(453));return s;case"body":if(s=n.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Kr(s){for(var n=s.attributes;n.length;)s.removeAttributeNode(n[0]);sd(s)}var Ts=new Map,cg=new Set;function Mo(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ba=X.d;X.d={f:ij,r:oj,D:cj,C:dj,L:uj,m:mj,X:hj,S:fj,M:xj};function ij(){var s=ba.f(),n=So();return s||n}function oj(s){var n=Jn(s);n!==null&&n.tag===5&&n.type==="form"?Ox(n):ba.r(s)}var Ml=typeof document>"u"?null:document;function dg(s,n,i){var c=Ml;if(c&&typeof n=="string"&&n){var u=Ss(n);u='link[rel="'+s+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),cg.has(u)||(cg.add(u),s={rel:s,crossOrigin:i,href:n},c.querySelector(u)===null&&(n=c.createElement("link"),Mt(n,"link",s),kt(n),c.head.appendChild(n)))}}function cj(s){ba.D(s),dg("dns-prefetch",s,null)}function dj(s,n){ba.C(s,n),dg("preconnect",s,n)}function uj(s,n,i){ba.L(s,n,i);var c=Ml;if(c&&s&&n){var u='link[rel="preload"][as="'+Ss(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+Ss(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+Ss(i.imageSizes)+'"]')):u+='[href="'+Ss(s)+'"]';var f=u;switch(n){case"style":f=Fl(s);break;case"script":f=Ll(s)}Ts.has(f)||(s=g({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:s,as:n},i),Ts.set(f,s),c.querySelector(u)!==null||n==="style"&&c.querySelector(Vr(f))||n==="script"&&c.querySelector(Yr(f))||(n=c.createElement("link"),Mt(n,"link",s),kt(n),c.head.appendChild(n)))}}function mj(s,n){ba.m(s,n);var i=Ml;if(i&&s){var c=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Ss(c)+'"][href="'+Ss(s)+'"]',f=u;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ll(s)}if(!Ts.has(f)&&(s=g({rel:"modulepreload",href:s},n),Ts.set(f,s),i.querySelector(u)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Yr(f)))return}c=i.createElement("link"),Mt(c,"link",s),kt(c),i.head.appendChild(c)}}}function fj(s,n,i){ba.S(s,n,i);var c=Ml;if(c&&s){var u=el(c).hoistableStyles,f=Fl(s);n=n||"default";var E=u.get(f);if(!E){var R={loading:0,preload:null};if(E=c.querySelector(Vr(f)))R.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":n},i),(i=Ts.get(f))&&em(s,i);var B=E=c.createElement("link");kt(B),Mt(B,"link",s),B._p=new Promise(function(ne,he){B.onload=ne,B.onerror=he}),B.addEventListener("load",function(){R.loading|=1}),B.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Fo(E,n,c)}E={type:"stylesheet",instance:E,count:1,state:R},u.set(f,E)}}}function hj(s,n){ba.X(s,n);var i=Ml;if(i&&s){var c=el(i).hoistableScripts,u=Ll(s),f=c.get(u);f||(f=i.querySelector(Yr(u)),f||(s=g({src:s,async:!0},n),(n=Ts.get(u))&&tm(s,n),f=i.createElement("script"),kt(f),Mt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function xj(s,n){ba.M(s,n);var i=Ml;if(i&&s){var c=el(i).hoistableScripts,u=Ll(s),f=c.get(u);f||(f=i.querySelector(Yr(u)),f||(s=g({src:s,async:!0,type:"module"},n),(n=Ts.get(u))&&tm(s,n),f=i.createElement("script"),kt(f),Mt(f,"link",s),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(u,f))}}function ug(s,n,i,c){var u=(u=ae.current)?Mo(u):null;if(!u)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Fl(i.href),i=el(u).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){s=Fl(i.href);var f=el(u).hoistableStyles,E=f.get(s);if(E||(u=u.ownerDocument||u,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(s,E),(f=u.querySelector(Vr(s)))&&!f._p&&(E.instance=f,E.state.loading=5),Ts.has(s)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ts.set(s,i),f||pj(u,s,i,E.state))),n&&c===null)throw Error(r(528,""));return E}if(n&&c!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ll(i),i=el(u).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Fl(s){return'href="'+Ss(s)+'"'}function Vr(s){return'link[rel="stylesheet"]['+s+"]"}function mg(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function pj(s,n,i,c){s.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=s.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Mt(n,"link",i),kt(n),s.head.appendChild(n))}function Ll(s){return'[src="'+Ss(s)+'"]'}function Yr(s){return"script[async]"+s}function fg(s,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=s.querySelector('style[data-href~="'+Ss(i.href)+'"]');if(c)return n.instance=c,kt(c),c;var u=g({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),kt(c),Mt(c,"style",u),Fo(c,i.precedence,s),n.instance=c;case"stylesheet":u=Fl(i.href);var f=s.querySelector(Vr(u));if(f)return n.state.loading|=4,n.instance=f,kt(f),f;c=mg(i),(u=Ts.get(u))&&em(c,u),f=(s.ownerDocument||s).createElement("link"),kt(f);var E=f;return E._p=new Promise(function(R,B){E.onload=R,E.onerror=B}),Mt(f,"link",c),n.state.loading|=4,Fo(f,i.precedence,s),n.instance=f;case"script":return f=Ll(i.src),(u=s.querySelector(Yr(f)))?(n.instance=u,kt(u),u):(c=i,(u=Ts.get(f))&&(c=g({},i),tm(c,u)),s=s.ownerDocument||s,u=s.createElement("script"),kt(u),Mt(u,"link",c),s.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Fo(c,i.precedence,s));return n.instance}function Fo(s,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=c.length?c[c.length-1]:null,f=u,E=0;E<c.length;E++){var R=c[E];if(R.dataset.precedence===n)f=R;else if(f!==u)break}f?f.parentNode.insertBefore(s,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(s,n.firstChild))}function em(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.title==null&&(s.title=n.title)}function tm(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.integrity==null&&(s.integrity=n.integrity)}var Lo=null;function hg(s,n,i){if(Lo===null){var c=new Map,u=Lo=new Map;u.set(i,c)}else u=Lo,c=u.get(i),c||(c=new Map,u.set(i,c));if(c.has(s))return c;for(c.set(s,null),i=i.getElementsByTagName(s),u=0;u<i.length;u++){var f=i[u];if(!(f[or]||f[qt]||s==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(n)||"";E=s+E;var R=c.get(E);R?R.push(f):c.set(E,[f])}}return c}function xg(s,n,i){s=s.ownerDocument||s,s.head.insertBefore(i,n==="title"?s.querySelector("head > title"):null)}function gj(s,n,i){if(i===1||n.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return s=n.disabled,typeof n.precedence=="string"&&s==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function pg(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Wr=null;function bj(){}function yj(s,n,i){if(Wr===null)throw Error(r(475));var c=Wr;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=Fl(i.href),f=s.querySelector(Vr(u));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=Do.bind(c),s.then(c,c)),n.state.loading|=4,n.instance=f,kt(f);return}f=s.ownerDocument||s,i=mg(i),(u=Ts.get(u))&&em(i,u),f=f.createElement("link"),kt(f);var E=f;E._p=new Promise(function(R,B){E.onload=R,E.onerror=B}),Mt(f,"link",i),n.instance=f}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(n,s),(s=n.state.preload)&&(n.state.loading&3)===0&&(c.count++,n=Do.bind(c),s.addEventListener("load",n),s.addEventListener("error",n))}}function wj(){if(Wr===null)throw Error(r(475));var s=Wr;return s.stylesheets&&s.count===0&&sm(s,s.stylesheets),0<s.count?function(n){var i=setTimeout(function(){if(s.stylesheets&&sm(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=n,function(){s.unsuspend=null,clearTimeout(i)}}:null}function Do(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var _o=null;function sm(s,n){s.stylesheets=null,s.unsuspend!==null&&(s.count++,_o=new Map,n.forEach(vj,s),_o=null,Do.call(s))}function vj(s,n){if(!(n.state.loading&4)){var i=_o.get(s);if(i)var c=i.get(null);else{i=new Map,_o.set(s,i);for(var u=s.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var E=u[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(i.set(E.dataset.precedence,E),c=E)}c&&i.set(null,c)}u=n.instance,E=u.getAttribute("data-precedence"),f=i.get(E)||c,f===c&&i.set(null,u),i.set(E,u),this.count++,c=Do.bind(this),u.addEventListener("load",c),u.addEventListener("error",c),f?f.parentNode.insertBefore(u,f.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(u,s.firstChild)),n.state.loading|=4}}var Xr={$$typeof:N,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function jj(s,n,i,c,u,f,E,R){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.hiddenUpdates=Zc(null),this.identifierPrefix=c,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function gg(s,n,i,c,u,f,E,R,B,ne,he,pe){return s=new jj(s,n,i,E,R,B,ne,pe),n=1,f===!0&&(n|=24),f=ds(3,null,null,n),s.current=f,f.stateNode=s,n=_d(),n.refCount++,s.pooledCache=n,n.refCount++,f.memoizedState={element:c,isDehydrated:i,cache:n},Id(f),s}function bg(s){return s?(s=ml,s):ml}function yg(s,n,i,c,u,f){u=bg(u),c.context===null?c.context=u:c.pendingContext=u,c=La(n),c.payload={element:i},f=f===void 0?null:f,f!==null&&(c.callback=f),i=Da(s,c,n),i!==null&&(xs(i,s,n),Er(i,s,n))}function wg(s,n){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var i=s.retryLane;s.retryLane=i!==0&&i<n?i:n}}function am(s,n){wg(s,n),(s=s.alternate)&&wg(s,n)}function vg(s){if(s.tag===13){var n=ul(s,67108864);n!==null&&xs(n,s,67108864),am(s,67108864)}}var qo=!0;function Nj(s,n,i,c){var u=_.T;_.T=null;var f=X.p;try{X.p=2,nm(s,n,i,c)}finally{X.p=f,_.T=u}}function Sj(s,n,i,c){var u=_.T;_.T=null;var f=X.p;try{X.p=8,nm(s,n,i,c)}finally{X.p=f,_.T=u}}function nm(s,n,i,c){if(qo){var u=lm(c);if(u===null)Qu(s,n,c,zo,i),Ng(s,c);else if(kj(u,s,n,i,c))c.stopPropagation();else if(Ng(s,c),n&4&&-1<Cj.indexOf(s)){for(;u!==null;){var f=Jn(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=gn(f.pendingLanes);if(E!==0){var R=f;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var B=1<<31-os(E);R.entanglements[1]|=B,E&=~B}Ws(f),(st&6)===0&&(jo=Qs()+500,Hr(0))}}break;case 13:R=ul(f,2),R!==null&&xs(R,f,2),So(),am(f,2)}if(f=lm(c),f===null&&Qu(s,n,c,zo,i),f===u)break;u=f}u!==null&&c.stopPropagation()}else Qu(s,n,c,null,i)}}function lm(s){return s=dd(s),rm(s)}var zo=null;function rm(s){if(zo=null,s=Zn(s),s!==null){var n=d(s);if(n===null)s=null;else{var i=n.tag;if(i===13){if(s=m(n),s!==null)return s;s=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;s=null}else n!==s&&(s=null)}}return zo=s,null}function jg(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dw()){case Df:return 2;case _f:return 8;case Ri:case uw:return 32;case qf:return 268435456;default:return 32}default:return 32}}var im=!1,Ya=null,Wa=null,Xa=null,Zr=new Map,Jr=new Map,Za=[],Cj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ng(s,n){switch(s){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":Zr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(n.pointerId)}}function ei(s,n,i,c,u,f){return s===null||s.nativeEvent!==f?(s={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Jn(n),n!==null&&vg(n)),s):(s.eventSystemFlags|=c,n=s.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),s)}function kj(s,n,i,c,u){switch(n){case"focusin":return Ya=ei(Ya,s,n,i,c,u),!0;case"dragenter":return Wa=ei(Wa,s,n,i,c,u),!0;case"mouseover":return Xa=ei(Xa,s,n,i,c,u),!0;case"pointerover":var f=u.pointerId;return Zr.set(f,ei(Zr.get(f)||null,s,n,i,c,u)),!0;case"gotpointercapture":return f=u.pointerId,Jr.set(f,ei(Jr.get(f)||null,s,n,i,c,u)),!0}return!1}function Sg(s){var n=Zn(s.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){s.blockedOn=n,yw(s.priority,function(){if(i.tag===13){var c=hs();c=Jc(c);var u=ul(i,c);u!==null&&xs(u,i,c),am(i,c)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){s.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Uo(s){if(s.blockedOn!==null)return!1;for(var n=s.targetContainers;0<n.length;){var i=lm(s.nativeEvent);if(i===null){i=s.nativeEvent;var c=new i.constructor(i.type,i);cd=c,i.target.dispatchEvent(c),cd=null}else return n=Jn(i),n!==null&&vg(n),s.blockedOn=i,!1;n.shift()}return!0}function Cg(s,n,i){Uo(s)&&i.delete(n)}function Ej(){im=!1,Ya!==null&&Uo(Ya)&&(Ya=null),Wa!==null&&Uo(Wa)&&(Wa=null),Xa!==null&&Uo(Xa)&&(Xa=null),Zr.forEach(Cg),Jr.forEach(Cg)}function Io(s,n){s.blockedOn===n&&(s.blockedOn=null,im||(im=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ej)))}var $o=null;function kg(s){$o!==s&&($o=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$o===s&&($o=null);for(var n=0;n<s.length;n+=3){var i=s[n],c=s[n+1],u=s[n+2];if(typeof c!="function"){if(rm(c||i)===null)continue;break}var f=Jn(i);f!==null&&(s.splice(n,3),n-=3,ru(f,{pending:!0,data:u,method:i.method,action:c},c,u))}}))}function ti(s){function n(B){return Io(B,s)}Ya!==null&&Io(Ya,s),Wa!==null&&Io(Wa,s),Xa!==null&&Io(Xa,s),Zr.forEach(n),Jr.forEach(n);for(var i=0;i<Za.length;i++){var c=Za[i];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Za.length&&(i=Za[0],i.blockedOn===null);)Sg(i),i.blockedOn===null&&Za.shift();if(i=(s.ownerDocument||s).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var u=i[c],f=i[c+1],E=u[Yt]||null;if(typeof f=="function")E||kg(i);else if(E){var R=null;if(f&&f.hasAttribute("formAction")){if(u=f,E=f[Yt]||null)R=E.formAction;else if(rm(u)!==null)continue}else R=E.action;typeof R=="function"?i[c+1]=R:(i.splice(c,3),c-=3),kg(i)}}}function om(s){this._internalRoot=s}Bo.prototype.render=om.prototype.render=function(s){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,c=hs();yg(i,c,s,n,null,null)},Bo.prototype.unmount=om.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var n=s.containerInfo;yg(s.current,2,null,s,null,null),So(),n[Xn]=null}};function Bo(s){this._internalRoot=s}Bo.prototype.unstable_scheduleHydration=function(s){if(s){var n=Bf();s={blockedOn:null,target:s,priority:n};for(var i=0;i<Za.length&&n!==0&&n<Za[i].priority;i++);Za.splice(i,0,s),i===0&&Sg(s)}};var Eg=a.version;if(Eg!=="19.1.0")throw Error(r(527,Eg,"19.1.0"));X.findDOMNode=function(s){var n=s._reactInternals;if(n===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=x(n),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var Aj={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{lr=Ho.inject(Aj),is=Ho}catch{}}return ai.createRoot=function(s,n){if(!o(s))throw Error(r(299));var i=!1,c="",u=Bx,f=Hx,E=Qx,R=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(E=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(R=n.unstable_transitionCallbacks)),n=gg(s,1,!1,null,null,i,c,u,f,E,R,null),s[Xn]=n.current,Hu(s),new om(n)},ai.hydrateRoot=function(s,n,i){if(!o(s))throw Error(r(299));var c=!1,u="",f=Bx,E=Hx,R=Qx,B=null,ne=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(E=i.onCaughtError),i.onRecoverableError!==void 0&&(R=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(B=i.unstable_transitionCallbacks),i.formState!==void 0&&(ne=i.formState)),n=gg(s,1,!0,n,i??null,c,u,f,E,R,B,ne),n.context=bg(null),i=n.current,c=hs(),c=Jc(c),u=La(c),u.callback=null,Da(i,u,c),i=c,n.current.lanes=i,ir(n,i),Ws(n),s[Xn]=n.current,Hu(s),new Bo(n)},ai.version="19.1.0",ai}var qg;function zj(){if(qg)return mm.exports;qg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),mm.exports=qj(),mm.exports}var Uj=zj(),ni={},zg;function Ij(){if(zg)return ni;zg=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.parse=m,ni.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,l=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,d=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function m(w,k){const y=new d,C=w.length;if(C<2)return y;const j=(k==null?void 0:k.decode)||g;let S=0;do{const v=w.indexOf("=",S);if(v===-1)break;const N=w.indexOf(";",S),M=N===-1?C:N;if(v>M){S=w.lastIndexOf(";",v-1)+1;continue}const P=p(w,S,v),L=x(w,v,P),z=w.slice(P,L);if(y[z]===void 0){let q=p(w,v+1,M),H=x(w,M,q);const ue=j(w.slice(q,H));y[z]=ue}S=M+1}while(S<C);return y}function p(w,k,y){do{const C=w.charCodeAt(k);if(C!==32&&C!==9)return k}while(++k<y);return y}function x(w,k,y){for(;k>y;){const C=w.charCodeAt(--k);if(C!==32&&C!==9)return k+1}return y}function h(w,k,y){const C=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(w))throw new TypeError(`argument name is invalid: ${w}`);const j=C(k);if(!a.test(j))throw new TypeError(`argument val is invalid: ${k}`);let S=w+"="+j;if(!y)return S;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);S+="; Max-Age="+y.maxAge}if(y.domain){if(!l.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);S+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);S+="; Path="+y.path}if(y.expires){if(!b(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);S+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(S+="; HttpOnly"),y.secure&&(S+="; Secure"),y.partitioned&&(S+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return S}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function b(w){return o.call(w)==="[object Date]"}return ni}Ij();var Ug="popstate";function $j(t={}){function a(r,o){let{pathname:d,search:m,hash:p}=r.location;return zm("",{pathname:d,search:m,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function l(r,o){return typeof o=="string"?o:mi(o)}return Hj(a,l,null,t)}function mt(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Ms(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Bj(){return Math.random().toString(36).substring(2,10)}function Ig(t,a){return{usr:t.state,key:t.key,idx:a}}function zm(t,a,l=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Wl(a):a,state:l,key:a&&a.key||r||Bj()}}function mi({pathname:t="/",search:a="",hash:l=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function Wl(t){let a={};if(t){let l=t.indexOf("#");l>=0&&(a.hash=t.substring(l),t=t.substring(0,l));let r=t.indexOf("?");r>=0&&(a.search=t.substring(r),t=t.substring(0,r)),t&&(a.pathname=t)}return a}function Hj(t,a,l,r={}){let{window:o=document.defaultView,v5Compat:d=!1}=r,m=o.history,p="POP",x=null,h=g();h==null&&(h=0,m.replaceState({...m.state,idx:h},""));function g(){return(m.state||{idx:null}).idx}function b(){p="POP";let j=g(),S=j==null?null:j-h;h=j,x&&x({action:p,location:C.location,delta:S})}function w(j,S){p="PUSH";let v=zm(C.location,j,S);h=g()+1;let N=Ig(v,h),M=C.createHref(v);try{m.pushState(N,"",M)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;o.location.assign(M)}d&&x&&x({action:p,location:C.location,delta:1})}function k(j,S){p="REPLACE";let v=zm(C.location,j,S);h=g();let N=Ig(v,h),M=C.createHref(v);m.replaceState(N,"",M),d&&x&&x({action:p,location:C.location,delta:0})}function y(j){return Qj(j)}let C={get action(){return p},get location(){return t(o,m)},listen(j){if(x)throw new Error("A history only accepts one active listener");return o.addEventListener(Ug,b),x=j,()=>{o.removeEventListener(Ug,b),x=null}},createHref(j){return a(o,j)},createURL:y,encodeLocation(j){let S=y(j);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:w,replace:k,go(j){return m.go(j)}};return C}function Qj(t,a=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),mt(l,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:mi(t);return r=r.replace(/ $/,"%20"),!a&&r.startsWith("//")&&(r=l+r),new URL(r,l)}function ub(t,a,l="/"){return Gj(t,a,l,!1)}function Gj(t,a,l,r){let o=typeof a=="string"?Wl(a):a,d=ka(o.pathname||"/",l);if(d==null)return null;let m=mb(t);Kj(m);let p=null;for(let x=0;p==null&&x<m.length;++x){let h=nN(d);p=sN(m[x],h,r)}return p}function mb(t,a=[],l=[],r=""){let o=(d,m,p)=>{let x={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};x.relativePath.startsWith("/")&&(mt(x.relativePath.startsWith(r),`Absolute route path "${x.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(r.length));let h=Na([r,x.relativePath]),g=l.concat(x);d.children&&d.children.length>0&&(mt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),mb(d.children,a,g,h)),!(d.path==null&&!d.index)&&a.push({path:h,score:eN(h,d.index),routesMeta:g})};return t.forEach((d,m)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))o(d,m);else for(let x of fb(d.path))o(d,m,x)}),a}function fb(t){let a=t.split("/");if(a.length===0)return[];let[l,...r]=a,o=l.endsWith("?"),d=l.replace(/\?$/,"");if(r.length===0)return o?[d,""]:[d];let m=fb(r.join("/")),p=[];return p.push(...m.map(x=>x===""?d:[d,x].join("/"))),o&&p.push(...m),p.map(x=>t.startsWith("/")&&x===""?"/":x)}function Kj(t){t.sort((a,l)=>a.score!==l.score?l.score-a.score:tN(a.routesMeta.map(r=>r.childrenIndex),l.routesMeta.map(r=>r.childrenIndex)))}var Vj=/^:[\w-]+$/,Yj=3,Wj=2,Xj=1,Zj=10,Jj=-2,$g=t=>t==="*";function eN(t,a){let l=t.split("/"),r=l.length;return l.some($g)&&(r+=Jj),a&&(r+=Wj),l.filter(o=>!$g(o)).reduce((o,d)=>o+(Vj.test(d)?Yj:d===""?Xj:Zj),r)}function tN(t,a){return t.length===a.length&&t.slice(0,-1).every((r,o)=>r===a[o])?t[t.length-1]-a[a.length-1]:0}function sN(t,a,l=!1){let{routesMeta:r}=t,o={},d="/",m=[];for(let p=0;p<r.length;++p){let x=r[p],h=p===r.length-1,g=d==="/"?a:a.slice(d.length)||"/",b=rc({path:x.relativePath,caseSensitive:x.caseSensitive,end:h},g),w=x.route;if(!b&&h&&l&&!r[r.length-1].route.index&&(b=rc({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},g)),!b)return null;Object.assign(o,b.params),m.push({params:o,pathname:Na([d,b.pathname]),pathnameBase:oN(Na([d,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(d=Na([d,b.pathnameBase]))}return m}function rc(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[l,r]=aN(t.path,t.caseSensitive,t.end),o=a.match(l);if(!o)return null;let d=o[0],m=d.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:b},w)=>{if(g==="*"){let y=p[w]||"";m=d.slice(0,d.length-y.length).replace(/(.)\/+$/,"$1")}const k=p[w];return b&&!k?h[g]=void 0:h[g]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:d,pathnameBase:m,pattern:t}}function aN(t,a=!1,l=!0){Ms(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,p,x)=>(r.push({paramName:p,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),r]}function nN(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Ms(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ka(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,r=t.charAt(l);return r&&r!=="/"?null:t.slice(l)||"/"}function lN(t,a="/"){let{pathname:l,search:r="",hash:o=""}=typeof t=="string"?Wl(t):t;return{pathname:l?l.startsWith("/")?l:rN(l,a):a,search:cN(r),hash:dN(o)}}function rN(t,a){let l=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?l.length>1&&l.pop():o!=="."&&l.push(o)}),l.length>1?l.join("/"):"/"}function pm(t,a,l,r){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iN(t){return t.filter((a,l)=>l===0||a.route.path&&a.route.path.length>0)}function pf(t){let a=iN(t);return a.map((l,r)=>r===a.length-1?l.pathname:l.pathnameBase)}function gf(t,a,l,r=!1){let o;typeof t=="string"?o=Wl(t):(o={...t},mt(!o.pathname||!o.pathname.includes("?"),pm("?","pathname","search",o)),mt(!o.pathname||!o.pathname.includes("#"),pm("#","pathname","hash",o)),mt(!o.search||!o.search.includes("#"),pm("#","search","hash",o)));let d=t===""||o.pathname==="",m=d?"/":o.pathname,p;if(m==null)p=l;else{let b=a.length-1;if(!r&&m.startsWith("..")){let w=m.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}p=b>=0?a[b]:"/"}let x=lN(o,p),h=m&&m!=="/"&&m.endsWith("/"),g=(d||m===".")&&l.endsWith("/");return!x.pathname.endsWith("/")&&(h||g)&&(x.pathname+="/"),x}var Na=t=>t.join("/").replace(/\/\/+/g,"/"),oN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var hb=["POST","PUT","PATCH","DELETE"];new Set(hb);var mN=["GET",...hb];new Set(mN);var Xl=A.createContext(null);Xl.displayName="DataRouter";var Ac=A.createContext(null);Ac.displayName="DataRouterState";var xb=A.createContext({isTransitioning:!1});xb.displayName="ViewTransition";var fN=A.createContext(new Map);fN.displayName="Fetchers";var hN=A.createContext(null);hN.displayName="Await";var Bs=A.createContext(null);Bs.displayName="Navigation";var vi=A.createContext(null);vi.displayName="Location";var Fs=A.createContext({outlet:null,matches:[],isDataRoute:!1});Fs.displayName="Route";var bf=A.createContext(null);bf.displayName="RouteError";function xN(t,{relative:a}={}){mt(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:r}=A.useContext(Bs),{hash:o,pathname:d,search:m}=ji(t,{relative:a}),p=d;return l!=="/"&&(p=d==="/"?l:Na([l,d])),r.createHref({pathname:p,search:m,hash:o})}function Zl(){return A.useContext(vi)!=null}function dt(){return mt(Zl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(vi).location}var pb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gb(t){A.useContext(Bs).static||A.useLayoutEffect(t)}function Fe(){let{isDataRoute:t}=A.useContext(Fs);return t?ON():pN()}function pN(){mt(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Xl),{basename:a,navigator:l}=A.useContext(Bs),{matches:r}=A.useContext(Fs),{pathname:o}=dt(),d=JSON.stringify(pf(r)),m=A.useRef(!1);return gb(()=>{m.current=!0}),A.useCallback((x,h={})=>{if(Ms(m.current,pb),!m.current)return;if(typeof x=="number"){l.go(x);return}let g=gf(x,JSON.parse(d),o,h.relative==="path");t==null&&a!=="/"&&(g.pathname=g.pathname==="/"?a:Na([a,g.pathname])),(h.replace?l.replace:l.push)(g,h.state,h)},[a,l,d,o,t])}var bb=A.createContext(null);function He(){return A.useContext(bb)}function gN(t){let a=A.useContext(Fs).outlet;return a&&A.createElement(bb.Provider,{value:t},a)}function Ce(){let{matches:t}=A.useContext(Fs),a=t[t.length-1];return a?a.params:{}}function ji(t,{relative:a}={}){let{matches:l}=A.useContext(Fs),{pathname:r}=dt(),o=JSON.stringify(pf(l));return A.useMemo(()=>gf(t,JSON.parse(o),r,a==="path"),[t,o,r,a])}function bN(t,a){return yb(t,a)}function yb(t,a,l,r){var S;mt(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(Bs),{matches:d}=A.useContext(Fs),m=d[d.length-1],p=m?m.params:{},x=m?m.pathname:"/",h=m?m.pathnameBase:"/",g=m&&m.route;{let v=g&&g.path||"";wb(x,!g||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let b=dt(),w;if(a){let v=typeof a=="string"?Wl(a):a;mt(h==="/"||((S=v.pathname)==null?void 0:S.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${v.pathname}" was given in the \`location\` prop.`),w=v}else w=b;let k=w.pathname||"/",y=k;if(h!=="/"){let v=h.replace(/^\//,"").split("/");y="/"+k.replace(/^\//,"").split("/").slice(v.length).join("/")}let C=ub(t,{pathname:y});Ms(g||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ms(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=NN(C&&C.map(v=>Object.assign({},v,{params:Object.assign({},p,v.params),pathname:Na([h,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:Na([h,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),d,l,r);return a&&j?A.createElement(vi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},j):j}function yN(){let t=AN(),a=uN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),l=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},d={padding:"2px 4px",backgroundColor:r},m=null;return console.error("Error handled by React Router default ErrorBoundary:",t),m=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:d},"ErrorBoundary")," or"," ",A.createElement("code",{style:d},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},a),l?A.createElement("pre",{style:o},l):null,m)}var wN=A.createElement(yN,null),vN=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?A.createElement(Fs.Provider,{value:this.props.routeContext},A.createElement(bf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jN({routeContext:t,match:a,children:l}){let r=A.useContext(Xl);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),A.createElement(Fs.Provider,{value:t},l)}function NN(t,a=[],l=null,r=null){if(t==null){if(!l)return null;if(l.errors)t=l.matches;else if(a.length===0&&!l.initialized&&l.matches.length>0)t=l.matches;else return null}let o=t,d=l==null?void 0:l.errors;if(d!=null){let x=o.findIndex(h=>h.route.id&&(d==null?void 0:d[h.route.id])!==void 0);mt(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,x+1))}let m=!1,p=-1;if(l)for(let x=0;x<o.length;x++){let h=o[x];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(p=x),h.route.id){let{loaderData:g,errors:b}=l,w=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||w){m=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((x,h,g)=>{let b,w=!1,k=null,y=null;l&&(b=d&&h.route.id?d[h.route.id]:void 0,k=h.route.errorElement||wN,m&&(p<0&&g===0?(wb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,y=null):p===g&&(w=!0,y=h.route.hydrateFallbackElement||null)));let C=a.concat(o.slice(0,g+1)),j=()=>{let S;return b?S=k:w?S=y:h.route.Component?S=A.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=x,A.createElement(jN,{match:h,routeContext:{outlet:x,matches:C,isDataRoute:l!=null},children:S})};return l&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(vN,{location:l.location,revalidation:l.revalidation,component:k,error:b,children:j(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):j()},null)}function yf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SN(t){let a=A.useContext(Xl);return mt(a,yf(t)),a}function CN(t){let a=A.useContext(Ac);return mt(a,yf(t)),a}function kN(t){let a=A.useContext(Fs);return mt(a,yf(t)),a}function wf(t){let a=kN(t),l=a.matches[a.matches.length-1];return mt(l.route.id,`${t} can only be used on routes that contain a unique "id"`),l.route.id}function EN(){return wf("useRouteId")}function AN(){var r;let t=A.useContext(bf),a=CN("useRouteError"),l=wf("useRouteError");return t!==void 0?t:(r=a.errors)==null?void 0:r[l]}function ON(){let{router:t}=SN("useNavigate"),a=wf("useNavigate"),l=A.useRef(!1);return gb(()=>{l.current=!0}),A.useCallback(async(o,d={})=>{Ms(l.current,pb),l.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:a,...d}))},[t,a])}var Bg={};function wb(t,a,l){!a&&!Bg[t]&&(Bg[t]=!0,Ms(!1,l))}A.memo(RN);function RN({routes:t,future:a,state:l}){return yb(t,void 0,l,a)}function Um({to:t,replace:a,state:l,relative:r}){mt(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=A.useContext(Bs);Ms(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=A.useContext(Fs),{pathname:m}=dt(),p=Fe(),x=gf(t,pf(d),m,r==="path"),h=JSON.stringify(x);return A.useEffect(()=>{p(JSON.parse(h),{replace:a,state:l,relative:r})},[p,h,r,a,l]),null}function _t(t){return gN(t.context)}function we(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TN({basename:t="/",children:a=null,location:l,navigationType:r="POP",navigator:o,static:d=!1}){mt(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=A.useMemo(()=>({basename:m,navigator:o,static:d,future:{}}),[m,o,d]);typeof l=="string"&&(l=Wl(l));let{pathname:x="/",search:h="",hash:g="",state:b=null,key:w="default"}=l,k=A.useMemo(()=>{let y=ka(x,m);return y==null?null:{location:{pathname:y,search:h,hash:g,state:b,key:w},navigationType:r}},[m,x,h,g,b,w,r]);return Ms(k!=null,`<Router basename="${m}"> is not able to match the URL "${x}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:A.createElement(Bs.Provider,{value:p},A.createElement(vi.Provider,{children:a,value:k}))}function PN({children:t,location:a}){return bN(Im(t),a)}function Im(t,a=[]){let l=[];return A.Children.forEach(t,(r,o)=>{if(!A.isValidElement(r))return;let d=[...a,o];if(r.type===A.Fragment){l.push.apply(l,Im(r.props.children,d));return}mt(r.type===we,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let m={id:r.props.id||d.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(m.children=Im(r.props.children,d)),l.push(m)}),l}var ec="get",tc="application/x-www-form-urlencoded";function Oc(t){return t!=null&&typeof t.tagName=="string"}function MN(t){return Oc(t)&&t.tagName.toLowerCase()==="button"}function FN(t){return Oc(t)&&t.tagName.toLowerCase()==="form"}function LN(t){return Oc(t)&&t.tagName.toLowerCase()==="input"}function DN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _N(t,a){return t.button===0&&(!a||a==="_self")&&!DN(t)}function $m(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,l)=>{let r=t[l];return a.concat(Array.isArray(r)?r.map(o=>[l,o]):[[l,r]])},[]))}function qN(t,a){let l=$m(t);return a&&a.forEach((r,o)=>{l.has(o)||a.getAll(o).forEach(d=>{l.append(o,d)})}),l}var Go=null;function zN(){if(Go===null)try{new FormData(document.createElement("form"),0),Go=!1}catch{Go=!0}return Go}var UN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gm(t){return t!=null&&!UN.has(t)?(Ms(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tc}"`),null):t}function IN(t,a){let l,r,o,d,m;if(FN(t)){let p=t.getAttribute("action");r=p?ka(p,a):null,l=t.getAttribute("method")||ec,o=gm(t.getAttribute("enctype"))||tc,d=new FormData(t)}else if(MN(t)||LN(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=t.getAttribute("formaction")||p.getAttribute("action");if(r=x?ka(x,a):null,l=t.getAttribute("formmethod")||p.getAttribute("method")||ec,o=gm(t.getAttribute("formenctype"))||gm(p.getAttribute("enctype"))||tc,d=new FormData(p,t),!zN()){let{name:h,type:g,value:b}=t;if(g==="image"){let w=h?`${h}.`:"";d.append(`${w}x`,"0"),d.append(`${w}y`,"0")}else h&&d.append(h,b)}}else{if(Oc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=ec,r=null,o=tc,m=t}return d&&o==="text/plain"&&(m=d,d=void 0),{action:r,method:l.toLowerCase(),encType:o,formData:d,body:m}}function vf(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}async function $N(t,a){if(t.id in a)return a[t.id];try{let l=await import(t.module);return a[t.id]=l,l}catch(l){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function HN(t,a,l){let r=await Promise.all(t.map(async o=>{let d=a.routes[o.route.id];if(d){let m=await $N(d,l);return m.links?m.links():[]}return[]}));return VN(r.flat(1).filter(BN).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Hg(t,a,l,r,o,d){let m=(x,h)=>l[h]?x.route.id!==l[h].route.id:!0,p=(x,h)=>{var g;return l[h].pathname!==x.pathname||((g=l[h].route.path)==null?void 0:g.endsWith("*"))&&l[h].params["*"]!==x.params["*"]};return d==="assets"?a.filter((x,h)=>m(x,h)||p(x,h)):d==="data"?a.filter((x,h)=>{var b;let g=r.routes[x.route.id];if(!g||!g.hasLoader)return!1;if(m(x,h)||p(x,h))return!0;if(x.route.shouldRevalidate){let w=x.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=l[0])==null?void 0:b.params)||{},nextUrl:new URL(t,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function QN(t,a,{includeHydrateFallback:l}={}){return GN(t.map(r=>{let o=a.routes[r.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),l&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function GN(t){return[...new Set(t)]}function KN(t){let a={},l=Object.keys(t).sort();for(let r of l)a[r]=t[r];return a}function VN(t,a){let l=new Set;return new Set(a),t.reduce((r,o)=>{let d=JSON.stringify(KN(o));return l.has(d)||(l.add(d),r.push({key:d,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YN=new Set([100,101,204,205]);function WN(t,a){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return l.pathname==="/"?l.pathname="_root.data":a&&ka(l.pathname,a)==="/"?l.pathname=`${a.replace(/\/$/,"")}/_root.data`:l.pathname=`${l.pathname.replace(/\/$/,"")}.data`,l}function vb(){let t=A.useContext(Xl);return vf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function XN(){let t=A.useContext(Ac);return vf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var jf=A.createContext(void 0);jf.displayName="FrameworkContext";function jb(){let t=A.useContext(jf);return vf(t,"You must render this element inside a <HydratedRouter> element"),t}function ZN(t,a){let l=A.useContext(jf),[r,o]=A.useState(!1),[d,m]=A.useState(!1),{onFocus:p,onBlur:x,onMouseEnter:h,onMouseLeave:g,onTouchStart:b}=a,w=A.useRef(null);A.useEffect(()=>{if(t==="render"&&m(!0),t==="viewport"){let C=S=>{S.forEach(v=>{m(v.isIntersecting)})},j=new IntersectionObserver(C,{threshold:.5});return w.current&&j.observe(w.current),()=>{j.disconnect()}}},[t]),A.useEffect(()=>{if(r){let C=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(C)}}},[r]);let k=()=>{o(!0)},y=()=>{o(!1),m(!1)};return l?t!=="intent"?[d,w,{}]:[d,w,{onFocus:li(p,k),onBlur:li(x,y),onMouseEnter:li(h,k),onMouseLeave:li(g,y),onTouchStart:li(b,k)}]:[!1,w,{}]}function li(t,a){return l=>{t&&t(l),l.defaultPrevented||a(l)}}function JN({page:t,...a}){let{router:l}=vb(),r=A.useMemo(()=>ub(l.routes,t,l.basename),[l.routes,t,l.basename]);return r?A.createElement(t2,{page:t,matches:r,...a}):null}function e2(t){let{manifest:a,routeModules:l}=jb(),[r,o]=A.useState([]);return A.useEffect(()=>{let d=!1;return HN(t,a,l).then(m=>{d||o(m)}),()=>{d=!0}},[t,a,l]),r}function t2({page:t,matches:a,...l}){let r=dt(),{manifest:o,routeModules:d}=jb(),{basename:m}=vb(),{loaderData:p,matches:x}=XN(),h=A.useMemo(()=>Hg(t,a,x,o,r,"data"),[t,a,x,o,r]),g=A.useMemo(()=>Hg(t,a,x,o,r,"assets"),[t,a,x,o,r]),b=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,C=!1;if(a.forEach(S=>{var N;let v=o.routes[S.route.id];!v||!v.hasLoader||(!h.some(M=>M.route.id===S.route.id)&&S.route.id in p&&((N=d[S.route.id])!=null&&N.shouldRevalidate)||v.hasClientLoader?C=!0:y.add(S.route.id))}),y.size===0)return[];let j=WN(t,m);return C&&y.size>0&&j.searchParams.set("_routes",a.filter(S=>y.has(S.route.id)).map(S=>S.route.id).join(",")),[j.pathname+j.search]},[m,p,r,o,h,a,t,d]),w=A.useMemo(()=>QN(g,o),[g,o]),k=e2(g);return A.createElement(A.Fragment,null,b.map(y=>A.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...l})),w.map(y=>A.createElement("link",{key:y,rel:"modulepreload",href:y,...l})),k.map(({key:y,link:C})=>A.createElement("link",{key:y,...C})))}function s2(...t){return a=>{t.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var Nb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nb&&(window.__reactRouterVersion="7.6.1")}catch{}function a2({basename:t,children:a,window:l}){let r=A.useRef();r.current==null&&(r.current=$j({window:l,v5Compat:!0}));let o=r.current,[d,m]=A.useState({action:o.action,location:o.location}),p=A.useCallback(x=>{A.startTransition(()=>m(x))},[m]);return A.useLayoutEffect(()=>o.listen(p),[o,p]),A.createElement(TN,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:o})}var Sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rt=A.forwardRef(function({onClick:a,discover:l="render",prefetch:r="none",relative:o,reloadDocument:d,replace:m,state:p,target:x,to:h,preventScrollReset:g,viewTransition:b,...w},k){let{basename:y}=A.useContext(Bs),C=typeof h=="string"&&Sb.test(h),j,S=!1;if(typeof h=="string"&&C&&(j=h,Nb))try{let H=new URL(window.location.href),ue=h.startsWith("//")?new URL(H.protocol+h):new URL(h),U=ka(ue.pathname,y);ue.origin===H.origin&&U!=null?h=U+ue.search+ue.hash:S=!0}catch{Ms(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=xN(h,{relative:o}),[N,M,P]=ZN(r,w),L=i2(h,{replace:m,state:p,target:x,preventScrollReset:g,relative:o,viewTransition:b});function z(H){a&&a(H),H.defaultPrevented||L(H)}let q=A.createElement("a",{...w,...P,href:j||v,onClick:S||d?a:z,ref:s2(k,M),target:x,"data-discover":!C&&l==="render"?"true":void 0});return N&&!C?A.createElement(A.Fragment,null,q,A.createElement(JN,{page:v})):q});Rt.displayName="Link";var n2=A.forwardRef(function({"aria-current":a="page",caseSensitive:l=!1,className:r="",end:o=!1,style:d,to:m,viewTransition:p,children:x,...h},g){let b=ji(m,{relative:h.relative}),w=dt(),k=A.useContext(Ac),{navigator:y,basename:C}=A.useContext(Bs),j=k!=null&&m2(b)&&p===!0,S=y.encodeLocation?y.encodeLocation(b).pathname:b.pathname,v=w.pathname,N=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;l||(v=v.toLowerCase(),N=N?N.toLowerCase():null,S=S.toLowerCase()),N&&C&&(N=ka(N,C)||N);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let P=v===S||!o&&v.startsWith(S)&&v.charAt(M)==="/",L=N!=null&&(N===S||!o&&N.startsWith(S)&&N.charAt(S.length)==="/"),z={isActive:P,isPending:L,isTransitioning:j},q=P?a:void 0,H;typeof r=="function"?H=r(z):H=[r,P?"active":null,L?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ue=typeof d=="function"?d(z):d;return A.createElement(Rt,{...h,"aria-current":q,className:H,ref:g,style:ue,to:m,viewTransition:p},typeof x=="function"?x(z):x)});n2.displayName="NavLink";var l2=A.forwardRef(({discover:t="render",fetcherKey:a,navigate:l,reloadDocument:r,replace:o,state:d,method:m=ec,action:p,onSubmit:x,relative:h,preventScrollReset:g,viewTransition:b,...w},k)=>{let y=d2(),C=u2(p,{relative:h}),j=m.toLowerCase()==="get"?"get":"post",S=typeof p=="string"&&Sb.test(p),v=N=>{if(x&&x(N),N.defaultPrevented)return;N.preventDefault();let M=N.nativeEvent.submitter,P=(M==null?void 0:M.getAttribute("formmethod"))||m;y(M||N.currentTarget,{fetcherKey:a,method:P,navigate:l,replace:o,state:d,relative:h,preventScrollReset:g,viewTransition:b})};return A.createElement("form",{ref:k,method:j,action:C,onSubmit:r?x:v,...w,"data-discover":!S&&t==="render"?"true":void 0})});l2.displayName="Form";function r2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cb(t){let a=A.useContext(Xl);return mt(a,r2(t)),a}function i2(t,{target:a,replace:l,state:r,preventScrollReset:o,relative:d,viewTransition:m}={}){let p=Fe(),x=dt(),h=ji(t,{relative:d});return A.useCallback(g=>{if(_N(g,a)){g.preventDefault();let b=l!==void 0?l:mi(x)===mi(h);p(t,{replace:b,state:r,preventScrollReset:o,relative:d,viewTransition:m})}},[x,p,h,l,r,a,t,o,d,m])}function Rc(t){Ms(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=A.useRef($m(t)),l=A.useRef(!1),r=dt(),o=A.useMemo(()=>qN(r.search,l.current?null:a.current),[r.search]),d=Fe(),m=A.useCallback((p,x)=>{const h=$m(typeof p=="function"?p(o):p);l.current=!0,d("?"+h,x)},[d,o]);return[o,m]}var o2=0,c2=()=>`__${String(++o2)}__`;function d2(){let{router:t}=Cb("useSubmit"),{basename:a}=A.useContext(Bs),l=EN();return A.useCallback(async(r,o={})=>{let{action:d,method:m,encType:p,formData:x,body:h}=IN(r,a);if(o.navigate===!1){let g=o.fetcherKey||c2();await t.fetch(g,l,o.action||d,{preventScrollReset:o.preventScrollReset,formData:x,body:h,formMethod:o.method||m,formEncType:o.encType||p,flushSync:o.flushSync})}else await t.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:x,body:h,formMethod:o.method||m,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:l,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,a,l])}function u2(t,{relative:a}={}){let{basename:l}=A.useContext(Bs),r=A.useContext(Fs);mt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),d={...ji(t||".",{relative:a})},m=dt();if(t==null){d.search=m.search;let p=new URLSearchParams(d.search),x=p.getAll("index");if(x.some(g=>g==="")){p.delete("index"),x.filter(b=>b).forEach(b=>p.append("index",b));let g=p.toString();d.search=g?`?${g}`:""}}return(!t||t===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(d.pathname=d.pathname==="/"?l:Na([l,d.pathname])),mi(d)}function m2(t,a={}){let l=A.useContext(xb);mt(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Cb("useViewTransitionState"),o=ji(t,{relative:a.relative});if(!l.isTransitioning)return!1;let d=ka(l.currentLocation.pathname,r)||l.currentLocation.pathname,m=ka(l.nextLocation.pathname,r)||l.nextLocation.pathname;return rc(o.pathname,m)!=null||rc(o.pathname,d)!=null}[...YN];var bm={exports:{}},ym={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function f2(){if(Qg)return ym;Qg=1;var t=Ec();function a(x,h){return x===h&&(x!==0||1/x===1/h)||x!==x&&h!==h}var l=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,o=t.useRef,d=t.useEffect,m=t.useMemo,p=t.useDebugValue;return ym.useSyncExternalStoreWithSelector=function(x,h,g,b,w){var k=o(null);if(k.current===null){var y={hasValue:!1,value:null};k.current=y}else y=k.current;k=m(function(){function j(P){if(!S){if(S=!0,v=P,P=b(P),w!==void 0&&y.hasValue){var L=y.value;if(w(L,P))return N=L}return N=P}if(L=N,l(v,P))return L;var z=b(P);return w!==void 0&&w(L,z)?(v=P,L):(v=P,N=z)}var S=!1,v,N,M=g===void 0?null:g;return[function(){return j(h())},M===null?void 0:function(){return j(M())}]},[h,g,b,w]);var C=r(x,k[0],k[1]);return d(function(){y.hasValue=!0,y.value=C},[C]),p(C),C},ym}var Gg;function h2(){return Gg||(Gg=1,bm.exports=f2()),bm.exports}var x2=h2();function p2(t){t()}function g2(){let t=null,a=null;return{clear(){t=null,a=null},notify(){p2(()=>{let l=t;for(;l;)l.callback(),l=l.next})},get(){const l=[];let r=t;for(;r;)l.push(r),r=r.next;return l},subscribe(l){let r=!0;const o=a={callback:l,next:null,prev:a};return o.prev?o.prev.next=o:t=o,function(){!r||t===null||(r=!1,o.next?o.next.prev=o.prev:a=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Kg={notify(){},get:()=>[]};function b2(t,a){let l,r=Kg,o=0,d=!1;function m(C){g();const j=r.subscribe(C);let S=!1;return()=>{S||(S=!0,j(),b())}}function p(){r.notify()}function x(){y.onStateChange&&y.onStateChange()}function h(){return d}function g(){o++,l||(l=t.subscribe(x),r=g2())}function b(){o--,l&&o===0&&(l(),l=void 0,r.clear(),r=Kg)}function w(){d||(d=!0,g())}function k(){d&&(d=!1,b())}const y={addNestedSub:m,notifyNestedSubs:p,handleChangeWrapper:x,isSubscribed:h,trySubscribe:w,tryUnsubscribe:k,getListeners:()=>r};return y}var y2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w2=y2(),v2=()=>typeof navigator<"u"&&navigator.product==="ReactNative",j2=v2(),N2=()=>w2||j2?A.useLayoutEffect:A.useEffect,S2=N2(),wm=Symbol.for("react-redux-context"),vm=typeof globalThis<"u"?globalThis:{};function C2(){if(!A.createContext)return{};const t=vm[wm]??(vm[wm]=new Map);let a=t.get(A.createContext);return a||(a=A.createContext(null),t.set(A.createContext,a)),a}var fn=C2();function k2(t){const{children:a,context:l,serverState:r,store:o}=t,d=A.useMemo(()=>{const x=b2(o);return{store:o,subscription:x,getServerState:r?()=>r:void 0}},[o,r]),m=A.useMemo(()=>o.getState(),[o]);S2(()=>{const{subscription:x}=d;return x.onStateChange=x.notifyNestedSubs,x.trySubscribe(),m!==o.getState()&&x.notifyNestedSubs(),()=>{x.tryUnsubscribe(),x.onStateChange=void 0}},[d,m]);const p=l||fn;return A.createElement(p.Provider,{value:d},a)}var E2=k2;function Nf(t=fn){return function(){return A.useContext(t)}}var kb=Nf();function Eb(t=fn){const a=t===fn?kb:Nf(t),l=()=>{const{store:r}=a();return r};return Object.assign(l,{withTypes:()=>l}),l}var A2=Eb();function O2(t=fn){const a=t===fn?A2:Eb(t),l=()=>a().dispatch;return Object.assign(l,{withTypes:()=>l}),l}var ws=O2(),R2=(t,a)=>t===a;function T2(t=fn){const a=t===fn?kb:Nf(t),l=(r,o={})=>{const{equalityFn:d=R2}=typeof o=="function"?{equalityFn:o}:o,m=a(),{store:p,subscription:x,getServerState:h}=m;A.useRef(!0);const g=A.useCallback({[r.name](w){return r(w)}}[r.name],[r]),b=x2.useSyncExternalStoreWithSelector(x.addNestedSub,p.getState,h||p.getState,g,d);return A.useDebugValue(b),b};return Object.assign(l,{withTypes:()=>l}),l}var ps=T2();const Bm={PROJECTS:"Projects",ORGANIZATION:"Organization"},P2={PROJECTS:"fa-solid fa-diagram-project text-2xl",ORGANIZATION:"fa-solid fa-building text-2xl"},Ab={ADMIN:"fas fa-user-tie text-2xl",STAFF:"fas fa-user-gear text-2xl",CTO:"fas fa-users-gear text-2xl",WORKER:"fas fa-hard-hat text-2xl",CLIENT:"fas fa-user text-2xl"},ic={ADMIN:"Admin Login",STAFF:"STaff Login",CTO:"CTO Login",WORKER:"Worker Login",CLIENT:"Client Login"},M2={INVITECTO:"fa-solid fa-user-tie text-2xl",INVITESTAFFS:"fa-solid fa-user text-2xl",DETAILS:"fa-solid fa-building text-2xl",PROJECTS:"fa-solid fa-diagram-project  text-2xl",PLAN:"fa-solid fa-cash  text-2xl",PROFILE:"fa-solid fa-user-gear  text-2xl",MODULAR:"fa-solid fa-box  text-2xl"},Vg={INVITECTO:"Invite CTO",INVITESTAFFS:"Invite Staffs",DETAILS:"Org Details",PROJECTS:"Projects",PLAN:"Upgrade Plan",PROFILE:"User Profile",MODULAR:"Modular Units"},Yg={DOCUMENTATION:"Documentation",WORKERS:"Invite Workers",INVITECLIENT:"Invite Client",PREREQUIRETIES:"Pre Requireties",REQUIREMENTFORM:"Requirement Form",SITEMEASUREMENT:"Site Measurement",SAMPLEDESIGN:"Sample Designs",TECHNICALCONSULTANT:"Technical consultant",SELECTSTAGE:"Select Stage",MODULARUNIT:"Modular Units",MATERIALSELECTION:"Material Selection",COSTESTIMATION:"Cost Estimation",PAYMENTCONFIRMATION:"Payment Stage",ORDERMATERIALS:"Ordering Material",MATERIALARRIVED:"Material Arrival",WORKSCHEDULE:"Work Schedule",INSTALLATION:"Installation and execution",QUALITYCHECK:"Quality Check",CLEANINGSANITATION:"Cleaning & Sanitation",PROJECTDELIVERY:"Project Delivery"},F2={DOCUMENTATION:"fa-solid fa-document text-2xl",WORKERS:"fa-solid fa-circle-info text-2xl",INVITECLIENT:"fa-solid fa-user-group text-2xl",PREREQUIRETIES:"fa-solid fa-clipboard text-2xl",REQUIREMENTFORM:"fa-solid fa-pencil text-2xl",SITEMEASUREMENT:"fa-solid fa-building text-2xl",SAMPLEDESIGN:"fa-solid fa-object-group text-2xl",TECHNICALCONSULTANT:"fa-solid fa-comments text-2xl",SELECTSTAGE:"fa-solid fa-square-check text-2xl",MODULARUNIT:"fa-solid fa-box text-2xl",MATERIALSELECTION:"fas fa-box text-2xl",COSTESTIMATION:"fa-solid fa-money-bill-1-wave text-2xl",PAYMENTCONFIRMATION:"fa-solid fa-money-bill-wave text-2xl",ORDERMATERIALS:"fa-solid fa-shopping-cart text-2xl",MATERIALARRIVED:"fa-solid fa-receipt text-2xl",WORKSCHEDULE:"fas fa-digging text-2xl",INSTALLATION:"fas fa-comments text-2xl",QUALITYCHECK:"fas fa-check-double text-2xl",CLEANINGSANITATION:"fas fa-broom text-2xl",PROJECTDELIVERY:"fas fa-handshake text-2xl"},L2={labourlist:"Labours",materiallist:"Materials",transportationlist:"Transportation",workers:"Workers",inviteclient:"Invite Client",requirementform:"Requirement Form",sitemeasurement:"Site Measurement",sampledesign:"Sample Designs",technicalconsultant:"Technical consultant",materialselection:"Material Selection",costestimation:"Cost Estiamtion",paymentconfirmation:"Payment Stage",ordermaterial:"Ordering Material",materialarrival:"Material Arrival",workmainschedule:"Work Schedule",installation:"Installation and execution",qualitycheck:"Quality Check",cleaning:"Cleaning & Sanitation",projectdelivery:"Project Delivery"},D2={labourlist:"LABOURS",materiallist:"MATERIALS",transportationlist:"TRANSPORTATION",workers:"WORKERS",inviteclient:"INVITECLIENT",requirementform:"REQUIREMENTFORM",sitemeasurement:"SITEMEASUREMENT",sampledesign:"SAMPLEDESIGN",technicalconsultant:"TECHNICALCONSULTANT",materialselection:"MATERIALSELECTION",costestimation:"COSTESTIMATION",paymentconfirmation:"PAYMENTCONFIRMATION",ordermaterial:"ORDERMATERIALS",materialarrival:"MATERIALARRIVED",workmainschedule:"WORKSCHEDULE",installation:"INSTALLATION",qualitycheck:"QUALITYCHECK",cleaning:"CLEANINGSANITATION",projectdelivery:"PROJECTDELIVERY"},yt={COMPANY_NAME:"Vertical living",COMPANY_LOGO:"https://th.bing.com/th/id/OIP.Uparc9uI63RDb82OupdPvwAAAA?w=80&h=80&c=1&bgcl=c77779&r=0&o=6&dpr=1.3&pid=ImgRC"},Ob=[{key:"basic",name:"Basic",price:1e3,color:"border-blue-500",btnColor:"bg-blue-600 hover:bg-blue-700",planNameColor:"text-blue-700",features:[" 5 Roles Allowed"," Email Notification"," Timer Functionality"," Image Upload"," PDF Upload"," Assign Staffs"," Cost Estimation"],available:!0},{key:"advanced",name:"Advanced",price:0,color:"border-purple-500",btnColor:"bg-purple-600 hover:bg-purple-700",planNameColor:"text-purple-700",features:[],available:!1},{key:"enterprise",name:"Enterprise",price:0,color:"border-rose-500",btnColor:"bg-rose-600 hover:bg-rose-700",planNameColor:"text-rose-700",features:[],available:!1}],ya={carpentry:["material","brandName","specification","quantity","unit","remarks"],hardware:["item","size","material","brandName","quantity","unit","remarks"],electricalFittings:["item","specification","quantity","unit","remarks"],tiles:["type","brandName","size","quantity","unit","remarks"],ceramicSanitaryware:["item","specification","quantity","unit","remarks"],paintsCoatings:["type","brandName","color","quantity","unit","remarks"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks"],glassMirrors:["type","brandName","size","thickness","quantity","remarks"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks"],falseCeilingMaterials:["item","specification","quantity","unit","remarks"]},_2={carpentry:["Greenply","CenturyPly","Kitply","Archidply","Merino Laminates","Action TESA","Austin Plywood"],hardware:["Hettich","Hafele","Ebco","Godrej Locks","Dorset","Ozone","Blum","Yale"],electricalFittings:["Havells","Anchor by Panasonic","Legrand","Schneider Electric","GM Modular","Wipro","Philips","Syska"],tiles:["Kajaria","Somany","Nitco","Orientbell","Johnson Tiles","Varmora","Asian Granito"],ceramicSanitaryware:["Hindware","Jaquar","CERA","Parryware","Kohler India","Roca India"],paintsCoatings:["Asian Paints","Berger Paints","Nerolac Paints","Dulux Paints","Indigo Paints","Shalimar Paints"],lightsFixtures:["Philips Lighting","Syska LED","Wipro Lighting","Havells","Crompton","Bajaj Electricals"],glassMirrors:["Saint-Gobain","Modiguard","AIS Glass","HNG Float Glass","Gold Plus Glass"],upholsteryCurtains:["DDecor","Fabindia","Bombay Dyeing","Raymond Furnishings","Spaces Home & Beyond"],falseCeilingMaterials:["Gyproc by Saint-Gobain","Armstrong Ceilings","USG Boral","Everest Industries","Shera"]},Zs={carpentry:["material","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],hardware:["item","size","material","brandName","quantity","unit","remarks","image","verifiedByAccountant"],electricalFittings:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],tiles:["type","brandName","size","quantity","unit","remarks","image","verifiedByAccountant"],ceramicSanitaryware:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"],paintsCoatings:["type","brandName","color","quantity","unit","remarks","image","verifiedByAccountant"],lightsFixtures:["type","brandName","specification","quantity","unit","remarks","image","verifiedByAccountant"],glassMirrors:["type","brandName","size","thickness","quantity","remarks","image","verifiedByAccountant"],upholsteryCurtains:["item","fabric","color","quantity","unit","remarks","image","verifiedByAccountant"],falseCeilingMaterials:["item","specification","quantity","unit","remarks","image","verifiedByAccountant"]},jm={brandName:{carpentry:["Greenply","Century","Kitply","Archid","Austin"],hardware:["Hettich","Hafele","Blum","Godrej"],tiles:["Kajaria","Somany","Johnson","Nitco"],paintsCoatings:["Asian Paints","Berger","Dulux"],lightsFixtures:["Philips","Syska","Wipro"],glassMirrors:["Saint-Gobain","Modiguard","Asahi"],ceramicSanitaryware:["Cera","Parryware","Hindware"]},fabric:{upholsteryCurtains:["Cotton","Linen","Velvet","Polyester","Silk"]}},q2=["Living Room","Bedroom","Kitchen","Dining Room","Balcony","Foyer Area","Terrace","Study Room","Car Parking","Garden","Storage Room","Entertainment Room","Home Gym"],Rb=[{stepNumber:1,label:"Identify Painting Area",rules:["Measure and record room dimensions (length, width, height) in feet and inches using a measuring tape or laser tool.","Take high-resolution photos of all walls, corners, and ceiling edges for supervisor reference.","Highlight and document any cracks, dampness, or surface irregularities that need attention.","Upload details of the paint brand and colour code selected for approval before proceeding."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Cover the floor using durable plastic sheets or canvas drop cloths to prevent paint spillage.","Move all movable furniture to the center of the room and cover them securely with protective sheets.","Apply masking tape to skirting boards, switches, sockets, and window trims for protection."]},{stepNumber:3,label:"Surface Preparation",rules:["Clean all walls thoroughly to remove dust, dirt, and grease spots.","Scrape off any old loose paint using a putty knife.","Fill cracks and holes with quality wall putty and allow it to dry.","Sand the surface to ensure a smooth and even base for putty application."]},{stepNumber:4,label:"First Coat of Putty",rules:["Apply the first coat of wall putty using a broad putty knife for even application.","Allow sufficient drying time as per the manufacturers guidelines.","Lightly sand the surface to remove any excess material and achieve a smooth finish."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Apply a second coat of wall putty for a fine, uniform surface.","After drying, sand the surface again to ensure it is perfectly smooth and ready for scrubbing.","Clean all dust particles with a dry cloth before proceeding."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["After applying two coats of putty, scrub the wall surface to eliminate any rough patches.","Choose between manual scrubbing (using sandpaper for small areas and edges) or machine scrubbing (for large walls, ensuring consistency and time-saving).","Scrub in circular motions and clean off all dust after scrubbing."]},{stepNumber:6,label:"Primer Application",rules:["Apply one uniform coat of primer using a roller or brush.","Allow the primer to dry completely before moving to paint application."]},{stepNumber:7,label:"First Coat of Paint",rules:["Apply the first coat of approved paint using consistent strokes to avoid streaks.","Allow sufficient drying time before applying the second coat."]},{stepNumber:8,label:"Second Coat of Paint",rules:["Apply the second coat of paint for a smooth, uniform finish.","Inspect walls for any missed spots and touch up as required."]},{stepNumber:9,label:"Final Finishing and Cleanup",rules:["Conduct a final inspection of all painted surfaces for uniformity.","Carefully remove all masking tape to avoid peeling paint.","Clean up the workspace, remove protective sheets, and reset furniture."]}],Tb=[{stepNumber:1,label:"Identify Painting Area",rules:["Review worker-uploaded images and details for Step 1.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:2,label:"Protect Flooring and Items",rules:["Review worker-uploaded images and details for Step 2.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:3,label:"Surface Preparation",rules:["Review worker-uploaded images and details for Step 3.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:4,label:"First Coat of Putty",rules:["Review worker-uploaded images and details for Step 4.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:5,label:"Second Coat of Putty",rules:["Review worker-uploaded images and details for Step 5.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:6,label:"Scrubbing the Wall",rules:["Review worker-uploaded images and details for Step 6.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:7,label:"Primer Application",rules:["Review worker-uploaded images and details for Step 7.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:8,label:"First Coat of Paint",rules:["Review worker-uploaded images and details for Step 8.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:9,label:"Second Coat of Paint",rules:["Review worker-uploaded images and details for Step 9.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]},{stepNumber:10,label:"Final Finishing and Cleanup",rules:["Review worker-uploaded images and details for Step 10.","Verify if all tasks were completed as per standard operating procedures.","Approve if satisfactory, or add notes and upload correction images if changes are required."]}],Ko=({src:t,alt:a,className:l="",width:r,height:o})=>{const[d,m]=A.useState(!1),[p,x]=A.useState("");return A.useEffect(()=>{const h=new Image;h.crossOrigin="anonymous",h.onload=()=>{x(t),m(!0)},h.src=t},[t]),e.jsxs("div",{className:`relative overflow-hidden ${l}`,style:{width:r,height:o},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-blue-100 to-purple-100 transition-opacity duration-500 ${d?"opacity-0":"opacity-100"}`}),p&&e.jsx("img",{src:p,alt:a,className:`w-full h-full object-cover transition-opacity duration-500 ${d?"opacity-100":"opacity-0"}`})]})},ri=({children:t,className:a=""})=>e.jsx("div",{className:`bg-white rounded-lg shadow-lg ${a}`,children:t}),Nm=({children:t,variant:a="primary",size:l="md",className:r="",onClick:o})=>{const d="font-semibold rounded-lg transition-all duration-200 inline-flex items-center justify-center",m={primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700",secondary:"bg-white text-gray-900 border border-gray-300 hover:bg-gray-50",outline:"border-2 border-current bg-transparent hover:bg-current hover:text-white"},p={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return e.jsx("button",{className:`${d} ${m[a]} ${p[l]} ${r}`,onClick:o,children:t})},Wg=({children:t,className:a=""})=>e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ${a}`,children:t});function Xg(){const t=ps(m=>m.authStore),[a,l]=A.useState(!1),r=Fe(),o=()=>{l(!1)},d={basic:"Perfect for small design studios",enterprise:"For large design firms",advanced:" For growing design businesses"};return e.jsxs("div",{className:"min-h-full w-full bg-white",children:[e.jsx("header",{className:"border-b px-4 border-gray-300 w-full bg-white/95 backdrop-blur sticky top-0 z-50",children:e.jsx("div",{className:" w-full",children:e.jsxs("div",{className:"flex justify-between w-full items-center py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ko,{src:yt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-10 h-10 rounded-lg",width:40,height:40}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:yt.COMPANY_NAME})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[e.jsx(Nm,{onClick:()=>r("/login"),variant:"secondary",className:"hidden sm:inline-flex cursor-pointer",children:"Sign In"}),(t==null?void 0:t.isauthenticated)&&e.jsx(Nm,{onClick:()=>r("/"),className:"cursor-pointer",children:"Get Started"})]}),e.jsx("button",{className:"sm:hidden block p-2",onClick:()=>l(!a),children:e.jsx("i",{className:"fas fa-bars text-gray-600"})})]})]})})}),e.jsx("div",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${a?"translate-x-0":"-translate-x-full"} `,children:e.jsxs("nav",{className:"flex flex-col space-y-4 ",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:yt.COMPANY_NAME})]}),e.jsx("button",{onClick:o,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("ul",{className:"px-4 space-x-2 max-h-screen overflow-y-auto space-y-4 ",children:[e.jsx("li",{onClick:()=>r("/login"),className:"border-b border-gray-300 py-5",children:e.jsx(Rt,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Sign In"})}),e.jsx("li",{onClick:()=>r("/organizations"),children:e.jsx(Rt,{to:"/organizations",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Get Started"})})]})]})}),e.jsx("section",{className:"pt-20 pb-16 sm:py-24",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs(Wg,{className:"mb-4",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Interior Design Task Management"]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Streamline Your"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Work Flows"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Manage client requirements, assign tasks to workers, set timers, and send automated email reminders. Everything you need to deliver exceptional interior design projects on time."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsxs(Nm,{onClick:()=>r("/organizations"),size:"lg",className:"text-lg px-8 py-3 cursor-pointer",children:["Get Started Today",e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})})]}),e.jsx("div",{className:"mt-16 max-w-5xl mx-auto",children:e.jsx(Ko,{src:"/placeholder.svg?height=600&width=1000",alt:"Vertical Living Dashboard",className:"rounded-xl shadow-2xl border"})})]})}),e.jsx("section",{id:"features",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Everything you need for interior design project management"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Powerful features designed specifically for interior designers and their teams"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-clipboard-list text-blue-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Client Requirements"}),e.jsx("p",{className:"text-gray-600",children:"Capture and organize client requirements, preferences, and specifications in one centralized location."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-users text-green-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Task Assignment"}),e.jsx("p",{className:"text-gray-600",children:"Assign tasks to team members and workers with clear deadlines and detailed instructions."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-envelope text-purple-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Email Reminders"}),e.jsx("p",{className:"text-gray-600",children:"Automated email notifications and reminders to keep everyone on track and informed."})]}),e.jsxs(ri,{className:"text-center border-0 shadow-lg p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-stopwatch text-orange-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Time Tracking"}),e.jsx("p",{className:"text-gray-600",children:"Built-in timers to track work hours and monitor project progress in real-time."})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsxs("div",{className:"w-[100%] sm:w-[60%] mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-center  text-gray-900 mb-4",children:"Designed for Interior Design Professionals"}),e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Unlike generic project management tools, Vertical Living is built specifically for interior designers. We understand your workflow, from initial client consultation to final installation."})]}),e.jsx("div",{children:e.jsx(Ko,{src:"/placeholder.svg?height=400&width=500",alt:"Interior Design Project Management",className:"rounded-lg shadow-lg"})})]})]})}),e.jsx("section",{id:"pricing",className:"py-20",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Explore Plan"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Start with our Basic plan and upgrade as your business grows"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:Ob.map(m=>{let p="";switch(m.key){case"basic":p="fa-seedling";break;case"advanced":p="fa-rocket";break;case"enterprise":p="fa-building";break;default:p="fa-layer-group"}return e.jsxs(ri,{className:`border-2 ${m.price?"border-blue-500":"border-none"} shadow-xl relative p-6`,children:[m.price===0&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(Wg,{className:"bg-gray-500 text-white",children:"Coming Soon"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-2",children:[e.jsx("i",{className:`fa-solid ${p} ${m.price?"text-blue-600":"text-gray-600"} mr-2`}),m.name]}),e.jsx("p",{className:"text-gray-600 mb-4",children:d[m.key]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:`text-2xl sm:text-2xl ${m.price?"text-3xl":"text-xl"} font-bold`,children:[" ",m.price?` ${m.price}`:"Coming Soon"]}),m.price>0&&e.jsx("span",{className:"text-gray-500",children:"/month"})]})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:m.features.length>0?m.features.map((x,h)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${x.includes("")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:x.replace("","").replace("","")})]},h)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})})]},m.key)})})]})}),e.jsx("footer",{id:"contact",className:"bg-gray-900 text-white py-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ko,{src:yt.COMPANY_LOGO,alt:"Vertical Living Logo",className:"w-8 h-8 rounded-lg",width:32,height:32}),e.jsx("span",{className:"text-xl font-bold",children:yt.COMPANY_NAME})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Streamline your Work flow with our specialized task management platform."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-linkedin text-xl"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fab fa-instagram text-xl"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"text-gray-400 scroll-smooth  hover:text-white transition-colors",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors",children:"Pricing"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",className:"text-gray-400 hover:text-white transition-colors",children:"Contact"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," ",yt.COMPANY_NAME,". All rights reserved."]}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Terms of Service"}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cookie Policy"})]})]})]})})]})}const z2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Issues"}),U2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Phase"}),I2=()=>e.jsx("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:"Tasks"});function $2(t,a){A.useEffect(()=>{const l=r=>{r.ctrlKey&&r.key==="]"?(r.preventDefault(),a()):r.ctrlKey&&r.key==="["&&(r.preventDefault(),t())};window.addEventListener("keydown",l)},[a,t])}var Jl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gn=typeof window>"u"||"Deno"in globalThis;function Kt(){}function B2(t,a){return typeof t=="function"?t(a):t}function Hm(t){return typeof t=="number"&&t>=0&&t!==1/0}function Pb(t,a){return Math.max(t+(a||0)-Date.now(),0)}function mn(t,a){return typeof t=="function"?t(a):t}function Us(t,a){return typeof t=="function"?t(a):t}function Zg(t,a){const{type:l="all",exact:r,fetchStatus:o,predicate:d,queryKey:m,stale:p}=t;if(m){if(r){if(a.queryHash!==Sf(m,a.options))return!1}else if(!fi(a.queryKey,m))return!1}if(l!=="all"){const x=a.isActive();if(l==="active"&&!x||l==="inactive"&&x)return!1}return!(typeof p=="boolean"&&a.isStale()!==p||o&&o!==a.state.fetchStatus||d&&!d(a))}function Jg(t,a){const{exact:l,status:r,predicate:o,mutationKey:d}=t;if(d){if(!a.options.mutationKey)return!1;if(l){if(Kn(a.options.mutationKey)!==Kn(d))return!1}else if(!fi(a.options.mutationKey,d))return!1}return!(r&&a.state.status!==r||o&&!o(a))}function Sf(t,a){return((a==null?void 0:a.queryKeyHashFn)||Kn)(t)}function Kn(t){return JSON.stringify(t,(a,l)=>Qm(l)?Object.keys(l).sort().reduce((r,o)=>(r[o]=l[o],r),{}):l)}function fi(t,a){return t===a?!0:typeof t!=typeof a?!1:t&&a&&typeof t=="object"&&typeof a=="object"?Object.keys(a).every(l=>fi(t[l],a[l])):!1}function Mb(t,a){if(t===a)return t;const l=e0(t)&&e0(a);if(l||Qm(t)&&Qm(a)){const r=l?t:Object.keys(t),o=r.length,d=l?a:Object.keys(a),m=d.length,p=l?[]:{},x=new Set(r);let h=0;for(let g=0;g<m;g++){const b=l?g:d[g];(!l&&x.has(b)||l)&&t[b]===void 0&&a[b]===void 0?(p[b]=void 0,h++):(p[b]=Mb(t[b],a[b]),p[b]===t[b]&&t[b]!==void 0&&h++)}return o===m&&h===o?t:p}return a}function oc(t,a){if(!a||Object.keys(t).length!==Object.keys(a).length)return!1;for(const l in t)if(t[l]!==a[l])return!1;return!0}function e0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Qm(t){if(!t0(t))return!1;const a=t.constructor;if(a===void 0)return!0;const l=a.prototype;return!(!t0(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function t0(t){return Object.prototype.toString.call(t)==="[object Object]"}function H2(t){return new Promise(a=>{setTimeout(a,t)})}function Gm(t,a,l){return typeof l.structuralSharing=="function"?l.structuralSharing(t,a):l.structuralSharing!==!1?Mb(t,a):a}function Q2(t,a,l=0){const r=[...t,a];return l&&r.length>l?r.slice(1):r}function G2(t,a,l=0){const r=[a,...t];return l&&r.length>l?r.slice(0,-1):r}var Cf=Symbol();function Fb(t,a){return!t.queryFn&&(a!=null&&a.initialPromise)?()=>a.initialPromise:!t.queryFn||t.queryFn===Cf?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Lb(t,a){return typeof t=="function"?t(...a):!!t}var _n,tn,Dl,tb,K2=(tb=class extends Jl{constructor(){super();Ae(this,_n);Ae(this,tn);Ae(this,Dl);ve(this,Dl,a=>{if(!Gn&&window.addEventListener){const l=()=>a();return window.addEventListener("visibilitychange",l,!1),()=>{window.removeEventListener("visibilitychange",l)}}})}onSubscribe(){Q(this,tn)||this.setEventListener(Q(this,Dl))}onUnsubscribe(){var a;this.hasListeners()||((a=Q(this,tn))==null||a.call(this),ve(this,tn,void 0))}setEventListener(a){var l;ve(this,Dl,a),(l=Q(this,tn))==null||l.call(this),ve(this,tn,a(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(a){Q(this,_n)!==a&&(ve(this,_n,a),this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(l=>{l(a)})}isFocused(){var a;return typeof Q(this,_n)=="boolean"?Q(this,_n):((a=globalThis.document)==null?void 0:a.visibilityState)!=="hidden"}},_n=new WeakMap,tn=new WeakMap,Dl=new WeakMap,tb),kf=new K2,_l,sn,ql,sb,V2=(sb=class extends Jl{constructor(){super();Ae(this,_l,!0);Ae(this,sn);Ae(this,ql);ve(this,ql,a=>{if(!Gn&&window.addEventListener){const l=()=>a(!0),r=()=>a(!1);return window.addEventListener("online",l,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,sn)||this.setEventListener(Q(this,ql))}onUnsubscribe(){var a;this.hasListeners()||((a=Q(this,sn))==null||a.call(this),ve(this,sn,void 0))}setEventListener(a){var l;ve(this,ql,a),(l=Q(this,sn))==null||l.call(this),ve(this,sn,a(this.setOnline.bind(this)))}setOnline(a){Q(this,_l)!==a&&(ve(this,_l,a),this.listeners.forEach(r=>{r(a)}))}isOnline(){return Q(this,_l)}},_l=new WeakMap,sn=new WeakMap,ql=new WeakMap,sb),cc=new V2;function Km(){let t,a;const l=new Promise((o,d)=>{t=o,a=d});l.status="pending",l.catch(()=>{});function r(o){Object.assign(l,o),delete l.resolve,delete l.reject}return l.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},l.reject=o=>{r({status:"rejected",reason:o}),a(o)},l}function Y2(t){return Math.min(1e3*2**t,3e4)}function Db(t){return(t??"online")==="online"?cc.isOnline():!0}var _b=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Sm(t){return t instanceof _b}function qb(t){let a=!1,l=0,r=!1,o;const d=Km(),m=C=>{var j;r||(w(new _b(C)),(j=t.abort)==null||j.call(t))},p=()=>{a=!0},x=()=>{a=!1},h=()=>kf.isFocused()&&(t.networkMode==="always"||cc.isOnline())&&t.canRun(),g=()=>Db(t.networkMode)&&t.canRun(),b=C=>{var j;r||(r=!0,(j=t.onSuccess)==null||j.call(t,C),o==null||o(),d.resolve(C))},w=C=>{var j;r||(r=!0,(j=t.onError)==null||j.call(t,C),o==null||o(),d.reject(C))},k=()=>new Promise(C=>{var j;o=S=>{(r||h())&&C(S)},(j=t.onPause)==null||j.call(t)}).then(()=>{var C;o=void 0,r||(C=t.onContinue)==null||C.call(t)}),y=()=>{if(r)return;let C;const j=l===0?t.initialPromise:void 0;try{C=j??t.fn()}catch(S){C=Promise.reject(S)}Promise.resolve(C).then(b).catch(S=>{var L;if(r)return;const v=t.retry??(Gn?0:3),N=t.retryDelay??Y2,M=typeof N=="function"?N(l,S):N,P=v===!0||typeof v=="number"&&l<v||typeof v=="function"&&v(l,S);if(a||!P){w(S);return}l++,(L=t.onFail)==null||L.call(t,l,S),H2(M).then(()=>h()?void 0:k()).then(()=>{a?w(S):y()})})};return{promise:d,cancel:m,continue:()=>(o==null||o(),d),cancelRetry:p,continueRetry:x,canStart:g,start:()=>(g()?y():k().then(y),d)}}var W2=t=>setTimeout(t,0);function X2(){let t=[],a=0,l=p=>{p()},r=p=>{p()},o=W2;const d=p=>{a?t.push(p):o(()=>{l(p)})},m=()=>{const p=t;t=[],p.length&&o(()=>{r(()=>{p.forEach(x=>{l(x)})})})};return{batch:p=>{let x;a++;try{x=p()}finally{a--,a||m()}return x},batchCalls:p=>(...x)=>{d(()=>{p(...x)})},schedule:d,setNotifyFunction:p=>{l=p},setBatchNotifyFunction:p=>{r=p},setScheduler:p=>{o=p}}}var Ct=X2(),qn,ab,zb=(ab=class{constructor(){Ae(this,qn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hm(this.gcTime)&&ve(this,qn,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Gn?1/0:5*60*1e3))}clearGcTimeout(){Q(this,qn)&&(clearTimeout(Q(this,qn)),ve(this,qn,void 0))}},qn=new WeakMap,ab),zl,Ul,Ps,zn,It,gi,Un,qs,wa,nb,Z2=(nb=class extends zb{constructor(a){super();Ae(this,qs);Ae(this,zl);Ae(this,Ul);Ae(this,Ps);Ae(this,zn);Ae(this,It);Ae(this,gi);Ae(this,Un);ve(this,Un,!1),ve(this,gi,a.defaultOptions),this.setOptions(a.options),this.observers=[],ve(this,zn,a.client),ve(this,Ps,Q(this,zn).getQueryCache()),this.queryKey=a.queryKey,this.queryHash=a.queryHash,ve(this,zl,J2(this.options)),this.state=a.state??Q(this,zl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var a;return(a=Q(this,It))==null?void 0:a.promise}setOptions(a){this.options={...Q(this,gi),...a},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,Ps).remove(this)}setData(a,l){const r=Gm(this.state.data,a,this.options);return ze(this,qs,wa).call(this,{data:r,type:"success",dataUpdatedAt:l==null?void 0:l.updatedAt,manual:l==null?void 0:l.manual}),r}setState(a,l){ze(this,qs,wa).call(this,{type:"setState",state:a,setStateOptions:l})}cancel(a){var r,o;const l=(r=Q(this,It))==null?void 0:r.promise;return(o=Q(this,It))==null||o.cancel(a),l?l.then(Kt).catch(Kt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,zl))}isActive(){return this.observers.some(a=>Us(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>mn(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!Pb(this.state.dataUpdatedAt,a)}onFocus(){var l;const a=this.observers.find(r=>r.shouldFetchOnWindowFocus());a==null||a.refetch({cancelRefetch:!1}),(l=Q(this,It))==null||l.continue()}onOnline(){var l;const a=this.observers.find(r=>r.shouldFetchOnReconnect());a==null||a.refetch({cancelRefetch:!1}),(l=Q(this,It))==null||l.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),Q(this,Ps).notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(l=>l!==a),this.observers.length||(Q(this,It)&&(Q(this,Un)?Q(this,It).cancel({revert:!0}):Q(this,It).cancelRetry()),this.scheduleGc()),Q(this,Ps).notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ze(this,qs,wa).call(this,{type:"invalidate"})}fetch(a,l){var h,g,b;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(l!=null&&l.cancelRefetch))this.cancel({silent:!0});else if(Q(this,It))return Q(this,It).continueRetry(),Q(this,It).promise}if(a&&this.setOptions(a),!this.options.queryFn){const w=this.observers.find(k=>k.options.queryFn);w&&this.setOptions(w.options)}const r=new AbortController,o=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(ve(this,Un,!0),r.signal)})},d=()=>{const w=Fb(this.options,l),y=(()=>{const C={client:Q(this,zn),queryKey:this.queryKey,meta:this.meta};return o(C),C})();return ve(this,Un,!1),this.options.persister?this.options.persister(w,y,this):w(y)},p=(()=>{const w={fetchOptions:l,options:this.options,queryKey:this.queryKey,client:Q(this,zn),state:this.state,fetchFn:d};return o(w),w})();(h=this.options.behavior)==null||h.onFetch(p,this),ve(this,Ul,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=p.fetchOptions)==null?void 0:g.meta))&&ze(this,qs,wa).call(this,{type:"fetch",meta:(b=p.fetchOptions)==null?void 0:b.meta});const x=w=>{var k,y,C,j;Sm(w)&&w.silent||ze(this,qs,wa).call(this,{type:"error",error:w}),Sm(w)||((y=(k=Q(this,Ps).config).onError)==null||y.call(k,w,this),(j=(C=Q(this,Ps).config).onSettled)==null||j.call(C,this.state.data,w,this)),this.scheduleGc()};return ve(this,It,qb({initialPromise:l==null?void 0:l.initialPromise,fn:p.fetchFn,abort:r.abort.bind(r),onSuccess:w=>{var k,y,C,j;if(w===void 0){x(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(w)}catch(S){x(S);return}(y=(k=Q(this,Ps).config).onSuccess)==null||y.call(k,w,this),(j=(C=Q(this,Ps).config).onSettled)==null||j.call(C,w,this.state.error,this),this.scheduleGc()},onError:x,onFail:(w,k)=>{ze(this,qs,wa).call(this,{type:"failed",failureCount:w,error:k})},onPause:()=>{ze(this,qs,wa).call(this,{type:"pause"})},onContinue:()=>{ze(this,qs,wa).call(this,{type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode,canRun:()=>!0})),Q(this,It).start()}},zl=new WeakMap,Ul=new WeakMap,Ps=new WeakMap,zn=new WeakMap,It=new WeakMap,gi=new WeakMap,Un=new WeakMap,qs=new WeakSet,wa=function(a){const l=r=>{switch(a.type){case"failed":return{...r,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ub(r.data,this.options),fetchMeta:a.meta??null};case"success":return{...r,data:a.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=a.error;return Sm(o)&&o.revert&&Q(this,Ul)?{...Q(this,Ul),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...a.state}}};this.state=l(this.state),Ct.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Q(this,Ps).notify({query:this,type:"updated",action:a})})},nb);function Ub(t,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Db(a.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function J2(t){const a=typeof t.initialData=="function"?t.initialData():t.initialData,l=a!==void 0,r=l?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:l?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}var Js,lb,eS=(lb=class extends Jl{constructor(a={}){super();Ae(this,Js);this.config=a,ve(this,Js,new Map)}build(a,l,r){const o=l.queryKey,d=l.queryHash??Sf(o,l);let m=this.get(d);return m||(m=new Z2({client:a,queryKey:o,queryHash:d,options:a.defaultQueryOptions(l),state:r,defaultOptions:a.getQueryDefaults(o)}),this.add(m)),m}add(a){Q(this,Js).has(a.queryHash)||(Q(this,Js).set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const l=Q(this,Js).get(a.queryHash);l&&(a.destroy(),l===a&&Q(this,Js).delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){Ct.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return Q(this,Js).get(a)}getAll(){return[...Q(this,Js).values()]}find(a){const l={exact:!0,...a};return this.getAll().find(r=>Zg(l,r))}findAll(a={}){const l=this.getAll();return Object.keys(a).length>0?l.filter(r=>Zg(a,r)):l}notify(a){Ct.batch(()=>{this.listeners.forEach(l=>{l(a)})})}onFocus(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){Ct.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},Js=new WeakMap,lb),ea,Qt,In,ta,en,rb,tS=(rb=class extends zb{constructor(a){super();Ae(this,ta);Ae(this,ea);Ae(this,Qt);Ae(this,In);this.mutationId=a.mutationId,ve(this,Qt,a.mutationCache),ve(this,ea,[]),this.state=a.state||Ib(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){Q(this,ea).includes(a)||(Q(this,ea).push(a),this.clearGcTimeout(),Q(this,Qt).notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){ve(this,ea,Q(this,ea).filter(l=>l!==a)),this.scheduleGc(),Q(this,Qt).notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){Q(this,ea).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Qt).remove(this))}continue(){var a;return((a=Q(this,In))==null?void 0:a.continue())??this.execute(this.state.variables)}async execute(a){var d,m,p,x,h,g,b,w,k,y,C,j,S,v,N,M,P,L,z,q;const l=()=>{ze(this,ta,en).call(this,{type:"continue"})};ve(this,In,qb({fn:()=>this.options.mutationFn?this.options.mutationFn(a):Promise.reject(new Error("No mutationFn found")),onFail:(H,ue)=>{ze(this,ta,en).call(this,{type:"failed",failureCount:H,error:ue})},onPause:()=>{ze(this,ta,en).call(this,{type:"pause"})},onContinue:l,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Qt).canRun(this)}));const r=this.state.status==="pending",o=!Q(this,In).canStart();try{if(r)l();else{ze(this,ta,en).call(this,{type:"pending",variables:a,isPaused:o}),await((m=(d=Q(this,Qt).config).onMutate)==null?void 0:m.call(d,a,this));const ue=await((x=(p=this.options).onMutate)==null?void 0:x.call(p,a));ue!==this.state.context&&ze(this,ta,en).call(this,{type:"pending",context:ue,variables:a,isPaused:o})}const H=await Q(this,In).start();return await((g=(h=Q(this,Qt).config).onSuccess)==null?void 0:g.call(h,H,a,this.state.context,this)),await((w=(b=this.options).onSuccess)==null?void 0:w.call(b,H,a,this.state.context)),await((y=(k=Q(this,Qt).config).onSettled)==null?void 0:y.call(k,H,null,this.state.variables,this.state.context,this)),await((j=(C=this.options).onSettled)==null?void 0:j.call(C,H,null,a,this.state.context)),ze(this,ta,en).call(this,{type:"success",data:H}),H}catch(H){try{throw await((v=(S=Q(this,Qt).config).onError)==null?void 0:v.call(S,H,a,this.state.context,this)),await((M=(N=this.options).onError)==null?void 0:M.call(N,H,a,this.state.context)),await((L=(P=Q(this,Qt).config).onSettled)==null?void 0:L.call(P,void 0,H,this.state.variables,this.state.context,this)),await((q=(z=this.options).onSettled)==null?void 0:q.call(z,void 0,H,a,this.state.context)),H}finally{ze(this,ta,en).call(this,{type:"error",error:H})}}finally{Q(this,Qt).runNext(this)}}},ea=new WeakMap,Qt=new WeakMap,In=new WeakMap,ta=new WeakSet,en=function(a){const l=r=>{switch(a.type){case"failed":return{...r,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...r,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:a.error,failureCount:r.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=l(this.state),Ct.batch(()=>{Q(this,ea).forEach(r=>{r.onMutationUpdate(a)}),Q(this,Qt).notify({mutation:this,type:"updated",action:a})})},rb);function Ib(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var va,zs,bi,ib,sS=(ib=class extends Jl{constructor(a={}){super();Ae(this,va);Ae(this,zs);Ae(this,bi);this.config=a,ve(this,va,new Set),ve(this,zs,new Map),ve(this,bi,0)}build(a,l,r){const o=new tS({mutationCache:this,mutationId:++Qo(this,bi)._,options:a.defaultMutationOptions(l),state:r});return this.add(o),o}add(a){Q(this,va).add(a);const l=Vo(a);if(typeof l=="string"){const r=Q(this,zs).get(l);r?r.push(a):Q(this,zs).set(l,[a])}this.notify({type:"added",mutation:a})}remove(a){if(Q(this,va).delete(a)){const l=Vo(a);if(typeof l=="string"){const r=Q(this,zs).get(l);if(r)if(r.length>1){const o=r.indexOf(a);o!==-1&&r.splice(o,1)}else r[0]===a&&Q(this,zs).delete(l)}}this.notify({type:"removed",mutation:a})}canRun(a){const l=Vo(a);if(typeof l=="string"){const r=Q(this,zs).get(l),o=r==null?void 0:r.find(d=>d.state.status==="pending");return!o||o===a}else return!0}runNext(a){var r;const l=Vo(a);if(typeof l=="string"){const o=(r=Q(this,zs).get(l))==null?void 0:r.find(d=>d!==a&&d.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ct.batch(()=>{Q(this,va).forEach(a=>{this.notify({type:"removed",mutation:a})}),Q(this,va).clear(),Q(this,zs).clear()})}getAll(){return Array.from(Q(this,va))}find(a){const l={exact:!0,...a};return this.getAll().find(r=>Jg(l,r))}findAll(a={}){return this.getAll().filter(l=>Jg(a,l))}notify(a){Ct.batch(()=>{this.listeners.forEach(l=>{l(a)})})}resumePausedMutations(){const a=this.getAll().filter(l=>l.state.isPaused);return Ct.batch(()=>Promise.all(a.map(l=>l.continue().catch(Kt))))}},va=new WeakMap,zs=new WeakMap,bi=new WeakMap,ib);function Vo(t){var a;return(a=t.options.scope)==null?void 0:a.id}function s0(t){return{onFetch:(a,l)=>{var g,b,w,k,y;const r=a.options,o=(w=(b=(g=a.fetchOptions)==null?void 0:g.meta)==null?void 0:b.fetchMore)==null?void 0:w.direction,d=((k=a.state.data)==null?void 0:k.pages)||[],m=((y=a.state.data)==null?void 0:y.pageParams)||[];let p={pages:[],pageParams:[]},x=0;const h=async()=>{let C=!1;const j=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(a.signal.aborted?C=!0:a.signal.addEventListener("abort",()=>{C=!0}),a.signal)})},S=Fb(a.options,a.fetchOptions),v=async(N,M,P)=>{if(C)return Promise.reject();if(M==null&&N.pages.length)return Promise.resolve(N);const z=(()=>{const U={client:a.client,queryKey:a.queryKey,pageParam:M,direction:P?"backward":"forward",meta:a.options.meta};return j(U),U})(),q=await S(z),{maxPages:H}=a.options,ue=P?G2:Q2;return{pages:ue(N.pages,q,H),pageParams:ue(N.pageParams,M,H)}};if(o&&d.length){const N=o==="backward",M=N?aS:a0,P={pages:d,pageParams:m},L=M(r,P);p=await v(P,L,N)}else{const N=t??d.length;do{const M=x===0?m[0]??r.initialPageParam:a0(r,p);if(x>0&&M==null)break;p=await v(p,M),x++}while(x<N)}return p};a.options.persister?a.fetchFn=()=>{var C,j;return(j=(C=a.options).persister)==null?void 0:j.call(C,h,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},l)}:a.fetchFn=h}}}function a0(t,{pages:a,pageParams:l}){const r=a.length-1;return a.length>0?t.getNextPageParam(a[r],a,l[r],l):void 0}function aS(t,{pages:a,pageParams:l}){var r;return a.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,a[0],a,l[0],l):void 0}var pt,an,nn,Il,$l,ln,Bl,Hl,ob,nS=(ob=class{constructor(t={}){Ae(this,pt);Ae(this,an);Ae(this,nn);Ae(this,Il);Ae(this,$l);Ae(this,ln);Ae(this,Bl);Ae(this,Hl);ve(this,pt,t.queryCache||new eS),ve(this,an,t.mutationCache||new sS),ve(this,nn,t.defaultOptions||{}),ve(this,Il,new Map),ve(this,$l,new Map),ve(this,ln,0)}mount(){Qo(this,ln)._++,Q(this,ln)===1&&(ve(this,Bl,kf.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,pt).onFocus())})),ve(this,Hl,cc.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,pt).onOnline())})))}unmount(){var t,a;Qo(this,ln)._--,Q(this,ln)===0&&((t=Q(this,Bl))==null||t.call(this),ve(this,Bl,void 0),(a=Q(this,Hl))==null||a.call(this),ve(this,Hl,void 0))}isFetching(t){return Q(this,pt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,an).findAll({...t,status:"pending"}).length}getQueryData(t){var l;const a=this.defaultQueryOptions({queryKey:t});return(l=Q(this,pt).get(a.queryHash))==null?void 0:l.state.data}ensureQueryData(t){const a=this.defaultQueryOptions(t),l=Q(this,pt).build(this,a),r=l.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&l.isStaleByTime(mn(a.staleTime,l))&&this.prefetchQuery(a),Promise.resolve(r))}getQueriesData(t){return Q(this,pt).findAll(t).map(({queryKey:a,state:l})=>{const r=l.data;return[a,r]})}setQueryData(t,a,l){const r=this.defaultQueryOptions({queryKey:t}),o=Q(this,pt).get(r.queryHash),d=o==null?void 0:o.state.data,m=B2(a,d);if(m!==void 0)return Q(this,pt).build(this,r).setData(m,{...l,manual:!0})}setQueriesData(t,a,l){return Ct.batch(()=>Q(this,pt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,a,l)]))}getQueryState(t){var l;const a=this.defaultQueryOptions({queryKey:t});return(l=Q(this,pt).get(a.queryHash))==null?void 0:l.state}removeQueries(t){const a=Q(this,pt);Ct.batch(()=>{a.findAll(t).forEach(l=>{a.remove(l)})})}resetQueries(t,a){const l=Q(this,pt);return Ct.batch(()=>(l.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},a)))}cancelQueries(t,a={}){const l={revert:!0,...a},r=Ct.batch(()=>Q(this,pt).findAll(t).map(o=>o.cancel(l)));return Promise.all(r).then(Kt).catch(Kt)}invalidateQueries(t,a={}){return Ct.batch(()=>(Q(this,pt).findAll(t).forEach(l=>{l.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},a)))}refetchQueries(t,a={}){const l={...a,cancelRefetch:a.cancelRefetch??!0},r=Ct.batch(()=>Q(this,pt).findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,l);return l.throwOnError||(d=d.catch(Kt)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(r).then(Kt)}fetchQuery(t){const a=this.defaultQueryOptions(t);a.retry===void 0&&(a.retry=!1);const l=Q(this,pt).build(this,a);return l.isStaleByTime(mn(a.staleTime,l))?l.fetch(a):Promise.resolve(l.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Kt).catch(Kt)}fetchInfiniteQuery(t){return t.behavior=s0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Kt).catch(Kt)}ensureInfiniteQueryData(t){return t.behavior=s0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return cc.isOnline()?Q(this,an).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,pt)}getMutationCache(){return Q(this,an)}getDefaultOptions(){return Q(this,nn)}setDefaultOptions(t){ve(this,nn,t)}setQueryDefaults(t,a){Q(this,Il).set(Kn(t),{queryKey:t,defaultOptions:a})}getQueryDefaults(t){const a=[...Q(this,Il).values()],l={};return a.forEach(r=>{fi(t,r.queryKey)&&Object.assign(l,r.defaultOptions)}),l}setMutationDefaults(t,a){Q(this,$l).set(Kn(t),{mutationKey:t,defaultOptions:a})}getMutationDefaults(t){const a=[...Q(this,$l).values()],l={};return a.forEach(r=>{fi(t,r.mutationKey)&&Object.assign(l,r.defaultOptions)}),l}defaultQueryOptions(t){if(t._defaulted)return t;const a={...Q(this,nn).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return a.queryHash||(a.queryHash=Sf(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Cf&&(a.enabled=!1),a}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,nn).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,pt).clear(),Q(this,an).clear()}},pt=new WeakMap,an=new WeakMap,nn=new WeakMap,Il=new WeakMap,$l=new WeakMap,ln=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,ob),es,Qe,yi,Gt,$n,Ql,rn,on,wi,Gl,Kl,Bn,Hn,cn,Vl,tt,oi,Vm,Ym,Wm,Xm,Zm,Jm,ef,$b,cb,lS=(cb=class extends Jl{constructor(a,l){super();Ae(this,tt);Ae(this,es);Ae(this,Qe);Ae(this,yi);Ae(this,Gt);Ae(this,$n);Ae(this,Ql);Ae(this,rn);Ae(this,on);Ae(this,wi);Ae(this,Gl);Ae(this,Kl);Ae(this,Bn);Ae(this,Hn);Ae(this,cn);Ae(this,Vl,new Set);this.options=l,ve(this,es,a),ve(this,on,null),ve(this,rn,Km()),this.options.experimental_prefetchInRender||Q(this,rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(l)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,Qe).addObserver(this),n0(Q(this,Qe),this.options)?ze(this,tt,oi).call(this):this.updateResult(),ze(this,tt,Xm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tf(Q(this,Qe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tf(Q(this,Qe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ze(this,tt,Zm).call(this),ze(this,tt,Jm).call(this),Q(this,Qe).removeObserver(this)}setOptions(a){const l=this.options,r=Q(this,Qe);if(this.options=Q(this,es).defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Us(this.options.enabled,Q(this,Qe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ze(this,tt,ef).call(this),Q(this,Qe).setOptions(this.options),l._defaulted&&!oc(this.options,l)&&Q(this,es).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,Qe),observer:this});const o=this.hasListeners();o&&l0(Q(this,Qe),r,this.options,l)&&ze(this,tt,oi).call(this),this.updateResult(),o&&(Q(this,Qe)!==r||Us(this.options.enabled,Q(this,Qe))!==Us(l.enabled,Q(this,Qe))||mn(this.options.staleTime,Q(this,Qe))!==mn(l.staleTime,Q(this,Qe)))&&ze(this,tt,Vm).call(this);const d=ze(this,tt,Ym).call(this);o&&(Q(this,Qe)!==r||Us(this.options.enabled,Q(this,Qe))!==Us(l.enabled,Q(this,Qe))||d!==Q(this,cn))&&ze(this,tt,Wm).call(this,d)}getOptimisticResult(a){const l=Q(this,es).getQueryCache().build(Q(this,es),a),r=this.createResult(l,a);return iS(this,r)&&(ve(this,Gt,r),ve(this,Ql,this.options),ve(this,$n,Q(this,Qe).state)),r}getCurrentResult(){return Q(this,Gt)}trackResult(a,l){return new Proxy(a,{get:(r,o)=>(this.trackProp(o),l==null||l(o),Reflect.get(r,o))})}trackProp(a){Q(this,Vl).add(a)}getCurrentQuery(){return Q(this,Qe)}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const l=Q(this,es).defaultQueryOptions(a),r=Q(this,es).getQueryCache().build(Q(this,es),l);return r.fetch().then(()=>this.createResult(r,l))}fetch(a){return ze(this,tt,oi).call(this,{...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Gt)))}createResult(a,l){var H;const r=Q(this,Qe),o=this.options,d=Q(this,Gt),m=Q(this,$n),p=Q(this,Ql),h=a!==r?a.state:Q(this,yi),{state:g}=a;let b={...g},w=!1,k;if(l._optimisticResults){const ue=this.hasListeners(),U=!ue&&n0(a,l),I=ue&&l0(a,r,l,o);(U||I)&&(b={...b,...Ub(g.data,a.options)}),l._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:y,errorUpdatedAt:C,status:j}=b;k=b.data;let S=!1;if(l.placeholderData!==void 0&&k===void 0&&j==="pending"){let ue;d!=null&&d.isPlaceholderData&&l.placeholderData===(p==null?void 0:p.placeholderData)?(ue=d.data,S=!0):ue=typeof l.placeholderData=="function"?l.placeholderData((H=Q(this,Kl))==null?void 0:H.state.data,Q(this,Kl)):l.placeholderData,ue!==void 0&&(j="success",k=Gm(d==null?void 0:d.data,ue,l),w=!0)}if(l.select&&k!==void 0&&!S)if(d&&k===(m==null?void 0:m.data)&&l.select===Q(this,wi))k=Q(this,Gl);else try{ve(this,wi,l.select),k=l.select(k),k=Gm(d==null?void 0:d.data,k,l),ve(this,Gl,k),ve(this,on,null)}catch(ue){ve(this,on,ue)}Q(this,on)&&(y=Q(this,on),k=Q(this,Gl),C=Date.now(),j="error");const v=b.fetchStatus==="fetching",N=j==="pending",M=j==="error",P=N&&v,L=k!==void 0,q={status:j,fetchStatus:b.fetchStatus,isPending:N,isSuccess:j==="success",isError:M,isInitialLoading:P,isLoading:P,data:k,dataUpdatedAt:b.dataUpdatedAt,error:y,errorUpdatedAt:C,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>h.dataUpdateCount||b.errorUpdateCount>h.errorUpdateCount,isFetching:v,isRefetching:v&&!N,isLoadingError:M&&!L,isPaused:b.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:M&&L,isStale:Ef(a,l),refetch:this.refetch,promise:Q(this,rn)};if(this.options.experimental_prefetchInRender){const ue=Y=>{q.status==="error"?Y.reject(q.error):q.data!==void 0&&Y.resolve(q.data)},U=()=>{const Y=ve(this,rn,q.promise=Km());ue(Y)},I=Q(this,rn);switch(I.status){case"pending":a.queryHash===r.queryHash&&ue(I);break;case"fulfilled":(q.status==="error"||q.data!==I.value)&&U();break;case"rejected":(q.status!=="error"||q.error!==I.reason)&&U();break}}return q}updateResult(){const a=Q(this,Gt),l=this.createResult(Q(this,Qe),this.options);if(ve(this,$n,Q(this,Qe).state),ve(this,Ql,this.options),Q(this,$n).data!==void 0&&ve(this,Kl,Q(this,Qe)),oc(l,a))return;ve(this,Gt,l);const r=()=>{if(!a)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!Q(this,Vl).size)return!0;const m=new Set(d??Q(this,Vl));return this.options.throwOnError&&m.add("error"),Object.keys(Q(this,Gt)).some(p=>{const x=p;return Q(this,Gt)[x]!==a[x]&&m.has(x)})};ze(this,tt,$b).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ze(this,tt,Xm).call(this)}},es=new WeakMap,Qe=new WeakMap,yi=new WeakMap,Gt=new WeakMap,$n=new WeakMap,Ql=new WeakMap,rn=new WeakMap,on=new WeakMap,wi=new WeakMap,Gl=new WeakMap,Kl=new WeakMap,Bn=new WeakMap,Hn=new WeakMap,cn=new WeakMap,Vl=new WeakMap,tt=new WeakSet,oi=function(a){ze(this,tt,ef).call(this);let l=Q(this,Qe).fetch(this.options,a);return a!=null&&a.throwOnError||(l=l.catch(Kt)),l},Vm=function(){ze(this,tt,Zm).call(this);const a=mn(this.options.staleTime,Q(this,Qe));if(Gn||Q(this,Gt).isStale||!Hm(a))return;const r=Pb(Q(this,Gt).dataUpdatedAt,a)+1;ve(this,Bn,setTimeout(()=>{Q(this,Gt).isStale||this.updateResult()},r))},Ym=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,Qe)):this.options.refetchInterval)??!1},Wm=function(a){ze(this,tt,Jm).call(this),ve(this,cn,a),!(Gn||Us(this.options.enabled,Q(this,Qe))===!1||!Hm(Q(this,cn))||Q(this,cn)===0)&&ve(this,Hn,setInterval(()=>{(this.options.refetchIntervalInBackground||kf.isFocused())&&ze(this,tt,oi).call(this)},Q(this,cn)))},Xm=function(){ze(this,tt,Vm).call(this),ze(this,tt,Wm).call(this,ze(this,tt,Ym).call(this))},Zm=function(){Q(this,Bn)&&(clearTimeout(Q(this,Bn)),ve(this,Bn,void 0))},Jm=function(){Q(this,Hn)&&(clearInterval(Q(this,Hn)),ve(this,Hn,void 0))},ef=function(){const a=Q(this,es).getQueryCache().build(Q(this,es),this.options);if(a===Q(this,Qe))return;const l=Q(this,Qe);ve(this,Qe,a),ve(this,yi,a.state),this.hasListeners()&&(l==null||l.removeObserver(this),a.addObserver(this))},$b=function(a){Ct.batch(()=>{a.listeners&&this.listeners.forEach(l=>{l(Q(this,Gt))}),Q(this,es).getQueryCache().notify({query:Q(this,Qe),type:"observerResultsUpdated"})})},cb);function rS(t,a){return Us(a.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&a.retryOnMount===!1)}function n0(t,a){return rS(t,a)||t.state.data!==void 0&&tf(t,a,a.refetchOnMount)}function tf(t,a,l){if(Us(a.enabled,t)!==!1&&mn(a.staleTime,t)!=="static"){const r=typeof l=="function"?l(t):l;return r==="always"||r!==!1&&Ef(t,a)}return!1}function l0(t,a,l,r){return(t!==a||Us(r.enabled,t)===!1)&&(!l.suspense||t.state.status!=="error")&&Ef(t,l)}function Ef(t,a){return Us(a.enabled,t)!==!1&&t.isStaleByTime(mn(a.staleTime,t))}function iS(t,a){return!oc(t.getCurrentResult(),a)}var dn,un,ts,ja,Ca,sc,sf,db,oS=(db=class extends Jl{constructor(l,r){super();Ae(this,Ca);Ae(this,dn);Ae(this,un);Ae(this,ts);Ae(this,ja);ve(this,dn,l),this.setOptions(r),this.bindMethods(),ze(this,Ca,sc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(l){var o;const r=this.options;this.options=Q(this,dn).defaultMutationOptions(l),oc(this.options,r)||Q(this,dn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Q(this,ts),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Kn(r.mutationKey)!==Kn(this.options.mutationKey)?this.reset():((o=Q(this,ts))==null?void 0:o.state.status)==="pending"&&Q(this,ts).setOptions(this.options)}onUnsubscribe(){var l;this.hasListeners()||(l=Q(this,ts))==null||l.removeObserver(this)}onMutationUpdate(l){ze(this,Ca,sc).call(this),ze(this,Ca,sf).call(this,l)}getCurrentResult(){return Q(this,un)}reset(){var l;(l=Q(this,ts))==null||l.removeObserver(this),ve(this,ts,void 0),ze(this,Ca,sc).call(this),ze(this,Ca,sf).call(this)}mutate(l,r){var o;return ve(this,ja,r),(o=Q(this,ts))==null||o.removeObserver(this),ve(this,ts,Q(this,dn).getMutationCache().build(Q(this,dn),this.options)),Q(this,ts).addObserver(this),Q(this,ts).execute(l)}},dn=new WeakMap,un=new WeakMap,ts=new WeakMap,ja=new WeakMap,Ca=new WeakSet,sc=function(){var r;const l=((r=Q(this,ts))==null?void 0:r.state)??Ib();ve(this,un,{...l,isPending:l.status==="pending",isSuccess:l.status==="success",isError:l.status==="error",isIdle:l.status==="idle",mutate:this.mutate,reset:this.reset})},sf=function(l){Ct.batch(()=>{var r,o,d,m,p,x,h,g;if(Q(this,ja)&&this.hasListeners()){const b=Q(this,un).variables,w=Q(this,un).context;(l==null?void 0:l.type)==="success"?((o=(r=Q(this,ja)).onSuccess)==null||o.call(r,l.data,b,w),(m=(d=Q(this,ja)).onSettled)==null||m.call(d,l.data,null,b,w)):(l==null?void 0:l.type)==="error"&&((x=(p=Q(this,ja)).onError)==null||x.call(p,l.error,b,w),(g=(h=Q(this,ja)).onSettled)==null||g.call(h,void 0,l.error,b,w))}this.listeners.forEach(b=>{b(Q(this,un))})})},db),Bb=A.createContext(void 0),Ne=t=>{const a=A.useContext(Bb);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},cS=({client:t,children:a})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Bb.Provider,{value:t,children:a})),Hb=A.createContext(!1),dS=()=>A.useContext(Hb);Hb.Provider;function uS(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var mS=A.createContext(uS()),fS=()=>A.useContext(mS),hS=(t,a)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(a.isReset()||(t.retryOnMount=!1))},xS=t=>{A.useEffect(()=>{t.clearReset()},[t])},pS=({result:t,errorResetBoundary:a,throwOnError:l,query:r,suspense:o})=>t.isError&&!a.isReset()&&!t.isFetching&&r&&(o&&t.data===void 0||Lb(l,[t.error,r])),gS=t=>{if(t.suspense){const a=r=>r==="static"?r:Math.max(r??1e3,1e3),l=t.staleTime;t.staleTime=typeof l=="function"?(...r)=>a(l(...r)):a(l),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},bS=(t,a)=>t.isLoading&&t.isFetching&&!a,yS=(t,a)=>(t==null?void 0:t.suspense)&&a.isPending,r0=(t,a,l)=>a.fetchOptimistic(t).catch(()=>{l.clearReset()});function wS(t,a,l){var b,w,k,y,C;const r=dS(),o=fS(),d=Ne(),m=d.defaultQueryOptions(t);(w=(b=d.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||w.call(b,m),m._optimisticResults=r?"isRestoring":"optimistic",gS(m),hS(m,o),xS(o);const p=!d.getQueryCache().get(m.queryHash),[x]=A.useState(()=>new a(d,m)),h=x.getOptimisticResult(m),g=!r&&t.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(j=>{const S=g?x.subscribe(Ct.batchCalls(j)):Kt;return x.updateResult(),S},[x,g]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),A.useEffect(()=>{x.setOptions(m)},[m,x]),yS(m,h))throw r0(m,x,o);if(pS({result:h,errorResetBoundary:o,throwOnError:m.throwOnError,query:d.getQueryCache().get(m.queryHash),suspense:m.suspense}))throw h.error;if((y=(k=d.getDefaultOptions().queries)==null?void 0:k._experimental_afterQuery)==null||y.call(k,m,h),m.experimental_prefetchInRender&&!Gn&&bS(h,r)){const j=p?r0(m,x,o):(C=d.getQueryCache().get(m.queryHash))==null?void 0:C.promise;j==null||j.catch(Kt).finally(()=>{x.updateResult()})}return m.notifyOnChangeProps?h:x.trackResult(h)}function Le(t,a){return wS(t,lS)}function le(t,a){const l=Ne(),[r]=A.useState(()=>new oS(l,t));A.useEffect(()=>{r.setOptions(t)},[r,t]);const o=A.useSyncExternalStore(A.useCallback(m=>r.subscribe(Ct.batchCalls(m)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d=A.useCallback((m,p)=>{r.mutate(m,p).catch(Kt)},[r]);if(o.error&&Lb(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}const Ee=new nS;function Qb(t,a){return function(){return t.apply(a,arguments)}}const{toString:vS}=Object.prototype,{getPrototypeOf:Af}=Object,{iterator:Tc,toStringTag:Gb}=Symbol,Pc=(t=>a=>{const l=vS.call(a);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),Hs=t=>(t=t.toLowerCase(),a=>Pc(a)===t),Mc=t=>a=>typeof a===t,{isArray:er}=Array,hi=Mc("undefined");function jS(t){return t!==null&&!hi(t)&&t.constructor!==null&&!hi(t.constructor)&&ss(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Kb=Hs("ArrayBuffer");function NS(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&Kb(t.buffer),a}const SS=Mc("string"),ss=Mc("function"),Vb=Mc("number"),Fc=t=>t!==null&&typeof t=="object",CS=t=>t===!0||t===!1,ac=t=>{if(Pc(t)!=="object")return!1;const a=Af(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Gb in t)&&!(Tc in t)},kS=Hs("Date"),ES=Hs("File"),AS=Hs("Blob"),OS=Hs("FileList"),RS=t=>Fc(t)&&ss(t.pipe),TS=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||ss(t.append)&&((a=Pc(t))==="formdata"||a==="object"&&ss(t.toString)&&t.toString()==="[object FormData]"))},PS=Hs("URLSearchParams"),[MS,FS,LS,DS]=["ReadableStream","Request","Response","Headers"].map(Hs),_S=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ni(t,a,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),er(t))for(r=0,o=t.length;r<o;r++)a.call(null,t[r],r,t);else{const d=l?Object.getOwnPropertyNames(t):Object.keys(t),m=d.length;let p;for(r=0;r<m;r++)p=d[r],a.call(null,t[p],p,t)}}function Yb(t,a){a=a.toLowerCase();const l=Object.keys(t);let r=l.length,o;for(;r-- >0;)if(o=l[r],a===o.toLowerCase())return o;return null}const Dn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Wb=t=>!hi(t)&&t!==Dn;function af(){const{caseless:t}=Wb(this)&&this||{},a={},l=(r,o)=>{const d=t&&Yb(a,o)||o;ac(a[d])&&ac(r)?a[d]=af(a[d],r):ac(r)?a[d]=af({},r):er(r)?a[d]=r.slice():a[d]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Ni(arguments[r],l);return a}const qS=(t,a,l,{allOwnKeys:r}={})=>(Ni(a,(o,d)=>{l&&ss(o)?t[d]=Qb(o,l):t[d]=o},{allOwnKeys:r}),t),zS=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),US=(t,a,l,r)=>{t.prototype=Object.create(a.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),l&&Object.assign(t.prototype,l)},IS=(t,a,l,r)=>{let o,d,m;const p={};if(a=a||{},t==null)return a;do{for(o=Object.getOwnPropertyNames(t),d=o.length;d-- >0;)m=o[d],(!r||r(m,t,a))&&!p[m]&&(a[m]=t[m],p[m]=!0);t=l!==!1&&Af(t)}while(t&&(!l||l(t,a))&&t!==Object.prototype);return a},$S=(t,a,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=a.length;const r=t.indexOf(a,l);return r!==-1&&r===l},BS=t=>{if(!t)return null;if(er(t))return t;let a=t.length;if(!Vb(a))return null;const l=new Array(a);for(;a-- >0;)l[a]=t[a];return l},HS=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Af(Uint8Array)),QS=(t,a)=>{const r=(t&&t[Tc]).call(t);let o;for(;(o=r.next())&&!o.done;){const d=o.value;a.call(t,d[0],d[1])}},GS=(t,a)=>{let l;const r=[];for(;(l=t.exec(a))!==null;)r.push(l);return r},KS=Hs("HTMLFormElement"),VS=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,r,o){return r.toUpperCase()+o}),i0=(({hasOwnProperty:t})=>(a,l)=>t.call(a,l))(Object.prototype),YS=Hs("RegExp"),Xb=(t,a)=>{const l=Object.getOwnPropertyDescriptors(t),r={};Ni(l,(o,d)=>{let m;(m=a(o,d,t))!==!1&&(r[d]=m||o)}),Object.defineProperties(t,r)},WS=t=>{Xb(t,(a,l)=>{if(ss(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const r=t[l];if(ss(r)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},XS=(t,a)=>{const l={},r=o=>{o.forEach(d=>{l[d]=!0})};return er(t)?r(t):r(String(t).split(a)),l},ZS=()=>{},JS=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function eC(t){return!!(t&&ss(t.append)&&t[Gb]==="FormData"&&t[Tc])}const tC=t=>{const a=new Array(10),l=(r,o)=>{if(Fc(r)){if(a.indexOf(r)>=0)return;if(!("toJSON"in r)){a[o]=r;const d=er(r)?[]:{};return Ni(r,(m,p)=>{const x=l(m,o+1);!hi(x)&&(d[p]=x)}),a[o]=void 0,d}}return r};return l(t,0)},sC=Hs("AsyncFunction"),aC=t=>t&&(Fc(t)||ss(t))&&ss(t.then)&&ss(t.catch),Zb=((t,a)=>t?setImmediate:a?((l,r)=>(Dn.addEventListener("message",({source:o,data:d})=>{o===Dn&&d===l&&r.length&&r.shift()()},!1),o=>{r.push(o),Dn.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",ss(Dn.postMessage)),nC=typeof queueMicrotask<"u"?queueMicrotask.bind(Dn):typeof process<"u"&&process.nextTick||Zb,lC=t=>t!=null&&ss(t[Tc]),me={isArray:er,isArrayBuffer:Kb,isBuffer:jS,isFormData:TS,isArrayBufferView:NS,isString:SS,isNumber:Vb,isBoolean:CS,isObject:Fc,isPlainObject:ac,isReadableStream:MS,isRequest:FS,isResponse:LS,isHeaders:DS,isUndefined:hi,isDate:kS,isFile:ES,isBlob:AS,isRegExp:YS,isFunction:ss,isStream:RS,isURLSearchParams:PS,isTypedArray:HS,isFileList:OS,forEach:Ni,merge:af,extend:qS,trim:_S,stripBOM:zS,inherits:US,toFlatObject:IS,kindOf:Pc,kindOfTest:Hs,endsWith:$S,toArray:BS,forEachEntry:QS,matchAll:GS,isHTMLForm:KS,hasOwnProperty:i0,hasOwnProp:i0,reduceDescriptors:Xb,freezeMethods:WS,toObjectSet:XS,toCamelCase:VS,noop:ZS,toFiniteNumber:JS,findKey:Yb,global:Dn,isContextDefined:Wb,isSpecCompliantForm:eC,toJSONObject:tC,isAsyncFn:sC,isThenable:aC,setImmediate:Zb,asap:nC,isIterable:lC};function _e(t,a,l,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),l&&(this.config=l),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}me.inherits(_e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}});const Jb=_e.prototype,ey={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ey[t]={value:t}});Object.defineProperties(_e,ey);Object.defineProperty(Jb,"isAxiosError",{value:!0});_e.from=(t,a,l,r,o,d)=>{const m=Object.create(Jb);return me.toFlatObject(t,m,function(x){return x!==Error.prototype},p=>p!=="isAxiosError"),_e.call(m,t.message,a,l,r,o),m.cause=t,m.name=t.name,d&&Object.assign(m,d),m};const rC=null;function nf(t){return me.isPlainObject(t)||me.isArray(t)}function ty(t){return me.endsWith(t,"[]")?t.slice(0,-2):t}function o0(t,a,l){return t?t.concat(a).map(function(o,d){return o=ty(o),!l&&d?"["+o+"]":o}).join(l?".":""):a}function iC(t){return me.isArray(t)&&!t.some(nf)}const oC=me.toFlatObject(me,{},null,function(a){return/^is[A-Z]/.test(a)});function Lc(t,a,l){if(!me.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,l=me.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,j){return!me.isUndefined(j[C])});const r=l.metaTokens,o=l.visitor||g,d=l.dots,m=l.indexes,x=(l.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(a);if(!me.isFunction(o))throw new TypeError("visitor must be a function");function h(y){if(y===null)return"";if(me.isDate(y))return y.toISOString();if(!x&&me.isBlob(y))throw new _e("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(y)||me.isTypedArray(y)?x&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function g(y,C,j){let S=y;if(y&&!j&&typeof y=="object"){if(me.endsWith(C,"{}"))C=r?C:C.slice(0,-2),y=JSON.stringify(y);else if(me.isArray(y)&&iC(y)||(me.isFileList(y)||me.endsWith(C,"[]"))&&(S=me.toArray(y)))return C=ty(C),S.forEach(function(N,M){!(me.isUndefined(N)||N===null)&&a.append(m===!0?o0([C],M,d):m===null?C:C+"[]",h(N))}),!1}return nf(y)?!0:(a.append(o0(j,C,d),h(y)),!1)}const b=[],w=Object.assign(oC,{defaultVisitor:g,convertValue:h,isVisitable:nf});function k(y,C){if(!me.isUndefined(y)){if(b.indexOf(y)!==-1)throw Error("Circular reference detected in "+C.join("."));b.push(y),me.forEach(y,function(S,v){(!(me.isUndefined(S)||S===null)&&o.call(a,S,me.isString(v)?v.trim():v,C,w))===!0&&k(S,C?C.concat(v):[v])}),b.pop()}}if(!me.isObject(t))throw new TypeError("data must be an object");return k(t),a}function c0(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return a[r]})}function Of(t,a){this._pairs=[],t&&Lc(t,this,a)}const sy=Of.prototype;sy.append=function(a,l){this._pairs.push([a,l])};sy.toString=function(a){const l=a?function(r){return a.call(this,r,c0)}:c0;return this._pairs.map(function(o){return l(o[0])+"="+l(o[1])},"").join("&")};function cC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ay(t,a,l){if(!a)return t;const r=l&&l.encode||cC;me.isFunction(l)&&(l={serialize:l});const o=l&&l.serialize;let d;if(o?d=o(a,l):d=me.isURLSearchParams(a)?a.toString():new Of(a,l).toString(r),d){const m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class d0{constructor(){this.handlers=[]}use(a,l,r){return this.handlers.push({fulfilled:a,rejected:l,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){me.forEach(this.handlers,function(r){r!==null&&a(r)})}}const ny={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dC=typeof URLSearchParams<"u"?URLSearchParams:Of,uC=typeof FormData<"u"?FormData:null,mC=typeof Blob<"u"?Blob:null,fC={isBrowser:!0,classes:{URLSearchParams:dC,FormData:uC,Blob:mC},protocols:["http","https","file","blob","url","data"]},Rf=typeof window<"u"&&typeof document<"u",lf=typeof navigator=="object"&&navigator||void 0,hC=Rf&&(!lf||["ReactNative","NativeScript","NS"].indexOf(lf.product)<0),xC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pC=Rf&&window.location.href||"http://localhost",gC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Rf,hasStandardBrowserEnv:hC,hasStandardBrowserWebWorkerEnv:xC,navigator:lf,origin:pC},Symbol.toStringTag,{value:"Module"})),$t={...gC,...fC};function bC(t,a){return Lc(t,new $t.classes.URLSearchParams,Object.assign({visitor:function(l,r,o,d){return $t.isNode&&me.isBuffer(l)?(this.append(r,l.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},a))}function yC(t){return me.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function wC(t){const a={},l=Object.keys(t);let r;const o=l.length;let d;for(r=0;r<o;r++)d=l[r],a[d]=t[d];return a}function ly(t){function a(l,r,o,d){let m=l[d++];if(m==="__proto__")return!0;const p=Number.isFinite(+m),x=d>=l.length;return m=!m&&me.isArray(o)?o.length:m,x?(me.hasOwnProp(o,m)?o[m]=[o[m],r]:o[m]=r,!p):((!o[m]||!me.isObject(o[m]))&&(o[m]=[]),a(l,r,o[m],d)&&me.isArray(o[m])&&(o[m]=wC(o[m])),!p)}if(me.isFormData(t)&&me.isFunction(t.entries)){const l={};return me.forEachEntry(t,(r,o)=>{a(yC(r),o,l,0)}),l}return null}function vC(t,a,l){if(me.isString(t))try{return(a||JSON.parse)(t),me.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(l||JSON.stringify)(t)}const Si={transitional:ny,adapter:["xhr","http","fetch"],transformRequest:[function(a,l){const r=l.getContentType()||"",o=r.indexOf("application/json")>-1,d=me.isObject(a);if(d&&me.isHTMLForm(a)&&(a=new FormData(a)),me.isFormData(a))return o?JSON.stringify(ly(a)):a;if(me.isArrayBuffer(a)||me.isBuffer(a)||me.isStream(a)||me.isFile(a)||me.isBlob(a)||me.isReadableStream(a))return a;if(me.isArrayBufferView(a))return a.buffer;if(me.isURLSearchParams(a))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let p;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return bC(a,this.formSerializer).toString();if((p=me.isFileList(a))||r.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return Lc(p?{"files[]":a}:a,x&&new x,this.formSerializer)}}return d||o?(l.setContentType("application/json",!1),vC(a)):a}],transformResponse:[function(a){const l=this.transitional||Si.transitional,r=l&&l.forcedJSONParsing,o=this.responseType==="json";if(me.isResponse(a)||me.isReadableStream(a))return a;if(a&&me.isString(a)&&(r&&!this.responseType||o)){const m=!(l&&l.silentJSONParsing)&&o;try{return JSON.parse(a)}catch(p){if(m)throw p.name==="SyntaxError"?_e.from(p,_e.ERR_BAD_RESPONSE,this,null,this.response):p}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$t.classes.FormData,Blob:$t.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],t=>{Si.headers[t]={}});const jC=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NC=t=>{const a={};let l,r,o;return t&&t.split(`
`).forEach(function(m){o=m.indexOf(":"),l=m.substring(0,o).trim().toLowerCase(),r=m.substring(o+1).trim(),!(!l||a[l]&&jC[l])&&(l==="set-cookie"?a[l]?a[l].push(r):a[l]=[r]:a[l]=a[l]?a[l]+", "+r:r)}),a},u0=Symbol("internals");function ii(t){return t&&String(t).trim().toLowerCase()}function nc(t){return t===!1||t==null?t:me.isArray(t)?t.map(nc):String(t)}function SC(t){const a=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=l.exec(t);)a[r[1]]=r[2];return a}const CC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Cm(t,a,l,r,o){if(me.isFunction(r))return r.call(this,a,l);if(o&&(a=l),!!me.isString(a)){if(me.isString(r))return a.indexOf(r)!==-1;if(me.isRegExp(r))return r.test(a)}}function kC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,l,r)=>l.toUpperCase()+r)}function EC(t,a){const l=me.toCamelCase(" "+a);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+l,{value:function(o,d,m){return this[r].call(this,a,o,d,m)},configurable:!0})})}let as=class{constructor(a){a&&this.set(a)}set(a,l,r){const o=this;function d(p,x,h){const g=ii(x);if(!g)throw new Error("header name must be a non-empty string");const b=me.findKey(o,g);(!b||o[b]===void 0||h===!0||h===void 0&&o[b]!==!1)&&(o[b||x]=nc(p))}const m=(p,x)=>me.forEach(p,(h,g)=>d(h,g,x));if(me.isPlainObject(a)||a instanceof this.constructor)m(a,l);else if(me.isString(a)&&(a=a.trim())&&!CC(a))m(NC(a),l);else if(me.isObject(a)&&me.isIterable(a)){let p={},x,h;for(const g of a){if(!me.isArray(g))throw TypeError("Object iterator must return a key-value pair");p[h=g[0]]=(x=p[h])?me.isArray(x)?[...x,g[1]]:[x,g[1]]:g[1]}m(p,l)}else a!=null&&d(l,a,r);return this}get(a,l){if(a=ii(a),a){const r=me.findKey(this,a);if(r){const o=this[r];if(!l)return o;if(l===!0)return SC(o);if(me.isFunction(l))return l.call(this,o,r);if(me.isRegExp(l))return l.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,l){if(a=ii(a),a){const r=me.findKey(this,a);return!!(r&&this[r]!==void 0&&(!l||Cm(this,this[r],r,l)))}return!1}delete(a,l){const r=this;let o=!1;function d(m){if(m=ii(m),m){const p=me.findKey(r,m);p&&(!l||Cm(r,r[p],p,l))&&(delete r[p],o=!0)}}return me.isArray(a)?a.forEach(d):d(a),o}clear(a){const l=Object.keys(this);let r=l.length,o=!1;for(;r--;){const d=l[r];(!a||Cm(this,this[d],d,a,!0))&&(delete this[d],o=!0)}return o}normalize(a){const l=this,r={};return me.forEach(this,(o,d)=>{const m=me.findKey(r,d);if(m){l[m]=nc(o),delete l[d];return}const p=a?kC(d):String(d).trim();p!==d&&delete l[d],l[p]=nc(o),r[p]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const l=Object.create(null);return me.forEach(this,(r,o)=>{r!=null&&r!==!1&&(l[o]=a&&me.isArray(r)?r.join(", "):r)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,l])=>a+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...l){const r=new this(a);return l.forEach(o=>r.set(o)),r}static accessor(a){const r=(this[u0]=this[u0]={accessors:{}}).accessors,o=this.prototype;function d(m){const p=ii(m);r[p]||(EC(o,m),r[p]=!0)}return me.isArray(a)?a.forEach(d):d(a),this}};as.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(as.prototype,({value:t},a)=>{let l=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(r){this[l]=r}}});me.freezeMethods(as);function km(t,a){const l=this||Si,r=a||l,o=as.from(r.headers);let d=r.data;return me.forEach(t,function(p){d=p.call(l,d,o.normalize(),a?a.status:void 0)}),o.normalize(),d}function ry(t){return!!(t&&t.__CANCEL__)}function tr(t,a,l){_e.call(this,t??"canceled",_e.ERR_CANCELED,a,l),this.name="CanceledError"}me.inherits(tr,_e,{__CANCEL__:!0});function iy(t,a,l){const r=l.config.validateStatus;!l.status||!r||r(l.status)?t(l):a(new _e("Request failed with status code "+l.status,[_e.ERR_BAD_REQUEST,_e.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function AC(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function OC(t,a){t=t||10;const l=new Array(t),r=new Array(t);let o=0,d=0,m;return a=a!==void 0?a:1e3,function(x){const h=Date.now(),g=r[d];m||(m=h),l[o]=x,r[o]=h;let b=d,w=0;for(;b!==o;)w+=l[b++],b=b%t;if(o=(o+1)%t,o===d&&(d=(d+1)%t),h-m<a)return;const k=g&&h-g;return k?Math.round(w*1e3/k):void 0}}function RC(t,a){let l=0,r=1e3/a,o,d;const m=(h,g=Date.now())=>{l=g,o=null,d&&(clearTimeout(d),d=null),t.apply(null,h)};return[(...h)=>{const g=Date.now(),b=g-l;b>=r?m(h,g):(o=h,d||(d=setTimeout(()=>{d=null,m(o)},r-b)))},()=>o&&m(o)]}const dc=(t,a,l=3)=>{let r=0;const o=OC(50,250);return RC(d=>{const m=d.loaded,p=d.lengthComputable?d.total:void 0,x=m-r,h=o(x),g=m<=p;r=m;const b={loaded:m,total:p,progress:p?m/p:void 0,bytes:x,rate:h||void 0,estimated:h&&p&&g?(p-m)/h:void 0,event:d,lengthComputable:p!=null,[a?"download":"upload"]:!0};t(b)},l)},m0=(t,a)=>{const l=t!=null;return[r=>a[0]({lengthComputable:l,total:t,loaded:r}),a[1]]},f0=t=>(...a)=>me.asap(()=>t(...a)),TC=$t.hasStandardBrowserEnv?((t,a)=>l=>(l=new URL(l,$t.origin),t.protocol===l.protocol&&t.host===l.host&&(a||t.port===l.port)))(new URL($t.origin),$t.navigator&&/(msie|trident)/i.test($t.navigator.userAgent)):()=>!0,PC=$t.hasStandardBrowserEnv?{write(t,a,l,r,o,d){const m=[t+"="+encodeURIComponent(a)];me.isNumber(l)&&m.push("expires="+new Date(l).toGMTString()),me.isString(r)&&m.push("path="+r),me.isString(o)&&m.push("domain="+o),d===!0&&m.push("secure"),document.cookie=m.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function MC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function FC(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function oy(t,a,l){let r=!MC(a);return t&&(r||l==!1)?FC(t,a):a}const h0=t=>t instanceof as?{...t}:t;function Vn(t,a){a=a||{};const l={};function r(h,g,b,w){return me.isPlainObject(h)&&me.isPlainObject(g)?me.merge.call({caseless:w},h,g):me.isPlainObject(g)?me.merge({},g):me.isArray(g)?g.slice():g}function o(h,g,b,w){if(me.isUndefined(g)){if(!me.isUndefined(h))return r(void 0,h,b,w)}else return r(h,g,b,w)}function d(h,g){if(!me.isUndefined(g))return r(void 0,g)}function m(h,g){if(me.isUndefined(g)){if(!me.isUndefined(h))return r(void 0,h)}else return r(void 0,g)}function p(h,g,b){if(b in a)return r(h,g);if(b in t)return r(void 0,h)}const x={url:d,method:d,data:d,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:p,headers:(h,g,b)=>o(h0(h),h0(g),b,!0)};return me.forEach(Object.keys(Object.assign({},t,a)),function(g){const b=x[g]||o,w=b(t[g],a[g],g);me.isUndefined(w)&&b!==p||(l[g]=w)}),l}const cy=t=>{const a=Vn({},t);let{data:l,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:d,headers:m,auth:p}=a;a.headers=m=as.from(m),a.url=ay(oy(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),p&&m.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let x;if(me.isFormData(l)){if($t.hasStandardBrowserEnv||$t.hasStandardBrowserWebWorkerEnv)m.setContentType(void 0);else if((x=m.getContentType())!==!1){const[h,...g]=x?x.split(";").map(b=>b.trim()).filter(Boolean):[];m.setContentType([h||"multipart/form-data",...g].join("; "))}}if($t.hasStandardBrowserEnv&&(r&&me.isFunction(r)&&(r=r(a)),r||r!==!1&&TC(a.url))){const h=o&&d&&PC.read(d);h&&m.set(o,h)}return a},LC=typeof XMLHttpRequest<"u",DC=LC&&function(t){return new Promise(function(l,r){const o=cy(t);let d=o.data;const m=as.from(o.headers).normalize();let{responseType:p,onUploadProgress:x,onDownloadProgress:h}=o,g,b,w,k,y;function C(){k&&k(),y&&y(),o.cancelToken&&o.cancelToken.unsubscribe(g),o.signal&&o.signal.removeEventListener("abort",g)}let j=new XMLHttpRequest;j.open(o.method.toUpperCase(),o.url,!0),j.timeout=o.timeout;function S(){if(!j)return;const N=as.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),P={data:!p||p==="text"||p==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:N,config:t,request:j};iy(function(z){l(z),C()},function(z){r(z),C()},P),j=null}"onloadend"in j?j.onloadend=S:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(S)},j.onabort=function(){j&&(r(new _e("Request aborted",_e.ECONNABORTED,t,j)),j=null)},j.onerror=function(){r(new _e("Network Error",_e.ERR_NETWORK,t,j)),j=null},j.ontimeout=function(){let M=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const P=o.transitional||ny;o.timeoutErrorMessage&&(M=o.timeoutErrorMessage),r(new _e(M,P.clarifyTimeoutError?_e.ETIMEDOUT:_e.ECONNABORTED,t,j)),j=null},d===void 0&&m.setContentType(null),"setRequestHeader"in j&&me.forEach(m.toJSON(),function(M,P){j.setRequestHeader(P,M)}),me.isUndefined(o.withCredentials)||(j.withCredentials=!!o.withCredentials),p&&p!=="json"&&(j.responseType=o.responseType),h&&([w,y]=dc(h,!0),j.addEventListener("progress",w)),x&&j.upload&&([b,k]=dc(x),j.upload.addEventListener("progress",b),j.upload.addEventListener("loadend",k)),(o.cancelToken||o.signal)&&(g=N=>{j&&(r(!N||N.type?new tr(null,t,j):N),j.abort(),j=null)},o.cancelToken&&o.cancelToken.subscribe(g),o.signal&&(o.signal.aborted?g():o.signal.addEventListener("abort",g)));const v=AC(o.url);if(v&&$t.protocols.indexOf(v)===-1){r(new _e("Unsupported protocol "+v+":",_e.ERR_BAD_REQUEST,t));return}j.send(d||null)})},_C=(t,a)=>{const{length:l}=t=t?t.filter(Boolean):[];if(a||l){let r=new AbortController,o;const d=function(h){if(!o){o=!0,p();const g=h instanceof Error?h:this.reason;r.abort(g instanceof _e?g:new tr(g instanceof Error?g.message:g))}};let m=a&&setTimeout(()=>{m=null,d(new _e(`timeout ${a} of ms exceeded`,_e.ETIMEDOUT))},a);const p=()=>{t&&(m&&clearTimeout(m),m=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(d):h.removeEventListener("abort",d)}),t=null)};t.forEach(h=>h.addEventListener("abort",d));const{signal:x}=r;return x.unsubscribe=()=>me.asap(p),x}},qC=function*(t,a){let l=t.byteLength;if(l<a){yield t;return}let r=0,o;for(;r<l;)o=r+a,yield t.slice(r,o),r=o},zC=async function*(t,a){for await(const l of UC(t))yield*qC(l,a)},UC=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:l,value:r}=await a.read();if(l)break;yield r}}finally{await a.cancel()}},x0=(t,a,l,r)=>{const o=zC(t,a);let d=0,m,p=x=>{m||(m=!0,r&&r(x))};return new ReadableStream({async pull(x){try{const{done:h,value:g}=await o.next();if(h){p(),x.close();return}let b=g.byteLength;if(l){let w=d+=b;l(w)}x.enqueue(new Uint8Array(g))}catch(h){throw p(h),h}},cancel(x){return p(x),o.return()}},{highWaterMark:2})},Dc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",dy=Dc&&typeof ReadableStream=="function",IC=Dc&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),uy=(t,...a)=>{try{return!!t(...a)}catch{return!1}},$C=dy&&uy(()=>{let t=!1;const a=new Request($t.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),p0=64*1024,rf=dy&&uy(()=>me.isReadableStream(new Response("").body)),uc={stream:rf&&(t=>t.body)};Dc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!uc[a]&&(uc[a]=me.isFunction(t[a])?l=>l[a]():(l,r)=>{throw new _e(`Response type '${a}' is not supported`,_e.ERR_NOT_SUPPORT,r)})})})(new Response);const BC=async t=>{if(t==null)return 0;if(me.isBlob(t))return t.size;if(me.isSpecCompliantForm(t))return(await new Request($t.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(me.isArrayBufferView(t)||me.isArrayBuffer(t))return t.byteLength;if(me.isURLSearchParams(t)&&(t=t+""),me.isString(t))return(await IC(t)).byteLength},HC=async(t,a)=>{const l=me.toFiniteNumber(t.getContentLength());return l??BC(a)},QC=Dc&&(async t=>{let{url:a,method:l,data:r,signal:o,cancelToken:d,timeout:m,onDownloadProgress:p,onUploadProgress:x,responseType:h,headers:g,withCredentials:b="same-origin",fetchOptions:w}=cy(t);h=h?(h+"").toLowerCase():"text";let k=_C([o,d&&d.toAbortSignal()],m),y;const C=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let j;try{if(x&&$C&&l!=="get"&&l!=="head"&&(j=await HC(g,r))!==0){let P=new Request(a,{method:"POST",body:r,duplex:"half"}),L;if(me.isFormData(r)&&(L=P.headers.get("content-type"))&&g.setContentType(L),P.body){const[z,q]=m0(j,dc(f0(x)));r=x0(P.body,p0,z,q)}}me.isString(b)||(b=b?"include":"omit");const S="credentials"in Request.prototype;y=new Request(a,{...w,signal:k,method:l.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:S?b:void 0});let v=await fetch(y);const N=rf&&(h==="stream"||h==="response");if(rf&&(p||N&&C)){const P={};["status","statusText","headers"].forEach(H=>{P[H]=v[H]});const L=me.toFiniteNumber(v.headers.get("content-length")),[z,q]=p&&m0(L,dc(f0(p),!0))||[];v=new Response(x0(v.body,p0,z,()=>{q&&q(),C&&C()}),P)}h=h||"text";let M=await uc[me.findKey(uc,h)||"text"](v,t);return!N&&C&&C(),await new Promise((P,L)=>{iy(P,L,{data:M,headers:as.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:y})})}catch(S){throw C&&C(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new _e("Network Error",_e.ERR_NETWORK,t,y),{cause:S.cause||S}):_e.from(S,S&&S.code,t,y)}}),of={http:rC,xhr:DC,fetch:QC};me.forEach(of,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const g0=t=>`- ${t}`,GC=t=>me.isFunction(t)||t===null||t===!1,my={getAdapter:t=>{t=me.isArray(t)?t:[t];const{length:a}=t;let l,r;const o={};for(let d=0;d<a;d++){l=t[d];let m;if(r=l,!GC(l)&&(r=of[(m=String(l)).toLowerCase()],r===void 0))throw new _e(`Unknown adapter '${m}'`);if(r)break;o[m||"#"+d]=r}if(!r){const d=Object.entries(o).map(([p,x])=>`adapter ${p} `+(x===!1?"is not supported by the environment":"is not available in the build"));let m=a?d.length>1?`since :
`+d.map(g0).join(`
`):" "+g0(d[0]):"as no adapter specified";throw new _e("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return r},adapters:of};function Em(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tr(null,t)}function b0(t){return Em(t),t.headers=as.from(t.headers),t.data=km.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),my.getAdapter(t.adapter||Si.adapter)(t).then(function(r){return Em(t),r.data=km.call(t,t.transformResponse,r),r.headers=as.from(r.headers),r},function(r){return ry(r)||(Em(t),r&&r.response&&(r.response.data=km.call(t,t.transformResponse,r.response),r.response.headers=as.from(r.response.headers))),Promise.reject(r)})}const fy="1.9.0",_c={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{_c[t]=function(r){return typeof r===t||"a"+(a<1?"n ":" ")+t}});const y0={};_c.transitional=function(a,l,r){function o(d,m){return"[Axios v"+fy+"] Transitional option '"+d+"'"+m+(r?". "+r:"")}return(d,m,p)=>{if(a===!1)throw new _e(o(m," has been removed"+(l?" in "+l:"")),_e.ERR_DEPRECATED);return l&&!y0[m]&&(y0[m]=!0,console.warn(o(m," has been deprecated since v"+l+" and will be removed in the near future"))),a?a(d,m,p):!0}};_c.spelling=function(a){return(l,r)=>(console.warn(`${r} is likely a misspelling of ${a}`),!0)};function KC(t,a,l){if(typeof t!="object")throw new _e("options must be an object",_e.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const d=r[o],m=a[d];if(m){const p=t[d],x=p===void 0||m(p,d,t);if(x!==!0)throw new _e("option "+d+" must be "+x,_e.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new _e("Unknown option "+d,_e.ERR_BAD_OPTION)}}const lc={assertOptions:KC,validators:_c},Xs=lc.validators;let Qn=class{constructor(a){this.defaults=a||{},this.interceptors={request:new d0,response:new d0}}async request(a,l){try{return await this._request(a,l)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const d=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch{}}throw r}}_request(a,l){typeof a=="string"?(l=l||{},l.url=a):l=a||{},l=Vn(this.defaults,l);const{transitional:r,paramsSerializer:o,headers:d}=l;r!==void 0&&lc.assertOptions(r,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1),o!=null&&(me.isFunction(o)?l.paramsSerializer={serialize:o}:lc.assertOptions(o,{encode:Xs.function,serialize:Xs.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),lc.assertOptions(l,{baseUrl:Xs.spelling("baseURL"),withXsrfToken:Xs.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let m=d&&me.merge(d.common,d[l.method]);d&&me.forEach(["delete","get","head","post","put","patch","common"],y=>{delete d[y]}),l.headers=as.concat(m,d);const p=[];let x=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(l)===!1||(x=x&&C.synchronous,p.unshift(C.fulfilled,C.rejected))});const h=[];this.interceptors.response.forEach(function(C){h.push(C.fulfilled,C.rejected)});let g,b=0,w;if(!x){const y=[b0.bind(this),void 0];for(y.unshift.apply(y,p),y.push.apply(y,h),w=y.length,g=Promise.resolve(l);b<w;)g=g.then(y[b++],y[b++]);return g}w=p.length;let k=l;for(b=0;b<w;){const y=p[b++],C=p[b++];try{k=y(k)}catch(j){C.call(this,j);break}}try{g=b0.call(this,k)}catch(y){return Promise.reject(y)}for(b=0,w=h.length;b<w;)g=g.then(h[b++],h[b++]);return g}getUri(a){a=Vn(this.defaults,a);const l=oy(a.baseURL,a.url,a.allowAbsoluteUrls);return ay(l,a.params,a.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(a){Qn.prototype[a]=function(l,r){return this.request(Vn(r||{},{method:a,url:l,data:(r||{}).data}))}});me.forEach(["post","put","patch"],function(a){function l(r){return function(d,m,p){return this.request(Vn(p||{},{method:a,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:m}))}}Qn.prototype[a]=l(),Qn.prototype[a+"Form"]=l(!0)});let VC=class hy{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(d){l=d});const r=this;this.promise.then(o=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](o);r._listeners=null}),this.promise.then=o=>{let d;const m=new Promise(p=>{r.subscribe(p),d=p}).then(o);return m.cancel=function(){r.unsubscribe(d)},m},a(function(d,m,p){r.reason||(r.reason=new tr(d,m,p),l(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const l=this._listeners.indexOf(a);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const a=new AbortController,l=r=>{a.abort(r)};return this.subscribe(l),a.signal.unsubscribe=()=>this.unsubscribe(l),a.signal}static source(){let a;return{token:new hy(function(o){a=o}),cancel:a}}};function YC(t){return function(l){return t.apply(null,l)}}function WC(t){return me.isObject(t)&&t.isAxiosError===!0}const cf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cf).forEach(([t,a])=>{cf[a]=t});function xy(t){const a=new Qn(t),l=Qb(Qn.prototype.request,a);return me.extend(l,Qn.prototype,a,{allOwnKeys:!0}),me.extend(l,a,null,{allOwnKeys:!0}),l.create=function(o){return xy(Vn(t,o))},l}const Ge=xy(Si);Ge.Axios=Qn;Ge.CanceledError=tr;Ge.CancelToken=VC;Ge.isCancel=ry;Ge.VERSION=fy;Ge.toFormData=Lc;Ge.AxiosError=_e;Ge.Cancel=Ge.CanceledError;Ge.all=function(a){return Promise.all(a)};Ge.spread=YC;Ge.isAxiosError=WC;Ge.mergeConfig=Vn;Ge.AxiosHeaders=as;Ge.formToJSON=t=>ly(me.isHTMLForm(t)?new FormData(t):t);Ge.getAdapter=my.getAdapter;Ge.HttpStatusCode=cf;Ge.default=Ge;const{Axios:FP,AxiosError:LP,CanceledError:DP,isCancel:_P,CancelToken:qP,VERSION:zP,all:UP,Cancel:IP,isAxiosError:$P,spread:BP,toFormData:HP,AxiosHeaders:QP,HttpStatusCode:GP,formToJSON:KP,getAdapter:VP,mergeConfig:YP}=Ge;function Ft(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var XC=typeof Symbol=="function"&&Symbol.observable||"@@observable",w0=XC,Am=()=>Math.random().toString(36).substring(7).split("").join("."),ZC={INIT:`@@redux/INIT${Am()}`,REPLACE:`@@redux/REPLACE${Am()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Am()}`},mc=ZC;function Tf(t){if(typeof t!="object"||t===null)return!1;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a||Object.getPrototypeOf(t)===null}function py(t,a,l){if(typeof t!="function")throw new Error(Ft(2));if(typeof a=="function"&&typeof l=="function"||typeof l=="function"&&typeof arguments[3]=="function")throw new Error(Ft(0));if(typeof a=="function"&&typeof l>"u"&&(l=a,a=void 0),typeof l<"u"){if(typeof l!="function")throw new Error(Ft(1));return l(py)(t,a)}let r=t,o=a,d=new Map,m=d,p=0,x=!1;function h(){m===d&&(m=new Map,d.forEach((j,S)=>{m.set(S,j)}))}function g(){if(x)throw new Error(Ft(3));return o}function b(j){if(typeof j!="function")throw new Error(Ft(4));if(x)throw new Error(Ft(5));let S=!0;h();const v=p++;return m.set(v,j),function(){if(S){if(x)throw new Error(Ft(6));S=!1,h(),m.delete(v),d=null}}}function w(j){if(!Tf(j))throw new Error(Ft(7));if(typeof j.type>"u")throw new Error(Ft(8));if(typeof j.type!="string")throw new Error(Ft(17));if(x)throw new Error(Ft(9));try{x=!0,o=r(o,j)}finally{x=!1}return(d=m).forEach(v=>{v()}),j}function k(j){if(typeof j!="function")throw new Error(Ft(10));r=j,w({type:mc.REPLACE})}function y(){const j=b;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Ft(11));function v(){const M=S;M.next&&M.next(g())}return v(),{unsubscribe:j(v)}},[w0](){return this}}}return w({type:mc.INIT}),{dispatch:w,subscribe:b,getState:g,replaceReducer:k,[w0]:y}}function JC(t){Object.keys(t).forEach(a=>{const l=t[a];if(typeof l(void 0,{type:mc.INIT})>"u")throw new Error(Ft(12));if(typeof l(void 0,{type:mc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ft(13))})}function e1(t){const a=Object.keys(t),l={};for(let d=0;d<a.length;d++){const m=a[d];typeof t[m]=="function"&&(l[m]=t[m])}const r=Object.keys(l);let o;try{JC(l)}catch(d){o=d}return function(m={},p){if(o)throw o;let x=!1;const h={};for(let g=0;g<r.length;g++){const b=r[g],w=l[b],k=m[b],y=w(k,p);if(typeof y>"u")throw p&&p.type,new Error(Ft(14));h[b]=y,x=x||y!==k}return x=x||r.length!==Object.keys(m).length,x?h:m}}function fc(...t){return t.length===0?a=>a:t.length===1?t[0]:t.reduce((a,l)=>(...r)=>a(l(...r)))}function t1(...t){return a=>(l,r)=>{const o=a(l,r);let d=()=>{throw new Error(Ft(15))};const m={getState:o.getState,dispatch:(x,...h)=>d(x,...h)},p=t.map(x=>x(m));return d=fc(...p)(o.dispatch),{...o,dispatch:d}}}function s1(t){return Tf(t)&&"type"in t&&typeof t.type=="string"}var gy=Symbol.for("immer-nothing"),v0=Symbol.for("immer-draftable"),gs=Symbol.for("immer-state");function Is(t,...a){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Yl=Object.getPrototypeOf;function Yn(t){return!!t&&!!t[gs]}function Ea(t){var a;return t?by(t)||Array.isArray(t)||!!t[v0]||!!((a=t.constructor)!=null&&a[v0])||zc(t)||Uc(t):!1}var a1=Object.prototype.constructor.toString();function by(t){if(!t||typeof t!="object")return!1;const a=Yl(t);if(a===null)return!0;const l=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return l===Object?!0:typeof l=="function"&&Function.toString.call(l)===a1}function hc(t,a){qc(t)===0?Reflect.ownKeys(t).forEach(l=>{a(l,t[l],t)}):t.forEach((l,r)=>a(r,l,t))}function qc(t){const a=t[gs];return a?a.type_:Array.isArray(t)?1:zc(t)?2:Uc(t)?3:0}function df(t,a){return qc(t)===2?t.has(a):Object.prototype.hasOwnProperty.call(t,a)}function yy(t,a,l){const r=qc(t);r===2?t.set(a,l):r===3?t.add(l):t[a]=l}function n1(t,a){return t===a?t!==0||1/t===1/a:t!==t&&a!==a}function zc(t){return t instanceof Map}function Uc(t){return t instanceof Set}function Ln(t){return t.copy_||t.base_}function uf(t,a){if(zc(t))return new Map(t);if(Uc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const l=by(t);if(a===!0||a==="class_only"&&!l){const r=Object.getOwnPropertyDescriptors(t);delete r[gs];let o=Reflect.ownKeys(r);for(let d=0;d<o.length;d++){const m=o[d],p=r[m];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(r[m]={configurable:!0,writable:!0,enumerable:p.enumerable,value:t[m]})}return Object.create(Yl(t),r)}else{const r=Yl(t);if(r!==null&&l)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function Pf(t,a=!1){return Ic(t)||Yn(t)||!Ea(t)||(qc(t)>1&&(t.set=t.add=t.clear=t.delete=l1),Object.freeze(t),a&&Object.entries(t).forEach(([l,r])=>Pf(r,!0))),t}function l1(){Is(2)}function Ic(t){return Object.isFrozen(t)}var r1={};function Wn(t){const a=r1[t];return a||Is(0,t),a}var xi;function wy(){return xi}function i1(t,a){return{drafts_:[],parent_:t,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function j0(t,a){a&&(Wn("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=a)}function mf(t){ff(t),t.drafts_.forEach(o1),t.drafts_=null}function ff(t){t===xi&&(xi=t.parent_)}function N0(t){return xi=i1(xi,t)}function o1(t){const a=t[gs];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function S0(t,a){a.unfinalizedDrafts_=a.drafts_.length;const l=a.drafts_[0];return t!==void 0&&t!==l?(l[gs].modified_&&(mf(a),Is(4)),Ea(t)&&(t=xc(a,t),a.parent_||pc(a,t)),a.patches_&&Wn("Patches").generateReplacementPatches_(l[gs].base_,t,a.patches_,a.inversePatches_)):t=xc(a,l,[]),mf(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),t!==gy?t:void 0}function xc(t,a,l){if(Ic(a))return a;const r=a[gs];if(!r)return hc(a,(o,d)=>C0(t,r,a,o,d,l)),a;if(r.scope_!==t)return a;if(!r.modified_)return pc(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let d=o,m=!1;r.type_===3&&(d=new Set(o),o.clear(),m=!0),hc(d,(p,x)=>C0(t,r,o,p,x,l,m)),pc(t,o,!1),l&&t.patches_&&Wn("Patches").generatePatches_(r,l,t.patches_,t.inversePatches_)}return r.copy_}function C0(t,a,l,r,o,d,m){if(Yn(o)){const p=d&&a&&a.type_!==3&&!df(a.assigned_,r)?d.concat(r):void 0,x=xc(t,o,p);if(yy(l,r,x),Yn(x))t.canAutoFreeze_=!1;else return}else m&&l.add(o);if(Ea(o)&&!Ic(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;xc(t,o),(!a||!a.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(l,r)&&pc(t,o)}}function pc(t,a,l=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Pf(a,l)}function c1(t,a){const l=Array.isArray(t),r={type_:l?1:0,scope_:a?a.scope_:wy(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,d=Mf;l&&(o=[r],d=pi);const{revoke:m,proxy:p}=Proxy.revocable(o,d);return r.draft_=p,r.revoke_=m,p}var Mf={get(t,a){if(a===gs)return t;const l=Ln(t);if(!df(l,a))return d1(t,l,a);const r=l[a];return t.finalized_||!Ea(r)?r:r===Om(t.base_,a)?(Rm(t),t.copy_[a]=xf(r,t)):r},has(t,a){return a in Ln(t)},ownKeys(t){return Reflect.ownKeys(Ln(t))},set(t,a,l){const r=vy(Ln(t),a);if(r!=null&&r.set)return r.set.call(t.draft_,l),!0;if(!t.modified_){const o=Om(Ln(t),a),d=o==null?void 0:o[gs];if(d&&d.base_===l)return t.copy_[a]=l,t.assigned_[a]=!1,!0;if(n1(l,o)&&(l!==void 0||df(t.base_,a)))return!0;Rm(t),hf(t)}return t.copy_[a]===l&&(l!==void 0||a in t.copy_)||Number.isNaN(l)&&Number.isNaN(t.copy_[a])||(t.copy_[a]=l,t.assigned_[a]=!0),!0},deleteProperty(t,a){return Om(t.base_,a)!==void 0||a in t.base_?(t.assigned_[a]=!1,Rm(t),hf(t)):delete t.assigned_[a],t.copy_&&delete t.copy_[a],!0},getOwnPropertyDescriptor(t,a){const l=Ln(t),r=Reflect.getOwnPropertyDescriptor(l,a);return r&&{writable:!0,configurable:t.type_!==1||a!=="length",enumerable:r.enumerable,value:l[a]}},defineProperty(){Is(11)},getPrototypeOf(t){return Yl(t.base_)},setPrototypeOf(){Is(12)}},pi={};hc(Mf,(t,a)=>{pi[t]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});pi.deleteProperty=function(t,a){return pi.set.call(this,t,a,void 0)};pi.set=function(t,a,l){return Mf.set.call(this,t[0],a,l,t[0])};function Om(t,a){const l=t[gs];return(l?Ln(l):t)[a]}function d1(t,a,l){var o;const r=vy(a,l);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function vy(t,a){if(!(a in t))return;let l=Yl(t);for(;l;){const r=Object.getOwnPropertyDescriptor(l,a);if(r)return r;l=Yl(l)}}function hf(t){t.modified_||(t.modified_=!0,t.parent_&&hf(t.parent_))}function Rm(t){t.copy_||(t.copy_=uf(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var u1=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,l,r)=>{if(typeof a=="function"&&typeof l!="function"){const d=l;l=a;const m=this;return function(x=d,...h){return m.produce(x,g=>l.call(this,g,...h))}}typeof l!="function"&&Is(6),r!==void 0&&typeof r!="function"&&Is(7);let o;if(Ea(a)){const d=N0(this),m=xf(a,void 0);let p=!0;try{o=l(m),p=!1}finally{p?mf(d):ff(d)}return j0(d,r),S0(o,d)}else if(!a||typeof a!="object"){if(o=l(a),o===void 0&&(o=a),o===gy&&(o=void 0),this.autoFreeze_&&Pf(o,!0),r){const d=[],m=[];Wn("Patches").generateReplacementPatches_(a,o,d,m),r(d,m)}return o}else Is(1,a)},this.produceWithPatches=(a,l)=>{if(typeof a=="function")return(m,...p)=>this.produceWithPatches(m,x=>a(x,...p));let r,o;return[this.produce(a,l,(m,p)=>{r=m,o=p}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ea(t)||Is(8),Yn(t)&&(t=m1(t));const a=N0(this),l=xf(t,void 0);return l[gs].isManual_=!0,ff(a),l}finishDraft(t,a){const l=t&&t[gs];(!l||!l.isManual_)&&Is(9);const{scope_:r}=l;return j0(r,a),S0(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,a){let l;for(l=a.length-1;l>=0;l--){const o=a[l];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}l>-1&&(a=a.slice(l+1));const r=Wn("Patches").applyPatches_;return Yn(t)?r(t,a):this.produce(t,o=>r(o,a))}};function xf(t,a){const l=zc(t)?Wn("MapSet").proxyMap_(t,a):Uc(t)?Wn("MapSet").proxySet_(t,a):c1(t,a);return(a?a.scope_:wy()).drafts_.push(l),l}function m1(t){return Yn(t)||Is(10,t),jy(t)}function jy(t){if(!Ea(t)||Ic(t))return t;const a=t[gs];let l;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,l=uf(t,a.scope_.immer_.useStrictShallowCopy_)}else l=uf(t,!0);return hc(l,(r,o)=>{yy(l,r,jy(o))}),a&&(a.finalized_=!1),l}var bs=new u1,Ny=bs.produce;bs.produceWithPatches.bind(bs);bs.setAutoFreeze.bind(bs);bs.setUseStrictShallowCopy.bind(bs);bs.applyPatches.bind(bs);bs.createDraft.bind(bs);bs.finishDraft.bind(bs);function Sy(t){return({dispatch:l,getState:r})=>o=>d=>typeof d=="function"?d(l,r,t):o(d)}var f1=Sy(),h1=Sy,x1=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fc:fc.apply(null,arguments)};function k0(t,a){function l(...r){if(a){let o=a(...r);if(!o)throw new Error(Sa(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:r[0]}}return l.toString=()=>`${t}`,l.type=t,l.match=r=>s1(r)&&r.type===t,l}var Cy=class ci extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,ci.prototype)}static get[Symbol.species](){return ci}concat(...a){return super.concat.apply(this,a)}prepend(...a){return a.length===1&&Array.isArray(a[0])?new ci(...a[0].concat(this)):new ci(...a.concat(this))}};function E0(t){return Ea(t)?Ny(t,()=>{}):t}function Yo(t,a,l){return t.has(a)?t.get(a):t.set(a,l(a)).get(a)}function p1(t){return typeof t=="boolean"}var g1=()=>function(a){const{thunk:l=!0,immutableCheck:r=!0,serializableCheck:o=!0,actionCreatorCheck:d=!0}=a??{};let m=new Cy;return l&&(p1(l)?m.push(f1):m.push(h1(l.extraArgument))),m},b1="RTK_autoBatch",A0=t=>a=>{setTimeout(a,t)},y1=(t={type:"raf"})=>a=>(...l)=>{const r=a(...l);let o=!0,d=!1,m=!1;const p=new Set,x=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:A0(10):t.type==="callback"?t.queueNotification:A0(t.timeout),h=()=>{m=!1,d&&(d=!1,p.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const b=()=>o&&g(),w=r.subscribe(b);return p.add(g),()=>{w(),p.delete(g)}},dispatch(g){var b;try{return o=!((b=g==null?void 0:g.meta)!=null&&b[b1]),d=!o,d&&(m||(m=!0,x(h))),r.dispatch(g)}finally{o=!0}}})},w1=t=>function(l){const{autoBatch:r=!0}=l??{};let o=new Cy(t);return r&&o.push(y1(typeof r=="object"?r:void 0)),o};function v1(t){const a=g1(),{reducer:l=void 0,middleware:r,devTools:o=!0,preloadedState:d=void 0,enhancers:m=void 0}=t||{};let p;if(typeof l=="function")p=l;else if(Tf(l))p=e1(l);else throw new Error(Sa(1));let x;typeof r=="function"?x=r(a):x=a();let h=fc;o&&(h=x1({trace:!1,...typeof o=="object"&&o}));const g=t1(...x),b=w1(g);let w=typeof m=="function"?m(b):b();const k=h(...w);return py(p,d,k)}function ky(t){const a={},l=[];let r;const o={addCase(d,m){const p=typeof d=="string"?d:d.type;if(!p)throw new Error(Sa(28));if(p in a)throw new Error(Sa(29));return a[p]=m,o},addMatcher(d,m){return l.push({matcher:d,reducer:m}),o},addDefaultCase(d){return r=d,o}};return t(o),[a,l,r]}function j1(t){return typeof t=="function"}function N1(t,a){let[l,r,o]=ky(a),d;if(j1(t))d=()=>E0(t());else{const p=E0(t);d=()=>p}function m(p=d(),x){let h=[l[x.type],...r.filter(({matcher:g})=>g(x)).map(({reducer:g})=>g)];return h.filter(g=>!!g).length===0&&(h=[o]),h.reduce((g,b)=>{if(b)if(Yn(g)){const k=b(g,x);return k===void 0?g:k}else{if(Ea(g))return Ny(g,w=>b(w,x));{const w=b(g,x);if(w===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return g},p)}return m.getInitialState=d,m}var S1=Symbol.for("rtk-slice-createasyncthunk");function C1(t,a){return`${t}/${a}`}function k1({creators:t}={}){var l;const a=(l=t==null?void 0:t.asyncThunk)==null?void 0:l[S1];return function(o){const{name:d,reducerPath:m=d}=o;if(!d)throw new Error(Sa(11));const p=(typeof o.reducers=="function"?o.reducers(A1()):o.reducers)||{},x=Object.keys(p),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(M,P){const L=typeof M=="string"?M:M.type;if(!L)throw new Error(Sa(12));if(L in h.sliceCaseReducersByType)throw new Error(Sa(13));return h.sliceCaseReducersByType[L]=P,g},addMatcher(M,P){return h.sliceMatchers.push({matcher:M,reducer:P}),g},exposeAction(M,P){return h.actionCreators[M]=P,g},exposeCaseReducer(M,P){return h.sliceCaseReducersByName[M]=P,g}};x.forEach(M=>{const P=p[M],L={reducerName:M,type:C1(d,M),createNotation:typeof o.reducers=="function"};R1(P)?P1(L,P,g,a):O1(L,P,g)});function b(){const[M={},P=[],L=void 0]=typeof o.extraReducers=="function"?ky(o.extraReducers):[o.extraReducers],z={...M,...h.sliceCaseReducersByType};return N1(o.initialState,q=>{for(let H in z)q.addCase(H,z[H]);for(let H of h.sliceMatchers)q.addMatcher(H.matcher,H.reducer);for(let H of P)q.addMatcher(H.matcher,H.reducer);L&&q.addDefaultCase(L)})}const w=M=>M,k=new Map,y=new WeakMap;let C;function j(M,P){return C||(C=b()),C(M,P)}function S(){return C||(C=b()),C.getInitialState()}function v(M,P=!1){function L(q){let H=q[M];return typeof H>"u"&&P&&(H=Yo(y,L,S)),H}function z(q=w){const H=Yo(k,P,()=>new WeakMap);return Yo(H,q,()=>{const ue={};for(const[U,I]of Object.entries(o.selectors??{}))ue[U]=E1(I,q,()=>Yo(y,q,S),P);return ue})}return{reducerPath:M,getSelectors:z,get selectors(){return z(L)},selectSlice:L}}const N={name:d,reducer:j,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:S,...v(m),injectInto(M,{reducerPath:P,...L}={}){const z=P??m;return M.inject({reducerPath:z,reducer:j},L),{...N,...v(z,!0)}}};return N}}function E1(t,a,l,r){function o(d,...m){let p=a(d);return typeof p>"u"&&r&&(p=l()),t(p,...m)}return o.unwrapped=t,o}var sr=k1();function A1(){function t(a,l){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...l}}return t.withTypes=()=>t,{reducer(a){return Object.assign({[a.name](...l){return a(...l)}}[a.name],{_reducerDefinitionType:"reducer"})},preparedReducer(a,l){return{_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:l}},asyncThunk:t}}function O1({type:t,reducerName:a,createNotation:l},r,o){let d,m;if("reducer"in r){if(l&&!T1(r))throw new Error(Sa(17));d=r.reducer,m=r.prepare}else d=r;o.addCase(t,d).exposeCaseReducer(a,d).exposeAction(a,m?k0(t,m):k0(t))}function R1(t){return t._reducerDefinitionType==="asyncThunk"}function T1(t){return t._reducerDefinitionType==="reducerWithPrepare"}function P1({type:t,reducerName:a},l,r,o){if(!o)throw new Error(Sa(18));const{payloadCreator:d,fulfilled:m,pending:p,rejected:x,settled:h,options:g}=l,b=o(t,d,g);r.exposeAction(a,b),m&&r.addCase(b.fulfilled,m),p&&r.addCase(b.pending,p),x&&r.addCase(b.rejected,x),h&&r.addMatcher(b.settled,h),r.exposeCaseReducer(a,{fulfilled:m||Wo,pending:p||Wo,rejected:x||Wo,settled:h||Wo})}function Wo(){}function Sa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const O0={userId:"",userName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ey=sr({name:"ownerprofile",initialState:O0,reducers:{setOwnerProfileData:(t,a)=>{const{userId:l,userName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,userId:l,userName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetOwnerProfile:()=>O0}}),{setOwnerProfileData:gc,setAuth:Tm,resetOwnerProfile:bc}=Ey.actions,M1=Ey.reducer,R0={staffId:"",staffName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ay=sr({name:"staffprofile",initialState:R0,reducers:{setStaffProfileData:(t,a)=>{const{staffId:l,staffName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,staffId:l,staffName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetStaffProfile:()=>R0}}),{setStaffProfileData:$c,setAuth:Pm,resetStaffProfile:yc}=Ay.actions,F1=Ay.reducer,T0={workerId:"",workerName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Oy=sr({name:"workerprofile",initialState:T0,reducers:{setWorkerProfileData:(t,a)=>{const{workerId:l,workerName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,workerId:l,workerName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetWorkerProfile:()=>T0}}),{setWorkerProfileData:Bc,setAuth:Mm,resetWorkerProfile:wc}=Oy.actions,L1=Oy.reducer,D1={role:null,isauthenticated:!1,_id:null},Ry=sr({name:"auth",initialState:D1,reducers:{setRole:(t,a)=>a.payload,logout:t=>{t.role=null,t.isauthenticated=!1,t._id=null}}}),{setRole:Lt,logout:vc}=Ry.actions,_1=Ry.reducer,P0={CTOId:"",CTOName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Ty=sr({name:"CTOprofile",initialState:P0,reducers:{setCTOProfileData:(t,a)=>{const{CTOId:l,CTOName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,CTOId:l,CTOName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetCTOProfile:()=>P0}}),{setCTOProfileData:Hc,setAuth:Fm,resetCTOProfile:jc}=Ty.actions,q1=Ty.reducer,M0={clientId:"",clientName:"",email:"",role:"",phoneNo:"",isauthenticated:!1},Py=sr({name:"clientprofile",initialState:M0,reducers:{setClientProfileData:(t,a)=>{const{clientId:l,clientName:r,email:o,phoneNo:d,isauthenticated:m,role:p}=a.payload;return{...t,clientId:l,clientName:r,email:o,phoneNo:d,role:p,isauthenticated:m}},setAuth:(t,a)=>({...t,isauthenticated:a.payload}),resetClientProfile:()=>M0}}),{setClientProfileData:Qc,setAuth:Lm,resetClientProfile:Nc}=Py.actions,z1=Py.reducer,Bt=v1({reducer:{userProfileStore:M1,workerProfileStore:L1,staffProfileStore:F1,CTOProfileStore:q1,clientProfileStore:z1,authStore:_1}}),U1=async()=>{try{let{data:t}=await sa.get("/auth/staff/refreshtoken");return Bt.dispatch(Pm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Ge.isAxiosError(t)&&t.response?Bt.dispatch(Pm({isAuthenticated:t.response.data.ok})):Bt.dispatch(Pm({isAuthenticated:!1})),{ok:!1}}},sa=Ge.create({baseURL:"https://houseofram.in/api",withCredentials:!0});sa.interceptors.request.use(t=>t,t=>Promise.reject(t));sa.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/staff/isauthenticated"))return Promise.reject(t);if(((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403){a._retry=!0;try{console.log("gettingcalled infingite time from staff api servive");const{ok:o}=await U1();if(o)return console.log("ok entering into it",o),sa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const I1=async()=>{try{let{data:t}=await sa.get("/auth/CTO/refreshtoken");return Bt.dispatch(Fm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Ge.isAxiosError(t)&&t.response?Bt.dispatch(Fm({isAuthenticated:t.response.data.ok})):Bt.dispatch(Fm({isAuthenticated:!1})),{ok:!1}}};let hn=Ge.create({baseURL:"https://houseofram.in/api",withCredentials:!0});hn.interceptors.request.use(t=>t,t=>Promise.reject(t));hn.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/CTO/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO CTOApi servive");try{const{ok:o}=await I1();if(o)return hn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const $1=async({email:t,password:a})=>{const{data:l}=await hn.post("/auth/CTO/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},B1=()=>le({mutationFn:$1,onSuccess:()=>{Ee.invalidateQueries({queryKey:["CTOProfile"]})}}),H1=async t=>{const{data:a}=await hn.post("/auth/CTO/registerCTO",t);if(!a.ok)throw new Error(a.message);return a},Q1=()=>le({mutationFn:H1}),G1=async()=>{const{data:t}=await hn.post("/auth/CTO/logout");if(!t.ok)throw new Error(t.message);return t},My=()=>le({mutationFn:G1,onSuccess:()=>{Ee.clear()}}),K1=async()=>{try{let{data:t}=await Aa.get("/auth/client/refreshtoken");return Bt.dispatch(Lm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Ge.isAxiosError(t)&&t.response?Bt.dispatch(Lm({isAuthenticated:t.response.data.ok})):Bt.dispatch(Lm({isAuthenticated:!1})),{ok:!1}}};let Aa=Ge.create({baseURL:"https://houseofram.in/api",withCredentials:!0});Aa.interceptors.request.use(t=>t,t=>Promise.reject(t));Aa.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/client/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0,console.log("gettingcalled infingite time from CTO clientApi servive");try{const{ok:o}=await K1();if(o)return Aa(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const V1=async({email:t,password:a})=>{const{data:l}=await Aa.post("/auth/client/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},Y1=()=>le({mutationFn:V1,onSuccess:()=>{Ee.invalidateQueries({queryKey:["clientprofile"]})}}),W1=async({token:t,payload:a})=>{const{data:l}=await Aa.post(`/auth/client/registerclient?invite=${t}`,a);if(!l.ok)throw new Error(l.message);return l},X1=()=>le({mutationFn:W1}),Z1=async()=>{const{data:t}=await Aa.post("/auth/client/logout");if(!t.ok)throw new Error(t.message);return t},Fy=()=>le({mutationFn:Z1,onSuccess:()=>{Ee.clear()}}),J1=async({email:t,password:a})=>{const{data:l}=await sa.post("/auth/staff/login",{email:t,password:a});if(!l.ok)throw new Error(l.message);return l},ek=()=>le({mutationFn:J1,onSuccess:()=>{Ee.invalidateQueries({queryKey:["staffProfile"]})}}),tk=async t=>{const{data:a}=await sa.post("/auth/staff/registerstaff",t);if(!a.ok)throw new Error(a.message);return a},sk=()=>le({mutationFn:tk}),ak=async()=>{const{data:t}=await sa.post("/auth/staff/logout");if(!t.ok)throw new Error(t.message);return t},Ly=()=>le({mutationFn:ak,onSuccess:()=>{Ee.clear()}}),nk=async()=>{try{let{data:t}=await $s.get("/auth/refreshtoken");return Bt.dispatch(Tm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Ge.isAxiosError(t)&&t.response?Bt.dispatch(Tm({isAuthenticated:t.response.data.ok})):Bt.dispatch(Tm({isAuthenticated:!1})),{ok:!1}}};let $s=Ge.create({baseURL:"https://houseofram.in/api",withCredentials:!0});$s.interceptors.request.use(t=>t,t=>Promise.reject(t));$s.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await nk();if(o)return $s(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const lk=async({email:t,password:a,userName:l,phoneNo:r})=>{try{const o={email:t,password:a,username:l,phoneNo:r,role:"owner"};let{data:d}=await $s.post("/auth/registeruser",o);if(d.ok)return d}catch(o){throw o}},rk=async({email:t,password:a})=>{try{let{data:l}=await $s.post("/auth/login",{email:t,password:a});if(console.log("data from login user",l),l.ok)return l}catch(l){throw l}},ik=async()=>{try{let{data:t}=await $s.post("/auth/logout");if(t.ok)return t.data}catch(t){throw t}},ok=()=>le({mutationFn:lk}),ck=()=>le({mutationFn:rk}),Dy=()=>le({mutationFn:ik}),dk=async()=>{try{let{data:t}=await xn.get("/auth/worker/refreshtoken");return Bt.dispatch(Mm({isAuthenticated:t.ok})),{ok:t.ok}}catch(t){return Ge.isAxiosError(t)&&t.response?Bt.dispatch(Mm({isAuthenticated:t.response.data.ok})):Bt.dispatch(Mm({isAuthenticated:!1})),{ok:!1}}},xn=Ge.create({baseURL:"https://houseofram.in/api",withCredentials:!0});xn.interceptors.response.use(t=>t,async t=>{var l,r;const a=t.config;if(a.url.includes("/auth/worker/isauthenticated"))return Promise.reject(t);if((((l=t.response)==null?void 0:l.status)===401||((r=t.response)==null?void 0:r.status)===403)&&!a._retry){a._retry=!0;try{const{ok:o}=await dk();if(o)return xn(a)}catch(o){return console.error("Token refresh failed",o),Promise.reject(o)}}return Promise.reject(t)});const uk=async t=>{const{data:a}=await xn.post("/auth/worker/login",t);if(!a.ok)throw new Error(a.message);return a.data},mk=async({invite:t,payload:a})=>{const{data:l}=await xn.post(`/auth/worker/registerworker?invite=${t}`,a);if(console.log("data form register worker",l),!l.ok)throw new Error(l.message);return l.data},fk=async()=>{const{data:t}=await xn.post("/auth/worker/logout");if(!t.ok)throw new Error(t.message);return t.data},hk=()=>le({mutationFn:uk}),xk=()=>le({mutationFn:mk}),_y=()=>le({mutationFn:fk}),T=({variant:t="primary",size:a="md",children:l,isLoading:r=!1,className:o="",disabled:d,...m})=>{const p="inline-flex cursor-pointer items-center justify-center font-medium transition-colors focus:outline-none",x={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm",secondary:"bg-blue-100 hover:bg-blue-200 text-blue-700",outline:"border border-blue-200 hover:bg-blue-50 text-blue-600",danger:"border border-red-200 hover:bg-red-500 text-red-600",ghost:"hover:bg-gray-100 text-gray-700",link:"text-blue-600 hover:underline p-0 h-auto"},h={sm:"text-xs px-2.5 py-1.5 rounded-lg",md:"text-sm px-4 py-2 rounded-xl",lg:"text-base px-6 py-3 rounded-xl",icon:"p-2 rounded-lg"},w=`
    ${p} 
    ${x[t]} 
    ${h[a]} 
    ${d?"opacity-50 cursor-not-allowed":""} 
    ${r?"opacity-80 cursor-wait":""}
    ${o}
  `.trim();return e.jsxs("button",{className:w,disabled:d||r,...m,children:[r&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})};let Dm=null;function F(t){const{title:a,description:l,variant:r="default",duration:o=3e3}=t,d=document.getElementById("toast-container");d&&(document.body.removeChild(d),Dm&&window.clearTimeout(Dm));const m=document.createElement("div");m.id="toast-container",m.className="fixed bottom-4 right-4 z-50 max-w-xs";const p=document.createElement("div");p.className=`p-4 rounded-lg shadow-lg border ${r==="destructive"?"bg-red-50 border-red-200":"bg-white border-blue-100"}`;let x="";a&&(x+=`<h4 class="${r==="destructive"?"text-red-800":"text-blue-800"} font-medium">${a}</h4>`),x+=`<p class="${r==="destructive"?"text-red-600":"text-gray-600"} text-sm">${l}</p>`,p.innerHTML=x,m.appendChild(p),document.body.appendChild(m),Dm=window.setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},o)}const W=()=>ps(t=>t.authStore),Z=t=>t==="owner"?$s:t==="staff"?sa:t==="worker"?xn:t==="CTO"?hn:t==="client"?Aa:null,pk=async({projectId:t,api:a})=>(await a.get(`/selectedstage/getselectedstage/${t}`)).data.data,gk=async({projectId:t,mode:a,api:l})=>(await l.post(`/selectedstage/updateselectedstage/${t}`,{mode:a})).data.data,Ff=t=>{const{role:a}=W(),l=Z(a),r=["owner","CTO","staff"];return Le({queryKey:["stage-selection",t],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!r.includes(a))throw new Error("Not allowed to make this API call");if(!l)throw new Error("API instance not found for role");return await pk({projectId:t,api:l})},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},bk=()=>{const t=Ne(),{role:a}=W(),l=["owner","CTO","staff"],r=Z(a);return le({mutationFn:async({projectId:o,mode:d})=>{if(!a)throw new Error("Not Authorized");if(!l.includes(a))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await gk({projectId:o,mode:d,api:r})},onSuccess:(o,{projectId:d})=>{t.invalidateQueries({queryKey:["stage-selection",d]})}})},yk=(t,a,l,r,o)=>{const d=r==null?void 0:r.some(h=>h.toLowerCase()==="projectdetails");let m={},p={},x={};if(d){let h=["DOCUMENTATION","WORKERS","INVITECLIENT","PREREQUIRETIES","REQUIREMENTFORM","SITEMEASUREMENT","SAMPLEDESIGN","TECHNICALCONSULTANT","SELECTSTAGE","PAYMENTCONFIRMATION","ORDERMATERIALS","MATERIALARRIVED","WORKSCHEDULE","INSTALLATION","QUALITYCHECK","CLEANINGSANITATION","PROJECTDELIVERY"];const b=h.indexOf("TECHNICALCONSULTANT")+1;t==="Manual Flow"?h.splice(b,0,"MATERIALSELECTION","COSTESTIMATION"):t==="Modular Units"&&h.splice(b,0,"MODULARUNIT"),t!=null&&(h=h.filter(w=>w!=="SELECTSTAGE"));for(const w of h)a[w]&&o[w]&&l[w]&&(m[w]=a[w],p[w]=o[w],x[w]=l[w])}else m=a,p=o,x=l;return{filteredLabels:m,filteredIcons:p,filteredPaths:x}},wk=({labels:t,icons:a,path:l})=>{const[r,o]=A.useState(!0),{projectId:d}=Ce(),m=Fe(),p=dt(),x=p.pathname.split("/"),{organizationId:h}=Ce(),g=ws(),{role:b}=ps(te=>te.authStore),[w,k]=A.useState(""),{data:y,isLoading:C}=Ff(d),{mutateAsync:j,isPending:S}=My(),{mutateAsync:v,isPending:N}=Fy(),{mutateAsync:M,isPending:P}=Ly(),{mutateAsync:L,isPending:z}=Dy(),{mutateAsync:q,isPending:H}=_y(),ue=()=>{o(!1)},U=()=>{o(!0)};A.useEffect(()=>{const O=p.pathname.split("/")[4];k(r?()=>L2[O]:()=>D2[O])},[p.pathname,r]),$2(U,ue);const I=!C&&y;let{filteredLabels:Y,filteredIcons:G,filteredPaths:re}=yk(I,t,l,x,a);const _=x[2]==="projectdetails",X=()=>{_&&m(`/organizations/${h}/projects`)},ce=async()=>{var te,O;try{b==="CTO"?await j():b==="client"?await v():b==="staff"?await M():b==="owner"?await L():b==="worker"&&await q(),g(bc()),g(Nc()),g(wc()),g(jc()),g(yc()),g(vc()),F({title:"Success",description:"logout successfull"}),(!S||!N||!P||!z||!H)&&m("/")}catch($){F({title:"Error",description:((O=(te=$==null?void 0:$.response)==null?void 0:te.data)==null?void 0:O.message)||"Failed to logout",variant:"destructive"})}};return console.log("outside the filterLabels",Y),e.jsx(e.Fragment,{children:r?e.jsxs("aside",{className:"relative flex flex-col bg-[#2f303a] w-[17%] min-h-screen max-h-screen text-[#9ca3af] select-none transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-col flex-grow overflow-y-auto overflow-x-hidden custom-scrollbar p-2",children:[e.jsxs("div",{onClick:X,className:`flex ${_?"cursor-pointer":""} justify-between items-center border-b-1 py-2`,children:[e.jsx("span",{className:"text-xl",children:yt.COMPANY_NAME}),e.jsx("div",{className:"w-[30px] h-[30px]",children:e.jsx("img",{className:"w-full h-full",src:yt.COMPANY_LOGO,alt:"LOGO"})})]}),e.jsxs("section",{className:"py-2 space-y-2",children:[" ",Object.entries(Y).map(([te,O])=>re[te]&&e.jsx(Rt,{to:re[te],className:"outline-none",children:e.jsxs("div",{onClick:()=>k(O),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${w===O?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:[e.jsx("span",{className:"text-lg",children:O}),e.jsx("span",{children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]})},O))]})]}),e.jsxs("div",{className:"flex flex-col p-2 border-t border-[#3a3b45]",children:[x[1]!=="login"&&e.jsxs(T,{isLoading:S||N||P||z||H,onClick:ce,className:"flex items-center gap-2 px-4 py-3 rounded-lg !bg-[#3a3b45] !text-[#9ca3af] hover:!bg-[#464751] hover:!text-white transition",children:[e.jsx("i",{className:"fa-solid fa-right-from-bracket"}),e.jsx("span",{children:"Logout"})]}),e.jsx("button",{title:"Ctrl+] to close",onClick:ue,className:"mt-2 flex items-center justify-center outline-none border border-blue-600 text-blue-500 hover:bg-[#3a3b45] rounded-lg w-full py-2",children:e.jsx("i",{className:"fa-solid fa-chevron-left"})})]})]}):e.jsxs("aside",{className:"flex flex-col relative justify-between bg-[#2f303a] w-[6%]  max-h-full  text-[#9ca3af] transition-all duration-300 ",children:[e.jsx("div",{className:"max-h-[95%] overflow-y-auto overflow-x-hidden custom-scrollbar",children:e.jsx("div",{className:"flex items-center flex-col justify-between w-full",children:Object.entries(G).map(([te,O])=>re[te]?e.jsx(Rt,{to:re[te],className:`${re[te]?"":"cursor-not-allowed"}`,children:e.jsx("div",{onClick:()=>k(te),className:`cursor-pointer flex justify-between max-w-[95%] py-4 px-4 ${(w==null?void 0:w.toLowerCase())===te.toLowerCase()?"bg-[#3a3b45] rounded-xl text-white":"rounded-xl hover:bg-[#3a3b45]"} `,children:e.jsx("i",{className:`${O} ${(w==null?void 0:w.toLowerCase())===te.toLowerCase()?"text-[#4a86f7]":"text-[#9ca3af]"} `})})}):e.jsx("div",{className:"cursor-not-allowed flex justify-between max-w-[95%] py-4 px-4",children:e.jsx("i",{className:`${O}`})}))})}),e.jsxs("div",{className:"flex flex-col items-center p-2 border-t border-[#3a3b45]",children:[x[1]!=="login"&&e.jsx(T,{isLoading:S||N||P||z||H,title:"logout",onClick:ce,className:"w-[40px] h-[40px] flex items-center justify-center !bg-[#3a3b45] !text-[#9ca3af] hover:!text-red-500 transition",children:e.jsx("i",{className:"fa-solid fa-right-from-bracket"})}),e.jsx("button",{title:"Ctrl+[ to open",onClick:U,className:"mt-2 cursor-pointer outline-none border-[#9ca3af] h-[40px] w-[40px] flex items-center justify-center border rounded-lg",children:e.jsx("i",{className:"fa-solid fa-chevron-right text-[#4a86f7]"})})]})]})})},Ci=A.memo(wk),ki=({isOpen:t,onClose:a,labels:l,path:r})=>{const o=Fe(),{organizationId:d,projectId:m}=Ce(),p=ws(),{role:x}=ps(U=>U.authStore),{data:h,isLoading:g}=Ff(m),{mutateAsync:b,isPending:w}=My(),{mutateAsync:k,isPending:y}=Fy(),{mutateAsync:C,isPending:j}=Ly(),{mutateAsync:S,isPending:v}=Dy(),{mutateAsync:N,isPending:M}=_y(),P=async()=>{var U,I;try{x==="CTO"?await b():x==="client"?await k():x==="staff"?await C():x==="owner"?await S():x==="worker"&&await N(),p(bc()),p(Nc()),p(wc()),p(jc()),p(yc()),p(vc()),F({title:"Success",description:"logout successfull"}),(!w||!y||!j||!v||!M)&&o("/")}catch(Y){F({title:"Error",description:((I=(U=Y==null?void 0:Y.response)==null?void 0:U.data)==null?void 0:I.message)||"Failed to logout",variant:"destructive"})}};let L=Object.entries(l);const z=location.pathname.split("/"),q=z[2]==="projectdetails";if(z.includes("projectdetails")&&!g){const U=h;L=L.filter(([I])=>{if(U){if(U==="Modular Units")return I!=="MATERIALSELECTION"&&I!=="COSTESTIMATION"&&I!=="SELECTSTAGE";if(U==="Manual Flow")return I!=="MODULARUNIT"&&I!=="SELECTSTAGE"}else return I!=="MODULARUNIT"&&I!=="MATERIALSELECTION"&&I!=="COSTESTIMATION";return!0})}const ue=()=>{q&&o(`/organizations/${d}/projects`)};return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:a}),e.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-screen bg-white w-[75%] flex flex-col transition-transform duration-300 ${t?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{onClick:ue,className:`flex items-center gap-3 ${q?"cursor-pointer":""}`,children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:yt.COMPANY_NAME})]}),e.jsx("button",{onClick:a,className:"text-xl text-gray-700",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("nav",{className:"flex flex-col flex-grow overflow-y-auto p-4",children:L.map(([U,I],Y)=>e.jsxs(ct.Fragment,{children:[r[U]?e.jsx(Rt,{to:r[U],onClick:a,className:"text-gray-800 hover:bg-gray-100 p-3 rounded block",children:I}):e.jsx("span",{className:"text-gray-400 p-3 rounded cursor-not-allowed block",children:I}),Y<L.length-1&&e.jsx("hr",{className:"border-t border-gray-200 my-1"})]},U))}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:z[1]!=="login"&&e.jsxs(T,{className:"w-full flex items-center justify-center gap-2",isLoading:w||y||j||v||M,onClick:P,children:[e.jsx("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})]})},vk=({projectId:t,setProjectId:a})=>{const{organizationId:l}=Ce(),[r,o]=A.useState(!1),[d,m]=A.useState(window.innerWidth<470),p={PROJECTS:`/organizations/${l}/projects`,ORGANIZATION:`/organizations/${l}/invitecto`};return A.useEffect(()=>{const x=()=>{m(window.innerWidth<470)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-full h-full",children:[d?e.jsx(ki,{labels:Bm,path:p,isOpen:r,onClose:()=>o(!1)}):e.jsx(Ci,{path:p,labels:Bm,icons:P2}),e.jsx("main",{className:"!w-[100%] h-full p-4",children:e.jsx(_t,{context:{projectId:t,setProjectId:a,organizationId:l,isMobile:d,isMobileSidebarOpen:r,openMobileSidebar:()=>o(!0),closeMobileSidebar:()=>o(!1)}})})]})})},F0=t=>{var l;const a={};return console.log("projectData",t),(l=t.projectName)!=null&&l.trim()||(a.projectName="project name is required"),t.startDate||(a.startDate="start date is required"),t.dueDate||(a.dueDate="Due date is Required"),t.startDate&&t.endDate&&t.endDate<=t.startDate&&(a.endDate="End date must be after start date."),t.startDate&&t.dueDate&&t.dueDate<=t.startDate&&(a.endDate="Due date must be after start date."),a},jk=t=>{var l;const a={};return(l=t.email)!=null&&l.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",a},Nk=t=>{var l;const a={};return(l=t.email)!=null&&l.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Enter a valid email address"):a.email="Email is required",t.password?t.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",t.userName||(a.userName="user name is not provided"),t.phoneNo||(a.phoneNo="phone Number is required"),/^\d{10}$/.test(t.phoneNo.trim())||(a.phoneNo="Phone number should contain exactly 10 digits"),t.confirmPassword.trim()?t.password!==t.confirmPassword&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="please confirm your password",a},De=({className:t="",children:a})=>e.jsx("div",{className:`bg-white/70 backdrop-blur-sm border-0 rounded-2xl shadow-lg ${t}`,children:a}),ns=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-3 ${t}`,children:a}),Dt=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pt-3 ${t}`,children:a}),ys=({className:t="",children:a})=>e.jsx("h3",{className:`text-xl font-semibold text-blue-900 ${t}`,children:a}),aa=({className:t="",children:a})=>e.jsx("p",{className:`text-sm text-gray-500 ${t}`,children:a}),de=({className:t="",error:a,...l})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("input",{className:d,...l}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},fe=({className:t="",...a})=>e.jsx("label",{className:`text-sm font-medium text-gray-700 ${t}`,...a}),L0=()=>{const[t,a]=A.useState({email:"",password:""}),[l,r]=A.useState({email:"",password:"",userName:"",phoneNo:"",confirmPassword:""}),[o,d]=A.useState({}),[m,p]=A.useState({}),[x,h]=A.useState(!1),g=ws(),b=Fe(),[w,k]=A.useState(!1),{isMobile:y,openMobileSidebar:C}=He(),{mutateAsync:j,isPending:S}=ck(),{mutateAsync:v,isPending:N}=ok(),M=q=>{a(H=>({...H,[q.target.name]:q.target.value}))},P=q=>{r(H=>({...H,[q.target.name]:q.target.value}))},L=async q=>{var H,ue;q.preventDefault();try{d({});const U=jk(t);if(d(U),Object.keys(U).length===0&&!S){const I=await j(t);if(I.ok){const Y=I==null?void 0:I.data;g(Lt({_id:Y==null?void 0:Y.userId,role:Y==null?void 0:Y.role,isauthenticated:!0})),g(gc({userId:Y==null?void 0:Y.userId,userName:Y==null?void 0:Y.userName,email:Y==null?void 0:Y.email,phoneNo:Y==null?void 0:Y.phoneNo,role:Y==null?void 0:Y.role,isauthenticated:!0})),F({title:"Success",description:"Login successfull"}),b("/organizations")}}}catch(U){F({title:"Error",description:((ue=(H=U==null?void 0:U.response)==null?void 0:H.data)==null?void 0:ue.message)||"Failed to login",variant:"destructive"})}},z=async q=>{var H,ue;q.preventDefault();try{p({});const U=Nk(l);if(p(U),Object.keys(U).length===0&&!S){const I=await v(l);if(I.ok){const Y=I==null?void 0:I.data;g(Lt({_id:Y==null?void 0:Y.userId,role:Y.role,isauthenticated:!0})),g(gc({userId:Y.userId,userName:Y.userName,email:Y.email,phoneNo:Y.phoneNo,role:Y.role,isauthenticated:!0})),F({title:"Success",description:"Registraiton successfull"}),b("/organizations")}}}catch(U){F({title:"Error",description:((ue=(H=U==null?void 0:U.response)==null?void 0:H.data)==null?void 0:ue.message)||"Failed to Register",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen overflow-y-auto relative bg-gradient-to-br from-blue-50 p-4 via-white to-blue-100 flex items-center justify-center",children:[e.jsx("div",{className:"absolute top-2 left-2",children:y&&e.jsx("button",{onClick:C,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),w?e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sm:p-8 lg:p-10",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Registration"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Create your owner account to get started                            "})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"userName",name:"userName",type:"text",value:l.userName,onChange:P,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${m.userName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.userName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:l.email,onChange:P,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:l.phoneNo,onChange:P,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${m.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:x?"text":"password",value:l.password,onChange:P,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:l.confirmPassword,onChange:P,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>k(!1),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Sign In"})]})})]})}):e.jsx("div",{className:"w-full max-w-md ",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Admin Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-5 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:t.email,onChange:M,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${o.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.email})]})]}),e.jsxs("div",{children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:x?"text":"password",value:t.password,onChange:M,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${o.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:o.password}),e.jsx("button",{type:"button",onClick:()=>h(!x),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:x?e.jsx("i",{className:"fas fa-eye-slash"}):e.jsx("i",{className:"fas fa-eye"})})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Don't have an account? ",e.jsx("button",{onClick:()=>k(!0),className:"text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Register here"})]})})]})})]})},Sk=({projectId:t,setProjectId:a,organizationId:l,setOrganizationId:r})=>{const o=dt(),[d,m]=A.useState(!1),[p,x]=A.useState(window.innerWidth<470);A.useLayoutEffect(()=>{const g=o.pathname.split("/");a(g[3]),r(g[1])},[o.pathname]),A.useEffect(()=>{const g=()=>{x(window.innerWidth<470)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const h={DOCUMENTATION:t?`/${l}/projectdetails/${t}/document`:"",WORKERS:t?`/${l}/projectdetails/${t}/workers`:"",INVITECLIENT:t?`/${l}/projectdetails/${t}/inviteclient`:"",PREREQUIRETIES:t?`/${l}/projectdetails/${t}/prerequireties`:"",REQUIREMENTFORM:t?`/${l}/projectdetails/${t}/requirementform`:"",SITEMEASUREMENT:t?`/${l}/projectdetails/${t}/sitemeasurement`:"",SAMPLEDESIGN:t?`/${l}/projectdetails/${t}/sampledesign`:"",TECHNICALCONSULTANT:t?`/${l}/projectdetails/${t}/technicalconsultant`:"",SELECTSTAGE:t?`/${l}/projectdetails/${t}/selectstage`:"",MODULARUNIT:t?`/${l}/projectdetails/${t}/modularunits`:"",MATERIALSELECTION:t?`/${l}/projectdetails/${t}/materialselection`:"",COSTESTIMATION:t?`/${l}/projectdetails/${t}/costestimation`:"",PAYMENTCONFIRMATION:t?`/${l}/projectdetails/${t}/paymentconfirmation`:"",ORDERMATERIALS:t?`/${l}/projectdetails/${t}/ordermaterial`:"",MATERIALARRIVED:t?`/${l}/projectdetails/${t}/materialarrival`:"",WORKSCHEDULE:t?`/${l}/projectdetails/${t}/workmainschedule`:"",INSTALLATION:t?`/${l}/projectdetails/${t}/installation`:"",QUALITYCHECK:t?`/${l}/projectdetails/${t}/qualitycheck`:"",CLEANINGSANITATION:t?`/${l}/projectdetails/${t}/cleaning`:"",PROJECTDELIVERY:t?`/${l}/projectdetails/${t}/projectdelivery`:""};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-screen h-screen",children:[p?e.jsx(ki,{labels:Yg,path:h,isOpen:d,onClose:()=>m(!1)}):e.jsx(Ci,{path:h,labels:Yg,icons:F2}),e.jsx("main",{className:"!w-[100%] h-full p-2 sm:p-4",children:e.jsx(_t,{context:{projectId:t,setProjectId:a,isMobile:p,isMobileSidebarOpen:d,openMobileSidebar:()=>m(!0),closeMobileSidebar:()=>m(!1)}})})]})})},Ck=({tags:t,setState:a})=>{const[l,r]=A.useState(""),o=m=>{(m.key==="Enter"||m.key===",")&&l.trim()?(m.preventDefault(),t.includes(l.trim())||a(p=>({...p,tags:[...t,l.trim()]})),r("")):m.key==="Backspace"&&!l&&a(p=>({...p,tags:t.slice(0,-1)}))},d=m=>{a(p=>({...p,tags:t.filter((x,h)=>h!==m)}))};return e.jsxs("div",{className:"flex flex-wrap items-center border-b-1 border-[#565656] p-2 gap-2",children:[t.map((m,p)=>e.jsxs("div",{className:"bg-blue-600 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[m,e.jsx("span",{className:"cursor-pointer ml-1 text-xs",onClick:()=>d(p),children:""})]},p)),e.jsx("input",{type:"text",value:l,onChange:m=>r(m.target.value),onKeyDown:o,className:"input flex-1 outline-none text-sm border-none",placeholder:"Type and press Enter"})]})},kk=A.memo(Ck),Ek=async({api:t,projectData:a,orgsId:l})=>{try{let{data:r}=await t.post(`/project/createproject/${l}`,a);if(console.log("create project",r),r.ok)return r}catch(r){throw r}},Ak=async({orgsId:t,api:a})=>{try{let{data:l}=await a.get(`/project/getprojects/${t}`);return l.ok?l.data:[]}catch(l){throw l}},Ok=async(t,a)=>{try{let{data:l}=await a.delete(`/project/deleteproject/${t}`);if(l.ok)return l.data}catch(l){throw l}},Rk=async({projectId:t,formData:a,api:l})=>{try{let{data:r}=await l.put(`/project/updateproject/${t}`,a);if(r.ok)return r}catch(r){throw r}},Tk=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Le({queryKey:["project"],queryFn:async()=>{if(!a)throw new Error("Not Allowed");if(!r.includes(a))throw new Error("Not Allowed");if(!l)throw new Error("API not found");return await Ak({orgsId:t,api:l})},enabled:!!a,refetchOnWindowFocus:!1,retry:!1,staleTime:1e3*60*10})},Pk=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({projectData:r,orgsId:o})=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await Ek({api:a,orgsId:o,projectData:r})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project"]})}})},Mk=()=>{const{role:t}=W(),a=Z(t),l=["owner","CTO"];return le({mutationFn:async r=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await Ok(r,a)},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project"]})}})},Fk=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({projectId:r,formData:o})=>{if(!t)throw new Error("Not Authrorized");if(!l.includes(t))throw new Error("Not Allowed to make api calls");if(!a)throw new Error("API not found");return await Rk({projectId:r,formData:o,api:a})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project"]})}})},D0=({message:t,onClick:a})=>{const[l,r]=A.useState(!0),[o,d]=A.useState("in"),m=()=>{d("out")},p=()=>{o==="out"&&(r(!1),a())};return l?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes bounceScaleIn {
          0% { transform: scale(0); }
          60% { transform: scale(1.1); }
          80% { transform: scale(0.95); }
          100% { transform: scale(1); }
        }
        @keyframes bounceScaleOut {
          0% { transform: scale(1); }
          20% { transform: scale(1.1); }
          100% { transform: scale(0); }
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-[#0a0a0a10] z-[1099] flex items-center justify-center px-4",onClick:()=>m(),children:e.jsxs("div",{onClick:x=>x.stopPropagation(),style:{animation:o==="in"?"bounceScaleIn 0.2s ease-out forwards":"bounceScaleOut 0.2s ease-in forwards"},onAnimationEnd:p,className:"bg-[#2f303a] text-gray-800 rounded-2xl !w-[30%] shadow-lg !px-6 max-w-lg sm:!px-3 sm:py-2 sm:w-full text-center !space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-red-500 pb-2",children:[e.jsx("span",{className:"text-white text-lg",children:"Error occured"}),e.jsx("span",{className:"cursor-pointer",onClick:m,children:e.jsx("i",{className:"fa-solid fa-xmark text-red-500 text-lg"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-lg",children:t[0].toUpperCase()+t.slice(1)}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:m,className:"cursor-pointer inline-block bg-red-500 hover:bg-red-800 duration-200 px-5 py-1 rounded-md text-white",children:"OK"})})]})]})})]}):null},Lk=["none","low","medium","high"],Dk=["Active","Delayed","In Progress","In Testing","On Track","On Hold","Approved","Cancelled","Planning","Invoice"],_k={Active:"bg-green-100 text-green-800",Delayed:"bg-red-100 text-red-800","In Progress":"bg-blue-100 text-blue-800","In Testing":"bg-yellow-100 text-yellow-800","On Track":"bg-emerald-100 text-emerald-800","On Hold":"bg-gray-100 text-gray-800",Approved:"bg-indigo-100 text-indigo-800",Cancelled:"bg-rose-100 text-rose-800",Planning:"bg-purple-100 text-purple-800",Invoice:"bg-pink-100 text-pink-800"},qk=({onClose:t,refetch:a,setShowForm:l,organizationId:r,isEditing:o,setEditForm:d,editForm:m,editProjectId:p})=>{var q,H,ue,U;const[x,h]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,b]=A.useState({}),w=(I,Y)=>{let{name:G,value:re}=I.target;if(G==="tags"){Y(_=>({..._,tags:Array.from(new Set([..._.tags,re]))}));return}if(G.includes("Date")){const _=re?new Date(re):null;Y(X=>{const ce={...X,[G]:_};if(ce.startDate&&ce.dueDate){const te=ce.dueDate.getTime()-ce.startDate.getTime();te>=0?ce.duration=Math.ceil(te/(1e3*3600*24)):ce.duration=0}return ce});return}Y(_=>({..._,[G]:re}))},{mutateAsync:k,isPending:y,error:C,isError:j,reset:S}=Pk(),{mutateAsync:v,isPending:N,error:M,isError:P,reset:L}=Fk(),z=async I=>{var Y,G;I.preventDefault(),I.stopPropagation();try{const re=F0(o?m:x);b(re),Object.keys(re).length===0&&(o&&p?N||(await v({projectId:p,formData:m}),F({title:"Success",description:"Project Edited Successfully"})):y||(await k({projectData:x,orgsId:r}),F({title:"Success",description:"Project Created Successfully"})),a(),l(!1))}catch(re){F({title:"Error",description:((G=(Y=re==null?void 0:re.response)==null?void 0:Y.data)==null?void 0:G.message)||(re==null?void 0:re.message)||"Operation Failed",variant:"destructive"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{onClick:I=>I.stopPropagation(),className:"bg-white w-full h-full overflow-y-auto custom-scrollbar max-w-3xl mx-auto rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 border border-gray-200 relative",children:[!y&&j&&e.jsx(D0,{message:((H=(q=C==null?void 0:C.response)==null?void 0:q.data)==null?void 0:H.message)||(C==null?void 0:C.message)||"Something went wrong",onClick:()=>S()}),!N&&P&&e.jsx(D0,{message:((U=(ue=M==null?void 0:M.response)==null?void 0:ue.data)==null?void 0:U.message)||(M==null?void 0:M.message)||"Something went wrong",onClick:()=>L()}),e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-edit"})," Edit Project"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-plus"})," Create Project"]})}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-red-500 text-xl",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),e.jsx("input",{autoFocus:!0,name:"projectName",value:o?m.projectName:x.projectName,onChange:I=>w(I,o?d:h),type:"text",placeholder:"Enter name",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.projectName&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.projectName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (days)"}),e.jsx("input",{disabled:!0,type:"number",name:"duration",onChange:I=>w(I,o?d:h),value:o?m.duration:x.duration,placeholder:"Ex: 15",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{rows:3,name:"description",onChange:I=>w(I,o?d:h),value:o?m.description:x.description,placeholder:"Brief project overview",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx(kk,{tags:o?m.tags:x.tags,setState:o?d:h})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",onChange:I=>w(I,o?d:h),value:o?m.startDate?m.startDate.toISOString().split("T")[0]:"":x.startDate?x.startDate.toISOString().split("T")[0]:"",name:"startDate",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.startDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",onChange:I=>w(I,o?d:h),value:o?m.endDate?m.endDate.toISOString().split("T")[0]:"":x.endDate?x.endDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.endDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.endDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",onChange:I=>w(I,o?d:h),value:o?m.dueDate?m.dueDate.toISOString().split("T")[0]:"":x.dueDate?x.dueDate.toISOString().split("T")[0]:"",className:"input outline-none w-full border border-gray-300 rounded-md px-3 py-2"}),g.dueDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:g.dueDate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("select",{name:"priority",onChange:I=>w(I,o?d:h),value:o?m.priority:x.priority,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:Lk.map(I=>e.jsx("option",{value:I,children:I},I))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{name:"status",onChange:I=>w(I,o?d:h),value:o?m.status:x.status,className:"input w-full border border-gray-300 rounded-md px-3 py-2",children:Dk.map(I=>e.jsx("option",{value:I,children:I},I))})]})]}),e.jsx("div",{className:"text-end",children:e.jsx(T,{isLoading:y||N,type:"submit",disabled:y||N,className:"bg-blue-600 text-white px-6 w-full sm:w-40 py-2 rounded-xl hover:bg-blue-700 transition-all",children:y||N?e.jsx("div",{className:"mx-auto w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):o?"Edit Project":"Create Project"})})]})]})})},zk=A.memo(qk);function ui(t){if(!t)return"N/A";const a=new Date(t).getFullYear(),l=new Date(t).getMonth()+1;return`${new Date(t).getDate()}-${l}-${a}`}const Uk=({project:t,onEdit:a,organizationId:l,refetch:r})=>{const{setProjectId:o}=He(),{mutateAsync:d,isPending:m}=Mk(),p=k=>{o(k)},x=k=>{switch(k){case"high":return"bg-red-100 text-red-500";case"medium":return"bg-yellow-100 text-yellow-600";case"low":return"bg-green-100 text-green-600";default:return"bg-white shadow-sm"}},h=A.useMemo(()=>{var k;return(k=t.projectInformation)!=null&&k.startDate?ui(t.projectInformation.startDate):null},[]),g=A.useMemo(()=>{var k;return(k=t.projectInformation)!=null&&k.endDate?ui(t.projectInformation.endDate):null},[]),b=A.useMemo(()=>{var k;return(k=t.projectInformation)!=null&&k.dueDate?ui(t.projectInformation.dueDate):null},[]),w=async()=>{var k,y;try{if(!window.confirm("Are you sure you want to delete this project?"))return;await d(t._id),F({title:"Success",description:"Project Deleted Successfully"}),r()}catch(C){F({title:"Error",description:((y=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:y.message)||(C==null?void 0:C.message)||"Failed to Delete",variant:"destructive"})}};return e.jsxs("div",{className:"p-2 sm:p-5 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xl font-semibold text-[#1f2d3d]",children:[e.jsx("i",{className:"fa-solid fa-folder-open text-blue-600"}),t.projectName]}),e.jsxs("span",{className:`text-sm px-3 py-1 rounded-full font-medium ${x(t.projectInformation.priority)}`,children:[t.projectInformation.priority," priority"]})]}),e.jsxs("div",{className:"text-sm text-gray-700 grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-y-1 sm:gap-y-2 gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-day text-gray-500"}),e.jsx("strong",{children:"Start:"})," ",h||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"End:"})," ",g||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-calendar-check text-gray-500"}),e.jsx("strong",{children:"Due:"})," ",b||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Duration: ",t.projectInformation.duration," days"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half text-gray-500"}),e.jsxs("strong",{children:["Status: ",e.jsx("span",{className:`${_k[t.projectInformation.status]} !bg-transparent`,children:t.projectInformation.status})," "]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Progress"}),e.jsx("div",{className:"mt-1 w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600",style:{width:`${t.completionPercentage}%`}})}),e.jsxs("div",{className:"text-sm text-right text-gray-600 mt-1",children:[t.completionPercentage,"% Complete"]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-2 text-sm text-blue-600",children:[e.jsxs(Rt,{to:`/${l}/projectdetails/${t._id}/requirementform`,onClick:()=>p(t._id),className:"hover:underline cursor-pointer flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-eye"}),"View"]}),e.jsxs(T,{isLoading:m,variant:"outline",onClick:w,className:"hover:underline cursor-pointer flex items-center gap-1 text-red-500 !border-0",children:[e.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),e.jsxs("button",{onClick:()=>a(t,t._id),className:"hover:underline cursor-pointer flex items-center gap-1 text-amber-500",children:[e.jsx("i",{className:"fa-solid fa-pencil"}),"edit"]})]})]})},Ik=A.memo(Uk);function $k(t){return{projectName:t.projectName,description:t.description??"",duration:t.projectInformation.duration??0,tags:t.projectInformation.tags??[],startDate:t.projectInformation.startDate?new Date(t.projectInformation.startDate):null,endDate:t.projectInformation.endDate?new Date(t.projectInformation.endDate):null,dueDate:t.projectInformation.dueDate?new Date(t.projectInformation.dueDate):null,priority:t.projectInformation.priority??"none",status:t.projectInformation.status??"Active"}}const _0=()=>e.jsxs("div",{className:"animate-pulse bg-white border-l-8 border-blue-600 shadow-md rounded-xl p-4 flex flex-col justify-between min-h-[250px] w-full max-w-[500px]",children:[e.jsx("div",{className:"h-5 w-1/2 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-3 w-1/3 bg-gray-300 rounded"})]}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 rounded"})]})]}),Bk=()=>{var P,L;const{organizationId:t}=Ce(),{openMobileSidebar:a,isMobile:l}=He(),{role:r}=ps(z=>z.authStore),[o,d]=A.useState(!1),[m,p]=A.useState(!1),[x,h]=A.useState({projectName:"",description:"",duration:0,tags:[],startDate:new Date,endDate:null,dueDate:null,priority:"none",status:"Active"}),[g,b]=A.useState(null);let{data:w,refetch:k,isPending:y,error:C,isLoading:j}=Tk(t);const S=["owner","CTO","staff"],v=A.useCallback((z,q)=>{const H=$k(z);h(H),b(q),p(!0),d(!0)},[]),N=A.useCallback(()=>{d(!1),p(!1)},[]),M=A.useCallback((z,q)=>{v(z,q)},[v]);return j?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(z=>e.jsx(_0,{},z))}):e.jsxs("div",{className:"w-[100%] flex flex-col h-full min-h-0 ",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex ",children:[l&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border-none border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-[#1f2d3d] flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-diagram-project text-blue-600 text-2xl"}),e.jsx("p",{children:Bm.PROJECTS})]})]}),S.includes(r)&&e.jsx("div",{onClick:()=>{d(!o)},className:"bg-blue-600  cursor-pointer !h-[40px] !w-[40px] flex justify-center items-center rounded-full",children:e.jsx("i",{className:`fa-solid fa-plus text-white transition-transform duration-300 ${o?"rotate-135":"rotate-0"}`})})]}),e.jsx("hr",{className:"my-2 border-b-1 border-gray-300"}),!y&&((w==null?void 0:w.length)??0)===0&&e.jsxs("div",{className:"flex h-full flex-col items-center justify-center w-full py-16 text-center text-gray-500",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Projects Found"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 max-w-md",children:"Looks like you havent added any projects yet. Click the + button to get started and create your first project."}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 cursor-pointer hover:bg-blue-700 text-white px-4 py-2 rounded-md transition",children:"Create New Project"})]}),C&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((L=(P=C==null?void 0:C.response)==null?void 0:P.data)==null?void 0:L.message)||"Failed to load the projects"}),e.jsx(T,{onClick:()=>k(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!C&&e.jsxs("div",{className:"h-full flex-1 !overflow-y-auto custom-scrollbar grid md:grid-cols-2 gap-6",children:[y&&[...Array(6)].map((z,q)=>e.jsx(A.Fragment,{children:e.jsx(_0,{})},q)),!y&&(w==null?void 0:w.length)>0&&(w==null?void 0:w.map((z,q)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-[256px] sm:!h-[270px] md:!h-[330px] lg:!h-[282px] flex flex-col shadow-md rounded-xl overflow-hidden border-l-8 border-blue-600 bg-white",children:e.jsx(Ik,{refetch:k,onEdit:M,index:q,project:z,organizationId:t})},z._id)})))]}),o&&e.jsx("div",{onClick:N,className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx(zk,{onClose:N,refetch:k,setShowForm:d,organizationId:t,isEditing:m,setEditForm:h,editForm:x,editProjectId:g})})]})},Hk=()=>{const t=Fe();return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center px-4 py-10 bg-gray-100",children:e.jsxs("div",{className:"max-w-lg w-full text-center bg-white rounded-xl shadow-md p-8 space-y-6 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-6xl sm:text-7xl font-extrabold text-blue-700",children:"404"}),e.jsx("p",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mt-2",children:"Page Not Found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sorry! The page youre looking for doesnt exist or has been moved."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:()=>t("/organizations"),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-house mr-2"}),"Go to Home"]}),e.jsxs("button",{onClick:()=>t(-1),className:"w-full sm:w-auto px-6 py-3 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 transition duration-200",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-2"}),"Go Back"]})]})]})})},Qk=async t=>{const{data:a}=await $s.post("/orgs/createorganziation",t);if(!a.ok)throw new Error(a.message);return a.data},Gk=async t=>{const{data:a}=await t.get("/orgs/getorganizations");return a.ok?a.data:null},Kk=async(t,a)=>{const{data:l}=await a.get(`/orgs/getsingleorganization/${t}`);return l.ok?l.data:{}},Vk=async({updateField:t,orgsId:a,api:l})=>{const{data:r}=await l.put(`/orgs/updateorganization/${a}`,t);if(!r.ok)throw new Error(r.message);return r.data},Yk=async(t,a)=>{const{data:l}=await a.put(`/orgs/deleteorganization/${t}`);if(!l.ok)throw new Error(l.message);return l},Wk=()=>{const t=["owner","staff","CTO","client","worker"],{role:a}=W(),l=Z(a);return Le({queryKey:["myOrgs"],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await Gk(l)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},Xk=t=>{const a=["owner","staff","CTO","client","worker"],{role:l}=W(),r=Z(l);return Le({queryKey:["myOrgs"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await Kk(t,r)},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:!1})},Zk=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async r=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Qk(r)},onSuccess:()=>{Ee.invalidateQueries({queryKey:["myOrgs"]})}})},Jk=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async({updateField:r,orgsId:o})=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Vk({updateField:r,orgsId:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["myOrgs"]})}})},eE=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async r=>{if(!a)throw new Error("Not authorized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await Yk(r,l)},onSuccess:()=>{Ee.invalidateQueries({queryKey:["myOrgs"]})}})},tE=async(t,a)=>{const{data:l}=await a.get(`/orgs/getstaffsoforganization/${t}`);return l.ok,l.data},sE=async(t,a)=>{const{data:l}=await a.post("/orgs/invitestafftoorganization",t);if(!l.ok)throw new Error(l.message);return l.data},aE=async({staffId:t,orgId:a,api:l})=>{const{data:r}=await l.patch(`/orgs/removestafffromorganziation?staffId=${t}&orgId=${a}`);if(!r.ok)throw new Error(r.message);return r.data},nE=t=>{const a=["owner","staff","CTO"],{role:l}=W(),r=Z(l);return Le({queryKey:["staffs",t],queryFn:async()=>{if(!l)throw new Error("Not authrized");if(!a.includes(l))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await tE(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},lE=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async r=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await sE(r,l)}})},rE=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async({staffId:r,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await aE({staffId:r,orgId:o,api:l})},onSuccess:(r,o)=>{Ee.invalidateQueries({queryKey:["staffs",o.orgId]})}})},iE=async(t,a)=>{const{data:l}=await a.get(`/orgs/getctooforganization/${t}`);return l.ok,l.data},oE=async(t,a)=>{const{data:l}=await a.post("/orgs/invitectotoorganization",t);if(!l.ok)throw new Error(l.message);return l.data},cE=async({CTOId:t,orgId:a,api:l})=>{const{data:r}=await l.patch(`/orgs/removectofromorganziation?CTOId=${t}&orgId=${a}`);if(!r.ok)throw new Error(r.message);return r.data},dE=t=>{const a=["owner","staff","CTO"],{role:l}=W(),r=Z(l);return Le({queryKey:["CTO",t],queryFn:async()=>{if(!l)throw new Error("Not authrized");if(!a.includes(l))throw new Error("youre not allowed to access this api");if(!r)throw new Error("api is null");return await iE(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},uE=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async r=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await oE(r,l)}})},mE=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async({CTOId:r,orgId:o})=>{if(!a)throw new Error("Not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await cE({CTOId:r,orgId:o,api:l})},onSuccess:(r,o)=>{Ee.invalidateQueries({queryKey:["CTO",o.orgId]})}})},fE=async({projectId:t,api:a,organizationId:l})=>{const{data:r}=await a.post("orgs/inviteclienttoproject",{projectId:t,organizationId:l});if(!r.ok)throw new Error(r.message);return r.data},hE=()=>{const t=["owner","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,organizationId:o})=>{if(!a)throw new Error("not authrized");if(!t.includes(a))throw new Error("youre not allowed to access this api");if(!l)throw new Error("api is null");return await fE({projectId:r,api:l,organizationId:o})}})},xE=async(t,a)=>{const{data:l}=await $s.get(`/orgs/getclientsofproject/${t}/${a}`);return l.ok,console.log("data",l),l.data},pE=(t,a)=>{const l=["owner","staff","CTO"],{role:r}=W(),o=Z(r);return Le({queryKey:["CTO",t],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await xE(t,a)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},gE=async({payload:t,api:a})=>{console.log("payload",t);const{data:l}=await a.post("orgs/inviteworker",t);if(!l.ok)throw new Error(l.message);return l.data},bE=async(t,a)=>{const{data:l}=await a.get(`orgs/getworker/${t}`);if(!l.ok)throw new Error(l.message);return l.data},yE=async({workerId:t,projectId:a,api:l})=>{const{data:r}=await l.put(`orgs/removeworker/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},wE=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async r=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await gE({api:l,payload:r})}})},vE=t=>{const a=["owner","staff","CTO"],{role:l}=W(),r=Z(l);return Le({queryKey:["workers",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not Allowed to Make this api Call");if(!r)throw new Error("API instance not found for role");return await bE(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},jE=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({workerId:r,projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await yE({workerId:r,projectId:o,api:l})},onSuccess:()=>Ee.invalidateQueries({queryKey:["workers"]})})},NE=({children:t})=>{const[a,l]=A.useState(!1),r=A.useRef(null);return A.useEffect(()=>{const o=d=>{r.current&&!r.current.contains(d.target)&&l(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]),e.jsx("div",{ref:r,className:"relative inline-block text-left",children:ct.Children.map(t,o=>{if(ct.isValidElement(o)){if(o.type===qy)return ct.cloneElement(o,{onClick:()=>l(!a)});if(o.type===zy)return ct.cloneElement(o,{isOpen:a,onClose:()=>l(!1)})}return o})})},qy=({asChild:t=!1,children:a,onClick:l})=>t&&ct.isValidElement(a)?ct.cloneElement(a,{onClick:r=>{var o;if(r.stopPropagation(),l==null||l(),ct.isValidElement(a)){const d=(o=a.props)==null?void 0:o.onClick;typeof d=="function"&&d(r)}}}):e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),l==null||l()},className:"inline-flex items-center justify-center",children:a}),zy=({align:t="start",className:a="",children:l,isOpen:r=!1,onClose:o})=>{if(!r)return null;const d=t==="end"?"right-0":"left-0";return e.jsx("div",{className:`absolute ${d} mt-2 w-48 rounded-xl bg-white shadow-lg border border-gray-200 py-1 z-50 ${a}`,children:ct.Children.map(l,m=>ct.isValidElement(m)&&m.type===Uy?ct.cloneElement(m,{onClose:o}):m)})},Uy=({className:t="",children:a,onClick:l,onClose:r})=>{const o=()=>{l==null||l(),r==null||r()};return e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center ${t}`,onClick:o,children:a})},Oa=({variant:t="default",className:a="",children:l})=>{const d=`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${{default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",outline:"border border-blue-200 text-blue-700"}[t]} ${a}`.trim();return e.jsx("span",{className:d,children:l})};var Iy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q0=ct.createContext&&ct.createContext(Iy),SE=["attr","size","title"];function CE(t,a){if(t==null)return{};var l=kE(t,a),r,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(o=0;o<d.length;o++)r=d[o],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(l[r]=t[r])}return l}function kE(t,a){if(t==null)return{};var l={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(a.indexOf(r)>=0)continue;l[r]=t[r]}return l}function Sc(){return Sc=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r])}return t},Sc.apply(this,arguments)}function z0(t,a){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),l.push.apply(l,r)}return l}function Cc(t){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?z0(Object(l),!0).forEach(function(r){EE(t,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):z0(Object(l)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(l,r))})}return t}function EE(t,a,l){return a=AE(a),a in t?Object.defineProperty(t,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[a]=l,t}function AE(t){var a=OE(t,"string");return typeof a=="symbol"?a:a+""}function OE(t,a){if(typeof t!="object"||!t)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var r=l.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function $y(t){return t&&t.map((a,l)=>ct.createElement(a.tag,Cc({key:l},a.attr),$y(a.child)))}function Ei(t){return a=>ct.createElement(RE,Sc({attr:Cc({},t.attr)},a),$y(t.child))}function RE(t){var a=l=>{var{attr:r,size:o,title:d}=t,m=CE(t,SE),p=o||l.size||"1em",x;return l.className&&(x=l.className),t.className&&(x=(x?x+" ":"")+t.className),ct.createElement("svg",Sc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,r,m,{className:x,style:Cc(Cc({color:t.color||l.color},l.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),d&&ct.createElement("title",null,d),t.children)};return q0!==void 0?ct.createElement(q0.Consumer,null,l=>a(l)):a(Iy)}function TE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function PE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function ME(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function FE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function LE(t){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function DE({organization:t}){const a=eE(),l=Fe(),r=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await a.mutateAsync(t._id),F({title:"Success",description:"Organization deleted successfully"})}catch(o){F({title:"Error",description:o.message||"Failed to delete organization",variant:"destructive"})}};return e.jsxs(De,{className:"group hover:shadow-2xl transition-all duration-300 hover:bg-white hover:scale-105",children:[e.jsx(ns,{className:"pb-4 bg-gradient-to-br from-blue-50 to-blue-100/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t!=null&&t.logoUrl?e.jsx("img",{src:t.logoUrl||"/placeholder.svg",alt:t.organizationName,className:"w-8 h-8 rounded-lg object-cover"}):e.jsx(LE,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-blue-900 text-lg truncate",children:t==null?void 0:t.organizationName}),t.type&&e.jsx(Oa,{variant:"default",className:"mt-1",children:t.type})]})]}),e.jsxs(NE,{children:[e.jsx(qy,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(PE,{className:"h-4 w-4"})})}),e.jsx(zy,{align:"end",children:e.jsxs(Uy,{onClick:r,className:"text-red-600 focus:text-red-600",children:[e.jsx(FE,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]})}),e.jsx(Dt,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx(TE,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),(t==null?void 0:t.address)||"N/A"]}),(t==null?void 0:t.organizationPhoneNo)&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(ME,{className:"w-4 h-4 mr-2 text-blue-500"}),t.organizationPhoneNo]}),e.jsx("div",{className:"flex items-center justify-end pt-3 border-t border-blue-100",children:e.jsx(T,{variant:"outline",size:"sm",onClick:()=>l(`/organizations/${t._id}`),className:"border-blue-200 text-blue-600 hover:bg-blue-50",children:"View Details"})})]})})]})}const vs=({className:t="",error:a,...l})=>{const d=`w-full px-3 py-2 border rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none ${a?"border-red-300 focus:border-red-500 focus:ring focus:ring-red-200":"border-blue-200 focus:border-blue-500 focus:ring focus:ring-blue-200"} ${t}`.trim();return e.jsxs("div",{className:"w-full",children:[e.jsx("textarea",{className:d,...l}),a&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},By=({open:t,onOpenChange:a,children:l})=>{const r=A.useRef(null);return A.useEffect(()=>{const o=m=>{m.key==="Escape"&&a(!1)},d=m=>{r.current&&!r.current.contains(m.target)&&a(!1)};return t&&(document.addEventListener("keydown",o),document.addEventListener("mousedown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.removeEventListener("mousedown",d),document.body.style.overflow="unset"}},[t,a]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{ref:r,className:"relative z-50 w-full max-w-lg mx-4",children:l})]}):null},_E=({className:t="",children:a})=>e.jsx("div",{className:`bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto ${t}`,children:a}),qE=({className:t="",children:a})=>e.jsx("div",{className:`p-6 pb-4 ${t}`,children:a}),zE=({className:t="",children:a})=>e.jsx("h2",{className:`text-xl font-semibold text-gray-900 ${t}`,children:a});function UE({isOpen:t,onClose:a}){const[l,r]=A.useState({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),o=Zk(),d=async p=>{var x,h;if(p.preventDefault(),!l.organizationName.trim()){F({title:"Error",description:"Organization name is required",variant:"destructive"});return}try{await o.mutateAsync(l),F({title:"Success",description:"Organization created successfully"}),r({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),a()}catch(g){F({title:"Error",description:((h=(x=g==null?void 0:g.response)==null?void 0:x.data)==null?void 0:h.message)||"Failed to create organization",variant:"destructive"})}},m=p=>{r(x=>({...x,[p.target.name]:p.target.value}))};return e.jsx(By,{open:t,onOpenChange:a,children:e.jsxs(_E,{className:"sm:max-w-md p-4",children:[e.jsx(qE,{children:e.jsx(zE,{className:"text-blue-900",children:"Create New Organization"})}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"organizationName",className:"text-blue-800",children:"Organization Name *"}),e.jsx(de,{id:"organizationName",name:"organizationName",value:l.organizationName,onChange:m,placeholder:"Enter organization name",className:"border-blue-200 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"type",className:"text-blue-800",children:"Type"}),e.jsx(de,{id:"type",name:"type",value:l.type,onChange:m,placeholder:"e.g., Company, NGO, Startup",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"organizationPhoneNo",className:"text-blue-800",children:"Phone Number"}),e.jsx(de,{id:"organizationPhoneNo",name:"organizationPhoneNo",value:l.organizationPhoneNo,onChange:m,placeholder:"Enter phone number",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"address",className:"text-blue-800",children:"Address"}),e.jsx(vs,{id:"address",name:"address",value:l.address,onChange:m,placeholder:"Enter organization address",className:"border-blue-200 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"logoUrl",className:"text-blue-800",children:"Logo URL"}),e.jsx(de,{id:"logoUrl",name:"logoUrl",value:l.logoUrl,onChange:m,placeholder:"Enter logo URL",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(T,{type:"button",variant:"outline",onClick:a,className:"border-blue-200 text-blue-600",children:"Cancel"}),e.jsx(T,{type:"submit",disabled:o.isPending,className:"bg-blue-600 hover:bg-blue-700",children:o.isPending?"Creating...":"Create Organization"})]})]})]})})}const Te=({className:t=""})=>e.jsx("div",{className:`animate-pulse rounded-md bg-gray-200 ${t}`});function IE(){var k,y;const[t,a]=A.useState(!1),[l,r]=A.useState(!1),[o,d]=A.useState(window.innerWidth<470),m=Fe();let{data:p,isLoading:x,error:h,refetch:g}=Wk();const b={ADMIN:"/login",STAFF:"/login/staff",CTO:"/login/cto",WORKER:"/login/worker",CLIENT:"/login/client"},w=()=>{r(!0)};return A.useEffect(()=>{const C=()=>{d(window.innerWidth<470)};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),x?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"h-8 w-48 mb-2"}),e.jsx(Te,{className:"h-4 w-64"})]}),e.jsx(Te,{className:"h-10 w-40"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(C=>e.jsx(Te,{className:"h-24 w-full rounded-2xl"},C))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6].map(C=>e.jsx(Te,{className:"h-64 w-full rounded-2xl"},C))})]})]}):h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Organizations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:((y=(k=h==null?void 0:h.response)==null?void 0:k.data)==null?void 0:y.message)||(h==null?void 0:h.message)||"Something happened try again please"}),e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[e.jsxs(T,{onClick:()=>g(),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]}),e.jsxs(T,{onClick:()=>m("/login/staff"),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Login"]})]})]})}):e.jsxs("main",{className:"w-screen h-screen flex flex:1",children:[o?e.jsx(ki,{labels:ic,path:b,isOpen:l,onClose:()=>r(!1)}):e.jsx(Ci,{path:b,labels:ic,icons:Ab}),e.jsxs("section",{className:"w-full h-full",children:[e.jsx("div",{className:"max-w-full min-h-[10%] bg-white/90 backdrop-blur-sm border-b border-blue-200",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 py-3",children:e.jsxs("div",{className:"flex  sm:flex-row items-center sm:items-center justify-between gap-3 sm:gap-6",children:[e.jsxs("div",{className:"flex flex:1 items-center",children:[o&&e.jsx("button",{onClick:w,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"flex flex-col gap-1 w-[50vw]",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-blue-800",children:[e.jsx("i",{className:"fas fa-building mr-2 text-blue-600"}),"Organization"]}),e.jsx("p",{className:"text-sm sm:inline hidden text-blue-500",children:"Manage your organization and teams"})]})]}),!p&&e.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3 sm:gap-4 w-full sm:w-auto",children:e.jsxs(T,{onClick:()=>a(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Organization"}),e.jsx("span",{className:"inline sm:hidden",children:"Create"})]})})]})})}),e.jsx("div",{className:" min-h-[calc(100vh-10%)] sm:min-h-[calc(100vh-11%)] bg-gradient-to-br from-blue-50 via-white to-blue-100",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 py-6 relative",children:[p?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Your Organization"})}),e.jsx("div",{className:" xl:!w-[30%] lg:w-[50%] sm:w-[60%] w-[100%]",children:e.jsx(DE,{organization:p})})]}):e.jsx("div",{className:"text-center py-2 overflow-y-auto max-h-[calc(100vh-15vh)]",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-4xl"})}),e.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:"No Organizations Yet"}),e.jsx("p",{className:"text-blue-600 mb-6 text-sm sm:text-base",children:"Create your first organization to start managing your teams and projects effectively"}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-6 text-left",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-4 text-center",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Getting Started"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Create your organization with basic details"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Invite team members to join your organization"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Start managing tasks and projects together"})]})]})]}),e.jsxs(T,{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Create Your First Organization"]})]})}),e.jsx(UE,{isOpen:t,onClose:()=>a(!1)})]})})]})]})}const $E=async(t,a,l)=>(await l.get(`/getusers/${t}/${a}`)).data.data,di=(t,a)=>{const{role:l}=W(),r=Z(l),o=["owner","staff","CTO"];return Le({queryKey:["get-users",t,a],queryFn:async()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return await $E(t,a,r)},retry:!1,refetchOnMount:!1})},Xo=({title:t,icon:a,list:l,isLoading:r})=>{const[o,d]=A.useState(""),m=A.useMemo(()=>l!=null&&l.length?l==null?void 0:l.filter(p=>{var x,h;return((x=p.name)==null?void 0:x.toLowerCase().includes(o.toLowerCase()))||((h=p.email)==null?void 0:h.toLowerCase().includes(o.toLowerCase()))}):[],[l,o]);return e.jsxs("div",{className:"bg-white border rounded-xl !min-h-[50%] !max-h-[93%] overflow-hidden border-blue-100 shadow-sm px-4 py-5 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-blue-800 font-semibold flex items-center gap-2 text-base",children:[e.jsx("i",{className:`fas ${a} text-blue-600 text-lg`}),t]}),l&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs font-medium px-2 py-0.5 rounded-full",children:[l==null?void 0:l.length," total"]})]}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search name or email",value:o,onChange:p=>d(p.target.value),className:"w-full px-3 py-1.5 border border-blue-200 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-400"})}),e.jsx("div",{className:"max-h-[100%] overflow-y-auto custom-scrollbar pr-1 scroll-smooth scrollbar-thin scrollbar-thumb-blue-300 hover:scrollbar-thumb-blue-400 scrollbar-track-blue-100",children:r?e.jsx(Te,{className:"h-4 w-1/2 mx-2 mb-2"}):(m==null?void 0:m.length)>0?e.jsx("ul",{className:"space-y-3 pt-1",children:m==null?void 0:m.map(p=>e.jsxs("li",{className:"flex items-start gap-3 px-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mt-0.5",children:e.jsx("i",{className:"fas fa-user"})}),e.jsxs("div",{className:"text-sm text-gray-700 leading-tight",children:[e.jsx("p",{className:"font-medium",children:p.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:p.email})]})]},p._id))}):e.jsxs("p",{className:"text-sm text-gray-500 text-center py-6",children:["No ",t.toLowerCase()," found."]})})]})};function BE(){const{organizationId:t}=Ce(),{openMobileSidebar:a,isMobile:l}=He(),r=Fe(),[o,d]=A.useState(!1),[m,p]=A.useState(""),[x,h]=A.useState(!1),[g,b]=A.useState(!1),[w,k]=A.useState(""),[y,C]=A.useState("");let{data:j,isLoading:S,error:v}=Xk(t);Array.isArray(j)&&(j=j[0]);const N=Jk(),{data:M,isLoading:P}=di(t,"staff"),{data:L,isLoading:z}=di(t,"CTO"),{data:q,isLoading:H}=di(t,"worker"),{data:ue,isLoading:U}=di(t,"client"),I=async()=>{if(!m.trim()){F({title:"Error",description:"Organization name cannot be empty",variant:"destructive"});return}try{await N.mutateAsync({updateField:{organizationName:m},orgsId:t}),F({title:"Success",description:"Organization name updated successfully"}),d(!1)}catch($){F({title:"Error",description:$.message||"Failed to update organization name",variant:"destructive"})}},Y=()=>{p((j==null?void 0:j.organizationName)||""),d(!0)},G=()=>{p(""),d(!1)},re=()=>{k((j==null?void 0:j.organizationPhoneNo)||""),h(!0)},_=()=>{C((j==null?void 0:j.address)||""),b(!0)},X=async()=>{var $,D;if(!w.trim()){F({title:"Error",description:"Phone number cannot be empty",variant:"destructive"});return}if(!/^\d{10}$/.test(w)){F({title:"Error",description:"Phone number should contain 10 digits number",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{organizationPhoneNo:w}}),F({title:"Success",description:"Phone number updated successfully"}),h(!1)}catch(V){F({title:"Error",description:((D=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:D.message)||(V==null?void 0:V.message)||"Failed to update phone number",variant:"destructive"})}},ce=async()=>{var $,D;if(!y.trim()){F({title:"Error",description:"Address cannot be empty",variant:"destructive"});return}if(y.length>150){F({title:"Error",description:"Address cannot be more than 150 characters",variant:"destructive"});return}try{await N.mutateAsync({orgsId:t,updateField:{address:y}}),F({title:"Success",description:"Address updated successfully"}),b(!1)}catch(V){F({title:"Error",description:((D=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:D.message)||(V==null?void 0:V.message)||"Failed to update address",variant:"destructive"})}},te=()=>{k(""),h(!1)},O=()=>{C(""),b(!1)};return S?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(Te,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(Te,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(Te,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(Te,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(Te,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Te,{className:"h-96 w-full rounded-2xl"})})]})})]}):v||!j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(T,{onClick:()=>r("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsx("div",{className:"flex w-full h-full ",children:e.jsxs("div",{className:"min-h-full w-full max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white bg-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10 w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-3 flex flex-row sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-6",children:e.jsxs("div",{className:"flex flex-row sm:items-center justify-between  w-full gap-3 sm:gap-4",children:[l?e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}):e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>r("/organizations"),className:"text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Back to Organizations"}),e.jsx("span",{className:"md:hidden",children:"Back"})]}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:j!=null&&j.logoUrl?e.jsx("img",{src:(j==null?void 0:j.logoUrl)||yt.COMPANY_LOGO,alt:j==null?void 0:j.organizationName,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"}):e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Company Logo",className:"w-6 h-6 sm:w-7 sm:h-7 rounded-lg object-cover"})}),e.jsx("div",{className:"min-w-0 flex-1 ",children:o?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx(de,{value:m,onChange:$=>p($.target.value),onKeyPress:$=>$.key==="Enter"&&I(),placeholder:"Organization name",className:"w-full text-lg sm:text-xl font-bold border-2 border-blue-300 focus:border-blue-500 rounded-xl bg-white/90 backdrop-blur-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{size:"sm",variant:"primary",onClick:I,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]}),e.jsxs(T,{size:"sm",variant:"outline",onClick:G,className:"border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-blue-900 truncate",children:(j==null?void 0:j.organizationName)||"N/A"}),(j==null?void 0:j.type)&&e.jsx(Oa,{className:"mt-1 bg-blue-100 text-blue-700 text-xs",children:j==null?void 0:j.type})]})})]}),!o&&e.jsx("div",{className:"flex justify-end sm:justify-start  w-fit flex-shrink-0",children:e.jsxs(T,{variant:"outline",onClick:Y,className:"border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl bg-white/80 backdrop-blur-sm",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Name"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})})]})})}),e.jsx("div",{className:"max-w-full mx-auto p-4 sm:p-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm h-fit",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx(de,{value:w,type:"tel",onChange:$=>k($.target.value),placeholder:"Enter phone number",className:"text-sm border-blue-200 focus:border-blue-500 bg-white flex-1",onKeyPress:$=>$.key==="Enter"&&X()})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsxs(T,{size:"sm",variant:"outline",onClick:te,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(T,{size:"sm",variant:"primary",onClick:X,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-phone text-blue-600"}),e.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:(j==null?void 0:j.organizationPhoneNo)||"N/A"})]}),e.jsx(T,{size:"sm",variant:"ghost",onClick:re,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl shadow-sm ",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:y,onChange:$=>C($.target.value),placeholder:"Enter address",className:"w-full text-sm border-2 border-blue-200 focus:border-blue-500 bg-white rounded-lg p-2 resize-none focus:outline-none",rows:3,onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),ce())}}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-600",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-[13px]"}),e.jsx("span",{className:"text-[12px] sm:text-sm",children:"Press Shift + Enter for next line"})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsxs(T,{size:"sm",variant:"outline",onClick:O,className:"text-gray-600 border-gray-300 hover:bg-gray-50 text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]}),e.jsxs(T,{size:"sm",variant:"primary",onClick:ce,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Save"]})]})]}):e.jsxs("div",{className:"flex justify-between items-start gap-3  w-full",children:[e.jsxs("div",{className:"flex items-start gap-3 ",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-blue-600 mt-1"}),e.jsx("div",{className:"max-w-[90%] overflow-h-auto !max-h-[150px] ",children:e.jsx("span",{className:"text-gray-700 text-sm sm:text-base break-words whitespace-pre-wrap",children:(j==null?void 0:j.address)||"N/A"})})]}),e.jsx(T,{size:"sm",variant:"ghost",onClick:_,className:"text-blue-600 hover:bg-blue-100 p-1 h-auto flex-shrink-0",children:e.jsx("i",{className:"fas fa-edit text-xs"})})]})})]})})})}),e.jsxs("div",{className:"px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-3  sm:min-h-[65vh] sm:max-h-[100%]",children:[e.jsx(Xo,{title:"Staffs",icon:"fa-user-tie",list:M,isLoading:P}),e.jsx(Xo,{title:"CTOs",icon:"fa-user-cog",list:L,isLoading:z}),e.jsx(Xo,{title:"Workers",icon:"fa-user-hard-hat",list:q,isLoading:H}),e.jsx(Xo,{title:"Clients",icon:"fa-user-friends",list:ue,isLoading:U})]})]})})}function HE(){const t=Fe(),[a]=Rc(),l=a.get("invite"),[r,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",staffName:""}),[d,m]=A.useState(!1),[p,x]=A.useState(!1),[h,g]=A.useState({}),b=sk(),w=ws();A.useEffect(()=>{l||(F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[l,t]);const k=()=>{const j={};return r.staffName.trim()?r.staffName.trim().length<2&&(j.staffName="Name must be at least 2 characters"):j.staffName="Full name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(j.email="Please enter a valid email address"):j.email="Email is required",r.phoneNo.trim()?/^\d{10}$/.test(r.phoneNo.trim())||(j.phoneNo="Please enter a valid phone number"):j.phoneNo="Phone number is required",r.password.trim()?r.password.length<6&&(j.password="Password must be at least 6 characters"):j.password="Password is required",r.confirmPassword.trim()?r.password!==r.confirmPassword&&(j.confirmPassword="Passwords do not match"):j.confirmPassword="Please confirm your password",g(j),Object.keys(j).length===0},y=j=>{const{name:S,value:v}=j.target;o(N=>({...N,[S]:v})),h[S]&&g(N=>({...N,[S]:""}))},C=async j=>{if(j.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(k())try{const S=await b.mutateAsync({invite:l,email:r.email,password:r.password,phoneNo:r.phoneNo,staffName:r.staffName});F({title:"Success",description:"Registration successful! You can now login with your credentials."});const v=S.data;w(Lt({_id:v._id,role:v.role,isauthenticated:!0})),w($c({staffId:v._id,staffName:v.staffName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),setTimeout(()=>{t("/")},2e3)}catch(S){F({title:"Registration Failed",description:S.message||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(T,{variant:"primary",onClick:()=>t(-1),className:"!absolute z-[10] top-[5%]  right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-plus text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as staff member"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"staffName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"staffName",name:"staffName",type:"text",value:r.staffName,onChange:y,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${h.staffName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.staffName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:r.email,onChange:y,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${h.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:r.phoneNo,onChange:y,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${h.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:d?"text":"password",value:r.password,onChange:y,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",value:r.confirmPassword,onChange:y,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!p),children:e.jsx("i",{className:`fas ${p?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password===r.confirmPassword&&r.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:b.isPending,children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/stafflogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function U0(){const t=Fe(),[a,l]=A.useState({email:"",password:""}),[r,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:p,openMobileSidebar:x}=He(),h=ws(),g=ek(),b=()=>{const y={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(y.email="Please enter a valid email address"):y.email="Email is required",a.password.trim()?a.password.length<6&&(y.password="Password must be at least 6 characters"):y.password="Password is required",m(y),Object.keys(y).length===0},w=y=>{const{name:C,value:j}=y.target;l(S=>({...S,[C]:j})),d[C]&&m(S=>({...S,[C]:""}))},k=async y=>{var C,j;if(y.preventDefault(),!!b())try{const v=(await g.mutateAsync(a)).data;h(Lt({_id:v.staffId,role:v.role,isauthenticated:!0})),h($c({staffId:v.staffId,staffName:v.staffName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful"}),t("/organizations")}catch(S){F({title:"Login Failed",description:((j=(C=S==null?void 0:S.response)==null?void 0:C.data)==null?void 0:j.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:p&&e.jsx("button",{onClick:x,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Staff Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:w,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:r?"text":"password",value:a.password,onChange:w,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!r),children:e.jsx("i",{className:`fas ${r?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}const Gc=({className:t="",children:a})=>e.jsx("div",{className:`relative inline-block rounded-full overflow-hidden ${t}`,children:a}),Hy=({className:t="",...a})=>e.jsx("img",{className:`h-full w-full object-cover ${t}`,...a}),Kc=({className:t="",children:a})=>e.jsx("div",{className:`flex h-full w-full items-center justify-center bg-blue-100 text-blue-800 ${t}`,children:a});function I0(){const{projectId:t,organizationId:a}=Ce(),{openMobileSidebar:l,isMobile:r}=He(),[o,d]=A.useState(""),[m,p]=A.useState(!1),{data:x,isLoading:h}=vE(t||""),g=wE(),b=jE(),w=async()=>{var v,N;try{const M=await g.mutateAsync({projectId:t||"",role:"worker",organizationId:a});d((M==null?void 0:M.inviteLink)||M),F({title:"Success",description:"Worker invitation link generated successfully"})}catch(M){F({title:"Error",description:((N=(v=M==null?void 0:M.response)==null?void 0:v.data)==null?void 0:N.message)||(M==null?void 0:M.message)||"Failed to generate invitation link",variant:"destructive"})}},k=async()=>{try{await navigator.clipboard.writeText(o),p(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>p(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},y=()=>{const v=`You're invited to work with us Click this link to join: ${o}`,N=`https://wa.me/?text=${encodeURIComponent(v)}`;window.open(N,"_blank")},C=async(v,N)=>{if(window.confirm(`Are you sure you want to remove ${N} from this project?`))try{await b.mutateAsync({workerId:v,projectId:t||""}),F({title:"Success",description:`${N} has been removed from the project`})}catch(M){F({title:"Error",description:M.message||"Failed to remove worker",variant:"destructive"})}},j=v=>v?v.split(" ").map(N=>N[0]).join("").toUpperCase():"WK",S=v=>({carpenter:"bg-amber-100 text-amber-800 border-amber-200",plumber:"bg-blue-100 text-blue-800 border-blue-200",electrician:"bg-yellow-100 text-yellow-800 border-yellow-200",painter:"bg-green-100 text-green-800 border-green-200",mason:"bg-gray-100 text-gray-800 border-gray-200",welder:"bg-red-100 text-red-800 border-red-200"})[v.toLowerCase()]||"bg-purple-100 text-purple-800 border-purple-200";return e.jsxs("div",{className:"max-h-full sm:overflow-y-hidden custom-scrollbar",children:[e.jsx("div",{className:"bg-white ",children:e.jsx("div",{className:"max-w-full mx-auto  py-2",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Workers"]})})})]})})})}),e.jsx("div",{className:"max-w-full !max-h-[100%] overflow-y-auto custom-scrollbar mx-auto p-2",children:e.jsxs("div",{className:"grid grid-cols-1 max-h-full lg:grid-cols-3 gap-6 lg:gap-8 w-full",children:[e.jsx("div",{className:"lg:col-span-1 h-fit space-y-6",children:e.jsxs(De,{className:"bg-white backdrop-blur-sm rounded-2xl shadow-md border-l-4 border-green-600 ",children:[e.jsx(ns,{children:e.jsxs(ys,{className:"text-gray-800 flex items-center text-lg",children:[e.jsx("i",{className:"fas fa-user-plus mr-2 text-green-600"}),"Invite Workers"]})}),e.jsx(Dt,{className:"space-y-4",children:o?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{className:"text-gray-700 font-medium",children:"Invitation Link"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(de,{value:o,readOnly:!0,className:"border-green-200 bg-green-50 text-sm flex-1 min-w-0"}),e.jsx(T,{onClick:k,variant:"outline",size:"icon",className:"border-green-200 text-green-600 hover:bg-green-50 rounded-xl flex-shrink-0",children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(T,{onClick:k,variant:"outline",className:"w-full border-green-200 text-green-600 hover:bg-green-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-copy mr-2"}),"Copy Link"]}),e.jsxs(T,{onClick:y,className:"w-full bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"}),"Share on WhatsApp"]}),e.jsxs(T,{onClick:()=>{d("")},variant:"outline",className:"w-full border-blue-200 text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Generate Another"]})]})]}):e.jsxs(T,{onClick:w,isLoading:g.isPending,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-link mr-2"}),g.isPending?"Generating...":"Generate Invitation Link"]})})]})}),e.jsx("div",{className:"lg:col-span-2 sm:max-h-[43%] lg:!max-h-[48%] rounded-2xl border-l-4 border-orange-600  overflow-y-auto shadow-md custom-scrollbar",children:e.jsxs(De,{className:"bg-white/70 backdrop-blur-sm border-0  shadow-xl",children:[e.jsx(ns,{children:e.jsx(ys,{className:"text-gray-800 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-hard-hat mr-2 text-orange-600"}),e.jsxs("span",{className:"text-lg",children:["Project Workers (",(x==null?void 0:x.length)||0,")"]})]})})}),e.jsx(Dt,{children:h?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-blue-100 rounded-xl",children:[e.jsx(Te,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Te,{className:"h-4 w-32"}),e.jsx(Te,{className:"h-3 w-48"})]}),e.jsx(Te,{className:"h-8 w-20"})]},v))}):x&&x.length>0?e.jsx("div",{className:"space-y-4 overflow-hidden",children:x.map(v=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border border-blue-100 rounded-xl hover:bg-blue-50/50 transition-all duration-200 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[e.jsx(Gc,{className:"w-12 h-12 border-2 border-blue-200 flex-shrink-0",children:e.jsx(Kc,{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white font-semibold",children:j(v==null?void 0:v.workerName)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 truncate",children:(v==null?void 0:v.workerName)||(v==null?void 0:v.name)}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-gray-600 gap-1 sm:gap-0",children:[v.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-envelope text-xs"}),e.jsx("span",{className:"truncate",children:v.email})]}),v.phoneNo&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-phone text-xs"}),e.jsx("span",{children:v.phoneNo})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs(Oa,{className:`text-xs ${S((v==null?void 0:v.specifiedRole)||(v==null?void 0:v.role)||"worker")}`,children:[e.jsx("i",{className:"fas fa-tools mr-1"}),(v==null?void 0:v.specifiedRole)||(v==null?void 0:v.role)||"Worker"]})})]})]}),e.jsxs(T,{onClick:()=>C(v._id,(v==null?void 0:v.workerName)||(v==null?void 0:v.name)),variant:"danger",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50 rounded-xl w-full sm:w-auto",isLoading:b.isPending,children:[e.jsx("i",{className:"fas fa-user-minus mr-1"}),"Remove"]})]},v._id))}):e.jsxs("div",{className:"text-center py-12 min-h-[100vh]",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-hard-hat text-orange-500 text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Workers Assigned"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm sm:text-base",children:"Start building your team by inviting skilled workers to this project"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6"}),e.jsxs(T,{onClick:()=>{w()},className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Invite First Worker"]})]})})]})})]})})]})}function QE(){const t=Fe(),[a]=Rc(),l=a.get("invite"),r=ws(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",workerName:""}),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,b]=A.useState({}),[w,k]=A.useState(null),y=xk();A.useEffect(()=>{if(!l){F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3);return}try{const v=JSON.parse(atob(l));k(v)}catch{F({title:"Invalid Invitation",description:"The invitation link is corrupted or invalid.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3)}},[l,t]);const C=()=>{const v={};return o.workerName.trim()?o.workerName.trim().length<2&&(v.workerName="workerName must be at least 2 characters"):v.workerName="workerName is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(v.email="Please enter a valid email address"):v.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(v.phoneNo="Please enter a valid phone number"):v.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(v.password="Password must be at least 6 characters"):v.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(v.confirmPassword="Passwords do not match"):v.confirmPassword="Please confirm your password",b(v),Object.keys(v).length===0},j=v=>{const{name:N,value:M}=v.target;d(P=>({...P,[N]:M})),g[N]&&b(P=>({...P,[N]:""}))},S=async v=>{var N,M;try{if(v.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(!C())return;const P=await y.mutateAsync({invite:l,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,workerName:o.workerName}}),L=P==null?void 0:P.data;r(Lt({role:L==null?void 0:L.role,isauthenticated:!0,_id:L==null?void 0:L._id})),r(Bc({workerId:L==null?void 0:L._id,workerName:L==null?void 0:L.workerName,email:L==null?void 0:L.email,phoneNo:L==null?void 0:L.phoneNo,role:L==null?void 0:L.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(P){F({title:"Registration Failed",description:((M=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:M.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-full bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:[e.jsx(T,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full max-w-lg",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-800 bg-clip-text text-transparent",children:"Join as Worker"}),e.jsxs(aa,{className:"text-blue-700 text-base",children:[(w==null?void 0:w.specifiedRole)&&e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mb-2",children:["Role: ",w.specifiedRole]}),e.jsx("br",{}),"Complete your registration to join the project"]})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:S,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"workerName",className:"text-blue-800 font-medium",children:"workerName *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"workerName",name:"workerName",type:"text",value:o.workerName,onChange:j,placeholder:"Enter your workerName",className:`pl-10 border-2 transition-all duration-200 ${g.workerName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.workerName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:o.email,onChange:j,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:j,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:j,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:o.confirmPassword,onChange:j,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-green-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-green-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/workerlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function $0(){const t=Fe(),[a,l]=A.useState({email:"",password:""}),r=ws(),{isMobile:o,openMobileSidebar:d}=He(),[m,p]=A.useState(!1),[x,h]=A.useState({}),g=hk(),b=()=>{const y={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(y.email="Please enter a valid email address"):y.email="Email is required",a.password.trim()?a.password.length<6&&(y.password="Password must be at least 6 characters"):y.password="Password is required",h(y),Object.keys(y).length===0},w=y=>{const{name:C,value:j}=y.target;l(S=>({...S,[C]:j})),x[C]&&h(S=>({...S,[C]:""}))},k=async y=>{var C,j;if(y.preventDefault(),!!b())try{const S=await g.mutateAsync(a),v=S==null?void 0:S.data;r(Lt({role:v.role,isauthenticated:!0,_id:v._id})),r(Bc({workerId:v._id,workerName:v.workerName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),t("/organizations"),F({title:"Success",description:"Login successfull"})}catch(S){F({title:"Login Failed",description:((j=(C=S==null?void 0:S.response)==null?void 0:C.data)==null?void 0:j.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:o&&e.jsx("button",{onClick:d,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-hard-hat text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Worker Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your projects and tasks"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:w,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${x.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:x.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:m?"text":"password",value:a.password,onChange:w,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${x.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:x.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your project manager for an invitation"})]})})]})]})})]})}const Qy=()=>{const t=ws(),[a,l]=A.useState(!0),[r,o]=A.useState(null),[d,m]=A.useState({role:null,isauthenticated:!1,_id:null});return A.useEffect(()=>{(async()=>{l(!0),o(null);try{const[x,h,g,b,w]=await Promise.allSettled([$s.get("/auth/isauthenticated"),sa.get("/auth/staff/isauthenticated"),xn.get("/auth/worker/isauthenticated"),hn.get("/auth/CTO/isauthenticated"),Aa.get("/auth/client/isauthenticated")]);if(x.status==="fulfilled"&&x.value.data.ok){const k={role:"owner",isauthenticated:!0,_id:x.value.data.data.userId};return t(Lt(k)),t(gc(x.value.data.data)),m({...k,_id:x.value.data.data.userId}),l(!1)}if(h.status==="fulfilled"&&h.value.data.ok){const k={role:"staff",isauthenticated:!0,_id:h.value.data.data.staffId};return t(Lt(k)),t($c(h.value.data.data)),m({...k,_id:h.value.data.data.staffId}),l(!1)}if(g.status==="fulfilled"&&g.value.data.ok){const k={role:"worker",isauthenticated:!0,_id:g.value.data.data.workerId};return t(Lt(k)),t(Bc(g.value.data.data)),m({...k,_id:g.value.data.data.workerId}),l(!1)}if(b.status==="fulfilled"&&b.value.data.ok){const k={role:"CTO",isauthenticated:!0,_id:b.value.data.data.CTOId};return t(Lt(k)),t(Hc(b.value.data.data)),m({...k,_id:b.value.data.data.CTOId}),l(!1)}if(w.status==="fulfilled"&&w.value.data.ok){const k={role:"client",isauthenticated:!0,_id:w.value.data.data.clientId};return t(Lt(k)),t(Qc(w.value.data.data)),m({...k,_id:w.value.data.data.clientId}),l(!1)}t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),t(bc()),t(yc()),t(wc()),t(jc()),t(Nc()),t(vc()),l(!1)}catch{t(Lt({role:null,isauthenticated:!1,_id:null})),m({role:null,isauthenticated:!1,_id:null}),o("Something went wrong while checking authentication."),t(bc()),t(yc()),t(wc()),t(jc()),t(Nc()),t(vc()),l(!1)}})()},[]),{loading:a,error:r,...d}},Gy=()=>{const t=Fe(),a=()=>{t(-1)};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 bg-gray-100 text-center",children:e.jsx("div",{className:"w-full max-w-md p-6 md:p-8 bg-white rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation text-red-500 text-6xl md:text-7xl"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 text-base md:text-lg",children:"Sorry, you don't have permission to view this page."}),e.jsx("button",{onClick:a,className:"mt-4 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-full transition",children:"Go Back"})]})})})},Re=({allowedRoles:t,children:a})=>{const{loading:l,error:r,role:o,isauthenticated:d}=Qy(),m=dt();return!d&&l===!1?e.jsx(Um,{to:`${o==="owner"||o===null?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):l||o===void 0||o===null?e.jsx("div",{className:"p-6 text-center",children:" Loading..."}):t.includes(o)?r||!d?e.jsx(Um,{to:`${o==="owner"?"/login":`/login/${o}`}`,state:{from:m},replace:!0}):e.jsx(e.Fragment,{children:a}):e.jsx(Gy,{})},GE=()=>{const{organizationId:t}=Ce(),{openMobileSidebar:a,isMobile:l}=He(),r=Fe(),[o,d]=A.useState(""),[m,p]=A.useState(!1),{data:x,isLoading:h,error:g,isError:b}=nE(t),w=rE(),k=lE(),y=async(N,M)=>{if(window.confirm(`Are you sure you want to remove ${M} from this organization?`))try{await w.mutateAsync({staffId:N,orgId:t}),F({title:"Success",description:`${M} has been removed from the organization`})}catch(P){F({title:"Error",description:P.message||"Failed to remove staff member",variant:"destructive"})}},C=async()=>{try{const N=await k.mutateAsync({organizationId:t,role:"staff"});d(N.inviteLink||N),F({title:"Success",description:"Invitation link generated successfully"})}catch(N){F({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},j=async()=>{try{await navigator.clipboard.writeText(o),p(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>p(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},S=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,M=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(M,"_blank")},v=N=>N.split(" ").map(M=>M[0]).join("").toUpperCase();return h?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(Te,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(Te,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(Te,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(Te,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(Te,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Te,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||b||!x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-6 sm:p-8 rounded-2xl shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm sm:text-base",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs(T,{onClick:()=>r("/organizations"),variant:"primary",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 lg:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"Staff Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),x==null?void 0:x.length," ",(x==null?void 0:x.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh] h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite Staffs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite Staffs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(T,{onClick:j,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:S,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(T,{onClick:j,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(T,{onClick:C,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(T,{onClick:C,isLoading:k.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full  !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2 rounded-2xl shadow-lg overflow-y-auto max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Staff Members (",x==null?void 0:x.length,")"]}),x.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No Staffs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:x==null?void 0:x.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Gc,{className:"w-12 h-12",children:[e.jsx(Hy,{src:N.avatarUrl||yt.COMPANY_LOGO}),e.jsx(Kc,{className:"bg-blue-600 text-white",children:v(N.staffName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N==null?void 0:N.staffName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(Oa,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsxs(T,{variant:"danger",onClick:()=>y(N._id,N.staffName),isLoading:k.isPending,className:"text-white bg-red-600 border border-red-200 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-user-minus mr-1"})," Remove"]})]},N._id))})]})]})]})},KE=()=>{const{organizationId:t}=Ce(),a=Fe(),{openMobileSidebar:l,isMobile:r}=He(),[o,d]=A.useState(""),[m,p]=A.useState(!1),{data:x,isLoading:h,error:g,isError:b}=dE(t),w=mE(),k=uE(),y=async(N,M)=>{if(window.confirm(`Are you sure you want to remove ${M} from this organization?`))try{await w.mutateAsync({CTOId:N,orgId:t}),F({title:"Success",description:`${M} has been removed from the organization`})}catch(P){F({title:"Error",description:P.message||"Failed to remove CTO member",variant:"destructive"})}},C=async()=>{try{const N=await k.mutateAsync({organizationId:t,role:"CTO"});d(N.inviteLink||N),F({title:"Success",description:"Invitation link generated successfully"})}catch(N){F({title:"Error",description:N.message||"Failed to generate invitation link",variant:"destructive"})}},j=async()=>{try{await navigator.clipboard.writeText(o),p(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>p(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},S=()=>{const N=`You're invited to join in the organization! Click this link to register: ${o}`,M=`https://wa.me/?text=${encodeURIComponent(N)}`;window.open(M,"_blank")},v=N=>N.split(" ").map(M=>M[0]).join("").toUpperCase();return h?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl   mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(Te,{className:"h-8 w-24 sm:h-10 sm:w-32"}),e.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),e.jsx(Te,{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl"}),e.jsx(Te,{className:"h-6 w-32 sm:h-8 sm:w-48"})]}),e.jsx(Te,{className:"h-8 w-20 sm:h-10 sm:w-24"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx(Te,{className:"h-64 w-full rounded-2xl"}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Te,{className:"h-96 w-full rounded-2xl"})})]})})]}):g||b||!x?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-white",children:e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-md w-full max-w-md",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-building text-blue-600 text-xl"})}),e.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You either do not have access or the organization does not exist."}),e.jsxs(T,{onClick:()=>a("/organizations"),className:"bg-blue-600 text-white w-full",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Organizations"]})]})}):e.jsxs("div",{className:"min-h-full max-h-full overflow-y-auto  min-w-full bg-gradient-to-br from-blue-50 to-white gap-6",children:[e.jsx("header",{children:e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900",children:"CTO Management"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-gray-300"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl",children:e.jsx("i",{className:"fas fa-user-tie text-blue-600 text-xl"})})]}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-users mr-2"}),x==null?void 0:x.length," ",(x==null?void 0:x.length)>1?"Members":"Member"]})]})})})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row p-4 gap-6 h-full",children:[e.jsx("div",{className:"bg-white sm:max-h-[60vh] lg:max-h-[45vh]  h-fit w-full  md:w-1/2  p-6 rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"})," Invite CTOs"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite CTOs to your organization by generating a link."}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{value:o,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(T,{onClick:j,children:e.jsx("i",{className:`fas ${m?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:S,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(T,{onClick:j,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(T,{onClick:C,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(T,{onClick:C,isLoading:k.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"bg-white p-6 py-2 w-full !min-h-[65vh] sm:!min-h-[70vh] lg:!min-h-[85vh] md:w-1/2  rounded-2xl shadow-lg overflow-y-auto  max-h-[90%] custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," CTO Members (",x.length,")"]}),x.length===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No CTOs have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite."})]}):e.jsx("div",{className:"space-y-4",children:x.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Gc,{className:"w-12 h-12",children:[e.jsx(Hy,{src:N.avatarUrl||yt.COMPANY_LOGO}),e.jsx(Kc,{className:"bg-blue-600 text-white",children:v(N.CTOName)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:N.CTOName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"}),N.email]}),N.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"}),N.phoneNo]}),e.jsx(Oa,{className:"mt-1 text-blue-800 border-blue-300",children:N.role})]})]}),e.jsx(T,{onClick:()=>y(N._id,N.CTOName),isLoading:w.isPending,variant:"danger",className:" text-white bg-red-600 border border-red-200 hover:bg-red-700",children:e.jsx("i",{className:"fas fa-trash-can mr-1 text-white"})})]},N._id))})]})]})]})},VE=()=>{const{organizationId:t}=Ce(),[a,l]=A.useState(!1),[r,o]=A.useState(window.innerWidth<470),d={PROJECTS:`/organizations/${t}/projects`,DETAILS:`/organizations/${t}`,INVITECTO:`/organizations/${t}/invitecto`,INVITESTAFFS:`/organizations/${t}/invitestaff`,PLAN:`/organizations/${t}/subscriptionplan`,PROFILE:`/organizations/${t}/userprofile`,MODULAR:`/organizations/${t}/modularunits`};return A.useEffect(()=>{const m=()=>{o(window.innerWidth<470)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[r?e.jsx(ki,{labels:Vg,path:d,isOpen:a,onClose:()=>l(!1)}):e.jsx(Ci,{path:d,labels:Vg,icons:M2}),e.jsx("main",{className:"!w-[100%] h-full",children:e.jsx(_t,{context:{isMobile:r,isMobileSidebarOpen:a,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})};function YE(){const t=Fe(),[a]=Rc(),l=a.get("invite"),[r,o]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",CTOName:""}),[d,m]=A.useState(!1),[p,x]=A.useState(!1),[h,g]=A.useState({}),b=Q1(),w=ws();A.useEffect(()=>{l||(F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/")},3e3))},[l,t]);const k=()=>{const j={};return r.CTOName.trim()?r.CTOName.trim().length<2&&(j.CTOName="Name must be at least 2 characters"):j.CTOName="Full name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(j.email="Please enter a valid email address"):j.email="Email is required",r.phoneNo.trim()?/^\d{10}$/.test(r.phoneNo.trim())||(j.phoneNo="Please enter a valid phone number"):j.phoneNo="Phone number is required",r.password.trim()?r.password.length<6&&(j.password="Password must be at least 6 characters"):j.password="Password is required",r.confirmPassword.trim()?r.password!==r.confirmPassword&&(j.confirmPassword="Passwords do not match"):j.confirmPassword="Please confirm your password",g(j),Object.keys(j).length===0},y=j=>{const{name:S,value:v}=j.target;o(N=>({...N,[S]:v})),h[S]&&g(N=>({...N,[S]:""}))},C=async j=>{var S,v;if(j.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(k())try{const M=(await b.mutateAsync({invite:l,email:r.email,password:r.password,phoneNo:r.phoneNo,CTOName:r.CTOName})).data;w(Lt({role:M.role,isauthenticated:!0,_id:M._id})),w(Hc({CTOId:M._id,CTOName:M.CTOName,email:M.email,phoneNo:M.phoneNo,role:M.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful"}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){F({title:"Registration Failed",description:((v=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:v.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(T,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as CTO"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"CTOName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"CTOName",name:"CTOName",type:"text",value:r.CTOName,onChange:y,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${h.CTOName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.CTOName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:r.email,onChange:y,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${h.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:r.phoneNo,onChange:y,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${h.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:d?"text":"password",value:r.password,onChange:y,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>m(!d),children:e.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",value:r.confirmPassword,onChange:y,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${h.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:h.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>x(!p),children:e.jsx("i",{className:`fas ${p?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${r.password===r.confirmPassword&&r.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:b.isPending,children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/ctologin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}function B0(){const t=Fe(),[a,l]=A.useState({email:"",password:""}),[r,o]=A.useState(!1),[d,m]=A.useState({}),{isMobile:p,openMobileSidebar:x}=He(),h=B1(),g=ws(),b=()=>{const y={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(y.email="Please enter a valid email address"):y.email="Email is required",a.password.trim()?a.password.length<6&&(y.password="Password must be at least 6 characters"):y.password="Password is required",m(y),Object.keys(y).length===0},w=y=>{const{name:C,value:j}=y.target;l(S=>({...S,[C]:j})),d[C]&&m(S=>({...S,[C]:""}))},k=async y=>{var C,j;if(y.preventDefault(),!!b())try{const v=(await h.mutateAsync(a)).data;g(Lt({role:v.role,isauthenticated:!0,_id:v.CTOId})),g(Hc({CTOId:v.CTOId,CTOName:v.CTOName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),F({title:"Success",description:"Login successful! Welcome back."}),t("/")}catch(S){F({title:"Login Failed",description:((j=(C=S==null?void 0:S.response)==null?void 0:C.data)==null?void 0:j.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:p&&e.jsx("button",{onClick:x,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Cheif Technical Officer Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your organization dashboard"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:w,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${d.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:r?"text":"password",value:a.password,onChange:w,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${d.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:d.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>o(!r),children:e.jsx("i",{className:`fas ${r?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:h.isPending,children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your organization admin for an invitation"})]})})]})]})})]})}function H0(){const t=Fe(),[a,l]=A.useState({email:"",password:""}),r=ws(),[o,d]=A.useState(!1),[m,p]=A.useState({}),{isMobile:x,openMobileSidebar:h}=He(),g=Y1(),b=()=>{const y={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(y.email="Please enter a valid email address"):y.email="Email is required",a.password.trim()?a.password.length<6&&(y.password="Password must be at least 6 characters"):y.password="Password is required",p(y),Object.keys(y).length===0},w=y=>{const{name:C,value:j}=y.target;l(S=>({...S,[C]:j})),m[C]&&p(S=>({...S,[C]:""}))},k=async y=>{var C,j;if(y.preventDefault(),!!b())try{const v=(await g.mutateAsync(a)).data;r(Lt({role:v.role,isauthenticated:!0,_id:v.clientId})),r(Qc({clientId:v.clientId,clientName:v.clientName,email:v.email,phoneNo:v.phoneNo,role:v.role,isauthenticated:!0})),F({title:"Success",description:"Login successful! Welcome back."}),t("/organizations")}catch(S){F({title:"Login Failed",description:((j=(C=S==null?void 0:S.response)==null?void 0:C.data)==null?void 0:j.message)||"Invalid credentials. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-2 left-2",children:x&&e.jsx("button",{onClick:h,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-user-tie text-white text-2xl"})}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Client Login"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Sign in to access your project Dashboard"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:k,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:a.email,onChange:w,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${m.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:o?"text":"password",value:a.password,onChange:w,placeholder:"Enter your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${m.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:m.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>d(!o),children:e.jsx("i",{className:`fas ${o?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Sign In"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"Contact your admin for an invitation"})]})})]})]})})]})}function WE(){const t=Fe(),[a]=Rc(),l=a.get("invite"),r=ws(),[o,d]=A.useState({email:"",password:"",confirmPassword:"",phoneNo:"",clientName:""}),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,b]=A.useState({}),w=X1();A.useEffect(()=>{l||(F({title:"Invalid Invitation",description:"No invitation token found. Please use a valid invitation link.",variant:"destructive"}),setTimeout(()=>{t("/organizations")},3e3))},[l,t]);const k=()=>{const j={};return o.clientName.trim()?o.clientName.trim().length<2&&(j.clientName="Name must be at least 2 characters"):j.clientName="Full name is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(j.email="Please enter a valid email address"):j.email="Email is required",o.phoneNo.trim()?/^\d{10}$/.test(o.phoneNo.trim())||(j.phoneNo="Please enter a valid phone number with 10 digits"):j.phoneNo="Phone number is required",o.password.trim()?o.password.length<6&&(j.password="Password must be at least 6 characters"):j.password="Password is required",o.confirmPassword.trim()?o.password!==o.confirmPassword&&(j.confirmPassword="Passwords do not match"):j.confirmPassword="Please confirm your password",b(j),Object.keys(j).length===0},y=j=>{const{name:S,value:v}=j.target;d(N=>({...N,[S]:v})),g[S]&&b(N=>({...N,[S]:""}))},C=async j=>{var S,v;if(j.preventDefault(),!l){F({title:"Error",description:"Invalid invitation token",variant:"destructive"});return}if(k())try{const M=(await w.mutateAsync({token:l,payload:{email:o.email,password:o.password,phoneNo:o.phoneNo,clientName:o.clientName}})).data;r(Lt({role:M.role,isauthenticated:!0,_id:M._id})),r(Qc({clientId:M._id,clientName:M.clientName,email:M.email,phoneNo:M.phoneNo,role:M.role,isauthenticated:!0})),F({title:"Success",description:"Registration successful! You can now login with your credentials."}),setTimeout(()=>{t("/organizations")},2e3)}catch(N){F({title:"Registration Failed",description:((v=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:v.message)||"Failed to register. Please try again.",variant:"destructive"})}};return l?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:[e.jsx(T,{variant:"primary",onClick:()=>t(-1),className:"!absolute top-[5%] sm:top-[2%] z-10 right-[5%] sm:right-[10%]",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("div",{className:"relative w-full sm:max-w-lg max-w-full",children:e.jsxs(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl",children:[e.jsxs(ns,{className:"text-center pb-6",children:[e.jsxs("div",{className:"sm:w-20 sm:h-20 w-15 h-15 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:[e.jsx("i",{className:"fa-solid fa-chalkboard-user  text-white text-2xl"}),"            "]}),e.jsx(ys,{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Join Organization"}),e.jsx(aa,{className:"text-blue-600 text-base",children:"Complete your registration to join the team as Client"})]}),e.jsxs(Dt,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"clientName",className:"text-blue-800 font-medium",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-blue-400"})}),e.jsx(de,{id:"clientName",name:"clientName",type:"text",value:o.clientName,onChange:y,placeholder:"Enter your full name",className:`pl-10 border-2 transition-all duration-200 ${g.clientName?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.clientName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"email",className:"text-blue-800 font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-blue-400"})}),e.jsx(de,{id:"email",name:"email",type:"email",value:o.email,onChange:y,placeholder:"Enter your email address",className:`pl-10 border-2 transition-all duration-200 ${g.email?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"phoneNo",className:"text-blue-800 font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-phone text-blue-400"})}),e.jsx(de,{id:"phoneNo",name:"phoneNo",type:"tel",maxLength:10,value:o.phoneNo,onChange:y,placeholder:"Enter your phone number",className:`pl-10 border-2 transition-all duration-200 ${g.phoneNo?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.phoneNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"password",className:"text-blue-800 font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"password",name:"password",type:m?"text":"password",value:o.password,onChange:y,placeholder:"Create a password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.password?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.password}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>p(!m),children:e.jsx("i",{className:`fas ${m?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{htmlFor:"confirmPassword",className:"text-blue-800 font-medium",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-blue-400"})}),e.jsx(de,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:o.confirmPassword,onChange:y,placeholder:"Confirm your password",className:`pl-10 pr-12 border-2 transition-all duration-200 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"} bg-white/70 backdrop-blur-sm`,error:g.confirmPassword}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-blue-400 hover:text-blue-600 transition-colors",onClick:()=>h(!x),children:e.jsx("i",{className:`fas ${x?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Password Requirements:"]}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password.length>=6?"text-blue-500":"text-gray-400"}`}),"At least 6 characters long"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-check mr-2 ${o.password===o.confirmPassword&&o.confirmPassword?"text-blue-500":"text-gray-400"}`}),"Passwords match"]})]})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",isLoading:w.isPending,children:w.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-check mr-2"}),"Complete Registration"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-blue-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",onClick:()=>t("/clientlogin"),children:"Sign in here"})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsx(De,{className:"bg-white/80 backdrop-blur-lg border-0 shadow-2xl max-w-md w-full",children:e.jsxs(Dt,{className:"pt-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-600 mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:text-base text-sm",children:"Please use a valid invitation link to register. Redirecting you to the home page..."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})})]})})})}const XE=()=>{const{projectId:t,organizationId:a}=Ce(),[l,r]=A.useState(""),[o,d]=A.useState(!1),{openMobileSidebar:m,isMobile:p}=He(),x=hE(),{data:h,isLoading:g,isError:b}=pE(a,t),w=async()=>{var j,S;try{const v=await x.mutateAsync({projectId:t,organizationId:a});r(v.inviteLink||v),F({title:"Success",description:"Invitation link generated successfully"})}catch(v){F({title:"Error",description:((S=(j=v==null?void 0:v.response)==null?void 0:j.data)==null?void 0:S.message)||"Failed to generate invitation link",variant:"destructive"})}},k=async()=>{try{await navigator.clipboard.writeText(l),d(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>d(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},y=()=>{const j=`You're invited to join in the project! Click this link to register: ${l}`,S=`https://wa.me/?text=${encodeURIComponent(j)}`;window.open(S,"_blank")},C=j=>{var S,v;return(v=(S=j==null?void 0:j.split(" ").map(N=>N[0]))==null?void 0:S.join(""))==null?void 0:v.toUpperCase()};return e.jsxs("div",{className:"min-h-full min-w-full ",children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"max-w-full mx-auto",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[p&&e.jsx("button",{onClick:m,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block  w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Client"]})})})]})})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full ",children:[e.jsx("div",{className:"flex-1 border-l-4 border-blue-600  bg-white p-4 max-h-[45vh]  h-fit overflow-y-auto rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-2 flex items-center",children:"Generate Client"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite a client by generating a link."}),l?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{value:l,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(T,{onClick:k,children:e.jsx("i",{className:`fas ${o?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:y,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(T,{onClick:k,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(T,{onClick:w,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(T,{onClick:w,isLoading:x.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"flex-1 bg-white border-2 border-blue-200 p-6 rounded-2xl shadow-lg py-4 max-h-[70vh] sm:!max-h-[63vh] md:!max-h-[100vh]  lg:!max-h-[85vh] xl:!max-h-[90vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Clients (",(h==null?void 0:h.length)||0,")"]}),g?e.jsx("p",{className:"text-blue-700",children:"Loading clients..."}):b?e.jsx("p",{className:"text-red-600",children:"Failed to get clients."}):(h==null?void 0:h.length)===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No clients have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite them."})]}):e.jsx("div",{className:"space-y-4 h-[85%]",children:h==null?void 0:h.map(j=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Gc,{className:"w-12 h-12",children:e.jsx(Kc,{className:"bg-blue-600 text-white font-bold",children:C(j.clientName)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:j.clientName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"})," ",j.email]}),j.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"})," ",j.phoneNo]})]})]})},j._id))})]})]})]})},Je=({value:t,onValueChange:a,children:l})=>{const[r,o]=A.useState(!1),[d,m]=A.useState(t||""),p=A.useRef(null);A.useEffect(()=>{const h=g=>{p.current&&!p.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const x=h=>{m(h),a==null||a(h),o(!1)};return e.jsx("div",{ref:p,className:"relative",children:ct.Children.map(l,h=>{if(ct.isValidElement(h)){if(h.type===Xe)return ct.cloneElement(h,{isOpen:r,onClick:()=>o(!r),selectedValue:d});if(h.type===Ze)return ct.cloneElement(h,{isOpen:r,onValueChange:x})}return h})})},Xe=({className:t="",children:a,isOpen:l=!1,onClick:r})=>e.jsxs("button",{type:"button",className:`w-full px-3 py-2 border border-blue-200 rounded-xl bg-white text-left flex items-center justify-between focus:outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 ${t}`,onClick:r,children:[a,e.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),et=({placeholder:t="Select...",selectedValue:a})=>e.jsx("span",{className:"text-gray-900",children:a||t}),Ze=({className:t="",children:a,isOpen:l=!1,onValueChange:r})=>l?e.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-50 py-1 ${t}`,children:ct.Children.map(a,o=>ct.isValidElement(o)&&o.type===ye?ct.cloneElement(o,{onSelect:r}):o)}):null,ye=({value:t,children:a,onSelect:l})=>e.jsx("button",{type:"button",className:"w-full cursor-pointer text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700",onClick:()=>l==null?void 0:l(t),children:a}),ZE=({formData:t,setFormData:a})=>{var d,m,p,x,h,g,b,w,k,y,C;const l=j=>{const S=j.target,{name:v,type:N,value:M}=S;let P=M;if(N==="checkbox")P=S.checked;else if(N==="number"){const L=parseFloat(M);P=isNaN(L)?0:Math.max(0,L)}["top","left","right"].includes(v)?a(L=>{var z;return{...L,kitchen:{...L.kitchen,measurements:{...(z=L.kitchen)==null?void 0:z.measurements,[v]:P}}}}):a(L=>({...L,kitchen:{...L.kitchen,[v]:P}}))},r=(j,S)=>{a(v=>({...v,kitchen:{...v.kitchen,[j]:S}}))},o=()=>{a(j=>({...j,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Kitchen Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Layout Type"}),e.jsxs(Je,{onValueChange:j=>r("layoutType",j),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select layout",selectedValue:((d=t==null?void 0:t.kitchen)==null?void 0:d.layoutType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Kitchen Package"}),e.jsxs(Je,{onValueChange:j=>r("kitchenPackage",j),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((m=t==null?void 0:t.kitchen)==null?void 0:m.kitchenPackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:(p=t==null?void 0:t.kitchen)==null?void 0:p.numberOfShelves,onChange:l,placeholder:"e.g., 3"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Top (ft)"}),e.jsx(de,{type:"number",name:"top",value:((h=(x=t==null?void 0:t.kitchen)==null?void 0:x.measurements)==null?void 0:h.top)??0,onChange:l,placeholder:"Length Top"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Left (ft)"}),e.jsx(de,{type:"number",name:"left",value:(b=(g=t==null?void 0:t.kitchen)==null?void 0:g.measurements)==null?void 0:b.left,onChange:l,placeholder:"Length Left"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement Right (ft)"}),e.jsx(de,{type:"number",name:"right",value:(k=(w=t==null?void 0:t.kitchen)==null?void 0:w.measurements)==null?void 0:k.right,onChange:l,placeholder:"Length right"})]}),e.jsxs("div",{className:"flex  items-center",children:[e.jsx("input",{id:"graniteCountertop",type:"checkbox",name:"graniteCountertop",checked:((y=t==null?void 0:t.kitchen)==null?void 0:y.graniteCountertop)||!1,onChange:l,className:"!w-[10%]"}),e.jsx(fe,{htmlFor:"graniteCountertop",children:"Granite Countertop?"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"notes",value:((C=t==null?void 0:t.kitchen)==null?void 0:C.notes)||"",onChange:l,placeholder:"Mention any additional kitchen preferences",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(T,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Kitchen Section"]})})]})},JE=A.memo(ZE),eA=({formData:t,setFormData:a})=>{const l=d=>{const{name:m,value:p,type:x}=d.target;let h=p;if(x==="number"){const g=parseFloat(p);h=isNaN(g)?0:Math.max(0,g)}a(g=>({...g,livingHall:{...g.livingHall,[m]:h}}))},r=(d,m)=>{a(p=>({...p,livingHall:{...p.livingHall,[d]:m}}))},o=()=>{a(d=>({...d,livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Living Hall Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Seating Style"}),e.jsxs(Je,{onValueChange:d=>r("seatingStyle",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select seating style",selectedValue:t.livingHall.seatingStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"TV Unit Design Required"}),e.jsxs(Je,{onValueChange:d=>r("tvUnitDesignRequired",d==="Yes"),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select option",selectedValue:t.livingHall.tvUnitDesignRequired===!0?"Yes":t.livingHall.tvUnitDesignRequired===!1?"No":""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"False Ceiling Required"}),e.jsxs(Je,{onValueChange:d=>r("falseCeilingRequired",d==="Yes"),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select option",selectedValue:t.livingHall.falseCeilingRequired===!0?"Yes":t.livingHall.falseCeilingRequired===!1?"No":""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Yes",children:"Yes"}),e.jsx(ye,{value:"No",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wall Decor Style"}),e.jsxs(Je,{onValueChange:d=>r("wallDecorStyle",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wall decor",selectedValue:t.livingHall.wallDecorStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Fans"}),e.jsx(de,{name:"numberOfFans",type:"number",value:t.livingHall.numberOfFans,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Lights"}),e.jsx(de,{name:"numberOfLights",type:"number",value:t.livingHall.numberOfLights,onChange:l,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Living Hall Package"}),e.jsxs(Je,{onValueChange:d=>r("livingHallPackage",d),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:t.livingHall.livingHallPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(de,{name:"notes",value:t.livingHall.notes||"",onChange:l,placeholder:"Any special preferences or notes"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(T,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset LivingHall Section"]})})]})},tA=({formData:t,setFormData:a})=>{var d,m,p,x,h,g,b,w;const l=k=>{const y=k.target,{name:C,type:j,value:S}=y;let v=S;if(j==="checkbox")v=y.checked;else if(j==="number"){const N=parseFloat(S);v=isNaN(N)?0:Math.max(0,N)}a(N=>({...N,bedroom:{...N.bedroom,[C]:v}}))},r=(k,y)=>{a(C=>({...C,bedroom:{...C.bedroom,[k]:y}}))},o=()=>{a(k=>({...k,bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Bedroom Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Bedrooms"}),e.jsx(de,{type:"number",name:"numberOfBedrooms",value:(d=t==null?void 0:t.bedroom)==null?void 0:d.numberOfBedrooms,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bed Type"}),e.jsxs(Je,{onValueChange:k=>r("bedType",k),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select bed type",selectedValue:((m=t==null?void 0:t.bedroom)==null?void 0:m.bedType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",id:"wardrobeIncluded",checked:((p=t==null?void 0:t.bedroom)==null?void 0:p.wardrobeIncluded)||!1,onChange:l}),e.jsx(fe,{htmlFor:"wardrobeIncluded",children:"Wardrobe Included?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"falseCeilingRequired",type:"checkbox",name:"falseCeilingRequired",checked:((x=t==null?void 0:t.bedroom)==null?void 0:x.falseCeilingRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"falseCeilingRequired",children:"False Ceiling Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"tvUnitRequired",type:"checkbox",name:"tvUnitRequired",checked:((h=t==null?void 0:t.bedroom)==null?void 0:h.tvUnitRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"tvUnitRequired",children:"TV Unit Required?"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",id:"studyTableRequired",checked:((g=t==null?void 0:t.bedroom)==null?void 0:g.studyTableRequired)||!1,onChange:l}),e.jsx(fe,{htmlFor:"studyTableRequired",children:"Study Table Required?"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bedroom Package"}),e.jsxs(Je,{onValueChange:k=>r("bedroomPackage",k),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((b=t==null?void 0:t.bedroom)==null?void 0:b.bedroomPackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"notes",value:((w=t==null?void 0:t.bedroom)==null?void 0:w.notes)||"",onChange:l,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(T,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Bedroom Section"]})})]})},sA=A.memo(tA),aA=({formData:t,setFormData:a})=>{var d,m,p,x,h,g,b,w;const l=k=>{const{name:y,value:C,type:j}=k.target;let S=C;if(j==="checkbox")S=k.target.checked;else if(j==="number"){const v=parseFloat(C);S=isNaN(v)?0:Math.max(0,v)}a(v=>({...v,wardrobe:{...v.wardrobe,[y]:S}}))},r=(k,y)=>{a(C=>({...C,wardrobe:{...C.wardrobe,[k]:y}}))},o=()=>{a(k=>({...k,wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null}}))};return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Wardrobe Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Type"}),e.jsxs(Je,{onValueChange:k=>r("wardrobeType",k),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select type",selectedValue:((d=t==null?void 0:t.wardrobe)==null?void 0:d.wardrobeType)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Length (ft)"}),e.jsx(de,{type:"number",name:"lengthInFeet",value:(m=t==null?void 0:t.wardrobe)==null?void 0:m.lengthInFeet,onChange:l,placeholder:"e.g., 6"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Height (ft)"}),e.jsx(de,{type:"number",name:"heightInFeet",value:(p=t==null?void 0:t.wardrobe)==null?void 0:p.heightInFeet,onChange:l,placeholder:"e.g., 8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"mirrorIncluded",type:"checkbox",name:"mirrorIncluded",checked:((x=t==null?void 0:t.wardrobe)==null?void 0:x.mirrorIncluded)||!1,onChange:l}),e.jsx(fe,{htmlFor:"mirrorIncluded",children:"Mirror Included?"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:(h=t==null?void 0:t.wardrobe)==null?void 0:h.numberOfShelves,onChange:l,placeholder:"e.g., 4"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Drawers"}),e.jsx(de,{type:"number",name:"numberOfDrawers",value:(g=t==null?void 0:t.wardrobe)==null?void 0:g.numberOfDrawers,onChange:l,placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Package"}),e.jsxs(Je,{onValueChange:k=>r("wardrobePackage",k),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:((b=t==null?void 0:t.wardrobe)==null?void 0:b.wardrobePackage)||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"notes",value:((w=t==null?void 0:t.wardrobe)==null?void 0:w.notes)||"",onChange:l,placeholder:"Mention any preferences or requirements",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(T,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",onClick:o,children:[e.jsx("i",{className:"fa-solid fa-rotate-left mr-2"})," Reset Wardrobe Section"]})})]})},nA=A.memo(aA),lA=async({projectId:t,payload:a,token:l,api:r})=>{const{data:o}=await r.post(`/requirementform/createrequirement/${t}?token=${l}`,a);if(!o.ok)throw new Error(o.message);return o.data},rA=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/requirementform/getrequirementform/${t}`);if(!l.ok)throw new Error(l.message);return l.data},iA=async({projectId:t,api:a})=>{const{data:l}=await a.post(`/requirementform/formsharelink/${t}`);if(!l.ok)throw new Error(l.message);return l.data},oA=async({formId:t,projectId:a,api:l})=>{console.log("formId",t);const{data:r}=await l.patch(`/requirementform/formcompleted/${a}/${t}`);if(!r.ok)throw new Error(r.message);return r.data},cA=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.patch(`/requirementform/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},dA=async({formId:t,projectId:a,files:l,api:r})=>{console.log("getig iside 1");const o=new FormData;l.forEach(m=>o.append("file",m)),console.log("getig iside 1");const d=await r.post(`/requirementform/upload/multiple/${a}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}});return console.log("reposen",d),d.data},uA=async(t,a,l)=>{const{data:r}=await l.patch(`/requirementform/${t}/deleteuploadedfile/${a}`);if(!r.ok)throw new Error(r.message);return r.data},mA=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({projectId:r,fileId:o})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await uA(r,o,a)},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["requirementForm",o]})}})},fA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatekitchen`,{kitchen:l});if(!r.ok)throw new Error(r.message);return r.data},hA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatebedroom`,{bedroom:l});if(!r.ok)throw new Error(r.message);return r.data},xA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatewardrobe`,{wardrobe:l});if(!r.ok)throw new Error(r.message);return r.data},pA=async({projectId:t,api:a,updateData:l})=>{const{data:r}=await a.put(`/requirementform/${t}/updatelivinghall`,{livingHall:l});if(!r.ok)throw new Error(r.message);return r.data},gA=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,payload:o,token:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await lA({projectId:r,payload:o,token:d,api:l})}})},bA=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["requirementForm"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await rA({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},yA=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await iA({projectId:r,api:l})}})},wA=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,projectId:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await oA({formId:r,projectId:o,api:l})}})},vA=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you dont have the access to make this api");if(!l)throw new Error("api is not available");return await cA({formId:r,deadLine:o,projectId:d,api:l})}})},jA=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await dA({formId:r,projectId:d,files:o,api:l})}})},NA=()=>{const t=["client","owner","staff"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await fA({projectId:r,api:l,updateData:o})}})},SA=()=>{const t=["client","owner","staff"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await hA({projectId:r,api:l,updateData:o})}})},CA=()=>{const t=["client","owner","staff"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await xA({projectId:r,api:l,updateData:o})}})},kA=()=>{const t=["client","owner","staff"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,updateData:o})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await pA({projectId:r,api:l,updateData:o})}})},EA=()=>{var S,v;const{token:t,projectId:a}=Ce(),[l,r]=A.useState({clientData:{clientName:null,email:null,whatsapp:null,location:null},isEditable:!0,kitchen:{layoutType:null,kitchenPackage:null,measurements:{top:null,left:null,right:null},graniteCountertop:null,numberOfShelves:null,notes:null},livingHall:{seatingStyle:null,tvUnitDesignRequired:null,falseCeilingRequired:null,wallDecorStyle:null,numberOfFans:null,numberOfLights:null,livingHallPackage:null,notes:null},bedroom:{numberOfBedrooms:null,bedType:null,wardrobeIncluded:null,falseCeilingRequired:null,tvUnitRequired:null,studyTableRequired:null,bedroomPackage:null,notes:null},wardrobe:{wardrobeType:null,lengthInFeet:null,heightInFeet:null,mirrorIncluded:null,wardrobePackage:null,numberOfShelves:null,numberOfDrawers:null,notes:null},additionalNotes:null}),[o,d]=A.useState({}),[m,p]=A.useState(0),{mutateAsync:x,isPending:h,isSuccess:g,isError:b,error:w}=gA(),k=N=>{let{name:M,value:P}=N.target;M==="whatsapp"&&(P=P.replace(/[^0-9]/g,"")),r(L=>({...L,clientData:{...L.clientData,[M]:P}}))},y=N=>{let M={};const{clientName:P,email:L,whatsapp:z}=N.clientData;return(!P||P.trim()==="")&&(M.clientName="Client name is required"),(!L||L.trim()==="")&&(M.email="Email is required"),!z||z.trim()===""?M.whatsapp="WhatsApp number is required":z.trim().length!==10&&(M.whatsapp="Number should be 10 digits long"),M},C=async()=>{var N,M;try{if(d({}),!a)return;const P=y(l);if(Object.keys(P).length){d(P);return}await x({projectId:a,payload:l,token:t}),F({title:"Success",description:"form data submitted successfully"})}catch(P){F({title:"Error",description:((M=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:M.message)||(P==null?void 0:P.message)||"Failed to generate invitation link",variant:"destructive"})}},j=[{label:"Kitchen",content:e.jsx(JE,{formData:l,setFormData:r})},{label:"Living Hall",content:e.jsx(eA,{formData:l,setFormData:r})},{label:"Bedroom",content:e.jsx(sA,{formData:l,setFormData:r})},{label:"Wardrobe",content:e.jsx(nA,{formData:l,setFormData:r})},{label:"Client Info",content:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Client Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Client Name"}),e.jsx(de,{name:"clientName",value:l.clientData.clientName??"",onChange:k,required:!0,error:o.clientName||""})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Email"}),e.jsx(de,{type:"email",name:"email",value:l.clientData.email??"",onChange:k,required:!0,error:o.email||""})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"WhatsApp Number"}),e.jsx(de,{name:"whatsapp",type:"text",inputMode:"numeric",pattern:"[0-9]{10}",value:l.clientData.whatsapp??"",onChange:k,required:!0,error:o.whatsapp||"",maxLength:10})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Location"}),e.jsx(de,{name:"location",value:l.clientData.location??"",onChange:k})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"additionalNotes",value:l.additionalNotes||"",onChange:N=>r(M=>({...M,additionalNotes:N.target.value})),className:"w-full px-3 py-2 border rounded-xl focus:outline-none focus:ring focus:ring-blue-200",rows:4})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(T,{variant:"primary",size:"lg",onClick:C,isLoading:h,children:"Submit Requirement Form"})}),g&&e.jsx("p",{className:"text-green-600 mt-4",children:"Form submitted successfully!"}),b&&e.jsx("p",{className:"text-red-600 mt-4",children:((v=(S=w==null?void 0:w.response)==null?void 0:S.data)==null?void 0:v.message)||w.message||"Form Submission Failed"})]})}];return e.jsx("div",{className:"space-y-8  max-h-[100vh] overflow-y-auto custom-scrollbar bg-gradient-to-br from-blue-50 via-white to-blue-100 !p-6 h-full w-full",children:e.jsxs("div",{className:"max-w-5xl max-h-full mx-auto space-y-5",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-blue-800",children:"House Requirements Form"}),e.jsx("div",{className:"max-w-5xl  mx-auto",children:j[m].content}),e.jsxs("div",{className:`flex ${m>0?"justify-between":"justify-end"} mt-2`,children:[m>0&&e.jsx(T,{variant:"secondary",onClick:()=>p(N=>N-1),children:"Previous"}),m<j.length-1&&e.jsx(T,{variant:"primary",onClick:()=>p(N=>N+1),children:"Skip & Continue"})]})]})})},AA=({data:t,setVisibleSection:a})=>{var g,b,w;const{projectId:l}=Ce(),[r,o]=A.useState({layoutType:(t==null?void 0:t.layoutType)||"L-shaped",measurements:(t==null?void 0:t.measurements)||{top:0,left:0,right:0},kitchenPackage:(t==null?void 0:t.kitchenPackage)||"Essentials",graniteCountertop:(t==null?void 0:t.graniteCountertop)||!1,numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=NA(),p=k=>{const y=k.target,{name:C,type:j,value:S}=y;let v=S;if(j==="checkbox")v=y.checked;else if(j==="number"){const N=parseFloat(S);v=isNaN(N)?0:Math.max(0,N)}["top","left","right"].includes(C)?o(N=>({...N,measurements:{...N==null?void 0:N.measurements,[C]:v}})):o(N=>({...N,[C]:v}))},x=(k,y)=>{o(C=>({...C,[k]:y}))},h=async()=>{var k,y;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"Kitchen data updated successfully"})}catch(C){F({title:"Error",description:((y=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:y.message)||(C==null?void 0:C.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Kitchen Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Layout Type"}),e.jsxs(Je,{onValueChange:k=>x("layoutType",k),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select layout",selectedValue:r.layoutType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"L-shaped",children:"L-shaped"}),e.jsx(ye,{value:"Straight",children:"Straight"}),e.jsx(ye,{value:"U-shaped",children:"U-shaped"}),e.jsx(ye,{value:"Parallel",children:"Parallel"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Kitchen Package"}),e.jsxs(Je,{onValueChange:k=>x("kitchenPackage",k),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.kitchenPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"graniteCountertop",checked:r.graniteCountertop??void 0,onChange:p}),e.jsx(fe,{children:"Granite Countertop"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Top (in feet)"}),e.jsx(de,{type:"number",name:"top",value:((g=r.measurements)==null?void 0:g.top)||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Left (in feet)"}),e.jsx(de,{type:"number",name:"left",value:((b=r.measurements)==null?void 0:b.left)||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Measurement - Right (in feet)"}),e.jsx(de,{type:"number",name:"right",value:((w=r.measurements)==null?void 0:w.right)||"",onChange:p,min:0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(T,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Kitchen Requirements"})})]})},OA=({data:t,setVisibleSection:a})=>{const{projectId:l}=Ce(),[r,o]=A.useState({seatingStyle:(t==null?void 0:t.seatingStyle)||"Sofa Set",tvUnitDesignRequired:(t==null?void 0:t.tvUnitDesignRequired)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,wallDecorStyle:(t==null?void 0:t.wallDecorStyle)||"Paint",numberOfFans:(t==null?void 0:t.numberOfFans)||0,numberOfLights:(t==null?void 0:t.numberOfLights)||0,livingHallPackage:(t==null?void 0:t.livingHallPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=kA(),p=g=>{const b=g.target,{name:w,type:k,value:y}=b;let C=y;if(k==="checkbox")C=b.checked;else if(k==="number"){const j=parseFloat(y);C=isNaN(j)?0:Math.max(0,j)}o(j=>({...j,[w]:C}))},x=(g,b)=>{o(w=>({...w,[g]:b}))},h=async()=>{var g,b;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"Living Hall data updated successfully"})}catch(w){F({title:"Error",description:((b=(g=w==null?void 0:w.response)==null?void 0:g.data)==null?void 0:b.message)||(w==null?void 0:w.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Living Hall Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Seating Style"}),e.jsxs(Je,{onValueChange:g=>x("seatingStyle",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select seating style",selectedValue:r.seatingStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Sofa Set",children:"Sofa Set"}),e.jsx(ye,{value:"L-Shaped Sofa",children:"L-Shaped Sofa"}),e.jsx(ye,{value:"Recliner Chairs",children:"Recliner Chairs"}),e.jsx(ye,{value:"Floor Seating",children:"Floor Seating"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Wall Decor Style"}),e.jsxs(Je,{onValueChange:g=>x("wallDecorStyle",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wall decor",selectedValue:r.wallDecorStyle||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Paint",children:"Paint"}),e.jsx(ye,{value:"Wallpaper",children:"Wallpaper"}),e.jsx(ye,{value:"Wood Paneling",children:"Wood Paneling"}),e.jsx(ye,{value:"Stone Cladding",children:"Stone Cladding"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Fans"}),e.jsx(de,{type:"number",name:"numberOfFans",value:r.numberOfFans||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Lights"}),e.jsx(de,{type:"number",name:"numberOfLights",value:r.numberOfLights||"",onChange:p,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitDesignRequired",checked:r.tvUnitDesignRequired||void 0,onChange:p}),e.jsx(fe,{children:"TV Unit Design Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired||void 0,onChange:p}),e.jsx(fe,{children:"False Ceiling Required"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>x("livingHallPackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.livingHallPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"Select Value"}),e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(T,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Living Hall Requirements"})})]})},RA=({data:t,setVisibleSection:a})=>{const{projectId:l}=Ce(),[r,o]=A.useState({numberOfBedrooms:(t==null?void 0:t.numberOfBedrooms)||1,bedType:(t==null?void 0:t.bedType)||"Queen",wardrobeIncluded:(t==null?void 0:t.wardrobeIncluded)||!1,falseCeilingRequired:(t==null?void 0:t.falseCeilingRequired)||!1,tvUnitRequired:(t==null?void 0:t.tvUnitRequired)||!1,studyTableRequired:(t==null?void 0:t.studyTableRequired)||!1,bedroomPackage:(t==null?void 0:t.bedroomPackage)||"Essentials",notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=SA(),p=g=>{const b=g.target,{name:w,type:k,value:y}=b;let C=y;if(k==="checkbox")C=b.checked;else if(k==="number"){const j=parseFloat(y);C=isNaN(j)?0:Math.max(0,j)}o(j=>({...j,[w]:C}))},x=(g,b)=>{o(w=>({...w,[g]:b}))},h=async()=>{var g,b;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"bedroom data updated successfully"})}catch(w){F({title:"Error",description:((b=(g=w==null?void 0:w.response)==null?void 0:g.data)==null?void 0:b.message)||(w==null?void 0:w.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Bedroom Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Bedrooms"}),e.jsx(de,{type:"number",name:"numberOfBedrooms",value:r.numberOfBedrooms??"",onChange:p,min:1})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Bed Type"}),e.jsxs(Je,{onValueChange:g=>x("bedType",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select bed type",selectedValue:r.bedType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Single",children:"Single"}),e.jsx(ye,{value:"Double",children:"Double"}),e.jsx(ye,{value:"Queen",children:"Queen"}),e.jsx(ye,{value:"King",children:"King"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"wardrobeIncluded",checked:r.wardrobeIncluded??void 0,onChange:p}),e.jsx(fe,{children:"Wardrobe Included"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"falseCeilingRequired",checked:r.falseCeilingRequired??void 0,onChange:p}),e.jsx(fe,{children:"False Ceiling Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"tvUnitRequired",checked:r.tvUnitRequired??void 0,onChange:p}),e.jsx(fe,{children:"TV Unit Required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"studyTableRequired",checked:r.studyTableRequired??void 0,onChange:p}),e.jsx(fe,{children:"Study Table Required"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>x("bedroomPackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.bedroomPackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(T,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Bedroom Requirements"})})]})},TA=({data:t,setVisibleSection:a})=>{const{projectId:l}=Ce(),[r,o]=A.useState({wardrobeType:(t==null?void 0:t.wardrobeType)||"Sliding",lengthInFeet:(t==null?void 0:t.lengthInFeet)||0,heightInFeet:(t==null?void 0:t.heightInFeet)||0,mirrorIncluded:(t==null?void 0:t.mirrorIncluded)||!1,wardrobePackage:(t==null?void 0:t.wardrobePackage)||"Essentials",numberOfShelves:(t==null?void 0:t.numberOfShelves)||0,numberOfDrawers:(t==null?void 0:t.numberOfDrawers)||0,notes:(t==null?void 0:t.notes)||""}),{mutateAsync:d,isPending:m}=CA(),p=g=>{const b=g.target,{name:w,type:k,value:y}=b;let C=y;if(k==="checkbox")C=b.checked;else if(k==="number"){const j=parseFloat(y);C=isNaN(j)?0:Math.max(0,j)}o(j=>({...j,[w]:C}))},x=(g,b)=>{o(w=>({...w,[g]:b}))},h=async()=>{var g,b;try{if(!l)return;await d({projectId:l,updateData:r}),F({title:"Success",description:"Wardrobe data updated successfully"})}catch(w){F({title:"Error",description:((b=(g=w==null?void 0:w.response)==null?void 0:g.data)==null?void 0:b.message)||(w==null?void 0:w.message)||"Failed to generate invitation link",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 bg-white rounded-2xl p-6 shadow border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"Wardrobe Requirements"}),e.jsxs("button",{onClick:()=>a(null),className:"text-blue-500 text-sm underline",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),e.jsx("span",{children:"Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Wardrobe Type"}),e.jsxs(Je,{onValueChange:g=>x("wardrobeType",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select wardrobe type",selectedValue:r.wardrobeType||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Sliding",children:"Sliding"}),e.jsx(ye,{value:"Openable",children:"Openable"})]})]})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Length (in feet)"}),e.jsx(de,{type:"number",name:"lengthInFeet",value:r.lengthInFeet||0,onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Height (in feet)"}),e.jsx(de,{type:"number",name:"heightInFeet",value:r.heightInFeet||0,onChange:p,min:0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"mirrorIncluded",checked:r.mirrorIncluded??void 0,onChange:p}),e.jsx(fe,{children:"Mirror Included"})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Shelves"}),e.jsx(de,{type:"number",name:"numberOfShelves",value:r.numberOfShelves||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Number of Drawers"}),e.jsx(de,{type:"number",name:"numberOfDrawers",value:r.numberOfDrawers||"",onChange:p,min:0})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Package"}),e.jsxs(Je,{onValueChange:g=>x("wardrobePackage",g),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select package",selectedValue:r.wardrobePackage||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"Essentials",children:"Essentials"}),e.jsx(ye,{value:"Premium",children:"Premium"}),e.jsx(ye,{value:"Luxury",children:"Luxury"}),e.jsx(ye,{value:"Build Your Own Package",children:"Build Your Own Package"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(fe,{children:"Additional Notes"}),e.jsx(vs,{name:"notes",value:r.notes||"",onChange:p,placeholder:"Add any specific requirements or comments",rows:3,className:"w-full"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(T,{onClick:h,isLoading:m,className:"bg-blue-600 text-white w-full md:w-auto",children:"Save Wardrobe Requirements"})})]})},PA=async({stageName:t,projectId:a,api:l,startedAt:r})=>{const o=r?{startedAt:r}:{},{data:d}=await l.post(`/starttimer/start/${t}/${a}`,o);if(!d.ok)throw new Error(d.message);return d.data},MA=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({stageName:o,projectId:d,startedAt:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to start timer.");if(!l)throw new Error("API instance missing.");return await PA({stageName:o,projectId:d,api:l,startedAt:m})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["stage",d.stageName,d.projectId]})}})},_m=t=>{const a=Math.floor(t/1e3),l=Math.floor(a/(3600*24)),r=Math.floor(a%(3600*24)/3600),o=Math.floor(a%3600/60),d=a%60;return`${l}d ${r}h ${o}m ${d}s`},ls=({startedAt:t,stageName:a,projectId:l,completedAt:r,deadLine:o,formId:d,deadLineMutate:m,isPending:p,refetchStageMutate:x})=>{const[h,g]=A.useState(new Date),[b,w]=A.useState(o?new Date(o).toISOString().split("T")[0]:""),[k,y]=A.useState(!1),[C,j]=A.useState(!1),[S,v]=A.useState(""),{mutateAsync:N,isPending:M}=MA();A.useEffect(()=>{const I=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(I)},[]);const P=t?new Date(t):null,L=r?new Date(r):null,z=o?new Date(o):null,q=()=>{if(!P)return"Not started yet";if(P&&L){const Y=L.getTime()-P.getTime();return` Completed in: ${_m(Y)}`}if(z){const Y=z.getTime()-h.getTime();return Y<=0?e.jsx("span",{className:"text-red-600 font-semibold",children:" Deadline has reached"}):` Remaining: ${_m(Y)}`}const I=h.getTime()-P.getTime();return` Running: ${_m(I)}`},H=I=>I?I.toLocaleString("en-IN",{timeZone:"Asia/Kolkata",dateStyle:"medium",timeStyle:"short"}):"Not Available",ue=async()=>{var I,Y;try{if(!d||!b)return;const G=b.length===10?`${b}T00:00:00`:b,re=new Date(G);if(isNaN(re.getTime()))return F({title:"Invalid Date",description:"Please pick a valid date & time",variant:"destructive"});if(re<new Date)return F({title:"Invalid Date",description:"Deadline cannot be in the past",variant:"destructive"});await m({formId:d,projectId:l,deadLine:G}),x(),y(!1),F({title:"Success",description:"Deadline updated successfully"})}catch(G){F({title:"Error",description:((Y=(I=G==null?void 0:G.response)==null?void 0:I.data)==null?void 0:Y.message)||"Failed to update deadline",variant:"destructive"})}},U=async()=>{var I,Y;try{if(!S)return F({title:"Error",description:"Please pick a date"});const G=new Date(S);if(isNaN(G.getTime()))return F({title:"Invalid Date",description:"Please provide a valid date & time.",variant:"destructive"});if(G<new Date)return F({title:"Invalid Date",description:"The started time cannot be in the past.",variant:"destructive"});await N({projectId:l,stageName:a,startedAt:G.toISOString()}),await x(),F({title:"Success",description:"Started time updated"}),j(!1)}catch(G){F({title:"Error",description:((Y=(I=G==null?void 0:G.response)==null?void 0:I.data)==null?void 0:Y.message)||(G==null?void 0:G.message)||"Failed to update started time",variant:"destructive"})}};return e.jsxs("div",{className:"text-sm w-full text-blue-900 space-y-3",children:[e.jsxs("div",{className:"flex w-full justify-between flex-wrap gap-x-6 gap-y-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-play text-blue-500"}),e.jsx("strong",{children:"Started On:"})," ",H(P),!C&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-flag-checkered text-green-500"}),e.jsx("strong",{children:"Completed On:"})," ",H(L)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar text-purple-600"}),e.jsx("strong",{children:"Deadline:"})," ",H(z),!k&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[e.jsx("i",{className:"fa-solid fa-pen mr-1"})," Edit"]})]})]}),e.jsx("div",{className:"font-semibold text-blue-700",children:q()}),C&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(de,{type:"datetime-local",value:S,min:new Date().toISOString().slice(0,16),onChange:I=>v(I.target.value),className:"max-w-xs"}),e.jsx(T,{onClick:U,isLoading:M,variant:"primary",children:"Update StartedAt"}),e.jsx(T,{onClick:()=>j(!1),variant:"ghost",children:"Cancel"})]}),k&&e.jsxs("div",{className:"flex w-full flex-wrap gap-3 pt-2 items-center",children:[e.jsx(de,{type:"datetime-local",value:b,min:new Date().toISOString().slice(0,16),onChange:I=>w(I.target.value),className:"max-w-xs"}),e.jsx(T,{onClick:ue,isLoading:p,className:"bg-blue-600 text-white",children:"Update Deadline"}),e.jsx(T,{onClick:()=>y(!1),variant:"ghost",children:"Cancel"})]})]})},Vt=async({src:t,alt:a})=>{var l,r;try{console.log("im donwloadin");const o=t.split(".com/")[1],{data:d}=await Ge.get(`https://houseofram.in/api/download-url?key=${encodeURIComponent(o)}&filename=${encodeURIComponent(a)}`),m=document.createElement("a");m.href=d.url,m.download="",document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(o){F({title:"Error",description:((r=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:r.message)||"failed to download"})}},Ky=({formId:t,projectId:a,refetch:l,existingUploads:r=[],onUploadComplete:o,uploadFilesMutate:d,uploadPending:m,onDeleteUpload:p,deleteFilePending:x})=>{const[h,g]=A.useState([]),[b,w]=A.useState(null),k=v=>{v.target.files&&g(Array.from(v.target.files))},y=async()=>{var v,N;if(!(!t||h.length===0))try{await d({formId:t,files:h,projectId:a}),F({title:"Success",description:"Files uploaded successfully."}),g([]),o==null||o()}catch(M){F({title:"Upload Failed",description:((N=(v=M==null?void 0:M.response)==null?void 0:v.data)==null?void 0:N.message)||"Try again later.",variant:"destructive"})}},C=async v=>{var N,M;try{await(p==null?void 0:p({fileId:v,projectId:a})),F({title:"Success",description:"Files Deleted successfully."}),l()}catch(P){F({title:"Upload Failed",description:((M=(N=P==null?void 0:P.response)==null?void 0:N.data)==null?void 0:M.message)||"Try again later.",variant:"destructive"})}},j=r.filter(v=>v.type==="pdf"),S=r.filter(v=>v.type==="image");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(de,{type:"file",multiple:!0,onChange:k,accept:"image/jpeg,image/png,application/pdf"}),e.jsx(T,{onClick:y,isLoading:m,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px]  rounded-lg  border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto ",children:[j.length===0&&e.jsx("div",{className:"min-h-[145px]   flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),j==null?void 0:j.map((v,N)=>e.jsxs("li",{className:"flex justify-between items-center  bg-blue-50 p-2 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:v.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(T,{onClick:()=>Vt({src:v==null?void 0:v.url,alt:(v==null?void 0:v.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",isLoading:x,onClick:()=>C(v==null?void 0:v._id),className:"text-green-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]}),e.jsxs("div",{className:"overflow-y-auto",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2  max-h-[180px] rounded-lg border-2 border-[#5e5f612a] max-w-[100%] overflow-x-hidden custom-scrollbar overflow-y-auto custom-scrollbar",children:[S.length===0&&e.jsx("div",{className:"min-h-[145px]  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),S.map((v,N)=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 sm:p-2 p-1 rounded-xl",children:[e.jsx("span",{className:"truncate whitespace-wrap max-w-[100%]",children:v.originalName}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>w(v==null?void 0:v.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(T,{size:"sm",onClick:()=>Vt({src:v.url,alt:v.originalName||"file.pdf"}),className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",isLoading:x,onClick:()=>C(v==null?void 0:v._id),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},N))]})]})]}),b&&e.jsx("div",{onClick:()=>w(null),className:"fixed inset-0 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:v=>v.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>w(null)}),e.jsx("img",{src:b,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},FA=async({projectId:t,stageNumber:a,stagePath:l,api:r})=>{const{data:o}=await r.put(`/stage${a}/${l}/${t}`);if(!o.ok)throw new Error(o.message);return o},LA=()=>{const{role:t}=W(),a=Z(t),l=["staff","owner","CTO"];return le({mutationFn:async({projectId:r,stageNumber:o,stagePath:d})=>{if(!t||!l.includes(t))throw new Error("You are not authorized to reset this stage.");if(!a)throw new Error("API instance not available.");return await FA({projectId:r,stageNumber:o,stagePath:d,api:a})}})},js=({projectId:t,stageNumber:a,stagePath:l,buttonClass:r="bg-red-600 text-white",iconClass:o="fas fa-rotate-left",disabled:d=!1,className:m=""})=>{const{mutateAsync:p,isPending:x}=LA(),h=async()=>{var g,b;try{await p({projectId:t,stageNumber:a,stagePath:l}),F({description:"Stage Reset successfully",title:"Success"})}catch(w){F({title:"Error",description:((b=(g=w==null?void 0:w.response)==null?void 0:g.data)==null?void 0:b.message)||"Failed to Reset the stage",variant:"destructive"})}};return e.jsx("div",{className:`space-y-1 w-full ${m}`,children:e.jsxs(T,{onClick:h,variant:"danger",disabled:x||d,className:`${r} flex items-center gap-2 !p-2 w-full`,children:[e.jsx("i",{className:o}),e.jsx("span",{children:x?"Resetting...":"Reset Stage"})]})})},jt=()=>{const t=Array.from({length:13});return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(Te,{className:"h-8 w-40 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map((a,l)=>e.jsxs("div",{className:"bg-white p-4 shadow rounded-lg",children:[e.jsx(Te,{className:"h-6 w-32 mb-2"}),e.jsx(Te,{className:"h-4 w-24 mb-4"}),e.jsx(Te,{className:"h-4 w-16"})]},l))})]})},DA=({client:t})=>e.jsxs(De,{className:"p-4 bg-white shadow border-l-4 border-blue-500",children:[e.jsxs("h2",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-user-tie mr-2"})," Client Info"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(Zo,{label:"Name",value:t==null?void 0:t.clientName,icon:"fa-user"}),e.jsx(Zo,{label:"Email",value:t==null?void 0:t.email,icon:"fa-envelope"}),e.jsx(Zo,{label:"WhatsApp",value:t==null?void 0:t.whatsapp,icon:"fa-phone"}),e.jsx(Zo,{label:"Location",value:t==null?void 0:t.location,icon:"fa-location-dot"})]})]}),Zo=({label:t,value:a,icon:l})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${l} text-gray-600`}),e.jsxs("strong",{children:[t,":"]})," ",a||"No data"]}),_A=A.memo(DA),qA=({sections:t,setVisibleSection:a})=>e.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(({key:l,label:r,icon:o})=>e.jsx("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer group",onClick:()=>a(l),children:e.jsxs("div",{className:"flex items-center justify-between p-5 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-3 rounded-full text-xl",children:e.jsx("i",{className:o})}),e.jsx("span",{className:"text-sm font-medium text-gray-800 group-hover:text-blue-700",children:r})]}),e.jsx("i",{className:"fa-solid fa-chevron-right text-blue-400 group-hover:text-blue-600"})]})},l))}),zA=ct.memo(qA),UA=async(t,a,l,r)=>(console.log("staffId",a),(await r.put(`/assignstafftostage/${t}/${a}/${l}`)).data),IA=()=>{const{role:t}=W(),a=Z(t),l=["owner","CTO","staff"];return le({mutationFn:async({projectId:r,staffId:o,stageName:d})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("Not allowed to Access this api");if(!a)throw new Error("API not found");return UA(r,o,d,a)}})};function rs({stageName:t,projectId:a,organizationId:l,currentAssignedStaff:r,className:o=""}){const[d,m]=A.useState(!1),[p,x]=A.useState(r),{data:h,isLoading:g}=di(l,"staff"),{mutateAsync:b}=IA(),w=h,k=async y=>{var C,j;try{await b({projectId:a,staffId:y._id,stageName:t}),x(y),F({title:"Success",description:`${y.staffName} assigned to ${t}`}),m(!1)}catch(S){F({title:"Error",description:((j=(C=S==null?void 0:S.response)==null?void 0:C.data)==null?void 0:j.message)||(S==null?void 0:S.message)||"Failed to assign staff",variant:"destructive"})}};return e.jsxs("div",{className:`relative inline-flex items-center px-2 py-2 sm:py-1 rounded-lg text-sm shadow-sm border-[#92abc4] sm:border-none ${o} `,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-700 whitespace-nowrap",children:[e.jsx("span",{className:"font-medium hidden sm:inline text-blue-800",children:"Staff:"})," ",e.jsx("span",{className:"font-medium inline sm:hidden text-blue-800",children:"Staff Member:"})," ",p?e.jsx("span",{className:"text-gray-800 font-semibold",children:p==null?void 0:p.staffName}):e.jsx("span",{className:"text-gray-400 text-[12px]  italic",children:"Not Assigned"})]}),e.jsx(T,{size:"sm",variant:"ghost",className:"text-blue-600 hover:bg-blue-50 px-2 py-1 text-xs",onClick:()=>m(!d),children:d?e.jsx("i",{className:"fas fa-xmark text-red-600"}):e.jsx("i",{className:"fas fa-pencil text-blue-600"})})]}),d&&e.jsx("div",{className:"absolute z-10 top-full left-[0%] sm:left-[-20%] mt-2 w-[200px] bg-white border border-blue-200 rounded-md shadow-lg max-h-48 overflow-auto text-sm",children:g?e.jsx("div",{className:"p-3 text-gray-500 text-center",children:"Loading..."}):w.length===0?e.jsx("div",{className:"p-3 text-gray-400 text-center",children:"No staff available"}):e.jsx("ul",{className:"divide-y divide-blue-100 max-h-40 overflow-y-auto custom-scrollbar",children:w==null?void 0:w.map(y=>e.jsxs("li",{onClick:()=>k(y),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",children:[e.jsx("span",{className:"font-medium text-blue-700 block truncate",children:(y==null?void 0:y.staffName)||(y==null?void 0:y.name)}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:y==null?void 0:y.email})]},y==null?void 0:y._id))})})]})}const Q0=[{Component:RA,icon:"fa-solid fa-bed",label:"Bedroom Section",key:"bedroom"},{Component:AA,icon:"fa-solid fa-kitchen-set",label:"Kitchen Section",key:"kitchen"},{Component:OA,icon:"fa-solid fa-house",label:"Living Hall Section",key:"livingHall"},{Component:TA,icon:"fa-solid fa-shirt",label:"Wardrobe Section",key:"wardrobe"}];function $A(){var G,re,_,X,ce;const{projectId:t,organizationId:a}=Ce(),{role:l}=W(),{isMobile:r,openMobileSidebar:o}=He(),[d,m]=A.useState(""),[p,x]=A.useState(!1),[h,g]=A.useState(null),{data:b,isLoading:w,error:k,refetch:y}=bA({projectId:t}),{mutateAsync:C,isPending:j}=yA(),{mutateAsync:S,isPending:v}=wA(),{mutateAsync:N,isPending:M}=vA(),{mutateAsync:P,isPending:L}=jA(),{mutateAsync:z,isPending:q}=mA();if(w)return e.jsx(jt,{});const H=async()=>{var te,O;if(window.confirm("Are you sure want to mark it as completed?"))try{v||(await S({formId:b._id,projectId:t}),F({title:"Success",description:"completion updated successfully"}))}catch($){F({title:"Error",description:((O=(te=$==null?void 0:$.response)==null?void 0:te.data)==null?void 0:O.message)||"Failed to update to complete the form",variant:"destructive"})}},ue=async te=>{try{const O=["owner","staff","CTO"];if(!l)throw new Error("Not Authorized");if(!O.includes(l))throw new Error("Dont have the access");await navigator.clipboard.writeText(te),x(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),4e3)}catch(O){F({title:"Error",description:O.message||"Failed to copy link",variant:"destructive"})}},U=async()=>{var te,O;try{const $=await C({projectId:t});m($.inviteLink||$),F({title:"Success",description:"Invitation link generated successfully"})}catch($){F({title:"Error",description:((O=(te=$==null?void 0:$.response)==null?void 0:te.data)==null?void 0:O.message)||$.message||"Failed to generate invitation link",variant:"destructive"})}},I=async()=>{try{await navigator.clipboard.writeText(d),x(!0),F({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>x(!1),2e3)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},Y=()=>{const te=`You're requeted to fill the form, Click this link to fill the form: ${d}`,O=`https://wa.me/?text=${encodeURIComponent(te)}`;window.open(O,"_blank")};return e.jsx("div",{className:"h-full w-full overflow-y-auto ",children:h?e.jsx("div",{className:"min-h-screen",children:Q0.map(({Component:te,key:O})=>h===O&&e.jsx("div",{className:"pt-6",children:e.jsx(te,{data:b==null?void 0:b[O],isEditable:b==null?void 0:b.isEditable,setVisibleSection:g})},O))}):e.jsxs("div",{className:"h-full w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col w-full sm:flex-row justify-between sm:items-center items-start gap-4",children:[e.jsx("div",{className:"",children:e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})})," ",e.jsx("i",{className:"fa-solid fa-pencil mr-2"})," Client Requirement"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-end lg:justify-end",children:[e.jsxs(T,{isLoading:v,onClick:H,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(js,{projectId:t,stageNumber:1,stagePath:"requirementform",className:"sm:!max-w-[20%] w-full"}),e.jsx(rs,{stageName:"RequirementFormModel",projectId:t,organizationId:a,currentAssignedStaff:(b==null?void 0:b.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),k&&e.jsxs("div",{className:"max-w-xl sm:min-w-[80%]  mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl sm:text-3xl",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500  mb-4 text-lg sm:text-xl",children:((re=(G=k==null?void 0:k.response)==null?void 0:G.data)==null?void 0:re.message)||"Failed to load data"}),e.jsx(T,{onClick:()=>y(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!k&&e.jsxs("main",{className:"h-[calc(100vh-90px)] overflow-y-auto custom-scrollbar space-y-6",children:[e.jsxs(De,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{startedAt:(_=b==null?void 0:b.timer)==null?void 0:_.startedAt,projectId:t,stageName:"requirementform",refetchStageMutate:y,completedAt:(X=b==null?void 0:b.timer)==null?void 0:X.completedAt,deadLine:(ce=b==null?void 0:b.timer)==null?void 0:ce.deadLine,formId:b==null?void 0:b._id,deadLineMutate:N,isPending:M})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(_A,{client:b==null?void 0:b.clientData}),e.jsx(De,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(Ky,{formId:b==null?void 0:b._id,existingUploads:b==null?void 0:b.uploads,onUploadComplete:y,uploadFilesMutate:P,uploadPending:L,projectId:t,refetch:y,onDeleteUpload:z,deleteFilePending:q})})]}),e.jsx(zA,{sections:Q0,setVisibleSection:g}),e.jsx("div",{className:"pb-6",children:b!=null&&b.shareToken?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(de,{value:b==null?void 0:b.shareToken,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(T,{onClick:()=>ue(b==null?void 0:b.shareToken),className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${p?"fa-check":"fa-copy"}`})})]})]}):e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-lg space-y-4",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-blue-900 flex items-center",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request to fill the form by generating a link."}),d?e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{children:"Form Link"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsx(de,{value:d,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(T,{onClick:I,className:"w-full sm:w-auto",children:e.jsx("i",{className:`fas ${p?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(T,{onClick:Y,className:"w-full sm:w-auto bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(T,{onClick:I,className:"w-full sm:w-auto border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]})]}):e.jsxs(T,{onClick:U,isLoading:j,className:"w-full bg-blue-600 text-white py-2.5 sm:py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Form Link"]})]})})]})]})})}const BA=async({projectId:t,siteDetails:a,api:l})=>{const{data:r}=await l.post(`/sitemeasurement/createmeasurement/${t}`,{siteDetails:a});if(!r.ok)throw new Error(r.message);return r.data},HA=async({projectId:t,room:a,api:l})=>{const{data:r}=await l.post(`/sitemeasurement/createroom/${t}`,{room:a});if(!r.ok)throw new Error(r.message);return r.data},QA=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/sitemeasurement/getmeasurement/${t}`);if(!l.ok)throw new Error(l.message);return l.data},GA=async({projectId:t,api:a,payload:l})=>{const{data:r}=await a.put(`/sitemeasurement/updatecommonmeasurement/${t}`,l);if(!r.ok)throw new Error(r.message);return r.data},KA=async({projectId:t,api:a,roomId:l,room:r})=>{const{data:o}=await a.put(`/sitemeasurement/updateroommeasurement/${t}/${l}`,{room:r});if(!o.ok)throw new Error(o.message);return o.data},VA=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sitemeasurement/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},YA=async({projectId:t,roomId:a,api:l})=>{const{data:r}=await l.patch(`/sitemeasurement/deleteroom/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},WA=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sitemeasurement/deletesitemeasurement/${t}`);if(!l.ok)throw new Error(l.message);return l.data},XA=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/sitemeasurement/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},ZA=async({formId:t,files:a,api:l,projectId:r})=>{const o=new FormData;return a.forEach(m=>o.append("file",m)),(await l.post(`/sitemeasurement/upload/multiple/${r}/${t}`,o,{headers:{"Content-Type":"multipart/form-data"}})).data},JA=async(t,a,l)=>{const{data:r}=await l.patch(`/sitemeasurement/${t}/deleteuploadedfile/${a}`);if(!r.ok)throw new Error(r.message);return r.data},e4=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO","client"];return le({mutationFn:async({projectId:r,fileId:o})=>{if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await JA(r,o,a)},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["siteMeasurement",o]})}})},t4=({projectId:t})=>{const a=["owner","staff","CTO","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["siteMeasurement"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await QA({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},s4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,siteDetails:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await BA({projectId:r,api:l,siteDetails:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},a4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,room:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await HA({projectId:r,api:l,room:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},n4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,payload:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await GA({projectId:r,api:l,payload:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},l4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,roomId:o,room:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await KA({projectId:r,api:l,roomId:o,room:d})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},r4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await VA({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},i4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await YA({projectId:r,api:l,roomId:o})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},o4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await WA({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},c4=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await XA({formId:r,deadLine:d,projectId:o,api:l})}})},d4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,files:o,projectId:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await ZA({formId:r,files:o,projectId:d,api:l})}})},u4=({room:t,onEdit:a,onDelete:l,deleteRoomLoading:r})=>{const o=t.length&&t.breadth?(t.length*t.breadth).toFixed(2):null;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:t.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(t),className:"text-blue-600 hover:text-blue-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(T,{isLoading:r,onClick:l,variant:"ghost",className:"!text-red-600 hover:text-red-800 bg-white shadow-none hover:!bg-none",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Length"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.length," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Breadth"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.breadth," ft"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Height"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.height||"N/A"," ft"]})]})]}),o&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-blue-700 font-medium text-center",children:["Total Area: ",o," sq.ft"]})})]})},m4=({measurementData:t,handleDeleteSiteMeasurement:a,deleteRoomLoading:l,setShowSiteForm:r,setShowRoomForm:o,handleEditRoom:d,handleDeleteRoom:m})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Site Measurements"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(!0),className:"px-2 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit"}),e.jsx("button",{onClick:()=>a(),className:"px-2 sm:px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Plot Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.totalPlotAreaSqFt!==null?`${t.siteDetails.totalPlotAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Built-up Area"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.builtUpAreaSqFt!=null?`${t.siteDetails.builtUpAreaSqFt} sq.ft`:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Road Facing"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.roadFacing===!0?"YES":t.siteDetails.roadFacing===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Number of Floors"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.numberOfFloors!=null?t.siteDetails.numberOfFloors:"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is having Slope"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.hasSlope===!0?"YES":t.siteDetails.hasSlope===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Is Boundary Wall exists"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.boundaryWallExists===!0?"YES":t.siteDetails.boundaryWallExists===!1?"NO":"Not mentioned"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Additional Notes"}),e.jsx("p",{className:"text-lg font-semibold text-blue-700",children:t.siteDetails.additionalNotes?t.siteDetails.additionalNotes:"Not mentioned"})]})]})]}),t.siteDetails.totalPlotAreaSqFt!==null&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Rooms"}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Add Room"})]}),t.rooms.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("p",{className:"text-gray-500",children:"No rooms added yet"})]}):e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.rooms.map((p,x)=>e.jsx(u4,{room:p,onEdit:()=>d(p),onDelete:()=>m(p._id),deleteRoomLoading:l},x))})]})]}),f4=A.memo(m4),h4=({roomDetails:t,setRoomDetails:a,handleRoomSubmit:l,setShowRoomForm:r,updateRoomLoading:o,createRoomLoading:d,editingRoomId:m})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:m?"Edit Room":"Add New Room"}),e.jsxs("select",{value:t.name||"",onChange:p=>a(x=>({...x,name:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",children:[e.jsx("option",{value:"",children:"Select Room Type"}),q2.map(p=>e.jsx("option",{value:p,children:p}))]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Length (ft)"}),e.jsx("input",{type:"number",placeholder:"Length (ft)",value:t.length||0,onChange:p=>a({...t,length:Number(p.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Breadth (ft)"}),e.jsx("input",{type:"number",placeholder:"Breadth (ft)",value:t.breadth||0,onChange:p=>a({...t,breadth:Number(p.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Height (ft)"}),e.jsx("input",{type:"number",placeholder:"Height (ft)",value:t.height||0,onChange:p=>a({...t,height:Number(p.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.length&&t.breadth&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-blue-700 font-medium",children:["Calculated Area: ",(Number(t.length)*Number(t.breadth)).toFixed(2)," sq.ft"]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(T,{isLoading:m?o:d,onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Edit Room":"Add Room"})]})]})}),x4=({siteDetails:t,updatePending:a,setSiteDetails:l,handleSiteSubmit:r,setShowSiteForm:o})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Site Measurements"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Total Plot Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Total Plot Area (sq.ft)",value:t.totalPlotAreaSqFt||0,onChange:d=>l({...t,totalPlotAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Built-up Area (sq.ft)"}),e.jsx("input",{type:"number",placeholder:"Built-up Area (sq.ft)",value:t.builtUpAreaSqFt||0,onChange:d=>l({...t,builtUpAreaSqFt:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Number of Floors"}),e.jsx("input",{type:"number",placeholder:"Number of Floors",value:t.numberOfFloors||0,onChange:d=>l({...t,numberOfFloors:Number(d.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.hasSlope??!1,onChange:d=>l({...t,hasSlope:d.target.checked}),className:"mr-2"}),"Has Slope"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.roadFacing??!1,onChange:d=>l({...t,roadFacing:d.target.checked}),className:"mr-2"}),"Road Facing"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.boundaryWallExists??!1,onChange:d=>l({...t,boundaryWallExists:d.target.checked}),className:"mr-2"}),"Boundary Wall Exists"]})]}),e.jsx("textarea",{placeholder:"Additional Notes",value:t.additionalNotes||"",onChange:d=>l({...t,additionalNotes:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",rows:4}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(T,{variant:"secondary",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx(T,{variant:"primary",onClick:r,isLoading:a,children:"Save Details"})]})]})}),p4=A.memo(x4),g4={totalPlotAreaSqFt:null,builtUpAreaSqFt:null,roadFacing:null,numberOfFloors:null,hasSlope:!1,boundaryWallExists:!1,additionalNotes:null},G0={name:null,length:null,breadth:null,height:null};function b4(){var $,D,V,J,ge;const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He();if(!t)return;const[o,d]=A.useState(!1),[m,p]=A.useState(!1),[x,h]=A.useState(g4),[g,b]=A.useState(G0),[w,k]=A.useState(null);let{data:y,isLoading:C,refetch:j,error:S}=t4({projectId:t});const v=s4(),N=a4(),M=n4(),P=l4(),L=i4(),z=o4(),q=r4(),{mutateAsync:H,isPending:ue}=c4(),{mutateAsync:U,isPending:I}=d4(),{mutateAsync:Y,isPending:G}=e4(),re=async()=>{var ae,Se;try{y?await M.mutateAsync({projectId:t,payload:x}):await v.mutateAsync({projectId:t,siteDetails:x}),d(!1),F({description:"Site details updated successfully",title:"Success"})}catch(be){F({title:"Error",description:((Se=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Se.message)||be.message||"Failed to save site details",variant:"destructive"})}},_=async()=>{var ae,Se;try{if(!g.name)throw new Error("please select the name");const be=g.length&&g.breadth?(Number(g.length)*Number(g.breadth)).toFixed(2):null,Ve={...g,area:be};w?await P.mutateAsync({projectId:t,roomId:w,room:Ve}):await N.mutateAsync({projectId:t,room:Ve}),p(!1),k(null),b(G0),F({description:w?"Room updated":"Room added",title:"Success"})}catch(be){F({title:"Error",description:((Se=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Se.message)||(be==null?void 0:be.message)||"Operation failed",variant:"destructive"})}},X=async ae=>{var Se,be;try{await L.mutateAsync({projectId:t,roomId:ae}),F({description:"Room deleted",title:"Success"})}catch(Ve){F({title:"Error",description:((be=(Se=Ve==null?void 0:Ve.response)==null?void 0:Se.data)==null?void 0:be.message)||"Delete failed",variant:"destructive"})}},ce=async()=>{var ae,Se;try{await z.mutateAsync({projectId:t}),F({description:"Site measurement deleted",title:"Success"})}catch(be){F({title:"Error",description:((Se=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Se.message)||"Delete failed",variant:"destructive"})}},te=async()=>{var ae,Se;try{await q.mutateAsync({projectId:t}),F({description:"Completion updated",title:"Success"})}catch(be){F({title:"Error",description:((Se=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Se.message)||"Update failed",variant:"destructive"})}},O=ae=>{b(ae),k(ae==null?void 0:ae._id),p(!0)};return C?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-2 max-w-full h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"})," Site Measurement"]}),e.jsx("p",{className:"text-gray-600 hidden sm:block text-sm sm:text-base",children:"Plan your dream home"})]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2  !w-[100%] sm:!w-[50%] justify-start lg:justify-end",children:[e.jsxs(T,{isLoading:q.isPending,onClick:te,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2  w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"})," Mark Complete"]}),e.jsx(js,{projectId:t,stageNumber:2,stagePath:"sitemeasurement",className:"sm:!max-w-[20%] w-full"}),e.jsx(rs,{stageName:"SiteMeasurementModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),S&&e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((D=($=S==null?void 0:S.response)==null?void 0:$.data)==null?void 0:D.message)||"Failed to load data"}),e.jsx(T,{onClick:()=>j(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!S&&e.jsxs(De,{className:"p-4 mb-4 shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(V=y==null?void 0:y.timer)==null?void 0:V.compltedAt,stageName:"sitemeasurement",formId:y==null?void 0:y._id,projectId:t,deadLine:(J=y==null?void 0:y.timer)==null?void 0:J.deadLine,startedAt:(ge=y==null?void 0:y.timer)==null?void 0:ge.startedAt,refetchStageMutate:j,deadLineMutate:H,isPending:ue})]}),!S&&e.jsx("div",{className:"mb-6",children:e.jsx(De,{className:"p-4 shadow border-l-4 border-blue-500 bg-white",children:e.jsx(Ky,{formId:y==null?void 0:y._id,refetch:j,existingUploads:y==null?void 0:y.uploads,onUploadComplete:j,uploadFilesMutate:U,uploadPending:I,projectId:t,onDeleteUpload:Y,deleteFilePending:G})})}),!S&&e.jsxs(e.Fragment,{children:[!Object.values((y==null?void 0:y.siteDetails)||{}).some(ae=>ae!==null)&&!o?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No Site Details Added"}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add Site Details"})]}):e.jsx(f4,{measurementData:y,handleDeleteSiteMeasurement:ce,setShowSiteForm:d,setShowRoomForm:p,handleEditRoom:O,handleDeleteRoom:X,deleteRoomLoading:L.isPending}),o&&e.jsx(p4,{siteDetails:x,setSiteDetails:h,handleSiteSubmit:re,setShowSiteForm:d,updatePending:M.isPending}),m&&e.jsx(h4,{handleRoomSubmit:_,setShowRoomForm:p,roomDetails:g,setRoomDetails:b,updateRoomLoading:P.isPending,createRoomLoading:N.isPending,editingRoomId:w})]})]})}const y4=async({projectId:t,roomName:a,api:l})=>{const{data:r}=await l.post(`/sampledesign/${t}/rooms`,{roomName:a});if(!r.ok)throw new Error(r.message);return r.data},w4=async({projectId:t,roomName:a,files:l,api:r})=>{const o=new FormData;l.forEach(m=>o.append("files",m));const{data:d}=await r.post(`/sampledesign/${t}/rooms/${a}/upload`,o,{headers:{"Content-Type":"multipart/form-data"}});return d.data},v4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/sampledesign/${t}/rooms`);if(!l.ok)throw new Error(l.message);return l.data},j4=async({projectId:t,roomName:a,fileIndex:l,api:r})=>{const{data:o}=await r.delete(`/sampledesign/${t}/rooms/${a}/delete/${l}`);if(!o.ok)throw new Error(o.message);return o.data},N4=async({projectId:t,api:a,roomId:l})=>{const{data:r}=await a.delete(`/sampledesign/${t}/${l}/deleteroom`);if(!r.ok)throw new Error(r.message);return r.data},S4=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/sampledesign/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},C4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/sampledesign/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},k4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,roomName:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await y4({projectId:r,roomName:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","rooms"]})}})},E4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,roomName:o,files:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await w4({projectId:r,roomName:o,files:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},A4=t=>{const a=["owner","staff","CTO","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["sampledesign","roomfiles",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await v4({projectId:t,api:r})},retry:!1,refetchOnWindowFocus:!1,staleTime:1e3*60*5})},O4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,roomName:o,fileIndex:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await j4({projectId:r,roomName:o,fileIndex:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},R4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,roomId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await N4({projectId:r,roomId:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["sampledesign","roomfiles"]})}})},T4=()=>{const t=["owner","staff","CTO","client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await S4({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},P4=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await C4({formId:r,projectId:o,deadLine:d,api:l})}})},M4=({isOpen:t,onClose:a,onSubmit:l,addPending:r})=>{const[o,d]=A.useState(""),m=async p=>{p.preventDefault(),await l(o),d(""),a()};return t?e.jsx("div",{onClick:a,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{onClick:p=>p.stopPropagation(),className:"bg-white rounded-lg p-6 w-[80%] sm:w-[60%] lg:w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4",children:"Add New Room"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Room Name"}),e.jsx("input",{type:"text",value:o,onChange:p=>d(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx(T,{isLoading:r,type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Room"})]})]})]})}):null},F4=({files:t,onUpload:a,onDelete:l,uploadPending:r,deletePending:o})=>{const d=A.useRef(null),[m,p]=A.useState([]),x=t.filter(y=>y.type==="pdf"),h=t.filter(y=>y.type==="image"),[g,b]=A.useState(null),w=y=>{var C;(C=y.target.files)!=null&&C.length&&p(Array.from(y.target.files))},k=async()=>{m.length!==0&&await a(m)};return e.jsxs("div",{className:"bg-white h-auto rounded-lg p-2 sm:p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs("div",{className:"w-full space-x-2",children:[e.jsx("input",{id:"fileInput",ref:d,type:"file",accept:".pdf,image/*",multiple:!0,className:"mb-1 sm:mb-0 w-[55%] sm:w-[80%] h-full py-2 border-1 px-2 rounded-lg",onChange:w}),e.jsxs(T,{variant:"primary",onClick:()=>{var y;return(y=d.current)==null?void 0:y.click()},className:"",children:[e.jsx("span",{className:"hidden sm:block",children:" Select Files"}),e.jsx("span",{className:"block sm:hidden",children:" Select"})]}),e.jsx(T,{isLoading:r,onClick:k,className:"px-2 sm:px-4 py-2 rounded-lg",variant:"primary",children:"upload"})]})}),e.jsxs("div",{className:"grid h-auto grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-file-pdf text-lg"}),e.jsx("h3",{className:"font-medium",children:"PDF Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:x.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No PDF files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%]",children:x.map((y,C)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[100%] flex-1 ",children:y.originalName||"Unnamed PDF"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{onClick:()=>Vt({src:y==null?void 0:y.url,alt:(y==null?void 0:y.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",isLoading:o,onClick:()=>l(C),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},C))})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-700",children:[e.jsx("i",{className:"fas fa-images text-lg"}),e.jsx("h3",{className:"font-medium",children:"Image Files"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar max-w-[100%] overflow-x-hidden",children:h.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No image files uploaded"}):e.jsx("div",{className:"space-y-2 max-w-[100%] ",children:h.map((y,C)=>e.jsxs("div",{className:"flex items-center max-w-full justify-between py-2 px-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 truncate whitespace-wrap max-w-[80%] ",children:y.originalName||"Unnamed Image"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>b(y==null?void 0:y.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(T,{onClick:()=>Vt({src:y==null?void 0:y.url,alt:(y==null?void 0:y.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",isLoading:o,onClick:()=>l(C),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},C))})})]})]}),g&&e.jsx("div",{onClick:()=>b(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:y=>y.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>b(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})},L4=()=>{var H,ue,U,I,Y;const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He();if(!t)return null;const[o,d]=A.useState(!1),m=k4(),{mutateAsync:p,isPending:x}=E4(),h=O4(),{mutateAsync:g,isPending:b}=R4(),{data:w,isLoading:k,refetch:y,error:C}=A4(t),{mutateAsync:j,isPending:S}=T4(),{mutateAsync:v,isPending:N}=P4(),M=async()=>{var G,re;try{S||await j({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(_){F({title:"Error",description:((re=(G=_==null?void 0:_.response)==null?void 0:G.data)==null?void 0:re.message)||"Failed to update completion status",variant:"destructive"})}},P=async G=>{var re,_;try{await m.mutateAsync({projectId:t,roomName:G}),F({description:"Room Created successfully",title:"Success"})}catch(X){F({title:"Error",description:((_=(re=X==null?void 0:X.response)==null?void 0:re.data)==null?void 0:_.message)||"Failed to create room status",variant:"destructive"})}},L=async G=>{var re,_;try{S||await g({projectId:t,roomId:G}),F({description:"Room section Deleted successfully",title:"Success"})}catch(X){F({title:"Error",description:((_=(re=X==null?void 0:X.response)==null?void 0:re.data)==null?void 0:_.message)||"Failed to delete the room",variant:"destructive"})}},z=async(G,re)=>{var _,X;try{await p({projectId:t,roomName:G,files:re}),F({description:"File uploaded successfully",title:"Success"}),y()}catch(ce){F({title:"Error",description:((X=(_=ce==null?void 0:ce.response)==null?void 0:_.data)==null?void 0:X.message)||(ce==null?void 0:ce.message)||" Failed to upload the files",variant:"destructive"})}},q=async(G,re)=>{var _,X;try{await h.mutateAsync({projectId:t,roomName:G,fileIndex:re}),F({description:"File deleted successfully",title:"Success"}),y()}catch(ce){F({title:"Error",description:((X=(_=ce==null?void 0:ce.response)==null?void 0:_.data)==null?void 0:X.message)||"Failed to delete the files",variant:"destructive"})}};return k?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full min-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md  border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-object-group mr-2"}),"Sample Design Files"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsxs(T,{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!C,children:[e.jsx("i",{className:"fas fa-plus mr-2"}),e.jsx("span",{className:"",children:"Add room"})]}),e.jsxs(T,{isLoading:S,onClick:M,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",disabled:!!C,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(js,{projectId:t,stageNumber:3,stagePath:"sampledesign",className:"flex-1 sm:flex-initial min-w-max",disabled:!!C}),e.jsx(rs,{stageName:"SampleDesignModel",projectId:t,organizationId:a,currentAssignedStaff:(w==null?void 0:w.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),C&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((ue=(H=C==null?void 0:C.response)==null?void 0:H.data)==null?void 0:ue.message)||"Failed to load data"}),e.jsx(T,{onClick:()=>y(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!C&&e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"sampledesign",completedAt:(U=w==null?void 0:w.timer)==null?void 0:U.compltedAt,formId:w==null?void 0:w._id,projectId:t,deadLine:(I=w==null?void 0:w.timer)==null?void 0:I.deadLine,startedAt:(Y=w==null?void 0:w.timer)==null?void 0:Y.startedAt,refetchStageMutate:y,deadLineMutate:v,isPending:N})]}),!(w!=null&&w.rooms)||w.rooms.length===0?e.jsxs("div",{className:"text-center py-10 sm:py-16 bg-white rounded-lg shadow-sm",children:[e.jsx("i",{className:"fas fa-home text-blue-200 text-5xl sm:text-6xl mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Start by adding a room to upload design files"}),e.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 min-w-[200px]",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Your First Room"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:max-h-[60vh] md:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[65vh] overflow-y-auto custom-scrollbar gap-6",children:w.rooms.map(G=>e.jsxs("div",{className:"bg-white border-l-4 border-blue-600 rounded-xl shadow-sm p-1 sm:p-6 flex flex-col",children:[e.jsxs("div",{className:"flex sm:flex-row items-center justify-between gap-3 mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-700 truncate",children:[e.jsx("i",{className:"fas fa-door-open mr-2"}),G.roomName]}),e.jsxs(T,{isLoading:b,onClick:()=>L(G._id),variant:"danger",className:"bg-red-600 text-white  sm:w-auto mt-2 sm:mt-0",children:[e.jsx("i",{className:"fa-solid fa-trash mr-2"}),"Delete"]})]}),e.jsx("div",{className:"flex-grow",children:e.jsx(F4,{files:G.files,onUpload:re=>z(G.roomName,re),onDelete:re=>q(G.roomName,re),uploadPending:x,deletePending:h.isPending})})]},G.roomName))})]}),e.jsx(M4,{isOpen:o,onClose:()=>d(!1),onSubmit:P,addPending:m.isPending})]})},D4=async({projectId:t,formData:a,api:l})=>{for(const[o,d]of a.entries())console.log("form data",o,d);const{data:r}=await l.post(`/technicalconsultation/createmessage/${t}`,a);if(!r.ok)throw new Error(r.message);return r.data},_4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/technicalconsultation/getmessages/${t}`);if(console.log("data form the message",l),!l.ok)throw new Error(l.message);return l.data},q4=async({projectId:t,messageId:a,message:l,senderId:r,senderRole:o,api:d})=>{const{data:m}=await d.put(`/technicalconsultation/editmessage/${t}/${a}`,{message:l,senderId:r,senderRole:o});if(!m.ok)throw new Error(m.message);return m.data},z4=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/technicalconsultation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},U4=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/technicalconsultation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},I4=t=>{const a=["owner","staff","CTO","worker"],{role:l}=W(),r=Z(l);return Le({queryKey:["consultationMessages",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API not found");return await _4({projectId:t,api:r})},enabled:!!t,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1})},$4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,formData:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await D4({projectId:r,formData:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["consultationMessages"]})}})},B4=()=>{const t=["owner","staff","CTO","worker"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,messageId:o,message:d,senderId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await q4({projectId:r,messageId:o,message:d,senderId:m,senderRole:a,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["consultationMessages"]})}})},H4=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance not found for role");return await U4({projectId:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["siteMeasurement"]})}})},Q4=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a)throw new Error("not authorized");if(!t.includes(a))throw new Error("you  dont have the access to make this api");if(!l)throw new Error("api is null");return await z4({formId:r,projectId:o,deadLine:d,api:l})}})},G4=()=>{var O,$,D,V,J,ge;const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He(),{role:o,_id:d}=W(),[m,p]=A.useState(""),[x,h]=A.useState([]),[g,b]=A.useState(null),[w,k]=A.useState(""),[y,C]=A.useState(null),[j,S]=A.useState(!1);let{data:v,isLoading:N,error:M,isError:P,refetch:L}=I4(t);const z=v,{mutateAsync:q,isPending:H}=$4(),{mutateAsync:ue,isPending:U}=B4(),{mutateAsync:I,isPending:Y}=Q4(),G=H4(),re=async()=>{var ae,Se;try{await G.mutateAsync({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(be){F({title:"Error",description:((Se=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Se.message)||be.message||"Failed to update completion status",variant:"destructive"})}},_=async()=>{var ae,Se;try{if(!m&&x.length===0)throw new Error("please write anything");const be=new FormData;m&&be.append("message",m),o&&be.append("senderRole",o),be.append("sender",d),x.forEach(Ve=>be.append("attachments",Ve)),await q({projectId:t,formData:be}),p(""),h([]),F({description:"message sent successfully",title:"Success"})}catch(be){F({title:"Error",description:((Se=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Se.message)||(be==null?void 0:be.message)||"Failed to send the message",variant:"destructive"})}},X=(ae,Se)=>{b(ae),k(Se)},ce=()=>{b(null),k("")},te=async()=>{var ae,Se;try{if(!g||!w)throw new Error("please write anything");await ue({projectId:t,messageId:g,message:w,senderId:d}),b(null),k(""),F({description:"message edited successfully",title:"Success"})}catch(be){F({title:"Error",description:((Se=(ae=be==null?void 0:be.response)==null?void 0:ae.data)==null?void 0:Se.message)||(be==null?void 0:be.message)||"Failed to edit the message",variant:"destructive"})}};return N?e.jsx(jt,{}):e.jsxs("div",{className:"container mx-auto  max-w-full max-h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-2",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-comments mr-2"})," Technical Consultation"]}),e.jsxs("div",{className:"w-full lg:w-[60%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs(T,{isLoading:G.isPending,onClick:re,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(js,{projectId:t,stageNumber:4,stagePath:"technicalconsultation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"TechnicalConsultationModel",projectId:t,organizationId:a,currentAssignedStaff:(z==null?void 0:z.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),e.jsxs(De,{className:"p-4 mb-3 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"technicalconsultation",completedAt:(O=z==null?void 0:z.timer)==null?void 0:O.completedAt,projectId:t,formId:z==null?void 0:z._id,deadLine:($=z==null?void 0:z.timer)==null?void 0:$.deadLine,startedAt:(D=z==null?void 0:z.timer)==null?void 0:D.startedAt,refetchStageMutate:L,deadLineMutate:I,isPending:Y})]}),e.jsx("div",{className:" flex flex-col bg-white rounded-xl p-2 shadow-md border custom-scrollbar min-h-[200px] sm:min-h-[170px] md:min-h-[190px] lg:min-h-[300px] border-gray-200 mb-2 flex-grow max-h-[70vh] sm:!max-h-[30vh] md:!max-h-[30vh] lg:!max-h-[42vh] xl:!max-h-[49vh] overflow-y-auto ",children:e.jsxs("div",{className:"flex flex-col-reverse overflow-y-auto custom-scrollbar  flex-grow p-2  md:!max-h-full space-y-reverse space-y-4",children:[(P||M)&&e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-ban text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:((J=(V=M==null?void 0:M.response)==null?void 0:V.data)==null?void 0:J.message)||(M==null?void 0:M.message)||"Failed to load messages, please try again"}),e.jsxs(T,{onClick:()=>L(),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx("i",{className:"fas fa-redo mr-2"})," Retry"]})]})}),N?e.jsxs("div",{className:"flex h-full items-center justify-center py-10",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-2xl"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Loading messages..."})]}):(z==null?void 0:z.messages.length)===0?e.jsx("div",{className:"flex h-full items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-envelope text-6xl text-blue-300 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"No messages have been posted yet."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start the conversation using the box below."})]})}):e.jsx("div",{className:"overflow-y-auto custom-scrollbar flex flex-col-reverse space-y-reverse space-y-4",children:(ge=z==null?void 0:z.messages)==null?void 0:ge.slice().sort((ae,Se)=>new Date(Se.createdAt).getTime()-new Date(ae.createdAt).getTime()).map(ae=>{var Se;return e.jsxs("div",{className:"bg-blue-50 w-full group px-4 py-[5px] rounded-lg shadow flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs sm:text-[10px] text-gray-600",children:[ae.senderRole.toUpperCase()," - ",new Date(ae.createdAt).toLocaleString(),ae.isEdited&&e.jsxs(Oa,{className:"sm:ml-2 my-1 sm:my-0",children:[" ",e.jsxs("p",{className:"hidden sm:inline-block",children:["message is  "," "," "]}),"  edited by ",ae.senderRole]})]}),e.jsx("div",{className:"opacity-0 scale-95 group-hover:opacity-100 transition-all duration-300",children:(ae.sender===d||o==="owner"||o==="CTO")&&e.jsx("div",{className:"flex gap-2",children:e.jsx(T,{variant:"secondary",onClick:()=>X(ae._id,ae.message),className:"text-blue-600 text-sm",children:e.jsx("i",{className:"fas fa-edit"})})})})]}),g===ae._id?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mt-2",children:[e.jsx(de,{value:w,onChange:be=>k(be.target.value),className:"flex-grow"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(T,{isLoading:U,onClick:te,className:"w-full sm:w-auto",children:"Save"}),e.jsx(T,{variant:"danger",className:"w-full sm:w-auto border-red-200 hover:bg-red-700 bg-red-600 text-white",onClick:ce,children:"Cancel"})]})]}):e.jsx("p",{className:"text-gray-900 text-sm",children:ae.message}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-3",children:(Se=ae.attachments)==null?void 0:Se.map((be,Ve)=>e.jsxs("div",{className:"flex items-center gap-2 bg-white border px-3 py-2 rounded shadow-sm w-full max-w-[280px]",children:[e.jsx("i",{className:`fas ${be.type==="pdf"?"fa-file-pdf text-red-500":"fa-image text-blue-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 truncate flex-grow min-w-0",children:be.originalName}),be.type==="image"&&e.jsx(T,{size:"sm",variant:"primary",onClick:()=>{C(be.url),S(!0)},children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(T,{onClick:()=>Vt({src:be==null?void 0:be.url,alt:(be==null?void 0:be.originalName)||"file.pdf"}),size:"sm",className:"text-sm",children:e.jsx("i",{className:"fa-solid fa-download"})})]},Ve))})]},ae._id)})})]})}),e.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl shadow-md",children:[e.jsx(fe,{htmlFor:"message",children:"Your Message"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-3",children:[e.jsx(de,{id:"message",placeholder:"Write something...",value:m,onChange:ae=>p(ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&_()},className:"flex-grow"}),e.jsxs(T,{isLoading:H,onClick:_,className:"w-full sm:w-auto",children:["Send ",e.jsx("i",{className:"ml-2 fa-solid fa-paper-plane"})]})]}),e.jsx(fe,{children:"Attach Files (PDF or Image)"}),e.jsx(de,{type:"file",multiple:!0,accept:".pdf,image/*",onChange:ae=>h(Array.from(ae.target.files||[])),className:""})]}),y&&e.jsx("div",{onClick:()=>C(null),className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{onClick:ae=>ae.stopPropagation(),className:"bg-white p-2 sm:p-4 rounded-lg shadow-lg max-w-[90%] max-h-[90%] overflow-auto relative",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:()=>C(null),className:"text-red-500 text-xl",children:e.jsx("i",{className:"fas fa-times"})})}),e.jsxs("div",{className:"relative min-w-80 ",children:[j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-gray-600"})}),e.jsx("img",{src:y,onLoad:()=>S(!1),loading:"lazy",alt:"Preview",className:`max-h-[80vh] rounded transition duration-500 ${j?"blur-sm scale-105":""}`})]})]})})]})},K4=async({projectId:t,api:a})=>{const{data:l}=await a.get(`/materialconfirmation/${t}`);if(!l.ok)throw new Error(l.message);return l.data},V4=async({projectId:t,roomId:a,roomType:l,api:r})=>{const{data:o}=await r.get(`/materialconfirmation/${t}/predefinedroom/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},Y4=async({projectId:t,roomId:a,fieldKey:l,updates:r,api:o})=>{const{data:d}=await o.put(`/materialconfirmation/${t}/predefinedroom/${a}/field/${l}`,r);if(!d.ok)throw new Error(d.message);return d.data},W4=async({projectId:t,name:a,api:l})=>{const{data:r}=await l.post(`/materialconfirmation/${t}/customroom`,{name:a});if(!r.ok)throw new Error(r.message);return r.data},X4=async({projectId:t,roomId:a,api:l})=>{const{data:r}=await l.patch(`/materialconfirmation/${t}/${a}/deleteroom`);if(!r.ok)throw new Error(r.message);return r.data},Z4=async({projectId:t,roomId:a,item:l,api:r})=>{const{data:o}=await r.post(`/materialconfirmation/${t}/customroom/${a}/field`,l);if(!o.ok)throw new Error(o.message);return o.data},J4=async({projectId:t,roomId:a,fieldKey:l,api:r})=>{const{data:o}=await r.delete(`/materialconfirmation/${t}/customroom/${a}/field/${l}`);if(!o.ok)throw new Error(o.message);return o.data},eO=async({projectId:t,roomId:a,formData:l,api:r})=>{const{data:o}=await r.post(`/materialconfirmation/${t}/uploads/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},tO=async({projectId:t,roomId:a,fileId:l,api:r})=>{const{data:o}=await r.patch(`/materialconfirmation/${t}/deleteuploadedfile/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},sO=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/materialconfirmation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},aO=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/materialconfirmation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},nO=t=>{const a=["owner","staff","CTO","client","worker"],{role:l}=W(),r=Z(l);return Le({queryKey:["material-confirmation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not authorized");if(!r)throw new Error("API instance not available");return await K4({projectId:t,api:r})},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},lO=({projectId:t,roomId:a,roomType:l})=>{const r=["owner","staff","CTO","client","worker"],{role:o}=W(),d=Z(o);return Le({queryKey:["material-room",t,a],queryFn:async()=>{if(!o||!r.includes(o))throw new Error("Not authorized");if(!d)throw new Error("API instance unavailable");return await V4({projectId:t,roomId:a,roomType:l,api:d})},enabled:!!t&&!!a,retry:!1,refetchOnWindowFocus:!1})},rO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomId:d,fieldKey:m,updates:p})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await Y4({projectId:o,roomId:d,fieldKey:m,updates:p,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},iO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,name:d})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await W4({projectId:o,name:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},oO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomId:d})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await X4({projectId:o,roomId:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},cO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomId:d,item:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await Z4({projectId:o,roomId:d,item:m,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},dO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomId:d,fieldKey:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance not available");return await J4({projectId:o,roomId:d,fieldKey:m,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-confirmation",d]})}})},uO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomId:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await eO({projectId:o,roomId:d,formData:m,api:l})},onSuccess:(o,{projectId:d,roomId:m})=>{r.invalidateQueries({queryKey:["material-room",d,m]})}})},mO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomId:d,fileId:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await tO({projectId:o,roomId:d,fileId:m,api:l})},onSuccess:(o,{projectId:d,roomId:m})=>{r.invalidateQueries({queryKey:["material-room",d,m]})}})},fO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await sO({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["material-rooms"]})}})},hO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not authorized");if(!l)throw new Error("API instance missing");return await aO({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["material-rooms",d]})}})},xO=({room:t,projectId:a,roomType:l})=>{var x;const r=Fe(),{mutateAsync:o,isPending:d}=oO(),m=async h=>{var g,b;h.stopPropagation();try{if(!confirm("Are you sure you need to delete the room?"))return;await o({projectId:a,roomId:t._id}),F({title:"Success",description:"Room deleted successfully"})}catch(w){F({title:"Error",description:((b=(g=w==null?void 0:w.response)==null?void 0:g.data)==null?void 0:b.message)||"Failed to delete the room",variant:"destructive"})}},p=l==="customRoom"?t.items:t.roomFields;return e.jsxs("div",{onClick:()=>r(`materialroom/${t._id}/${l}`),className:"border-l-4 border-blue-600 cursor-pointer shadow-sm hover:shadow-md transition-all duration-200 rounded-lg p-4 bg-white flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"text-sm text-blue-500",children:["No of Fields: ",(x=Object.keys(p||{}))==null?void 0:x.length]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),r(`materialroom/${t._id}/${l}`)},className:"text-sm text-blue-600 underline hover:no-underline cursor-pointer",children:"View "}),e.jsxs(T,{variant:"danger",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1 px-2 py-1 text-sm hover:text-white",children:[e.jsx("i",{className:"fas fa-trash"})," Delete"]})]})]})},K0=A.memo(xO),pO=({onClose:t,projectId:a,refetch:l})=>{const[r,o]=A.useState(""),{mutateAsync:d,isPending:m}=iO(),p=async()=>{var x,h;if(!r.trim()){F({title:"Error",description:"Room name is required",variant:"destructive"});return}try{await d({projectId:a,name:r}),F({title:"Success",description:"Room created successfully "}),t(),l()}catch(g){F({title:"Error",description:((h=(x=g==null?void 0:g.response)==null?void 0:x.data)==null?void 0:h.message)||g.message||"Failed to create room",variant:"destructive"})}};return e.jsx("div",{onClick:t,className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{onClick:x=>x.stopPropagation(),className:"bg-white rounded-lg w-full max-w-sm p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs(fe,{htmlFor:"roomName",className:"text-sm text-gray-700",children:["Room Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(de,{id:"roomName",value:r,onChange:x=>o(x.target.value),placeholder:"e.g., Master Bedroom, Kitchen",className:"mt-1"})]}),e.jsx(T,{onClick:p,disabled:m,className:"w-full bg-blue-600 text-white hover:bg-blue-700 transition rounded-xl",children:"Create Room"})]})})};function gO(){var P,L,z,q,H,ue,U;const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He(),o=dt(),{data:d,isLoading:m,error:p,refetch:x}=nO(t),{mutateAsync:h,isPending:g}=fO(),{mutateAsync:b,isPending:w}=hO(),[k,y]=A.useState(!1);if(m)return e.jsx(jt,{});const C=!((P=d==null?void 0:d.customRooms)!=null&&P.length)&&!((L=d==null?void 0:d.rooms)!=null&&L.length),j=o.pathname.includes("/materialroom"),S=async()=>{var I,Y;try{await b({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(G){F({title:"Error",description:((Y=(I=G==null?void 0:G.response)==null?void 0:I.data)==null?void 0:Y.message)||G.message||"Failed to update completion status",variant:"destructive"})}},{rooms:v,customRooms:N}=d||{},M=((v==null?void 0:v.length)||0)+((N==null?void 0:N.length)||0);return e.jsx("div",{className:"flex flex-col h-full w-full  py-4",children:j?e.jsx(_t,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-box mr-2"})," Material Selection"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%]  flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsxs("div",{className:"flex flex-wrap  md:flex-nowrap gap-2 justify-end",children:[e.jsxs(T,{isLoading:w,onClick:S,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),!j&&e.jsx(T,{variant:"primary",onClick:()=>y(!0),className:"bg-blue-600 text-white flex-1 sm:flex-initial min-w-max",children:"+ Add Room"})]}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap gap-2 justify-end",children:[e.jsx(js,{projectId:t,stageNumber:5,stagePath:"materialconfirmation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"MaterialRoomConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),p&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-4",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=(z=p==null?void 0:p.response)==null?void 0:z.data)==null?void 0:q.message)||(p==null?void 0:p.message)||"Failed to load room data"}),e.jsx(T,{onClick:()=>x(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),e.jsx("div",{className:"flex-grow min-h-0 flex flex-col",children:!p&&e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(H=d==null?void 0:d.timer)==null?void 0:H.completedAt,stageName:"materialconfirmation",projectId:t,formId:d==null?void 0:d._id,deadLine:(ue=d==null?void 0:d.timer)==null?void 0:ue.deadLine,startedAt:(U=d==null?void 0:d.timer)==null?void 0:U.startedAt,refetchStageMutate:x,deadLineMutate:h,isPending:g})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold",children:["Total Rooms: ",M]})}),k&&e.jsx(By,{open:k,onOpenChange:y,children:e.jsx(pO,{refetch:x,onClose:()=>y(!1),projectId:t})}),e.jsx("div",{className:"flex-grow min-h-[100%] py-2 sm:!min-h-0  overflow-y-auto",children:C?e.jsx("div",{className:"h-full flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-door-open text-5xl sm:text-6xl text-blue-300 mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-700 mb-2",children:"No Rooms Added Yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add rooms to start selecting materials"}),e.jsxs("button",{onClick:()=>y(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Your First Room"]})]})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[v==null?void 0:v.map(I=>e.jsx(K0,{roomType:"predefinedRoom",room:I,projectId:t},I._id)),N==null?void 0:N.map(I=>e.jsx(K0,{roomType:"customRoom",room:I,projectId:t},I._id))]})})]})})]})})}const pn=()=>{const t=Array.from({length:11});return e.jsxs("div",{className:"w-full max-h-full overflow-hidden mx-auto mt-4 bg-white shadow rounded p-6",children:[e.jsx(Te,{className:"h-6 w-40 mb-2"}),e.jsx(Te,{className:"h-4 w-32 mb-6"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border border-gray-200 rounded-lg",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-100 text-left",children:["Item","Quantity","Unit","Remarks","Actions"].map((a,l)=>e.jsx("th",{className:"p-3",children:e.jsx(Te,{className:"h-4 w-20"})},l))})}),e.jsx("tbody",{children:t.map((a,l)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx(Te,{className:"h-4 w-32"})}),e.jsx("td",{className:"p-3",children:e.jsx(Te,{className:"h-4 w-12"})}),e.jsx("td",{className:"p-3",children:e.jsx(Te,{className:"h-4 w-10"})}),e.jsx("td",{className:"p-3",children:e.jsx(Te,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-3",children:e.jsx(Te,{className:"h-8 w-8 rounded-full"})})]},l))})]})})]})},V0={primary:"text-blue-400",danger:"text-red-400",success:"text-green-400",warning:"text-yellow-400",gray:"text-gray-400"},Y0={envelope:"fas fa-envelope",box:"fas fa-box-open",message:"fas fa-comment-dots",chat:"fas fa-comments",warning:"fas fa-exclamation-triangle"},Vy=({message:t,icon:a="box",customIconClass:l,color:r="gray"})=>{const d=`${a==="custom"?l||"fas fa-question-circle":Y0[a]||Y0.box} text-7xl mb-4 ${V0[r]||V0.gray}`;return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center py-12 px-4 text-center",children:[e.jsx("i",{className:d}),e.jsx("p",{className:"text-lg text-gray-600",children:t})]})},bO=({projectId:t,roomId:a,initialFiles:l,refetch:r})=>{const[o,d]=A.useState([]),[m,p]=A.useState(l.filter(N=>N.type==="pdf")),[x,h]=A.useState(l.filter(N=>N.type==="image")),[g,b]=A.useState(null),{mutateAsync:w,isPending:k}=uO(),{mutateAsync:y,isPending:C}=mO(),j=N=>{N.target.files&&d(Array.from(N.target.files))},S=async()=>{var M,P;if(o.length===0)return;const N=new FormData;o.forEach(L=>N.append("files",L));try{const L=await w({projectId:t,roomId:a,formData:N}),z=L.filter(H=>H.type==="pdf"),q=L.filter(H=>H.type==="image");p(H=>[...H,...z]),h(H=>[...H,...q]),d([]),F({title:"Success",description:"file uploaded successfully"}),r()}catch(L){F({title:"error",description:((P=(M=L==null?void 0:L.response)==null?void 0:M.data)==null?void 0:P.message)||"failed to upload file",variant:"destructive"})}},v=async(N,M)=>{var P,L;try{await y({projectId:t,roomId:a,fileId:N}),M==="pdf"?p(z=>z.filter(q=>q._id!==N)):h(z=>z.filter(q=>q._id!==N)),F({title:"Success",description:"deleted successfully"}),r()}catch(z){F({title:"error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6 ",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(de,{type:"file",multiple:!0,onChange:j,accept:"image/*,application/pdf"}),e.jsx(T,{onClick:S,isLoading:k,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{onClick:()=>v(N._id,"pdf"),size:"sm",isLoading:C,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[x.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),x.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>b(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{onClick:()=>v(N._id,"image"),size:"sm",isLoading:C,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>b(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>b(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function yO(){const{projectId:t,roomId:a,roomType:l}=Ce(),r=Fe();if(!t||!a)return null;const{data:o,isLoading:d,refetch:m}=lO({projectId:t,roomId:a,roomType:l}),[p,x]=A.useState(null),[h,g]=A.useState({quantity:0,unit:"",remarks:""}),[b,w]=A.useState({itemKey:"",quantity:0,unit:"",remarks:""}),[k,y]=A.useState(!1),{mutateAsync:C,isPending:j}=cO(),{mutateAsync:S,isPending:v}=rO(),{mutateAsync:N,isPending:M}=dO();if(d)return e.jsx(pn,{});if(!o)return e.jsx(Vy,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const P="items"in o,L=P?o.items.map(U=>[U.itemKey,U]):Object.entries(o.roomFields),z=(U,I)=>{x(U),g({quantity:I.quantity||0,unit:I.unit||"",remarks:I.remarks||""})},q=async()=>{var U,I;try{if(!b.itemKey.trim())throw new Error("Item field is mandatory");await C({projectId:t,roomId:a,item:b}),y(!1),F({description:"Field added successfully",title:"Success"}),m()}catch(Y){F({title:"Error",description:((I=(U=Y==null?void 0:Y.response)==null?void 0:U.data)==null?void 0:I.message)||Y.message||"Failed to add field",variant:"destructive"})}},H=async U=>{var I,Y;try{await S({projectId:t,roomId:a,fieldKey:U,updates:h}),x(null),F({description:"Field updated successfully",title:"Success"}),m()}catch(G){F({title:"Error",description:((Y=(I=G==null?void 0:G.response)==null?void 0:I.data)==null?void 0:Y.message)||G.message||"Failed to update field",variant:"destructive"})}},ue=async U=>{var I,Y;try{confirm("Are you sure you want to delete this field?")&&await N({projectId:t,roomId:a,fieldKey:U}),F({description:"Field deleted successfully",title:"Success"}),m()}catch(G){F({title:"Error",description:((Y=(I=G==null?void 0:G.response)==null?void 0:I.data)==null?void 0:Y.message)||G.message||"Failed to delete field",variant:"destructive"})}};return e.jsxs("div",{className:"flex flex-col h-full w-full overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:o.name}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Room Material Items"})]}),e.jsx(T,{variant:"primary",className:"h-10 text-sm sm:text-base",onClick:()=>r(-1),children:"Go Back"})]}),e.jsx("section",{className:"w-full min-h-[100%] flex flex-col",children:e.jsx("div",{className:"overflow-x-auto min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:"min-w-[700px] w-full flex flex-col border-2 border-gray-100 rounded-lg",children:[e.jsxs("div",{className:"rounded-md grid grid-cols-5 bg-gray-100 text-sm font-semibold text-gray-700 px-2 sm:px-4 py-3 sticky top-0 z-10",children:[e.jsx("div",{className:"truncate text-center",children:"Item"}),e.jsx("div",{className:"truncate text-center",children:"Quantity"}),e.jsx("div",{className:"truncate text-center",children:"Unit"}),e.jsx("div",{className:"truncate text-center",children:"Remarks"}),e.jsx("div",{className:"truncate text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex-grow min-h-0 overflow-y-auto custom-scrollbar",children:[L==null?void 0:L.map(([U,I])=>e.jsxs("div",{className:"grid text-center mx-auto grid-cols-5 items-center px-2 sm:px-4 py-3 text-sm hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate pr-2",children:U}),p===U?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(de,{type:"number",value:h.quantity,onChange:Y=>g({...h,quantity:+Y.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(de,{value:h.unit,onChange:Y=>g({...h,unit:Y.target.value}),className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(de,{value:h.remarks,onChange:Y=>g({...h,remarks:Y.target.value}),className:"w-full text-sm"})}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(T,{variant:"primary",isLoading:v,onClick:()=>H(U),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(T,{variant:"secondary",onClick:()=>x(null),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"truncate pr-2",children:I.quantity??"N/A"}),e.jsx("div",{className:"truncate pr-2",children:I.unit||"N/A"}),e.jsx("div",{className:"max-h-[70px] overflow-y-auto custom-scrollbar cursor-grab pr-2",children:I.remarks||"N/A"}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(T,{variant:"primary",onClick:()=>z(U,I),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-pencil "})}),P&&e.jsx(T,{variant:"danger",isLoading:M,onClick:()=>ue(U),className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]})]},U)),P&&e.jsx(e.Fragment,{children:k?e.jsxs("div",{className:"grid text-center grid-cols-5 items-center px-2 sm:px-4 py-3 border-b border-gray-100",children:[e.jsx("div",{children:e.jsx(de,{value:b.itemKey,onChange:U=>w({...b,itemKey:U.target.value}),placeholder:"Item",className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(de,{type:"number",value:b.quantity,onChange:U=>w({...b,quantity:+U.target.value}),placeholder:"Quantity",className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(de,{value:b.unit,onChange:U=>w({...b,unit:U.target.value}),placeholder:"Unit",className:"w-full text-sm"})}),e.jsx("div",{children:e.jsx(de,{value:b.remarks,onChange:U=>w({...b,remarks:U.target.value}),placeholder:"Remarks",className:"w-full text-sm"})}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 mx-auto",children:[e.jsx(T,{variant:"primary",isLoading:j,onClick:async()=>{await q(),w({itemKey:"",quantity:0,unit:"",remarks:""})},className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(T,{variant:"secondary",onClick:()=>{y(!1),w({itemKey:"",quantity:0,unit:"",remarks:""})},className:"text-xs sm:text-sm p-1 sm:p-2",children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsx("div",{className:`flex ${L.length?"justify-left":"justify-center"} p-4`,children:e.jsxs(T,{variant:"primary",onClick:()=>y(!0),children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Field"]})})}),P&&L.length===0&&!k&&e.jsx("div",{className:"text-center py-6 text-gray-500",children:"No items present. Add a new field."})]})]})})}),e.jsx("section",{className:"mt-4",children:e.jsx(bO,{projectId:t,roomId:a,initialFiles:o.uploads,refetch:m})})]})}const ar=["owner","staff","CTO"],wO=async(t,a)=>{const{data:l}=await a.get(`/costestimation/${t}`);if(!l.ok)throw new Error(l.message);return l.data},vO=async(t,a,l)=>{const{data:r}=await l.get(`/costestimation/${t}/room/${a}`);if(!r.ok)throw new Error(r.message);return r.data},jO=async(t,a)=>{const{data:l}=await a.get(`/costestimation/${t}/labour/getlabour`);if(console.log(l,"data form labour estiamtion"),!l.ok)throw new Error(l.message);return l.data},NO=async(t,a,l,r)=>{const{data:o}=await r.patch(`/costestimation/${t}/material/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},SO=async(t,a,l)=>{console.log("labordata",a);const{data:r}=await l.post(`/costestimation/${t}/labour`,a);if(!r.ok)throw new Error(r.message);return r.data},CO=async(t,a,l,r)=>{const{data:o}=await r.patch(`/costestimation/${t}/labour/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},kO=async(t,a,l)=>{const{data:r}=await l.delete(`/costestimation/${t}/labour/${a}`);if(!r.ok)throw new Error(r.message);return r.data},EO=async(t,a,l,r)=>{const{data:o}=await r.post(`/costestimation/${t}/uploads/${a}`,l);if(!o.ok)throw new Error(o.message);return o.data},AO=async(t,a,l,r)=>{console.log(l);const{data:o}=await r.patch(`/costestimation/${t}/deleteuploadedfile/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},OO=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/costestimation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},RO=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/costestimation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},TO=t=>{const a=["staff","CTO","owner"],{role:l}=W(),r=Z(l);return Le({queryKey:["cost-estimation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await wO(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},PO=(t,a)=>{const{role:l}=W(),r=Z(l);return Le({queryKey:["cost-estimation-room",t,a],queryFn:async()=>{if(!l||!ar.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await vO(t,a,r)},enabled:!!l&&!!t&&!!a&&!!r,retry:!1,refetchOnMount:!1})},MO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,materialKey:d,updates:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API not available");return await NO(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cost-estimation-room",d]})}})},FO=t=>{const a=["owner","staff","CTO"],{role:l}=W(),r=Z(l);return Le({queryKey:["labourEstimatation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await jO(t,r)},enabled:!!t,retry:!1,refetchOnMount:!1,staleTime:0})},LO=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,labourData:o})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await SO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["labourEstimatation",o]})}})},DO=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,labourId:o,updates:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await CO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation",o]})}})},_O=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,labourId:o})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await kO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation",o]})}})},qO=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomId:o,formData:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await EO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},zO=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomId:o,fileId:d})=>{if(!t||!ar.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await AO(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cost-estimation-room",o]})}})},UO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await OO({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["cost-estimation"]})}})},IO=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await RO({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cost-estimation",d]})}})},$O=({room:t,projectId:a,organizationId:l})=>{var o;const r=Fe();return e.jsxs("div",{onClick:()=>r(`/${l}/projectdetails/${a}/costestimation/roomdetails/${t._id}`),className:"cursor-pointer border-l-6 border-blue-600 shadow-md hover:border-blue-400 transition-all duration-200 rounded-lg p-5 bg-white hover:shadow-lg flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-sm text-blue-500",children:["No of Fields: ",((o=t.materials)==null?void 0:o.length)||0]})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium underline hover:no-underline",children:"View "})]})},BO=({data:t})=>{if(!t)return null;const{totalMaterialCost:a,totalLabourCost:l,totalEstimation:r}=t;return e.jsxs("section",{className:"mt-6 w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Cost Estimation Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-blue-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Material Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(a==null?void 0:a.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-green-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Labour Cost"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(l==null?void 0:l.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-purple-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Grand Total Estimation"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",(r==null?void 0:r.toLocaleString())||0]})]})]})]})},HO=A.memo(BO),QO=()=>{var S,v,N,M,P,L;const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He(),o=dt(),d=Fe(),{data:m,isLoading:p,isError:x,error:h,refetch:g}=TO(t),{mutateAsync:b,isPending:w}=UO(),{mutateAsync:k,isPending:y}=IO(),C=async()=>{var z,q;try{await k({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(H){F({title:"Error",description:((q=(z=H==null?void 0:H.response)==null?void 0:z.data)==null?void 0:q.message)||H.message||"Failed to update completion status",variant:"destructive"})}},j=o.pathname.includes("/roomdetails");return p?e.jsx(jt,{}):e.jsx("div",{className:"container mx-auto px-2 py-2 w-full  max-h-full overflow-y-auto custom-scrollbar",children:j?e.jsx(_t,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-money-bill-1-wave mr-2"})," Cost Estimation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap  gap-2 justify-end",children:e.jsxs(T,{isLoading:y,onClick:C,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap  gap-2 justify-end",children:[e.jsx(js,{projectId:t,stageNumber:6,stagePath:"costestimation",className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"CostEstimation",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),h&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((v=(S=h==null?void 0:h.response)==null?void 0:S.data)==null?void 0:v.message)||(h==null?void 0:h.message)||"Failed to load cost estimation data"}),e.jsx(T,{onClick:()=>g(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(N=m==null?void 0:m.timer)==null?void 0:N.completedAt,stageName:"costestimation",formId:m==null?void 0:m._id,projectId:t,deadLine:(M=m==null?void 0:m.timer)==null?void 0:M.deadLine,startedAt:(P=m==null?void 0:m.timer)==null?void 0:P.startedAt,refetchStageMutate:g,deadLineMutate:b,isPending:w})]}),e.jsxs("section",{className:"mb-6 ",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Material Cost Estimation"}),e.jsxs(T,{className:"bg-blue-600 text-white px-2 lg:px-4 py-2 w-full sm:w-auto",onClick:()=>d(`/${a}/projectdetails/${t}/costestimation/roomdetails/labour`),children:["Labour Cost Estimation ",e.jsx("i",{className:"ml-2 fa-solid fa-arrow-up-right-from-square"})]})]}),e.jsx("div",{className:"max-h-[100%] grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(L=m==null?void 0:m.materialEstimation)==null?void 0:L.map(z=>e.jsx($O,{room:z,projectId:t,organizationId:a},z.key))})]}),!p&&!x&&m&&e.jsx(HO,{data:m})]})]})})},GO=({projectId:t,roomId:a,initialFiles:l,refetch:r})=>{const[o,d]=A.useState([]),[m,p]=A.useState(l.filter(N=>N.type==="pdf")),[x,h]=A.useState(l.filter(N=>N.type==="image")),[g,b]=A.useState(null),{mutateAsync:w,isPending:k}=qO(),{mutateAsync:y,isPending:C}=zO(),j=N=>{N.target.files&&d(Array.from(N.target.files))},S=async()=>{var M,P;if(o.length===0)return;const N=new FormData;o.forEach(L=>N.append("files",L));try{const L=await w({projectId:t,roomId:a,formData:N}),z=L.filter(H=>H.type==="pdf"),q=L.filter(H=>H.type==="image");p(H=>[...H,...z]),h(H=>[...H,...q]),d([]),F({title:"Success",description:"file uploaded successfully"}),window.location.reload(),r()}catch(L){F({title:"error",description:((P=(M=L==null?void 0:L.response)==null?void 0:M.data)==null?void 0:P.message)||"failed to upload file",variant:"destructive"})}},v=async(N,M)=>{var P,L;try{await y({projectId:t,roomId:a,fileId:N}),M==="pdf"?p(z=>z.filter(q=>q._id!==N)):h(z=>z.filter(q=>q._id!==N)),F({title:"Success",description:"deleted successfully"}),r()}catch(z){F({title:"error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||"failed to upload file",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Uploads"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(de,{type:"file",multiple:!0,onChange:j,accept:"image/*,application/pdf"}),e.jsx(T,{onClick:S,isLoading:k,className:"bg-blue-600 text-white",children:"Upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:" PDF Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] h-[180px] rounded-lg shadow-lg p-2 overflow-y-auto custom-scrollbar-none",children:[m.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No PDFs uploaded."})}),m.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{onClick:()=>v(N._id,"pdf"),disabled:C,variant:"primary",size:"sm",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:" Image Files"}),e.jsxs("ul",{className:"space-y-2 max-h-[180px] min-h-[180px] shadow-lg rounded-lg p-2 overflow-y-auto custom-scrollbar",children:[x.length===0&&e.jsx("div",{className:"min-h-[180px] rounded-lg  flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No Images uploaded."})}),x.map(N=>e.jsxs("li",{className:"flex justify-between items-center bg-green-50 p-2 rounded-xl",children:[e.jsx("span",{className:"text-sm truncate",children:N.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>b(N==null?void 0:N.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:N==null?void 0:N.url,alt:(N==null?void 0:N.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",onClick:()=>v(N._id,"image"),disabled:C,variant:"primary",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},N._id))]})]})]}),g&&e.jsx("div",{onClick:()=>b(null),className:"fixed inset-0 bg-black/70 z-50 p-8 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:N=>N.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>b(null)}),e.jsx("img",{src:g,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})};function KO(){var C;const{projectId:t,roomId:a,organizationId:l}=Ce(),r=Fe();if(!t||!a)return null;const{data:o,isLoading:d,refetch:m}=PO(t,a),{mutateAsync:p,isPending:x}=MO(),[h,g]=A.useState(null),[b,w]=A.useState({areaSqFt:0,predefinedRate:0,overriddenRate:null});if(d)return e.jsx(pn,{});if(!o)return e.jsx(Vy,{message:"Room not found",color:"primary",customIconClass:"box",icon:"custom"});const k=(j,S)=>{g(j),w({areaSqFt:S.areaSqFt||0,predefinedRate:S.predefinedRate||0,overriddenRate:S.overriddenRate??null})},y=async j=>{var S,v;try{await p({projectId:t,materialKey:j,updates:b}),g(null),F({description:"Field updated successfully",title:"Success"})}catch(N){F({title:"Error",description:((v=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:v.message)||N.message||"Failed to update field",variant:"destructive"})}};return e.jsxs("div",{className:"max-w-full h-full overflow-y-scroll custom-scrollbar mx-auto mt-0 bg-white  rounded py-2 px-0",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.name}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Room Material Items"})]}),e.jsx(T,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),e.jsxs("section",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-2 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Material Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["",((C=o==null?void 0:o.totalCost)==null?void 0:C.toLocaleString())||"0"]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-6 bg-blue-50 text-sm font-semibold text-gray-600 px-6 py-1 sm:py-3 ",children:[e.jsx("div",{className:"text-left px-3 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Sq.Ft"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Predefined Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overridden Rate"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-1 sm:py-3  text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-gray-100 max-h-[70vh] overflow-y-auto custom-scrollbar bg-white",children:o.materials.map(j=>{var S,v,N;return e.jsxs("div",{className:`grid grid-cols-6 items-center px-6 py-4 text-sm ${h===j.key?"":"hover:bg-[#f7fbff]"}`,children:[e.jsx("div",{className:"font-medium text-gray-800",children:j.key}),h===j.key?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center",children:e.jsx(de,{className:"text-center",type:"number",value:b.areaSqFt,onChange:M=>w({...b,areaSqFt:+M.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(de,{className:"text-center",type:"number",value:b.predefinedRate,onChange:M=>w({...b,predefinedRate:+M.target.value})})}),e.jsx("div",{className:"text-center",children:e.jsx(de,{className:"text-center",type:"number",value:b.overriddenRate??"",onChange:M=>w({...b,overriddenRate:+M.target.value})})}),e.jsx("div",{className:"text-center text-gray-900 font-semibold",children:typeof b.areaSqFt=="number"&&(typeof b.predefinedRate=="number"||typeof b.overriddenRate=="number")?""+(b.areaSqFt*(b.overriddenRate&&b.overriddenRate>0?b.overriddenRate:b.predefinedRate??0)).toLocaleString("en-IN"):"N/A"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(T,{variant:"primary",isLoading:x,onClick:()=>y(j.key),children:[" ",e.jsx("i",{className:"fas fa-check"})," "]}),e.jsx(T,{variant:"secondary",onClick:()=>g(null),children:e.jsx("i",{className:"fas fa-xmark"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-center  text-gray-700",children:j.areaSqFt??"N/A"}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["",((S=j.predefinedRate)==null?void 0:S.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"font-medium text-center text-gray-700",children:["",((v=j.overriddenRate)==null?void 0:v.toLocaleString("en-IN"))??"N/A"]}),e.jsxs("div",{className:"text-center text-black font-semibold",children:["",((N=j.totalCost)==null?void 0:N.toLocaleString("en-IN"))??"N/A"]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(T,{variant:"primary",onClick:()=>k(j.key,j),children:""})})]})]},j.key)})})]})})]}),e.jsx("section",{className:"mt-4",children:e.jsx(GO,{projectId:t,roomId:a,initialFiles:o.uploads,refetch:m})})]})}const VO=({handleAdd:t,newData:a,setNewData:l,addPending:r,setShowForm:o})=>e.jsxs("div",{className:"space-y-3 bg-white px-6 py-3 sm:w-[40%] w-[80%] rounded-2xl",children:[e.jsx("h2",{className:"font-medium text-gray-700 text-center",children:"Add Labour"}),e.jsxs("div",{children:[e.jsx(fe,{children:"Work Type"}),e.jsx(de,{required:!0,placeholder:"Work Type",value:a.workType,onChange:d=>l({...a,workType:d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"No.Of People"}),e.jsx(de,{placeholder:"No of people",value:a.noOfPeople,onChange:d=>l({...a,noOfPeople:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"No of Days"}),e.jsx(de,{placeholder:"Days",type:"number",value:a.daysPlanned,onChange:d=>l({...a,daysPlanned:+d.target.value})})]}),e.jsxs("div",{children:[e.jsx(fe,{children:"Per Day Salary"}),e.jsx(de,{placeholder:"Per Day Salary",type:"number",value:a.perdaySalary,onChange:d=>l({...a,perdaySalary:+d.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{children:"Weekly Cost:"}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["",a.perdaySalary*a.noOfPeople*7||0]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{children:"Total Cost:"}),":",e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["",a.daysPlanned*a.perdaySalary*a.noOfPeople||0]})]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(T,{onClick:t,isLoading:r,children:"Add"}),e.jsx(T,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]}),YO=()=>{var G,re;const{projectId:t,organizationId:a}=Ce(),l=Fe(),[r,o]=A.useState(null),[d,m]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[p,x]=A.useState({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),[h,g]=A.useState(!1),[b,w]=A.useState(!1),{data:k,isLoading:y,isError:C,error:j,refetch:S}=FO(t),{mutateAsync:v,isPending:N}=_O(),{mutateAsync:M,isPending:P}=DO(),{mutateAsync:L,isPending:z}=LO(),q=A.useMemo(()=>k==null?void 0:k.reduce((_,X)=>_+(X==null?void 0:X.totalCost),0),[k]);if(y)return e.jsx(jt,{});if(C)return e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((re=(G=j==null?void 0:j.response)==null?void 0:G.data)==null?void 0:re.message)||(j==null?void 0:j.message)||"Failed to load , please try again"}),e.jsx(T,{isLoading:y,onClick:()=>S(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]});const H=_=>{o(_._id),m({workType:_.workType,noOfPeople:_.noOfPeople,daysPlanned:_.daysPlanned,perdaySalary:_.perdaySalary})},ue=()=>{o(null),m({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0})},U=async _=>{var X,ce;try{await v({projectId:t,labourId:_}),F({description:"Deleted successfully",title:"Success"}),S()}catch(te){F({title:"Error",description:((ce=(X=te==null?void 0:te.response)==null?void 0:X.data)==null?void 0:ce.message)||te.message||"Failed to update completion status",variant:"destructive"})}},I=async _=>{var X,ce;try{if(!d.workType)throw new Error("workType is mandatory");await M({projectId:t,labourId:_,updates:d}),F({description:"edited successfully",title:"Success"}),ue(),S()}catch(te){F({title:"Error",description:((ce=(X=te==null?void 0:te.response)==null?void 0:X.data)==null?void 0:ce.message)||te.message||"Failed to update completion status",variant:"destructive"})}},Y=async()=>{try{if(!p.workType)throw new Error("Please Enter the workType");await L({projectId:t,labourData:p}),x({workType:"",noOfPeople:0,daysPlanned:0,perdaySalary:0}),g(!1),w(!1),F({title:"Success",description:"Labour estimation added"}),S()}catch(_){F({title:"Error",description:_.message,variant:"destructive"})}};return e.jsxs("main",{className:"h-full w-full",children:[e.jsxs("div",{className:"w-full flex justify-between ",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-600 mb-5",children:"Labour Estimation"}),e.jsx(T,{variant:"primary",className:"h-10",onClick:()=>l(`/${a}/projectdetails/${t}/costestimation`),children:"Go Back"})]}),!(k!=null&&k.length)&&e.jsxs("div",{className:"w-full bg-white border border-gray-200 rounded-lg p-10 h-[60%] shadow-sm flex flex-col items-center justify-center text-center",children:[e.jsx("i",{className:"fa-solid fa-person-digging text-7xl text-gray-400 mb-6"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Labour Estimations"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Create your first labour estimation to start managing your workforce"}),e.jsxs(T,{onClick:()=>w(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 text-lg font-medium rounded",children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"})," Create Labour Estimation"]})]}),e.jsx("section",{children:b&&e.jsx("div",{className:"fixed bg-black/70 flex justify-center items-center h-full w-full z-50 top-0 left-0",children:e.jsx(VO,{handleAdd:Y,newData:p,setNewData:x,addPending:z,setShowForm:w})})}),(k==null?void 0:k.length)>0&&e.jsxs("div",{className:"bg-white rounded  overflow-hidden",children:[e.jsx("section",{children:e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Labour Cost:"}),e.jsxs("span",{className:"text-lg font-bold  text-blue-900",children:["",(q==null?void 0:q.toLocaleString())||e.jsx("span",{children:"0"})]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsx("div",{className:"min-w-[1000px]",children:e.jsxs("section",{className:"shadow-lg !rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-50 px-6 py-3 font-semibold text-gray-700 text-sm",children:[e.jsx("div",{className:"text-left px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Work Type"}),e.jsx("div",{className:"text-center px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No.Of People"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Planned"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Per Day Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Salary"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"}),e.jsx("div",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),e.jsxs("div",{className:"divide-y divide-gray-100 shadow-md  rounded-lg max-h-[65vh] overflow-y-auto bg-white",children:[k==null?void 0:k.map(_=>e.jsx("div",{className:`grid grid-cols-7 rounded-lg items-center gap-2 px-6 py-4 text-sm ${r===_._id?"":"hover:bg-[#f7fbff]"}`,children:r===_._id?e.jsxs(e.Fragment,{children:[e.jsx(de,{required:!0,value:d.workType,onChange:X=>m({...d,workType:X.target.value})}),e.jsx(de,{type:"number",value:d.noOfPeople,onChange:X=>m({...d,noOfPeople:+X.target.value})}),e.jsx(de,{type:"number",value:d.daysPlanned,onChange:X=>m({...d,daysPlanned:+X.target.value})}),e.jsx(de,{type:"number",value:d.perdaySalary,onChange:X=>m({...d,perdaySalary:+X.target.value})}),e.jsxs("div",{className:"text-gray-700",children:["",d.perdaySalary*7||0]}),e.jsxs("div",{className:"text-gray-700",children:["",d.daysPlanned*d.perdaySalary||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(T,{onClick:()=>I(_._id),isLoading:P,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(T,{variant:"ghost",onClick:()=>o(null),children:""})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-left   text-gray-700",children:_.workType||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:(_==null?void 0:_.noOfPeople)||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:_.daysPlanned||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`${_.perdaySalary}`||"N/A"}),e.jsx("div",{className:"font-medium text-center text-gray-700",children:`${_.weeklySalary}`||"N/A"}),e.jsxs("div",{className:"text-gray-800 font-medium text-center",children:["",_.totalCost||0]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(T,{onClick:()=>H(_),children:[" ",e.jsx("i",{className:"fas fa-pen"})]}),e.jsxs(T,{variant:"danger",className:"bg-red-500 text-white",isLoading:N,onClick:()=>U(_._id),children:[" ",e.jsx("i",{className:"fas fa-trash-can"})," "]})]})]})},_._id)),h&&e.jsxs("div",{className:"grid grid-cols-7 gap-2  px-6 py-4 text-sm  !bg-none",children:[e.jsx(de,{required:!0,placeholder:"Work Type",value:p.workType,onChange:_=>x({...p,workType:_.target.value})}),e.jsx(de,{placeholder:"No of people",value:p.noOfPeople,onChange:_=>x({...p,noOfPeople:+_.target.value})}),e.jsx(de,{placeholder:"Days",type:"number",value:p.daysPlanned,onChange:_=>x({...p,daysPlanned:+_.target.value})}),e.jsx(de,{placeholder:"Per Day Salary",type:"number",value:p.perdaySalary,onChange:_=>x({...p,perdaySalary:+_.target.value})}),e.jsxs("p",{className:"font-medium text-center  text-gray-700 leading-10 ",children:["",p.perdaySalary*p.noOfPeople*7||0]}),e.jsxs("div",{className:"font-medium text-center  text-gray-700 leading-10",children:["",p.daysPlanned*p.perdaySalary*p.noOfPeople||0]}),e.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[e.jsx(T,{onClick:Y,isLoading:z,children:"Add"}),e.jsx(T,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(T,{variant:"primary",onClick:()=>g(!0),children:"+ Add Labour Estimation"})})]})})})]})]})},nr=["owner","staff","CTO"],WO=async(t,a,l)=>{const{data:r}=await l.put(`/orderingmaterial/${t}/shop`,a);if(!r.ok)throw new Error(r.message);return r.data},XO=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,updates:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update shop details");if(!a)throw new Error("API instance not available");return await WO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["ordering-material",o]})}})},ZO=async(t,a,l)=>{const{data:r}=await l.put(`/orderingmaterial/${t}/delivery-location`,a);if(!r.ok)throw new Error(r.message);return r.data},JO=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,updates:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update delivery location");if(!a)throw new Error("API instance not available");return await ZO(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["ordering-material",o]})}})},e6=async(t,a,l,r,o)=>{const{data:d}=await o.put(`/orderingmaterial/${t}/room/${l}/${a}`,{items:r});if(!d.ok)throw new Error(d.message);return d.data},t6=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomKey:o,itemId:d,updates:m})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to update room materials");if(!a)throw new Error("API instance not available");return await e6(r,o,d,m,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["ordering-material",o,d]})}})},s6=async(t,a,l,r)=>{const{data:o}=await r.post(`/orderingmaterial/${t}/room/${a}/add`,l);if(!o.ok)throw new Error(o.message);return o.data},a6=()=>{const{role:t}=W(),a=Z(t);return le({mutationFn:async({projectId:l,roomKey:r,newItem:o})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to add item");if(!a)throw new Error("API instance not available");return await s6(l,r,o,a)},onSuccess:(l,{projectId:r,roomKey:o})=>{Ee.invalidateQueries({queryKey:["ordering-material",r,o]})}})},n6=async(t,a,l,r)=>{const{data:o}=await r.delete(`/orderingmaterial/${t}/room/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},l6=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomKey:o,itemId:d})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to delete item");if(!a)throw new Error("API instance not available");return await n6(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["ordering-material",o,d]})}})},r6=async(t,a)=>{const{data:l}=await a.get(`/orderingmaterial/${t}`);if(!l.ok)throw new Error(l.message);return l.data},i6=t=>{const a=["owner","staff","CTO","worker","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["ordering-material",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to fetch ordering material");if(!r)throw new Error("API not available");return await r6(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},o6=async(t,a,l)=>{const{data:r}=await l.get(`/orderingmaterial/${t}/room/${a}`);if(!r.ok)throw new Error(r.message);return r.data},c6=(t,a)=>{const l=["owner","staff","CTO","worker","client"],{role:r}=W(),o=Z(r);return Le({queryKey:["ordering-material",t,a],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("Not allowed to fetch room materials");if(!o)throw new Error("API not available");return await o6(t,a,o)},enabled:!!r&&!!t&&!!a&&!!o,retry:!1,refetchOnMount:!1})},d6=async(t,a)=>{const{data:l}=await a.post(`/orderingmaterial/${t}/generate-link`);if(!l.ok)throw new Error(l.message);return l.data},u6=async(t,a)=>{const{data:l}=await Ge.get(`https://houseofram.in/api/orderingmaterial/public/${t}/${a}`);if(console.log(l),!l.ok)throw new Error(l.message);return l.data},m6=()=>{const{role:t}=W(),a=Z(t);return le({mutationFn:async({projectId:l})=>{if(!t||!nr.includes(t))throw new Error("Not allowed to generate link");if(!a)throw new Error("API instance not found");return await d6(l,a)}})},f6=(t,a)=>Le({queryKey:["ordering-material-public",t,a],queryFn:async()=>await u6(t,a),enabled:!!t&&!!a,retry:!1,refetchOnMount:!1}),h6=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/orderingmaterial/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},x6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/orderingmaterial/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},p6=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await h6({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},g6=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await x6({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["ordering-material",d]})}})},Yy=({projectId:t,context:a,label:l,generateLink:r,isPending:o,data:d})=>{const[m,p]=A.useState(""),[x,h]=A.useState(!1);A.useEffect(()=>{typeof d=="string"&&p(d)},[d]);const g=async()=>{try{await navigator.clipboard.writeText(m),h(!0),setTimeout(()=>h(!1),1500)}catch{F({title:"Error",description:"Failed to copy link",variant:"destructive"})}},b=()=>{const k=encodeURIComponent(`Hey, please check this ${a} link:\`${m}`);window.open(`https://wa.me/?text=${k}`,"_blank")},w=async()=>{var k,y;try{const C=await r({projectId:t});C!=null&&C.shareableUrl&&(p(C.shareableUrl),F({title:"Link generated",description:"You can now share the link",variant:"default"}))}catch(C){F({title:"Error",description:((y=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:y.message)||(C==null?void 0:C.message)||"Failed to generate link",variant:"destructive"})}};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 shadow-sm w-full max-w-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-link"})," ",l||"Generate Shareable Link"]})}),m?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[e.jsx(de,{readOnly:!0,value:m,className:"flex-1 text-sm cursor-default"}),e.jsxs(T,{onClick:g,variant:"outline",className:"flex gap-2",children:[e.jsx("i",{className:`fas ${x?"fa-check-circle":"fa-copy"}`}),x?"Copied":"Copy"]}),e.jsxs(T,{onClick:b,className:"bg-green-500 hover:bg-green-600 text-white flex gap-2",children:[e.jsx("i",{className:"fab fa-whatsapp"}),"Share"]})]}):e.jsx(T,{onClick:w,disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:o?"Generating...":"Generate Link"})]})},b6=()=>{var te,O,$,D,V;const{projectId:t,organizationId:a}=Ce(),l=Fe(),{isMobile:r,openMobileSidebar:o}=He(),d=location.pathname.includes("/ordermaterialroom"),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,b]=A.useState({}),[w,k]=A.useState({}),{data:y,isLoading:C,isError:j,error:S,refetch:v}=i6(t),{mutateAsync:N,isPending:M}=m6(),{mutateAsync:P}=XO(),{mutateAsync:L}=JO(),{mutateAsync:z,isPending:q}=p6(),{mutateAsync:H,isPending:ue}=g6(),U=async()=>{var J,ge;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await P({projectId:t,updates:g}),F({title:"Success",description:"Shop Details Updated"}),p(!1),v()}catch(ae){F({variant:"destructive",title:"Error",description:((ge=(J=ae==null?void 0:ae.response)==null?void 0:J.data)==null?void 0:ge.message)||(ae==null?void 0:ae.message)||"Update failed"})}},I=async()=>{var J,ge;try{if(w.phoneNumber&&!/^\d{10}$/.test(w.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await L({projectId:t,updates:w}),h(!1),F({title:"Success",description:"Delivery Details Updated"}),v()}catch(ae){F({variant:"destructive",title:"Error",description:((ge=(J=ae==null?void 0:ae.response)==null?void 0:J.data)==null?void 0:ge.message)||(ae==null?void 0:ae.message)||"Update failed"})}},Y=async()=>{var J,ge;try{await H({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(ae){F({title:"Error",description:((ge=(J=ae==null?void 0:ae.response)==null?void 0:J.data)==null?void 0:ge.message)||ae.message||"Failed to update completion status",variant:"destructive"})}};if(C)return e.jsx(jt,{});const G=Object.keys((y==null?void 0:y.materialOrderingList)||{}),{shopDetails:re,deliveryLocationDetails:_,generatedLink:X,materialOrderingList:ce}=y||{};return e.jsx("div",{className:"w-full h-full flex flex-col",children:d?e.jsx(_t,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-cart-shopping mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ordering Material"}),e.jsx("span",{className:"sm:hidden",children:"Order Material"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(T,{isLoading:ue,onClick:Y,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(js,{projectId:t,stageNumber:8,stagePath:"orderingmaterial"}),e.jsx(rs,{stageName:"OrderingMaterialModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null})]})]}),j&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((O=(te=S==null?void 0:S.response)==null?void 0:te.data)==null?void 0:O.message)||"Failed to load ordering material"}),e.jsx(T,{isLoading:C,onClick:()=>v(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!j&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(De,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:($=y==null?void 0:y.timer)==null?void 0:$.completedAt,stageName:"orderingmaterial",formId:y==null?void 0:y._id,projectId:t,deadLine:(D=y==null?void 0:y.timer)==null?void 0:D.deadLine,startedAt:(V=y==null?void 0:y.timer)==null?void 0:V.startedAt,refetchStageMutate:v,deadLineMutate:z,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Shop Name",value:g.shopName||"",onChange:J=>b({...g,shopName:J.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:J=>b({...g,contactPerson:J.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",value:g.phoneNumber||"",type:"tel",maxLength:10,onChange:J=>b({...g,phoneNumber:J.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:g.address||"",onChange:J=>b({...g,address:J.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(T,{onClick:U,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(T,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(re==null?void 0:re.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(re==null?void 0:re.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(re==null?void 0:re.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(re==null?void 0:re.address)||"-"]}),(y==null?void 0:y.status)!=="completed"&&e.jsxs("button",{onClick:()=>{b(re),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600 rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),x?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Site Name",value:w.siteName||"",onChange:J=>k({...w,siteName:J.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Site Supervisor",value:w.siteSupervisor||"",onChange:J=>k({...w,siteSupervisor:J.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",type:"tel",maxLength:10,value:w.phoneNumber||"",onChange:J=>k({...w,phoneNumber:J.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:w.address||"",onChange:J=>k({...w,address:J.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(T,{onClick:I,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(T,{variant:"outline",onClick:()=>h(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",(_==null?void 0:_.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",(_==null?void 0:_.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(_==null?void 0:_.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(_==null?void 0:_.address)||"-"]}),(y==null?void 0:y.status)!=="completed"&&e.jsxs("button",{onClick:()=>{k(_),h(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(J=>{const ge=ce[J]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white transform hover:scale-[1.02]",onClick:()=>l(`ordermaterialroom/${J}`),children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold capitalize text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-door-open"}),J.replace(/([A-Z])/g," $1")]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:[e.jsx("i",{className:"fa-solid fa-box mr-1"}),"Items: ",ge.length]}),e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-mouse-pointer"}),"Click to view details"]})]},J)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Yy,{projectId:t,context:"order material",stage:"ordermaterial",data:X,isPending:M,generateLink:N})})]})]})})},y6=async({category:t})=>{const{data:a}=await Ge.get(`/api/ai/brands/${t}`);return a.data},w6=t=>{const l=["electricalFittings","ceramicSanitaryware","upholsteryCurtains","falseCeilingMaterials"].includes(t);return Le({queryKey:["brands",t],queryFn:()=>y6({category:t}),enabled:!!t&&!l})},v6=()=>{var Y,G,re,_,X;const{projectId:t,roomKey:a,organizationId:l}=Ce(),r=Fe();if(!a)return;const[o,d]=A.useState({}),[m,p]=A.useState(!1),[x,h]=A.useState(null),[g,b]=A.useState({}),{data:w,isLoading:k,isError:y,refetch:C,error:j}=c6(t,a),{mutateAsync:S,isPending:v}=a6(),{mutateAsync:N,isPending:M}=t6(),{mutateAsync:P,isPending:L}=l6(),{data:z}=w6(a);if(k)return e.jsx(pn,{});if(y)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((G=(Y=j==null?void 0:j.response)==null?void 0:Y.data)==null?void 0:G.message)||"Failed to load data"}),e.jsx(T,{onClick:()=>C(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const q=w||[],H=(ce,te)=>{b(O=>({...O,[ce]:te}))},ue=async ce=>{try{const te=ya[a];if(!te||te.length===0)throw new Error("Invalid room type or no fields defined.");const O=te[0],$=g[O];if(!$||$.toString().trim()==="")throw new Error(`The field "${O}" is required.`);if(Object.values(g).every(J=>!J||J.toString().trim()===""))throw new Error("At least one field must be filled.");await N({itemId:ce,projectId:t,roomKey:a,updates:[g]}),F({title:"Success",description:"Item updated."}),h(null),b({}),p(!1),C()}catch(te){F({title:"Error",description:(te==null?void 0:te.message)||"Failed",variant:"destructive"})}},U=async()=>{var ce,te;try{const O=ya[a];if(!O||O.length===0)throw new Error("Invalid room type or no fields defined.");const $=O[0],D=o[$];if(!D||D.toString().trim()==="")throw new Error(`The field "${$}" is required.`);if(Object.values(o).every(ae=>!ae||ae.toString().trim()===""))throw new Error("At least one field must be filled.");if(q==null?void 0:q.some(ae=>{var Se;return((Se=ae[$])==null?void 0:Se.toString().trim().toLowerCase())===D.toString().trim().toLowerCase()}))throw new Error(`"${D}" already exists. Please use a unique value.`);await S({projectId:t,roomKey:a,newItem:o}),F({title:"Success",description:"Item added."}),d({}),p(!1),C()}catch(O){F({title:"Error",description:((te=(ce=O==null?void 0:O.response)==null?void 0:ce.data)==null?void 0:te.message)||(O==null?void 0:O.message)||"Failed",variant:"destructive"})}},I=async ce=>{var te,O;try{await P({projectId:t,roomKey:a,itemId:ce}),F({title:"Deleted",description:"Item removed"}),C()}catch($){F({title:"Error",description:((O=(te=$==null?void 0:$.response)==null?void 0:te.data)==null?void 0:O.message)||($==null?void 0:$.message)||"Failed to delete",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-800 capitalize ",children:a}),e.jsxs("div",{className:" px-6 flex gap-2",children:[e.jsx(T,{onClick:()=>p(()=>!0),children:"Add Item"}),e.jsx(T,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/ordermaterial`),children:"Go Back"})]})]}),e.jsx("div",{className:"w-full !min-h-[85vh] rounded-lg ",children:e.jsx("div",{className:"overflow-x-auto custom-scrollbar min-w-full flex-grow min-h-0",children:e.jsxs("div",{className:" w-full flex flex-col border-2 border-gray-100 rounded-lg",style:{minWidth:`${(((re=ya[a])==null?void 0:re.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid items-center px-6 py-3 bg-blue-100 text-blue-800 text-sm font-semibold",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(_=ya[a])==null?void 0:_.map((ce,te)=>e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:ce},te)),e.jsx("div",{className:"text-center text-xs font-medium uppercase tracking-wider",children:"Actions"})]}),e.jsx("div",{className:"text-sm text-blue-900 divide-y  !h-[75vh] overflow-y-auto divide-blue-100",children:!m&&q.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center text-gray-500 bg-gray-50",children:[e.jsx("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-700",children:["No ",a.replace(/([A-Z])/g," $1")," Items"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Add your first ",a.replace(/([A-Z])/g," $1").toLowerCase()," item to start tracking"]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded font-medium",children:["Add ",a.replace(/([A-Z])/g," $1")," Item"]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[q==null?void 0:q.map((ce,te)=>e.jsxs("div",{className:"grid border text-center px-6 py-3 gap-2 border-b border-gray-200 hover:bg-gray-50 transition-colors",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[ya[a].map((O,$)=>{const D=O==="brandName"&&jm.brandName[a],V=O==="fabric"&&a==="upholsteryCurtains";return e.jsx("div",{className:"text-center px-6 py-3 gap-4 hover:bg-gray-50 transition-colors text-sm min-w-[120px]",children:x===te?D||V?e.jsxs(Je,{value:g[O]||"",onValueChange:J=>H(O,J),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:g[O],placeholder:`Select ${O==="brandName"?"brand":"fabric"}`})}),e.jsx(Ze,{children:z==null?void 0:z.map(J=>e.jsx(ye,{value:J,children:J},J))})]}):e.jsx(de,{className:"text-xs",value:g[O]||"",onChange:J=>H(O,J.target.value)}):ce[O]||"-"},$)}),e.jsx("div",{className:"flex justify-center gap-2 items-center",children:x===te?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"sm",isLoading:M,onClick:()=>ue(ce._id),children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>h(null),children:e.jsx("i",{className:"fas fa-xmark text-red-600"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"primary",children:e.jsx("i",{className:"fas fa-pen",onClick:()=>{b(ce),h(te)}})}),e.jsx(T,{isLoading:L,variant:"ghost",children:e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>I(ce._id)})})]})})]},ce._id)),m&&e.jsxs("div",{className:"grid items-center px-6 py-3 gap-2 bg-white mt-2",style:{gridTemplateColumns:`repeat(${ya[a].length+1}, minmax(120px, 1fr))`},children:[(X=ya[a])==null?void 0:X.map((ce,te)=>{const O=ce==="brandName"&&jm.brandName[a];if(O||ce==="fabric"&&a==="upholsteryCurtains"){const D=O?_2[a]:jm.fabric[a];return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsxs(Je,{onValueChange:V=>d(J=>({...J,[ce]:V})),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:o[ce],placeholder:`Select ${ce==="brandName"?"brand":"fabric"}`})}),e.jsx(Ze,{children:D.map(V=>e.jsx(ye,{value:V,children:V},V))})]})},te)}return e.jsx("div",{className:"text-center min-w-[120px]",children:e.jsx(de,{className:"text-xs text-center",placeholder:ce,value:o[ce]||"",onChange:D=>d(V=>({...V,[ce]:D.target.value}))})},te)}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(T,{isLoading:v,onClick:U,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(T,{onClick:()=>p(()=>!1),children:e.jsx("i",{className:"fas fa-xmark"})})]})]})]})})})]})})})]})},Ai=["owner","staff","CTO"],j6=async(t,a,l)=>(await l.put(`/materialarrivalcheck/${t}/shop`,a)).data,N6=async(t,a,l)=>(await l.put(`/materialarrivalcheck/${t}/delivery-location`,a)).data,S6=async(t,a,l,r)=>(await r.put(`/materialarrivalcheck/${t}/room/${a}`,l)).data,C6=async(t,a,l,r)=>(await r.delete(`/materialarrivalcheck/${t}/room/${a}/${l}`)).data,k6=async(t,a)=>(await a.get(`/materialarrivalcheck/${t}`)).data.data,E6=async(t,a,l)=>{const r=await l.get(`/materialarrivalcheck/${t}/room/${a}`);return console.log("data form the get mateiralarrival room details",r.data.data),r.data.data},A6=async(t,a)=>(await a.post(`/materialarrivalcheck/${t}/generate-link`)).data.data,O6=async(t,a)=>(await Ge.get(`https://houseofram.in/api/materialarrivalcheck/public/${t}/${a}`)).data.data,R6=t=>{const a=["owner","staff","CTO","worker","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["material-arrival",t],queryFn:()=>k6(t,r),enabled:!!t&&!!l&&a.includes(l),retry:!1,refetchOnMount:!1})},T6=(t,a)=>{const l=["owner","staff","CTO","worker","client"],{role:r}=W(),o=Z(r);return Le({queryKey:["material-arrival-room",t,a],queryFn:()=>E6(t,a,o),enabled:!!t&&!!a&&!!r&&l.includes(r),retry:!1,refetchOnMount:!1})},P6=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await j6(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["material-arrival",o]})}})},M6=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,updates:o})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await N6(r,o,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["material-arrival",o]})}})},Wy=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomKey:o,formData:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await S6(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},Xy=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomKey:o,itemId:d})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await C6(r,o,d,a)},onSuccess:(r,{projectId:o,roomKey:d})=>{l.invalidateQueries({queryKey:["material-arrival-room",o,d]})}})},F6=()=>{const{role:t}=W(),a=Z(t);return le({mutationFn:async({projectId:l})=>{if(!t||!Ai.includes(t))throw new Error("Unauthorized");return await A6(l,a)}})},L6=(t,a)=>Le({queryKey:["material-arrival-public",t,a],queryFn:async()=>await O6(t,a),enabled:!!t&&!!a}),D6=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/materialarrivalcheck/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},_6=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/materialarrivalcheck/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},q6=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await D6({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["ordering-material",d.formId]})}})},z6=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await _6({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["ordering-material",d]})}})},U6=()=>{var O,$;const{projectId:t,organizationId:a}=Ce(),l=Fe(),{isMobile:r,openMobileSidebar:o}=He(),d=location.pathname.includes("/materialarrivalroom/"),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,b]=A.useState({}),[w,k]=A.useState({}),{data:y,isLoading:C,isError:j,error:S,refetch:v}=R6(t),{mutateAsync:N}=P6(),{mutateAsync:M}=M6(),{mutateAsync:P,isPending:L}=F6(),{mutateAsync:z,isPending:q}=q6(),{mutateAsync:H,isPending:ue}=z6();if(C)return e.jsx(jt,{});const{shopDetails:U,deliveryLocationDetails:I,materialArrivalList:Y,timer:G,generatedLink:re}=y||{},_=Object.keys(Y||{}),X=async()=>{var D,V;try{if(g.phoneNumber&&!/^\d{10}$/.test(g.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await N({projectId:t,updates:g}),F({title:"Success",description:"Shop details updated"}),p(!1),v()}catch(J){F({variant:"destructive",title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||(J==null?void 0:J.message)||"Update failed"})}},ce=async()=>{var D,V;try{if(w.phoneNumber&&!/^\d{10}$/.test(w.phoneNumber.trim()))throw new Error("Phone number should contain exactly 10 digit numbers");await M({projectId:t,updates:w}),F({title:"Success",description:"Delivery location updated"}),h(!1),v()}catch(J){F({variant:"destructive",title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||(J==null?void 0:J.message)||"Update failed"})}},te=async()=>{var D,V;try{await H({projectId:t}),F({description:"Completion status updated successfully",title:"Success"})}catch(J){F({title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||(J==null?void 0:J.message)||"Failed to update completion status",variant:"destructive"})}};return e.jsx("div",{className:"w-full h-full flex flex-col p-2 ",children:d?e.jsx(_t,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 pb-3 ",children:[e.jsxs("h2",{className:"text-2xl sm:text-2xl lg:text-2xl xl:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-receipt mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Material Checking"}),e.jsx("span",{className:"sm:hidden",children:"Material Check"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(T,{isLoading:ue,onClick:te,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto whitespace-nowrap",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(js,{projectId:t,stageNumber:9,stagePath:"materialarrival"}),e.jsx(rs,{stageName:"MaterialArrivalModel",projectId:t,organizationId:a,currentAssignedStaff:(y==null?void 0:y.assignedTo)||null})]})]}),j&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-xl p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:(($=(O=S==null?void 0:S.response)==null?void 0:O.data)==null?void 0:$.message)||"Failed to load material arrival data"}),e.jsx(T,{onClick:()=>v(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]})}),!j&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 sm:space-y-6",children:[e.jsxs(De,{className:"p-4 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"materialarrivalcheck",completedAt:G==null?void 0:G.completedAt,projectId:t,formId:y==null?void 0:y._id,deadLine:G==null?void 0:G.deadLine,startedAt:G==null?void 0:G.startedAt,refetchStageMutate:v,deadLineMutate:z,isPending:q})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-store"}),"Shop Details"]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Shop Name",value:g.shopName||"",onChange:D=>b({...g,shopName:D.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Contact Person",value:g.contactPerson||"",onChange:D=>b({...g,contactPerson:D.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",type:"tel",maxLength:10,value:g.phoneNumber||"",onChange:D=>b({...g,phoneNumber:D.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:g.address||"",onChange:D=>b({...g,address:D.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(T,{onClick:X,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(T,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",(U==null?void 0:U.shopName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact Person:"})," ",(U==null?void 0:U.contactPerson)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(U==null?void 0:U.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(U==null?void 0:U.address)||"-"]}),(y==null?void 0:y.status)!=="completed"&&e.jsxs("button",{onClick:()=>{b(U),p(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-600  rounded-lg p-4 shadow-sm relative bg-white",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold mb-3 text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-truck"}),"Delivery Location"]}),x?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{placeholder:"Site Name",value:w.siteName||"",onChange:D=>k({...w,siteName:D.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Site Supervisor",value:w.siteSupervisor||"",onChange:D=>k({...w,siteSupervisor:D.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Phone Number",type:"tel",maxLength:10,value:w.phoneNumber||"",onChange:D=>k({...w,phoneNumber:D.target.value}),className:"w-full"}),e.jsx(de,{placeholder:"Address",value:w.address||"",onChange:D=>k({...w,address:D.target.value}),className:"w-full"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs(T,{onClick:ce,className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-save mr-2"}),"Save"]}),e.jsxs(T,{variant:"outline",onClick:()=>h(!1),className:"w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-times mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Site Name:"})," ",(I==null?void 0:I.siteName)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisor:"})," ",(I==null?void 0:I.siteSupervisor)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",(I==null?void 0:I.phoneNumber)||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(I==null?void 0:I.address)||"-"]}),(y==null?void 0:y.status)!=="completed"&&e.jsxs("button",{onClick:()=>{k(I),h(!0)},className:"absolute top-3 right-4 text-blue-600 text-xs sm:text-sm underline hover:text-blue-800",children:[e.jsx("i",{className:"fa-solid fa-edit mr-1"}),"Edit"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(D=>{const V=Y[D]||[];return e.jsxs("div",{className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",onClick:()=>l(`materialarrivalroom/${D}`),children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:D.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Items: ",V.length]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},D)})}),e.jsx("section",{className:"mt-4",children:e.jsx(Yy,{projectId:t,context:"Material",stage:"materialarrival",data:re,isPending:L,generateLink:P})})]})]})})},I6=()=>{var G,re,_,X,ce,te,O;const{projectId:t,roomKey:a,organizationId:l}=Ce(),r=Fe(),[o,d]=A.useState(null),[m,p]=A.useState(null),[x,h]=A.useState(null),[g,b]=A.useState({}),[w,k]=A.useState({}),[y,C]=A.useState(!1),[j,S]=A.useState(null),{data:v,isLoading:N,isError:M,error:P,refetch:L}=T6(t,a),{mutateAsync:z}=Wy(),{mutateAsync:q}=Xy();if(!a)return;if(N)return e.jsx(pn,{});if(M)return e.jsxs("div",{className:"max-w-xl mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((re=(G=P==null?void 0:P.response)==null?void 0:G.data)==null?void 0:re.message)||"Failed to load data"}),e.jsx(T,{onClick:()=>L(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const H=v||[],ue=($,D)=>{b(V=>({...V,[$]:D}))},U=async()=>{var $,D;try{const V=Zs[a];if(!V||V.length===0)throw new Error("No required fields defined for this section.");const J=V[0],ge=g[J];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${J}" is required.`);if(V.every(be=>{const Ve=g[be];return!Ve||Ve.toString().trim()===""}))throw new Error("At least one field must be filled.");const Se=new FormData;Se.append("itemData",JSON.stringify(g)),m&&Se.append("upload",m),await z({projectId:t,roomKey:a,formData:Se}),F({title:"Success",description:"Item updated successfully"}),h(null),b({}),p(null),L()}catch(V){F({title:"Error",description:((D=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:D.message)||V.message||"Failed to update",variant:"destructive"})}},I=async()=>{var $,D;try{const V=Zs[a];if(!V||V.length===0)throw new Error("No required fields defined for this section.");const J=V[0],ge=w[J];if(!ge||ge.toString().trim()==="")throw new Error(`The field "${J}" is required.`);if(V.every(be=>{const Ve=w[be];return!Ve||Ve.toString().trim()===""}))throw new Error("At least one field must be filled.");const Se=new FormData;Se.append("itemData",JSON.stringify(w)),o&&Se.append("upload",o),await z({projectId:t,roomKey:a,formData:Se}),F({title:"Success",description:"Item added successfully"}),C(!1),k({}),L(),d(null)}catch(V){F({title:"Error",description:((D=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:D.message)||V.message||"Failed to add item",variant:"destructive"})}},Y=async $=>{try{await q({projectId:t,roomKey:a,itemId:$}),F({title:"Deleted",description:"Item removed"}),L()}catch(D){F({title:"Error",description:(D==null?void 0:D.message)||"Failed",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-blue-800 capitalize",children:[e.jsx("span",{className:"text-black font-semibold",children:"Section:"})," ",a]}),e.jsx(T,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${t}/materialarrival`),children:"Go Back"})]}),e.jsx("div",{className:"w-full overflow-x-auto roundex-lg mt-2 custom-scrollbar",children:e.jsxs("div",{style:{minWidth:`${(((_=Zs[a])==null?void 0:_.length)+1)*190}px`},children:[e.jsxs("div",{className:"grid gap-2 bg-blue-100 text-blue-800 text-xs font-semibold uppercase px-4 py-2",style:{gridTemplateColumns:`repeat(${((X=Zs[a])==null?void 0:X.length)+1}, minmax(120px, 1fr))`},children:[(ce=Zs[a])==null?void 0:ce.map(($,D)=>e.jsx("div",{className:"text-center",children:$==="verifiedByAccountant"?"Verified":$},D)),e.jsx("div",{className:"text-center",children:"Actions"})]}),H==null?void 0:H.map(($,D)=>{var V,J;return e.jsxs("div",{className:"grid gap-2 px-4 py-2 items-center hover:bg-gray-50",style:{gridTemplateColumns:`repeat(${((V=Zs[a])==null?void 0:V.length)+1}, minmax(120px, 1fr))`},children:[(J=Zs[a])==null?void 0:J.map((ge,ae)=>{var Se;return ge==="image"?e.jsx("div",{className:"flex justify-center items-center",children:x===D?e.jsx(de,{type:"file",accept:"image/*",onChange:be=>{var Ve;return p(((Ve=be.target.files)==null?void 0:Ve[0])||null)},className:"text-xs"}):(Se=$==null?void 0:$.upload)!=null&&Se.url?e.jsx("div",{className:"w-10 h-10 cursor-pointer",onClick:()=>S($.upload.url),children:e.jsx("img",{src:$.upload.url,alt:"Preview",className:"w-full h-full object-cover rounded border shadow"})}):e.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})},ae):ge==="verifiedByAccountant"?e.jsx("div",{className:"text-center",children:x===D?e.jsx("input",{type:"checkbox",checked:!!g[ge],onChange:be=>b(Ve=>({...Ve,[ge]:be.target.checked}))}):$[ge]?e.jsx("i",{className:"fas fa-check text-blue-600 text-lg"}):e.jsx("i",{className:"fas fa-times text-red-500 text-lg"})},ae):ge==="remarks"?x===D?e.jsx(vs,{value:g[ge]||"",className:"text-sm",onChange:be=>b(Ve=>({...Ve,remarks:be.target.value}))},ge):e.jsx("div",{className:"text-sm text-center px-2 overflow-x-auto max-w-[150px] custom-scrollbar whitespace-nowrap",children:$[ge]}):e.jsx("div",{className:"text-sm text-center px-2 max-w-[140px] overflow-auto whitespace-nowrap",children:x===D?e.jsx(de,{className:"text-xs w-full",value:g[ge]||"",onChange:be=>ue(ge,be.target.value)}):$[ge]||"-"},ae)}),e.jsx("div",{className:"flex justify-center gap-2 text-lg",children:x===D?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"sm",onClick:U,children:"Save"}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>h(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-pen text-blue-600 cursor-pointer",onClick:()=>{b($),h(D)}}),e.jsx("i",{className:"fas fa-trash text-red-500 cursor-pointer",onClick:()=>Y($._id)})]})})]},$._id)}),y&&e.jsxs("div",{className:"grid gap-2 px-4 py-2  bg-blue-50 items-center",style:{gridTemplateColumns:`repeat(${((te=Zs[a])==null?void 0:te.length)+1}, minmax(120px, 1fr))`},children:[(O=Zs[a])==null?void 0:O.map(($,D)=>$==="image"?e.jsx("input",{type:"file",accept:"image/*",className:"text-xs w-full",onChange:V=>{var J;return d(((J=V.target.files)==null?void 0:J[0])||null)}},D):$==="verified"?e.jsx("input",{type:"checkbox",checked:!!w[$],onChange:V=>k(J=>({...J,[$]:V.target.checked}))},D):e.jsx(de,{className:"text-xs text-center w-full",placeholder:$,value:w[$]||"",onChange:V=>k(J=>({...J,[$]:V.target.value}))},D)),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(T,{size:"sm",onClick:I,children:"Add"}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>C(!1),children:"Cancel"})]})]}),!y&&e.jsx("div",{className:"py-4 px-4",children:e.jsx(T,{onClick:()=>C(!0),children:"Add Item"})})]})}),j&&e.jsx("div",{onClick:()=>S(null),className:"fixed inset-0 bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:$=>$.stopPropagation,className:"relative bg-white rounded p-4 sm:p-8 shadow-lg max-w-[90vw] max-h-[80vh]",children:[e.jsx("i",{className:"fas fa-times absolute top-[0px] right-1 sm:top-2 sm:right-3 text-xl sm:text-2xl cursor-pointer text-gray-700 hover:text-red-500",onClick:()=>S(null)}),e.jsx("img",{src:j,alt:"Full View",className:"max-h-[70vh] max-w-[100%] sm:max-w-full object-contain rounded"})]})})]})},$6=()=>{const{projectId:t,token:a}=Ce(),[l,r]=A.useState(null),{data:o,isLoading:d,isError:m}=f6(t,a),p=x=>{r(h=>h===x?null:x)};return e.jsxs("div",{className:"min-h-screen  outline-none  w-full bg-gray-50 text-gray-800 flex flex-col",children:[e.jsx(Zy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[70%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ordered Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),d?e.jsx(qm,{}):m||!(o!=null&&o.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.shopDetails).map(([x,h])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:x.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof h=="string"||typeof h=="number"?h:typeof h=="boolean"?h?"":"":"-"]})]},x))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),d?e.jsx(qm,{}):m||!(o!=null&&o.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(o.deliveryLocationDetails).map(([x,h])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:x.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof h=="string"||typeof h=="number"?h:typeof h=="boolean"?h?"":"":"-"]})]},x))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),d?e.jsx(qm,{}):m||!(o!=null&&o.materialOrderingList)?e.jsx("p",{className:"text-red-500",children:"Failed to load material data"}):Object.entries(o.materialOrderingList).map(([x,h])=>e.jsxs("div",{className:"mb-4 bg-white outline-noneh rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>p(x),className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:x.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${l===x?"up":"down"}`})]}),e.jsx("div",{className:`transition-all duration-300 overflow-hidden ${l===x?"max-h-[1000px] p-4":"max-h-0"}`,children:h.length===0?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No items needed for this section."})]}):e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] max-h-[400px] overflow-y-auto custom-scrollbar rounded border border-gray-200",children:[e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] bg-blue-50 text-xs text-blue-900 font-semibold border-b border-blue-200 py-2 px-2 sticky top-0",children:Object.keys(h[0]).filter(g=>g!=="_id").map(g=>e.jsx("div",{className:"text-center capitalize",children:g==="upload"?"Image":g.replace(/([A-Z])/g," $1")},g))}),h.map((g,b)=>e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] text-xs text-gray-800 border-b border-gray-100 py-2 px-2 hover:bg-gray-50",children:Object.entries(g).filter(([w])=>w!=="_id").map(([w,k],y)=>e.jsx("div",{className:"text-center break-words",children:typeof k=="boolean"?k?"":"":typeof k=="string"||typeof k=="number"?k:"-"},y))},b))]})})})]},x))]})]}),e.jsx(Jy,{})]})},qm=()=>e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),Zy=()=>e.jsx("header",{className:"bg-white shadow sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-full w-full mx-auto flex items-center gap-4 px-4 py-3",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Logo",className:"w-10 h-10 object-contain"}),e.jsx("h1",{className:"text-xl font-bold",children:yt.COMPANY_NAME})]})}),Jy=()=>e.jsxs("footer",{className:"bg-gray-100 border-t border-gray-200 py-6 px-6 text-center text-sm text-gray-600",children:[" ",new Date().getFullYear()," ",yt.COMPANY_NAME,". All rights reserved."]});function B6(){var x,h;const{projectId:t,token:a}=Ce(),{data:l,isLoading:r,isError:o,error:d,refetch:m}=L6(t,a);if(r)return e.jsx(jt,{});if(o||!l)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((h=(x=d==null?void 0:d.response)==null?void 0:x.data)==null?void 0:h.message)||(d==null?void 0:d.message)||"Failed to load cost estimation data"}),e.jsx(T,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const p=Object.entries(l.materialArrivalList||{});return e.jsxs("div",{className:"min-h-screen  bg-gray-50  space-y-6",children:[e.jsx(Zy,{}),e.jsxs("main",{className:"flex-1 w-full px-4 py-6 space-y-6 mx-auto sm:max-w-full md:max-w-[95%] lg:max-w-[85%] xl:max-w-[90%]",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Arrived Materials"}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Shop Delivery Details"}),r?e.jsx(Te,{}):o||!(l!=null&&l.shopDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load shop details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(l.shopDetails).map(([g,b])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof b=="string"||typeof b=="number"?b:typeof b=="boolean"?b?"":"":"-"]})]},g))})]}),e.jsxs("section",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Site Location Details"}),r?e.jsx(Te,{}):o||!(l!=null&&l.deliveryLocationDetails)?e.jsx("p",{className:"text-red-500",children:"Failed to load site details"}):e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:Object.entries(l.deliveryLocationDetails).map(([g,b])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium capitalize",children:g.replace(/([A-Z])/g," $1")}),e.jsxs("span",{className:"text-gray-600",children:[" ",typeof b=="string"||typeof b=="number"?b:typeof b=="boolean"?b?"":"":"-"]})]},g))})]}),e.jsxs("section",{className:"max-w-full mx-auto space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-800 mb-4",children:"Material Rooms"}),p.map(([g,b])=>e.jsx(H6,{projectId:t,token:a,roomKey:g,items:b,refetch:m},g))]})]}),e.jsx(Jy,{})]})}const H6=({projectId:t,roomKey:a,items:l,refetch:r})=>{const o=Wy(),d=Xy(),[m,p]=A.useState(!1),[x,h]=A.useState(!1),[g,b]=A.useState({}),[w,k]=A.useState(null),[y,C]=A.useState(null),[j,S]=A.useState({}),[v,N]=A.useState(null),M=Zs[a],P=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(g)),w&&q.append("upload",w);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),F({title:"Added",description:"New item saved."}),h(!1),b({}),k(null),r()}catch(H){F({title:"Error",description:H.message,variant:"destructive"})}},L=async()=>{const q=new FormData;q.append("itemData",JSON.stringify(j)),v&&q.append("upload",v);try{await o.mutateAsync({projectId:t,roomKey:a,formData:q}),F({title:"Updated",description:"Item saved."}),r(),C(null),S({}),N(null)}catch(H){F({title:"Error",description:H.message,variant:"destructive"})}},z=async q=>{try{await d.mutateAsync({projectId:t,roomKey:a,itemId:q}),F({title:"Deleted",description:"Item removed."}),r()}catch(H){F({title:"Error",description:H.message,variant:"destructive"})}};return e.jsxs("div",{className:"mb-4 bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("button",{className:"w-full px-4 py-3 text-left flex items-center justify-between bg-blue-100 hover:bg-blue-200 transition-all",onClick:()=>p(!m),children:[e.jsx("span",{className:"capitalize font-semibold text-blue-800",children:a==null?void 0:a.replace(/([A-Z])/g," $1")}),e.jsx("i",{className:`fas fa-chevron-${m?"up":"down"}`})]}),e.jsx("div",{className:`transition-max-h duration-300 ease-out overflow-hidden ${m?"max-h-[500px] p-4":"max-h-0 p-0"}`,children:M&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1200px] space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] bg-blue-50 text-xs sm:text-sm font-semibold text-blue-900 border-b border-blue-200 py-2 px-2 rounded-t mb-2",children:[M.map(q=>e.jsx("div",{className:"text-center capitalize truncate",children:q==="image"?"Upload":q==="verifiedByAccountant"?"Verified":q},q)),e.jsx("div",{className:"text-center truncate",children:"Actions"})]}),(l==null?void 0:l.length)===0&&!x?e.jsxs("div",{className:"py-10 text-center text-gray-500 bg-gray-50 rounded-md shadow-inner",children:[e.jsx("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Items Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Start by adding your first item to this room."}),e.jsxs(T,{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 text-sm rounded",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add One"]})]}):l==null?void 0:l.map((q,H)=>e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 py-2 border-b border-gray-100 hover:bg-gray-50 min-h-[60px]",children:[M.map(ue=>{var U;return ue==="image"?y===H?e.jsx(de,{type:"file",accept:"image/*",onChange:I=>{var Y;return N(((Y=I.target.files)==null?void 0:Y[0])||null)},className:"w-full text-sm"},ue):(U=q.upload)!=null&&U.url?e.jsx("img",{src:q.upload.url,alt:"",className:"w-12 h-12 object-cover rounded mx-auto"}):e.jsx("div",{className:"text-center",children:"No image"}):ue==="verifiedByAccountant"?y===H?e.jsx(de,{type:"checkbox",className:"text-center",checked:!!j.verifiedByAccountant,onChange:I=>S(Y=>({...Y,verifiedByAccountant:I.target.checked}))},ue):q!=null&&q.verifiedByAccountant?e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-check text-green-600 text-lg"})}):e.jsx("span",{className:"text-center",children:e.jsx("i",{className:"fas fa-xmark text-red-500 text-lg"})}):ue==="remarks"?y===H?e.jsx(vs,{value:j[ue]||"",className:"text-center w-full text-sm",onChange:I=>S(Y=>({...Y,remarks:I.target.value}))},ue):e.jsx("div",{className:"w-full text-center overflow-x-auto max-h-[70px] overflow-y-auto custom-scrollbar",children:q[ue]||"N/A"}):y===H?e.jsx(de,{value:j[ue]||"",onChange:I=>S(Y=>({...Y,[ue]:I.target.value})),className:"w-full text-sm"},ue):e.jsx("div",{className:"text-center truncate",children:q[ue]??"-"})}),e.jsx("div",{className:"flex gap-2 justify-center",children:y===H?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"sm",onClick:L,children:"Save"}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>C(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>{C(H),S(q)},children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>z(q._id),children:e.jsx("i",{className:"fas fa-trash text-red-500"})})]})})]},H)),!x&&l.length>0&&e.jsx("div",{className:"pt-3 text-center",children:e.jsx(T,{onClick:()=>h(!0),children:" Add Item"})}),x&&e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] items-center gap-2 bg-white p-2 rounded mb-4",children:[M.map(q=>q==="image"?e.jsx(de,{type:"file",accept:"image/*",onChange:H=>{var ue;return k(((ue=H.target.files)==null?void 0:ue[0])||null)},className:"border-2 w-full text-sm"},q):q==="verifiedByAccountant"?e.jsx(de,{type:"checkbox",className:"text-center w-full text-sm",checked:!!g.verifiedByAccountant,onChange:H=>b(ue=>({...ue,verifiedByAccountant:H.target.checked}))},q):e.jsx(de,{placeholder:q,value:g[q]||"",onChange:H=>b(ue=>({...ue,[q]:H.target.value})),className:"w-full text-sm"},q)),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(T,{size:"sm",className:"h-10",onClick:P,children:"Add"}),e.jsx(T,{size:"sm",variant:"secondary",onClick:()=>h(!1),children:"Cancel"})]})]})]})})})]})},Q6=async(t,a)=>(await a.get(`/worktasks/getworktaksmain/${t}`)).data.data,G6=async(t,a)=>(await a.get(`/worktasks/getworkschedule/${t}`)).data.data,K6=async(t,a)=>(await a.get(`/worktasks/getdailyschedule/${t}`)).data.data,V6=async(t,a)=>{const l=await a.get(`/worktasks/${t}/getworkers`);return console.log("res",l),l.data.data},Y6=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/daily-task/${t}`,a)).data,W6=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/work-plan/${t}`,a)).data,X6=async(t,a,l,r,o)=>(await o.put(`/worktasks/${l}/daily-task/${t}/${a}`,r)).data,Z6=async(t,a,l,r,o)=>(await o.put(`/worktasks/${l}/work-plan/${t}/${a}`,r)).data,J6=async(t,a,l,r)=>(await r.delete(`/worktasks/${l}/daily-task/${t}/${a}`)).data,eR=async(t,a,l,r)=>(await r.delete(`/worktasks/${l}/work-plan/${t}/${a}`)).data,tR=async(t,a,l,r)=>(await r.post(`/worktasks/${l}/md-approval/${t}`,a)).data,sR=async(t,a,l,r)=>(await r.patch(`/worktasks/${l}/daily-schedule/${t}/status`,a)).data,aR=async(t,a,l,r)=>(await r.patch(`/worktasks/${l}/work-schedule/${t}/status`,a)).data,nR=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Le({queryKey:["work-main-stage",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return Q6(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},lR=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Le({queryKey:["work-schedule",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return G6(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},rR=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO","worker","client"];return Le({queryKey:["daily-schedule",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return K6(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},ew=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO"];return Le({queryKey:["project-workers",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return V6(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},iR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({dailyScheduleId:r,projectId:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return Y6(r,d,o,a)}})},oR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({workScheduleId:r,formData:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return console.log("workschlksdflask",r),W6(r,o,d,a)}})},cR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({dailyScheduleId:r,taskId:o,formData:d,projectId:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return X6(r,o,m,d,a)}})},dR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({workScheduleId:r,planId:o,formData:d,projectId:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return Z6(r,o,m,d,a)}})},uR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({dailyScheduleId:r,taskId:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return J6(r,o,d,a)}})},mR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({workScheduleId:r,planId:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return eR(r,o,d,a)}})},fR=()=>{const{role:t}=W(),a=Z(t),l=["owner"];return le({mutationFn:async({mainStageId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return tR(r,o,d,a)}})},hR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({dailyScheduleId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return sR(r,o,d,a)}})},xR=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({workScheduleId:r,payload:o,projectId:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return aR(r,o,d,a)}})},pR=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/worktasks/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},gR=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/worktasks/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},bR=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await pR({formId:r,projectId:o,deadLine:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["material-rooms"]})}})},yR=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await gR({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["material-rooms",o]})}})},wR=()=>{var z,q,H,ue,U,I,Y,G;const{projectId:t,organizationId:a}=Ce(),l=dt(),{isMobile:r,openMobileSidebar:o}=He(),{data:d,isLoading:m,refetch:p,error:x}=nR(t),{mutateAsync:h,isPending:g}=bR(),{mutateAsync:b,isPending:w}=yR(),{mutateAsync:k,isPending:y}=fR(),[C,j]=A.useState(!1),[S,v]=A.useState("pending"),N=l.pathname.includes("/workschedule")||l.pathname.includes("/dailyschedule"),M=()=>{j(!0)},P=async()=>{var re,_;try{await b({projectId:t}),F({description:"Completion status updated successfully.",title:"Success"}),p()}catch(X){F({title:"Error",description:((_=(re=X==null?void 0:X.response)==null?void 0:re.data)==null?void 0:_.message)||X.message||"Failed to update completion.",variant:"destructive"})}},L=async()=>{var re,_;try{await k({projectId:t,mainStageId:d==null?void 0:d._id,payload:{action:S}}),F({description:"MD Approval updated successfully.",title:"Success"}),j(!1),p()}catch(X){F({title:"Error",description:((_=(re=X==null?void 0:X.response)==null?void 0:re.data)==null?void 0:_.message)||X.message||"Failed to update Approval.",variant:"destructive"})}};return N?e.jsx(_t,{}):m?e.jsx(jt,{}):e.jsxs("main",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-200 hover:bg-gray-100",title:"Open menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-digging mr-2"})," Work Schedule Overview"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(T,{isLoading:w,onClick:P,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(js,{projectId:t,stageNumber:10,stagePath:"worktasks",className:"w-full sm:w-auto"}),e.jsx(rs,{className:"w-full sm:w-auto",stageName:"WorkMainStageScheduleModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((q=(z=x==null?void 0:x.response)==null?void 0:z.data)==null?void 0:q.message)||(x==null?void 0:x.message)||"Couldn't load data."}),e.jsx(T,{isLoading:m,onClick:()=>p(),className:"bg-red-600 text-white hover:bg-red-700 px-4 py-2",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-6 w-full border-l-4 border-blue-600 shadow bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"worktasks",completedAt:(H=d==null?void 0:d.timer)==null?void 0:H.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(ue=d==null?void 0:d.timer)==null?void 0:ue.deadLine,startedAt:(U=d==null?void 0:d.timer)==null?void 0:U.startedAt,refetchStageMutate:p,deadLineMutate:h,isPending:g})]}),e.jsxs(De,{className:"p-2 mb-4 border-l-4 border-blue-600 bg-white border shadow-md rounded-xl",children:[e.jsxs("div",{className:"text-blue-600 rounded-t flex items-center gap-2 mb-4",children:[e.jsx("i",{className:"fas fa-user-shield"}),e.jsx("h2",{className:"text-lg font-semibold",children:"MD Approval"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 font-medium ",children:"Status:"}),C?e.jsxs(Je,{value:S,onValueChange:re=>v(re),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S,placeholder:"Select status"})}),e.jsx(Ze,{children:["pending","approved","rejected"].map(re=>e.jsx(ye,{value:re,children:re.charAt(0).toUpperCase()+re.slice(1)},re))})]}):e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${((I=d==null?void 0:d.mdApproval)==null?void 0:I.status)==="approved"?"bg-green-200 text-green-700":((Y=d==null?void 0:d.mdApproval)==null?void 0:Y.status)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-200 text-red-700"}`,children:((G=d==null?void 0:d.mdApproval)==null?void 0:G.status)||"N/A"}),C?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{size:"sm",variant:"primary",isLoading:y,onClick:L,children:e.jsx("i",{className:"fas fa-check"})}),e.jsx(T,{size:"sm",variant:"secondary",onClick:()=>j(!1),children:e.jsx("i",{className:"fas fa-xmark"})})]}):e.jsx(T,{size:"md",onClick:M,children:e.jsx("i",{className:"fas fa-pencil"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs(Rt,{to:`workschedule/${d==null?void 0:d.workScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-list-alt text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Work Plans"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Manage detailed work plans for the project."})]})]}),e.jsxs(Rt,{to:`dailyschedule/${d==null?void 0:d.dailyScheduleId}`,className:"rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors shadow-md px-6 py-5 flex items-center gap-4",children:[e.jsx("i",{className:"fas fa-calendar-check text-blue-600 text-3xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"Daily Tasks"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Track daily activities and progress reports."})]})]})]})]})]})},vR=()=>{var G,re,_,X,ce;const{sectionId:t,projectId:a,organizationId:l}=Ce(),r=Fe();if(!a)return;const{data:o,isLoading:d,refetch:m,error:p}=lR(a),{data:x}=ew(a),{mutateAsync:h,isPending:g}=xR(),b=oR(),w=dR(),k=mR(),[y,C]=A.useState(null),[j,S]=A.useState(null),[v,N]=A.useState(null),[M,P]=A.useState("pending"),[L,z]=A.useState(!1);if(d)return e.jsx(pn,{});p&&(re=(G=p==null?void 0:p.response)==null?void 0:G.data)!=null&&re.message;const q=()=>{C({workType:"",startDate:"",endDate:"",assignedTo:"",notes:""})},H=()=>z(!0),ue=async()=>{var te,O;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await h({projectId:a,workScheduleId:o._id,payload:{status:M}}),F({title:"Success",description:"Work Schedule status updated successfully."}),z(!1),m()}catch($){F({title:"Error",description:((O=(te=$==null?void 0:$.response)==null?void 0:te.data)==null?void 0:O.message)||$.message||"Failed to update status.",variant:"destructive"})}},U=async()=>{var te,O,$;try{if(!y)return;if(!((te=y.workType)!=null&&te.trim()))throw new Error("work field is mandatory");await b.mutateAsync({workScheduleId:t,formData:y,projectId:a}),C(null),F({title:"Success",description:"Item Saved"}),m()}catch(D){F({variant:"destructive",title:"Error",description:(($=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:$.message)||(D==null?void 0:D.message)||"failed to add"})}},I=async()=>{var te,O,$;try{if(!v||!j)return;if(!((te=v.workType)!=null&&te.trim()))throw new Error("work field is mandatory");await w.mutateAsync({workScheduleId:o._id,planId:j,formData:v,projectId:a}),S(null),N(null),F({title:"Success",description:"Item Saved"}),m()}catch(D){F({variant:"destructive",title:"Error",description:(($=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:$.message)||(D==null?void 0:D.message)||"Update failed"})}},Y=async te=>{var O,$;try{await k.mutateAsync({workScheduleId:o._id,planId:te,projectId:a}),F({title:"Success",description:"Item deleted"}),m()}catch(D){F({variant:"destructive",title:"Error",description:(($=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:$.message)||(D==null?void 0:D.message)||"Update failed"})}};return e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-6 px-4",children:" Work Plans"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),L?e.jsxs(e.Fragment,{children:[e.jsxs(Je,{value:M,onValueChange:te=>P(te),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select status",selectedValue:M})}),e.jsx(Ze,{children:["pending","completed"].map(te=>e.jsx(ye,{value:te,children:te},te))})]}),e.jsx(T,{size:"sm",variant:"primary",disabled:g,onClick:ue,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(T,{size:"sm",onClick:H,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(T,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1024px]",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 bg-blue-100 text-sm font-semibold text-blue-900 rounded-t-lg shadow-md",children:[e.jsx("div",{className:"text-center",children:"S.No"}),e.jsx("div",{className:"text-center",children:"Work Type"}),e.jsx("div",{className:"text-center",children:"Start Date"}),e.jsx("div",{className:"text-center",children:"End Date"}),e.jsx("div",{className:"text-center",children:"Assigned To"}),e.jsx("div",{className:"text-center",children:"Notes"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col divide-y",children:[((_=o==null?void 0:o.plans)==null?void 0:_.length)>0?o.plans.map((te,O)=>{var $;return e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 border-b border-[#5557584a] items-center bg-white hover:bg-blue-50 transition",children:[e.jsx("div",{className:"font-medium text-gray-700 text-center",children:O+1}),j===te._id?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.workType,onChange:D=>N({...v,workType:D.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.startDate,onChange:D=>N({...v,startDate:D.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.endDate,onChange:D=>N({...v,endDate:D.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.assignedTo,onChange:D=>N({...v,assignedTo:D.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),x==null?void 0:x.map(D=>e.jsx("option",{value:D==null?void 0:D._id,children:D.workerName},D==null?void 0:D._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",value:v==null?void 0:v.notes,onChange:D=>N({...v,notes:D.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(T,{variant:"primary",isLoading:w.isPending,onClick:I,children:"Save"}),e.jsx("button",{onClick:()=>{S(null),N(null)},className:"bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-gray-700 text-center",children:te.workType||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:te.startDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:te.endDate||"N/A"}),e.jsx("div",{className:"text-gray-700 text-center",children:(($=x==null?void 0:x.find(D=>{var V;return D._id===((V=te.assignedTo)==null?void 0:V._id)}))==null?void 0:$.workerName)||"Not Assigned"}),e.jsx("div",{className:"text-gray-700 text-center",children:te.notes||"N/A"}),e.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[e.jsx("button",{onClick:()=>{S(te._id),N(te)},className:"text-blue-600 hover:text-blue-800",title:"Edit",children:e.jsx("i",{className:"fas fa-pen"})}),e.jsx(T,{isLoading:k.isPending,onClick:()=>Y(te._id),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]})]},te._id)}):!y&&e.jsxs("div",{className:"mt-6 text-center border border-blue-100 p-8 rounded-lg bg-blue-50",children:[e.jsx("p",{className:"text-blue-600 text-sm",children:"No work plans created yet."}),e.jsxs("button",{onClick:q,className:"mt-3 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Work Plan"]})]}),y&&e.jsxs("div",{className:"grid grid-cols-7 gap-3 px-4 py-3 items-center bg-white",children:[e.jsx("div",{className:"text-center font-medium text-gray-700",children:(X=o==null?void 0:o.plans)!=null&&X.length?o.plans.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Work Type",value:y.workType,onChange:te=>C({...y,workType:te.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:y.startDate,onChange:te=>C({...y,startDate:te.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1 text-sm",value:y.endDate,onChange:te=>C({...y,endDate:te.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm",value:y.assignedTo,onChange:te=>C({...y,assignedTo:te.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),x==null?void 0:x.map(te=>e.jsx("option",{value:te._id,children:te.workerName},te._id))]}),e.jsx("input",{className:"border-b px-2 py-1 text-sm",placeholder:"Notes",value:y.notes,onChange:te=>C({...y,notes:te.target.value})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(T,{variant:"primary",isLoading:b.isPending,onClick:U,children:"Save"}),e.jsx(T,{variant:"secondary",onClick:()=>C(null),children:"Cancel"})]})]})]}),!y&&((ce=o==null?void 0:o.plans)==null?void 0:ce.length)>0&&e.jsx("div",{className:"mt-5 text-left",children:e.jsxs(T,{size:"sm",variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Work"]})})]})})]})},jR=()=>{var X,ce,te,O,$;const{sectionId:t,projectId:a,organizationId:l}=Ce(),r=Fe();if(!t)return;const{data:o,isLoading:d,refetch:m,isError:p,error:x}=rR(a),{data:h,isLoading:g}=ew(a),{mutateAsync:b,isPending:w}=hR(),k=iR(),y=cR(),C=uR(),[j,S]=A.useState(!1),[v,N]=A.useState({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),[M,P]=A.useState(null),[L,z]=A.useState(null),[q,H]=A.useState("pending"),[ue,U]=A.useState(!1),I=()=>U(!0),Y=async()=>{var D,V;try{if(!a||!(o!=null&&o._id))throw new Error("Invalid project or schedule ID");await b({projectId:a,dailyScheduleId:o._id,payload:{status:q}}),F({title:"Success",description:"Work Schedule status updated successfully."}),U(!1),m()}catch(J){F({title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||J.message||"Failed to update status.",variant:"destructive"})}},G=async()=>{var D,V,J;try{if(!((D=v.taskName)!=null&&D.trim()))throw new Error("task Name field is mandatory");const ge=new FormData;ge.append("taskName",v.taskName),ge.append("description",v.description),ge.append("date",v.date),ge.append("status",v.status),ge.append("assignedTo",v.assignedTo),await k.mutateAsync({dailyScheduleId:t,formData:ge,projectId:a}),S(!1),N({taskName:"",description:"",date:"",status:"not_started",assignedTo:""}),F({title:"Success",description:"Item Saved"}),m()}catch(ge){F({variant:"destructive",title:"Error",description:((J=(V=ge==null?void 0:ge.response)==null?void 0:V.data)==null?void 0:J.message)||(ge==null?void 0:ge.message)||"failed to save"})}},re=async D=>{var V,J,ge;try{if(!((V=L.taskName)!=null&&V.trim()))throw new Error("task Name field is mandatory");const ae=new FormData;ae.append("taskName",L.taskName),ae.append("description",L.description),ae.append("date",L.date),ae.append("status",L.status),ae.append("assignedTo",L.assignedTo),await y.mutateAsync({dailyScheduleId:t,taskId:D,formData:ae,projectId:a}),P(null),z(null),F({title:"Success",description:"Item updated"}),m()}catch(ae){F({variant:"destructive",title:"Error",description:((ge=(J=ae==null?void 0:ae.response)==null?void 0:J.data)==null?void 0:ge.message)||(ae==null?void 0:ae.message)||"Update failed"})}},_=async D=>{var V,J;try{await C.mutateAsync({dailyScheduleId:t,taskId:D,projectId:a}),F({title:"Deleted",description:"Item removed"}),m()}catch(ge){F({title:"Error",description:((J=(V=ge==null?void 0:ge.response)==null?void 0:V.data)==null?void 0:J.message)||(ge==null?void 0:ge.message)||"Failed to delete",variant:"destructive"})}};return d?e.jsx(pn,{}):(p&&(ce=(X=x==null?void 0:x.response)==null?void 0:X.data)!=null&&ce.message,g?e.jsx("p",{children:"getting the worksrs"}):e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-700 mb-4 px-4",children:" Daily Tasks"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Status:"}),ue?e.jsxs(e.Fragment,{children:[e.jsxs(Je,{value:q,onValueChange:D=>H(D),children:[e.jsx(Xe,{children:e.jsx(et,{placeholder:"Select status",selectedValue:q})}),e.jsx(Ze,{children:["pending","completed"].map(D=>e.jsx(ye,{value:D,children:D},D))})]}),e.jsx(T,{size:"sm",variant:"primary",disabled:w,onClick:Y,children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${(o==null?void 0:o.status)==="completed"?"bg-green-200 text-green-700":"bg-yellow-100 text-yellow-800"}`,children:o==null?void 0:o.status}),e.jsx(T,{size:"sm",onClick:I,children:e.jsx("i",{className:"fas fa-pencil"})})]})]})}),e.jsx(T,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/workmainschedule`),children:"Go Back"})]})]}),e.jsx("div",{className:"rounded-lg overflow-x-auto shadow-sm",children:e.jsxs("div",{className:"min-w-[1100px]",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-blue-100 px-4 py-3 font-semibold text-blue-800 text-center text-sm",children:[e.jsx("div",{children:"S.No"}),e.jsx("div",{children:"Task Name"}),e.jsx("div",{children:"Description"}),e.jsx("div",{children:"Date"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Assigned To"}),e.jsx("div",{children:"Actions"})]}),((te=o==null?void 0:o.tasks)==null?void 0:te.length)>0?o.tasks.map((D,V)=>{var J,ge;return e.jsxs("div",{className:"grid grid-cols-7 gap-1 items-center px-4 py-2 text-center hover:bg-blue-50 transition border-b border-[#81838556]",children:[e.jsx("div",{children:V+1}),M===V?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:L.taskName,onChange:ae=>z({...L,taskName:ae.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm text-center",value:L.description,onChange:ae=>z({...L,description:ae.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:L.date,onChange:ae=>z({...L,date:ae.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:L.status,onChange:ae=>z({...L,status:ae.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:L.assignedTo,onChange:ae=>z({...L,assignedTo:ae.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(ae=>e.jsx("option",{value:ae._id,children:ae.workerName},ae._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(T,{isLoading:y.isPending,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded",onClick:()=>re(D._id),children:"Save"}),e.jsx("button",{className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded",onClick:()=>{P(null),z(null)},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:D.taskName||"N/A"}),e.jsx("div",{children:D.description||"N/A"}),e.jsx("div",{children:D.date||"N/A"}),e.jsx("div",{className:"capitalize",children:((J=D==null?void 0:D.status)==null?void 0:J.replace("_"," "))||"N/A"}),e.jsx("div",{children:((ge=h==null?void 0:h.find(ae=>{var Se;return(ae==null?void 0:ae._id)===((Se=D==null?void 0:D.assignedTo)==null?void 0:Se._id)}))==null?void 0:ge.workerName)||"Not Assigned"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded",onClick:()=>{P(V),z(D)},children:"Edit"}),e.jsx(T,{isLoading:C.isPending,onClick:()=>_(D._id),children:"Delete"})]})]})]},D._id)}):j?null:e.jsxs("div",{className:"text-center text-gray-600 py-6",children:["No tasks created yet.",e.jsx("br",{}),e.jsxs(T,{variant:"primary",className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",onClick:()=>S(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add First Task"]})]}),j&&e.jsxs("div",{className:"grid grid-cols-7 items-center gap-2 px-4 py-3 text-center bg-white",children:[e.jsx("div",{children:(O=o==null?void 0:o.tasks)!=null&&O.length?o.tasks.length+1:1}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:v.taskName,onChange:D=>N({...v,taskName:D.target.value})}),e.jsx("input",{className:"border-b px-2 py-1  w-full text-sm",value:v.description,onChange:D=>N({...v,description:D.target.value})}),e.jsx("input",{type:"date",className:"border-b px-2 py-1  w-full text-sm text-center",value:v.date,onChange:D=>N({...v,date:D.target.value})}),e.jsxs("select",{className:"border-b px-2 py-1  text-sm text-center w-full",value:v.status,onChange:D=>N({...v,status:D.target.value}),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{className:"border-b px-2 py-1 text-sm text-center w-full",value:v.assignedTo,onChange:D=>N({...v,assignedTo:D.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(D=>e.jsx("option",{value:D==null?void 0:D._id,children:D.workerName},D==null?void 0:D._id))]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(T,{variant:"primary",isLoading:k.isPending,onClick:G,children:"Add"}),e.jsx(T,{variant:"secondary",className:"",onClick:()=>S(!1),children:"Cancel"})]})]})]})}),!j&&(($=o==null?void 0:o.tasks)==null?void 0:$.length)>0&&e.jsx("div",{className:"text-left mt-6",children:e.jsxs(T,{size:"md",variant:"primary",onClick:()=>S(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Task"]})})]}))},NR=async(t,a,l,r)=>{console.log("formData",l);const{data:o}=await r.post(`/installation/${t}/${a}/item/create`,l);if(!o.ok)throw new Error(o.message);return o.data},SR=async(t,a,l,r)=>{const{data:o}=await r.put(`/installation/${t}/${a}/item/edit`,l);if(!o.ok)throw new Error(o.message);return o.data},CR=async(t,a)=>{const{data:l}=await a.delete(`/installation/${t.projectId}/item/delete`,{data:t});if(!l.ok)throw new Error(l.message);return l.message},kR=async(t,a)=>{const{data:l}=await a.get(`/installation/${t}/getalldetail`);if(!l.ok)throw new Error(l.message);return l.data},ER=()=>{const t=["CTO","owner","staff","worker"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await NR(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},AR=()=>{const t=["CTO","owner","staff","worker"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await SR(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},OR=()=>{const t=["CTO","owner","staff","worker"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async o=>{if(!a||!t.includes(a))throw new Error("Not allowed to make this API call.");if(!l)throw new Error("API instance not found.");return await CR(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["installation-details",d]})}})},tw=t=>{const a=["CTO","owner","staff","worker","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["installation-details",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to make this API call.");if(!r)throw new Error("API instance not found.");return await kR(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},RR=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/installation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},TR=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/installation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},PR=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,projectId:o,deadLine:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await RR({formId:r,projectId:o,deadLine:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["installation-details"]})}})},MR=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await TR({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["installation-details",o]})}})},FR=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"];function LR(){var j,S,v,N,M;const{projectId:t,organizationId:a}=Ce(),l=dt(),{isMobile:r,openMobileSidebar:o}=He(),d=l.pathname.includes("/installationroom"),{data:m,isLoading:p,isError:x,refetch:h,error:g}=tw(t),{mutateAsync:b,isPending:w}=MR(),{mutateAsync:k,isPending:y}=PR(),C=async()=>{var P,L;try{await b({projectId:t}),F({title:"Success",description:"Completion status updated successfully"})}catch(z){F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||z.message||"Failed to update status",variant:"destructive"})}};return p?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full",children:d?e.jsx(_t,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-tools mr-2"})," Installation Overview"]}),e.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:flex-row gap-2",children:[e.jsxs(T,{isLoading:w,onClick:C,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]}),e.jsx(js,{projectId:t,stageNumber:11,stagePath:"installation",className:"w-full sm:w-auto"}),e.jsx(rs,{stageName:"InstallationModel",projectId:t,organizationId:a,currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(j=g==null?void 0:g.response)==null?void 0:j.data)==null?void 0:S.message)||(g==null?void 0:g.message)||"Something went wrong"}),e.jsx(T,{isLoading:p,onClick:()=>h(),className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):m&&e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(v=m==null?void 0:m.timer)==null?void 0:v.completedAt,stageName:"installation",projectId:t,formId:m==null?void 0:m._id,deadLine:(N=m==null?void 0:m.timer)==null?void 0:N.deadLine,startedAt:(M=m==null?void 0:m.timer)==null?void 0:M.startedAt,refetchStageMutate:h,deadLineMutate:k,isPending:y})]}),e.jsx("div",{className:"sm:max-h-[47vh] lg:max-h-[55vh] xl:max-h-[70vh] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:FR.map(P=>{var L;return e.jsxs(Rt,{to:`installationroom/${P}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:[e.jsx("h3",{className:"text-md font-semibold capitalize text-blue-800",children:P}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((L=m==null?void 0:m[P])==null?void 0:L.length)||0," work items"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tap to view details"})]},P)})})]})]})})}function DR(){var I,Y;const{roomkey:t,projectId:a,organizationId:l}=Ce(),r=Fe(),[o,d]=A.useState(null),{data:m,isLoading:p,refetch:x,error:h,isError:g}=tw(a),{mutateAsync:b,isPending:w}=ER(),{mutateAsync:k,isPending:y}=AR(),{mutateAsync:C,isPending:j}=OR(),[S,v]=A.useState({workName:"",descritpion:"",completedDate:"",file:void 0}),[N,M]=A.useState(!1),[P,L]=A.useState(null),z=(m==null?void 0:m[t])||[],q=async()=>{var G,re;try{if(!S.workName.trim())throw new Error("work Name field is mandatory");const _=new FormData;_.append("workName",S.workName),S.descritpion&&_.append("descritpion",S.descritpion),S.completedDate&&_.append("completedDate",S.completedDate),S.file&&_.append("file",S.file),await b({projectId:a,roomName:t,formData:_}),M(!1),F({description:"created successfully",title:"Success"})}catch(_){F({title:"Error",description:((re=(G=_==null?void 0:_.response)==null?void 0:G.data)==null?void 0:re.message)||_.message||"Failed to update completion status",variant:"destructive"})}},H=async()=>{var G,re;try{if(!P)return;if(!S.workName.trim())throw new Error("work Name field is mandatory");const _=new FormData;_.append("itemId",P),S.workName&&_.append("workName",S.workName),S.descritpion&&_.append("descritpion",S.descritpion),S.completedDate&&_.append("completedDate",S.completedDate),S.file&&_.append("file",S.file),await k({projectId:a,roomName:t,formData:_},{onSuccess:()=>{v({workName:"",descritpion:"",completedDate:"",file:void 0}),L(null)}}),F({description:"edited successfully",title:"Success"})}catch(_){F({title:"Error",description:((re=(G=_==null?void 0:_.response)==null?void 0:G.data)==null?void 0:re.message)||_.message||"Failed to update completion status",variant:"destructive"})}},ue=async G=>{var re,_;try{await C({projectId:a,roomName:t,itemId:G}),F({description:"deleted successfully",title:"Success"}),x()}catch(X){F({title:"Error",description:((_=(re=X==null?void 0:X.response)==null?void 0:re.data)==null?void 0:_.message)||X.message||"Failed to update completion status",variant:"destructive"})}},U=()=>{v({workName:"",descritpion:"",completedDate:"",file:void 0}),M(!1),L(null)};return p?e.jsx(pn,{}):(g&&(Y=(I=h==null?void 0:h.response)==null?void 0:I.data)!=null&&Y.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(T,{variant:"primary",className:"",onClick:()=>r(`/${l}/projectdetails/${a}/installation`),children:"Go Back"})]}),z.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-5 mb-2  gap-2 font-semibold bg-blue-100  text-blue-900 p-2 rounded ",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-tasks text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No works added yet for this room."}),e.jsxs(T,{onClick:()=>M(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]}):e.jsx("div",{className:"w-full overflow-x-auto h-[95%]  custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Description"}),e.jsx("div",{className:"text-center",children:"Completed Date"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsxs("section",{className:"!max-h-[100%] overflow-y-auto",children:[z.map(G=>{var re,_;return P===G._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",value:S.workName,onChange:X=>v({...S,workName:X.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",value:S.descritpion,onChange:X=>v({...S,descritpion:X.target.value})}),e.jsx("input",{type:"date",className:"border-b p-1 focus:outline-none",value:S.completedDate,onChange:X=>v({...S,completedDate:X.target.value})}),e.jsx("input",{className:"border-b p-2 text-xs max-w-[80%] ",type:"file",accept:"image/*",onChange:X=>{var te;const ce=(te=X.target.files)==null?void 0:te[0];v({...S,file:ce})}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{variant:"primary",isLoading:y,onClick:H,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(T,{variant:"secondary",onClick:U,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},G._id):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:G.workName||"N/A"}),e.jsx("div",{className:"text-center",children:G.descritpion||"N/A"}),e.jsx("div",{className:"text-center",children:G.completedDate?ui(G.completedDate.toLocaleString()):"N/A"}),e.jsx("div",{className:"text-center",children:((re=G.upload)==null?void 0:re.type)==="image"?e.jsx("img",{loading:"lazy",src:G.upload.url,alt:"preview",className:"w-10 mx-auto block h-10 object-cover border rounded shadow cursor-pointer",onClick:()=>{var X;return d((X=G.upload)==null?void 0:X.url)}}):((_=G.upload)==null?void 0:_.type)==="pdf"?e.jsx("a",{href:G.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(T,{onClick:()=>{L(G._id),M(!1),v({workName:G.workName||"",descritpion:G.descritpion||"",completedDate:G.completedDate?new Date(G.completedDate).toISOString().split("T")[0]:"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(T,{isLoading:j,variant:"danger",onClick:()=>ue(G._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},G._id)}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-4 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Work Name",value:S.workName,onChange:G=>v({...S,workName:G.target.value})}),e.jsx("input",{className:"border-b p-1 focus:outline-none",placeholder:"Description",value:S.descritpion,onChange:G=>v({...S,descritpion:G.target.value})}),e.jsx("input",{type:"date",className:"border-b  p-1 focus:outline-none",value:S.completedDate,onChange:G=>v({...S,completedDate:G.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx("input",{className:"border-b max-w-[80%]",type:"file",accept:"image/*",onChange:G=>{var _;const re=(_=G.target.files)==null?void 0:_[0];v({...S,file:re})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(T,{isLoading:w,variant:"primary",onClick:q,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:U,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),!N&&e.jsxs(T,{onClick:()=>M(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Work"]})]})]})}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0  bg-black/70 bg-opacity-60 z-50 flex items-center justify-center",children:e.jsxs("div",{onClick:G=>G.stopPropagation(),className:"relative bg-white rounded p-4 lg:p-8 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-3 right-4 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{loading:"lazy",src:o,alt:"Full Preview",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const _R=async(t,a,l,r)=>{const{data:o}=await r.post(`/qualitycheck/${t}/${a}/item/create`,l);if(!o.ok)throw new Error(o.message);return o.data},qR=async(t,a,l,r,o)=>{const{data:d}=await o.put(`/qualitycheck/${t}/${a}/${l}/item/edit`,r);if(!d.ok)throw new Error(d.message);return d.data},zR=async(t,a,l,r)=>{const{data:o}=await r.delete(`/qualitycheck/${t}/${a}/${l}/item/delete`);if(!o.ok)throw new Error(o.message);return o},UR=async(t,a)=>{const{data:l}=await a.get(`/qualitycheck/${t}`);if(!l.ok)throw new Error(l.message);return l.data},IR=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomName:d,formData:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await _R(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},$R=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomName:d,itemId:m,formData:p})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await qR(o,d,m,p,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},BR=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomName:d,itemId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("can't make the call");return await zR(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["quality-checkup",d]})}})},sw=t=>{const a=["owner","CTO","staff","worker"],{role:l}=W(),r=Z(l);return Le({queryKey:["quality-checkup",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed.");if(!r)throw new Error("can't make the call");return await UR(t,r)},enabled:!!t,retry:!1,retryOnMount:!1})},HR=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/qualitycheck/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},QR=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/qualitycheck/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},GR=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await HR({formId:r,projectId:d,deadLine:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["quality-checkup"]})}})},KR=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await QR({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["quality-checkup",o]})}})},VR=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"],YR=[{path:"adminwall",sectionName:"Admin Section"},{path:"workerwall",sectionName:"Worker Section"}];function WR(){var j,S,v,N,M;const{projectId:t,organizationId:a}=Ce(),l=dt(),{isMobile:r,openMobileSidebar:o}=He();if(!t)return null;const{data:d,isLoading:m,isError:p,error:x,refetch:h}=sw(t),{mutateAsync:g,isPending:b}=GR(),{mutateAsync:w,isPending:k}=KR(),y=l.pathname.includes("/qualitycheckroom/"),C=async()=>{var P,L;try{await w({projectId:t}),F({title:"Success",description:"Quality Check marked as complete."}),h()}catch(z){F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||z.message||"Failed to update completion status",variant:"destructive"})}};return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full  overflow-y-auto custom-scrollbar",children:y?e.jsx(_t,{context:{isMobile:r,openMobileSidebar:o}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[r&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-check-double"}),"Quality Check Overview"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-2 justify-end",children:[e.jsxs(T,{isLoading:k,onClick:C,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark as Complete"}),e.jsx("span",{className:"inline sm:hidden",children:"Complete"})]}),e.jsx(js,{projectId:t,stageNumber:12,stagePath:"qualitycheck",className:"w-full sm:w-auto"}),e.jsx(rs,{stageName:"QualityCheckupModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),p?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(j=x==null?void 0:x.response)==null?void 0:j.data)==null?void 0:S.message)||(x==null?void 0:x.message)||"Failed to load, please try again"}),e.jsx(T,{isLoading:m,onClick:()=>h(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"qualitycheck",completedAt:(v=d==null?void 0:d.timer)==null?void 0:v.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(M=d==null?void 0:d.timer)==null?void 0:M.startedAt,refetchStageMutate:h,deadLineMutate:g,isPending:b})]}),e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Rooms"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 mb-10",children:VR.map(P=>{var L;return e.jsxs(Rt,{to:`qualitycheckroom/${P}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:P.replace(/([A-Z])/g," $1").trim()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((L=d==null?void 0:d[P])==null?void 0:L.length)||0," works completed"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},P)})}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Walls SOP Section"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10",children:YR.map(P=>e.jsxs(Rt,{to:`qualitycheckroom/${P.path}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:P.sectionName.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},P.sectionName))})]})]})]})})}function XR(){var I,Y;const{roomkey:t,projectId:a,organizationId:l}=Ce(),r=Fe(),[o,d]=A.useState(null),{data:m,isLoading:p,error:x,isError:h,refetch:g}=sw(a),{mutateAsync:b,isPending:w}=IR(),{mutateAsync:k,isPending:y}=$R(),{mutateAsync:C,isPending:j}=BR(),[S,v]=A.useState({workName:"",status:"pending",remarks:"",file:void 0}),[N,M]=A.useState(!1),[P,L]=A.useState(null),z=(m==null?void 0:m[t])||[],q=async()=>{var G,re;try{if(!S.workName.trim())throw new Error("Work name is mandatory");const _=new FormData;_.append("workName",S.workName),_.append("status",S.status),S.remarks&&_.append("remarks",S.remarks),S.file&&_.append("file",S.file),await b({projectId:a,roomName:t,formData:_}),F({description:"Created successfully",title:"Success"}),U(),g()}catch(_){F({title:"Error",description:((re=(G=_==null?void 0:_.response)==null?void 0:G.data)==null?void 0:re.message)||(_==null?void 0:_.message)||"Failed to create item",variant:"destructive"})}},H=async G=>{var re,_;try{if(!P)return;if(!S.workName.trim())throw new Error("Work name is mandatory");const X=new FormData;X.append("itemId",P),S.workName&&X.append("workName",S.workName),X.append("status",S.status),S.remarks&&X.append("remarks",S.remarks),S.file&&X.append("file",S.file),await k({projectId:a,roomName:t,formData:X,itemId:G},{onSuccess:()=>{U()}}),F({description:"Edited successfully",title:"Success"}),g()}catch(X){F({title:"Error",description:((_=(re=X==null?void 0:X.response)==null?void 0:re.data)==null?void 0:_.message)||(X==null?void 0:X.message)||"Failed to edit item",variant:"destructive"})}},ue=async G=>{var re,_;try{await C({projectId:a,roomName:t,itemId:G}),F({description:"Deleted successfully",title:"Success"}),g()}catch(X){F({title:"Error",description:((_=(re=X==null?void 0:X.response)==null?void 0:re.data)==null?void 0:_.message)||X.message||"Failed to delete item",variant:"destructive"})}},U=()=>{v({workName:"",status:"pending",remarks:"",file:void 0}),M(!1),L(null)};return p?e.jsx(pn,{}):(h&&(Y=(I=x==null?void 0:x.response)==null?void 0:I.data)!=null&&Y.message,e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Room: ",t]}),e.jsx(T,{variant:"primary",className:"h-10",onClick:()=>r(`/${l}/projectdetails/${a}/qualitycheck`),children:"Go Back"})]}),z.length===0&&!N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px] grid grid-cols-5 gap-2 font-semibold bg-blue-100 text-blue-900 p-2 rounded",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 shadow rounded-lg bg-white",children:[e.jsx("i",{className:"fas fa-check-double text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-blue-600 mb-4 text-sm",children:"No items added yet for this room."}),e.jsxs(T,{onClick:()=>M(!0),variant:"primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[900px]",children:[e.jsxs("div",{className:"grid grid-cols-5 text-blue-900 gap-2 font-semibold bg-blue-100 p-2 rounded-t",children:[e.jsx("div",{className:"text-center",children:"Work Name"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Remarks"}),e.jsx("div",{className:"text-center",children:"Upload"}),e.jsx("div",{className:"text-center",children:"Actions"})]}),e.jsx("div",{className:"overflow-y-auto relative z-[-10] max-h-[70vh] sm:max-h-[75vh] md:max-h-[80vh] lg:max-h-[45vh] xl:max-h-[77vh]",children:z.map((G,re)=>{var _,X;return P===G._id?e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx(de,{value:S.workName,placeholder:"Work Name",onChange:ce=>v({...S,workName:ce.target.value})}),e.jsx("div",{className:"relative z-50",children:e.jsxs(Je,{value:S.status,onValueChange:ce=>v({...S,status:ce}),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S.status,placeholder:"Select status"})}),e.jsx(Ze,{children:["pass","fail","pending"].map(ce=>e.jsx(ye,{value:ce,children:ce},ce))})]})}),e.jsx(de,{value:S.remarks,placeholder:"Remarks",onChange:ce=>v({...S,remarks:ce.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(de,{type:"file",accept:"image/*",onChange:ce=>{var O;const te=(O=ce.target.files)==null?void 0:O[0];v({...S,file:te})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(T,{variant:"primary",isLoading:y,onClick:()=>H(G._id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs(T,{variant:"secondary",onClick:U,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]},G._id+re):e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 border-b border-gray-200 items-center bg-white",children:[e.jsx("div",{className:"text-center",children:G.workName||"N/A"}),e.jsx("div",{className:"text-center",children:G.status||"N/A"}),e.jsx("div",{className:"text-center",children:G.remarks||"N/A"}),e.jsx("div",{className:"text-center",children:((_=G.upload)==null?void 0:_.type)==="image"?e.jsx("img",{src:G.upload.url,alt:"Preview",className:"w-10 h-10 object-cover rounded border cursor-pointer mx-auto",onClick:()=>d(G.upload.url)}):((X=G.upload)==null?void 0:X.type)==="pdf"?e.jsx("a",{href:G.upload.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"View PDF"}):"No Image"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>{L(G._id),M(!1),v({workName:G.workName||"",status:G.status||"pending",remarks:G.remarks||"",file:void 0})},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),e.jsxs(T,{variant:"primary",isLoading:j,onClick:()=>ue(G._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-trash mr-1"})," Delete"]})]})]},G._id+re)})}),N&&e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-4 py-3 bg-white border-b border-gray-200 items-center",children:[e.jsx(de,{placeholder:"Work Name",value:S.workName,onChange:G=>v({...S,workName:G.target.value})}),e.jsxs(Je,{value:S.status,onValueChange:G=>v({...S,status:G}),children:[e.jsx(Xe,{children:e.jsx(et,{selectedValue:S.status,placeholder:"Select status"})}),e.jsx(Ze,{children:["pass","fail","pending"].map(G=>e.jsx(ye,{value:G,children:G},G))})]}),e.jsx(de,{placeholder:"Remarks",value:S.remarks,onChange:G=>v({...S,remarks:G.target.value})}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(de,{type:"file",accept:"image/*",onChange:G=>{var _;const re=(_=G.target.files)==null?void 0:_[0];v({...S,file:re})}})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:q,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{onClick:U,className:"bg-gray-400 text-white px-3 py-1 rounded",children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})]})}),!N&&z.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs(T,{isLoading:w,variant:"primary",onClick:()=>{M(!0),L(null),v({workName:"",status:"pending",remarks:"",file:void 0})},children:[e.jsx("i",{className:"fas fa-plus mr-2"})," Add Item"]})})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:G=>G.stopPropagation(),className:"relative bg-white rounded p-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const ZR=async(t,a,l,r)=>{const{data:o}=await r.post(`/cleaning/${t}/${a}/upload`,l);if(!o.ok)throw new Error(o.message);return o.data},JR=async(t,a,l,r)=>{const{data:o}=await r.delete(`/cleaning/${t}/${a}/${l}/file`);if(!o.ok)throw new Error(o.message);return o},eT=async({projectId:t,roomId:a,notes:l,api:r})=>{const{data:o}=await r.put(`/cleaning/${t}/room/${a}/notes`,{notes:l});if(!o.ok)throw new Error(o.message);return o.data},tT=async(t,a,l,r)=>{const{data:o}=await r.put(`/cleaning/${t}/${a}/cleaning-status`,{completelyCleaned:l});if(!o.ok)throw new Error(o.message);return o},sT=async(t,a)=>{const{data:l}=await a.get(`/cleaning/${t}`);if(!l.ok)throw new Error(l.message);return l.data},aT=async(t,a,l)=>{const{data:r}=await l.get(`/cleaning/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},Lf=["owner","CTO","staff"],nT=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomId:o,formData:d})=>{if(!t||!Lf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await ZR(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},lT=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomId:o,fileId:d})=>{if(!t||!Lf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await JR(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},rT=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,roomId:d,notes:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("Missing API instance");return await eT({projectId:o,roomId:d,notes:m,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["cleaning-and-sanitation",d]})}})},iT=()=>{const{role:t}=W(),a=Z(t),l=Ne();return le({mutationFn:async({projectId:r,roomId:o,completelyCleaned:d})=>{if(!t||!Lf.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("No API instance available.");return await tT(r,o,d,a)},onSuccess:(r,{projectId:o})=>{l.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})},oT=t=>{const{role:a}=W(),l=Z(a),r=["owner","CTO","staff","worker"];return Le({queryKey:["cleaning-and-sanitation",t],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("No API instance available.");return await sT(t,l)},enabled:!!t,retry:!1,refetchOnMount:!1})},cT=(t,a)=>{const{role:l}=W(),r=Z(l),o=["owner","CTO","staff","worker"];return Le({queryKey:["cleaning-and-sanitation",t,a],queryFn:async()=>{if(!l||!o.includes(l))throw new Error("Not allowed.");if(!r)throw new Error("No API instance available.");return await aT(t,a,r)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},dT=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/cleaning/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},uT=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/cleaning/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},mT=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await dT({formId:r,deadLine:o,projectId:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["cleaning-and-sanitation"]})}})},fT=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await uT({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["cleaning-and-sanitation",o]})}})};function hT(){var j,S,v,N,M,P;const{projectId:t,organizationId:a}=Ce(),l=dt(),{isMobile:r,openMobileSidebar:o}=He();if(!t)return null;const{data:d,isLoading:m,isError:p,refetch:x,error:h}=oT(t),{mutateAsync:g,isPending:b}=mT(),{mutateAsync:w,isPending:k}=fT(),y=async()=>{var L,z;try{await w({projectId:t}),F({description:"Cleaning & Sanitation marked as complete.",title:"Success"}),x()}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||q.message||"Failed to update completion status",variant:"destructive"})}},C=l.pathname.includes("/cleaningroom/");return m?e.jsx(jt,{}):e.jsx("main",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar",children:C?e.jsx(_t,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-broom"}),e.jsx("span",{className:"hidden sm:inline text-2xl",children:" Cleaning & Sanitation Overview"}),e.jsx("span",{className:"inline sm:hidden text-2xl",children:" Cleaning Stage"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(T,{isLoading:k,onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white sm:w-auto w-full",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline-block",children:"Mark as Completed"}),e.jsx("span",{className:"inline sm:hidden",children:"Mark as Completed"})]}),e.jsxs("div",{className:"flex items-center justify-between w-full sm:gap-2",children:[e.jsx(js,{projectId:t,stageNumber:13,stagePath:"cleaning",className:"!w-[48%] sm:!w-auto"}),e.jsx(rs,{stageName:"CleaningAndSanitationModel",projectId:t,organizationId:a,currentAssignedStaff:(d==null?void 0:d.assignedTo)||null,className:"!w-[48%] sm:!w-auto"})]})]})]}),p?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(j=h==null?void 0:h.response)==null?void 0:j.data)==null?void 0:S.message)||(h==null?void 0:h.message)||"Failed to load, please try again"}),e.jsx(T,{isLoading:m,onClick:()=>x(),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-600 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{stageName:"cleaning",completedAt:(v=d==null?void 0:d.timer)==null?void 0:v.completedAt,projectId:t,formId:d==null?void 0:d._id,deadLine:(N=d==null?void 0:d.timer)==null?void 0:N.deadLine,startedAt:(M=d==null?void 0:d.timer)==null?void 0:M.startedAt,refetchStageMutate:x,deadLineMutate:g,isPending:b})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:(P=d==null?void 0:d.rooms)==null?void 0:P.map(L=>{var z;return e.jsx(Rt,{to:`cleaningroom/${L._id}`,className:"border-l-4 border-blue-600 p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer bg-white",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-md font-semibold capitalize text-blue-800 mb-1",children:L.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((z=L.uploads)==null?void 0:z.length)||0," uploads"]}),e.jsx("p",{className:"text-xs text-gray-500",children:L.completelyCleaned?" Completely Cleaned":" Not Cleaned"})]})},L._id)})})]})]})})}function xT(){var _,X,ce,te,O,$;const{projectId:t,roomId:a,organizationId:l}=Ce(),r=Fe(),{data:o,isLoading:d,refetch:m,isError:p,error:x}=cT(t,a),[h,g]=A.useState(null),{mutateAsync:b,isPending:w}=nT(),{mutateAsync:k,isPending:y}=lT(),{mutateAsync:C,isPending:j}=iT(),{mutateAsync:S,isPending:v}=rT(),[N,M]=A.useState((o==null?void 0:o.completelyCleaned)||!1),[P,L]=A.useState((o==null?void 0:o.notes)||""),[z,q]=A.useState(!1),[H,ue]=A.useState(null),U=D=>{var V;(V=D.target.files)!=null&&V.length&&ue(D.target.files)},I=async()=>{var D,V;try{if(!H)throw new Error("select the files before uploading");const J=new FormData;for(let ge=0;ge<H.length;ge++)J.append("files",H[ge]);await b({projectId:t,roomId:a,formData:J}),F({title:"Success",description:"Files uploaded successfully."}),ue(null),m()}catch(J){F({title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||J.message,variant:"destructive"})}},Y=async D=>{var V,J;try{await k({projectId:t,roomId:a,fileId:D}),F({title:"Deleted",description:"File deleted successfully."}),m()}catch(ge){F({title:"Error",description:((J=(V=ge==null?void 0:ge.response)==null?void 0:V.data)==null?void 0:J.message)||ge.message,variant:"destructive"})}},G=async()=>{var D,V;try{if(!P.trim())throw new Error("please enter some notes");await S({projectId:t,roomId:a,notes:P}),F({title:"Notes updated!",description:"Room notes saved."}),q(!1)}catch(J){F({title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||(J==null?void 0:J.message)||"Failed to update",variant:"destructive"})}},re=async()=>{var D,V;try{await C({projectId:t,roomId:a,completelyCleaned:!N}),F({title:"Updated",description:`Marked as ${N?"not cleaned":"completely cleaned"}.`}),M(!N),m()}catch(J){F({title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||J.message,variant:"destructive"})}};return d?e.jsx(jt,{}):(p&&(X=(_=x==null?void 0:x.response)==null?void 0:_.data)!=null&&X.message,e.jsxs("div",{className:"w-full h-full max-h-full overflow-y-auto custom-scrollbar-none sm:custom-scrollbar",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center w-full",children:[e.jsxs("h2",{className:"text-md sm:text-2xl font-semibold mb-4 text-blue-700 flex items-center",children:[e.jsx("i",{className:"fas fa-broom mr-2"})," ",o==null?void 0:o.roomName," - Details"]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(T,{isLoading:j,onClick:re,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm !p-2 lg:p-4 ",children:N?"Mark as Not Cleaned":"Mark as Cleaned"}),e.jsx(T,{variant:"primary",className:"",onClick:()=>r(`/${l}/projectdetails/${t}/cleaning`),children:"Go Back"})]})]}),e.jsxs("div",{className:"mb-2 grid grid-cols-1 md:grid-cols-2 gap-1 items-center place-content-center",children:[e.jsxs(De,{className:"p-2 border-gray-100 border-2",children:[e.jsxs("div",{className:"w-full justify-between flex items-center",children:[e.jsx("h3",{className:"text-md font-semibold  text-blue-700",children:"Notes"}),!z&&e.jsxs(T,{onClick:()=>{L(o==null?void 0:o.notes),q(!0)},className:"bg-blue-600 text-white hover:bg-blue-700",children:["Edit ",e.jsx("i",{className:"fas fa-pencil ml-2 "})]})]}),z?e.jsxs(e.Fragment,{children:[e.jsx(vs,{rows:4,className:"w-full border rounded p-2",value:P,onChange:D=>L(D.target.value),placeholder:"Enter notes here..."}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(T,{onClick:G,disabled:v,className:"bg-blue-600 text-white hover:bg-blue-700",children:v?"Saving...":"Save"}),e.jsx(T,{onClick:()=>{q(!1),L((o==null?void 0:o.notes)??"")},variant:"outline",className:"border-gray-400",children:"Cancel"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative overflow-x-auto overflow-y-auto break-words h-[6rem] max-h-[6rem] leading-5 custom-scrollbar",children:[" ",e.jsx("p",{className:"text-gray-700 mb-2 ",children:(ce=o==null?void 0:o.notes)!=null&&ce.trim()?o==null?void 0:o.notes:"No notes present."})]})})]}),e.jsxs(De,{className:"p-2 h-full border-gray-100 border-2",children:[e.jsx(fe,{className:"block mb-2 font-semibold !text-blue-700",children:"Upload Images or PDFs:"}),e.jsx(de,{type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:U,disabled:w,className:"border-b w-full"}),e.jsx(T,{onClick:I,isLoading:w,className:"mt-3 bg-blue-600 text-white hover:bg-blue-700",children:w?"Uploading...":`Upload ${H?H.length:""} file(s)`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 h-[95%] sm:h-[65%]",children:[e.jsxs(De,{className:"p-2 lg:p-4 max-h-full overflow-y-auto custom-scrollbar border-1 border-[#8485887a]",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"Images"}),((te=o==null?void 0:o.uploads)==null?void 0:te.filter(D=>D.type==="image").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No images uploaded."}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(O=o==null?void 0:o.uploads)==null?void 0:O.filter(D=>D.type==="image").map(D=>e.jsxs("div",{className:"relative group rounded overflow-hidden",children:[e.jsx("img",{src:D.url,alt:D.originalName,className:"w-full h-40 object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-3/4 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(T,{size:"sm",variant:"danger",isLoading:y,onClick:()=>Y(D._id),disabled:y,className:"absolute  top-2 right-2 bg-red-600 text-white border-none rounded-full w-7 h-7 flex items-center justify-center text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("i",{className:"fas fa-trash"})}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>g(D.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:D==null?void 0:D.url,alt:(D==null?void 0:D.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})})]})]},D.url))})]}),e.jsxs(De,{className:"p-4 max-h-full overflow-y-auto border-1 border-[#8485887a] custom-scrollbar",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-700",children:"PDFs"}),(($=o.uploads)==null?void 0:$.filter(D=>D.type==="pdf").length)===0?e.jsx("p",{className:"text-gray-400 text-sm",children:"No PDFs uploaded."}):e.jsx("ul",{className:"space-y-2",children:o==null?void 0:o.uploads.filter(D=>D.type==="pdf").map(D=>e.jsxs("li",{className:"flex items-center justify-between shadow-md p-2 rounded h-full",children:[e.jsx("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline truncate max-w-[50%]",children:D.originalName}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:D==null?void 0:D.url,alt:(D==null?void 0:D.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",isLoading:y,onClick:()=>Y(D._id),disabled:y,variant:"danger",className:"bg-red-600 text-white rounded px-2 py-1 text-xs",children:e.jsx("i",{className:"fas fa-trash-can"})})]})]},D.url))})]})]}),h&&e.jsx("div",{onClick:()=>g(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:D=>D.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>g(null)}),e.jsx("img",{src:h,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]}))}const pT=async(t,a,l)=>{const{data:r}=await l.post(`/projectdelivery/${t}/upload`,a);if(!r.ok)throw new Error(r.message);return r.data},gT=()=>{const{role:t}=W(),a=Z(t),l=["owner","CTO","staff"],r=Ne();return le({mutationFn:async({projectId:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await pT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},bT=async(t,a,l)=>{console.log("fielid",a);const{data:r}=await l.delete(`/projectdelivery/${t}/upload/${a}`);if(!r.ok)throw new Error(r.message);return r.data},yT=()=>{const{role:t}=W(),a=Z(t),l=["owner","CTO","staff"],r=Ne();return le({mutationFn:async({projectId:o,fileId:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await bT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},wT=async(t,a,l)=>{const{data:r}=await l.put(`/projectdelivery/${t}/client-confirmation`,{confirmed:a});if(!r.ok)throw new Error(r.message);return r.data},vT=()=>{const{role:t}=W(),a=Z(t),l=["client"],r=Ne();return le({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await wT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},jT=async(t,a,l)=>{const{data:r}=await l.put(`/projectdelivery/${t}/owner-confirmation`,{confirmed:a});if(!r.ok)throw new Error(r.message);return r.data},NT=()=>{const{role:t}=W(),a=Z(t),l=["owner"],r=Ne();return le({mutationFn:async({projectId:o,confirm:d})=>{if(!t||!l.includes(t))throw new Error("Not allowed.");if(!a)throw new Error("API instance missing");return await jT(o,d,a)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["project-delivery",d]})}})},ST=async(t,a)=>{const{data:l}=await a.get(`/projectdelivery/${t}`);if(!l.ok)throw new Error(l.message);return l.data},CT=t=>{const{role:a}=W(),l=Z(a),r=["owner","CTO","client","staff"];return Le({queryKey:["project-delivery",t],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("API instance missing");return await ST(t,l)},enabled:!!t&&!!a,retry:!1,refetchOnMount:!1})},kT=async({formId:t,deadLine:a,projectId:l,api:r})=>{const{data:o}=await r.put(`/projectdelivery/deadline/${l}/${t}`,{deadLine:a});if(!o.ok)throw new Error(o.message);return o.data},ET=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/projectdelivery/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},AT=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({formId:r,deadLine:o,projectId:d})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await kT({formId:r,projectId:d,deadLine:o,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["project-delivery"]})}})},OT=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await ET({projectId:r,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["project-delivery",o]})}})};function RT(){var re,_,X,ce,te;const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He(),[o,d]=A.useState(null),{data:m,isLoading:p,error:x,refetch:h}=CT(t),{mutateAsync:g,isPending:b}=gT(),{mutateAsync:w,isPending:k,variables:y}=yT(),{mutateAsync:C}=vT(),{mutateAsync:j}=NT(),{mutateAsync:S,isPending:v}=AT(),{mutateAsync:N,isPending:M}=OT(),[P,L]=A.useState([]),z=A.useRef(null),q=async()=>{var O,$;try{await N({projectId:t}),F({description:"Project Delivery marked as complete.",title:"Success"}),h()}catch(D){F({title:"Error",description:(($=(O=D==null?void 0:D.response)==null?void 0:O.data)==null?void 0:$.message)||D.message||"Failed to update status",variant:"destructive"})}},H=O=>{O.target.files&&L(Array.from(O.target.files))},ue=async()=>{var $,D;if(!P.length){F({title:"Error",description:"Please select at least one file.",variant:"destructive"});return}const O=new FormData;P.forEach(V=>{O.append("files",V)});try{await g({projectId:t,formData:O}),F({title:"Success",description:"Files uploaded successfully."}),h(),L([]),z.current&&(z.current.value="")}catch(V){F({title:"Error",description:((D=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:D.message)||V.message||"Upload failed",variant:"destructive"})}},U=async O=>{var $,D;try{await w({projectId:t,fileId:O}),F({title:"Success",description:"File deleted."}),h()}catch(V){F({title:"Error",description:((D=($=V==null?void 0:V.response)==null?void 0:$.data)==null?void 0:D.message)||V.message||"Deletion failed",variant:"destructive"})}},I=async O=>{var D,V;const $=O==="client"?C:j;try{await $({projectId:t,confirm:!(m!=null&&m[`${O}Confirmation`])}),F({title:"Success",description:`${O==="client"?"Client":"Owner"} confirmation updated.`}),h()}catch(J){F({title:"Error",description:((V=(D=J==null?void 0:J.response)==null?void 0:D.data)==null?void 0:V.message)||J.message||"Failed to update confirmation",variant:"destructive"})}};let Y=((m==null?void 0:m.uploads)||[]).filter(O=>O.type==="pdf"),G=((m==null?void 0:m.uploads)||[]).filter(O=>O.type==="image");return p?e.jsx(jt,{}):e.jsxs("div",{className:"w-full sm:min-h-full sm:overflow-y-auto space-y-6 py-1 sm:py-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start lg:items-center gap-4pb-4",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-handshake mr-2"}),"Project Delivery"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(T,{isLoading:M,onClick:q,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark as Complete"]}),e.jsx(rs,{projectId:t,organizationId:a,stageName:"ProjectDeliveryModel",currentAssignedStaff:(m==null?void 0:m.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),x?e.jsxs("div",{className:"max-w-xl mx-auto bg-red-50 border border-red-200 rounded-lg shadow p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-bold mb-2",children:" Error Loading Data"}),e.jsx("p",{className:"text-sm text-red-500 mb-4",children:((_=(re=x==null?void 0:x.response)==null?void 0:re.data)==null?void 0:_.message)||(x==null?void 0:x.message)||"Something went wrong while fetching project delivery details."}),e.jsx(T,{onClick:()=>h(),isLoading:p,className:"bg-red-600 hover:bg-red-700 text-white",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 border-l-[4px] border-blue-600 shadow w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:(X=m==null?void 0:m.timer)==null?void 0:X.completedAt,stageName:"projectdelivery",projectId:t,formId:m==null?void 0:m._id,deadLine:(ce=m==null?void 0:m.timer)==null?void 0:ce.deadLine,startedAt:(te=m==null?void 0:m.timer)==null?void 0:te.startedAt,refetchStageMutate:h,deadLineMutate:S,isPending:v})]}),e.jsxs(De,{className:"p-6 border-2 border-blue-200 shadow w-full flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-blue-800 mb-3",children:[e.jsx("i",{className:"fas fa-paperclip mr-2 text-blue-600"}),"Upload Files"]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[e.jsx("input",{multiple:!0,ref:z,type:"file",onChange:H,accept:".pdf,image/*",className:"w-full sm:w-[300px] border border-blue-300 px-3 py-2 rounded text-sm"}),e.jsx(T,{onClick:ue,isLoading:b,className:"bg-blue-600 text-white hover:bg-blue-700",children:"Upload Files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"min-h-[220px] sm:max-h-[150px] sm:min-h-[150px]  lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-pdf"}),"PDF Files"]}),Y.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No PDF files uploaded."})}):e.jsx("ul",{className:"space-y-2",children:Y.map(O=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:O.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:O==null?void 0:O.url,alt:(O==null?void 0:O.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",isLoading:(y==null?void 0:y.fileId)===O._id&&k,onClick:()=>U(O._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},O._id))})]}),e.jsxs("div",{className:" min-h-[220px] sm:max-h-[150px]  sm:min-h-[150px] lg:min-h-[220px] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-image"}),"Image Files"]}),G.length===0?e.jsx("div",{className:"h-[85%] shadow rounded bg-blue-50 flex items-center justify-center",children:e.jsx("p",{className:"text-sm font-medium text-gray-500 px-4 text-center",children:"No images uploaded."})}):e.jsx("ul",{className:"space-y-2",children:G.map(O=>e.jsxs("li",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[e.jsx("span",{className:"truncate text-sm",children:O.originalName}),e.jsxs("div",{className:"flex gap-3 items-center text-blue-600",children:[e.jsx(T,{size:"sm",variant:"primary",onClick:()=>d(O==null?void 0:O.url),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx(T,{size:"sm",variant:"primary",onClick:()=>Vt({src:O==null?void 0:O.url,alt:(O==null?void 0:O.originalName)||"file.pdf"}),children:e.jsx("i",{className:"fa-solid fa-download"})}),e.jsx(T,{size:"sm",isLoading:(y==null?void 0:y.fileId)===O._id&&k,onClick:()=>U(O._id),className:"text-red-600",children:e.jsx("i",{className:"fas fa-trash"})})]})]},O._id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-4",children:[e.jsxs(T,{onClick:()=>I("client"),className:`w-full ${m!=null&&m.clientConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.clientConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.clientConfirmation?"Client Confirmed":"Client not confirmed"]}),e.jsxs(T,{onClick:()=>I("owner"),className:`w-full ${m!=null&&m.ownerConfirmation?"bg-blue-600":"bg-red-600"} text-white`,children:[e.jsx("i",{className:`fas ${m!=null&&m.ownerConfirmation?"fa-check":"fa-xmark"} mr-2`})," ",m!=null&&m.ownerConfirmation?"Owner Confirmed":"Owner not confirmed"]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded px-4 py-3 flex items-center gap-3 text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-user-check text-blue-600 text-base"}),e.jsxs("p",{className:"font-medium",children:["Client Confirmed At:"," ",e.jsx("span",{className:"font-semibold text-blue-900",children:m!=null&&m.clientAcceptedAt?new Date(m.clientAcceptedAt).toLocaleDateString():"Not Confirmed Yet"})]})]})]}),o&&e.jsx("div",{onClick:()=>d(null),className:"fixed inset-0 z-50 bg-black/70 bg-opacity-60 flex items-center justify-center",children:e.jsxs("div",{onClick:O=>O.stopPropagation(),className:"relative bg-white rounded py-8 px-4 max-w-[90vw] max-h-[80vh] shadow-lg",children:[e.jsx("i",{className:"fas fa-times absolute top-2 right-3 text-xl text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>d(null)}),e.jsx("img",{src:o,alt:"Full View",className:"max-h-[70vh] w-auto object-contain rounded"})]})})]})]})}const TT=async(t,a)=>(await a.get(`/paymentconfirmation/getschedule/${t}`)).data.data,PT=async({projectId:t,dueDate:a,api:l})=>(await l.put(`/paymentconfirmation/dueDate/${t}`,{dueDate:a})).data.data,MT=async({projectId:t,status:a,api:l})=>(await l.put(`/paymentconfirmation/clientapprovalstatus/${t}`,{status:a})).data.data,FT=async({projectId:t,notes:a,api:l})=>(await l.put(`/paymentconfirmation/clientnotes/${t}`,{notes:a})).data.data,LT=async({projectId:t,status:a,api:l})=>(await l.put(`/paymentconfirmation/mdapprovalstatus/${t}`,{status:a})).data.data,DT=async({projectId:t,notes:a,api:l})=>(await l.put(`/paymentconfirmation/mdnotes/${t}`,{notes:a})).data.data,_T=t=>{const a=["owner","staff","CTO","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["payment-schedule",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to fetch payment schedule");if(!r)throw new Error("API instance missing");return await TT(t,r)},enabled:!!t&&!!l,retry:!1,refetchOnMount:!1})},qT=()=>{const t=["CTO","owner","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,dueDate:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await PT({projectId:o,dueDate:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},zT=()=>{const t=["client"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await MT({projectId:o,status:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},UT=()=>{const t=["client"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await FT({projectId:o,notes:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},IT=()=>{const t=["owner"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,status:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await LT({projectId:o,status:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},$T=()=>{const t=["owner"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,notes:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await DT({projectId:o,notes:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-schedule",d]})}})},W0=["pending","approved","rejected"],BT=()=>{var H,ue;const{projectId:t,organizationId:a}=Ce(),l=Fe(),{data:r,isLoading:o,error:d,refetch:m}=_T(t),p=zT(),x=UT(),h=IT(),g=$T(),[b,w]=A.useState(""),[k,y]=A.useState(""),[C,j]=A.useState(r==null?void 0:r.dueDate),[S,v]=A.useState(!1),N=qT(),M=async()=>{var U,I;try{await N.mutateAsync({projectId:t,dueDate:C}),m(),F({title:"Success",description:"Due date updated successfully."}),v(!1)}catch(Y){F({title:"Error",description:((I=(U=Y==null?void 0:Y.response)==null?void 0:U.data)==null?void 0:I.message)||Y.message||"Failed to update due date.",variant:"destructive"})}},P=U=>{p.mutate({projectId:t,status:U},{onSuccess:()=>F({title:"Success",description:"Client approval status updated."}),onError:I=>{var Y,G;return F({title:"Error",description:((G=(Y=I==null?void 0:I.response)==null?void 0:Y.data)==null?void 0:G.message)||I.message||"Failed to update client status",variant:"destructive"})}})},L=U=>{h.mutate({projectId:t,status:U},{onSuccess:()=>F({title:"Success",description:"MD approval status updated."}),onError:I=>{var Y,G;return F({title:"Error",description:((G=(Y=I==null?void 0:I.response)==null?void 0:Y.data)==null?void 0:G.message)||I.message||"Failed to update MD status",variant:"destructive"})}})},z=()=>{x.mutate({projectId:t,notes:b},{onSuccess:()=>F({title:"Success",description:"Client note updated."}),onError:U=>{var I,Y;return F({title:"Error",description:((Y=(I=U==null?void 0:U.response)==null?void 0:I.data)==null?void 0:Y.message)||U.message||"Failed to update notes",variant:"destructive"})}})},q=()=>{g.mutate({projectId:t,notes:k},{onSuccess:()=>F({title:"Success",description:"MD note updated."}),onError:U=>{var I,Y;return F({title:"Error",description:((Y=(I=U==null?void 0:U.response)==null?void 0:I.data)==null?void 0:Y.message)||U.message||"Failed to update notes",variant:"destructive"})}})};return o?e.jsx("p",{children:e.jsx(jt,{})}):d?e.jsxs("div",{className:"max-w-xl mx-auto mt-12 p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:" Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((ue=(H=d==null?void 0:d.response)==null?void 0:H.data)==null?void 0:ue.message)||(d==null?void 0:d.message)||"Failed to load, please try again"}),e.jsx(T,{onClick:()=>m(),isLoading:o,className:"bg-red-600 text-white hover:bg-red-700",children:"Retry"})]}):e.jsxs("div",{className:"w-full max-w-full max-h-full overflow-y-auto custom-scrollbar mx-auto space-y-6 px-4 py-6",children:[e.jsxs("div",{className:"w-full justify-between flex",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-regular fa-calendar-check text-blue-600"}),e.jsx("span",{className:"hidden sm:inline",children:"  Step 2: Payment Schedule Approval"}),e.jsx("span",{className:"inline sm:hidden",children:"  Payment Schedule"})]}),e.jsx(T,{variant:"primary",onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]}),e.jsx(De,{className:"p-4 border border-gray-200 shadow-sm rounded mb-6",children:e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar-days"})," Payment Due Date"]}),S?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("input",{type:"date",value:C,onChange:U=>j(U.target.value),className:"border rounded px-3 py-1 text-sm"}),e.jsxs(T,{size:"sm",onClick:M,isLoading:N.isPending,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-check mr-2"}),"Save"]}),e.jsxs(T,{size:"sm",onClick:()=>{var U;j((U=r==null?void 0:r.dueDate)==null?void 0:U.slice(0,10)),v(!1)},variant:"outline",className:"px-3 py-1",children:[e.jsx("i",{className:"fa-solid fa-xmark mr-1"}),"Cancel"]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-md font-medium text-gray-800",children:r!=null&&r.dueDate?ui(r==null?void 0:r.dueDate):"Not set"}),e.jsxs(T,{size:"sm",onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1",children:[e.jsx("i",{className:"fa-regular fa-pen-to-square mr-2"}),"Edit"]})]})]})}),e.jsxs(De,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user"})," Client Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:W0.map(U=>{var I;return e.jsx(T,{isLoading:p.isPending&&((I=p.variables)==null?void 0:I.status)===U,size:"sm",onClick:()=>P(U),className:`text-white text-xs ${r.clientApprovalStatus===U?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:U.toUpperCase()},U)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:r.clientApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:r.clientNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add client notes...",value:b,onChange:U=>w(U.target.value),rows:3}),e.jsxs(T,{onClick:z,isLoading:x.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save Client Notes"]})]})]}),e.jsxs(De,{className:"p-5 space-y-4 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex sm:justify-between sm:items-center sm:flex-row flex-col sm:mb-0  mb-1 items-start",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user-tie"})," MD Approval"]}),e.jsx("div",{className:"flex items-center gap-2",children:W0.map(U=>{var I;return e.jsx(T,{isLoading:h.isPending&&((I=h.variables)==null?void 0:I.status)===U,size:"sm",onClick:()=>L(U),className:`text-white text-xs ${r.mdApprovalStatus===U?"bg-blue-800":"bg-blue-600 hover:bg-blue-700"}`,children:U.toUpperCase()},U)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Status:"}),e.jsx("div",{className:"rounded bg-gray-100 px-4 py-2 text-sm text-blue-900 border",children:r.mdApprovalStatus.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-4 mb-1",children:"Existing Notes:"}),e.jsx("div",{className:"bg-gray-50 p-3 text-sm rounded border text-gray-800",children:r.mdNotes||"No notes added yet"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full mt-3 p-2 border rounded-md text-sm",placeholder:"Add MD notes...",value:k,onChange:U=>y(U.target.value),rows:3}),e.jsxs(T,{onClick:q,isLoading:g.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white mt-2",children:[e.jsx("i",{className:"fa-regular fa-floppy-disk mr-2"}),"Save MD Notes"]})]})]})]})},aw=t=>new Promise(a=>{const l=document.createElement("script");l.src=t,l.onload=()=>{a(!0)},l.onerror=()=>{a(!1)},document.body.appendChild(l)}),HT=async({projectId:t,clientId:a,api:l})=>(await l.post(`/paymentconfirmation/createorder/${t}`,{clientId:a})).data.data,QT=async({projectId:t,razorpay_order_id:a,razorpay_payment_id:l,razorpay_signature:r,api:o})=>(await o.post(`/paymentconfirmation/verifypayment/${t}`,{razorpay_order_id:a,razorpay_payment_id:l,razorpay_signature:r})).data.data,GT=async({projectId:t,api:a})=>{const l=await a.get(`/paymentconfirmation/gettransaction/${t}`);return console.log(l,"drjklsjklfjsldfjasdjfsdj"),l.data.data},KT=()=>{const t=["client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,clientId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await HT({projectId:r,clientId:o,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["payment-confirmation",o]})}})},VT=()=>{const t=["client"],{role:a}=W(),l=Z(a);return le({mutationFn:async({projectId:r,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await QT({projectId:r,razorpay_order_id:o,razorpay_payment_id:d,razorpay_signature:m,api:l})},onSuccess:(r,{projectId:o})=>{Ee.invalidateQueries({queryKey:["payment-confirmation",o]})}})},YT=t=>{const a=["client","staff","owner","CTO"],{role:l}=W(),r=Z(l);return Le({queryKey:["payment-confirmation",t,"transaction"],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await GT({projectId:t,api:r})},enabled:!!t&&!!r&&!!l,retry:!1,refetchOnMount:!1})},WT=()=>{var j,S;const{projectId:t,organizationId:a}=Ce(),l=Fe(),{data:r,refetch:o,isError:d,error:m,isLoading:p}=YT(t),x=r==null?void 0:r.paymentTransaction,h=r==null?void 0:r.totalAmount,{mutateAsync:g,isPending:b}=KT(),{mutateAsync:w,isPending:k}=VT(),y=ps(v=>v.clientProfileStore);if(p)return e.jsx(jt,{});if(d||!r)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((S=(j=m==null?void 0:m.response)==null?void 0:j.data)==null?void 0:S.message)||(m==null?void 0:m.message)||"Failed to load cost estimation data"}),e.jsx(T,{onClick:()=>o(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const C=async()=>{try{const v=await g({projectId:t,clientId:y.clientId});if(!await aw("https://checkout.razorpay.com/v1/checkout.js")){F({title:"Error",description:"Failed to load Razorpay SDK.",variant:"destructive"});return}const M={key:"rzp_test_Lc5DxL3uS4I6F9",amount:v.amount,currency:"INR",name:"Vertical Living",description:"Project Payment",order_id:v.orderId,handler:async function(L){await w({projectId:t,razorpay_order_id:L.razorpay_order_id,razorpay_payment_id:L.razorpay_payment_id,razorpay_signature:L.razorpay_signature}),F({title:"Success",description:"Payment successful!"})},prefill:{name:y.clientName||"",email:y.email||"",contact:y.phoneNo||""},theme:{color:"#0050b3"}};new window.Razorpay(M).open()}catch(v){F({title:"Error",description:v.message||"Payment failed. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 p-2 sm:p-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4",children:[e.jsx("div",{className:"flex items-center gap-3 justify-between",children:e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-money-check-dollar"}),e.jsx("span",{className:"hidden sm:inline",children:"Payment Transaction"}),e.jsx("span",{className:"sm:hidden",children:"Payment"})]})}),e.jsxs(T,{onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),"Go Back"]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-lg border border-gray-200 p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-blue-700 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600"}),"Secure Payment Gateway"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"Securely make your payment to proceed with the project."})]}),e.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 sm:p-5 bg-blue-50 text-center shadow-sm",children:[e.jsx("p",{className:"text-gray-700 text-xs sm:text-sm mb-1",children:"Amount Payable"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:[" ",(h==null?void 0:h.toLocaleString("en-IN"))||"0"]})]}),(x==null?void 0:x.status)&&e.jsxs("div",{className:"bg-gray-100 p-3 sm:p-4 rounded-lg border border-gray-300 space-y-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${x.status==="successful"?"fa-circle-check text-green-600":"fa-circle-xmark text-red-600"}`}),e.jsx("span",{className:"font-medium",children:"Status:"})]}),e.jsx("span",{className:`font-semibold ${x.status==="successful"?"text-green-700":"text-red-700"}`,children:x.status.toUpperCase()})]}),x.status==="successful"&&e.jsxs("p",{className:"text-green-700 break-words",children:[e.jsx("span",{className:"font-medium",children:"Paid At:"})," ",new Date(x.paidAt).toLocaleString()]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Order ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:x.gatewayOrderId})]}),x.gatewayPaymentId&&e.jsxs("p",{className:"text-gray-600 break-words",children:[e.jsx("span",{className:"font-medium",children:"Payment ID:"})," ",e.jsx("span",{className:"text-gray-800 text-xs",children:x.gatewayPaymentId})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:C,disabled:b||k||(x==null?void 0:x.status)==="successful",className:`w-full py-3 sm:py-4 rounded-md text-white text-base sm:text-lg font-medium transition ${b||k?"bg-blue-400 cursor-not-allowed":(x==null?void 0:x.status)==="successful"?"bg-green-600 cursor-default":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800"}`,children:(x==null?void 0:x.status)==="successful"?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-check"}),"Payment Completed"]}):b||k?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Processing Payment..."}),e.jsx("span",{className:"sm:hidden",children:"Processing..."})]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Pay Now"]})})}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center justify-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-green-600"}),"Secured by Razorpay"]})})]})})]})},XT=async(t,a)=>(await a.get(`/paymentconfirmation/getpaymentconfirmation/${t}`)).data.data,ZT=async(t,a)=>(await a.put(`/paymentconfirmation/toggleconsent/${t}`)).data.data,JT=async(t,a)=>(await a.post(`/paymentconfirmation/generatepayementconsentlink/${t}`)).data.data,e3=async({projectId:t,token:a,api:l})=>(await l.post(`/paymentconfirmation/acceptconsent/${t}/${a}`)).data.data,nw=t=>{const a=["CTO","owner","staff","client"],{role:l}=W(),r=Z(l);return Le({enabled:!!t&&!!l,queryKey:["payment-confirmation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed");if(!r)throw new Error("API instance missing");return await XT(t,r)},retry:!1,refetchOnMount:!1})},t3=()=>{const t=["CTO","owner","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await ZT(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},s3=()=>{const t=["CTO","owner","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await JT(o,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},a3=()=>{const t=["CTO","owner","client"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,token:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await e3({projectId:o,token:d,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},n3=async({formId:t,projectId:a,deadLine:l,api:r})=>{const{data:o}=await r.put(`/paymentconfirmation/deadline/${a}/${t}`,{deadLine:l});if(!o.ok)throw new Error(o.message);return o.data},l3=async({projectId:t,api:a})=>{const{data:l}=await a.put(`/paymentconfirmation/completionstatus/${t}`);if(!l.ok)throw new Error(l.message);return l.data},r3=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({formId:o,projectId:d,deadLine:m})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await n3({formId:o,projectId:d,deadLine:m,api:l})},onSuccess:()=>{r.invalidateQueries({queryKey:["payment-confirmation"]})}})},i3=()=>{const t=["owner","staff","CTO"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o})=>{if(!a||!t.includes(a))throw new Error("not allowed to make this api call");if(!l)throw new Error("API instance missing");return await l3({projectId:o,api:l})},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["payment-confirmation",d]})}})},o3=[{title:"Consent Form",description:"Review and accept client consent agreements.",icon:"",path:"consent"},{title:"Schedule Approval",description:"Manage milestone approvals from client & MD.",icon:"",path:"schedule"},{title:"Payment Transaction",description:"Track actual payment gateway transactions.",icon:"",path:"transaction"}],c3=()=>{var N,M;const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He(),o=dt(),d=Fe(),{data:m,isLoading:p,isError:x,refetch:h}=nw(t),{mutateAsync:g,isPending:b}=i3(),{mutateAsync:w,isPending:k}=r3();if(o.pathname.includes("/consent")||o.pathname.includes("/schedule")||o.pathname.includes("/transaction"))return e.jsx(_t,{});const y=async()=>{var P,L;try{await g({projectId:t}),F({title:"Success",description:"Completion status updated successfully"}),h()}catch(z){F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||z.message||"Failed to update completion status",variant:"destructive"})}};if(p)return e.jsx(jt,{});const{assignedTo:C,timer:j,totalAmount:S,_id:v}=m||{};return e.jsxs("div",{className:"container mx-auto p-2 max-w-full max-h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fa-solid fa-sack-dollar mr-2"})," Payment Confirmation"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[80%] lg:w-[50%] flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:e.jsxs(T,{isLoading:b,onClick:y,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-initial min-w-max",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Mark Complete"]})}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 justify-end",children:[e.jsx(js,{stageNumber:7,stagePath:"paymentconfirmation",projectId:t,className:"flex-1 sm:flex-initial min-w-max"}),e.jsx(rs,{stageName:"PaymentConfirmationModel",projectId:t,organizationId:a,currentAssignedStaff:C||null,className:"flex-1 sm:flex-initial min-w-max"})]})]})]}),x&&e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((M=(N=x==null?void 0:x.response)==null?void 0:N.data)==null?void 0:M.message)||(x==null?void 0:x.message)||"Failed to load payment confirmation data"}),e.jsx(T,{onClick:()=>h(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]}),!x&&e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:"p-4 mb-6 w-full shadow border-l-4 border-blue-600 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(ls,{completedAt:j==null?void 0:j.completedAt,stageName:"paymentconfirmation",formId:v,projectId:t,deadLine:j==null?void 0:j.deadLine,startedAt:j==null?void 0:j.startedAt,refetchStageMutate:h,deadLineMutate:w,isPending:k})]}),e.jsxs(De,{className:"p-4 mb-6 bg-blue-50 border-l-4 border-blue-600 shadow-md",children:[e.jsxs("div",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),"Total Payment Amount"]}),e.jsxs("p",{className:"text-3xl text-blue-700 mt-2 font-bold",children:[" ",(S==null?void 0:S.toLocaleString())||0]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o3.map(P=>e.jsx("div",{onClick:()=>d(P.path),className:"cursor-pointer",children:e.jsxs(De,{className:"hover:shadow-xl border-l-6 border-blue-600 transition bg-blue-100 p-4 sm:p-6 !rounded-xl h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl",children:P.icon}),e.jsx("h3",{className:"text-xl mt-3 font-bold text-blue-800",children:P.title}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:P.description})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsxs("span",{className:"inline-block bg-blue-600 text-white text-xs px-3 py-1 rounded",children:["Go to ",P.title]})})]})},P.path))})]})]})},d3=()=>{var M,P;const{projectId:t,organizationId:a}=Ce(),l=Fe(),{data:r,isLoading:o,isError:d,refetch:m,error:p}=nw(t),x=t3(),h=s3(),g=L=>{navigator.clipboard.writeText(L),F({title:"Copied",description:"Link copied to clipboard."})},b=L=>{const z=`Please review and approve the payment consent:

${L}`,q=encodeURIComponent(z);window.open(`https://wa.me/?text=${q}`,"_blank")},w=async()=>{var L,z;try{await x.mutateAsync({projectId:t}),F({title:"Success",description:"Consent requirement updated."}),m()}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||q.message,variant:"destructive"})}},k=async()=>{var L,z;try{await h.mutateAsync({projectId:t}),F({title:"Success",description:"Consent link generated."}),m()}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||q.message,variant:"destructive"})}};if(o)return e.jsx(jt,{});if(d||!r)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((P=(M=p==null?void 0:p.response)==null?void 0:M.data)==null?void 0:P.message)||(p==null?void 0:p.message)||"Failed to load cost estimation data"}),e.jsx(T,{onClick:()=>m(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const{isConsentRequired:y,paymentClientConsent:{content:C,agreedAt:j,isAgreed:S,agreementToken:v,link:N}}=r;return e.jsxs("div",{className:"space-y-6 w-full max-w-full max-h-full sm:overflow-y-auto mx-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl  lg:text-3xl font-bold text-blue-700 flex items-center",children:[e.jsx("i",{className:"hidden sm:block fa-solid fa-handshake-angle mr-[3px] sm:mr-2"})," Client Consent"]}),e.jsxs("div",{className:"space-x-1",children:[e.jsx(T,{isLoading:x.isPending,size:"sm",onClick:w,className:`text-sm text-white px-2 py-2 rounded ${y?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Make Consent Optional"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Optional"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Require Client Consent"}),e.jsx("span",{className:"inline sm:hidden",children:"Make Mandatory"})]})}),e.jsx(T,{variant:"primary",onClick:()=>l(`/${a}/projectdetails/${t}/paymentconfirmation`),children:"Back"})]})]}),e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-circle-info"}),"Consent Status"]})}),e.jsx("div",{className:"p-4",children:j?e.jsxs("div",{className:"bg-green-50 p-4 rounded text-green-800 text-sm border border-green-200 shadow-sm",children:[e.jsx("span",{className:"mr-2",children:"Client Status:"}),e.jsx("strong",{className:"mr-2",children:S?e.jsxs(e.Fragment,{children:["Agreed ",e.jsx("i",{className:"fa-solid fa-circle-check text-green-600 mr-2"})]}):S===null?"Not Agreed Yet":e.jsxs(e.Fragment,{children:["Not Agreed ",e.jsx("i",{className:"fa-solid fa-circle-xmark text-red-600 mr-2"})]})}),e.jsx("br",{}),e.jsxs("span",{children:["Agreed on: ",e.jsx("strong",{children:new Date(j).toLocaleDateString()})]})]}):v?e.jsxs("div",{className:"bg-yellow-50 p-4 rounded text-yellow-800 border border-yellow-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half mr-2"}),"Consent link was generated, waiting for client to approve."]}):e.jsxs("div",{className:"bg-red-50 p-4 rounded text-red-700 border border-red-200 text-sm",children:[e.jsx("i",{className:"fa-solid fa-times-circle mr-2"}),"Client has ",e.jsx("strong",{children:"Not yet agreed"}),".",e.jsx("br",{}),"No consent link generated."]})})]}),y&&!j&&e.jsxs("div",{className:"rounded-lg shadow border border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-5 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700 text-lg",children:[e.jsx("i",{className:"fa-solid fa-link"}),"Consent Link"]})}),e.jsx("div",{className:"p-4 space-y-3",children:!v&&!N?e.jsxs(T,{isLoading:h.isPending,onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded",children:[e.jsx("i",{className:"fa-solid fa-wand-magic-sparkles mr-2"}),"Generate Consent Link"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-100",children:[e.jsx("span",{className:"text-sm truncate",children:N}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(T,{variant:"outline",className:"bg-blue-600 text-white hover:bg-blue-700 px-3 py-1 text-sm",onClick:()=>g(N),children:[e.jsx("i",{className:"fa-regular fa-copy mr-1"}),"Copy"]}),e.jsxs(T,{variant:"outline",className:"bg-green-600 text-white hover:bg-green-700 px-3 py-1 text-sm",onClick:()=>b(N),children:[e.jsx("i",{className:"fa-brands fa-whatsapp mr-1"}),"Share"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Share this link with the client to collect consent."})]})})]}),e.jsxs("div",{className:`rounded-lg shadow border border-gray-200 max-h-70 overflow-y-auto custom-scrollbar ${j?"!max-h-[480px]":""} `,children:[e.jsxs("div",{className:"bg-gray-100 px-5 py-3 text-gray-700 font-medium text-lg flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-contract"}),"Consent Form Content"]}),e.jsx("div",{className:"prose prose-sm sm:prose base p-5",style:{fontFamily:"Segoe UI, sans-serif"},dangerouslySetInnerHTML:{__html:C||"<p>No content available.</p>"}})]})]})},u3=()=>{var y,C;const{projectId:t,token:a}=Ce(),[l,r]=A.useState(""),[o,d]=A.useState(!1),[m,p]=A.useState(!0),{mutateAsync:x,isPending:h,isError:g,error:b}=a3();if(g)return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center mb-6",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:" Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((C=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:C.message)||(b==null?void 0:b.message)||"Failed to load cost estimation data"}),e.jsx(T,{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2",children:"Retry"})]});const w=async()=>{var j,S,v,N;try{const{data:M}=await Ge.get(`https://houseofram.in/api/paymentconfirmation/getpaymentconfirmation/${t}`);r(((S=(j=M==null?void 0:M.data)==null?void 0:j.paymentClientConsent)==null?void 0:S.content)||"")}catch(M){F({title:"Error",description:((N=(v=M==null?void 0:M.response)==null?void 0:v.data)==null?void 0:N.message)||"Unable to fetch consent form.",variant:"destructive"})}finally{p(!1)}},k=async()=>{var j,S;if(!(!t||!a))try{await x({projectId:t,token:a}),F({title:"Thank you!",description:"Your consent has been submitted successfully."})}catch(v){F({title:"Error",description:((S=(j=v==null?void 0:v.response)==null?void 0:j.data)==null?void 0:S.message)||"Submission failed.",variant:"destructive"})}};return A.useEffect(()=>{w()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col items-center bg-gray-50 pb-10 ",children:[e.jsx("header",{className:"w-full max-w-full mx-auto border-b border-gray-200 bg-white px-4 py-4 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-start border-black md:justify-start text-center md:text-left",children:[e.jsx("img",{src:yt.COMPANY_LOGO,alt:"Company Logo",className:"h-14 w-14 rounded-md object-cover   border-gray-300"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-extrabold text-blue-700 leading-tight",children:yt.COMPANY_NAME}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-500 font-medium",children:"Secure Payment Consent Form"})]})]})}),e.jsxs("div",{className:"w-full bg-white p-4 max-w-3xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-white max-h-[500px] rounded-md border-2 border-[#4e51543a] custom-scrollbar  overflow-y-auto ",children:m?e.jsx("p",{className:"text-gray-600",children:"Loading form content..."}):l?e.jsx("div",{className:"prose prose-sm sm:prose max-w-none",dangerouslySetInnerHTML:{__html:l}}):e.jsx("p",{className:"text-red-500 text-sm",children:"Content not found."})}),e.jsxs("div",{className:"px-5 py-4 bg-white flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("label",{className:"flex items-start gap-2 text-sm text-gray-700 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",onChange:j=>d(j.target.checked),checked:o,className:"mt-1 w-4 h-4 accent-blue-600"}),"I confirm that I have read, understood, and accept the above terms."]}),e.jsxs(T,{disabled:!o,isLoading:h,onClick:k,className:`px-6 py-2 text-white ${o?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Submit Consent"]})]})]}),e.jsxs("footer",{className:"mt-10 w-full text-center text-sm text-gray-500 border-t border-black/70 px-4",children:[e.jsxs("div",{className:"mb-1 font-medium text-gray-600",children:[" ",new Date().getFullYear()," ",yt.COMPANY_NAME]}),e.jsx("div",{className:"text-xs",children:"All rights reserved. For queries, contact our team."})]})]})},m3=async({newPlanType:t,api:a})=>(await a.post("/subscriptionpayment/choosesubscriptionmode",{newPlanType:t})).data.data,f3=async({razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:l,api:r})=>(await r.post("/subscriptionpayment/verify",{razorpay_order_id:t,razorpay_payment_id:a,razorpay_signature:l})).data.data,h3=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async({newPlanType:r})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await m3({newPlanType:r,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["organization-subscription"]})}})},x3=()=>{const t=["owner"],{role:a}=W(),l=Z(a);return le({mutationFn:async({razorpay_order_id:r,razorpay_payment_id:o,razorpay_signature:d})=>{if(!a||!t.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API instance missing");return await f3({razorpay_order_id:r,razorpay_payment_id:o,razorpay_signature:d,api:l})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["organization-subscription"]})}})},lw=({openMobileSidebar:t,isMobile:a})=>{const l=dt(),[r,o]=A.useState(null),d=l.pathname.split("/").includes("organizations"),{mutateAsync:m,isPending:p}=h3(),{mutateAsync:x,isPending:h}=x3(),g=async b=>{var w,k;try{o(b);const y=await m({newPlanType:b});if(y!=null&&y.orderId){if(!await aw("https://checkout.razorpay.com/v1/checkout.js")){F({title:"Error",description:"Razorpay failed to load",variant:"destructive"});return}const j={key:"rzp_test_Lc5DxL3uS4I6F9",amount:y.amount,currency:y.currency,name:"Vertical Living",description:"Subscription Payment",order_id:y.orderId,handler:async function(v){await x({razorpay_order_id:v.razorpay_order_id,razorpay_payment_id:v.razorpay_payment_id,razorpay_signature:v.razorpay_signature}),F({title:"Success",description:"Subscription payment verified."})},theme:{color:"#0A71F2"}};new window.Razorpay(j).open()}else F({title:"Plan Changed",description:"You have switched your plan successfully."})}catch(y){F({title:"Error",description:((k=(w=y==null?void 0:y.response)==null?void 0:w.data)==null?void 0:k.message)||y.message||"Failed to switch plan",variant:"destructive"})}finally{o(null)}};return e.jsxs("div",{className:"min-h-full bg-gray-100  flex flex-col items-center",children:[e.jsx(e.Fragment,{children:d&&a?e.jsxs("div",{className:"w-full flex items-center justify-center mb-2 py-2 px-2 bg-white",children:[e.jsx("button",{onClick:t,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"w-full",children:e.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold text-gray-800",children:"Upgrade Plan"})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-4xl w-full text-center py-5",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-[#2f303a] mb-2",children:d?"Upgrade your Plan":"Choose Plan"}),e.jsx("p",{className:"text-md text-gray-500",children:"Choose a subscription plan to match your needs"})]})})}),e.jsx("div",{className:" px-4 py-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Ob.map(b=>e.jsxs("div",{className:`group border-t-[6px] ${b.color} rounded-xl bg-white shadow-md p-6 flex flex-col justify-between transition hover:shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-2xl font-bold ${b.planNameColor}`,children:b.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Billed every 30 days"})]}),e.jsxs("div",{className:"text-center my-5",children:[e.jsx("h3",{className:`${b.price?"text-3xl":"text-xl"} font-extrabold text-gray-800`,children:b.price?` ${b.price}`:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-400",children:"/ month"})]}),e.jsx("ul",{className:"text-sm text-gray-700 mt-2 mb-5 space-y-2",children:b.features.length>0?b.features.map((w,k)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("i",{className:`fa-solid ${w.includes("")?"fa-check text-green-600 mt-1":"fa-xmark text-red-400 mt-1"}`}),e.jsx("span",{children:w.replace("","").replace("","")})]},k)):e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Features Coming Soon"})}),b.price?e.jsx(T,{isLoading:h||p,onClick:()=>g(b.key),disabled:r===b.key||h,className:`w-full py-2 mt-auto text-white rounded-md font-medium ${r===b.key||h?"bg-gray-400 !cursor-not-allowed":b.btnColor} transition`,children:r===b.key||h?"Processing...":"Choose Plan"}):e.jsx(T,{disabled:!0,className:"w-full py-2 mt-auto text-white rounded-md font-medium bg-gray-400 hover:!bg-gray-400 !cursor-not-allowed",children:"Coming Soon"})]},b.key))})]})},X0={ADMIN:"/login",CTO:"/login/cto",STAFF:"/login/staff",WORKER:"/login/worker",CLIENT:"/login/client"};function p3(){const[t,a]=A.useState(!1),[l,r]=A.useState(window.innerWidth<470),o=()=>{a(!0)};return A.useEffect(()=>{const d=()=>{r(window.innerWidth<470)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),e.jsxs("div",{className:"flex w-full h-full",children:[l?e.jsx(ki,{labels:ic,path:X0,isOpen:t,onClose:()=>a(!1)}):e.jsx(Ci,{path:X0,labels:ic,icons:Ab}),e.jsx("main",{className:"flex-1 relative",children:e.jsx(_t,{context:{isMobile:l,openMobileSidebar:o}})})]})}const g3=async(t,a)=>{var r;const l=await a.get(`/adminwall/${t}`);return(r=l==null?void 0:l.data)==null?void 0:r.data},b3=async(t,a,l)=>(await l.get(`/adminwall/${t}/step/${a}`)).data,y3=async(t,a,l,r)=>(await r.post(`/adminwall/${t}/step/${a}/correction`,l,{headers:{"Content-Type":"multipart/form-data"}})).data,w3=async(t,a,l,r)=>(await r.patch(`/adminwall/${t}/step/${a}/approve`,l)).data,v3=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO"];return Le({queryKey:["adminSOP",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return g3(t,l)}})},j3=(t,a)=>{const{role:l}=W(),r=Z(l),o=["owner","staff","CTO"];return Le({queryKey:["adminStep",t,a],queryFn:()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return b3(t,a,r)}})},N3=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({projectId:r,stepNumber:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return y3(r,o,d,a)}})},S3=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({projectId:r,stepId:o,payload:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return w3(r,o,d,a)}})};function C3(){const{projectId:t}=Ce(),{pathname:a}=dt(),l=Fe(),{isMobile:r,openMobileSidebar:o}=He(),{data:d,isLoading:m,error:p}=v3(t),x=a.endsWith("/adminwall");return m?e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500",children:"Loading..."}):p?e.jsx("div",{className:"flex justify-center items-center h-40 text-red-500",children:p==null?void 0:p.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50 overflow-y-auto custom-scrollbar",children:x?e.jsxs("div",{className:"flex-1 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl text-left sm:text-center font-bold mb-2 text-gray-800",children:[r&&e.jsx("button",{onClick:o,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Admin Wall Painting Steps"]}),e.jsx("p",{className:"text-gray-600 text-base mb-2 text-center hidden sm:block",children:"Select a step to manage its details."})]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Tb.map(h=>{var b;const g=(b=d==null?void 0:d.steps)==null?void 0:b.find(w=>(w==null?void 0:w.stepNumber)===h.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs(Rt,{to:`step/${g==null?void 0:g._id}/${h.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:h.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",h.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},h.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4  bg-white border-b border-gray-200 shadow z-10",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl text-blue-600 font-semibold",children:"Admin Side"}),e.jsx(T,{onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(_t,{context:{isMobile:r,openMobileSidebar:o}})})]})})}function k3(){var L,z;const{projectId:t,stepId:a,stepNumber:l}=Ce(),[r,o]=A.useState(""),[d,m]=A.useState(null),[p,x]=A.useState(!1),[h,g]=A.useState(null),{mutate:b}=S3(),{mutate:w}=N3(),{data:k,isLoading:y}=j3(t,a),C=Tb.find(q=>q.stepNumber===Number(l)),j=()=>{x(!1)},S=()=>{x(!1)},v=(q,H)=>{g({url:q,alt:H})},N=()=>{g(null)},M=()=>{if((!d||(d==null?void 0:d.length)===0)&&!r){alert("Please select files or write something in notes");return}const q=new FormData;if(d&&d.length)for(let H=0;H<d.length;H++)q.append("files",d[H]);q.append("adminNote",r),w({projectId:t,stepNumber:l,formData:q})};if(y)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!C)return e.jsx("div",{className:"min-h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const P=({src:q,alt:H})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>v(q,H),children:[p&&e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gray-200 animate-pulse rounded-lg flex items-center justify-center z-10",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:q,alt:H,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400 cursor-pointer",onLoadStart:()=>x(!0),onLoad:j,onError:S}),e.jsx("button",{onClick:ue=>{ue.stopPropagation(),Vt({src:q,alt:H})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[h&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors z-10",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:h.url,alt:h.alt,className:"max-w-full max-h-full object-contain rounded-lg"})]}),e.jsx("div",{className:"absolute inset-0 -z-10",onClick:N})]}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${l})`," "," ",C.label]})}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:px-6 sm:py-3 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:C.rules.map((q,H)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:""}),e.jsx("span",{children:q})]},H))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Worker latest Uploads"]}),(z=(L=k==null?void 0:k.step)==null?void 0:L.workerInitialUploads)!=null&&z.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:k.step.workerInitialUploads.map((q,H)=>e.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-3 shadow-sm",children:q.type==="image"?e.jsx(P,{src:q==null?void 0:q.url,alt:(q==null?void 0:q.originalName)||`Upload ${H+1}`}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 sm:h-40 md:h-48 bg-blue-50 rounded-lg border-2 border-dashed border-blue-300",children:[e.jsx("div",{className:"text-blue-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm text-center px-2 font-medium",children:q.originalName})]})},H))}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No initial uploads found."})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Review Actions"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:()=>b({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Approve Step"]}),e.jsxs("button",{onClick:()=>b({projectId:t,stepId:a,payload:{status:"approved"}}),className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Reject Step"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Add Correction"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Add Correction Note"}),e.jsx("textarea",{rows:4,value:r,onChange:q=>o(q.target.value),placeholder:"Provide detailed feedback and correction instructions...",className:"w-full p-3 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Correction Images:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:q=>m(q.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:M,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Submit Correction"})]})]})]})]})]})})]})})]})}const E3=async(t,a)=>{var r;return(r=(await a.get(`/workerwall/${t}`)).data)==null?void 0:r.data},A3=async(t,a,l)=>{const r=await l.get(`/workerwall/${t}/step/${a}`);return console.log("res form getsworkerdetialapi",r),r.data},O3=async(t,a,l,r)=>(await r.post(`/workerwall/${t}/step/${a}/initial`,l,{headers:{"Content-Type":"multipart/form-data"}})).data,R3=async(t,a,l,r,o)=>(await o.post(`/workerwall/${t}/step/${a}/correction/${l}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,T3=t=>{const{role:a}=W(),l=Z(a),r=["worker","staff","owner","CTO"];return Le({queryKey:["workerSOP",t],queryFn:()=>{if(!a||!r.includes(a))throw new Error("Unauthorized");if(!l)throw new Error("API not found");return E3(t,l)}})},P3=(t,a)=>{const{role:l}=W(),r=Z(l),o=["worker","staff","owner","CTO"];return Le({queryKey:["workerStep",t,a],queryFn:()=>{if(!l||!o.includes(l))throw new Error("Unauthorized");if(!r)throw new Error("API not found");return A3(t,a,r)}})},M3=()=>{const{role:t}=W(),a=Z(t),l=["worker","staff"];return le({mutationFn:async({projectId:r,stepNumber:o,formData:d})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return O3(r,o,d,a)}})},F3=()=>{const{role:t}=W(),a=Z(t),l=["worker","staff"];return le({mutationFn:async({projectId:r,stepNumber:o,correctionRound:d,formData:m})=>{if(!t||!l.includes(t))throw new Error("Unauthorized");if(!a)throw new Error("API not found");return R3(r,o,d,m,a)}})};function L3(){const{projectId:t}=Ce(),{pathname:a}=dt(),l=Fe(),{isMobile:r,openMobileSidebar:o}=He(),{data:d,isLoading:m,error:p}=T3(t),x=a.endsWith("/workerwall");return m?e.jsx("p",{className:"text-gray-600",children:"Loading..."}):p?e.jsx("p",{className:"text-red-500",children:p==null?void 0:p.message}):e.jsx("div",{className:"flex flex-col w-full h-full bg-gray-50",children:x?e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:[e.jsxs("h2",{className:"text-xl md:text-3xl text-left font-bold mb-6 sm:text-center text-gray-800",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Wall Painting Steps"]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:Rb.map(h=>{var b;const g=(b=d==null?void 0:d.steps)==null?void 0:b.find(w=>(w==null?void 0:w.stepNumber)===h.stepNumber);return e.jsx("li",{className:"group relative bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs(Rt,{to:`step/${g==null?void 0:g._id}/${h.stepNumber}`,className:"flex flex-col justify-between h-full p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:h.label}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Step #",h.stepNumber]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-full group-hover:bg-blue-700 transition",children:"View Step"})})]})},h.stepNumber)})})]}):e.jsxs("section",{className:"flex flex-col w-full h-full",children:[e.jsxs("header",{className:"flex items-center justify-between px-4 py-4 bg-white border-b border-gray-200 shadow z-10",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-blue-600 flex items-center",children:[r&&e.jsx("button",{onClick:o,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Worker Side"]}),e.jsx(T,{onClick:()=>l(-1),children:"Go Back"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-4 custom-scrollbar",children:e.jsx(_t,{})})]})})}function D3(){var z,q,H,ue;const{projectId:t,stepId:a,stepNumber:l}=Ce(),[r,o]=A.useState(null),[d,m]=A.useState(null),[p,x]=A.useState(!1),[h,g]=A.useState(null),{data:b,isLoading:w}=P3(t,a),{mutate:k}=M3(),{mutate:y}=F3(),C=Rb.find(U=>U.stepNumber===Number(l)),j=()=>{x(!1)},S=()=>{x(!1)},v=(U,I)=>{g({url:U,alt:I})},N=()=>{g(null)};if(w)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg font-medium",children:"Loading step details..."})]})});if(!C)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Step Not Found"}),e.jsx("p",{className:"text-blue-600",children:"The requested step could not be found."})]})});const M=()=>{if(!r||r.length===0){alert("Please select files for initial upload.");return}const U=new FormData;for(let I=0;I<r.length;I++)U.append("files",r[I]);k({projectId:t,stepNumber:l,formData:U})},P=U=>{if(!d||d.length===0){alert("Please select files for correction upload.");return}const I=new FormData;for(let Y=0;Y<d.length;Y++)I.append("files",d[Y]);y({projectId:t,stepNumber:l,correctionRound:U,formData:I})},L=({src:U,alt:I})=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>v(U,I),children:[p&&e.jsx("div",{className:" pointer-events-none absolute z-20 inset-0 bg-gray-900 animate-pulse rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:U,alt:I,loading:"lazy",className:"w-full h-32 sm:h-40 md:h-48 object-cover rounded-lg border-2 border-blue-200 shadow-sm hover:shadow-lg transition-all duration-300 hover:border-blue-400",onLoadStart:()=>x(!0),onLoad:j,onError:S}),e.jsx("button",{onClick:Y=>{Y.stopPropagation(),Vt({src:U,alt:I})},className:"absolute cursor-pointer bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700",title:"Download",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M8 12l4 4m0 0l4-4m-4 4V4"})})})]});return e.jsxs("div",{className:"min-h-[80%] bg-gray-50 rounded-xl",children:[h&&e.jsx("div",{className:"fixed inset-0 bg-black/70 bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:N,children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:N,className:"absolute -top-10 right-0 text-white hover:text-blue-300 transition-colors",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("img",{src:h.url||"/placeholder.svg",alt:h.alt,className:"max-w-full max-h-full object-contain rounded-lg",onClick:U=>U.stopPropagation()})]})}),e.jsx("div",{className:"w-full h-full ",children:e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-white px-2 py-3 sm:px-6 sm:py-4",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 mb-2",children:[" ",`${l})`," "," ",C.label]}),e.jsxs("p",{className:"text-blue-600 hidden",children:["Step ",l]})]}),e.jsx("div",{className:"sm:max-h-[calc(100vh-150px)] max-h-[calc(100vh-85px)]  overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-6 space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Step Requirements"]}),e.jsx("ul",{className:"space-y-2",children:C.rules.map((U,I)=>e.jsxs("li",{className:"flex items-start text-blue-700",children:[e.jsx("span",{className:"text-blue-500 mr-3 mt-0.5",children:""}),e.jsx("span",{children:U})]},I))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Your Initial Uploads"]}),(q=(z=b==null?void 0:b.data)==null?void 0:z.initialUploads)!=null&&q.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:b.data.initialUploads.map((U,I)=>e.jsx(e.Fragment,{children:e.jsx(L,{src:(U==null?void 0:U.url)||"/placeholder.svg",alt:`Initial Upload ${I+1}`},I)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No initial uploads yet."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Initial Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:U=>o(U.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:M,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Files"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"Correction Rounds"]}),(ue=(H=b==null?void 0:b.data)==null?void 0:H.correctionRounds)!=null&&ue.length?e.jsx("div",{className:"space-y-6",children:b.data.correctionRounds.map(U=>{var I,Y;return e.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-2 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-blue-800",children:["Correction Round ",U==null?void 0:U.roundNumber]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-2",children:[e.jsx("i",{className:"fas fa-circle-info mr-1 sm:mr-2 "}),"Admin Note:"]}),e.jsxs("p",{className:"text-blue-700",children:[U.adminNote," "]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Admin Reference Images:"}),U!=null&&U.adminUploads.length?e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:(I=U==null?void 0:U.adminUploads)==null?void 0:I.map((G,re)=>e.jsx(e.Fragment,{children:e.jsx(L,{src:G.url||"/placeholder.svg",alt:`Admin Upload ${re+1}`},re)}))})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No Admin uploads"})]})]}),((Y=U.workerCorrectedUploads)==null?void 0:Y.length)>0?e.jsxs("div",{className:"mb-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Your Correction Uploads:"}),e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 w-max",children:U.workerCorrectedUploads.map((G,re)=>e.jsx(e.Fragment,{children:e.jsx(L,{src:G.url||"/placeholder.svg",alt:`Worker Correction ${re+1}`},re)}))})})]}):e.jsxs("div",{className:"text-center py-8 border-t border-gray-200 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No Worker correction uploads"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Upload Correction Files:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"file",multiple:!0,onChange:G=>m(G.target.files),className:"flex-1 text-sm text-blue-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 file:cursor-pointer border border-blue-200 rounded-lg"}),e.jsx("button",{onClick:()=>P(U==null?void 0:U.roundNumber),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",children:"Upload Corrections"})]})]})]},U.roundNumber)})}):e.jsxs("div",{className:"text-center py-8 text-blue-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"font-medium",children:"No corrections requested yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Your work is on track!"})]})]})]})})]})})]})}const _3=()=>{const{openMobileSidebar:t,isMobile:a}=He();return e.jsx(lw,{openMobileSidebar:t,isMobile:a})},q3=async({api:t,profileData:a})=>{try{const{data:l}=await t.put("/profile/update-profile",a);if(l.ok)return l;throw new Error((l==null?void 0:l.message)||"Profile update failed.")}catch(l){throw console.error("Profile update error:",l),l}},z3=()=>{const{role:t}=W(),a=Z(t),l=["owner","client","staff","CTO","worker"];return le({mutationFn:async({name:r,email:o,phoneNo:d})=>{if(!t)throw new Error("Not authorized.");if(!l.includes(t))throw new Error("Role not allowed.");if(!a)throw new Error("API not found.");return await q3({api:a,profileData:{name:r,email:o,phoneNo:d}})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["user-profile"]})}})},Z0={owner:{label:"Owner",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},staff:{label:"Staff",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},CTO:{label:"CTO",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},client:{label:"Client",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""},worker:{label:"Worker",color:"bg-blue-100 text-blue-800 border-blue-200",icon:""}};function U3(){const{openMobileSidebar:t,isMobile:a}=He(),{role:l,_id:r}=ps(v=>v.authStore),o=ws(),d=l==="owner"?ps(v=>v.userProfileStore):l==="staff"?ps(v=>v.staffProfileStore):l==="CTO"?ps(v=>v.CTOProfileStore):l==="client"?ps(v=>v.clientProfileStore):l==="worker"?ps(v=>v.workerProfileStore):null,m=()=>d?"userName"in d?d.userName:"staffName"in d?d.staffName:"CTOName"in d?d.CTOName:"clientName"in d?d.clientName:"workerName"in d?d.workerName:"-":"-",[p,x]=A.useState({name:m(),email:(d==null?void 0:d.email)||"",phoneNo:(d==null?void 0:d.phoneNo)||""}),{mutateAsync:h,isPending:g}=z3(),[b,w]=A.useState(!1),k=v=>{x(N=>({...N,[v.target.name]:v.target.value}))},y=async()=>{var v,N;try{const M=await h({name:p.name,email:p.email,phoneNo:p.phoneNo});F({title:"Success",description:"Completion status updated successfully"});const P={email:p.email,phoneNo:p.phoneNo,role:l,isauthenticated:!0};switch(l){case"owner":o(gc({...P,userId:M.data._id,userName:p.name}));break;case"staff":o($c({...P,staffId:M.data._id,staffName:p.name}));break;case"CTO":o(Hc({...P,CTOId:M.data._id,CTOName:p.name}));break;case"client":o(Qc({...P,clientId:M.data._id,clientName:p.name}));break;case"worker":o(Bc({...P,workerId:M.data._id,workerName:p.name}));break;default:throw new Error("Unknown role")}w(!1)}catch(M){F({title:"Error",description:((N=(v=M==null?void 0:M.response)==null?void 0:v.data)==null?void 0:N.message)||M.message||"Failed to update profile data",variant:"destructive"})}},C=()=>{x({name:m(),email:"",phoneNo:""}),w(!1)},j=Z0[l]||Z0.worker,S=m().charAt(0).toUpperCase();return e.jsxs("div",{className:"max-h-screen overflow-y-auto bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0 flex-1",children:[a&&e.jsx("button",{onClick:t,className:"p-2 rounded-lg border border-gray-700 hover:bg-gray-300 transition-colors lg:hidden flex-shrink-0",title:"Open Menu",children:e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-bars !text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-gray-100 rounded-lg flex-shrink-0",children:e.jsx("i",{className:"w-5 h-5 sm:w-6 sm:h-6 fas fa-user text-gray-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 truncate",children:"My Profile"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Manage your personal information"})]})]})]}),!b&&e.jsxs(T,{onClick:()=>w(!0),className:"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs sm:text-sm font-medium flex-shrink-0",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pen"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Profile"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]})]})})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 px-4 sm:px-6 py-6 sm:py-8 text-white",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:flex-row",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-2xl sm:text-3xl font-bold text-white border-2 sm:border-3 border-white/30 shadow-lg flex-shrink-0",children:S}),e.jsxs("div",{className:"text-center md:text-left flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2 sm:mb-3 break-words",children:m()}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 sm:gap-3 mb-2 flex-wrap",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:j.icon}),e.jsx("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-semibold bg-white/90 text-gray-800 border border-white/30",children:j.label})]}),e.jsxs("p",{className:"text-white/80 text-xs sm:text-sm break-all",children:["ID: ",r]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[b&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-pencil"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Edit Mode"})]}),e.jsx("p",{className:"text-blue-700 text-xs sm:text-sm mt-1",children:"Make your changes and click save when you're done."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-user inline mr-2"}),"Full Name"]}),e.jsx("input",{type:"text",name:"name",value:p.name,onChange:k,disabled:!b,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${b?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-envelope inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:p.email,onChange:k,disabled:!b,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${b?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your email address"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-phone inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phoneNo",value:p.phoneNo,onChange:k,disabled:!b,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 border rounded-lg transition-all duration-200 text-sm sm:text-base ${b?"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white":"border-gray-200 bg-gray-50 text-gray-700"} disabled:cursor-not-allowed`,placeholder:"Enter your phone number"})]})]}),b&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200",children:[e.jsxs(T,{isLoading:g,onClick:y,disabled:g,className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm sm:text-base order-1 sm:order-none",children:[e.jsx("i",{className:"w-3 h-3 sm:w-4 sm:h-4 fas fa-save"}),"Save Changes"]}),e.jsx("button",{onClick:C,disabled:g,className:"px-4 sm:px-6 py-2.5 sm:py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium text-sm sm:text-base order-2 sm:order-none",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx("i",{className:"w-4 h-4 sm:w-5 sm:h-5 fas fa-shield text-gray-600"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Account Summary"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"User ID:"}),e.jsx("span",{className:"text-gray-900 font-mono text-xs sm:text-sm bg-gray-100 px-2 py-1 rounded break-all",children:r||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 items-start sm:items-center py-2",children:[e.jsx("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"Role:"}),e.jsxs("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ${j.color} w-fit`,children:[j.icon," ",j.label]})]})]})]})]})})]})}const I3=async({api:t,id:a,section:l,notes:r})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/notes/${l}`,{notes:r});if(o.ok)return o;throw new Error(o.message||"Failed to update notes")},$3=async({api:t,id:a,section:l,isRequired:r})=>{const{data:o}=await t.patch(`/prerequireties/update/${a}/boolean/${l}`,{isRequired:r});if(o.ok)return o;throw new Error(o.message||"Failed to update boolean")},B3=async({api:t,projectId:a})=>{const{data:l}=await t.get(`/prerequireties/getalldetails/${a}`);if(l.ok)return l;throw new Error(l.message||"Failed to get all PreRequireties")},H3=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({id:r,section:o,notes:d})=>{if(!t)throw new Error("Not Authorized");if(!l.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await I3({api:a,id:r,section:o,notes:d})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["preRequireties"]})}})},Q3=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({id:r,section:o,isRequired:d})=>{if(!t)throw new Error("Not Authorized");if(!l.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API not found");return await $3({api:a,id:r,section:o,isRequired:d})},onSuccess:()=>{Ee.invalidateQueries({queryKey:["preRequireties"]})}})},G3=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO"];return Le({queryKey:["preRequireties",t],queryFn:async()=>{if(!a)throw new Error("Not Authorized");if(!r.includes(a))throw new Error("Not allowed");if(!l)throw new Error("API not found");return await B3({api:l,projectId:t})},retry:!1,refetchOnMount:!1})},K3=({title:t,section:a,isRequired:l,notes:r,formId:o,onUpdate:d})=>{const[m,p]=A.useState(!1),[x,h]=A.useState(r),[g,b]=A.useState(!1),w=Q3(),k=H3(),y=async v=>{try{await w.mutateAsync({id:o,section:a,isRequired:v}),F({title:"Success",description:`${t} requirement updated successfully`}),d()}catch(N){F({title:"Error",description:N instanceof Error?N.message:"Failed to update requirement",variant:"destructive"})}},C=async()=>{if(x!==r){b(!0);try{await k.mutateAsync({id:o,section:a,notes:x}),F({title:"Success",description:`${t} notes updated successfully`}),d()}catch(v){F({title:"Error",description:v instanceof Error?v.message:"Failed to update notes",variant:"destructive"}),h(r)}finally{b(!1)}}},j=()=>{C()},S=v=>{v.key==="Enter"&&v.ctrlKey&&C()};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100",onClick:()=>p(!m),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`fas ${m?"fa-chevron-down":"fa-chevron-right"} text-gray-400`}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),l?e.jsxs("span",{className:"flex items-center text-green-600 text-sm",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),"Required"]}):e.jsxs("span",{className:"flex items-center text-gray-500 text-sm",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-1"}),"Not Required"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:v=>{v.stopPropagation(),y(v.target.checked)},disabled:w.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-200"} ${w.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${l?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),w.isPending&&e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})]})]})}),m&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:v=>y(v.target.checked),disabled:w.isPending,className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-200"} ${w.isPending?"opacity-50":""}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${l?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"This work is required for the project"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes & Additional Details"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{placeholder:`Add notes about ${t.toLowerCase()}...`,value:x,onChange:v=>h(v.target.value),onBlur:j,onKeyDown:S,className:"w-full min-h-[100px] p-3 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:g}),g&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Press Ctrl+Enter to save or click outside the text area"})]})]})})]})},V3=()=>{var g,b,w,k,y;const{projectId:t}=Ce(),{isMobile:a,openMobileSidebar:l}=He(),{data:r,isLoading:o,error:d,refetch:m}=G3(t),p=[{key:"modularWork",title:"Modular Work",description:"Prefabricated components and modular construction",_id:(g=r==null?void 0:r.data)==null?void 0:g._id},{key:"electricalWork",title:"Electrical Work",description:"Wiring, fixtures, and electrical installations",_id:(b=r==null?void 0:r.data)==null?void 0:b._id},{key:"plumbingWork",title:"Plumbing Work",dzescription:"Water supply, drainage, and plumbing fixtures",_id:(w=r==null?void 0:r.data)==null?void 0:w._id},{key:"civilWork",title:"Civil Work",description:"Structural work, foundations, and civil engineering",_id:(k=r==null?void 0:r.data)==null?void 0:k._id},{key:"decorationWork",title:"Decoration Work",description:"Interior design, painting, and finishing touches",_id:(y=r==null?void 0:r.data)==null?void 0:y._id}],x=()=>{m()};if(o)return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading project prerequisites..."})]})});if(d)return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:d instanceof Error?d.message:"Failed to load prerequisites"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Try Again"})})]});if(!(r!=null&&r.data))return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-yellow-600 mr-2"}),e.jsx("p",{className:"text-yellow-800",children:"No prerequisites data found for this project. Please ensure the project exists and try again."})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh"})})]});const h=r.data;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"max-h-full overflow-y-auto mx-auto px-4 py-4 custom-scrollbar",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center hidden sm:block space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-700",children:"Project Prerequisites"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Configure the required work types for your project. These prerequisites must be completed before proceeding to the 14-step process."})]}),e.jsx("header",{className:"block sm:hidden space-y-2",children:e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),"Project Prerequisites"]})}),e.jsx("div",{className:"space-y-4",children:p.map(C=>{const j=h[C.key];return e.jsx(K3,{title:C.title,section:C.key,isRequired:(j==null?void 0:j.isRequired)||!1,notes:(j==null?void 0:j.notes)||"",formId:C._id,onUpdate:x},C.key)})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prerequisites Summary"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:p.map(C=>{const j=h[C.key],S=(j==null?void 0:j.isRequired)||!1;return e.jsxs("div",{className:"flex items-center space-x-2",children:[S?e.jsx("i",{className:"fas fa-check-circle text-green-600"}):e.jsx("i",{className:"fas fa-exclamation-circle text-gray-400"}),e.jsx("span",{className:`text-sm ${S?"text-green-600 font-medium":"text-gray-500"}`,children:C.title})]},C.key)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(T,{variant:"ghost",onClick:()=>m(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refresh Data"}),e.jsx(T,{onClick:()=>{F({title:"Success",description:"Prerequisites configured successfully. You can now proceed to the 14-step process."})},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Continue to Next Steps"})]})]})})})},Y3=async(t,a,l,r,o)=>{const d=new FormData;Object.keys(l).forEach(p=>{const x=l[p];x!==void 0&&(Array.isArray(x)?x.forEach(h=>d.append(p,h)):d.append(p,x))}),r.forEach(p=>{d.append("images",p)});const{data:m}=await o.post(`/modularunit/create/${t}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});if(!m.ok)throw new Error(m.message);return m.data},W3=async(t,a,l,r,o)=>{const d=new FormData;Object.keys(l).forEach(p=>{const x=l[p];x!==void 0&&(Array.isArray(x)?x.forEach(h=>d.append(p,h)):d.append(p,x))}),r.forEach(p=>{d.append("images",p)}),console.log("formvalues form api",d);const{data:m}=await o.put(`/modularunit/update/${t}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});if(!m.ok)throw new Error(m.message);return m.data},X3=async(t,a,l,r)=>{console.log(a);const{data:o}=await r.delete(`/modularunit/delete/${t}/${a}/${l}`);if(!o.ok)throw new Error(o.message);return o.data},Z3=async(t,a,l,r={},o="")=>{const d=new URLSearchParams;Object.entries(r).forEach(([h,g])=>{g.length>0&&d.append(h,g.join(","))}),o&&d.append("searchQuery",o);const m=d.toString(),p=`/modularunit/getunits/${a}/${t}${m?"?"+m:""}`,{data:x}=await l.get(p);if(!x.ok)throw new Error(x.message);return x.data},J3=async(t,a)=>{const{data:l}=await a.get(`/modularunit/getallunits/${t}`);if(!l.ok)throw new Error(l.message);return l.data},eP=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({organizationId:r,unitType:o,formValues:d,files:m})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return console.log("formvalues form hooks",d),await Y3(r,o,d,m,a)},onSuccess:(r,{unitType:o})=>{Ee.invalidateQueries({queryKey:["modularUnits",o]})}})},tP=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({unitType:r,unitId:o,formValues:d,files:m})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await W3(r,o,d,m,a)},onSuccess:(r,{unitType:o})=>{Ee.invalidateQueries({queryKey:["modularUnits",o]})}})},sP=()=>{const{role:t}=W(),a=Z(t),l=["owner","staff","CTO"];return le({mutationFn:async({organizationId:r,unitType:o,unitId:d})=>{if(!t)throw new Error("Not Authorized");if(!t||!l.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await X3(r,o,d,a)},onSuccess:(r,{unitType:o})=>{Ee.invalidateQueries({queryKey:["modularUnits",o]})}})},aP=(t,a,l={},r="")=>{const{role:o}=W(),d=Z(o),m=["owner","staff","CTO","client"];return Le({queryKey:["modularUnits",t,a,l,r],queryFn:async()=>{if(!o)throw new Error("Not Authorized");if(!m.includes(o))throw new Error("Not allowed to make this API call");if(!d)throw new Error("API instance not found for role");return await Z3(t,a,d,l,r)},retry:!1,refetchOnMount:!1})},nP=t=>{const{role:a}=W(),l=Z(a),r=["owner","staff","CTO","client"];return Le({queryKey:["mixedUnits",t],queryFn:async()=>{if(!a)throw new Error("Role missing");if(!r.includes(a))throw new Error("Not allowed to make this API call");if(!l)throw new Error("API instance not found for role");return await J3(t,l)},retry:!1,refetchOnMount:!1})},kc={showcase:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing","Floor-to-Ceiling","Corner Showcase","Floating Showcase"]},length:{label:"Length",type:"select",options:["600 mm","900 mm","1200 mm","1500 mm","1800 mm","2100+ mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm","600 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF","HDHMR","Particle Board","Engineered Wood"]},frontMaterial:{label:"Front Material",type:"select",options:["Laminate","Acrylic","PU","Membrane","Glass","Aluminium + Glass"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured","Wood Grain","Veneer","Lacquered"]},storageType:{label:"Storage Type",type:"select",options:["Open Display","Closed Shutters","Mixed Storage"]},shutterType:{label:"Shutter Type",type:"select",options:["Glass","Wooden","Aluminium-Framed Glass","Mirror Finish"]},glassVisibility:{label:"Glass Visibility",type:"select",options:["Clear","Frosted","Tinted"]},lighting:{label:"Lighting",type:"select",options:["Spotlights","Strip Lights","Warm Backlight","No Lighting"]},installationType:{label:"Installation Type",type:"select",options:["Floor Mounted","Wall Mounted","Hybrid"]},usagePurpose:{label:"Usage Purpose",type:"select",options:["Living Room","Dining Area","Hallway","Commercial Display","Puja Showcase"]},addOns:{label:"Add-ons",type:"checkbox",options:["Mirror Back Panel","Decorative Handles","Soft-Close Hinges","Lockable Sections"]},compartments:{label:"Compartments",type:"select",options:["1 Door","2 Doors","3+ Doors","14 Drawers","15+ Shelves"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["5,00010,000","10,00025,000","25,00050,000","50,000+"]},price:{label:"Price",type:"number",required:!0}},falseCeiling:{name:{label:"Name",type:"text",required:!0},ceilingType:{label:"Ceiling Type",type:"select",options:["Pop","Gypsum","PVC","Wooden","Metal"]},lightingType:{label:"Lighting Type",type:"select",options:["Spotlight","LED Strip","Cove","Pendant"]},roomType:{label:"Room Type",type:"select",options:["Living Room","Bedroom","Hallway","Commercial"]},materialType:{label:"Material Type",type:"select",options:["Gypsum","POP","PVC","Wood"]},designStyle:{label:"Design Style",type:"select",options:["Modern","Traditional","Minimalistic"]},colorTheme:{label:"Color Theme",type:"select",options:["White","Beige","Custom"]},levels:{label:"Levels",type:"select",options:["Single","Double","Multi"]},edgeProfile:{label:"Edge Profile",type:"select",options:["Straight","Curved"]},fixtureIntegration:{label:"Fixture Integration",type:"select",options:["Fan","Light","AC Vent"]},panelType:{label:"Panel Type",type:"select",options:["Flat","Recessed"]},shapeGeometry:{label:"Shape & Geometry",type:"select",options:["Rectangular","Circular","Custom"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},installationComplexity:{label:"Installation Complexity",type:"select",options:["Low","Medium","High"]},budgetRange:{label:"Budget Range",type:"select",options:["5,00010,000","10,00025,000","25,000+"]},price:{label:"Price",type:"number",required:!0}},shoeRack:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Open","Closed","Bench Style"]},length:{label:"Length",type:"select",options:["600 mm","900 mm","1200 mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm"]},height:{label:"Height",type:"select",options:["600 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF","Particle Board"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Laminate","Acrylic"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Pull"]},shoeCapacity:{label:"Shoe Capacity",type:"select",options:["6 Pairs","10 Pairs","15 Pairs+"]},ventilation:{label:"Ventilation",type:"select",options:["Louvered","Mesh"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},usagePurpose:{label:"Usage Purpose",type:"select",options:["Home","Office"]},addOns:{label:"Add-ons",type:"checkbox",options:["Soft-Close Hinges","Locks"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["5,00010,000","10,00025,000","25,000+"]},price:{label:"Price",type:"number",required:!0}},wardrobe:{name:{label:"Name",type:"text",required:!0},wardrobeType:{label:"Wardrobe Type",type:"select",options:["Sliding","Hinged","Walk-in"]},length:{label:"Length",type:"select",options:["1200 mm","1800 mm","2400 mm+"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["2100 mm","2400 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Laminate","Acrylic"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Handle-less"]},internalAccessories:{label:"Internal Accessories",type:"checkbox",options:["Pull-out Basket","Tie Rack"]},mirrorProvision:{label:"Mirror Provision",type:"select",options:["Yes","No"]},lighting:{label:"Lighting",type:"select",options:["LED Strip","Spotlight"]},lockType:{label:"Lock Type",type:"select",options:["Central Lock","Individual Lock"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000"]},price:{label:"Price",type:"number",required:!0}},tv:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing","Panel Unit"]},length:{label:"Length",type:"select",options:["1200 mm","1500 mm","1800 mm"]},breadth:{label:"Breadth",type:"select",options:["300 mm","450 mm"]},height:{label:"Height",type:"select",options:["1200 mm","1500 mm"]},panelMaterial:{label:"Panel Material",type:"select",options:["Plywood","MDF","Particle Board"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed","Mixed"]},shutterType:{label:"Shutter Type",type:"select",options:["Glass","Wooden","Aluminium-Framed"]},openShelves:{label:"Open Shelves",type:"select",options:["Yes","No"]},lighting:{label:"Lighting",type:"select",options:["Spotlights","Strip Lights","None"]},addOns:{label:"Add-ons",type:"checkbox",options:["Cable Manager","Sound Bar Mount"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000"]},price:{label:"Price",type:"number",required:!0}},BedCot:{name:{label:"Name",type:"text",required:!0},bedType:{label:"Bed Type",type:"select",options:["Single","Double","Queen","King"]},length:{label:"Length",type:"select",options:["1800 mm","2000 mm"]},breadth:{label:"Breadth",type:"select",options:["900 mm","1200 mm","1500 mm"]},height:{label:"Height",type:"select",options:["450 mm","600 mm"]},frameMaterial:{label:"Frame Material",type:"select",options:["Wood","Metal","Engineered Wood"]},headboardMaterial:{label:"Headboard Material",type:"select",options:["Plywood","Upholstered","MDF"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy","Textured"]},storageType:{label:"Storage Type",type:"select",options:["Box Storage","Drawer Storage","No Storage"]},addOns:{label:"Add-ons",type:"checkbox",options:["Hydraulic Lift","LED Headboard"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Knock Down","Pre-assembled"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000","50,000+"]},price:{label:"Price",type:"number",required:!0}},kitchenCabinet:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Base","Wall","Tall Unit"]},internalLayout:{label:"Internal Layout",type:"select",options:["Shelf","Drawer","Pull-out"]},compartments:{label:"Compartments",type:"select",options:["1 Door","2 Doors","3+ Doors"]},featureTags:{label:"Feature Tags",type:"checkbox",options:["Soft Close","Hydraulic Hinges"]},dimensions:{label:"Dimensions",type:"text"},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF","Particle Board"]},doorsMaterial:{label:"Doors Material",type:"select",options:["Laminate","Acrylic","PU"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte","Textured"]},ssHardwareBrand:{label:"SS Hardware Brand",type:"select",options:["Hettich","Hafele"]},visibilityType:{label:"Visibility Type",type:"select",options:["Open","Closed"]},positionUsage:{label:"Position Usage",type:"select",options:["Corner","Straight","L-Shape"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},designCollection:{label:"Design Collection",type:"select",options:["Modern","Classic","Contemporary"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["25,00050,000","50,000+"]},price:{label:"Price",type:"number",required:!0}},studyTable:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Wall-Mounted","Free-Standing"]},length:{label:"Length",type:"select",options:["900 mm","1200 mm","1500 mm"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["750 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["Plywood","MDF"]},tableTopMaterial:{label:"Table Top Material",type:"select",options:["Laminate","Acrylic","Wood"]},finish:{label:"Finish",type:"select",options:["Matte","Glossy"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},addOns:{label:"Add-ons",type:"checkbox",options:["Cable Tray","Drawer Lock"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Knock Down","Pre-assembled"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["5,00010,000","10,00025,000"]},price:{label:"Price",type:"number",required:!0}},crockery:{name:{label:"Name",type:"text",required:!0},unitType:{label:"Unit Type",type:"select",options:["Base","Wall","Tall Unit"]},length:{label:"Length",type:"select",options:["900 mm","1200 mm","1500 mm"]},breadth:{label:"Breadth",type:"select",options:["450 mm","600 mm"]},height:{label:"Height",type:"select",options:["750 mm","900 mm"]},carcassMaterial:{label:"Carcass Material",type:"select",options:["BWP Plywood","MDF"]},shutterMaterial:{label:"Shutter Material",type:"select",options:["Glass","Wooden"]},finish:{label:"Finish",type:"select",options:["Glossy","Matte"]},glassType:{label:"Glass Type",type:"select",options:["Clear","Frosted"]},lighting:{label:"Lighting",type:"select",options:["Spotlight","Strip Lights"]},storageType:{label:"Storage Type",type:"select",options:["Open","Closed"]},handleType:{label:"Handle Type",type:"select",options:["Knob","Pull"]},addOns:{label:"Add-ons",type:"checkbox",options:["Soft-Close Hinges","Locks"]},edges:{label:"Edges",type:"select",options:["Rounded","Sharp"]},installationType:{label:"Installation Type",type:"select",options:["Floor Standing","Wall Mounted"]},modularType:{label:"Modular Type",type:"select",options:["Factory Modular","Carpenter-Made"]},priceRange:{label:"Price Range",type:"select",options:["10,00025,000","25,00050,000"]},price:{label:"Price",type:"number",required:!0}}},lP=async(t,a)=>{const{data:l}=await a.post("/selectedmodularunits/add",t);if(!l.ok)throw new Error(l.message);return l.data},rP=async(t,a)=>{const{data:l}=await a.get(`/selectedmodularunits/get/${t}`);if(!l.ok)throw new Error(l.message);return l.data},iP=async(t,a,l)=>{const{data:r}=await l.delete(`/selectedmodularunits/delete/${t}/${a}`);if(!r.ok)throw new Error(r.message);return r.data},oP=async(t,a)=>{const{data:l}=await a.post(`/selectedmodularunits/projects/${t}/modular-unit/complete`);if(!l.ok)throw new Error(l.message);return l.data},cP=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async o=>{if(!a)throw new Error("Not Authorized");if(!t.includes(a))throw new Error("Not allowed to make this API call");if(!l)throw new Error("API instance not found for role");return await lP(o,l)},onSuccess:(o,d)=>{r.invalidateQueries({queryKey:["selected-modular-units",d.projectId]})}})},dP=t=>{const a=["owner","CTO","staff","client","worker"],{role:l}=W(),r=Z(l);return Le({queryKey:["selected-modular-units",t],queryFn:async()=>{if(!l)throw new Error("Not Authorized");if(!a.includes(l))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await rP(t,r)},enabled:!!t&&!!l,retry:!1,refetchOnMount:!1})},uP=()=>{const{role:t}=W(),a=Z(t),l=Ne(),r=["owner","CTO","staff"];return le({mutationFn:async o=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await iP(o.projectId,o.unitId,a)},onSuccess:(o,d)=>{l.invalidateQueries({queryKey:["selected-modular-units",d.projectId]})}})},mP=()=>{const{role:t}=W(),a=Z(t),l=Ne(),r=["owner","CTO","staff"];return le({mutationFn:async({projectId:o})=>{if(!t)throw new Error("Not Authorized");if(!r.includes(t))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await oP(o,a)},onSuccess:(o,d)=>{l.invalidateQueries({queryKey:["selected-modular-units",d]}),l.invalidateQueries({queryKey:["payment-confirmation",d]}),l.invalidateQueries({queryKey:["cost-estimation",d]}),l.invalidateQueries({queryKey:["material-room-confirmation",d]})}})},rw=({unit:t,onEdit:a})=>{var S,v,N;const{projectId:l}=Ce(),[r,o]=A.useState(!1),{mutateAsync:d,isPending:m}=sP(),{mutateAsync:p,isPending:x}=cP(),h=dt(),[g,b]=A.useState(!1),[w,k]=A.useState(1),y=h.pathname.includes("projectdetails"),C=async()=>{var M,P;try{if(!window.confirm("Are you sure you want to delete this unit?"))return;await d({unitId:t._id,unitType:t.category,organizationId:t.organizationId}),F({title:"Success",description:"Product deleted successfully"})}catch(L){F({title:"Error",description:((P=(M=L==null?void 0:L.response)==null?void 0:M.data)==null?void 0:P.message)||(L==null?void 0:L.message)||"Failed to delete",variant:"destructive"})}},j=async()=>{var M,P,L;if(!w||w<=0){F({title:"Invalid Quantity",description:"Quantity must be greater than 0"});return}try{const z={image:(M=t==null?void 0:t.images[0])==null?void 0:M.url,customId:t.customId,unitId:t._id,projectId:l,category:t.category,singleUnitCost:t.price,quantity:w};await p(z),F({title:"Success",description:"Unit selected successfully"}),b(!1)}catch(z){console.error(z),F({title:"Error",description:((L=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:L.message)||"Failed to select unit"})}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100 hover:border-blue-200",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200",children:[(v=(S=t.images)==null?void 0:S[0])!=null&&v.url&&!r?e.jsx("img",{src:t.images[0].url||"/placeholder.svg",alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:()=>o(!0)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-image text-gray-400 text-3xl mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No Image"})]})}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx("div",{className:"flex gap-2"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm",children:t==null?void 0:t.category})}),t.price&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"bg-green-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign"}),t.price.toLocaleString()]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-base mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:t.name||"Unnamed Product"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("i",{className:"fas fa-hashtag text-gray-400 text-xs"}),e.jsx("p",{className:"text-xs text-gray-500 font-mono truncate",children:t.customId||t._id})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-tag text-blue-500 text-xs"}),"Category"]}),e.jsx("span",{className:"font-medium text-gray-900 capitalize truncate ml-2",children:(t==null?void 0:t.category)||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign text-green-500 text-xs"}),"Price"]}),e.jsxs("span",{className:"font-bold text-green-600",children:["",((N=t.price)==null?void 0:N.toLocaleString())||"N/A"]})]})]}),y?e.jsx(e.Fragment,{children:g?e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{type:"number",min:1,value:w,onChange:M=>k(Number(M.target.value)),placeholder:"Enter Quantity",className:"w-full"}),e.jsx(T,{variant:"primary",isLoading:x,onClick:j,className:"w-full",children:"Submit"})]}):e.jsxs(T,{variant:"primary",className:"w-full",onClick:()=>b(!0),children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Select"]})}):e.jsxs("div",{className:"flex gap-2",children:[a&&e.jsxs(T,{onClick:()=>a(t),className:"flex-1 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 hover:border-blue-300 py-2 px-3 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(T,{variant:"danger",onClick:C,disabled:m,className:"flex-1 bg-red-600 text-white  py-2 px-3 rounded-lg transition-all disabled:opacity-50 text-sm",children:[e.jsx("i",{className:`fas ${m?"fa-spinner fa-spin":"fa-trash"} mr-1`}),m?"Deleting...":"Delete"]})]})]})]})};function J0(){const{isMobile:t,openMobileSidebar:a}=He(),{organizationId:l,projectId:r}=Ce(),[o,d]=A.useState(""),[m,p]=A.useState(""),[x,h]=A.useState(!1),g=Fe(),b=dt(),w=b.pathname.includes("projectdetails"),{data:k,isLoading:y,isError:C}=nP(l);if(y)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Loading products..."})]})});const j=b.pathname.includes("add")||b.pathname.includes("category")||b.pathname.includes("selectedunits"),S=Object.keys(kc).filter(v=>v.toLowerCase().includes(m.toLowerCase()));return e.jsx(e.Fragment,{children:j?e.jsx("div",{className:`${w?"max-h-full":"h-screen"}  bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto`,children:e.jsx(_t,{context:{isMobile:t,openMobileSidebar:a}})}):e.jsxs("div",{className:`${w?"max-h-full":"h-screen"} bg-gradient-to-br from-gray-50 to-blue-50 flex flex-col overflow-hidden `,children:[e.jsx("div",{className:"bg-white shadow-lg border-b z-40 flex-shrink-0",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex ",children:[t&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx("i",{className:"fas fa-cube text-white text-xl"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl  font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Product Catalog"}),e.jsx("p",{className:"text-sm text-gray-500 sm:block hidden",children:"Manage your modular units"})]})]}),e.jsxs("div",{className:"flex sm:none",children:[w?e.jsx("div",{className:"p-2 border-2 border-gray-300 rounded-lg",children:e.jsx(Rt,{to:`/${l}/projectdetails/${r}/modularunits/selectedunits`,children:e.jsx("i",{className:"fas fa-shopping-cart text-xl text-blue-600 "})})}):e.jsxs(T,{onClick:()=>g("add"),className:"hidden md:flex  sm:px-4 py-2  items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-plus"}),"Add ",e.jsx("span",{className:"hidden sm:inline",children:"New Product"})]}),e.jsx("button",{onClick:()=>h(!x),className:"md:hidden border-2 border-gray-300  ml-1 cursor-pointer p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors",children:e.jsx("i",{className:"fas fa-box text-lg text-blue-600"})})]})]})})}),e.jsx("div",{className:"flex-1 flex overflow-hidden ",children:e.jsxs("div",{onClick:()=>h(!1),className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex gap-6 w-full overflow-hidden",children:[e.jsxs("aside",{className:`
                  fixed md:static inset-y-0 left-0 !z-50 w-80 md:w-72 bg-white md:bg-white/90 md:backdrop-blur-sm
                  transform ${x?"translate-x-0":"-translate-x-full"} md:translate-x-0
                  transition-transform duration-300 ease-in-out md:transition-none
                  shadow-2xl md:shadow-lg rounded-r-2xl md:rounded-2xl border-r md:border
                  flex flex-col md:h-full
                `,children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:hidden",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Categories"}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:m,onChange:v=>p(v.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-gray-50 focus:bg-white"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4 flex items-center gap-2 sticky top-0 bg-white py-2",children:[e.jsx("i",{className:"fas fa-layer-group"}),"Product Categories"]}),e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${o===""?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{d(""),h(!1)},children:[e.jsx("i",{className:"fas fa-th-large"}),e.jsx("span",{className:"font-medium",children:"All Products"}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${o===""?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:(k==null?void 0:k.length)||0})]}),S.map(v=>{var N;return e.jsxs("button",{className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 ${o===v?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,onClick:()=>{g(`category/${v}`),h(!1)},children:[e.jsx("i",{className:"fas fa-cube"}),e.jsx("span",{className:"font-medium capitalize",children:v}),e.jsx("span",{className:`ml-auto text-xs px-2 py-1 rounded-full ${o===v?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:((N=k==null?void 0:k.filter(M=>M.unitType===v))==null?void 0:N.length)||0})]},v)})]})}),e.jsx("div",{className:"flex-shrink-0 p-2 sm:p-6 border-t md:hidden",children:e.jsxs(T,{onClick:()=>{g("add"),h(!1)},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-4 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus"}),"Add New Product"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 mb-3",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl sm:p-6 p-2 px-4 shadow-lg border",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between ",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 sm:mb-2 mb-1",children:o?`${o} Products`:"All Products"}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-info-circle"}),k!=null&&k.length?`${k.length} products available`:"No products found"]})]})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto ",children:y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):C?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(k==null?void 0:k.length)===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-cube text-gray-400 text-5xl mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first product to the catalog."}),e.jsxs(T,{onClick:()=>g("add"),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-xl transition-all shadow-lg",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Product"]})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 pb-6 overflow-y-auto",children:k==null?void 0:k.map(v=>e.jsx(e.Fragment,{children:e.jsx(rw,{unit:v},`${v._id}-5`)}))})})})]})]})})]})})}const fP=["_id","organizationId","customId","images","createdAt","updatedAt","__v"];function iw({unitToEdit:t,setUnitToEdit:a}){const l=Fe(),{organizationId:r}=Ce(),[o,d]=A.useState((t==null?void 0:t.category)||"showcase"),m=kc[o],[p,x]=A.useState(t||{}),[h,g]=A.useState([]),{mutateAsync:b,isPending:w}=eP(),{mutateAsync:k,isPending:y}=tP();if(!m)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-red-200 max-w-md",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4 block text-center"}),e.jsx("p",{className:"text-red-600 text-center font-semibold",children:"Invalid unit type selected."})]})});const C=(P,L)=>{x(z=>({...z,[P]:L}))},j=P=>{P.target.files&&g(Array.from(P.target.files))},S=P=>Object.fromEntries(Object.entries(P).filter(([L])=>!fP.includes(L))),v=async P=>{var L,z;P.preventDefault();try{if(!p.name)throw new Error("Name is required");if(!p.price||p.price<0)throw new Error("Enter valid price");console.log("formValues",p);const q={...p,category:o};if(console.log("formValues after updated",q),t){const H=S(q);await k({unitId:t._id,formValues:H,unitType:o,files:h}),F({title:"Success",description:"Product updated successfully"})}else await b({organizationId:r,unitType:o,formValues:q,files:h}),F({title:"Success",description:"Product added successfully"})}catch(q){F({title:"Error",description:((z=(L=q==null?void 0:q.response)==null?void 0:L.data)==null?void 0:z.message)||(q==null?void 0:q.message)||"operation failed",variant:"destructive"})}},N=P=>{d(P),x({}),g([])},M=()=>{a&&a(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-lg border-b",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 lg:px-8 sm:py-6 py-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between sm:gap-4 gap-2",children:[e.jsxs("div",{className:"flex items-center sm:gap-4 gap-2",children:[e.jsxs("div",{onClick:()=>l(-1),className:"flex gap-2 items-center cursor-pointer rounded-full hover:bg-gray-100 p-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("p",{className:"",children:"Back"})]}),e.jsx("div",{className:"bg-gradient-to-r  from-blue-600 to-purple-600 p-3 rounded-xl",children:e.jsx("i",{className:`fas ${t?"fa-edit":"fa-plus"} text-white text-xl`})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:[t?"Edit":"Add New"," ",o," ",e.jsx("span",{className:"hidden sm:inline",children:"Unit"})]}),e.jsx("p",{className:"text-gray-600 mt-1 hidden sm:block",children:t?"Update product information":"Create a new product in your catalog"})]})]}),!t&&e.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 p-4 rounded-xl",children:[e.jsxs("label",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-layer-group text-blue-600"}),"Select Unit Type"]}),e.jsxs(Je,{value:o,onValueChange:N,children:[e.jsx(Xe,{className:"min-w-[200px] bg-white",children:e.jsx(et,{placeholder:"Choose Unit Type",selectedValue:o})}),e.jsx(Ze,{children:Object.keys(kc).map(P=>e.jsx(ye,{value:P,children:e.jsx("span",{className:"capitalize",children:P})},P))})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border p-8",children:e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Object.entries(m).map(([P,L])=>{var z,q;return L.label==="Budget Range"||L.label==="Price Range"?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(fe,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-500"}),L.label,L.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),L.type==="text"&&e.jsx(de,{value:p[P]||"",onChange:H=>C(P,H.target.value),required:L.required,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",placeholder:`Enter ${L.label.toLowerCase()}`}),L.type==="number"&&e.jsx(de,{type:"number",value:p[P]||"",onChange:H=>C(P,+H.target.value),required:L.required,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",placeholder:`Enter ${L.label.toLowerCase()}`}),L.type==="select"&&e.jsxs(Je,{onValueChange:H=>C(P,H),value:p[P]||"",children:[e.jsx(Xe,{className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white",children:e.jsx(et,{placeholder:`Select ${L.label}`,selectedValue:p[P]})}),e.jsx(Ze,{children:(z=L.options)==null?void 0:z.map(H=>e.jsx(ye,{value:H,children:H},H))})]}),L.type==="checkbox"&&e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 max-h-40 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:(q=L.options)==null?void 0:q.map(H=>{var ue;return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-white rounded-lg p-2 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:((ue=p[P])==null?void 0:ue.includes(H))||!1,onChange:U=>{const I=U.target.checked;x(Y=>{const G=Y[P]||[];return{...Y,[P]:I?[...G,H]:G.filter(re=>re!==H)}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700",children:H})]},H)})})})]},P)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(fe,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-images text-blue-500"}),"Upload Images"]}),e.jsx("div",{className:"relative",children:e.jsx(de,{type:"file",multiple:!0,accept:"image/*",onChange:j,className:"rounded-xl border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),h.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-check-circle"}),h.length," file(s) selected"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 pt-6 border-t border-gray-200",children:[e.jsx(T,{type:"submit",disabled:w||y,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-4 rounded-xl text-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:w||y?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`fas ${t?"fa-save":"fa-plus"} mr-2`}),t?"Update Unit":"Create Unit"]})}),t&&e.jsx(T,{variant:"secondary",className:" px-12 py-4 rounded-xl text-lg ",onClick:M,children:"Cancel"})]})]})})})]})}function eb(){const{isMobile:t,openMobileSidebar:a}=He(),{unitType:l,organizationId:r}=Ce(),[o,d]=A.useState({}),[m,p]=A.useState({}),[x,h]=A.useState(""),[g,b]=A.useState(""),[w,k]=A.useState(!1),{data:y,isLoading:C,isError:j}=aP(l,r,m,g),[S,v]=A.useState(null),N=Object.entries(kc[l]||{}).filter(([z,q])=>q.type==="select"||q.type==="checkbox"),M=()=>{b(x)},P=z=>{z.key==="Enter"&&M()},L=Object.values(o).flat().length;return e.jsx(e.Fragment,{children:S?e.jsx(iw,{unitToEdit:S,setUnitToEdit:v}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-blue-800 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 sm:mb-0",children:[t&&e.jsx("button",{onClick:a,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white/20 rounded-xl",children:e.jsx("i",{className:"fas fa-cube text-xl"})}),e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold capitalize",children:[l," Collection"]}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Premium ",l," products"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx("i",{className:"fas fa-box text-sm"}),e.jsxs("span",{className:"text-sm font-medium",children:[(y==null?void 0:y.length)||0," Products"]})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border mb-6 sticky top-4 z-30",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-between",children:e.jsxs("div",{className:"flex-1 flex gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"}),e.jsx(de,{placeholder:"Search by name, id, etc.",value:x,onChange:z=>h(z.target.value),onKeyDown:P,className:"pl-10 pr-4 py-2 rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white text-sm"})]}),e.jsxs(T,{isLoading:C,onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-search mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]}),e.jsxs(T,{variant:"primary",onClick:()=>k(z=>!z),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-filter"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),L>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:L})]})]})})}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>k(!1)}),e.jsx("div",{className:"fixed inset-x-8  sm:top-32 top-13 bottom-4 sm:inset-x-8 md:left-1/2 md:transform md:-translate-x-1/2 md:w-full md:max-w-4xl bg-white rounded-2xl shadow-2xl border z-50 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-sliders-h text-blue-600"}),"Advanced Filters"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[L>0&&e.jsxs(T,{variant:"danger",onClick:()=>d({}),className:"bg-red-600 text-white px-3 py-1 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Clear All (",L,")"]}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times text-lg"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:N.map(([z,q])=>{var H;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-500"}),q.label]}),q.type==="select"&&q.options&&e.jsxs(Je,{onValueChange:ue=>d(U=>({...U,[z]:ue?[ue]:[]})),children:[e.jsx(Xe,{className:"w-full rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500",children:e.jsx(et,{placeholder:"All",selectedValue:((H=o[z])==null?void 0:H[0])||""})}),e.jsxs(Ze,{children:[e.jsx(ye,{value:"",children:"All"}),q.options.map(ue=>e.jsx(ye,{value:ue,children:ue},ue))]})]}),q.type==="checkbox"&&q.options&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-32 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:q.options.map(ue=>{var U;return e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white rounded p-1 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:((U=o[z])==null?void 0:U.includes(ue))||!1,onChange:I=>{d(Y=>{const G=Y[z]||[];return{...Y,[z]:I.target.checked?[...G,ue]:G.filter(re=>re!==ue)}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700 text-sm",children:ue})]},ue)})})})]},z)})})}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(T,{isLoading:C,onClick:()=>{p(o),k(!1)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-lg shadow-lg",children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Apply Filters"]})})})]})})]}),C?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):j?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-2xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(y==null?void 0:y.length)===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-search text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No Products Found"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["No ",l," products match your current filters."]}),e.jsxs(T,{onClick:()=>{d({}),p({}),h(""),b("")},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-refresh mr-2"}),"Clear Filters"]})]})}):e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:y==null?void 0:y.map(z=>e.jsx(rw,{unit:z,onEdit:v},z._id))})]})]})})}function hP(){const{projectId:t,organizationId:a}=Ce(),{isMobile:l,openMobileSidebar:r}=He(),o=Fe(),{data:d,isLoading:m,refetch:p}=Ff(t),{mutateAsync:x,isPending:h}=bk(),[g,b]=A.useState(null),w=S=>{h||b(S)},k=async()=>{var S,v;if(!(!g||h))try{const N=await x({projectId:t,mode:g});F({title:"Success",description:`${g} has been selected.`}),p(),N==="Manual Flow"?o(`/${a}/projectdetails/${t}/materialselection`):N==="Modular Units"&&o(`/${a}/projectdetails/${t}/modularunits`)}catch(N){F({title:"Error",description:((v=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:v.message)||N.message||"Failed to update stage selection",variant:"destructive"})}},y=S=>(d==null?void 0:d.mode)===S,C=S=>g===S,j=[{id:"Modular Units",title:"Modular Units",description:"Streamlined approach with pre-configured units and standardized pricing",icon:"fas fa-cube",colorClass:"bg-blue-500",features:["Pre-defined unit pricing","Quick configuration","Standardized components","skips 2 stages"],badge:"Recommended"},{id:"Manual Flow",title:"Manual Flow",description:"Complete customization with detailed material selection and cost estimation",icon:"fas fa-sliders-h",colorClass:"bg-purple-500",features:["Full customization","Material selection","Cost estimation","Detailed configuration"],badge:"Advanced"}];return e.jsx("div",{className:"h-full overflow-y-auto bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsx("div",{className:"min-h-full p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[l&&e.jsx("button",{onClick:r,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full shadow-lg mb-6",children:e.jsx("i",{className:"fas fa-layer-group text-2xl text-slate-700"})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"Select Your Project Stage"}),e.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Choose the approach that best fits your project requirements and timeline"})]}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading stage selection..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center mb-12",children:e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 items-start sm:items-center sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-semibold",children:"1"}),e.jsx("span",{className:"sm:ml-2 text-sm font-medium text-slate-700",children:"Stage Selection"})]}),l?e.jsx("i",{className:"mx-auto fas fa-arrow-down text-slate-400"}):e.jsx("i",{className:"mx-auto fas fa-arrow-right text-slate-400"}),e.jsxs("div",{className:"flex items-center sm:ml-2",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 text-slate-600 rounded-full flex items-center justify-center text-sm font-semibold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-slate-500",children:"Configuration"})]}),l?e.jsx("i",{className:"mx-auto fas fa-arrow-down text-slate-400"}):e.jsx("i",{className:"mx-auto fas fa-arrow-right text-slate-400"}),e.jsxs("div",{className:"flex items-center sm:ml-2",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 text-slate-600 rounded-full flex items-center justify-center text-sm font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-slate-500",children:"Implementation"})]})]})}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-medium",children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("span",{children:"Step 1: Select an option below, then confirm your choice"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:j.map(S=>{const v=y(S.id),N=C(S.id);return e.jsx("div",{onClick:()=>w(S.id),className:`cursor-pointer transition-all duration-300 hover:-translate-y-1 relative ${h?"pointer-events-none opacity-75":""}`,children:e.jsxs(De,{className:`overflow-hidden border-2 transition-all duration-300 ${v?"border-green-500 bg-green-50 shadow-lg ring-2 ring-green-200":N?"border-blue-500 bg-blue-50 shadow-lg ring-2 ring-blue-200":"border-slate-200 hover:border-slate-300 hover:shadow-lg"}`,children:[e.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[v&&e.jsxs("div",{className:"flex items-center space-x-1 bg-green-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"fas fa-check"}),e.jsx("span",{children:"Confirmed"})]}),N&&!v&&e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"fas fa-hand-pointer"}),e.jsx("span",{children:"Selected"})]})]}),e.jsxs(Dt,{className:"p-8",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:`w-12 h-12 ${S.colorClass} rounded-lg flex items-center justify-center transition-all duration-300 ${N||v?"scale-110 shadow-lg":""}`,children:e.jsx("i",{className:`${S.icon} text-white text-xl`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ${v?"text-green-800":N?"text-blue-800":"text-slate-900"}`,children:S.title})}),e.jsx("p",{className:`leading-relaxed transition-colors duration-300 ${v?"text-green-700":N?"text-blue-700":"text-slate-600"}`,children:S.description})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:`text-sm font-semibold mb-3 transition-colors duration-300 ${v?"text-green-800":N?"text-blue-800":"text-slate-700"}`,children:"Key Features:"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:S.features.map((M,P)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${v?"bg-green-500":N?"bg-blue-500":"bg-slate-400"}`}),e.jsx("span",{className:`text-sm transition-colors duration-300 ${v?"text-green-700":N?"text-blue-700":"text-slate-600"}`,children:M})]},P))})]}),v&&e.jsx("div",{className:"mt-6 p-3 bg-green-100 rounded-lg border border-green-200",children:e.jsxs("p",{className:"text-sm text-green-800 font-medium",children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),"This option is currently active"]})}),N&&!v&&e.jsx("div",{className:"mt-6 p-3 bg-blue-100 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[e.jsx("i",{className:"fas fa-hand-pointer mr-2"}),'Click "Confirm Selection" below to proceed']})})]})]})},S.id)})}),g&&e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-2 border-blue-200 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:[e.jsx("i",{className:"fas fa-check-double mr-2 text-blue-600"}),"Confirm Your Selection"]}),e.jsxs("p",{className:"text-slate-600 mb-4",children:["You have selected ",e.jsx("span",{className:"font-semibold text-blue-600",children:g}),". Click confirm to proceed to the next stage."]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs(T,{onClick:()=>b(null),variant:"outline",disabled:h,className:"px-6",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(T,{onClick:k,disabled:h,className:"px-6 bg-blue-600 hover:bg-blue-700",children:h?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Confirm Selection"]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:[e.jsx("i",{className:"fas fa-question-circle mr-2 text-blue-500"}),"Need help choosing?"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-slate-600",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-slate-800 mb-2",children:[e.jsx("i",{className:"fas fa-cube mr-2 text-blue-500"}),"Choose Modular Units if:"]}),e.jsxs("ul",{className:"space-y-1 ml-6",children:[e.jsx("li",{children:" You want to get started quickly"}),e.jsx("li",{children:" Standard configurations meet your needs"}),e.jsx("li",{children:" You prefer predictable pricing"}),e.jsx("li",{children:" You can skip 2 stages"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-slate-800 mb-2",children:[e.jsx("i",{className:"fas fa-sliders-h mr-2 text-purple-500"}),"Choose Manual Flow if:"]}),e.jsxs("ul",{className:"space-y-1 ml-6",children:[e.jsx("li",{children:" You need complete customization"}),e.jsx("li",{children:" You want detailed cost breakdowns"}),e.jsx("li",{children:" You have specific material requirements"}),e.jsx("li",{children:" You prefer granular control"})]})]})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 flex items-center space-x-3",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-xl"}),e.jsx("span",{className:"text-slate-700 font-medium",children:"Processing your selection..."})]})})]})]})})})}function xP(){const{projectId:t}=Ce(),{isMobile:a,openMobileSidebar:l}=He(),{data:r,isLoading:o,error:d,refetch:m}=dP(t),{mutateAsync:p,isPending:x}=uP(),{mutateAsync:h,isPending:g}=mP(),b=async N=>{try{await p({projectId:t,unitId:N}),F({title:"Success",description:"Unit removed successfully"}),m()}catch(M){F({title:"Error",description:(M==null?void 0:M.message)||"Failed to delete unit",variant:"destructive"})}},w=async()=>{try{await h({projectId:t}),F({title:"Success",description:"Selection completed successfully"})}catch(N){F({title:"Error",description:(N==null?void 0:N.message)||"Failed to complete selection",variant:"destructive"})}},k=N=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(N),y=N=>N.replace(/([A-Z])/g," $1").replace(/^./,M=>M.toUpperCase()).trim(),C=N=>`/placeholder.svg?height=200&width=300&text=${encodeURIComponent(y(N))}`,j=(r==null?void 0:r.selectedUnits)||[],S=(r==null?void 0:r.totalCost)||0,v=j.length>0;return o?e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200 px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Selected Units"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-600 text-lg",children:"Loading selected units..."})]})})]}):d?e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200 px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Selected Units"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-3xl text-red-500 mb-4"}),e.jsx("p",{className:"text-red-600 text-lg mb-4",children:"Failed to load selected units"}),e.jsxs(T,{onClick:()=>m(),variant:"outline",children:[e.jsx("i",{className:"fas fa-refresh mr-2"}),"Try Again"]})]})})]}):e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200 px-4 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("button",{onClick:l,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Selected Units"}),e.jsx("div",{className:"flex items-center space-x-4 mt-1",children:!a&&e.jsxs(Oa,{variant:"secondary",className:"text-xs px-2 py-1 ",children:[e.jsx("i",{className:"fas fa-cube mr-1"}),j.length," ",j.length===1?"Unit":"Units"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-center space-x-4 w-full sm:w-fit",children:[e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Total Cost"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-green-600",children:k(S)})]}),e.jsx(T,{isLoading:g,onClick:w,disabled:g||!v,className:"px-4 md:px-6 bg-green-600 hover:bg-green-700 text-white",children:g?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),a?"...":"Completing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),a?"Complete":"Complete Selection"]})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("div",{className:"max-w-full mx-auto",children:v?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-4",children:j.map((N,M)=>e.jsxs(De,{className:"hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[e.jsx("img",{src:N.image||C(N.category),alt:y(N.category),className:"w-full border h-full ",onError:P=>{const L=P.target;L.src=C(N.category)}}),e.jsx(T,{isLoading:x,onClick:()=>b(N.unitId.toString()),disabled:x,variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-white/90 hover:bg-white text-red-500 hover:text-red-700 shadow-sm",children:e.jsx("i",{className:"fas fa-trash text-sm"})})]}),e.jsx(ns,{className:"pb-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ys,{className:"text-base md:text-lg font-semibold text-slate-900 truncate",children:y(N.category)}),e.jsxs("p",{className:"text-xs text-slate-500 truncate",children:[e.jsx("i",{className:"fas fa-hashtag text-gray-500 text-xs "})," ",N==null?void 0:N.customId]})]})})}),e.jsx(Dt,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-shopping-cart text-slate-400 text-xs"}),e.jsx("span",{className:"font-semibold text-slate-900",children:N.quantity})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Unit Cost:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-rupee-sign text-slate-400 text-xs"}),e.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:k(N.singleUnitCost)})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Total:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-calculator text-green-500 text-xs"}),e.jsx("span",{className:"font-bold text-green-600 text-sm",children:k(N.quantity*N.singleUnitCost)})]})]})]})})]},`${N.unitId}-${M}`))})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-6",children:e.jsx("i",{className:"fas fa-cube text-3xl text-slate-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Units Selected"}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"You haven't selected any modular units yet. Start by adding units to your project."})]})})})})]})}const pP=async(t,a)=>{const{data:l}=await a.get(`/documentation/${t}/getalldetails`);if(!l.ok)throw new Error(l.message);return l.data},gP=async(t,a,l)=>{const{data:r}=await l.get(`/documentation/${t}/stage/${a}`);if(!r.ok)throw new Error(r.message);return r.data},bP=async(t,a,l,r)=>{const o=new FormData;l.forEach(m=>o.append("files",m));const{data:d}=await r.post(`/documentation/${t}/${a}/upload`,o);if(!d.ok)throw new Error(d.message);return d.data},yP=async(t,a,l,r)=>{const{data:o}=await r.delete(`/documentation/${t}/${a}/file/${l}`);if(!o.ok)throw new Error(o.message);return o.data},wP=async(t,a,l,r)=>{const{data:o}=await r.patch(`/documentation/${t}/${a}/description`,{description:l});if(!o.ok)throw new Error(o.message);return o.data},vP=t=>{const a=["owner","CTO","staff","client"],{role:l}=W(),r=Z(l);return Le({queryKey:["stage-documentation",t],queryFn:async()=>{if(!l||!a.includes(l))throw new Error("Not allowed to make this API call.");if(!r)throw new Error("API instance not found.");return await pP(t,r)},enabled:!!l&&!!t&&!!r,retry:!1,refetchOnMount:!1})},jP=({projectId:t,stageNumber:a})=>{const l=["owner","CTO","staff","client"],{role:r}=W(),o=Z(r);return Le({queryKey:["stage-documentation",t,a],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("Not allowed to make this API call.");if(!o)throw new Error("API instance not found.");return await gP(t,a,o)},enabled:!!r&&!!t&&a!==void 0&&!!o,retry:!1,refetchOnMount:!1})},NP=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,stageNumber:d,files:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("API not found.");return await bP(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["stage-documentation",d]})}})},SP=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,stageNumber:d,fileId:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("API not found.");return await yP(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["stage-documentation",d]})}})},CP=()=>{const t=["owner","CTO","staff"],{role:a}=W(),l=Z(a),r=Ne();return le({mutationFn:async({projectId:o,stageNumber:d,description:m})=>{if(!a||!t.includes(a))throw new Error("Not allowed.");if(!l)throw new Error("API not found.");return await wP(o,d,m,l)},onSuccess:(o,{projectId:d})=>{r.invalidateQueries({queryKey:["stage-documentation",d]})}})},kP=()=>{var b;const{projectId:t}=Ce(),a=dt(),{isMobile:l,openMobileSidebar:r}=He(),{data:o,isLoading:d,isError:m,refetch:p,isFetching:x}=vP(t),h=a.pathname.split("/"),g=h.indexOf("document")!==h.length-1;return d?e.jsxs("div",{className:"mx-auto p-4 space-y-6 overflow-y-auto max-h-full custom-scrollbar",children:[l&&e.jsxs(T,{variant:"outline",size:"sm",onClick:r,className:"mb-4 bg-transparent border-slate-300 text-slate-700 hover:bg-slate-100",children:[e.jsx("i",{className:"fa-solid fa-bars mr-2"}),"Menu"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((w,k)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:[e.jsx(Te,{className:"h-6 w-24 bg-slate-200 mb-2"}),e.jsx(Te,{className:"h-4 w-full bg-slate-200"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx(Te,{className:"h-16 w-full mb-4 bg-slate-200"}),e.jsx(Te,{className:"h-9 w-28 bg-slate-200"})]})]},k))})]}):m?e.jsxs("div",{className:"container mx-auto",children:[l&&e.jsxs(T,{variant:"outline",size:"sm",onClick:r,className:"mb-4 bg-transparent border-slate-300 text-slate-700 hover:bg-slate-100",children:[e.jsx("i",{className:"fa-solid fa-bars mr-2"}),"Menu"]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500 text-xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800",children:"Error Loading Documentation"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Failed to load documentation. Please try again later."})]})]})})})]}):e.jsx("div",{className:"mx-auto space-y-6 h-full overflow-y-auto custom-scrollbar",children:g?e.jsx(_t,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[l&&e.jsx(T,{variant:"outline",size:"sm",onClick:r,className:"bg-transparent border-slate-300 text-slate-700 hover:bg-slate-100",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-indigo-600",children:"Project Documentation"})]}),e.jsx("p",{className:"text-slate-600 text-sm sm:text-xl",children:"Track and manage documentation across all project stages"})]}),(b=o==null?void 0:o.stages)!=null&&b.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center gap-2 text-sm text-slate-500",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fa-solid fa-file-text text-indigo-500"}),e.jsxs("span",{children:[o.stages.length," stages available"]})]}),e.jsx("div",{children:e.jsxs(T,{isLoading:x,onClick:()=>p(),children:[e.jsx("i",{className:"fas fa-refresh mr-1"})," Sync"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.stages.map(w=>e.jsxs("div",{className:"group relative bg-white rounded-lg border-l-4  shadow-sm border-indigo-600 overflow-hidden hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-slate-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 font-semibold text-sm",children:w.stageNumber}),e.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Stage ",w.stageNumber]})]})})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-600 line-clamp-3 min-h-[3rem] leading-relaxed",children:w.description||"No description provided for this stage."}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx("i",{className:"fa-solid fa-check-circle text-emerald-500"}),e.jsx("span",{children:"Ready to view"})]}),e.jsx(Rt,{to:`${w.stageNumber}`,children:e.jsx(T,{size:"sm",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"View Details"})})]})]})]},w.stageNumber))})]}):e.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx("i",{className:"fa-solid fa-file-text text-5xl text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-800",children:"No Documentation Available"}),e.jsx("p",{className:"text-slate-600",children:"Documentation stages will appear here once they are created for this project."})]})]})})})},Jo=({orientation:t="horizontal",className:a=""})=>{const o=`bg-gray-200 ${t==="horizontal"?"w-full h-px":"h-full w-px"} ${a}`.trim();return e.jsx("div",{className:o})},EP=({isOpen:t,onClose:a,imageUrl:l,imageName:r})=>(A.useEffect(()=>{const o=d=>{d.key==="Escape"&&a()};return t&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow="unset"}},[t,a]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:a}),e.jsx("div",{className:"relative z-10 w-full h-full max-w-5xl sm:max-w-xl md:max-w-3xl lg:max-w-5xl max-h-full p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fa-solid fa-image text-blue-600 text-sm"})}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base truncate",children:r})]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:a,className:"flex items-center gap-2 h-9 sm:h-10 px-3 sm:px-4 flex-shrink-0 bg-transparent",children:[e.jsx("i",{className:"fa-solid fa-times text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Close"})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 bg-gray-100 overflow-hidden",children:e.jsx("div",{className:"max-w-full max-h-full flex items-center justify-center",children:e.jsx("img",{src:l||"/placeholder.svg",alt:r,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg",style:{maxHeight:"calc(100vh - 200px)"}})})}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Click outside the image or press ESC to close"}),e.jsx(T,{variant:"outline",onClick:a,className:"h-9 sm:h-10 px-4 sm:px-6 w-full sm:w-auto bg-transparent",children:"Close Preview"})]})})]})})]}):null),AP=()=>{var H,ue;const{projectId:t,stageNumber:a}=Ce(),[l,r]=A.useState(""),[o,d]=A.useState(!1),[m,p]=A.useState([]),[x,h]=A.useState({isOpen:!1,imageUrl:"",imageName:""}),g=Fe(),{data:b,isLoading:w,isError:k}=jP({projectId:t,stageNumber:a}),y=NP(),C=SP(),j=CP(),S=U=>{U.target.files&&p(Array.from(U.target.files))},v=async()=>{var U,I;if(m.length)try{await y.mutateAsync({projectId:t,stageNumber:a,files:m}),F({title:"Success",description:"Files uploaded successfully"}),p([]);const Y=document.getElementById("file-upload");Y&&(Y.value="")}catch(Y){F({title:"Error",description:((I=(U=Y==null?void 0:Y.response)==null?void 0:U.data)==null?void 0:I.message)||"Failed to upload files",variant:"destructive"})}},N=async U=>{var I,Y;try{await C.mutateAsync({projectId:t,stageNumber:a,fileId:U}),F({title:"Success",description:"File deleted successfully"})}catch(G){F({title:"Error",description:((Y=(I=G==null?void 0:G.response)==null?void 0:I.data)==null?void 0:Y.message)||"Failed to delete file",variant:"destructive"})}},M=async()=>{var U,I;try{await j.mutateAsync({projectId:t,stageNumber:a,description:l}),F({title:"Success",description:"Description updated successfully"}),d(!1)}catch(Y){F({title:"Error",description:((I=(U=Y==null?void 0:Y.response)==null?void 0:U.data)==null?void 0:I.message)||"Failed to update description",variant:"destructive"})}},P=(U,I)=>{h({isOpen:!0,imageUrl:U,imageName:I})},L=()=>{h({isOpen:!1,imageUrl:"",imageName:""})};A.useEffect(()=>{b!=null&&b.description&&r(b.description)},[b==null?void 0:b.description]);const z=(H=b==null?void 0:b.uploadedFiles)==null?void 0:H.filter(U=>U.type==="image"),q=(ue=b==null?void 0:b.uploadedFiles)==null?void 0:ue.filter(U=>U.type==="pdf");return w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx(Te,{className:"h-8 sm:h-10 w-20 sm:w-24 mb-4"}),e.jsx(Te,{className:"h-6 sm:h-8 w-32 sm:w-48 mb-4 sm:mb-6"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx(Te,{className:"h-16 sm:h-20 w-full"}),e.jsx(Te,{className:"h-24 sm:h-32 w-full"}),e.jsx(Te,{className:"h-24 sm:h-32 w-full"})]})]})})})}):k?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsxs(T,{variant:"outline",onClick:()=>g(-1),className:"mb-4 sm:mb-6 h-10 sm:h-11 px-4 sm:px-6",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Documentation"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500 text-lg sm:text-xl mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 text-sm sm:text-base",children:"Error Loading Documentation"}),e.jsx("p",{className:"text-red-600 text-xs sm:text-sm mt-1",children:"Failed to load stage documentation. Please try again later."})]})]})})]})})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl",children:e.jsx("div",{className:"w-full ",children:e.jsxs("div",{className:"max-w-full mx-auto space-y-4 sm:space-y-6 lg:space-y-8",children:[e.jsx("div",{className:" bg-white rounded-2xl shadow-sm border border-gray-200 sm:p-4 p-2 ",children:e.jsxs("div",{className:"flex flex-row sm:items-center justify-between gap-4",children:[e.jsxs(T,{variant:"outline",onClick:()=>g(-1),className:"flex items-center gap-2 h-10 sm:h-11 px-4 sm:px-6 w-fit",children:[e.jsx("i",{className:"fa-solid fa-arrow-left text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Documentation"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs(Oa,{variant:"secondary",className:"text-xs sm:text-sm px-4 py-1.5 w-fit",children:["Stage ",a]})]})}),e.jsxs("div",{className:"bg-white  rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-blue-500 to-indigo-500 p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-2xl bg-white/20 backdrop-blur-sm text-white font-bold text-lg sm:text-2xl",children:a}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white",children:["Stage ",a]}),e.jsx("p",{className:"text-white/80 text-sm sm:text-base mt-1",children:"Documentation & Files"})]})]})}),(a==="6"||a==="7")&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:" p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6 my-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2 text-gray-900",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-dollar-sign text-blue-600 text-sm"})}),"Stage Price"]}),e.jsxs(Oa,{variant:"default",className:"text-xs sm:text-sm px-3 py-1.5 w-fit bg-blue-100 text-blue-700 border-blue-200",children:[e.jsx("i",{className:"fa-solid fa-tag mr-1"}),"Pricing Stage"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-emerald-50 rounded-xl p-4 sm:p-6 border border-blue-200",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl bg-blue-100 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-money-bill-wave text-blue-600 text-xl sm:text-2xl"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-1",children:["Stage ",a," Total Amount"]}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-blue-700",children:["",b!=null&&b.price?Number(b.price).toLocaleString():"0.00"]})]})]})})})]})}),e.jsx(Jo,{className:"my-6 sm:my-8"}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2 text-gray-900",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-file-text text-blue-600 text-sm"})}),"Description"]}),!o&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>d(!0),className:"flex items-center gap-2 h-9 sm:h-10 px-3 sm:px-4 w-fit",children:[e.jsx("i",{className:"fa-solid fa-edit text-xs"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Edit"})]})]}),o?e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx(vs,{value:l,onChange:U=>r(U.target.value),placeholder:"Enter stage description...",className:"min-h-[100px] sm:min-h-[120px] resize-none border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs(T,{onClick:M,disabled:j.isPending,className:"flex items-center justify-center gap-2 h-10 sm:h-11",children:[e.jsx("i",{className:"fa-solid fa-save text-sm"}),j.isPending?"Saving...":"Save Changes"]}),e.jsxs(T,{variant:"outline",onClick:()=>{d(!1),r((b==null?void 0:b.description)||"")},className:"h-10 sm:h-11",children:[e.jsx("i",{className:"fa-solid fa-times mr-2 text-sm"}),"Cancel"]})]})]}):e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 sm:p-6 border border-gray-200",children:e.jsx("p",{className:"text-gray-700 leading-relaxed text-sm sm:text-base",children:l||"No description provided for this stage."})})]}),e.jsx(Jo,{className:"my-6 sm:my-8"}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-image text-emerald-600 text-sm"})}),e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:["Images (",(z==null?void 0:z.length)||0,")"]})]}),z!=null&&z.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-6",children:z.map(U=>e.jsxs("div",{className:"group bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"aspect-square relative overflow-hidden bg-gray-100",children:e.jsx("img",{src:U.url||"/placeholder.svg",alt:U.originalName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-800 truncate mb-3",children:U.originalName}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{size:"sm",variant:"outline",onClick:()=>P(U.url||"",U.originalName),className:"flex-1 flex items-center justify-center gap-2 h-8 sm:h-9 text-xs sm:text-sm",children:[e.jsx("i",{className:"fa-solid fa-eye text-xs"}),"View"]}),e.jsxs(T,{size:"sm",isLoading:C.isPending,variant:"danger",onClick:()=>N(U._id),disabled:C.isPending,className:"flex-1 flex items-center justify-center gap-2 h-8 sm:h-9 text-xs sm:text-sm hover:text-white",children:[e.jsx("i",{className:"fa-solid fa-trash text-xs"}),C.isPending?"...":"Delete"]})]})]})]},U._id))}):e.jsxs("div",{className:"bg-gray-50 rounded-xl border-2 border-dashed border-gray-300 p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-image text-2xl sm:text-3xl text-gray-400"})}),e.jsx("h4",{className:"text-base sm:text-lg font-medium text-gray-600 mb-2",children:"No images uploaded"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Upload some images to get started"})]})]}),e.jsx(Jo,{className:"my-6 sm:my-8"}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-file-pdf text-red-600 text-sm"})}),e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:["PDF Documents (",(q==null?void 0:q.length)||0,")"]})]}),q!=null&&q.length?e.jsx("div",{className:"space-y-3 sm:space-y-4",children:q.map(U=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-red-100 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fa-solid fa-file-pdf text-red-600 text-lg sm:text-xl"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:U.originalName}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-0.5",children:"PDF Document"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx(T,{variant:"outline",size:"sm",className:"h-8 sm:h-9 px-3 sm:px-4 bg-transparent",children:e.jsxs("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx("i",{className:"fa-solid fa-external-link text-xs"}),e.jsx("span",{className:"hidden sm:inline",children:"View"})]})}),e.jsxs(T,{isLoading:C.isPending,variant:"danger",size:"sm",onClick:()=>N(U._id),disabled:C.isPending,className:"h-8 sm:h-9 px-3 sm:px-4 text-xs sm:text-sm hover:text-white",children:[e.jsx("i",{className:"fa-solid fa-trash text-xs mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})},U._id))}):e.jsxs("div",{className:"bg-gray-50 rounded-xl border-2 border-dashed border-gray-300 p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-file-pdf text-2xl sm:text-3xl text-gray-400"})}),e.jsx("h4",{className:"text-base sm:text-lg font-medium text-gray-600 mb-2",children:"No PDF documents"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Upload some PDF files to get started"})]})]}),e.jsx(Jo,{className:"my-6 sm:my-8"}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-upload text-purple-600 text-sm"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Upload New Files"})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border-2 border-dashed border-blue-200 hover:border-blue-300 transition-colors p-6 sm:p-8",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-upload text-2xl sm:text-3xl text-blue-600"})}),e.jsx("h4",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-2",children:"Upload Files"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Select images and PDF files to upload to this stage"})]}),e.jsx(de,{id:"file-upload",type:"file",multiple:!0,accept:"image/*,.pdf",onChange:S,className:"cursor-pointer bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500 h-11 sm:h-12"}),m.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800 mb-3",children:["Selected files (",m.length,"):"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto custom-scrollbar",children:m.map((U,I)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-blue-700",children:[e.jsx("i",{className:"fa-solid fa-file flex-shrink-0"}),e.jsx("span",{className:"truncate flex-1",children:U.name}),e.jsxs("span",{className:"text-blue-500 flex-shrink-0",children:["(",(U.size/1024/1024).toFixed(2)," MB)"]})]},I))})]}),e.jsxs(T,{isLoading:y.isPending,onClick:v,disabled:!m.length||y.isPending,className:"w-full h-11 sm:h-12 text-sm sm:text-base font-medium",children:[e.jsx("i",{className:"fa-solid fa-upload mr-2 text-sm"}),y.isPending?"Uploading...":`Upload ${m.length>0?`${m.length} `:""}Files`]})]})})]})]})]})]})})}),e.jsx(EP,{isOpen:x.isOpen,onClose:L,imageUrl:x.imageUrl,imageName:x.imageName})]})};function OP(){const[t,a]=A.useState(null),[l,r]=A.useState(null),{isauthenticated:o}=ps(d=>d.authStore);return Qy(),e.jsx(e.Fragment,{children:e.jsxs(PN,{children:[e.jsx(we,{path:"/",element:o?e.jsx(Um,{to:"/organizations",replace:!0}):e.jsx(Xg,{})}),e.jsxs(we,{path:"/login",element:e.jsx(p3,{}),children:[e.jsx(we,{index:!0,element:e.jsx(L0,{})})," ",e.jsx(we,{path:"cto",element:e.jsx(B0,{})}),e.jsx(we,{path:"staff",element:e.jsx(U0,{})}),e.jsx(we,{path:"worker",element:e.jsx($0,{})}),e.jsx(we,{path:"client",element:e.jsx(H0,{})})]}),e.jsx(we,{path:"/home",element:e.jsx(Xg,{})}),e.jsx(we,{path:"/unauthorized",element:e.jsx(Gy,{})}),e.jsx(we,{path:"/stafflogin",element:e.jsx(U0,{})}),e.jsx(we,{path:"/login",element:e.jsx(L0,{})}),e.jsx(we,{path:"/workerlogin",element:e.jsx($0,{})}),e.jsx(we,{path:"/ctologin",element:e.jsx(B0,{})}),e.jsx(we,{path:"/clientlogin",element:e.jsx(H0,{})}),e.jsx(we,{path:"/staffregister",element:e.jsx(HE,{})}),e.jsx(we,{path:"/workerregister",element:e.jsx(QE,{})}),e.jsx(we,{path:"/ctoregister",element:e.jsx(YE,{})}),e.jsx(we,{path:"/clientregister",element:e.jsx(WE,{})}),e.jsx(we,{path:"/subscription",element:e.jsx(lw,{})}),e.jsx(we,{path:"/organizations",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(IE,{})})}),e.jsxs(we,{path:"/organizations/:organizationId",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(VE,{})}),children:[e.jsx(we,{index:!0,element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(BE,{})})}),e.jsx(we,{path:"invitestaff",element:e.jsx(Re,{allowedRoles:["CTO","owner","staff"],children:e.jsx(GE,{})})}),e.jsx(we,{path:"invitecto",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(KE,{})})}),e.jsx(we,{path:"subscriptionplan",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(_3,{})})}),e.jsx(we,{path:"userprofile",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(U3,{})})}),e.jsxs(we,{path:"modularunits",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(J0,{})}),children:[e.jsx(we,{path:"add",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(iw,{})})}),e.jsx(we,{path:"category/:unitType",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","client"],children:e.jsx(eb,{})})})]})]}),e.jsx(we,{path:"/organizations/:organizationId/projects",element:e.jsx(vk,{projectId:t,setProjectId:a}),children:e.jsx(we,{index:!0,element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(Bk,{})})})}),e.jsxs(we,{path:"/:organizationId/projectdetails/:projectId",element:e.jsx(Re,{allowedRoles:["owner","client","CTO","worker","staff"],children:e.jsx(Sk,{projectId:t,setProjectId:a,setOrganizationId:r,organizationId:l})}),children:[e.jsx(we,{path:"prerequireties",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(V3,{})})}),e.jsx(we,{path:"document",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(kP,{})}),children:e.jsx(we,{path:":stageNumber",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(AP,{})})})}),e.jsx(we,{path:"workers",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(I0,{})})}),e.jsx(we,{path:"inviteclient",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(XE,{})})}),e.jsx(we,{path:"requirementform",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx($A,{})})}),e.jsx(we,{path:"sitemeasurement",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(b4,{})})}),e.jsx(we,{path:"sampledesign",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(L4,{})})}),e.jsx(we,{path:"technicalconsultant",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(G4,{})})}),e.jsx(we,{path:"selectstage",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(hP,{})})}),e.jsxs(we,{path:"modularunits",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(J0,{})}),children:[e.jsx(we,{path:"selectedunits",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","worker","client"],children:e.jsx(xP,{})})}),e.jsx(we,{path:"category/:unitType",element:e.jsx(Re,{allowedRoles:["owner","staff","CTO","client"],children:e.jsx(eb,{})})})]}),e.jsx(we,{path:"materialselection",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(gO,{})}),children:e.jsx(we,{path:"materialroom/:roomId/:roomType",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client","worker"],children:e.jsx(yO,{})})})}),e.jsxs(we,{path:"costestimation",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(QO,{})}),children:[e.jsx(we,{path:"roomdetails/:roomId",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(KO,{})})}),e.jsx(we,{path:"roomdetails/labour",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(YO,{})})})]}),e.jsxs(we,{path:"paymentconfirmation",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(c3,{})}),children:[e.jsx(we,{path:"consent",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(d3,{})})}),e.jsx(we,{path:"schedule",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(BT,{})})}),e.jsx(we,{path:"transaction",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(WT,{})})})]}),e.jsx(we,{path:"ordermaterial",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(b6,{})}),children:e.jsx(we,{path:"ordermaterialroom/:roomKey",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(v6,{})})})}),e.jsx(we,{path:"materialarrival",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(U6,{})}),children:e.jsx(we,{path:"materialarrivalroom/:roomKey",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(I6,{})})})}),e.jsxs(we,{path:"workmainschedule",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(wR,{})}),children:[e.jsx(we,{path:"workschedule/:sectionId",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(vR,{})})}),e.jsx(we,{path:"dailyschedule/:sectionId",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(jR,{})})})]}),e.jsx(we,{path:"installation",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(LR,{})}),children:e.jsx(we,{path:"installationroom/:roomkey",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker","client"],children:e.jsx(DR,{})})})}),e.jsxs(we,{path:"qualitycheck",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff"],children:e.jsx(WR,{})}),children:[e.jsx(we,{path:"qualitycheckroom/:roomkey",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(XR,{})})}),e.jsx(we,{path:"qualitycheckroom/adminwall",element:e.jsx(C3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(k3,{})})}),e.jsx(we,{path:"qualitycheckroom/workerwall",element:e.jsx(L3,{}),children:e.jsx(we,{path:"step/:stepId/:stepNumber",element:e.jsx(D3,{})})})]}),e.jsx(we,{path:"cleaning",element:e.jsx(hT,{}),children:e.jsx(we,{path:"cleaningroom/:roomId",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","worker"],children:e.jsx(xT,{})})})}),e.jsx(we,{path:"projectdelivery",element:e.jsx(Re,{allowedRoles:["owner","CTO","staff","client"],children:e.jsx(RT,{})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(we,{path:"/phase",element:e.jsx(Re,{allowedRoles:["owner"],children:e.jsx(U2,{})})}),e.jsx(we,{path:"/issues",element:e.jsx(Re,{allowedRoles:["owner"],children:e.jsx(z2,{})})}),e.jsx(we,{path:"/tasks",element:e.jsx(Re,{allowedRoles:["owner"],children:e.jsx(I2,{})})})]}),e.jsx(we,{path:"/workers",element:e.jsx(Re,{allowedRoles:["staff"],children:e.jsx(I0,{})})}),e.jsx(we,{path:"/requirementform/:projectId/:token",element:e.jsx(EA,{})}),e.jsx(we,{path:"/ordermaterial/public/:projectId/:token",element:e.jsx($6,{})}),e.jsx(we,{path:"/materialarrival/public/:projectId/:token",element:e.jsx(B6,{})}),e.jsx(we,{path:"/clientconsent/public/:projectId/:token",element:e.jsx(u3,{})}),e.jsx(we,{path:"*",element:e.jsx(Hk,{})})]})})}Uj.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(E2,{store:Bt,children:e.jsx(cS,{client:Ee,children:e.jsx(a2,{children:e.jsx(OP,{})})})})}));
