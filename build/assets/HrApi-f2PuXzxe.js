import{Q as v,W as P,X as k,Y as F,Z as b,u as s,a as Q,b as f,q as d,g as i}from"./index-D5hl8ps7.js";var R=class extends v{constructor(e,r){super(e,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:P()})}getOptimisticResult(e){return e.behavior=P(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,r){var g,E;const{state:t}=e,a=super.createResult(e,r),{isFetching:o,isRefetching:n,isError:u,isRefetchError:p}=a,l=(E=(g=t.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:E.direction,w=u&&l==="forward",h=o&&l==="forward",y=u&&l==="backward",m=o&&l==="backward";return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:F(r,t.data),hasPreviousPage:k(r,t.data),isFetchNextPageError:w,isFetchingNextPage:h,isFetchPreviousPageError:y,isFetchingPreviousPage:m,isRefetchError:p&&!w&&!y,isRefetching:n&&!h&&!m}}};function q(e,r){return b(e,R)}const x=async({organizationId:e,page:r=1,limit:t=10,name:a,email:o,phone:n,empRole:u,status:p,department:l,api:w})=>{const{data:h}=await w.get("/department/hr/getallemployee",{params:{organizationId:e,page:r,limit:t,name:a,email:o,phone:n,empRole:u,department:l,status:p}});if(!h.ok)throw new Error(h.message);return h},N=async({empId:e,api:r})=>{const{data:t}=await r.get(`/department/hr/getsingle/${e}`);if(!t.ok)throw new Error(t.message);return t.data},A=async({formData:e,api:r})=>{const{data:t}=await r.post("/department/hr/createemployee",e);if(!t.ok)throw new Error(t.message);return t.data},D=async({empId:e,updates:r,api:t})=>{const{data:a}=await t.put(`/department/hr/update/${e}`,r);if(!a.ok)throw new Error(a.message);return a.data},O=async({empId:e,api:r})=>{const{data:t}=await r.delete(`/department/hr/deleteemployee/${e}`);if(!t.ok)throw new Error(t.message);return t.data},K=async({empId:e,type:r,file:t,api:a})=>{const o=new FormData;o.append("file",t),o.append("type",r);const{data:n}=await a.post(`/department/hr/${e}/uploaddocument`,o,{headers:{"Content-Type":"multipart/form-data"}});if(!n.ok)throw new Error(n.message);return n.data},M=async({empId:e,docId:r,api:t})=>{const{data:a}=await t.delete(`/department/hr/${e}/deletedocument/${r}`);if(!a.ok)throw new Error(a.message);return a.data},c=["owner","staff","CTO"],$=(e,r)=>{const{role:t}=s(),a=i(t);return q({queryKey:["hr","employees",e,{...r}],enabled:!!e&&!!t,initialPageParam:1,queryFn:async({pageParam:o=1})=>{if(!t||!c.includes(t))throw new Error("Not allowed");if(!a)throw new Error("API instance not found for role");return await x({organizationId:e,api:a,...r})},getNextPageParam:o=>{const{page:n,totalPages:u}=o.pagination;return n<u?n+1:void 0},retry:!1,refetchOnWindowFocus:!1})},C=e=>{const{role:r}=s(),t=i(r);return Q({queryKey:["hr","employee",e],queryFn:async()=>{if(!r||!c.includes(r))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await N({empId:e,api:t})},enabled:!!e&&!!r,retry:!1,refetchOnWindowFocus:!1})},B=()=>{const{role:e}=s(),r=i(e);return f({mutationFn:async({formData:t})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await A({formData:t,api:r})},onSuccess:()=>{d.invalidateQueries({queryKey:["hr","employees"]})}})},G=()=>{const{role:e}=s(),r=i(e);return f({mutationFn:async({empId:t,updates:a})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await D({empId:t,updates:a,api:r})},onSuccess:(t,{empId:a})=>{d.invalidateQueries({queryKey:["hr","employee",a]}),d.invalidateQueries({queryKey:["hr","employees"]})}})},W=()=>{const{role:e}=s(),r=i(e);return f({mutationFn:async({empId:t})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await O({empId:t,api:r})},onSuccess:()=>{d.invalidateQueries({queryKey:["hr","employees"]})}})},_=()=>{const{role:e}=s(),r=i(e);return f({mutationFn:async({empId:t,type:a,file:o})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await K({empId:t,type:a,file:o,api:r})},onSuccess:(t,{empId:a})=>{d.invalidateQueries({queryKey:["hr","employee",a]})}})},T=()=>{const{role:e}=s(),r=i(e);return f({mutationFn:async({empId:t,docId:a})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await M({empId:t,docId:a,api:r})},onSuccess:(t,{empId:a})=>{d.invalidateQueries({queryKey:["hr","employee",a]})}})};export{G as a,W as b,_ as c,T as d,B as e,$ as f,C as u};
