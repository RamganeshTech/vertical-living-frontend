import{K as O,u as T,r as o,j as e}from"./index-4xXsHyrq.js";import{a as B}from"./userApi-rQeBn4mX.js";import{a as I}from"./workerApi-pKtDNkJX.js";import{a as q}from"./clientApi-3a6pmJBx.js";import{a as D}from"./CTOApi-vxLpkGBc.js";import{a as K}from"./staffApi-BxxWghz2.js";import{B as V}from"./Button-BmD7QJLN.js";import{L as h}from"./Label-DzCIp4JP.js";import{I as p}from"./Input-Dg780vof.js";import{t}from"./toast-BSC5QTk1.js";import"./useMutation-DAR9sTyS.js";const _=()=>{const[b]=O(),{role:l}=T(),{mutateAsync:P,isPending:g}=K(),{mutateAsync:v,isPending:y}=D(),{mutateAsync:j,isPending:k}=q(),{mutateAsync:N,isPending:C}=I(),{mutateAsync:S,isPending:R}=B(),[r,c]=o.useState(""),[n,d]=o.useState(""),[m,E]=o.useState(!1),[u,U]=o.useState(!1),w=b.get("token"),A=()=>g||y||k||C||R,L=async s=>{var f,x;if(s.preventDefault(),!r||!n){t({title:"Error",variant:"destructive",description:"Both fields are required."});return}if(r!==n){t({title:"Error",variant:"destructive",description:"Passwords do not match."});return}if(!w||!l){t({title:"Error",variant:"destructive",description:"Invalid reset link."});return}const a={password:r,token:w};try{switch(l){case"client":await j(a);break;case"CTO":await v(a);break;case"worker":await N(a);break;case"staff":await P(a);break;case"owner":await S(a);break;default:t({title:"Error",description:"Unknown role type.",variant:"destructive"});return}t({title:"Success",description:"Password reset successfully."}),c(""),d("")}catch(i){t({title:"Error",description:((x=(f=i==null?void 0:i.response)==null?void 0:f.data)==null?void 0:x.message)||"Something went wrong.",variant:"destructive"})}};return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 px-4",children:e.jsxs("form",{onSubmit:L,className:"bg-white shadow-lg rounded-xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-4 text-blue-700",children:"Reset Your Password"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{className:"mb-1 block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{type:m?"text":"password",value:r,onChange:s=>c(s.target.value),placeholder:"Enter new password"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-600 text-lg",onClick:()=>E(s=>!s),children:m?e.jsx("i",{className:"fas fa-eye-slash text-blue-400 hover:text-blue-600 transition-colors"}):e.jsx("i",{className:"fas fa-eye text-blue-400 hover:text-blue-600 transition-colors"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(h,{className:"mb-1 block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{type:u?"text":"password",value:n,onChange:s=>d(s.target.value),placeholder:"Confirm password"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-600 text-lg",onClick:()=>U(s=>!s),children:u?e.jsx("i",{className:"fas fa-eye-slash text-blue-400 hover:text-blue-600 transition-colors"}):e.jsx("i",{className:"fas fa-eye text-blue-400 hover:text-blue-600 transition-colors"})})]})]}),e.jsx(V,{isLoading:A(),type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Reset Password"})]})})};export{_ as default};
