import{u as j,r as R,b as C,j as o,O as L}from"./index-DmIvND9E.js";import{M as b,S as h}from"./MobileSidebar-qXJkFxSU.js";import{S as p,a as z}from"./constants-4IFJeChr.js";import"./CTOApi-DIjozcKW.js";import"./useMutation-CAeBxy3I.js";import"./clientApi-BK8r6VrH.js";import"./staffApi-BdMobX7P.js";import"./userApi-mm52J5xZ.js";import"./workerApi-BhLvN3T4.js";import"./Button-CcLxO5cH.js";import"./toast-BSC5QTk1.js";import"./currentActiveStageApi-B-oA_E4S.js";import"./useQuery-BHdcKCtG.js";import"./roleCheck-DZRqXPrB.js";import"./notificationApi-BSLRsGK8.js";import"./useInfiniteQuery-iAVIpWnU.js";import"./issueDiscussionApi-2NpMuhwV.js";const F={HR:"hr",LOGISTICS:"logistics",PROCUREMENT:"procurement",SHORTLIST:"referencedesign",DESIGNLAB:"design",COMMONORDER:"commonorder",ACCOUNTING:["accounts","billing","payments"],RATECONIG:"materialquote",RATECONIGSTAFF:"materialquote",INTERNALQUOTE:"materialquote",QUOTEVARIENT:"materialquote","QUOTES (CLIENT)":"materialquote",SUBCONTRACT:"subcontract",STAFFTASK:"stafftask",SINGLESTAFFTASK:"stafftask",WORKLIBRARY:"stafftask",MATERIALINVENTORY:"productinventory"},J=({projectId:E,setProjectId:N})=>{const{organizationId:e}=j(),[O,l]=R.useState(!1),[I,u]=R.useState(window.innerWidth<470),{role:T,permission:A}=C(),s=(T==null?void 0:T.toLowerCase())||"",f={PROJECTS:`/organizations/${e}/projects`,ORGANIZATION:`/organizations/${e}`,SHORTLIST:`/organizations/${e}/projects/shortlistdesign`,COMMONORDER:`/organizations/${e}/projects/commonorder`,SUBCONTRACT:`/organizations/${e}/projects/subcontractmain`,HR:`/organizations/${e}/projects/hr`,LOGISTICS:`/organizations/${e}/projects/logistics`,PROCUREMENT:`/organizations/${e}/projects/procurement`,ACCOUNTING:`/organizations/${e}/projects/accounting`,DESIGNLAB:`/organizations/${e}/projects/designlabmain`,RATECONIG:`/organizations/${e}/projects/rateconfig`,RATECONIGSTAFF:`/organizations/${e}/projects/labourrateconfig`,INTERNALQUOTE:`/organizations/${e}/projects/internalquote`,QUOTEVARIENT:`/organizations/${e}/projects/quotevariant`,"QUOTES (CLIENT)":`/organizations/${e}/projects/clientquotes`,WORKLIBRARY:`/organizations/${e}/projects/worklibrary`,STAFFTASK:`/organizations/${e}/projects/stafftask`,SINGLESTAFFTASK:`/organizations/${e}/projects/associatedstafftask`,MATERIALINVENTORY:`/organizations/${e}/projects/materialinventory`},a=Object.keys(p);let i=[];s==="owner"||s==="cto"?i=a.filter(t=>t!=="SINGLESTAFFTASK"):s==="staff"?i=a.filter(t=>t!=="STAFFTASK"&&t!=="WORKLIBRARY"):s==="worker"?i=a.filter(t=>t!=="STAFFTASK"&&t!=="WORKLIBRARY"):s==="client"?i=a.filter(t=>t!=="STAFFTASK"&&t!=="WORKLIBRARY"):i=["PROJECTS","ORGANIZATION"];let r={},S={},n={};return i.forEach(t=>{p[t]&&f[t]&&(r[t]=p[t],S[t]=z[t],n[t]=f[t])}),s!=="owner"&&Object.keys(r).forEach(t=>{const c=F[t];c&&((Array.isArray(c)?c:[c]).some(d=>{const m=A==null?void 0:A[d];return m&&Object.values(m).some(g=>g===!0)})||(delete r[t],delete S[t],delete n[t]))}),R.useEffect(()=>{const t=()=>{u(window.innerWidth<470)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex w-full h-full",children:[I?o.jsx(b,{labels:r,path:n,isOpen:O,onClose:()=>l(!1)}):o.jsx(h,{path:n,labels:r,icons:S}),o.jsx("main",{className:"!w-[100%] h-full p-4",children:o.jsx(L,{context:{projectId:E,setProjectId:N,organizationId:e,isMobile:I,isMobileSidebarOpen:O,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})})};export{J as default};
