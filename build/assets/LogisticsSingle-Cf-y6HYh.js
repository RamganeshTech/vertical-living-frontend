import{b as V,u as O,r as C,j as e}from"./index-D7MAv7ev.js";import{b as U,c as z,f as x,L as G}from"./LogisticsShipmentForm-BnTHl0vH.js";import{C as R,c as q}from"./Card-BfzjSi8a.js";import{S as n}from"./Seperator-BTphdhXd.js";import{B as M}from"./Badge-BS7-mMu2.js";import{B as D}from"./Button-DedhS7G-.js";import{t as w}from"./toast-BSC5QTk1.js";import Q from"./MaterialOverviewLoading-CTC_hAas.js";import"./Label-58KnhCEc.js";import"./Input-BxXWEoUK.js";import"./projectApi-BX12eQUv.js";import"./useQuery-IYS47mTn.js";import"./useMutation-JyxZ92cu.js";import"./roleCheck-CpGScjhV.js";import"./Skeleton-CJFlVgVa.js";const t=({label:l,value:i})=>e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[e.jsxs("span",{children:[l,":"]})," ",e.jsx("span",{className:"text-gray-900",children:i||"-"})]}),d=({title:l,children:i})=>e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-700 border-b border-blue-200 pb-1",children:l}),i]}),_=l=>{switch(l){case"pending":return"secondary";case"assigned":return"outline";case"in_transit":return"default";case"delivered":return"default";case"cancelled":return"secondary";default:return"default"}},ce=()=>{var m,j,g,b,f,v,h,p,N,y;const{id:l,organizationId:i}=V(),P=O(),{data:s,isLoading:A,refetch:I}=U(l),{mutateAsync:L,isPending:T}=z(),[k,E]=C.useState(null),[F,u]=C.useState(!1),B=async()=>{var r,o,S;try{await L({fromDept:"logistics",organizationId:i,projectId:s==null?void 0:s.projectId,upiId:(s==null?void 0:s.vehicleDetails.driverUpiId)||null,totalCost:(r=s==null?void 0:s.vehicleDetails)==null?void 0:r.driverCharge}),w({title:"Success",description:"Details sent to Accounts Department"})}catch(c){w({variant:"destructive",title:"Error",description:((S=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:S.message)||(c==null?void 0:c.message)||"operation failed"})}};if(A)return e.jsx(Q,{});const a=s==null?void 0:s.vehicleDetails;return e.jsxs("div",{className:" max-h-full overflow-y-auto max-w-full space-y-8",children:[e.jsxs("header",{className:"flex flex-col items-start sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-gray-200 pb-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{onClick:()=>P(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-800",children:["Shipment: ",(s==null?void 0:s.shipmentNumber)||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2 items-start ",children:[e.jsxs("div",{className:"flex flex-col items-start space-y-1",children:[e.jsx(D,{variant:"primary",isLoading:T,onClick:B,children:"Send To Accounts Dept"}),e.jsxs("span",{className:"text-xs text-blue-500 mx-auto",children:[e.jsx("strong",{children:"*"})," Click the button to send the ",e.jsx("br",{})," details to  accounts dept"]})]}),e.jsxs(D,{size:"md",variant:"primary",onClick:()=>{E(s),u(!0)},children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]})]})]}),e.jsx(R,{children:e.jsxs(q,{className:"space-y-8 p-6",children:[e.jsx(d,{title:"Shipment Info",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{label:"Scheduled Date",value:x(s==null?void 0:s.scheduledDate)}),e.jsx(t,{label:"Shipment Status",value:e.jsx(M,{variant:_(s==null?void 0:s.status),children:s==null?void 0:s.status})})]})}),e.jsx(n,{}),e.jsx(d,{title:"Vehicle Info",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(t,{label:"Vehicle Number",value:a==null?void 0:a.vehicleNumber}),e.jsx(t,{label:"Vehicle Type",value:a==null?void 0:a.vehicleType}),e.jsx(t,{label:"Driver Name",value:(m=a==null?void 0:a.driver)==null?void 0:m.name}),e.jsx(t,{label:"Driver Phone",value:(j=a==null?void 0:a.driver)==null?void 0:j.phone}),e.jsx(t,{label:"License Number",value:(g=a==null?void 0:a.driver)==null?void 0:g.licenseNumber}),e.jsx(t,{label:"Driver Charge",value:`â‚¹ ${a==null?void 0:a.driverCharge}`}),e.jsx(t,{label:"Upi Id",value:a==null?void 0:a.driverUpiId})]})}),e.jsx(n,{}),e.jsx(d,{title:"Origin & Destination",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-600 font-bold mb-1",children:"Origin"}),e.jsx(t,{label:"Address",value:(b=s==null?void 0:s.origin)==null?void 0:b.address}),e.jsx(t,{label:"Contact Person",value:(f=s==null?void 0:s.origin)==null?void 0:f.contactPerson}),e.jsx(t,{label:"Contact Phone",value:(v=s==null?void 0:s.origin)==null?void 0:v.contactPhone})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-600 font-bold mb-1",children:"Destination"}),e.jsx(t,{label:"Address",value:(h=s==null?void 0:s.destination)==null?void 0:h.address}),e.jsx(t,{label:"Contact Person",value:(p=s==null?void 0:s.destination)==null?void 0:p.contactPerson}),e.jsx(t,{label:"Contact Phone",value:(N=s==null?void 0:s.destination)==null?void 0:N.contactPhone})]})]})}),e.jsx(n,{}),e.jsx(d,{title:"Timing Schedule",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(t,{label:"Actual Pickup Time",value:x(s==null?void 0:s.actualPickupTime)}),e.jsx(t,{label:"Actual Delivery Time",value:x(s==null?void 0:s.actualDeliveryTime)})]})}),((y=s==null?void 0:s.items)==null?void 0:y.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsx(d,{title:"Shipment Items",children:e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-sm font-semibold text-gray-700",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Item Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Quantity"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:s.items.map((r,o)=>e.jsxs("tr",{className:"text-sm text-gray-800",children:[e.jsx("td",{className:"px-4 py-2",children:r==null?void 0:r.name}),e.jsx("td",{className:"px-4 py-2",children:r==null?void 0:r.quantity})]},o))})]})})})]}),(s==null?void 0:s.notes)&&e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsx(d,{title:"Notes",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})})]})]})}),F&&e.jsx(G,{shipment:k,onClose:()=>{u(!1),I()},organizationId:i})]})};export{ce as default};
