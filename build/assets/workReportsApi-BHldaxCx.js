import{u as w}from"./useQuery-CXWUgeEV.js";import{u as c}from"./useMutation-5BwurMj6.js";import{c as s,q as l}from"./index-C2yypHlC.js";import{g as i}from"./roleCheck-ZvNAcsbM.js";const u=async({projectId:e,organizationId:o,payload:r,api:a})=>{const{data:t}=await a.post(`/workreports/create/${e}/${o}`,r);if(!t.ok)throw new Error(t.message);return t.data},f=async({projectId:e,api:o})=>{const{data:r}=await o.get(`/workreports/getreports/${e}`);if(!r.ok)throw new Error(r.message);return r.data},d=async({projectId:e,id:o,dailyTaskId:r,api:a})=>{const{data:t}=await a.get(`/workreports/workimages/${e}/${o}/${r}`);if(!t.ok)throw new Error(t.message);return t.data},p=async({id:e,api:o})=>{const{data:r}=await o.delete(`/workreports/delete/${e}`);if(!r.ok)throw new Error(r.message);return r.data},g=()=>{const e=["owner","staff","CTO"],{role:o}=s(),r=i(o);return c({mutationFn:async({projectId:a,organizationId:t,payload:n})=>{if(!o||!e.includes(o))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await u({projectId:a,organizationId:t,payload:n,api:r})},onSuccess:(a,{projectId:t})=>{l.invalidateQueries({queryKey:["workreports",t]})}})},R=e=>{const o=["owner","staff","CTO","client"],{role:r}=s(),a=i(r);return w({queryKey:["workreports",e],queryFn:async()=>{if(!r||!o.includes(r))throw new Error("not allowed to fetch this data");if(!a)throw new Error("API instance not found for role");return await f({projectId:e,api:a})},enabled:!!e&&!!r})},E=()=>{const e=["owner","staff","CTO"],{role:o}=s(),r=i(o);return c({mutationFn:async({id:a})=>{if(!o||!e.includes(o))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await p({id:a,api:r})},onSuccess:(a,{projectId:t})=>{l.invalidateQueries({queryKey:["workreports",t]})}})},q=(e,o,r)=>{const a=["owner","staff","CTO","client"],{role:t}=s(),n=i(t);return w({queryKey:["workreportimages",e],queryFn:async()=>{if(!t||!a.includes(t))throw new Error("not allowed to fetch this data");if(!n)throw new Error("API instance not found for role");return await d({projectId:e,id:o,dailyTaskId:r,api:n})},enabled:!!e&&!!t})};export{E as a,q as b,g as c,R as u};
