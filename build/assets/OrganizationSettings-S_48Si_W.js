import{u as y,r as N,j as s,t as g,aD as h,B as j}from"./index-BAM0eJUz.js";import{u as w,i as C}from"./orgApi-DGTdT7vR.js";import{I as E}from"./Input-1UBXZqEj.js";import{B as S}from"./Breadcrumb-BmsgLXgK.js";function I(){const{organizationId:u}=y();let{data:e,isLoading:p}=w(u);Array.isArray(e)&&(e=e[0]);const l=C(),[r,n]=N.useState(null),[a,d]=N.useState(""),b=[{label:"Organization",path:`/organizations/${u}`},{label:"Settings",path:`/organizations/${u}/settings`}],o=(t,i)=>{n(t),d(i||"")},c=async t=>{var i,v;try{if(console.log("field"),t==="organizationPhoneNo"&&!/^\d{10}$/.test(a)){g({title:"Invalid Phone Number",description:"Please enter a valid 10-digit phone number.",variant:"destructive"});return}if(!a.trim()&&t!=="gstin"){g({title:"Error",description:"Field cannot be empty",variant:"destructive"});return}console.log("111111111111");const x=await l.mutateAsync({orgsId:u,updateField:{[t]:a}});console.log("res",x),g({title:"Success",description:`${t} updated successfully`}),n(null)}catch(x){g({title:"Error",description:((v=(i=x==null?void 0:x.response)==null?void 0:i.data)==null?void 0:v.message)||(x==null?void 0:x.message)||"Update failed",variant:"destructive"})}},f=async t=>{if((e==null?void 0:e.mode)!==t)try{await l.mutateAsync({orgsId:u,updateField:{mode:t}}),g({title:"Success",description:`Switched to ${t} mode`})}catch{g({title:"Error",description:"Failed to update mode",variant:"destructive"})}};return p?s.jsx(P,{}):s.jsxs("div",{className:"flex flex-col w-full h-full bg-gradient-to-br from-blue-50 via-white to-blue-100 overflow-y-auto custom-scrollbar",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-md border-b border-blue-100 sticky top-0 z-20 w-full",children:s.jsx("div",{className:"max-w-full mx-auto px-6 py-6",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx("i",{className:"fas fa-cog mr-3 text-blue-600"}),"Organization Settings"]}),s.jsx(S,{paths:b})]})})}),s.jsxs("div",{className:"p-6 space-y-8 w-full",children:[s.jsxs("div",{className:"w-full bg-white border border-blue-200 rounded-2xl shadow-sm p-8 overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-600"}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center text-blue-600",children:s.jsx("i",{className:"fas fa-microchip text-xl"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Process Automation Mode"}),s.jsx("p",{className:"text-gray-500 mt-1 max-w-2xl",children:"Choose between manual staff verification or automated 30-minute auto-transfer to payment department. This setting affects procurement and billing workflows globally."})]})]}),s.jsxs("div",{className:"flex items-center p-1.5 bg-gray-100 rounded-2xl border border-gray-200 w-fit",children:[s.jsxs("button",{onClick:()=>f("manual"),className:`flex items-center gap-2 px-6 py-3 rounded-xl text-sm font-bold transition-all ${(e==null?void 0:e.mode)==="manual"?"bg-white text-blue-600 shadow-lg scale-105":"text-gray-400 hover:text-gray-600"}`,children:[s.jsx("i",{className:"fas fa-hand-pointer"})," Manual"]}),s.jsxs("button",{onClick:()=>f("automation"),className:`flex items-center gap-2 px-6 py-3 rounded-xl text-sm font-bold transition-all ${(e==null?void 0:e.mode)==="automation"?"bg-blue-600 text-white shadow-lg scale-105":"text-gray-400 hover:text-gray-600"}`,children:[s.jsx("i",{className:"fas fa-bolt"})," Automation"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[s.jsx(m,{label:"Organization Name",icon:"fa-building",value:e==null?void 0:e.organizationName,isEditing:r==="organizationName",onEdit:()=>o("organizationName",e==null?void 0:e.organizationName),onSave:()=>c("organizationName"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending}),s.jsx(m,{label:"GSTIN Number",icon:"fa-file-invoice",value:e==null?void 0:e.gstin,isEditing:r==="gstin",onEdit:()=>o("gstin",e==null?void 0:e.gstin),onSave:()=>c("gstin"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending}),s.jsx(m,{label:"Registered Entiry",icon:"fa-building",value:e==null?void 0:e.registeredEntity,isEditing:r==="registeredEntity",onEdit:()=>o("registeredEntity",e==null?void 0:e.registeredEntity),onSave:()=>c("registeredEntity"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending}),s.jsx(m,{label:"Contact Phone",icon:"fa-phone-alt",value:e==null?void 0:e.organizationPhoneNo,isEditing:r==="organizationPhoneNo",onEdit:()=>o("organizationPhoneNo",e==null?void 0:e.organizationPhoneNo),onSave:()=>c("organizationPhoneNo"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending}),s.jsx(m,{label:"Secondary Contact",icon:"fa-phone-volume",value:e==null?void 0:e.secondaryPhoneNo,inputType:"tel",isEditing:r==="secondaryPhoneNo",onEdit:()=>o("secondaryPhoneNo",e==null?void 0:e.secondaryPhoneNo),onSave:()=>c("secondaryPhoneNo"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending}),s.jsx(m,{label:"Official Email",icon:"fa-envelope",value:e==null?void 0:e.email,inputType:"email",isEditing:r==="email",onEdit:()=>o("email",e==null?void 0:e.email),onSave:()=>c("email"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending}),s.jsx(m,{label:"Website",icon:"fa-globe",value:e==null?void 0:e.website,inputType:"url",isEditing:r==="website",onEdit:()=>o("website",e==null?void 0:e.website),onSave:()=>c("website"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending}),s.jsx("div",{className:"md:col-span-2 xl:col-span-3",children:s.jsx(m,{label:"Registered Office Address",icon:"fa-map-marked-alt",value:e==null?void 0:e.address,isEditing:r==="address",onEdit:()=>o("address",e==null?void 0:e.address),onSave:()=>c("address"),onCancel:()=>n(null),onChange:d,tempValue:a,loading:l.isPending,isTextArea:!0})})]})]})]})}function m({label:u,icon:e,value:p,isEditing:l,onEdit:r,onSave:n,inputType:a="text",onCancel:d,onChange:b,tempValue:o,loading:c,isTextArea:f}){return s.jsxs("div",{className:"group bg-white border border-blue-100 rounded-2xl p-6 transition-all hover:shadow-md hover:border-blue-300",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center text-blue-500 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:s.jsx("i",{className:`fas ${e} text-sm`})}),s.jsx("span",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider",children:u})]}),!l&&s.jsx("button",{onClick:r,className:"text-blue-500 hover:text-blue-700 p-1",children:s.jsx("i",{className:"fas fa-pencil-alt text-xs"})})]}),l?s.jsxs("div",{className:"space-y-4",children:[f?s.jsx("textarea",{className:"w-full p-4 border-2 border-blue-100 rounded-xl focus:border-blue-500 outline-none text-gray-700 bg-blue-50/30",rows:3,value:o,onChange:t=>b(t.target.value)}):s.jsx(E,{className:"border-blue-100 focus:border-blue-500 h-12 rounded-xl bg-blue-50/30",value:o,onChange:t=>{let i=t.target.value;(u==="Contact Phone"||a==="tel")&&(i=i.replace(/\D/g,""),i.length>10&&(i=i.slice(0,10))),b(i)}}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(j,{size:"sm",variant:"ghost",onClick:d,children:"Cancel"}),s.jsx(j,{size:"sm",className:"bg-blue-600 text-white px-6 rounded-lg",onClick:n,isLoading:c,children:"Save Changes"})]})]}):s.jsx("div",{className:"text-lg font-semibold text-gray-800 break-words whitespace-pre-wrap pl-11",children:p||s.jsx("span",{className:"text-gray-300 font-normal italic",children:"No data provided"})})]})}function P(){return s.jsxs("div",{className:"w-full p-8 space-y-8",children:[s.jsx(h,{className:"h-12 w-1/3"}),s.jsx(h,{className:"h-40 w-full rounded-2xl"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(h,{className:"h-32 rounded-2xl"}),s.jsx(h,{className:"h-32 rounded-2xl"}),s.jsx(h,{className:"h-32 rounded-2xl"})]})]})}export{I as default};
