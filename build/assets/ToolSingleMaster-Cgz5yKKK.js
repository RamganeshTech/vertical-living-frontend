import{u as F,j as r,M as T,t as i}from"./index-BAM0eJUz.js";import{b as U,c as v,d as x,e as D}from"./toolMasterApi-DZ9UD44t.js";import{T as j}from"./ToolMasterForm-Db4f7stu.js";import{T as E}from"./ToolHistoryTimeline-Dy_2NgAz.js";import"./useInfiniteQuery-BGz0VllC.js";import"./Label-C8i6KaZe.js";import"./ImageGalleryMain-B3g6b13d.js";import"./downloadFile-BbGV_BaX.js";import"./index-C8BdbktQ.js";import"./ShortListMain-CkHPlJB3.js";import"./Card-CdxfjEr-.js";import"./SearchSelectNew-IGAHiELy.js";import"./toolOtpApi-CWL7ydhf.js";import"./dateFormator-BGKi5rfZ.js";const G=()=>{const{id:e,organizationId:n}=F(),{data:m,isLoading:p,isError:u,error:g,refetch:d}=U(e),c=v(),s=x(),l=D(),y=async(o,t)=>{try{if(await c.mutateAsync({id:e,updateData:o}),t.length>0){const a=new FormData;t.forEach(w=>a.append("files",w)),await s.mutateAsync({id:e,formData:a})}await d(),i({title:"Success",description:"Tool details updated"})}catch(a){i({title:"Update Failed",description:a.message,variant:"destructive"})}},f=async o=>{try{const t=new FormData;o.forEach(a=>t.append("files",a)),await s.mutateAsync({id:e,formData:t}),i({title:"Success",description:"images updloaded"})}catch(t){i({title:"Update Failed",description:t.message,variant:"destructive"})}},h=async o=>{try{const t=new FormData;o.forEach(a=>t.append("warrantyFiles",a)),await l.mutateAsync({id:e,formData:t}),i({title:"Success",description:"warranty files updloaded"})}catch(t){i({title:"Update Failed",description:t.message,variant:"destructive"})}};return p?r.jsx(T,{}):u?r.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",g.message]}):r.jsxs("main",{className:"max-h-full space-y-2 overflow-y-auto  !bg-white/20",children:[r.jsx(j,{mode:"view",initialData:m,organizationId:n,onSubmit:y,refetch:d,onQuickUpload:f,onQuickUploadWarranty:h,isSubmitting:c.isPending||s.isPending,isWarrantyUploading:l.isPending,isToolUploading:s.isPending}),r.jsx(E,{toolId:e,organizationId:n})]})};export{G as default};
