import{a as qe,u as Pe,r as c,b as Ee,j as e,M as Re,B as x,I as o,t as g}from"./index-hYGmCEO1.js";import{d as Me,c as Ue,e as Le}from"./modularUnitNewApi-lIopbgmD.js";import{C as u,a as p,b as f,d as j}from"./Card-ChYAICVg.js";import{L as m}from"./Label-hkBviWcw.js";import{T as ie}from"./TextArea-BRgMMCHU.js";import{d as $e}from"./downloadFile-CC_wTDgr.js";const Ve=()=>{var Y,Z,ee,se,ae,te,re,le;const O=qe(),{unitId:k}=Pe(),[n,V]=c.useState(!1),[N,F]=c.useState("product"),[I,C]=c.useState(0),{data:t,isLoading:ne}=Me(k),{mutateAsync:ce,isPending:S}=Ue(),{mutateAsync:de,isPending:oe}=Le(),[y,A]=c.useState([{key:"no",label:"No"},{key:"partCode",label:"Part Code"},{key:"partName",label:"Part Name"},{key:"l",label:"L"},{key:"w",label:"W"},{key:"t",label:"T"},{key:"coreMaterial",label:"Core Material"},{key:"externalFinish",label:"External Finish"},{key:"internalFinish",label:"Internal Finish"},{key:"grain",label:"Grain"}]),[i,d]=c.useState({serialNo:"",category:"",description:"",dimention:{height:0,width:0,depth:0},totalAreaSqFt:"",materialsNeeded:"",fabricationCost:"",timeRequired:"",attributes:[],parts:[]}),[D,q]=c.useState([]),[P,E]=c.useState([]),[R,M]=c.useState([]),[U,H]=c.useState([]),[me,L]=c.useState(!1),[xe,$]=c.useState(!1),[he,T]=c.useState(!1),[ue,W]=c.useState(!1),[z,J]=c.useState("");c.useEffect(()=>{var s,a,r,l,h,v;t&&d({serialNo:t.serialNo||"",category:t.category||"",description:t.description||"",dimention:{height:((s=t.dimention)==null?void 0:s.height)||0,width:((a=t.dimention)==null?void 0:a.width)||0,depth:((r=t.dimention)==null?void 0:r.depth)||0},totalAreaSqFt:((l=t.totalAreaSqFt)==null?void 0:l.toString())||"",materialsNeeded:t.materialsNeeded||"",fabricationCost:((h=t.fabricationCost)==null?void 0:h.toString())||"",timeRequired:((v=t.timeRequired)==null?void 0:v.toString())||"",attributes:t.attributes||[],parts:t.parts||[]})},[t]),c.useEffect(()=>{if(t&&t.parts&&t.parts.length>0){const s=t.parts[0],r=Object.keys(s).filter(l=>l!=="_id").map(l=>({key:l,label:l.charAt(0).toUpperCase()+l.slice(1).replace(/_/g," ")}));r.find(l=>l.key==="no")||r.unshift({key:"no",label:"No"}),A(r)}},[t]);const G=(s,a)=>{d(r=>({...r,[s]:a}))},B=(s,a)=>{const r=Math.max(0,Number(a)||0);d(l=>({...l,dimention:{...l.dimention,[s]:r}}))},b=s=>{(s.key==="-"||s.key==="e"||s.key==="E"||s.key==="+")&&s.preventDefault()},K=(s,a)=>{const r=a.replace(/-/g,"");d(l=>({...l,[s]:r}))},pe=s=>{const a=Array.from(s.target.files||[]);q(a),L(!1)},ge=s=>{const a=Array.from(s.target.files||[]);E(a),$(!1)},fe=s=>{const a=Array.from(s.target.files||[]);M(a),T(!1)},je=s=>{const a=Array.from(s.target.files||[]);H(a),W(!1)},Q=()=>{z.trim()&&(d(s=>({...s,attributes:[...s.attributes,z.trim()]})),J(""))},Ne=s=>{d(a=>({...a,attributes:a.attributes.filter((r,l)=>l!==s)}))},{role:be,permission:_}=Ee(),ye=be==="owner"||((Y=_==null?void 0:_.modularunit)==null?void 0:Y.edit),X=()=>{var s,a,r,l,h,v;n&&(t&&d({serialNo:t.serialNo||"",category:t.category||"",description:t.description||"",dimention:{height:((s=t.dimention)==null?void 0:s.height)||0,width:((a=t.dimention)==null?void 0:a.width)||0,depth:((r=t.dimention)==null?void 0:r.depth)||0},totalAreaSqFt:((l=t.totalAreaSqFt)==null?void 0:l.toString())||"",materialsNeeded:t.materialsNeeded||"",fabricationCost:((h=t.fabricationCost)==null?void 0:h.toString())||"",timeRequired:((v=t.timeRequired)==null?void 0:v.toString())||"",attributes:t.attributes||[],parts:t.parts||[]}),q([]),E([]),M([]),H([]),L(!1),$(!1),T(!1),W(!1),n&&i.parts.length===0&&d(De=>({...De,parts:[{no:1,partCode:"",partName:"",l:0,w:0,d:0,coreMaterial:"",externalFinish:"",internalFinish:"",grain:""}]}))),V(!n)},ve=async()=>{var a,r;if(!i.category){g({title:"Error",description:"Category is required",variant:"destructive"});return}if(!i.fabricationCost||Number(i.fabricationCost)<=0){g({title:"Error",description:"Valid fabrication cost is required",variant:"destructive"});return}const s={...i,totalAreaSqFt:i.totalAreaSqFt||void 0,fabricationCost:i.fabricationCost||void 0,timeRequired:i.timeRequired||void 0,parts:JSON.stringify(i.parts)};try{await ce({unitId:k,formValues:s,productImages:D,images2d:P,images3d:R,replaceProductImages:me,replace2dImages:xe,replace3dImages:he,replaceCutlistDoc:ue,cutlistDoc:U}),g({title:"Success",description:"Product updated successfully!"}),V(!1),q([]),E([]),M([]),L(!1),$(!1),T(!1)}catch(l){g({title:"Error",description:((r=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to update product",variant:"destructive"})}},Ce=async()=>{var s,a;try{await de({unitId:k}),g({title:"Success",description:"Pdf Generated successfully!"})}catch(r){g({title:"Error",description:((a=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to generate pdf",variant:"destructive"})}},we=()=>{d(s=>({...s,parts:[...s.parts,{no:s.parts.length+1,partCode:"",partName:"",l:0,w:0,t:0,coreMaterial:"",externalFinish:"",internalFinish:"",grain:""}]}))},ke=s=>{d(a=>({...a,parts:a.parts.filter((r,l)=>l!==s)}))},Fe=()=>{const s=prompt("Enter new field name (e.g., Edge Banding):");if(!s)return;const a=s.toLowerCase().replace(/\s+/g,"_");A(r=>[...r,{key:a,label:s}]),d(r=>({...r,parts:r.parts.map(l=>({...l,[a]:""}))}))},Ie=s=>{s!=="no"&&(A(a=>a.filter(r=>r.key!==s)),d(a=>({...a,parts:a.parts.map(r=>{const l={...r};return delete l[s],l})})))},Se=(s,a,r)=>{d(l=>{const h=[...l.parts];return h[s]={...h[s],[a]:r},{...l,parts:h}})},Ae=async s=>{var a,r;try{await $e({src:s==null?void 0:s.url,alt:s.originalName}),g({title:"Success",description:"PDF Downloaded successfully"})}catch(l){g({title:"Error",description:((r=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:r.message)||(l==null?void 0:l.message)||"Failed to generate PDF",variant:"destructive"})}},w=(()=>{if(!t)return[];switch(N){case"product":return t.productImages||[];case"2d":return t["2dImages"]||[];case"3d":return t["3dImages"]||[];default:return[]}})();return ne?e.jsx(Re,{}):t?e.jsxs("main",{className:"max-h-full overflow-y-auto flex flex-col  bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-full mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>O(-1),className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t.category||"Untitled category"}),t.serialNo&&e.jsxs("p",{className:"text-sm text-gray-500 font-semibold",children:["Unit No: ",e.jsx("span",{className:"text-gray-900",children:t.serialNo})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!n&&ye&&e.jsxs(x,{onClick:X,className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]}),e.jsx(x,{onClick:Ce,isLoading:oe,className:"min-w-[120px]",children:"Generate Pdf"}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{variant:"outline",onClick:X,disabled:S,children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(x,{onClick:ve,isLoading:S,className:"min-w-[120px]",children:S?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save"]})})]})]})]})}),e.jsx("section",{className:"flex-1  custom-scrollbar p-3",children:e.jsx("div",{className:"max-w-full !max-h-full  mx-auto p-3",children:e.jsxs("div",{className:"grid grid-cols-1  lg:grid-cols-4 gap-6",children:[e.jsxs("section",{className:`lg:col-span-2 h-[calc(100vh-${n?"90px":"40px"})] overflow-y-auto space-y-6 custom-scrollbar`,children:[e.jsx(u,{children:e.jsxs(p,{className:"!p-2",children:[e.jsx("div",{className:"aspect-video bg-gray-100 relative rounded-lg",children:w.length>0?e.jsx("img",{src:(Z=w[I])==null?void 0:Z.url,alt:`${N} image ${I+1}`,className:"w-full h-full object-contain rounded-lg"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("i",{className:"fas fa-image text-6xl mb-4"}),e.jsxs("p",{children:["No ",N," images available"]})]})})}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>{F("product"),C(0)},className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${N==="product"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"fas fa-images mr-2"}),"Product Images (",((ee=t.productImages)==null?void 0:ee.length)||0,")"]}),e.jsxs("button",{onClick:()=>{F("2d"),C(0)},className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${N==="2d"?"bg-cyan-50 text-cyan-600 border-b-2 border-cyan-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"fas fa-draw-polygon mr-2"}),"2D Images (",((se=t["2dImages"])==null?void 0:se.length)||0,")"]}),e.jsxs("button",{onClick:()=>{F("3d"),C(0)},className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${N==="3d"?"bg-indigo-50 text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"fas fa-cube mr-2"}),"3D Images (",((ae=t["3dImages"])==null?void 0:ae.length)||0,")"]})]}),w.length>0&&e.jsx("div",{className:"p-4 border-t",children:e.jsx("div",{className:"grid grid-cols-3 gap-1 h-full max-h-[150px] overflow-y-auto ",children:w.map((s,a)=>e.jsx("button",{onClick:()=>C(a),className:`aspect-square h-full w-full rounded-lg overflow-hidden border-2 transition-all ${I===a?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("img",{src:s.url,alt:`Thumbnail ${a+1}`,className:"w-full h-full object-cover"})},a))})})]})}),n&&e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt text-blue-600"}),"Upload New Images"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"productImages",children:"Product Images"}),e.jsx(o,{id:"productImages",type:"file",accept:"image/*",multiple:!0,onChange:pe,className:"cursor-pointer"}),D.length>0&&e.jsxs("p",{className:"text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),D.length," new image(s) selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"images2d",children:"2D Design Images"}),e.jsx(o,{id:"images2d",type:"file",accept:"image/*",multiple:!0,onChange:ge,className:"cursor-pointer"}),P.length>0&&e.jsxs("p",{className:"text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),P.length," new image(s) selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"images3d",children:"3D Render Images"}),e.jsx(o,{id:"images3d",type:"file",accept:"image/*",multiple:!0,onChange:fe,className:"cursor-pointer"}),R.length>0&&e.jsxs("p",{className:"text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),R.length," new image(s) selected"]})]}),e.jsxs("p",{className:"text-xs text-orange-600",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Note: Uploading new images will replace existing images of that type"]})]})]})]}),e.jsxs("section",{className:"overflow-y-auto !max-h-[100%] h-[calc(100vh-120px)]  col-span-2  space-y-6 custom-scrollbar ",children:[e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-info-circle text-blue-600"}),"Basic Information"]})}),e.jsx(p,{className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"category",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"Category",placeholder:"Enter Category",value:i.category,onChange:s=>G("category",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"fabricationCost",children:["Fabrication Cost (â‚¹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"fabricationCost",type:"number",min:"0",step:"0.01",placeholder:"Enter fabrication cost",value:i.fabricationCost,onChange:s=>K("fabricationCost",s.target.value),onKeyDown:b,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"timeRequired",children:"Time Required (days)"}),e.jsx(o,{id:"timeRequired",type:"number",min:"0",placeholder:"Enter time required",value:i.timeRequired,onChange:s=>K("timeRequired",s.target.value),onKeyDown:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(ie,{id:"description",placeholder:"Enter product description",value:i.description,onChange:s=>G("description",s.target.value),rows:4})]})]}):e.jsxs("section",{className:"flex gap-2  justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Category"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-600"}),e.jsx("span",{className:"font-medium capitalize",children:t.category||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Fabrication Cost"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-hammer text-blue-600"}),e.jsx("span",{className:"font-medium capitalize",children:((te=t.fabricationCost)==null?void 0:te.toLocaleString())||0})]})]}),t.timeRequired&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Time Required"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-clock text-blue-600"}),e.jsxs("span",{className:"font-medium capitalize",children:[t.timeRequired," days"]})]})]}),t.serialNo&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Unit No:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-barcode text-blue-600"}),e.jsx("span",{className:"font-medium capitalize",children:t.serialNo})]})]}),t.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:t.description})]})]})})]}),e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-ruler-combined text-purple-600"}),"Dimensions"]})}),e.jsx(p,{className:"space-y-4",children:n?e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"height",className:"text-xs",children:"Height (mm)"}),e.jsx(o,{id:"height",type:"number",min:"0",placeholder:"H",value:i.dimention.height||"",onChange:s=>B("height",s.target.value),onKeyDown:b,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"width",className:"text-xs",children:"Width (mm)"}),e.jsx(o,{id:"width",type:"number",min:"0",placeholder:"W",value:i.dimention.width||"",onChange:s=>B("width",s.target.value),onKeyDown:b,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"depth",className:"text-xs",children:"Depth (mm)"}),e.jsx(o,{id:"depth",type:"number",min:"0",placeholder:"D",value:i.dimention.depth||"",onChange:s=>B("depth",s.target.value),onKeyDown:b,className:"text-sm"})]})]}):e.jsx("div",{className:" rounded-lg p-3",children:e.jsx("div",{className:"flex items-center gap-2 font-semibold text-gray-700",children:(t==null?void 0:t.dimention)&&((re=Object.entries(t.dimention))==null?void 0:re.map(([s,a],r)=>{var l;return e.jsxs(c.Fragment,{children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsxs("span",{className:"text-[16px] text-gray-500",children:[s[0].toUpperCase()+s.slice(1),":"]})," ",a||0,"mm"]}),r!==((l=Object.keys(t.dimention))==null?void 0:l.length)-1&&e.jsx("span",{className:"text-[12px] text-gray-500",children:","})]},r)}))})})})]}),e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-expand text-blue-600"}),"Area & Materials"]})}),e.jsx(p,{className:"space-y-2",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"totalAreaSqFt",children:"Total Area (sq ft)"}),e.jsx(o,{id:"totalAreaSqFt",type:"number",min:"0",step:"0.01",placeholder:"Enter total area",value:i.totalAreaSqFt,onChange:s=>K("totalAreaSqFt",s.target.value),onKeyDown:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"materialsNeeded",children:"Materials Needed"}),e.jsx(ie,{id:"materialsNeeded",placeholder:"Enter materials needed",value:i.materialsNeeded,onChange:s=>G("materialsNeeded",s.target.value),rows:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-2 flex gap-2",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-expand"}),"Total Area:"]}),e.jsxs("span",{className:"font-semibold",children:[t.totalAreaSqFt||"N/A"," sq ft"]})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Materials Needed: "}),e.jsx("p",{className:"text-gray-700",children:t.materialsNeeded||"N/A"})]})]})})]}),e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar text-gray-600"}),"CutList Doc"]})}),e.jsx(p,{className:"space-y-3",children:n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsx(o,{id:"cutlistdoc",type:"file",accept:"pdf/*",multiple:!0,onChange:je,className:"cursor-pointer text-xs"}),U.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:U.map((s,a)=>e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[e.jsx("i",{className:"far fa-file-pdf mr-1 text-red-500"}),s.name]},a))})]})}):e.jsx(e.Fragment,{children:t.cutlistDoc&&t.cutlistDoc.length>0?e.jsx("div",{className:"mt-2 space-y-2",children:t.cutlistDoc.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md border border-gray-100 group",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 truncate",children:[e.jsx("i",{className:"far fa-file-pdf text-red-500 text-sm"}),e.jsx("span",{className:"text-xs font-medium text-gray-700 truncate",children:s.originalName||`Document ${a+1}`})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 bg-blue-100 px-3 py-2 rounded-2xl hover:text-blue-800 text-[14px] font-semibold flex items-center gap-1 transition-colors",children:[e.jsx("i",{className:"fas fa-eye"}),"View"]}),e.jsx(x,{variant:"secondary",onClick:()=>Ae(s),className:"border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400",children:"Download PDF"})]})]},a))}):e.jsx("p",{className:"text-xs text-gray-400 italic",children:"No documents uploaded"})})})]}),e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tags text-orange-600"}),"Attributes"]})}),e.jsx(p,{className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{placeholder:"Add attribute (e.g., modern, wooden)",value:z,onChange:s=>J(s.target.value),onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),Q())},className:"text-sm"}),e.jsx(x,{type:"button",onClick:Q,variant:"outline",size:"sm",className:"px-3",children:e.jsx("i",{className:"fas fa-plus"})})]}),i.attributes.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.attributes.map((s,a)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs flex items-center gap-1.5",children:[s,e.jsx("button",{type:"button",onClick:()=>Ne(a),className:"hover:text-red-600 transition-colors",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]},a))})]}):e.jsx(e.Fragment,{children:t.attributes&&t.attributes.length>0?e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.attributes.map((s,a)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-star text-[10px]"}),s]},a))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No attributes added"})})})]}),e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar text-gray-600"}),"Metadata"]})}),e.jsxs(p,{className:"space-y-3",children:[t.createdAt&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar-plus"}),"Created At"]}),e.jsx("span",{className:"font-medium",children:new Date(t.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})})]}),t.updatedAt&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-calendar-check"}),"Updated At"]}),e.jsx("span",{className:"font-medium",children:new Date(t.updatedAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})})]})]})]})]})]})})}),e.jsx("section",{className:"w-full",children:e.jsxs(u,{className:"shadow-sm border-none",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between bg-white border-b",children:[e.jsxs(j,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-th-list text-blue-600"}),"Cutlist Details"]}),n&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{type:"button",size:"sm",variant:"outline",onClick:Fe,children:[e.jsx("i",{className:"fas fa-columns mr-1"})," Add Field"]}),e.jsxs(x,{type:"button",size:"sm",onClick:we,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Row"]})]})]}),e.jsx(p,{className:"p-0 overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed text-left border-collapse min-w-[1200px]",children:[e.jsx("thead",{className:"bg-gray-50 text-[10px] uppercase text-gray-600",children:e.jsxs("tr",{children:[y.map((s,a)=>e.jsx("th",{className:`
                                                bg-blue-50
          p-3 border-b border-r border-blue-200 text-[11px] font-bold uppercase tracking-wider text-blue-700 relative group
          ${a===0?"rounded-tl-xl":""} 
          ${!n&&a===y.length-1?"rounded-tr-xl":""}
        `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[s.label,n&&s.key!=="no"&&e.jsx("button",{type:"button",onClick:()=>Ie(s.key),className:"ml-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"fas fa-times-circle"})})]})},s.key)),n&&e.jsx("th",{className:"p-2 border-b border-blue-100 text-[11px] font-bold uppercase tracking-wider text-blue-700 text-center bg-blue-50",children:"Action"})]})}),e.jsx("tbody",{className:"text-sm",children:((le=i==null?void 0:i.parts)==null?void 0:le.length)>0?e.jsx(e.Fragment,{children:i.parts.map((s,a)=>e.jsxs("tr",{className:"hover:bg-blue-50/40 transition-colors group",children:[y.map(r=>e.jsx("td",{className:"p-0 border border-r border-blue-200",children:r.key==="no"?e.jsx("div",{className:"text-center font-medium text-gray-500 py-3 bg-gray-50/30",children:a+1}):e.jsx("div",{className:"relative min-h-[45px] flex items-center",children:n?e.jsx("input",{type:["l","w","t"].includes(r.key)?"number":"text",value:s[r.key]??"",onChange:l=>Se(a,r.key,l.target.value),className:"w-full p-3 bg-transparent outline-none transition-all focus:bg-white focus:ring-2 focus:ring-inset focus:ring-blue-500 cursor-text text-slate-700"}):e.jsx("div",{className:"w-full p-3 text-slate-700 font-medium text-xs leading-relaxed break-words whitespace-normal overflow-hidden",children:s[r.key]||"-"})})},r.key)),n&&e.jsx("td",{className:"p-1 border border-blue-200 text-center",children:e.jsx("button",{type:"button",onClick:()=>ke(a),className:"p-2  cursor-pointer text-slate-600 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",children:e.jsx("i",{className:"fas fa-trash-alt"})})})]},a))}):e.jsx(e.Fragment,{children:e.jsx("tr",{className:"hover:bg-blue-50/20 transition-colors border !border-blue-50",children:e.jsx("td",{colSpan:n?y.length+1:y.length,className:"py-12 text-center align-middle border-b border-l border-r border-blue-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-file-circle-exclamation text-blue-200 text-2xl"}),e.jsx("p",{className:"text-slate-400 font-medium italic",children:"No cutlist provided"})]})})})})})]})})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-4xl text-red-500 mb-4"}),e.jsx("p",{className:"text-red-500",children:"Product not found"}),e.jsx(x,{onClick:()=>O(-1),className:"mt-4",children:"Go Back"})]})})};export{Ve as default};
