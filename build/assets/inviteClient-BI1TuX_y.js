import{u as k,r as p,s as C,j as e,B as i,t as r}from"./index-Wihfhca_.js";import{L as I}from"./Label-BcS1tGBU.js";import{I as L}from"./Input-IfonaLGO.js";import{A,a as S}from"./Avatar-ByZaylxM.js";import{n as G,o as E}from"./orgApi-BJ7puI9v.js";const T=()=>{const{projectId:c,organizationId:o}=k(),[n,f]=p.useState(""),[u,d]=p.useState(!1),{openMobileSidebar:b,isMobile:j}=C(),x=G(),{data:a,isLoading:v,isError:N}=E(o,c),m=async()=>{var s,l;try{const t=await x.mutateAsync({projectId:c,organizationId:o});f(t.inviteLink||t),r({title:"Success",description:"Invitation link generated successfully"})}catch(t){r({title:"Error",description:((l=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:l.message)||"Failed to generate invitation link",variant:"destructive"})}},h=async()=>{try{await navigator.clipboard.writeText(n),d(!0),r({title:"Success",description:"Link copied to clipboard"}),setTimeout(()=>d(!1),2e3)}catch{r({title:"Error",description:"Failed to copy link",variant:"destructive"})}},g=()=>{const s=`You're invited to join in the project! Click this link to register: ${n}`,l=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(l,"_blank")},w=s=>{var l,t;return(t=(l=s==null?void 0:s.split(" ").map(y=>y[0]))==null?void 0:l.join(""))==null?void 0:t.toUpperCase()};return e.jsxs("div",{className:"min-h-full min-w-full ",children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"max-w-full mx-auto",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[j&&e.jsx("button",{onClick:b,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars "})}),e.jsx("div",{className:"hidden sm:block  w-px bg-gray-300 flex-shrink-0"}),e.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-600 truncate",children:[e.jsx("i",{className:"fas fa-user-plus mr-1"}),"Invite Client"]})})})]})})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full ",children:[e.jsx("div",{className:"flex-1 border-l-4 border-blue-600  bg-white p-4 max-h-[45vh]  h-fit overflow-y-auto rounded-2xl shadow-lg space-y-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-2 flex items-center",children:"Generate Client"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Invite a client by generating a link."}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{children:"Invitation Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{value:n,readOnly:!0,className:"bg-blue-50 text-blue-800 flex-1"}),e.jsx(i,{onClick:h,children:e.jsx("i",{className:`fas ${u?"fa-check":"fa-copy"}`})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:g,className:"w-full bg-green-600 text-white",children:[e.jsx("i",{className:"fab fa-whatsapp mr-2"})," Share on WhatsApp"]}),e.jsxs(i,{onClick:h,className:"w-full border border-blue-400 text-blue-700",children:[e.jsx("i",{className:"fas fa-copy mr-2"})," Copy"]})]}),e.jsxs(i,{onClick:m,className:"w-full bg-purple-600 text-white",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Generate New Link"]})]}):e.jsxs(i,{onClick:m,isLoading:x.isPending,className:"w-full bg-blue-600 text-white py-3",children:[e.jsx("i",{className:"fas fa-link mr-2"})," Generate Invitation Link"]})]})}),e.jsxs("div",{className:"flex-1 bg-white border-2 border-blue-200 p-6 rounded-2xl shadow-lg py-4 max-h-[70vh] sm:!max-h-[63vh] md:!max-h-[100vh]  lg:!max-h-[85vh] xl:!max-h-[90vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"})," Clients (",(a==null?void 0:a.length)||0,")"]}),v?e.jsx("p",{className:"text-blue-700",children:"Loading clients..."}):N?e.jsx("p",{className:"text-red-600",children:"Failed to get clients."}):(a==null?void 0:a.length)===0?e.jsxs("div",{className:"text-center text-blue-700 p-8",children:[e.jsx("i",{className:"fas fa-user-slash text-3xl mb-2"}),e.jsx("p",{children:"No clients have been added yet."}),e.jsx("p",{className:"text-sm",children:"Generate a link to invite them."})]}):e.jsx("div",{className:"space-y-4 h-[85%]",children:a==null?void 0:a.map(s=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{className:"w-12 h-12",children:e.jsx(S,{className:"bg-blue-600 text-white font-bold",children:w(s.clientName)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-900 font-semibold",children:s.clientName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-envelope mr-1"})," ",s.email]}),s.phoneNo&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-phone-alt mr-1"})," ",s.phoneNo]})]})]})},s._id))})]})]})]})};export{T as default};
