import{a as rs,b as ts,c as os,r as y,j as e,a0 as cs}from"./index-By5P0A7l.js";import{u as is,a as ds,b as ms,c as us}from"./HrApi-Cs5iwrXX.js";import xs from"./MaterialOverviewLoading-9Ck4pGPe.js";import{t as u}from"./toast-BSC5QTk1.js";import"./roleCheck-YGaMnK_P.js";import"./useQuery-Cc7pLKfK.js";import"./useMutation-7YLqc7VE.js";import"./useInfiniteQuery-DQF0m-E9.js";import"./Skeleton-FCBR4RgB.js";const Is=()=>{var E,F,_,P,U,R,L,O,T,M,B,z,$,G,H,J,W,V,q,K,Q,X,Y,Z,D,ee,se,ae,le,ne,re,te,oe,ce,ie,de,me,ue,xe,pe,ge,ye,fe,be,he,je,Ne,ve,Ie,we,Ce,Se,ke,Ae,Ee,Fe,_e,Pe,Ue,Re,Le,Oe,Te,Me,Be,ze,$e,Ge,He,Je,We,Ve,qe,Ke,Qe;const{id:Xe}=rs(),Ye=ts(),{role:v,permission:x}=os(),Ze=v==="owner"||((E=x==null?void 0:x.hr)==null?void 0:E.list),De=v==="owner"||((F=x==null?void 0:x.hr)==null?void 0:F.edit),[I,w]=y.useState(null),[f,C]=y.useState("personal"),[o,b]=y.useState(!1),[l,t]=y.useState(null),[h,S]=y.useState(null),{data:p,isLoading:k}=is(Xe),g=ds(),es=ms(),j=us(),ss=()=>{w(p),t(p),b(!0),C("personal")},A=async()=>{var a,s;try{if(!l||!I)return;await g.mutateAsync({empId:I._id,updates:l}),b(!1),w(l),u({title:"Success",description:"Employee updated successfully"})}catch(n){u({title:"Error",description:((s=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to update employee",variant:"destructive"})}},as=async(a,s)=>{var c,d,m;const n=(c=a.target.files)==null?void 0:c[0];if(!n){u({title:"Error",description:"Pleae select the file to upload"});return}S(s);try{await es.mutateAsync({empId:p._id,type:s,file:n}),u({title:"Success",description:"File Uploaded Successfully"})}catch(i){u({title:"Error",description:((m=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:m.message)||"Failed to upload file",variant:"destructive"})}finally{S(null)}},ls=async a=>{var s,n;try{await j.mutateAsync({empId:p._id,docId:a}),u({title:"Success",description:"Document deleted successfully"})}catch(c){u({title:"Error",description:((n=(s=c==null?void 0:c.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete document",variant:"destructive"})}},ns=a=>{switch(a){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"terminated":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},N=a=>a?new Date(a).toLocaleDateString():"N/A";if(k)return e.jsx(xs,{});const r=p;if(Ze)return e.jsx("div",{className:"max-h-full overflow-y-auto bg-gray-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{onClick:()=>Ye(-1),className:"bg-slate-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("h2",{className:"text-lg font-normal  text-gray-600",children:e.jsx("span",{className:"text-xl font-semibold text-gray-800",children:((_=r.personalInfo)==null?void 0:_.empName)||"N/A"})})]})}),e.jsx("div",{className:"flex items-center gap-3",children:De&&e.jsx(e.Fragment,{children:o?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:A,disabled:g.isPending,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors text-sm font-medium",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save Changes"]})}),e.jsxs("button",{onClick:()=>{b(!1),t(r)},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]})]}):e.jsxs("button",{onClick:()=>ss(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx("i",{className:"fas fa-edit mr-2"}),"Edit Employee"]})})})]}),k&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading employee details..."})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"personal",label:"Personal Info",icon:"fas fa-user"},{id:"employment",label:"Employment",icon:"fas fa-briefcase"},{id:"documents",label:"Documents",icon:"fas fa-file-alt"}].map(a=>e.jsxs("button",{onClick:()=>C(a.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${f===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${a.icon} mr-2`}),a.label]},a.id))})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-150px)] custom-scrollbar",children:[f==="personal"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),o?e.jsx("input",{type:"text",value:((P=l==null?void 0:l.personalInfo)==null?void 0:P.empName)||"",onChange:a=>t(s=>s?{...s,personalInfo:{...s.personalInfo,empName:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((U=r.personalInfo)==null?void 0:U.empName)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o?e.jsx("input",{type:"email",value:((R=l==null?void 0:l.personalInfo)==null?void 0:R.email)||"",onChange:a=>t(s=>s?{...s,personalInfo:{...s.personalInfo,email:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((L=r.personalInfo)==null?void 0:L.email)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),o?e.jsx("input",{type:"tel",value:((O=l==null?void 0:l.personalInfo)==null?void 0:O.phoneNo)||"",onChange:a=>t(s=>s?{...s,personalInfo:{...s.personalInfo,phoneNo:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((T=r.personalInfo)==null?void 0:T.phoneNo)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),o?e.jsxs("select",{value:((M=l==null?void 0:l.personalInfo)==null?void 0:M.gender)||"",onChange:a=>t(s=>s?{...s,personalInfo:{...s.personalInfo,gender:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((B=r.personalInfo)==null?void 0:B.gender)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),o?e.jsx("input",{type:"date",value:(z=l==null?void 0:l.personalInfo)!=null&&z.dateOfBirth?new Date(l.personalInfo.dateOfBirth).toISOString().split("T")[0]:"",onChange:a=>t(s=>s?{...s,personalInfo:{...s.personalInfo,dateOfBirth:new Date(a.target.value)}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:N(($=r.personalInfo)==null?void 0:$.dateOfBirth)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marital Status"}),o?e.jsxs("select",{value:((G=l==null?void 0:l.personalInfo)==null?void 0:G.maritalStatus)||"",onChange:a=>t(s=>s?{...s,personalInfo:{...s.personalInfo,maritalStatus:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"unmarried",children:"UnMarried"}),e.jsx("option",{value:"married",children:"Married"}),e.jsx("option",{value:"divorced",children:"Divorced"}),e.jsx("option",{value:"widowed",children:"Widowed"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((H=r.personalInfo)==null?void 0:H.maritalStatus)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Address & Emergency Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Address"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street"}),o?e.jsx("input",{type:"text",value:((W=(J=l==null?void 0:l.personalInfo)==null?void 0:J.address)==null?void 0:W.street)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,address:{...(n=s.personalInfo)==null?void 0:n.address,street:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((q=(V=r.personalInfo)==null?void 0:V.address)==null?void 0:q.street)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),o?e.jsx("input",{type:"text",value:((Q=(K=l==null?void 0:l.personalInfo)==null?void 0:K.address)==null?void 0:Q.city)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,address:{...(n=s.personalInfo)==null?void 0:n.address,city:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Y=(X=r.personalInfo)==null?void 0:X.address)==null?void 0:Y.city)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),o?e.jsx("input",{type:"text",value:((D=(Z=l==null?void 0:l.personalInfo)==null?void 0:Z.address)==null?void 0:D.state)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,address:{...(n=s.personalInfo)==null?void 0:n.address,state:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((se=(ee=r.personalInfo)==null?void 0:ee.address)==null?void 0:se.state)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),o?e.jsx("input",{type:"text",value:((le=(ae=l==null?void 0:l.personalInfo)==null?void 0:ae.address)==null?void 0:le.pincode)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,address:{...(n=s.personalInfo)==null?void 0:n.address,pincode:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((re=(ne=r.personalInfo)==null?void 0:ne.address)==null?void 0:re.pincode)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),o?e.jsx("input",{type:"text",value:((oe=(te=l==null?void 0:l.personalInfo)==null?void 0:te.address)==null?void 0:oe.country)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,address:{...(n=s.personalInfo)==null?void 0:n.address,country:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((ie=(ce=r.personalInfo)==null?void 0:ce.address)==null?void 0:ie.country)||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Emergency Contact"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),o?e.jsx("input",{type:"text",value:((me=(de=l==null?void 0:l.personalInfo)==null?void 0:de.emergencyContact)==null?void 0:me.name)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,emergencyContact:{...(n=s.personalInfo)==null?void 0:n.emergencyContact,name:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((xe=(ue=r.personalInfo)==null?void 0:ue.emergencyContact)==null?void 0:xe.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship"}),o?e.jsx("input",{type:"text",value:((ge=(pe=l==null?void 0:l.personalInfo)==null?void 0:pe.emergencyContact)==null?void 0:ge.relationship)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,emergencyContact:{...(n=s.personalInfo)==null?void 0:n.emergencyContact,relationship:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((fe=(ye=r.personalInfo)==null?void 0:ye.emergencyContact)==null?void 0:fe.relationship)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),o?e.jsx("input",{type:"tel",value:((he=(be=l==null?void 0:l.personalInfo)==null?void 0:be.emergencyContact)==null?void 0:he.phone)||"",onChange:a=>t(s=>{var n;return s?{...s,personalInfo:{...s.personalInfo,emergencyContact:{...(n=s.personalInfo)==null?void 0:n.emergencyContact,phone:a.target.value}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ne=(je=r.personalInfo)==null?void 0:je.emergencyContact)==null?void 0:Ne.phone)||"N/A"})]})]})]})]})}),f==="employment"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Job Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),o?e.jsx("input",{type:"text",value:((ve=l==null?void 0:l.employment)==null?void 0:ve.designation)||"",onChange:a=>t(s=>s?{...s,employment:{...s.employment,designation:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ie=r.employment)==null?void 0:Ie.designation)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),o?e.jsxs("select",{value:((we=l==null?void 0:l.employment)==null?void 0:we.department)||"",onChange:a=>t(s=>s?{...s,employment:{...s.employment,department:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Department"}),(Ce=cs)==null?void 0:Ce.map(a=>e.jsx("option",{value:a,children:a},a))]}):e.jsx("p",{className:"text-gray-900 py-2",children:((Se=r.employment)==null?void 0:Se.department)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employment Type"}),o?e.jsxs("select",{value:((ke=l==null?void 0:l.employment)==null?void 0:ke.employmentType)||"",onChange:a=>t(s=>s?{...s,employment:{...s.employment,employmentType:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"full_time",children:"Full Time"}),e.jsx("option",{value:"part_time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ee=(Ae=r.employment)==null?void 0:Ae.employmentType)==null?void 0:Ee.replace("_"," "))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Join Date"}),o?e.jsx("input",{type:"date",value:(Fe=l==null?void 0:l.employment)!=null&&Fe.joinDate?new Date(l.employment.joinDate).toISOString().split("T")[0]:"",onChange:a=>t(s=>s?{...s,employment:{...s.employment,joinDate:new Date(a.target.value)}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:N((_e=r.employment)==null?void 0:_e.joinDate)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Location"}),o?e.jsx("input",{type:"text",value:((Pe=l==null?void 0:l.employment)==null?void 0:Pe.workLocation)||"",onChange:a=>t(s=>s?{...s,employment:{...s.employment,workLocation:a.target.value}}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ue=r.employment)==null?void 0:Ue.workLocation)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Status"}),o?e.jsxs("select",{value:(l==null?void 0:l.status)||"",onChange:a=>t(s=>s?{...s,status:a.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"terminated",children:"Terminated"}),e.jsx("option",{value:"on_leave",children:"On Leave"})]}):e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${ns(r.status)}`,children:r.status||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Salary Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Basic Salary"}),o?e.jsx("input",{type:"number",value:((Le=(Re=l==null?void 0:l.employment)==null?void 0:Re.salary)==null?void 0:Le.basic)||"",onChange:a=>t(s=>{var n,c,d,m,i;return s?{...s,employment:{...s.employment,salary:{...(n=s.employment)==null?void 0:n.salary,basic:parseFloat(a.target.value)||0,total:(parseFloat(a.target.value)||0)+(((d=(c=s.employment)==null?void 0:c.salary)==null?void 0:d.hra)||0)+(((i=(m=s.employment)==null?void 0:m.salary)==null?void 0:i.allowances)||0)}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:(Te=(Oe=r.employment)==null?void 0:Oe.salary)!=null&&Te.basic?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r.employment.salary.basic):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HRA"}),o?e.jsx("input",{type:"number",value:((Be=(Me=l==null?void 0:l.employment)==null?void 0:Me.salary)==null?void 0:Be.hra)||"",onChange:a=>t(s=>{var n,c,d,m,i;return s?{...s,employment:{...s.employment,salary:{...(n=s.employment)==null?void 0:n.salary,hra:parseFloat(a.target.value)||0,total:(((d=(c=s.employment)==null?void 0:c.salary)==null?void 0:d.basic)||0)+(parseFloat(a.target.value)||0)+(((i=(m=s.employment)==null?void 0:m.salary)==null?void 0:i.allowances)||0)}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:($e=(ze=r.employment)==null?void 0:ze.salary)!=null&&$e.hra?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r.employment.salary.hra):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allowances"}),o?e.jsx("input",{type:"number",value:((He=(Ge=l==null?void 0:l.employment)==null?void 0:Ge.salary)==null?void 0:He.allowances)||"",onChange:a=>t(s=>{var n,c,d,m,i;return s?{...s,employment:{...s.employment,salary:{...(n=s.employment)==null?void 0:n.salary,allowances:parseFloat(a.target.value)||0,total:(((d=(c=s.employment)==null?void 0:c.salary)==null?void 0:d.basic)||0)+(((i=(m=s.employment)==null?void 0:m.salary)==null?void 0:i.hra)||0)+(parseFloat(a.target.value)||0)}}}:null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 py-2",children:(We=(Je=r.employment)==null?void 0:Je.salary)!=null&&We.allowances?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r.employment.salary.allowances):"N/A"})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Salary"}),e.jsx("p",{className:"text-xl font-bold text-green-600 py-2",children:(qe=(Ve=r.employment)==null?void 0:Ve.salary)!=null&&qe.total?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r.employment.salary.total):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Role"}),o?e.jsxs("select",{value:(l==null?void 0:l.empRole)||"",onChange:a=>t(s=>s?{...s,empRole:a.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"organization_staff",children:"Organization Staff"}),e.jsx("option",{value:"nonorganization_staff",children:"Non-Organization Staff"})]}):e.jsx("p",{className:"text-gray-900 py-2",children:((Ke=r.empRole)==null?void 0:Ke.replace("_"," "))||"N/A"})]})]})]})}),f==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Employee Documents"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total Documents: ",((Qe=r.documents)==null?void 0:Qe.length)||0]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Upload New Document"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:["resume","aadhar","pan","passport","education","experience"].map(a=>e.jsx("div",{className:"text-center",children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:s=>as(s,a),className:"hidden",disabled:h===a}),e.jsx("div",{className:`p-4 border-2 border-dashed rounded-lg transition-colors ${h===a?"border-blue-300 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}`,children:h===a?e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-2xl mb-2"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Uploading..."})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-upload text-gray-400 text-2xl mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 capitalize",children:a})]})})]})},a))})]}),e.jsx("div",{className:"space-y-4",children:r.documents&&r.documents.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.documents.map(a=>{var s;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:e.jsx("i",{className:"fas fa-file-alt text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 capitalize",children:((s=a.type)==null?void 0:s.replace("_"," "))||"Document"}),e.jsx("p",{className:"text-sm text-gray-500",children:a.fileName||"Unknown file"})]})]}),e.jsx("button",{onClick:()=>ls(a._id),disabled:j.isPending,className:"text-red-600 hover:text-red-800 transition-colors p-1",title:"Delete document",children:j.isPending?e.jsx("i",{className:"fas fa-spinner fa-spin"}):e.jsx("i",{className:"fas fa-trash text-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["Uploaded: ",a.uploadedAt?N(a.uploadedAt):"N/A"]}),a.fileUrl&&e.jsxs("a",{href:a.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx("i",{className:"fas fa-external-link-alt mr-1"}),"View"]})]})]},a._id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fas fa-file-alt text-gray-300 text-6xl mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-gray-600",children:"Upload documents using the section above."})]})})]})]}),o&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{b(!1),t(r)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel Changes"}),e.jsx("button",{onClick:A,disabled:g.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save Changes"]})})]})})]})})};export{Is as default};
