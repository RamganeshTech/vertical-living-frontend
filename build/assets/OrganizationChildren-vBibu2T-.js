import{u as L,r as u,k as M,j as o,O as R,aF as I,aG as w}from"./index-BAM0eJUz.js";import{M as P,S as z}from"./MobileSidebar-DliuvRdX.js";import"./currentActiveStageApi-CYcZaWni.js";import"./notificationApi-DYIWgdjl.js";import"./useInfiniteQuery-BGz0VllC.js";import"./issueDiscussionApi-CgOxgxFZ.js";const j={INVITECTO:"invitecto",INVITESTAFFS:"invitestaff",MODULAR:"modularunit"},G=({setOrganizationId:O})=>{const{organizationId:s}=L(),[b,l]=u.useState(!1),[p,N]=u.useState(window.innerWidth<470),{role:c,permission:S}=M(),a=(c==null?void 0:c.toLowerCase())||"",E={PROJECTS:`/organizations/${s}/projects`,DETAILS:`/organizations/${s}`,INVITECTO:`/organizations/${s}/invitecto`,INVITESTAFFS:`/organizations/${s}/invitestaff`,ROLESPERMISSIONS:`/organizations/${s}/dashboard`,PLAN:`/organizations/${s}/subscriptionplan`,PROFILE:`/organizations/${s}/userprofile`,MODULAR:`/organizations/${s}/modularunits`},d=Object.keys(I);let n=[];a==="owner"?n=d:a==="cto"||a==="staff"?n=d.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN"):n=d.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN");let t={},f={},r={};n.forEach(e=>{I[e]&&E[e]&&(t[e]=I[e],f[e]=w[e],r[e]=E[e])}),a!=="owner"&&Object.keys(t).forEach(e=>{const i=j[e];if(i){const h=S==null?void 0:S[i];h&&Object.values(h).some(A=>A===!0)||(delete t[e],delete f[e],delete r[e])}}),u.useEffect(()=>{const e=()=>N(window.innerWidth<470);return window.addEventListener("resize",e),s&&O(s),()=>window.removeEventListener("resize",e)},[s,O]);const m=Object==null?void 0:Object.entries(t).map(([e,i])=>({type:"item",key:e,label:i}));return m.sort((e,i)=>e.label.localeCompare(i.label)),o.jsxs("div",{className:"flex w-full h-full",children:[p?o.jsx(P,{labels:t,path:r,isOpen:b,onClose:()=>l(!1)}):o.jsx(z,{path:r,labels:t,icons:f,menuStructure:m}),o.jsx("main",{className:"!w-[100%] h-full",children:o.jsx(R,{context:{isMobile:p,isMobileSidebarOpen:b,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})};export{G as default};
