import{u as y,a as V,j as t,t as u}from"./index-BAM0eJUz.js";import{V as N}from"./VendorAccountForm-CTGmRryU.js";import{c as b,d as w,e as D,f as E}from"./vendorAccApi-m3R96_-K.js";import"./Card-CdxfjEr-.js";import"./ImageGalleryMain-B3g6b13d.js";import"./downloadFile-BbGV_BaX.js";import"./index-C8BdbktQ.js";import"./ShortListMain-CkHPlJB3.js";import"./dateFormator-BGKi5rfZ.js";import"./useInfiniteQuery-BGz0VllC.js";const B=()=>{const{id:a}=y(),l=V(),{data:p,isLoading:x,isError:f,error:s,refetch:g}=b(a||""),r=w(),d=D(),h=E(),v=async(j,n,i)=>{var c,m;try{if(!a)return;if(await r.mutateAsync({vendorId:a,payload:j}),n&&n.length>0){const e=new FormData;n.forEach(o=>{e.append("files",o)}),await d.mutateAsync({id:a,formData:e})}if(i&&i.length>0){const e=new FormData;i.forEach(o=>{e.append("shopImages",o)}),await h.mutateAsync({id:a,formData:e})}u({title:"Success",description:"Vendor updated successfully"}),await g()}catch(e){console.error("Update failed",e),u({title:"Error",description:((m=(c=e==null?void 0:e.response)==null?void 0:c.data)==null?void 0:m.message)||(e==null?void 0:e.message)||"Failed to update vendor",variant:"destructive"})}};return x?t.jsx("div",{className:"flex justify-center items-center h-96",children:t.jsxs("div",{className:"text-center",children:[t.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-4xl mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading vendor details..."})]})}):f?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"text-red-600 text-xl mb-2",children:"Error Loading Vendor"}),t.jsx("p",{className:"text-gray-500 mb-4",children:s==null?void 0:s.message}),t.jsx("button",{onClick:()=>l(-1),className:"text-blue-600 hover:underline",children:"Go Back"})]}):t.jsx(N,{mode:"view",initialData:p,onSubmit:v,isSubmitting:r.isPending||d.isPending})};export{B as default};
