import{r as c,j as r}from"./index-hYGmCEO1.js";import{n as f}from"./orderMaterialHistoryApi-DTbGNztn.js";const y=({ele:e,projectId:d,organizationId:u,refetch:t})=>{const[n,o]=c.useState(!1),a=c.useRef(null),{mutateAsync:m,isPending:l}=f();c.useEffect(()=>{const s=i=>{a.current&&!a.current.contains(i.target)&&o(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const x=[{label:"Speed",value:"speed",color:"bg-red-500",icon:"fa-fire"},{label:"Cost Efficient",value:"cost efficient",color:"bg-yellow-500",icon:"fa-bolt"},{label:"quality",value:"quality",color:"bg-blue-500",icon:"fa-faucet"},{label:"General",value:"general",color:"bg-slate-500",icon:"fa-layer-group"}],p=async s=>{o(!1);try{await m({projectId:d,organizationId:u,orderItemId:e._id,priority:s}),t==null||t()}catch(i){console.error("Failed to send to procurement",i)}};return r.jsxs("div",{className:"relative inline-block text-left",ref:a,children:[r.jsxs("button",{type:"button",disabled:(e==null?void 0:e.isSyncWithProcurement)||l,onClick:()=>o(!n),className:`flex items-center gap-2 px-4 py-2 border-2 rounded-lg font-medium transition-all duration-200 
                    ${e!=null&&e.isSyncWithProcurement?"bg-gray-50 border-gray-200 text-gray-400 cursor-not-allowed":"border-green-400 text-green-700 hover:bg-green-50 active:scale-95 shadow-sm"}`,children:[l?r.jsx("i",{className:"fas fa-spinner fa-spin"}):e!=null&&e.isSyncWithProcurement?r.jsx("i",{className:"fas fa-check-circle"}):r.jsx("i",{className:"fas fa-paper-plane"}),r.jsx("span",{children:e!=null&&e.isSyncWithProcurement?"Sent to Procurement":"Send To Procurement"}),!(e!=null&&e.isSyncWithProcurement)&&r.jsx("i",{className:`fas fa-chevron-down text-xs transition-transform ${n?"rotate-180":""}`})]}),n&&r.jsxs("div",{className:"absolute  right-0 mt-2 w-56 rounded-xl bg-white shadow-xl border border-gray-100 !z-[999] overflow-hidden animate-in fade-in zoom-in duration-200",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-100",children:r.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Select Vendor Priority"})}),r.jsx("div",{className:"py-1",children:x.map(s=>r.jsxs("button",{onClick:()=>p(s.value),className:"w-full flex items-center justify-between px-4 py-3 text-sm text-gray-700 hover:bg-slate-50 transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${s.color}`}),r.jsx("span",{className:"font-medium group-hover:text-blue-600",children:s.label})]}),r.jsx("i",{className:`fas ${s.icon} text-gray-300 group-hover:text-blue-400 text-xs`})]},s.value))})]})]})};export{y as P};
