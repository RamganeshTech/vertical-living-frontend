import{c as O,a as T,r as o,j as e,L as h,I as p,B,t}from"./index-Bp58Hj9Q.js";import{a as I}from"./userApi-kG6_Jg6y.js";import{a as q}from"./workerApi-DgIpwhlP.js";import{a as D}from"./clientApi-Cf3XaYnc.js";import{a as V}from"./CTOApi-C9SyHtEW.js";import{a as W}from"./staffApi-DeuI-xi0.js";const K=()=>{const[b]=O(),{role:l}=T(),{mutateAsync:P,isPending:g}=W(),{mutateAsync:v,isPending:y}=V(),{mutateAsync:j,isPending:k}=D(),{mutateAsync:N,isPending:C}=q(),{mutateAsync:S,isPending:R}=I(),[r,c]=o.useState(""),[n,d]=o.useState(""),[u,E]=o.useState(!1),[m,U]=o.useState(!1),w=b.get("token"),A=()=>g||y||k||C||R,L=async s=>{var x,f;if(s.preventDefault(),!r||!n){t({title:"Error",variant:"destructive",description:"Both fields are required."});return}if(r!==n){t({title:"Error",variant:"destructive",description:"Passwords do not match."});return}if(!w||!l){t({title:"Error",variant:"destructive",description:"Invalid reset link."});return}const a={password:r,token:w};try{switch(l){case"client":await j(a);break;case"CTO":await v(a);break;case"worker":await N(a);break;case"staff":await P(a);break;case"owner":await S(a);break;default:t({title:"Error",description:"Unknown role type.",variant:"destructive"});return}t({title:"Success",description:"Password reset successfully."}),c(""),d("")}catch(i){t({title:"Error",description:((f=(x=i==null?void 0:i.response)==null?void 0:x.data)==null?void 0:f.message)||"Something went wrong.",variant:"destructive"})}};return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 px-4",children:e.jsxs("form",{onSubmit:L,className:"bg-white shadow-lg rounded-xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-4 text-blue-700",children:"Reset Your Password"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{className:"mb-1 block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{type:u?"text":"password",value:r,onChange:s=>c(s.target.value),placeholder:"Enter new password"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-600 text-lg",onClick:()=>E(s=>!s),children:u?e.jsx("i",{className:"fas fa-eye-slash text-blue-400 hover:text-blue-600 transition-colors"}):e.jsx("i",{className:"fas fa-eye text-blue-400 hover:text-blue-600 transition-colors"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(h,{className:"mb-1 block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{type:m?"text":"password",value:n,onChange:s=>d(s.target.value),placeholder:"Confirm password"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-600 text-lg",onClick:()=>U(s=>!s),children:m?e.jsx("i",{className:"fas fa-eye-slash text-blue-400 hover:text-blue-600 transition-colors"}):e.jsx("i",{className:"fas fa-eye text-blue-400 hover:text-blue-600 transition-colors"})})]})]}),e.jsx(B,{isLoading:A(),type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Reset Password"})]})})};export{K as default};
