import{d as b,c as j,r as d,j as e,C,J as g,P as N,f as k,A as v,B as y,t}from"./index-CBsAK0nv.js";import{b as S}from"./subContractNewApi-B78GGeA2.js";import{S as w}from"./SubContractForm-CPz3ZZTJ.js";const I=()=>{const r=b(),{organizationId:c}=j(),i=S(),[m,n]=d.useState(!1),[a,x]=d.useState(""),u=async f=>{var l,o;try{const s=await i.mutateAsync({organizationId:c,...f});t({title:"Success",description:"Sub Contract created successfully"}),console.log("result",s);const p=`https://houseofram.in/subcontract/share/${s==null?void 0:s.contractId}?token=${s==null?void 0:s.token}`;x(p)}catch(s){t({title:"Error",description:((o=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:o.message)||(s==null?void 0:s.message)||"Failed to create sub contract",variant:"destructive"})}},h=()=>{navigator.clipboard.writeText(a),n(!0),t({title:"Copied!",description:"Link copied to clipboard"}),setTimeout(()=>n(!1),2e3)};return e.jsxs("div",{className:"space-y-6 max-h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{onClick:()=>r(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center mb-2",children:[e.jsx("i",{className:"fas fa-hard-hat mr-3 text-blue-600"}),"Create Sub Contract"]})]}),e.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[e.jsx(w,{organizationId:c,mode:"create",onSubmit:u,isLoading:i.isPending,onCancel:()=>r(-1)}),a&&e.jsxs(C,{children:[e.jsx(g,{children:e.jsxs(N,{className:"flex items-center text-lg",children:[e.jsx("i",{className:"fas fa-link mr-2 text-blue-600"}),"Generate Shareable Link"]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Generate a shareable link for workers to submit their information for this sub contract."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{value:a,readOnly:!0,className:"flex-1"}),e.jsx(y,{onClick:h,variant:"outline",children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-copy mr-2"}),"Copy"]})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Link generated successfully! Share this with workers."})]})]})]})})]})]})]})};export{I as default};
