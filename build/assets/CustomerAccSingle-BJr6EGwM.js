import{u as b,b as f,j as t,M as w,B as m,t as c}from"./index-CUvv9ev0.js";import{c as C,d as j,e as v}from"./customerAccountApi-dqGBjmZj.js";import{C as y}from"./CustomerAccountForm-BYXPBd7F.js";import"./Card-CHHq377-.js";import"./ImageGalleryMain-CpyKJ1TW.js";import"./index-BKXLMMDl.js";import"./dateFormator-BGKi5rfZ.js";const M=()=>{const{id:s}=b(),a=f(),{data:i,isLoading:u,isError:l,error:o,refetch:x}=C(s),d=j(),n=v(),p=async(g,r)=>{try{if(await d.mutateAsync({customerId:s,payload:g}),r&&r.length>0){const e=new FormData;r.forEach(h=>{e.append("files",h)}),await n.mutateAsync({id:s,formData:e})}c({title:"Success",description:"Customer updated successfully"}),x()}catch(e){throw c({title:"Error",description:e.message||"Failed to update customer"}),e}};return u?t.jsx(w,{}):l?t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl",children:"⚠️ Error Occurred"}),t.jsx("p",{className:"text-red-500 mb-4",children:(o==null?void 0:o.message)||"Failed to load customer"}),t.jsx(m,{onClick:()=>a(-1),children:"Go Back"})]}):i?t.jsx(y,{mode:"view",initialData:i,onSubmit:p,isSubmitting:d.isPending||n.isPending}):t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-yellow-600 font-semibold mb-2 text-xl",children:"Customer Not Found"}),t.jsx(m,{onClick:()=>a(-1),children:"Go Back"})]})};export{M as default};
