import{a as j,u as N,r as p,j as e}from"./index-C0KkMjHg.js";import{B as n}from"./Button-DIkkRbUr.js";import{t as u}from"./toast-BSC5QTk1.js";import{u as b,a as y,P as v}from"./PublicOrderMaterialCompo-BRsQMvxq.js";import{d as w}from"./downloadFile-Bztbg4F7.js";import"./useQuery-Dp3DvoKb.js";import"./useMutation-CaYNPTtb.js";import"./OrderMaterialOverview-BH-rK8G9.js";import"./Card-CUvRTemJ.js";import"./AssignStaff-DVYIizg0.js";import"./Input-e9nZV_sO.js";import"./roleCheck-DWgWWcQZ.js";import"./getAllUsersApi-BESJfawR.js";import"./ResetStageButton-Bpb-Rgvi.js";import"./ShareDocumentWhatsapp-DU0nRP6m.js";import"./documentationApi-Dc8cMkOF.js";import"./requirementFormApi-DJTMpzjT.js";import"./MaterialOverviewLoading-DkgmTtHr.js";import"./Skeleton-BdeHOwUC.js";import"./constants-CQazHsZc.js";import"./orderMaterialHistoryApi-CDtJ9BEw.js";import"./shopLibDetailApi-DbMcaDcp.js";import"./SearchSelectNew-BcESoLUi.js";const T=()=>{const{organizationId:i}=j(),f=N(),[r,c]=p.useState(""),{data:l}=b(i),s=l==null?void 0:l.map(a=>({_id:a._id,projectName:a.projectName}));p.useEffect(()=>{var a;s&&s.length>0&&!r&&c((a=s[0])==null?void 0:a._id)},[s,r]);const{mutateAsync:g,isPending:o}=y(),h=async()=>{var a,m,d,x;try{const t=await g({projectId:r,organizationId:i});await w({src:(a=t==null?void 0:t.pdfData)==null?void 0:a.url,alt:(m=t==null?void 0:t.pdfData)==null?void 0:m.pdfName}),u({title:"Success",description:"Pdf Generated successfully"})}catch(t){u({title:"Error",description:((x=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:x.message)||(t==null?void 0:t.message)||"Failed to generate link",variant:"destructive"})}};return i?e.jsxs("div",{className:"min-h-screen max-h-screen overflow-y-auto bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-3 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>f(-1),children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Vertical Living"}),e.jsx("span",{className:"text-sm text-gray-500",children:" Order Materials"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"min-w-[250px]",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Select Project"}),e.jsx("select",{value:r,onChange:a=>c(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:s==null?void 0:s.map(a=>e.jsx("option",{value:a._id,children:a.projectName},a._id))})]}),e.jsx(n,{onClick:h,disabled:o,className:"min-w-[140px] bg-blue-600 hover:bg-blue-700 text-white font-medium",size:"lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-file-pdf"}),"Generate PDF"]})})]})]})})}),e.jsx("main",{className:"max-w-full mx-auto px-4 py-8",children:r?e.jsx("div",{children:e.jsx(v,{selectedProjectId:r,organizationId:i})}):e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("i",{className:"fas fa-project-diagram text-gray-300 text-5xl mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Please select a project to continue"})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-red-500 text-5xl mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"No Organization ID Found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Please set up your organization first."}),e.jsx(n,{onClick:()=>window.location.href="/ordermaterial/setup",className:"mt-4",children:"Go to Setup"})]})})};export{T as default};
