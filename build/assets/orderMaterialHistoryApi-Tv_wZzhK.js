import{o as y,u as i,a as l,q as d,G as u,b as s,Q as f}from"./index-CBsAK0nv.js";const g=async({projectId:a,api:e})=>{const{data:r}=await e.get(`/orderingmaterial/getalldetails/${a}`);if(!r.ok)throw new Error(r.message);return r.data},h=async({projectId:a,orderItemId:e,api:r})=>{const{data:t}=await r.get(`/orderingmaterial/${a}/${e}/getsingleorderedItem`);if(!t.ok)throw new Error(t.message);return t.data},M=a=>{const e=["owner","staff","CTO","worker","client"],{role:r}=i(),t=s(r);return y({queryKey:["ordering-material-history",a],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("Not allowed to fetch ordering material");if(!t)throw new Error("API not available");return await g({projectId:a,api:t})},enabled:!!r&&!!a&&!!t,retry:!1,refetchOnMount:!1})},p=async({formId:a,projectId:e,deadLine:r,api:t})=>{const{data:o}=await t.put(`/orderingmaterial/deadline/${e}/${a}`,{deadLine:r});if(!o.ok)throw new Error(o.message);return o.data},E=async({projectId:a,api:e})=>{const{data:r}=await e.put(`/orderingmaterial/completionstatus/${a}`);if(!r.ok)throw new Error(r.message);return r.data},O=async(a,e,r)=>{const{data:t}=await r.put(`/orderingmaterial/${a}/delivery-location`,e);if(!t.ok)throw new Error(t.message);return t.data},Q=()=>{const a=["owner","staff","CTO"],{role:e}=i(),r=s(e),t=u();return l({mutationFn:async({projectId:o,updates:n})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update delivery location");if(!r)throw new Error("API instance not available");return await O(o,n,r)},onSuccess:(o,{projectId:n})=>{t.invalidateQueries({queryKey:["ordering-material",n]})}})},F=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return l({mutationFn:async({formId:t,projectId:o,deadLine:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await p({formId:t,projectId:o,deadLine:n,api:r})},onSuccess:(t,o)=>{d.invalidateQueries({queryKey:["ordering-material-history",o.projectId]})}})},R=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return l({mutationFn:async({projectId:t})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await E({projectId:t,api:r})},onSuccess:(t,{projectId:o})=>{d.invalidateQueries({queryKey:["ordering-material-history",o]})}})},k=async({projectId:a})=>{const{data:e}=await f.get(`https://houseofram.in/api/orderingmaterial/getpublic/${a}`);if(console.log("data",e),!e.ok)throw new Error(e.message);return e.data},_=a=>y({queryKey:["ordering-material-public",a],queryFn:async()=>await k({projectId:a}),enabled:!!a,retry:!1,refetchOnMount:!1}),I=async({projectId:a,organizationId:e,orderItemId:r,api:t})=>{const{data:o}=await t.patch(`/orderingmaterial/generatelink/${a}/${e}/${r}`);if(!o.ok)throw new Error(o.message);return o.data},q=async({projectId:a,api:e})=>{const{data:r}=await e.put(`/orderingmaterial/${a}/submitorder`);if(!r.ok)throw new Error(r.message);return r.data},A=async({projectId:a,orderItemId:e,organizationId:r,api:t})=>{const{data:o}=await t.put(`/orderingmaterial/${a}/${e}/${r}/senttoprocurement`);if(!o.ok)throw new Error(o.message);return o.data},D=()=>{const a=["owner","staff","CTO"],{role:e}=i(),r=s(e);return l({mutationFn:async({projectId:t,organizationId:o,orderItemId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await I({projectId:t,api:r,organizationId:o,orderItemId:n})},onSuccess:(t,{projectId:o})=>{d.invalidateQueries({queryKey:["ordering-material-history",o]})}})},H=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return l({mutationFn:async({projectId:t})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await q({projectId:t,api:r})},onSuccess:(t,{projectId:o})=>{d.invalidateQueries({queryKey:["ordering-material-history",o]})}})},G=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return l({mutationFn:async({projectId:t,orderItemId:o,organizationId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await A({projectId:t,orderItemId:o,organizationId:n,api:r})},onSuccess:(t,{projectId:o})=>{d.invalidateQueries({queryKey:["ordering-material-history",o]})}})},N=(a,e)=>{const r=["owner","staff","CTO","worker","client"],{role:t}=i(),o=s(t);return y({queryKey:["ordering-material-history","order-item",a],queryFn:async()=>{if(!t||!r.includes(t))throw new Error("Not allowed to fetch ordering material");if(!o)throw new Error("API not available");return await h({projectId:a,api:o,orderItemId:e})},enabled:!!t&&!!a&&!!o,retry:!1})},S=async({projectId:a,files:e,api:r})=>{const t=new FormData;e.forEach(n=>t.append("files",n));const{data:o}=await r.post(`/orderingmaterial/${a}/upload`,t);if(!o.ok)throw new Error(o.message);return o.data},U=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return l({mutationFn:async({projectId:t,files:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await S({projectId:t,files:o,api:r})},onSuccess:(t,{projectId:o})=>{d.invalidateQueries({queryKey:["ordering-material-history",o]})}})},v=async({projectId:a,imageId:e,api:r})=>{const{data:t}=await r.delete(`/orderingmaterial/${a}/deleteimage/${e}`);if(!t.ok)throw new Error(t.message);return t.data},j=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return l({mutationFn:async({projectId:t,imageId:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await v({projectId:t,api:r,imageId:o})},onSuccess:(t,{projectId:o})=>{d.invalidateQueries({queryKey:["ordering-material-history",o]})}})},b=async({projectId:a,subItemName:e,quantity:r,unit:t,api:o})=>{const{data:n}=await o.post(`/orderingmaterial/${a}/unit/addsubitem`,{subItemName:e,quantity:r,unit:t});if(!n.ok)throw new Error(n.message);return n.data},x=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return l({mutationFn:async({projectId:o,subItemName:n,quantity:c,unit:w})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await b({projectId:o,subItemName:n,quantity:c,unit:w,api:r})},onSuccess:(o,n)=>{t.invalidateQueries({queryKey:["ordering-material-history",n.projectId]}),t.invalidateQueries({queryKey:["inventory",n.projectId],refetchType:"active"})}})},$=async({projectId:a,subItemId:e,api:r})=>{const{data:t}=await r.delete(`/orderingmaterial/${a}/unit/deletesubitem/${e}`);if(!t.ok)throw new Error(t.message);return t.data},L=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return l({mutationFn:async({projectId:o,subItemId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await $({projectId:o,subItemId:n,api:r})},onSuccess:(o,n)=>{t.invalidateQueries({queryKey:["ordering-material-history",n.projectId]}),t.invalidateQueries({queryKey:["inventory",n.projectId],refetchType:"active"})}})},C=async(a,e)=>{const{data:r}=await e.delete(`/orderingmaterial/deleteallsubunits/${a}`);if(!r.ok)throw new Error(r.message);return r.data},z=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return l({mutationFn:async({projectId:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await C(o,r)},onSuccess:(o,n)=>{t.invalidateQueries({queryKey:["ordering-material-history",n.projectId]}),t.invalidateQueries({queryKey:["inventory",n.projectId],refetchType:"active"})}})},P=async({projectId:a,subItemId:e,subItemName:r,quantity:t,unit:o,api:n})=>{const{data:c}=await n.put(`/orderingmaterial/${a}/unit/updatesubitem/${e}`,{subItemName:r,quantity:t,unit:o});if(!c.ok)throw new Error(c.message);return c.data},B=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return l({mutationFn:async({projectId:o,subItemId:n,subItemName:c,quantity:w,unit:m})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await P({projectId:o,subItemId:n,subItemName:c,quantity:w,unit:m,api:r})},onSuccess:(o,n)=>{t.invalidateQueries({queryKey:["ordering-material-history",n.projectId]}),t.invalidateQueries({queryKey:["inventory",n.projectId],refetchType:"active"})}})},T=async(a,e,r)=>{const{data:t}=await r.put(`/orderingmaterial/${a}/shop`,e);if(!t.ok)throw new Error(t.message);return t.data},J=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return l({mutationFn:async({projectId:o,updates:n})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update shop details");if(!r)throw new Error("API instance not available");return await T(o,n,r)},onSuccess:(o,{projectId:n})=>{t.invalidateQueries({queryKey:["ordering-material-history",n]})}})};export{D as a,G as b,M as c,H as d,x as e,L as f,B as g,U as h,j as i,F as j,R as k,Q as l,J as m,z as n,_ as o,N as u};
