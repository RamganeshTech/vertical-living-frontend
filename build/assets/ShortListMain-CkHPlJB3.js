import{r as g,j as e,ae as V,f as T,b as Y,h as X,s as Z,i as A,k as ee,M as H,B as L,t as S,u as ae,a as le,c as ne}from"./index-BAM0eJUz.js";import{d as Q}from"./downloadFile-BbGV_BaX.js";import{r as ie}from"./index-C8BdbktQ.js";import{C as oe,a as ce}from"./Card-CdxfjEr-.js";const de=({tags:s,setState:r,suggestions:a=[],suggestionFetcher:i,inputClassName:n,disableSuggestion:p=!1})=>{const[m,b]=g.useState(""),[y,w]=g.useState([]),[k,x]=g.useState(!1),[j,D]=g.useState("");g.useEffect(()=>{if(p)return;const l=setTimeout(()=>{D(m.trim())},500);return()=>{clearTimeout(l)}},[m,p]),g.useEffect(()=>{if(!m){w([]);return}},[m]),g.useEffect(()=>{if(p||!j)return;(async()=>{try{if(x(!0),i){const f=(await i(j)).filter(v=>!s.includes(v));w(f)}else{const u=a.filter(f=>f.toLowerCase().includes(j.toLowerCase())&&!s.includes(f)).slice(0,10);w(u)}}catch(u){console.error("Suggestion fetch error:",u),w([])}finally{x(!1)}})()},[j,p]);const P=l=>{(l.key==="Enter"||l.key===",")&&m.trim()?(l.preventDefault(),s.includes(m.trim())||r([...s,m.trim()]),b("")):l.key==="Backspace"&&!m&&r(s.slice(0,-1))},E=l=>{s.includes(l)||r([...s,l]),b(""),w([])},h=l=>{r(s.filter((u,f)=>f!==l))};return e.jsxs("div",{className:`${n} relative w-full`,children:[e.jsxs("div",{className:"flex flex-wrap items-center border-b-1 border-[#565656] p-2 gap-2 rounded",children:[s.map((l,u)=>e.jsxs("div",{className:"bg-blue-600 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[l,e.jsx("span",{className:"cursor-pointer ml-1 text-xs",onClick:()=>h(u),children:"Ã—"})]},u)),e.jsx("input",{type:"text",value:m,onChange:l=>b(l.target.value),onKeyDown:P,className:"input flex-1 outline-none text-sm border-none",placeholder:"Type and press Enter"})]}),!p&&(y==null?void 0:y.length)>0&&e.jsxs("div",{className:"absolute left-0 right-0 z-10 mt-1 bg-white border border-gray-300 rounded shadow max-h-40 overflow-auto text-sm",children:[y.map((l,u)=>e.jsxs("div",{onClick:()=>E(l),className:"p-2 py-4 hover:bg-gray-100 cursor-pointer",children:[e.jsx("i",{className:"fa-solid fa-arrow-trend-up hover:bg-gray-50 p-3 rounded-full"}),"                            ",l]},u)),k&&e.jsx("div",{className:"p-8 place-items-center",children:e.jsx("div",{className:"p-2  text-gray-400 text-xs italic animate-spin rounded-full h-5 w-5 border-3 border-b-transparent border-black"})})]})]})},xe=g.memo(de);function ue({images:s,onDelete:r,onDownload:a,isDeleting:i=!1,refetch:n,className:p="",minWidth:m=100,maxWidth:b=100,heightClass:y=0,showSelectButton:w,onToggleSelect:k,isSelected:x,onImageClick:j,portalId:D,controlledType:P,activePopupType:E,setActivePopupType:h,selectedSiteImage:l,showSiteSelectButton:u,onSiteImageConfirm:f,onPopupOpenChange:v}){const[N,R]=g.useState(null),[$,z]=g.useState(!1),[O,U]=g.useState({}),W=(t,d,C)=>{const B=C/d,se=Math.max(150,Math.min(400,200*B));U(re=>({...re,[t]:se}))},G=t=>{R(t),z(!0),v==null||v(!0)},_=()=>{z(!1),R(null),v==null||v(!1)},F=()=>{N!==null&&R((N-1+s.length)%s.length)},I=()=>{N!==null&&R((N+1)%s.length)};g.useEffect(()=>{if(!$||P!==E)return;const t=d=>{d.key==="Escape"?_():d.key==="ArrowRight"?I():d.key==="ArrowLeft"&&F()};return $&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[$,I,F,_]);const q=async t=>{if(r)try{await r(t),n&&await n(),s.length<=1?_():N!==null&&N>=s.length-1&&R(Math.max(0,s.length-2))}catch(d){console.error("Error deleting image:",d)}},M=t=>{a({src:t==null?void 0:t.url,alt:(t==null?void 0:t.originalName)||"image"})},o=()=>{_()},c=N!==null&&N>=0&&N<s.length?s[N]:null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`gap-1 flex flex-wrap ${p}`,children:s==null?void 0:s.map((t,d)=>{const C=O[t._id]||200;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"relative cursor-pointer bg-gray-100  mb-1 break-inside-avoid ",style:{flex:`0 1 ${m}px`,minWidth:`${m}px`,maxWidth:`${b}px`,height:`${y||C}px`},onClick:()=>{G(d),j==null||j(t),h("reference")},children:e.jsx("img",{src:(t==null?void 0:t.url)||V,alt:(t==null?void 0:t.originalName)||`Image ${d+1}`,className:"w-full cursor-pointer h-full object-cover",loading:"lazy",onLoad:B=>{const K=B.target;W(t._id,K.naturalWidth,K.naturalHeight)}})},t._id)})})}),$&&c&&ie.createPortal(e.jsxs("div",{className:"absolute inset-0 bg-black/90 text-white p-4 z-50 flex items-center justify-center",onClick:o,style:{margin:0,padding:0,zIndex:1e3},children:[e.jsxs("div",{className:"absolute top-6 right-6 z-[10000] flex items-center gap-4",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),M(c)},className:"bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",title:"Download",children:e.jsx("i",{className:"fas fa-download text-lg"})}),r&&e.jsx("button",{onClick:t=>{t.stopPropagation(),q(c._id)},className:"bg-black/50 hover:bg-red-600/70 text-white rounded-full p-3 transition-all duration-200",title:"Delete",disabled:i,children:e.jsx("i",{className:`fas ${i?"fa-spinner fa-spin":"fa-trash-can"} text-lg`})}),w&&k&&c&&e.jsxs("button",{onClick:t=>{t.stopPropagation();const d=(x==null?void 0:x(c))??!1;k(c,!d)},className:`
      flex items-center gap-2 px-5 py-2 cursor-pointer rounded-md 
      transition-all duration-300 ease-in-out border backdrop-blur-md
      ${x!=null&&x(c)?"bg-red-500/90 border-red-400 text-white shadow-lg shadow-red-900/30":"bg-green-600 border-white/20 text-white hover:bg-green-600/80 hover:border-green-400"}
    `,title:x!=null&&x(c)?"Unselect this image":"Select this image",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("i",{className:`fas ${x!=null&&x(c)?"fa-circle-minus":"fa-circle-plus"} text-sm`})}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-widest",children:x!=null&&x(c)?"Unselect":"Select"})]}),u&&e.jsxs("button",{onClick:t=>f==null?void 0:f(t,c),className:`
      flex items-center gap-2 px-4 py-2 cursor-pointer rounded-md 
      transition-all duration-300 ease-in-out border backdrop-blur-sm
      ${(l==null?void 0:l._id)===c._id?"bg-red-500/90 border-red-400 text-white shadow-lg shadow-red-900/20":"bg-green-600 border-white/20 text-white hover:bg-green-600/80 hover:border-green-400"}
    `,title:(l==null?void 0:l._id)===c._id?"Unselect this image":"Select this image",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("i",{className:`fas ${(l==null?void 0:l._id)===c._id?"fa-circle-xmark":"fa-circle-plus"} text-sm`})}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wider",children:(l==null?void 0:l._id)===c._id?"Unselect":"Select"})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),_()},className:"bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",title:"Close",children:e.jsx("i",{className:"fas fa-times text-xl"})})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),F()},className:"absolute left-6 top-1/2 transform -translate-y-1/2 z-[10000] bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",children:e.jsx("i",{className:"fas fa-chevron-left text-2xl"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),I()},className:"absolute right-6 top-1/2 transform -translate-y-1/2 z-[10000] bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",children:e.jsx("i",{className:"fas fa-chevron-right text-2xl"})}),e.jsx("div",{className:"relative flex items-center justify-center",style:{width:"70vw",height:"70vh",maxWidth:"70vw",maxHeight:"70vh"},onClick:t=>{t.stopPropagation(),h(P)},children:e.jsx("img",{src:(c==null?void 0:c.url)||V,alt:c.originalName||`Image ${N!==null?N+1:1}`,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 text-white text-sm bg-black/50 px-4 py-2 rounded-full",children:[N!==null?N+1:1," of ",s.length]})]}),document.getElementById(D))]})}function J({imageFiles:s=[],height:r,refetch:a,handleDeleteFile:i,className:n="",minWidth:p,maxWidth:m,isSelected:b,onToggleSelect:y,showSelectButton:w,onImageClick:k,portalId:x,setActivePopupType:j,activePopupType:D,controlledType:P,showSiteSelectButton:E,onSiteImageConfirm:h,selecteSiteImage:l,onPopupOpenChange:u}){return e.jsx(e.Fragment,{children:e.jsx(ue,{images:s,onDelete:i,onDownload:Q,refetch:a,isDeleting:!1,className:n,heightClass:r,minWidth:p,maxWidth:m,showSelectButton:w,onToggleSelect:y,isSelected:b,onImageClick:k,portalId:x,setActivePopupType:j,activePopupType:D,controlledType:P,selectedSiteImage:l,showSiteSelectButton:E,onSiteImageConfirm:h,onPopupOpenChange:u})})}const he=async({projectId:s,api:r})=>{const{data:a}=await r.get(`/shortlisteddesign/getshortlisteddesigns/${s}`);if(!a.ok)throw new Error(a.message);return a.data},me=async({projectId:s,selections:r,api:a})=>{const{data:i}=await a.post(`/shortlisteddesign/upload/${s}`,{selections:r});if(!i.ok)throw new Error(i.message);return i.data},fe=async({projectId:s,api:r})=>{const{data:a}=await r.get(`/shortlisteddesign/getsiteimages/${s}`);if(!a.ok)throw new Error(a.message);return a.data},ge=async({organizationId:s,api:r,tags:a})=>{let i="";a&&a.length>0?i=`?${a.map(m=>`tags=${encodeURIComponent(m)}`).join("&")}`:i="?tags=all";const{data:n}=await r.get(`/shortlisteddesign/getreferencedesigns/${s}${i}`);if(!n.ok)throw new Error(n.message);return n.data},pe=async(s,r)=>{const{data:a}=await r.delete(`/shortlisteddesign/deletepdf/${s}`);if(!a.ok)throw new Error(a.message);return a.data},be=s=>{const r=["owner","staff","CTO"],{role:a}=T(),i=A(a);return Y({queryKey:["shortlistedDesigns",s],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not authorized");if(!i)throw new Error("API instance missing");return await he({projectId:s,api:i})},enabled:!!s&&!!a,retry:!1})},we=()=>{const s=["owner","staff","CTO"],{role:r}=T(),a=A(r);return X({mutationFn:async({projectId:i,selections:n})=>{if(!r||!s.includes(r))throw new Error("Not authorized");if(!a)throw new Error("API instance missing");return await me({projectId:i,selections:n,api:a})},onSuccess:(i,{projectId:n})=>{Z.invalidateQueries({queryKey:["shortlistedDesigns",n]})}})},je=()=>{const s=["owner","staff","CTO"],{role:r}=T(),a=A(r);return X({mutationFn:async({id:i})=>{if(!r||!s.includes(r))throw new Error("Youre not allowed to delete pdf");if(!a)throw new Error("API instance not available");return await pe(i,a)},onSuccess:(i,{projectId:n})=>{Z.invalidateQueries({queryKey:["shortlistedDesigns",n]})}})},Ne=s=>{const r=["owner","staff","CTO"],{role:a}=T(),i=A(a);return Y({queryKey:["siteImages",s],queryFn:async()=>{if(!a||!r.includes(a))throw new Error("Not authorized");if(!i)throw new Error("API instance missing");return await fe({projectId:s,api:i})},enabled:!!s&&!!a,retry:!1})},ye=(s,r)=>{const a=["owner","staff","CTO"],{role:i}=T(),n=A(i);return Y({queryKey:["reference-shortlist",s,r],queryFn:async()=>{if(!i||!a.includes(i))throw new Error("Not authorized");if(!n)throw new Error("API instance missing");return await ge({organizationId:s,api:n,tags:r})},enabled:!!s&&!!i,retry:!1})},ve=({projectId:s})=>{var x,j,D,P,E;const{data:r,isLoading:a,isError:i,error:n}=be(s),{role:p,permission:m}=ee(),b=p==="owner"||((x=m==null?void 0:m.sampledesign)==null?void 0:x.delete),{mutateAsync:y,isPending:w}=je(),k=async h=>{var l,u;try{await y({id:h,projectId:s}),S({title:"Success",description:"PDF deleted"})}catch(f){S({variant:"destructive",title:"Error",description:((u=(l=f==null?void 0:f.response)==null?void 0:l.data)==null?void 0:u.message)||(f==null?void 0:f.message)||"failed to delete"})}};return a?e.jsx("div",{className:"max-h-50 overflow-y-auto w-full",children:e.jsx(H,{})}):(i&&((D=(j=n==null?void 0:n.response)==null?void 0:j.data)!=null&&D.message||n!=null&&n.message&&((E=(P=n==null?void 0:n.response)==null?void 0:P.data)!=null&&E.message||n!=null&&n.message)),e.jsxs("div",{className:"max-w-full px-4 mx-auto py-2",children:[e.jsx("header",{className:"flex gap-2 items-center justify-between",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{children:e.jsx("h1",{className:"text-xl md:text-3xl font-bold text-gray-900 mb-1",children:"Shortlisted Pdf's"})})})}),e.jsx("section",{className:"gap-4 flex flex-col",children:(r==null?void 0:r.length)>0?r==null?void 0:r.map(h=>{var l;return e.jsx(oe,{className:"border-green-200 bg-green-50",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-check-circle text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-1",children:(l=h==null?void 0:h.pdfLink)==null?void 0:l.originalName}),e.jsx("p",{className:"text-sm text-green-700",children:"Your Design PDF is ready to view or download"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(L,{variant:"outline",onClick:()=>{var u;return window.open((u=h==null?void 0:h.pdfLink)==null?void 0:u.url,"_blank")},className:"border-green-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400",children:[e.jsx("i",{className:"fas mr-2 fa-external-link-alt"}),"View in New Tab"]}),e.jsx(L,{variant:"secondary",onClick:()=>{var u;return Q({src:(u=h==null?void 0:h.pdfLink)==null?void 0:u.url,alt:"Shortlisted designs"})},className:"border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400",children:"Download PDF"}),b&&e.jsx(L,{variant:"danger",isLoading:w,onClick:()=>k(h._id),className:"border-red-300 bg-red-600 text-white hover:bg-red-600 hover:border-red-400",children:"Delete PDF"})]})]})})},h._id)}):e.jsxs("div",{className:"flex flex-col items-center  justify-center min-h-[300px] w-full bg-white rounded-xl text-center p-6",children:[e.jsx("i",{className:"fa-solid fa-file-lines text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Pdf Found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No PDF Generated"})]})})]}))},te=({query:s,organizationId:r})=>{const a=s||"",i=r||"";return ne.get("https://houseofram.in/api/shortlisteddesign/getsuggestedtags",{params:{q:a,organizationId:i}}).then(n=>{var p;return Array.isArray((p=n==null?void 0:n.data)==null?void 0:p.tags)?n.data.tags:[]}).catch(n=>(console.error("Suggestion Error:",n),[]))};function ke(){var q,M;const{projectId:s,organizationId:r}=ae(),[a,i]=g.useState(null),n=le(),{data:p=[],isLoading:m}=Ne(s),[b,y]=g.useState(null),[w,k]=g.useState([]),[x,j]=g.useState(!1),[D,P]=g.useState(!1),[E,h]=g.useState([]),{data:l,isLoading:u}=ye(r,E);g.useEffect(()=>{y(null),k([]),i(null),P(!1),j(!1)},[l]);const[f,v]=g.useState([]),{mutateAsync:N,isPending:R}=we();g.useEffect(()=>{const o=x||D;return document.body.style.overflow=o?"hidden":"unset",()=>{document.body.style.overflow="unset"}},[x,D]);const $=(o,c)=>{o.stopPropagation(),y(t=>(t==null?void 0:t._id)===c._id?(S({title:"Success",description:"Unselected, You can now select another one."}),null):(S({title:"Success",description:"Site Image selected"}),c))},z=(o,c)=>{if(!b){S({title:"Error",description:"Please select a Site Image first",variant:"destructive"});return}k(t=>{const d=t.some(C=>C._id===o._id);return c&&!d?[...t,o]:c?t:t.filter(C=>C._id!==o._id)})},O=(o,c)=>{v(t=>t.map(d=>d.siteImage._id===o?{...d,referenceImages:d.referenceImages.filter(C=>C._id!==c)}:d).filter(d=>d.referenceImages.length>0))},U=o=>{v(c=>c.filter(t=>t.siteImage._id!==o))},W=async()=>{if(f.length===0){S({title:"Error",description:"No selections to generate",variant:"destructive"});return}try{const o=await N({projectId:s,selections:f});Q({src:o.url,alt:o.fileName}),S({title:"Sucess",description:"Designs Generated Successfully!"}),v([])}catch(o){S({title:"Error",description:o==null?void 0:o.message,variant:"destructive"})}},{role:G,permission:_}=ee(),F=G==="owner"||((q=_==null?void 0:_.sampledesign)==null?void 0:q.create),I=G==="owner"||((M=_==null?void 0:_.sampledesign)==null?void 0:M.create);return e.jsxs("div",{className:"max-w-full overflow-y-auto max-h-full px-4 mx-auto py-2",children:[e.jsxs("header",{className:"flex gap-2 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{onClick:()=>n(-1),className:"flex bg-gray-200 h-fit rounded-full items-center gap-2 backdrop-blur-sm px-4 py-2 cursor-pointer",children:[e.jsx("i",{className:"fas fa-arrow-left text-sm"}),e.jsx("span",{className:"text-sm hidden sm:inline-block font-medium",children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-3xl font-bold text-gray-900 mb-1",children:"Shortlisting Reference Designs"}),e.jsx("p",{className:"text-gray-600 hidden sm:inline-block text-sm md:text-md",children:"Select and organize your favorite design references for easy access"})]})]}),(b||w.length>0)&&e.jsx("button",{className:"mt-6 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg cursor-pointer",onClick:()=>{if(!b||w.length===0){S({title:"Error",description:"Select site image & at least 1 reference",variant:"destructive"});return}v(o=>[...o.filter(t=>t.siteImage._id!==b._id),{siteImage:b,referenceImages:w}]),y(null),k([])},children:"Confirm Selection"})]}),e.jsx("hr",{className:"my-3 bg-gray-500"}),e.jsxs("div",{className:"mb-4 flex gap-4 w-full  items-end",children:[e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Categories"}),e.jsx(xe,{tags:E,setState:h,suggestionFetcher:o=>te({query:o,organizationId:r})})]}),e.jsx("div",{children:e.jsx(L,{variant:"outline",onClick:()=>h([]),className:"text-sm ml-2 flex",children:"Reset Filter"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 border-gray-300 border-2 rounded-2xl p-2",children:[e.jsxs("div",{className:"border-r-1 border-gray-300 pr-8",children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Reference Designs"}),e.jsx("div",{className:"my-3 w-full h-[1px] bg-gray-200"}),u?e.jsx("div",{children:e.jsx(H,{})}):e.jsx("div",{className:"relative  h-[80vh]",id:"reference-popup-container",children:(l==null?void 0:l.length)>0?e.jsx(J,{imageFiles:l||[],portalId:"reference-popup-container",height:190,refetch:()=>Promise.resolve(),minWidth:140,maxWidth:190,handleDeleteFile:void 0,showSelectButton:!0,setActivePopupType:i,activePopupType:a,controlledType:"reference",onToggleSelect:(o,c)=>z(o,c),isSelected:o=>w.some(c=>c._id===o._id),onPopupOpenChange:P,className:"overflow-y-auto max-h-[550px] "}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white   text-center p-6",children:[e.jsx("i",{className:"fas fa-box-open text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Reference Images Available"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Upload the Images in the ",e.jsx("span",{className:"cursor-pointer font-semibold text-blue-600",onClick:()=>n(`/organizations/${r}/projects/shortlistdesign`),children:"Reference Design"})," section",e.jsx("br",{}),"Select multiple Reference images",e.jsx("br",{}),"after selecting ",e.jsx("strong",{children:'"Confirm Selection"'})," to add images ðŸš€"]})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Site Images"}),e.jsx("div",{className:"my-3 w-full h-[1px] bg-gray-200"}),m?e.jsx("div",{children:e.jsx(H,{})}):e.jsx("div",{className:"relative  h-[80vh]",id:"site-popup-container",children:(p==null?void 0:p.length)>0?e.jsx(J,{portalId:"site-popup-container",imageFiles:p,height:190,refetch:()=>Promise.resolve(),minWidth:140,maxWidth:190,setActivePopupType:i,activePopupType:a,controlledType:"site",showSiteSelectButton:!0,onSiteImageConfirm:$,selecteSiteImage:b,onImageClick:o=>{y(o),i("site")},onPopupOpenChange:j,className:"overflow-y-auto max-h-[550px] "}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white   text-center p-6",children:[e.jsx("i",{className:"fas fa-box-open text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Site Images Available"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Upload the Images in the Site Measurement Stage",e.jsx("br",{}),"Select multiple Reference images for single Site Image ",e.jsx("br",{}),"after selection ",e.jsx("strong",{children:'"Confirm Selection"'})," to add images ðŸš€"]})]})})]})]}),f.length>0?e.jsxs("div",{className:"mt-10 space-y-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-xl mb-4",children:"Selected Designs"}),e.jsxs("div",{className:"flex gap-2",children:[(F||I)&&e.jsx(L,{isLoading:R,onClick:W,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded shadow disabled:opacity-50",children:R?"Generating...":"Generate Pdf"}),e.jsx(L,{onClick:()=>{v([])},variant:"danger",className:"bg-red-600  text-white px-6 py-2 rounded shadow disabled:opacity-50",children:"Clear List"})]})]}),f.map(({siteImage:o,referenceImages:c},t)=>e.jsxs("div",{className:"p-4 py-6 border border-gray-300 rounded-lg bg-white shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-700 min-w-[110px]",children:["Site Image ",t+1]}),e.jsx("br",{}),e.jsx("img",{src:o==null?void 0:o.url,alt:o.originalName||`Site ${t+1}`,className:"h-28 w-auto object-contain border rounded-md"})]}),e.jsxs(L,{variant:"danger",onClick:()=>U(o._id),className:"text-white bg-red-600 text-sm whitespace-nowrap",children:[e.jsx("i",{className:"fas fa-trash !mr-2 "}),"Remove Site + References"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 flex-col",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-700 min-w-[110px]",children:"Referece Images"}),e.jsx("div",{className:"flex flex-wrap gap-4 ",children:c.map(d=>e.jsxs("div",{className:"relative  w-[120px] h-[120px] ",children:[e.jsx("img",{src:d.url,alt:d.originalName,className:"w-full h-full object-cover rounded  shadow-sm"}),e.jsx("button",{onClick:()=>O(o._id,d._id),className:"absolute top-1 right-1 bg-red-600 text-white p-1 px-2 text-xs rounded-full",children:"âœ•"}),e.jsx("p",{className:"text-xs mt-1 text-center max-w-[120px] truncate",children:d.originalName})]},d._id))})]})]},o._id))]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold text-black-800 my-3",children:"Youre Selections will appear below"}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white rounded-xl shadow-xl border border-gray-100  text-center p-6",children:[e.jsx("i",{className:"fas fa-box-open text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Selections Created"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Your Selection will appear here.",e.jsx("br",{}),"Select multiple Reference images for single Site Image ",e.jsx("br",{}),"after selection ",e.jsx("strong",{children:'"Confirm Selection"'})," to add images ðŸš€"]})]})]}),e.jsx("section",{className:"mt-6",children:e.jsx(ve,{projectId:s})})]})}const Ce=Object.freeze(Object.defineProperty({__proto__:null,default:ke,fetchSuggestions:te},Symbol.toStringTag,{value:"Module"}));export{xe as S,Ce as a,te as f};
