import{u,c as j,j as e}from"./index-BzUhBKjh.js";import{C as g,a as h,b as N,c as y}from"./Card-kz-Izex-.js";import{d as C}from"./staffTaskApi-CLgAmwzO.js";import{B as b}from"./Button-G0_5Lr1e.js";import{d as T,f as v}from"./dateFormator-BGKi5rfZ.js";import{t as d}from"./toast-BSC5QTk1.js";const A=({task:s})=>{var t;const n=u(),{role:o}=j(),c=o==="staff",{mutateAsync:m,isPending:x}=C(),p=async a=>{var r,l;try{await m({mainTaskId:a}),d({description:"Task Deleted Successfully",title:"Success"})}catch(i){d({title:"Error",description:((l=(r=i==null?void 0:i.response)==null?void 0:r.data)==null?void 0:l.message)||"Failed to delete task",variant:"destructive"})}},f=a=>{n(`single/${a}`)};return e.jsxs(g,{onClick:()=>f(s._id),className:"cursor-pointer p-0 border-l-4 border-blue-600",children:[e.jsx(h,{children:e.jsx(N,{children:(s==null?void 0:s.title.trim())||"No title"})}),e.jsxs(y,{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("i",{className:"fa-solid fa-calendar-days mr-2 text-blue-600"}),"Due: ",s.due?e.jsxs(e.Fragment,{children:[T(s.due)," - ",v(s==null?void 0:s.due)," "]}):e.jsx(e.Fragment,{children:"N/A"})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("i",{className:"fa-solid fa-layer-group mr-2 text-purple-600"}),"assignee: ",((t=s==null?void 0:s.assigneeId)==null?void 0:t.staffName)||"N/A"]}),e.jsxs("p",{className:"text-sm capitalize",children:[e.jsx("i",{className:"fa-solid fa-star mr-2 text-yellow-500"}),"Priority: ",s.priority]}),e.jsxs("p",{className:"text-sm capitalize",children:[e.jsx("i",{className:"fa-solid fa-building mr-2 text-indigo-500"}),"Department: ",s.department]}),e.jsx("div",{className:"flex gap-2 mt-3 justify-end",children:!c&&e.jsxs(b,{size:"sm",onClick:a=>{a.stopPropagation(),p(s._id)},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm",isLoading:x,children:[e.jsx("i",{className:"fa-solid fa-trash mr-1"}),"Delete"]})})]})]},s._id)};export{A as S};
