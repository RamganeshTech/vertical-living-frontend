import{c as l,d,e as o,s as u,g as c,v as f}from"./index-hYGmCEO1.js";const y=async(e,a,t,i)=>(await f.put(`https://houseofram.in/api/materialarrivalcheck/updateImage/${e}/${a}/${t}`,i)).data,m=async(e,a,t,i,r)=>(await r.put(`/materialarrivalcheck/updatequantity/${e}/${a}/${t}`,{arrivedQuantity:i})).data,p=async(e,a,t,i,r)=>(await r.put(`/materialarrivalcheck/uploadimage/staff/${e}/${a}/${t}`,i)).data,k=()=>{const e=u();return o({mutationFn:async({projectId:a,orderNumber:t,subItemId:i,formData:r})=>await y(a,t,i,r),onSuccess:(a,{projectId:t})=>{e.invalidateQueries({queryKey:["material-arrival",t]})}})},C=()=>{const{role:e}=l(),a=c(e),t=u(),i=["owner","staff","CTO"];return o({mutationFn:async({projectId:r,orderNumber:n,subItemId:s,formData:w})=>{if(!e||!i.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not available");return await p(r,n,s,w,a)},onSuccess:(r,{projectId:n})=>{t.invalidateQueries({queryKey:["material-arrival",n]})}})},E=()=>{const{role:e}=l(),a=c(e),t=u(),i=["owner","staff","CTO"];return o({mutationFn:async({projectId:r,orderNumber:n,subItemId:s,arrivedQuantity:w})=>{if(!e||!i.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not available");return await m(r,n,s,w,a)},onSuccess:(r,{projectId:n})=>{t.invalidateQueries({queryKey:["material-arrival",n]})}})},v=async(e,a,t,i,r)=>(await r.put(`/materialarrivalcheck/updateverification/${e}/${a}/${t}`,{isVerified:i})).data,S=()=>{const{role:e}=l(),a=c(e),t=u(),i=["owner","staff","CTO"];return o({mutationFn:async({projectId:r,orderNumber:n,subItemId:s,toggle:w})=>{if(!e||!i.includes(e))throw new Error("Not allowed");if(!a)throw new Error("API instance not available");return await v(r,n,s,w,a)},onSuccess:(r,{projectId:n})=>{t.invalidateQueries({queryKey:["material-arrival",n]})}})},A=async(e,a)=>(await a.get(`/materialarrivalcheck/getalldetails/${e}`)).data.data,b=e=>{const{role:a}=l(),t=c(a),i=["owner","staff","CTO","worker"];return d({queryKey:["material-arrival",e],queryFn:async()=>{if(!a||!i.includes(a))throw new Error("Not allowed");return await A(e,t)},enabled:!!e&&!!a,retry:!1,refetchOnMount:!1})},h=async(e,a)=>(await a.post(`/materialarrivalcheck/${e}/generate-link`)).data.data,g=async(e,a)=>(await f.get(`https://houseofram.in/api/materialarrivalcheck/public/${e}/${a}`)).data.data,F=()=>{const{role:e}=l(),a=c(e),t=["owner","staff","CTO"];return o({mutationFn:async({projectId:i})=>{if(!e||!t.includes(e))throw new Error("Not allowed");return await h(i,a)}})},I=(e,a)=>d({queryKey:["material-arrival-public",e,a],queryFn:async()=>await g(e,a),enabled:!!e&&!!a}),$=async({formId:e,projectId:a,deadLine:t,api:i})=>{const{data:r}=await i.put(`/materialarrivalcheck/deadline/${a}/${e}`,{deadLine:t});if(!r.ok)throw new Error(r.message);return r.data},M=async({projectId:e,api:a})=>{const{data:t}=await a.put(`/materialarrivalcheck/completionstatus/${e}`);if(!t.ok)throw new Error(t.message);return t.data},N=()=>{const e=["owner","staff","CTO"],{role:a}=l(),t=c(a),i=u();return o({mutationFn:async({formId:r,projectId:n,deadLine:s})=>{if(!a||!e.includes(a))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await $({formId:r,projectId:n,deadLine:s,api:t})},onSuccess:(r,n)=>{i.invalidateQueries({queryKey:["ordering-material",n.formId]})}})},Q=()=>{const e=["owner","staff","CTO"],{role:a}=l(),t=c(a),i=u();return o({mutationFn:async({projectId:r})=>{if(!a||!e.includes(a))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await M({projectId:r,api:t})},onSuccess:(r,{projectId:n})=>{i.invalidateQueries({queryKey:["material-arrival",n]})}})};export{E as a,C as b,b as c,F as d,N as e,Q as f,I as g,k as h,S as u};
