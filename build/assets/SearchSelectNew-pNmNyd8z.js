import{r as n,j as t}from"./index-C2yypHlC.js";const k=r=>r.length===0?[]:typeof r[0]=="string"?r.map(l=>({value:l,label:l})):r,E=(r,l)=>{switch(l){case"email":return r.email||r.label;case"both":return`${r.label} ${r.email||""}`.toLowerCase();case"name":default:return r.label}},L=({options:r,placeholder:l="Select an option",searchPlaceholder:v="Search...",onValueChange:x,value:o,className:y="",searchBy:p="name",displayFormat:h="detailed"})=>{const[j,d]=n.useState(!1),[f,c]=n.useState(""),[s,i]=n.useState(null),u=n.useRef(null),m=k(r),b=m.filter(e=>{var a,g;return(g=(a=E(e,p))==null?void 0:a.toLowerCase())==null?void 0:g.includes(f.toLowerCase())});n.useEffect(()=>{const e=a=>{u.current&&!u.current.contains(a.target)&&(d(!1),c(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),n.useEffect(()=>{if(o){const e=m.find(a=>a.value===o);i(e||null)}else i(null)},[o,m]);const N=e=>{i(e),x(e.value),d(!1),c("")},w=()=>{d(!0),c("")},S=e=>{c(e.target.value)},C=()=>{i(null),x(null),c("")};return t.jsxs("div",{className:`relative ${y}`,ref:u,children:[t.jsxs("div",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white cursor-pointer hover:border-gray-400 transition-colors flex justify-between items-center",onClick:w,children:[t.jsx("div",{className:"flex-1 min-w-0",children:s?t.jsxs("div",{className:"flex flex-col truncate",children:[t.jsx("span",{className:"text-gray-800 font-medium truncate",children:s.label}),h==="detailed"&&s.email&&t.jsx("span",{className:"text-gray-500 text-sm truncate",children:s.email})]}):t.jsx("span",{className:"text-gray-500 truncate",children:l})}),t.jsxs("div",{className:"flex items-center space-x-2 ml-2 flex-shrink-0",children:[s&&t.jsx("button",{onClick:e=>{e.stopPropagation(),C()},className:"text-gray-400 hover:text-gray-600 text-lg font-bold w-5 h-5 flex items-center justify-center rounded-full hover:bg-gray-200",title:"Clear selection",children:"×"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"▼"})]})]}),j&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:[t.jsx("div",{className:"p-2 border-b border-gray-200 sticky top-0 bg-white",children:t.jsx("input",{type:"text",placeholder:v,value:f,onChange:S,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"py-1",children:b.length>0?b.map(e=>t.jsxs("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 ${(s==null?void 0:s.value)===e.value?"bg-blue-50 border-blue-200":""}`,onClick:()=>N(e),children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.label}),h==="detailed"&&e.email&&t.jsx("div",{className:"text-sm text-gray-500 mt-1",children:e.email})]},e.value)):t.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:"No options found"})})]})]})};export{L as S};
