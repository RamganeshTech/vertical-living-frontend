import{f as i,g as c,h as d,b as w,i as l}from"./index-BAM0eJUz.js";import{u as g}from"./useInfiniteQuery-BGz0VllC.js";const u="/designlab",y=async({organizationId:t,formData:n,api:e})=>{const{data:a}=await e.post(`${u}/create/${t}`,n,{headers:{"Content-Type":"multipart/form-data"}});if(!a.ok)throw new Error(a.message);return a.data},f=async({organizationId:t,pageParam:n=1,filters:e,api:a})=>{const r={organizationId:t,page:n,limit:10,...e},{data:o}=await a.get(`${u}/getall`,{params:r});if(!o.ok)throw new Error(o.message);return o.data},p=async({id:t,api:n})=>{const{data:e}=await n.get(`${u}/getsingle/${t}`);if(!e.ok)throw new Error(e.message);return e.data},m=async({id:t,formData:n,api:e})=>{const{data:a}=await e.put(`${u}/updatedesignnew/${t}`,n,{headers:{"Content-Type":"multipart/form-data"}});if(!a.ok)throw new Error(a.message);return a.data},h=async({id:t,api:n})=>{const{data:e}=await n.delete(`${u}/deletedesign/${t}`);if(!e.ok)throw new Error(e.message);return e.data},s=["owner","staff","CTO"],L=()=>{const{role:t}=i(),n=l(t),e=c();return d({mutationFn:async({organizationId:a,formData:r})=>{if(!t||!s.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await y({organizationId:a,formData:r,api:n})},onSuccess:(a,{organizationId:r})=>{e.invalidateQueries({queryKey:["designLabs",r]})}})},E=({organizationId:t,filters:n})=>{const{role:e}=i(),a=l(e);return g({queryKey:["designLabs",t,n],queryFn:async({pageParam:r=1})=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await f({organizationId:t,pageParam:r,filters:n,api:a})},initialPageParam:1,getNextPageParam:r=>r.pagination.hasNextPage?r.pagination.nextPage:void 0,enabled:!!t&&!!e&&s.includes(e)})},P=t=>{const{role:n}=i(),e=l(n);return w({queryKey:["designLab",t],queryFn:async()=>{if(!n||!s.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await p({id:t,api:e})},enabled:!!t&&!!n&&s.includes(n)})},I=()=>{const{role:t}=i(),n=l(t),e=c(),a=["owner","staff","CTO"];return d({mutationFn:async({id:r,formData:o})=>{if(!t||!a.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await m({id:r,formData:o,api:n})},onSuccess:(r,o)=>{e.invalidateQueries({queryKey:["designLab",o.id]}),r!=null&&r.organizationId&&e.invalidateQueries({queryKey:["designLabs",r.organizationId]}),e.invalidateQueries({queryKey:["designLabs"]})},onError:r=>{console.error("Failed to update design lab:",r)}})},q=()=>{const{role:t}=i(),n=l(t),e=c();return d({mutationFn:async a=>{if(!t||!s.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await h({id:a,api:n})},onSuccess:()=>{e.invalidateQueries({queryKey:["designLabs"]})}})};export{P as a,I as b,E as c,q as d,L as u};
