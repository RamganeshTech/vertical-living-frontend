import{f as s,b as w,h as c,s as l,i}from"./index-BAM0eJUz.js";const u=async({projectId:r,organizationId:o,payload:e,api:a})=>{const{data:t}=await a.post(`/workreports/create/${r}/${o}`,e);if(!t.ok)throw new Error(t.message);return t.data},d=async({projectId:r,api:o})=>{const{data:e}=await o.get(`/workreports/getreports/${r}`);if(!e.ok)throw new Error(e.message);return e.data},f=async({projectId:r,id:o,dailyTaskId:e,api:a})=>{const{data:t}=await a.get(`/workreports/workimages/${r}/${o}/${e}`);if(!t.ok)throw new Error(t.message);return t.data},k=async({id:r,api:o})=>{const{data:e}=await o.delete(`/workreports/delete/${r}`);if(!e.ok)throw new Error(e.message);return e.data},y=()=>{const r=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o);return c({mutationFn:async({projectId:a,organizationId:t,payload:n})=>{if(!o||!r.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await u({projectId:a,organizationId:t,payload:n,api:e})},onSuccess:(a,{projectId:t})=>{l.invalidateQueries({queryKey:["workreports",t]})}})},h=r=>{const o=["owner","staff","CTO","client","worker"],{role:e}=s(),a=i(e);return w({queryKey:["workreports",r],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("not allowed to fetch this data");if(!a)throw new Error("API instance not found for role");return await d({projectId:r,api:a})},enabled:!!r&&!!e})},g=()=>{const r=["owner","staff","CTO"],{role:o}=s(),e=i(o);return c({mutationFn:async({id:a})=>{if(!o||!r.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await k({id:a,api:e})},onSuccess:(a,{projectId:t})=>{l.invalidateQueries({queryKey:["workreports",t]})}})},m=(r,o,e)=>{const a=["owner","staff","CTO","client","worker"],{role:t}=s(),n=i(t);return w({queryKey:["workreportimages",r],queryFn:async()=>{if(!t||!a.includes(t))throw new Error("not allowed to fetch this data");if(!n)throw new Error("API instance not found for role");return await f({projectId:r,id:o,dailyTaskId:e,api:n})},enabled:!!r&&!!t})};export{g as a,m as b,y as c,h as u};
