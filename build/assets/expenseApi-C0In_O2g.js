import{c as i,i as l,d as c,q as r,k as d,g as u}from"./index-CUvv9ev0.js";const w=async({expenseData:t,api:n})=>{const{data:e}=await n.post("/department/accounting/expense/create",t);if(!e.ok)throw new Error(e.message);return e.data},p=async({id:t,expenseData:n,api:e})=>{const{data:o}=await e.put(`/department/accounting/expense/update/${t}`,n);if(!o.ok)throw new Error(o.message);return o.data},y=async({id:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/expense/delete/${t}`);if(!e.ok)throw new Error(e.message);return e},f=async({id:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/expense/getsingle/${t}`);if(!e.ok)throw new Error(e.message);return e.data},g=async({params:t,api:n})=>{const{data:e}=await n.get("/department/accounting/expense/getall",{params:t});if(!e.ok)throw new Error(e.message);return e},x=async({expenseId:t,api:n})=>{const{data:e}=await n.post(`/department/accounting/expense/syntopayments/${t}`);if(!e.ok)throw new Error(e.message);return e.data},m=()=>{const t=["owner","staff","CTO"],{role:n}=i(),e=u(n);return c({mutationFn:async o=>{if(!n||!t.includes(n))throw new Error("Not allowed to create expense");if(!e)throw new Error("API instance not found for role");return await w({expenseData:o,api:e})},onSuccess:o=>{r.invalidateQueries({queryKey:["expenses","list",o.organizationId]}),r.invalidateQueries({queryKey:["expenses","statistics",o.organizationId]})}})},h=()=>{const t=["owner","staff","CTO"],{role:n}=i(),e=u(n);return c({mutationFn:async({id:o,...a})=>{if(!n||!t.includes(n))throw new Error("Not allowed to update expense");if(!e)throw new Error("API instance not found for role");return await p({id:o,expenseData:a,api:e})},onSuccess:(o,a)=>{r.invalidateQueries({queryKey:["expenses","detail",a.id]}),r.invalidateQueries({queryKey:["expenses","list",o.organizationId]}),r.invalidateQueries({queryKey:["expenses","statistics",o.organizationId]})}})},I=()=>{const t=["owner","staff","CTO"],{role:n}=i(),e=u(n);return c({mutationFn:async({id:o,_organizationId:a})=>{if(!n||!t.includes(n))throw new Error("Not allowed to delete expense");if(!e)throw new Error("API instance not found for role");return await y({id:o,api:e})},onSuccess:(o,a)=>{r.invalidateQueries({queryKey:["expenses","detail",a.id]}),r.invalidateQueries({queryKey:["expenses","list",a._organizationId]}),r.invalidateQueries({queryKey:["expenses","statistics",a._organizationId]})}})},P=(t,n=!0)=>{const e=["owner","staff","CTO"],{role:o}=i(),a=u(o);return d({queryKey:["expenses","detail",t],queryFn:async()=>{if(!o||!e.includes(o))throw new Error("Not allowed to view expense");if(!a)throw new Error("API instance not found for role");return await f({id:t,api:a})},enabled:n&&!!t&&!!o&&!!a})},q=(t,n=!0)=>{const e=["owner","staff","CTO"],{role:o}=i(),a=u(o);return l({queryKey:["expenses","list",t.organizationId,t],queryFn:async({pageParam:s=1})=>{if(!o||!e.includes(o))throw new Error("Not allowed to view expenses");if(!a)throw new Error("API instance not found for role");return await g({params:{...t,page:s},api:a})},getNextPageParam:s=>s.pagination.hasNextPage?s.pagination.page+1:void 0,getPreviousPageParam:s=>s.pagination.hasPrevPage?s.pagination.page-1:void 0,initialPageParam:1,enabled:n&&!!t.organizationId&&!!o&&!!a})},v=()=>{const t=["owner","staff","CTO"],{role:n}=i(),e=u(n);return c({mutationFn:async({expenseId:o})=>{if(!n||!t.includes(n))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await x({expenseId:o,api:e})},onSuccess:()=>{r.invalidateQueries({queryKey:["bills"]})}})};export{h as a,v as b,P as c,q as d,I as e,m as u};
