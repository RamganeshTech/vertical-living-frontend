import{u as m}from"./useQuery-BmC89CNR.js";import{u as c}from"./useMutation-DaAue-fW.js";import{u as g}from"./useInfiniteQuery-Ce_ii5sB.js";import{c as a,q as i}from"./index-C2KHEypQ.js";import{g as s}from"./roleCheck-DBD7VNWv.js";const y=async({payload:t,api:n})=>{const e=new FormData,{files:r,phone:d,mainImage:f,...p}=t;Object.entries(p).forEach(([l,w])=>{w!=null&&e.append(l,String(w))}),d&&e.append("phone",JSON.stringify(d)),f&&e.append("mainImage",f),r&&r.length>0&&r.forEach(l=>{e.append("files",l)});const{data:u}=await n.post("/department/accounting/vendor/createvendor",e,{headers:{"Content-Type":"multipart/form-data"}});if(!u.ok)throw new Error(u.message);return u.data},h=async({vendorId:t,file:n,api:e})=>{const r=new FormData;r.append("mainImage",n);const{data:d}=await e.put(`/department/accounting/vendor/update-main-image/${t}`,r,{headers:{"Content-Type":"multipart/form-data"}});if(!d.ok)throw new Error(d.message);return d.data},v=async({params:t,api:n})=>{const{data:e}=await n.get("/department/accounting/vendor/getallvendor",{params:t});if(!e.ok)throw new Error(e.message);return e},E=async({VendorId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/vendor/singlevendor/${t}`);if(!e.ok)throw new Error(e.message);return e.data},P=async({organizationId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/vendor/getallvendorname/${t}`);if(!e.ok)throw new Error(e.message);return e.data},I=async({vendorId:t,payload:n,api:e})=>{const{data:r}=await e.put(`/department/accounting/vendor/updatevendor/${t}`,n);if(!r.ok)throw new Error(r.message);return r.data},A=async({api:t,formData:n,id:e})=>(await t.put(`/department/accounting/vendor/updatevendor/${e}/document`,n,{headers:{"Content-Type":"multipart/form-data"}})).data,k=async({VendorId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/vendor/deletevendor/${t}`);if(!e.ok)throw new Error(e.message)},o=["owner","staff","CTO"],K=()=>{const{role:t}=a(),n=s(t);return c({mutationFn:async e=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await y({payload:e,api:n})},onSuccess:(e,r)=>{i.invalidateQueries({queryKey:["vendors","list",r.organizationId]}),i.invalidateQueries({queryKey:["vendors","list",r.organizationId,r.projectId]})}})},Q=()=>{const{role:t}=a(),n=s(t);return c({mutationFn:async({vendorId:e,file:r})=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await h({vendorId:e,file:r,api:n})},onSuccess:(e,r)=>{i.invalidateQueries({queryKey:["vendors","list"]}),i.invalidateQueries({queryKey:["vendors",r.vendorId]})}})},C=t=>{const{role:n}=a(),e=s(n);return g({queryKey:["vendors","list",t.organizationId,t.search,t.sortBy,t.sortOrder,t.createdFromDate,t.createdToDate],queryFn:async({pageParam:r=1})=>{if(!n||!o.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await v({params:{...t,page:r},api:e})},getNextPageParam:r=>{if(r.pagination.hasNextPage)return r.pagination.currentPage+1},getPreviousPageParam:r=>{if(r.pagination.hasPrevPage)return r.pagination.currentPage-1},initialPageParam:1,enabled:!!n&&o.includes(n)&&!!t.organizationId})},S=(t,n=!0)=>{const{role:e}=a(),r=s(e);return m({queryKey:["vendors","single",t],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await E({VendorId:t,api:r})},enabled:n&&!!e&&o.includes(e)&&!!t})},O=(t,n=!0)=>{const{role:e}=a(),r=s(e);return m({queryKey:["allvendorsname",t],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await P({organizationId:t,api:r})},enabled:n&&!!e&&o.includes(e)&&!!t})},$=()=>{const{role:t}=a(),n=s(t);return c({mutationFn:async({vendorId:e,payload:r})=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await I({vendorId:e,payload:r,api:n})},onSuccess:e=>{i.invalidateQueries({queryKey:["vendors","single",e.vendorId]}),i.invalidateQueries({queryKey:["vendors","list"]})}})},T=()=>{const{role:t}=a(),n=s(t);return c({mutationFn:async({id:e,formData:r})=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await A({id:e,formData:r,api:n})}})},G=()=>{const{role:t}=a(),n=s(t);return c({mutationFn:async e=>{if(!t||!o.includes(t))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await k({VendorId:e,api:n})},onSuccess:()=>{i.invalidateQueries({queryKey:["vendors","list"]})}})};export{C as a,G as b,S as c,$ as d,T as e,K as f,Q as g,O as u};
