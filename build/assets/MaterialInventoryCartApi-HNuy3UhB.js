import{u as w}from"./useQuery-BBgvqOK0.js";import{u as c}from"./useMutation-oVcqBODs.js";import{b as s,q as l}from"./index-IX_jUi_Z.js";import{g as i}from"./roleCheck-yWEzJ9f0.js";const n=["owner","staff","CTO"],m=async({organizationId:t,projectId:e,productId:r,quantity:a,specification:o,api:d})=>{const u=await d.post("/materialinventory/cart/add",{organizationId:t,projectId:e,productId:r,quantity:a,specification:o});if(!u.data.ok)throw new Error(u.data.message);return u.data.data},f=async({organizationId:t,projectId:e,api:r})=>{const a=await r.get(`/materialinventory/cart/get?organizationId=${t}&projectId=${e}`);if(!a.data.ok)throw new Error(a.data.message);return a.data.data},y=async({cartId:t,productId:e,quantity:r,api:a})=>{const o=await a.put("/materialinventory/cart/update-quantity",{cartId:t,productId:e,quantity:r});if(!o.data.ok)throw new Error(o.data.message);return o.data.data},p=async({cartId:t,productId:e,api:r})=>{const a=await r.delete("/materialinventory/cart/remove-item",{data:{cartId:t,productId:e}});if(!a.data.ok)throw new Error(a.data.message);return a.data.data},h=async({id:t,projectId:e,api:r})=>{const a=await r.post(`/materialinventory/cart/generatematerial/pdf/${e}/${t}`);if(!a.data.ok)throw new Error(a.data.message);return a.data.data},P=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async r=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return m({...r,api:e})},onSuccess:(r,{organizationId:a,projectId:o})=>{l.invalidateQueries({queryKey:["cart",a,o]})}})},g=({organizationId:t,projectId:e})=>{const{role:r}=s(),a=i(r);return w({queryKey:["cart",t,e],queryFn:async()=>{if(!r||!n.includes(r))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return f({organizationId:t,projectId:e,api:a})},enabled:!!(t&&e&&r&&n.includes(r))})},C=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async r=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return y({...r,api:e})},onSuccess:()=>{l.invalidateQueries({queryKey:["cart"]})}})},k=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async r=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return p({...r,api:e})},onSuccess:()=>{l.invalidateQueries({queryKey:["cart"]})}})},q=()=>{const{role:t}=s(),e=i(t);return c({mutationFn:async({id:r,projectId:a})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return h({id:r,projectId:a,api:e})}})};export{P as a,C as b,k as c,q as d,g as u};
