import{g as w,e as s,f as u,q as d,n as y,h as l,E as g}from"./index-HgTal7lb.js";const f=async({projectId:t,api:e})=>{const{data:r}=await e.get(`/orderingmaterial/getalldetails/${t}`);if(!r.ok)throw new Error(r.message);return r.data},q=t=>{const e=["owner","staff","CTO","worker","client"],{role:r}=s(),a=l(r);return w({queryKey:["ordering-material-history",t],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("Not allowed to fetch ordering material");if(!a)throw new Error("API not available");return await f({projectId:t,api:a})},enabled:!!r&&!!t&&!!a,retry:!1,refetchOnMount:!1})},h=async({formId:t,projectId:e,deadLine:r,api:a})=>{const{data:n}=await a.put(`/orderingmaterial/deadline/${e}/${t}`,{deadLine:r});if(!n.ok)throw new Error(n.message);return n.data},p=async({projectId:t,api:e})=>{const{data:r}=await e.put(`/orderingmaterial/completionstatus/${t}`);if(!r.ok)throw new Error(r.message);return r.data},E=async(t,e,r)=>{const{data:a}=await r.put(`/orderingmaterial/${t}/delivery-location`,e);if(!a.ok)throw new Error(a.message);return a.data},I=()=>{const t=["owner","staff","CTO"],{role:e}=s(),r=l(e),a=y();return u({mutationFn:async({projectId:n,updates:o})=>{if(!e||!t.includes(e))throw new Error("Not allowed to update delivery location");if(!r)throw new Error("API instance not available");return await E(n,o,r)},onSuccess:(n,{projectId:o})=>{a.invalidateQueries({queryKey:["ordering-material",o]})}})},M=()=>{const t=["owner","staff","CTO"],{role:e}=s(),r=l(e);return u({mutationFn:async({formId:a,projectId:n,deadLine:o})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await h({formId:a,projectId:n,deadLine:o,api:r})},onSuccess:(a,n)=>{d.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})},v=()=>{const t=["owner","staff","CTO"],{role:e}=s(),r=l(e);return u({mutationFn:async({projectId:a})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await p({projectId:a,api:r})},onSuccess:(a,{projectId:n})=>{d.invalidateQueries({queryKey:["ordering-material-history",n]})}})},O=async({projectId:t})=>{const{data:e}=await g.get(`https://houseofram.in/api/orderingmaterial/getpublic/${t}`);if(console.log("data",e),!e.ok)throw new Error(e.message);return e.data},C=t=>w({queryKey:["ordering-material-public",t],queryFn:async()=>await O({projectId:t}),enabled:!!t,retry:!1,refetchOnMount:!1}),b=async({projectId:t,api:e})=>{const{data:r}=await e.patch(`/orderingmaterial/generatelink/${t}`);if(!r.ok)throw new Error(r.message);return r.data},P=()=>{const t=["owner","staff","CTO"],{role:e}=s(),r=l(e);return u({mutationFn:async({projectId:a})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await b({projectId:a,api:r})},onSuccess:(a,{projectId:n})=>{d.invalidateQueries({queryKey:["ordering-material-history",n]})}})},k=async({projectId:t,unitId:e,subItemName:r,quantity:a,unit:n,api:o})=>{const{data:i}=await o.post(`/orderingmaterial/${t}/unit/${e}/addsubitem`,{subItemName:r,quantity:a,unit:n});if(!i.ok)throw new Error(i.message);return i.data},F=()=>{const t=["owner","staff","CTO"],{role:e}=s(),r=l(e);return u({mutationFn:async({projectId:a,unitId:n,subItemName:o,quantity:i,unit:c})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await k({projectId:a,unitId:n,subItemName:o,quantity:i,unit:c,api:r})},onSuccess:(a,n)=>{d.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})},A=async({projectId:t,unitId:e,subItemId:r,api:a})=>{const{data:n}=await a.delete(`/orderingmaterial/${t}/unit/${e}/deletesubitem/${r}`);if(!n.ok)throw new Error(n.message);return n.data},R=()=>{const t=["owner","staff","CTO"],{role:e}=s(),r=l(e);return u({mutationFn:async({projectId:a,unitId:n,subItemId:o})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await A({projectId:a,unitId:n,subItemId:o,api:r})},onSuccess:(a,n)=>{d.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})},S=async({projectId:t,unitId:e,subItemId:r,subItemName:a,quantity:n,unit:o,api:i})=>{const{data:c}=await i.put(`/orderingmaterial/${t}/unit/${e}/updatesubitem/${r}`,{subItemName:a,quantity:n,unit:o});if(!c.ok)throw new Error(c.message);return c.data},K=()=>{const t=["owner","staff","CTO"],{role:e}=s(),r=l(e);return u({mutationFn:async({projectId:a,unitId:n,subItemId:o,subItemName:i,quantity:c,unit:m})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await S({projectId:a,unitId:n,subItemId:o,subItemName:i,quantity:c,unit:m,api:r})},onSuccess:(a,n)=>{d.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})};export{P as a,F as b,R as c,K as d,M as e,v as f,I as g,C as h,q as u};
