import{d as l,q as w}from"./index-B80eZEEO.js";import{g as u}from"./roleCheck-DSNABiCy.js";import{u as d}from"./useQuery-C1iFPXNz.js";import{u as f}from"./useMutation-BlarAHK3.js";import{u as p}from"./useInfiniteQuery-Y7StpI4X.js";const g=async({organizationId:n,customerId:t,page:e,limit:o,date:s,search:c,api:i})=>{const r=new URLSearchParams;n&&r.append("organizationId",n),t&&r.append("customerId",t),e&&r.append("page",e.toString()),o&&r.append("limit",o.toString()),s&&r.append("date",s),c&&r.append("search",c);const{data:a}=await i.get(`/department/accounting/retailinvoice/getallinvoice?${r.toString()}`);if(!a.ok)throw new Error(a.message);return a},m=async({invoiceData:n,api:t})=>{const{data:e}=await t.post("/department/accounting/retailinvoice/createinvocie",n);if(!e.ok)throw new Error(e.message);return e.data},v=async({invoiceId:n,api:t})=>{const{data:e}=await t.delete(`/department/accounting/retailinvoice/deleteinvoice/${n}`);if(!e.ok)throw new Error(e.message);return e.data},y=async({invoiceId:n,api:t})=>{const{data:e}=await t.get(`/department/accounting/retailinvoice/getsingleinvoice/${n}`);if(!e.ok)throw new Error(e.message);return e.data},A=({organizationId:n,customerId:t,limit:e=10,search:o,date:s})=>{const c=["owner","staff","CTO"],{role:i}=l(),r=u(i);return p({queryKey:["retailinvoices",n,t,e,s,o],queryFn:async({pageParam:a=1})=>{if(!i||!c.includes(i))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await g({organizationId:n,customerId:t,page:a,limit:e,date:s,search:o,api:r})},getNextPageParam:a=>{if(a.pagination.page<a.pagination.totalPages)return a.pagination.page+1},getPreviousPageParam:a=>{if(a.pagination.page>1)return a.pagination.page-1},initialPageParam:1,enabled:!!i&&c.includes(i)&&!!n})},k=()=>{const n=["owner","staff","CTO"],{role:t}=l(),e=u(t);return f({mutationFn:async({invoiceData:o})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await m({invoiceData:o,api:e})},onSuccess:()=>{w.invalidateQueries({queryKey:["retailinvoices"]})}})},q=()=>{const n=["owner","staff","CTO"],{role:t}=l(),e=u(t);return f({mutationFn:async({invoiceId:o})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await v({invoiceId:o,api:e})},onSuccess:()=>{w.invalidateQueries({queryKey:["retailinvoices"]})}})},S=n=>{const t=["owner","staff","CTO"],{role:e}=l(),o=u(e);return d({queryKey:["retailinvoice",n],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await y({invoiceId:n,api:o})},enabled:!!n&&!!e&&t.includes(e)})};export{q as a,k as b,S as c,A as u};
