import{c as s,q as w,f as d,n as p}from"./index-PP9bwaFb.js";import{g as l}from"./roleCheck-BSRkLz35.js";import{u as m}from"./useQuery-Crlnn1zB.js";import{u as c}from"./useMutation-CnbKwdgs.js";const g=async({projectId:a,api:e})=>{const{data:t}=await e.get(`/orderingmaterial/getalldetails/${a}`);if(!t.ok)throw new Error(t.message);return t.data},Q=a=>{const e=["owner","staff","CTO","worker","client"],{role:t}=s(),r=l(t);return m({queryKey:["ordering-material-history",a],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("Not allowed to fetch ordering material");if(!r)throw new Error("API not available");return await g({projectId:a,api:r})},enabled:!!t&&!!a&&!!r,retry:!1,refetchOnMount:!1})},h=async({formId:a,projectId:e,deadLine:t,api:r})=>{const{data:n}=await r.put(`/orderingmaterial/deadline/${e}/${a}`,{deadLine:t});if(!n.ok)throw new Error(n.message);return n.data},E=async({projectId:a,api:e})=>{const{data:t}=await e.put(`/orderingmaterial/completionstatus/${a}`);if(!t.ok)throw new Error(t.message);return t.data},O=async(a,e,t)=>{const{data:r}=await t.put(`/orderingmaterial/${a}/delivery-location`,e);if(!r.ok)throw new Error(r.message);return r.data},T=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e),r=d();return c({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update delivery location");if(!t)throw new Error("API instance not available");return await O(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material",o]})}})},F=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e);return c({mutationFn:async({formId:r,projectId:n,deadLine:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await h({formId:r,projectId:n,deadLine:o,api:t})},onSuccess:(r,n)=>{w.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})},R=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e);return c({mutationFn:async({projectId:r})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await E({projectId:r,api:t})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},q=async({projectId:a})=>{const{data:e}=await p.get(`https://houseofram.in/api/orderingmaterial/getpublic/${a}`);if(console.log("data",e),!e.ok)throw new Error(e.message);return e.data},_=a=>m({queryKey:["ordering-material-public",a],queryFn:async()=>await q({projectId:a}),enabled:!!a,retry:!1,refetchOnMount:!1}),k=async({projectId:a,organizationId:e,api:t})=>{const{data:r}=await t.patch(`/orderingmaterial/generatelink/${a}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},v=async({projectId:a,pdfId:e,status:t,api:r})=>{const{data:n}=await r.patch(`/orderingmaterial/upddatepdfstatus/${a}/${e}`,{status:t});if(!n.ok)throw new Error(n.message);return n.data},D=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e);return c({mutationFn:async({projectId:r,organizationId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await k({projectId:r,api:t,organizationId:n})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},H=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e);return c({mutationFn:async({projectId:r,pdfId:n,status:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await v({projectId:r,pdfId:n,status:o,api:t})},onSuccess:(r,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},S=async({projectId:a,unitId:e,subItemName:t,quantity:r,unit:n,api:o})=>{const{data:i}=await o.post(`/orderingmaterial/${a}/unit/${e}/addsubitem`,{subItemName:t,quantity:r,unit:n});if(!i.ok)throw new Error(i.message);return i.data},j=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e),r=d();return c({mutationFn:async({projectId:n,unitId:o,subItemName:i,quantity:u,unit:y})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await S({projectId:n,unitId:o,subItemName:i,quantity:u,unit:y,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},A=async({projectId:a,unitId:e,subItemId:t,api:r})=>{const{data:n}=await r.delete(`/orderingmaterial/${a}/unit/${e}/deletesubitem/${t}`);if(!n.ok)throw new Error(n.message);return n.data},G=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e),r=d();return c({mutationFn:async({projectId:n,unitId:o,subItemId:i})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await A({projectId:n,unitId:o,subItemId:i,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},$=async({projectId:a,unitId:e,subItemId:t,subItemName:r,quantity:n,unit:o,api:i})=>{const{data:u}=await i.put(`/orderingmaterial/${a}/unit/${e}/updatesubitem/${t}`,{subItemName:r,quantity:n,unit:o});if(!u.ok)throw new Error(u.message);return u.data},L=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e),r=d();return c({mutationFn:async({projectId:n,unitId:o,subItemId:i,subItemName:u,quantity:y,unit:f})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await $({projectId:n,unitId:o,subItemId:i,subItemName:u,quantity:y,unit:f,api:t})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},b=async(a,e,t)=>{const{data:r}=await t.put(`/orderingmaterial/${a}/shop`,e);if(!r.ok)throw new Error(r.message);return r.data},U=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e),r=d();return c({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update shop details");if(!t)throw new Error("API instance not available");return await b(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material-history",o]})}})},C=async(a,e,t)=>{const{data:r}=await t.delete(`/orderingmaterial/delete/${a}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},N=()=>{const a=["owner","staff","CTO"],{role:e}=s(),t=l(e),r=d();return c({mutationFn:async({projectId:n,pdfId:o})=>{if(!e||!a.includes(e))throw new Error("Youre not allowed to delete pdf");if(!t)throw new Error("API instance not available");return await C(n,o,t)},onSuccess:(n,{projectId:o})=>{r.invalidateQueries({queryKey:["ordering-material-history",o]})}})};export{D as a,H as b,j as c,G as d,L as e,F as f,R as g,T as h,N as i,U as j,_ as k,Q as u};
