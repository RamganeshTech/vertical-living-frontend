import{u as d}from"./useQuery-Cc7pLKfK.js";import{u as c}from"./useMutation-7YLqc7VE.js";import{u as i,q as s}from"./index-By5P0A7l.js";import{g as l}from"./roleCheck-YGaMnK_P.js";const w=async({projectId:o,quantity:t,singleUnitCost:e,product:n,api:r})=>{const{data:a}=await r.post(`/selectedmodularunitsnew/${o}/add`,{quantity:t,singleUnitCost:e,product:n});if(!a.ok)throw new Error(a.message);return a.data},f=async({projectId:o,api:t})=>{const{data:e}=await t.get(`/selectedmodularunitsnew/get/${o}`);if(!e.ok)throw new Error(e.message);return e.data},m=async({projectId:o,unitId:t,api:e})=>{const{data:n}=await e.delete(`/selectedmodularunitsnew/delete/${o}/${t}`);if(!n.ok)throw new Error(n.message);return n.data},y=async({projectId:o,api:t})=>{const{data:e}=await t.post(`/selectedmodularunitsnew/${o}/pdfgenerate`);if(!e.ok)throw new Error(e.message);return e.data},U=()=>{const o=["owner","CTO","staff"],{role:t}=i(),e=l(t);return c({mutationFn:async({projectId:n,quantity:r,singleUnitCost:a,product:u})=>{if(!t||!o.includes(t))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await w({projectId:n,quantity:r,singleUnitCost:a,product:u,api:e})},onSuccess:(n,{projectId:r})=>{s.invalidateQueries({queryKey:["selectedModularUnitsNew",r]})}})},N=o=>{const t=["owner","CTO","staff","client","worker"],{role:e}=i(),n=l(e);return d({queryKey:["selectedModularUnitsNew",o],queryFn:async()=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!n)throw new Error("API instance not found for role");return await f({projectId:o,api:n})},enabled:!!o&&!!e&&t.includes(e)})},k=()=>{const o=["owner","CTO","staff"],{role:t}=i(),e=l(t);return c({mutationFn:async({projectId:n,unitId:r})=>{if(!t||!o.includes(t))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await m({projectId:n,unitId:r,api:e})},onSuccess:(n,{projectId:r})=>{s.invalidateQueries({queryKey:["selectedModularUnitsNew",r]})}})},S=()=>{const o=["owner","CTO","staff"],{role:t}=i(),e=l(t);return c({mutationFn:async({projectId:n})=>{if(!t||!o.includes(t))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await y({projectId:n,api:e})},onSuccess:(n,{projectId:r})=>{s.invalidateQueries({queryKey:["selectedModularUnitsNew",r]}),s.invalidateQueries({queryKey:["projects",r]})}})};export{k as a,S as b,U as c,N as u};
