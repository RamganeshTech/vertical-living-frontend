import{u as p,j as a,M as w,t as e,e as B}from"./index-CUvv9ev0.js";import{b,c as j,d as I}from"./billAccountApi-Ek9WP13p.js";import{B as S}from"./BillAccForm-CDqGprKN.js";import"./vendorAccApi-BjeqMnfd.js";import"./Label-CX2gOFKV.js";import"./ImageGalleryMain-CpyKJ1TW.js";import"./index-BKXLMMDl.js";import"./OrderMaterialOverview-DnOCHY8d.js";import"./Card-CHHq377-.js";import"./AssignStaff-OukO8SLI.js";import"./getAllUsersApi-0yi3cLLK.js";import"./ResetStageButton-BVnYeeV6.js";import"./ShareDocumentWhatsapp-BuVztAX3.js";import"./documentationApi-ZYgPAMqy.js";import"./requirementFormApi-Cjm4ZgKK.js";import"./orderMaterialHistoryApi-vaUeb6X_.js";import"./shopLibDetailApi-BKoLArag.js";import"./StageGuide-n_FMHWm4.js";import"./ProcurementPriorityDropdown-ozVHTnfy.js";import"./TextArea-BnQDaGer.js";import"./InfoToolTip-BosbUF3f.js";const V=()=>{const{id:i}=p(),{organizationId:u}=p(),{data:f,isLoading:g,isError:x,error:v,refetch:o}=b(i||""),l=j(),n=I(),y=async s=>{var r,c,d,m;if(i)try{const t=await l.mutateAsync({billId:i,billData:s});await o(),await B({src:(r=t==null?void 0:t.pdfData)==null?void 0:r.url,alt:(c=t==null?void 0:t.pdfData)==null?void 0:c.originalName}),e({title:"Success",description:"Bill updated successfully"})}catch(t){e({title:"Error",description:((m=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:m.message)||(t==null?void 0:t.message)||"Failed to update",variant:"destructive"})}},h=async s=>{if(i)try{await n.mutateAsync({billId:i,files:s}),o(),e({title:"Success",description:"Documents uploaded successfully"})}catch{e({title:"Error",description:"Failed to upload documents",variant:"destructive"})}};return g?a.jsx(w,{}):x?a.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",v.message]}):a.jsx("main",{className:"max-h-full overflow-y-auto",children:a.jsx(S,{mode:"view",organizationId:u,initialData:f,onSubmit:y,onQuickUpload:h,refetch:o,isSubmitting:l.isPending||n.isPending})})};export{V as default};
