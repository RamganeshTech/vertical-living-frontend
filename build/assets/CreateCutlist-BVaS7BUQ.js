import{a as v,u as y,j as p,t as c}from"./index-BAM0eJUz.js";import{C}from"./CutlistForm-CcqoVJFt.js";import{c as b}from"./cutlistApi-DKkfWc2n.js";import"./projectApi-D7-uwdh2.js";import"./clientQuoteApi-B0Dnhpm6.js";import"./SearchSelectNew-IGAHiELy.js";import"./Input-1UBXZqEj.js";import"./requirementFormApi-_wh_iBu9.js";import"./useInfiniteQuery-BGz0VllC.js";const z=()=>{const u=v(),{organizationId:o}=y(),s=b(),d=async(t,f,g,S)=>{try{const e=new FormData;e.append("organizationId",o),e.append("clientName",t.clientName||""),e.append("location",t.location||""),e.append("projectId",t.projectId||null),e.append("quoteNo",t.selectedQuoteNo||null),e.append("quoteId",t.selectedQuoteId||null),e.append("versionNo",t.versionNo||"1.0"),e.append("summary",JSON.stringify(g)),e.append("creatorName",S||"");const I=f.map((a,r)=>{var m,l;(m=a.backSideLaminateImage)!=null&&m.file&&e.append(`rooms[${r}].backSideLaminateImage`,a.backSideLaminateImage.file),(l=a.frontSideLaminateImage)!=null&&l.file&&e.append(`rooms[${r}].frontSideLaminateImage`,a.frontSideLaminateImage.file);const{backSideLaminateImage:i,frontSideLaminateImage:n,...N}=a;return{...N,backSideLaminateImage:(i==null?void 0:i.url)||null,frontSideLaminateImage:(n==null?void 0:n.url)||null}});e.append("rooms",JSON.stringify(I)),await s.mutateAsync({formData:e}),c({title:"Success",description:"Cutlist created successfully"}),u(-1)}catch(e){c({title:"Error",description:(e==null?void 0:e.message)||"Failed to create Cutlist",variant:"destructive"})}};return p.jsx("main",{className:"max-h-full h-full overflow-y-auto",children:p.jsx(C,{mode:"create",organizationId:o,onSubmit:d,isSubmitting:s.isPending})})};export{z as default};
