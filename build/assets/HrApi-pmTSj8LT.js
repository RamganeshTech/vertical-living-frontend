import{d as s,q as u}from"./index-DcYk0AxP.js";import{g as i}from"./roleCheck-D-Yu12LV.js";import{u as f}from"./useQuery-BPoeBSke.js";import{u as c}from"./useMutation-BbhnaANP.js";import{u as h}from"./useInfiniteQuery-67LtPPky.js";const E=async({organizationId:e,page:r=1,limit:t=10,name:o,email:a,phone:n,empRole:m,status:p,department:w,api:y})=>{const{data:d}=await y.get("/department/hr/getallemployee",{params:{organizationId:e,page:r,limit:t,name:o,email:a,phone:n,empRole:m,department:w,status:p}});if(!d.ok)throw new Error(d.message);return d},g=async({empId:e,api:r})=>{const{data:t}=await r.get(`/department/hr/getsingle/${e}`);if(!t.ok)throw new Error(t.message);return t.data},P=async({empId:e,updates:r,api:t})=>{const{data:o}=await t.put(`/department/hr/update/${e}`,r);if(!o.ok)throw new Error(o.message);return o.data},k=async({empId:e,api:r})=>{const{data:t}=await r.delete(`/department/hr/deleteemployee/${e}`);if(!t.ok)throw new Error(t.message);return t.data},q=async({empId:e,type:r,file:t,api:o})=>{const a=new FormData;a.append("file",t),a.append("type",r);const{data:n}=await o.post(`/department/hr/${e}/uploaddocument`,a,{headers:{"Content-Type":"multipart/form-data"}});if(!n.ok)throw new Error(n.message);return n.data},F=async({empId:e,docId:r,api:t})=>{const{data:o}=await t.delete(`/department/hr/${e}/deletedocument/${r}`);if(!o.ok)throw new Error(o.message);return o.data},l=["owner","staff","CTO"],S=(e,r)=>{const{role:t}=s(),o=i(t);return h({queryKey:["hr","employees",e,{...r}],enabled:!!e&&!!t,initialPageParam:1,queryFn:async({pageParam:a=1})=>{if(!t||!l.includes(t))throw new Error("Not allowed");if(!o)throw new Error("API instance not found for role");return await E({organizationId:e,api:o,...r})},getNextPageParam:a=>{const{page:n,totalPages:m}=a.pagination;return n<m?n+1:void 0},retry:!1,refetchOnWindowFocus:!1})},$=e=>{const{role:r}=s(),t=i(r);return f({queryKey:["hr","employee",e],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await g({empId:e,api:t})},enabled:!!e&&!!r,retry:!1,refetchOnWindowFocus:!1})},I=()=>{const{role:e}=s(),r=i(e);return c({mutationFn:async({empId:t,updates:o})=>{if(!e||!l.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await P({empId:t,updates:o,api:r})},onSuccess:(t,{empId:o})=>{u.invalidateQueries({queryKey:["hr","employee",o]}),u.invalidateQueries({queryKey:["hr","employees"]})}})},b=()=>{const{role:e}=s(),r=i(e);return c({mutationFn:async({empId:t})=>{if(!e||!l.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await k({empId:t,api:r})},onSuccess:()=>{u.invalidateQueries({queryKey:["hr","employees"]})}})},C=()=>{const{role:e}=s(),r=i(e);return c({mutationFn:async({empId:t,type:o,file:a})=>{if(!e||!l.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await q({empId:t,type:o,file:a,api:r})},onSuccess:(t,{empId:o})=>{u.invalidateQueries({queryKey:["hr","employee",o]})}})},G=()=>{const{role:e}=s(),r=i(e);return c({mutationFn:async({empId:t,docId:o})=>{if(!e||!l.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance not found for role");return await F({empId:t,docId:o,api:r})},onSuccess:(t,{empId:o})=>{u.invalidateQueries({queryKey:["hr","employee",o]})}})};export{I as a,b,C as c,G as d,S as e,$ as u};
