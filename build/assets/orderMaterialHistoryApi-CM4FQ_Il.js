import{b as y,f as i,h as c,s as w,g as u,i as s,c as f}from"./index-BAM0eJUz.js";const g=async({projectId:a,api:e})=>{const{data:r}=await e.get(`/orderingmaterial/getalldetails/${a}`);if(!r.ok)throw new Error(r.message);return r.data},h=async({projectId:a,orderItemId:e,api:r})=>{const{data:t}=await r.get(`/orderingmaterial/${a}/${e}/getsingleorderedItem`);if(!t.ok)throw new Error(t.message);return t.data},R=a=>{const e=["owner","staff","CTO","worker","client"],{role:r}=i(),t=s(r);return y({queryKey:["ordering-material-history",a],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("Not allowed to fetch ordering material");if(!t)throw new Error("API not available");return await g({projectId:a,api:t})},enabled:!!r&&!!a&&!!t,retry:!1,refetchOnMount:!1})},p=async({formId:a,projectId:e,deadLine:r,api:t})=>{const{data:n}=await t.put(`/orderingmaterial/deadline/${e}/${a}`,{deadLine:r});if(!n.ok)throw new Error(n.message);return n.data},E=async({projectId:a,api:e})=>{const{data:r}=await e.put(`/orderingmaterial/completionstatus/${a}`);if(!r.ok)throw new Error(r.message);return r.data},O=async(a,e,r)=>{const{data:t}=await r.put(`/orderingmaterial/${a}/delivery-location`,e);if(!t.ok)throw new Error(t.message);return t.data},_=()=>{const a=["owner","staff","CTO"],{role:e}=i(),r=s(e),t=u();return c({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update delivery location");if(!r)throw new Error("API instance not available");return await O(n,o,r)},onSuccess:(n,{projectId:o})=>{t.invalidateQueries({queryKey:["ordering-material",o]})}})},H=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return c({mutationFn:async({formId:t,projectId:n,deadLine:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await p({formId:t,projectId:n,deadLine:o,api:r})},onSuccess:(t,n)=>{w.invalidateQueries({queryKey:["ordering-material-history",n.projectId]})}})},D=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return c({mutationFn:async({projectId:t})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await E({projectId:t,api:r})},onSuccess:(t,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},I=async({projectId:a})=>{const{data:e}=await f.get(`https://houseofram.in/api/orderingmaterial/getpublic/${a}`);if(console.log("data",e),!e.ok)throw new Error(e.message);return e.data},j=a=>y({queryKey:["ordering-material-public",a],queryFn:async()=>await I({projectId:a}),enabled:!!a,retry:!1,refetchOnMount:!1}),k=async({projectId:a,organizationId:e,orderItemId:r,api:t})=>{const{data:n}=await t.patch(`/orderingmaterial/generatelink/${a}/${e}/${r}`);if(!n.ok)throw new Error(n.message);return n.data},q=async({projectId:a,api:e})=>{const{data:r}=await e.put(`/orderingmaterial/${a}/submitorder`);if(!r.ok)throw new Error(r.message);return r.data},v=async({projectId:a,orderItemId:e,organizationId:r,priority:t,vendorId:n,api:o})=>{const{data:l}=await o.put(`/orderingmaterial/v2/${a}/${e}/${r}/senttoprocurement`,{priority:t,vendorId:n});if(!l.ok)throw new Error(l.message);return l.data},U=()=>{const a=["owner","staff","CTO"],{role:e}=i(),r=s(e);return c({mutationFn:async({projectId:t,organizationId:n,orderItemId:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await k({projectId:t,api:r,organizationId:n,orderItemId:o})},onSuccess:(t,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},N=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return c({mutationFn:async({projectId:t})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await q({projectId:t,api:r})},onSuccess:(t,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},G=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return c({mutationFn:async({projectId:t,orderItemId:n,organizationId:o,priority:l,vendorId:d})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await v({projectId:t,orderItemId:n,organizationId:o,api:r,priority:l,vendorId:d})},onSuccess:(t,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},z=(a,e)=>{const r=["owner","staff","CTO","worker","client"],{role:t}=i(),n=s(t);return y({queryKey:["ordering-material-history","order-item",a],queryFn:async()=>{if(!t||!r.includes(t))throw new Error("Not allowed to fetch ordering material");if(!n)throw new Error("API not available");return await h({projectId:a,api:n,orderItemId:e})},enabled:!!t&&!!a&&!!n,retry:!1})},S=async({projectId:a,files:e,api:r})=>{const t=new FormData;e.forEach(o=>t.append("files",o));const{data:n}=await r.post(`/orderingmaterial/${a}/upload`,t);if(!n.ok)throw new Error(n.message);return n.data},x=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return c({mutationFn:async({projectId:t,files:n})=>{if(!e||!a.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await S({projectId:t,files:n,api:r})},onSuccess:(t,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},b=async({projectId:a,imageId:e,api:r})=>{const{data:t}=await r.delete(`/orderingmaterial/${a}/deleteimage/${e}`);if(!t.ok)throw new Error(t.message);return t.data},L=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e);return c({mutationFn:async({projectId:t,imageId:n})=>{if(!e||!a.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await b({projectId:t,api:r,imageId:n})},onSuccess:(t,{projectId:n})=>{w.invalidateQueries({queryKey:["ordering-material-history",n]})}})},A=async({projectId:a,subItemName:e,quantity:r,unit:t,api:n})=>{const{data:o}=await n.post(`/orderingmaterial/${a}/unit/addsubitem`,{subItemName:e,quantity:r,unit:t});if(!o.ok)throw new Error(o.message);return o.data},V=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return c({mutationFn:async({projectId:n,subItemName:o,quantity:l,unit:d})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await A({projectId:n,subItemName:o,quantity:l,unit:d,api:r})},onSuccess:(n,o)=>{t.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),t.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},$=async({projectId:a,subItemId:e,api:r})=>{const{data:t}=await r.delete(`/orderingmaterial/${a}/unit/deletesubitem/${e}`);if(!t.ok)throw new Error(t.message);return t.data},B=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return c({mutationFn:async({projectId:n,subItemId:o})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await $({projectId:n,subItemId:o,api:r})},onSuccess:(n,o)=>{t.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),t.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},C=async(a,e)=>{const{data:r}=await e.delete(`/orderingmaterial/deleteallsubunits/${a}`);if(!r.ok)throw new Error(r.message);return r.data},J=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return c({mutationFn:async({projectId:n})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await C(n,r)},onSuccess:(n,o)=>{t.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),t.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},T=async({projectId:a,subItemId:e,subItemName:r,quantity:t,unit:n,api:o})=>{const{data:l}=await o.put(`/orderingmaterial/${a}/unit/updatesubitem/${e}`,{subItemName:r,quantity:t,unit:n});if(!l.ok)throw new Error(l.message);return l.data},W=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return c({mutationFn:async({projectId:n,subItemId:o,subItemName:l,quantity:d,unit:m})=>{if(!e||!a.includes(e))throw new Error("not allowed to make this api call");if(!r)throw new Error("API instance missing");return await T({projectId:n,subItemId:o,subItemName:l,quantity:d,unit:m,api:r})},onSuccess:(n,o)=>{t.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),t.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},K=async(a,e,r)=>{const{data:t}=await r.put(`/orderingmaterial/${a}/shop`,e);if(!t.ok)throw new Error(t.message);return t.data},X=()=>{const a=["owner","staff","CTO","worker"],{role:e}=i(),r=s(e),t=u();return c({mutationFn:async({projectId:n,updates:o})=>{if(!e||!a.includes(e))throw new Error("Not allowed to update shop details");if(!r)throw new Error("API instance not available");return await K(n,o,r)},onSuccess:(n,{projectId:o})=>{t.invalidateQueries({queryKey:["ordering-material-history",o]})}})},M=async({projectId:a,orderItemId:e,subItemName:r,quantity:t,unit:n,index:o,api:l})=>{const{data:d}=await l.post(`/orderingmaterial/${a}/history/addsubitem/${e}`,{subItemName:r,quantity:t,unit:n,index:o});if(!d.ok)throw new Error(d.message);return d.data},P=async({projectId:a,orderItemId:e,subItemId:r,subItemName:t,quantity:n,unit:o,api:l})=>{const{data:d}=await l.put(`/orderingmaterial/${a}/history/updatesubitem/${e}/${r}`,{subItemName:t,quantity:n,unit:o});if(!d.ok)throw new Error(d.message);return d.data},Q=async({projectId:a,orderItemId:e,subItemId:r,api:t})=>{const{data:n}=await t.delete(`/orderingmaterial/${a}/history/deletesubitem/${e}/${r}`);if(!n.ok)throw new Error(n.message);return n.data},Y=()=>{const{role:a}=i(),e=s(a),r=u(),t=["owner","staff","CTO"];return c({mutationFn:async n=>{if(!a||!t.includes(a))throw new Error("Unauthorized");if(!e)throw new Error("API instance missing");return await M({...n,api:e})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},Z=()=>{const{role:a}=i(),e=s(a),r=u(),t=["owner","staff","CTO"];return c({mutationFn:async n=>{if(!a||!t.includes(a))throw new Error("Unauthorized");if(!e)throw new Error("API instance missing");return await P({...n,api:e})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})},ee=()=>{const{role:a}=i(),e=s(a),r=u(),t=["owner","staff","CTO"];return c({mutationFn:async n=>{if(!a||!t.includes(a))throw new Error("Unauthorized");if(!e)throw new Error("API instance missing");return await Q({...n,api:e})},onSuccess:(n,o)=>{r.invalidateQueries({queryKey:["ordering-material-history",o.projectId]}),r.invalidateQueries({queryKey:["inventory",o.projectId],refetchType:"active"})}})};export{R as a,U as b,N as c,V as d,B as e,W as f,x as g,L as h,H as i,D as j,_ as k,X as l,J as m,z as n,Y as o,Z as p,ee as q,j as r,G as u};
