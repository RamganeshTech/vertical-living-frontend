import{c as a,k as u,d as c,q as i,g as s,a2 as w}from"./index-CUvv9ev0.js";const d=async t=>{const{data:r}=await w.post("/orgs/createorganziation",t);if(!r.ok)throw new Error(r.message);return r.data},y=async t=>{const{data:r}=await t.get("/orgs/getorganizations");return r.ok?r.data:null},g=async(t,r)=>{const{data:e}=await r.get(`/orgs/getsingleorganization/${t}`);return e.ok?e.data:{}},h=async({updateField:t,orgsId:r,api:e})=>{const{data:o}=await e.put(`/orgs/updateorganization/${r}`,t);if(!o.ok)throw new Error(o.message);return o.data},p=async(t,r)=>{const{data:e}=await r.delete(`/orgs/deleteorganization/${t}`);if(!e.ok)throw new Error(e.message);return e},I=()=>{const t=["owner","staff","CTO","client","worker"],{role:r}=a(),e=s(r);return u({queryKey:["myOrgs"],queryFn:async()=>{if(!r)throw new Error("Not Authorized");if(!t.includes(r))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await y(e)},refetchOnWindowFocus:!1,retry:!1})},N=t=>{const r=["owner","staff","CTO","client","worker"],{role:e}=a(),o=s(e);return u({queryKey:["myOrgs-single"],queryFn:async()=>{if(!e||!r.includes(e))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance not found for role");return await g(t,o)},refetchOnWindowFocus:!1,retry:!1})},Q=()=>{const t=["owner"],{role:r}=a(),e=s(r);return c({mutationFn:async o=>{if(!r)throw new Error("Not authorized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await d(o)},onSuccess:()=>{i.invalidateQueries({queryKey:["myOrgs"]}),i.invalidateQueries({queryKey:["myOrgs-single"]})}})},W=()=>{const t=["owner"],{role:r}=a(),e=s(r);return c({mutationFn:async({updateField:o,orgsId:n})=>{if(!r)throw new Error("Not authorized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await h({updateField:o,orgsId:n,api:e})},onSuccess:()=>{i.invalidateQueries({queryKey:["myOrgs"]}),i.invalidateQueries({queryKey:["myOrgs-single"]})}})},B=()=>{const t=["owner"],{role:r}=a(),e=s(r);return c({mutationFn:async o=>{if(!r)throw new Error("Not authorized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await p(o,e)},onSuccess:()=>{i.invalidateQueries({queryKey:["myOrgs"]}),i.invalidateQueries({queryKey:["myOrgs-single"]})}})},E=async(t,r)=>{const{data:e}=await r.get(`/orgs/getstaffsoforganization/${t}`);return e.ok,e.data},m=async(t,r)=>{const{data:e}=await r.post("/orgs/invitestafftoorganization",t);if(!e.ok)throw new Error(e.message);return e.data},O=async({staffId:t,orgId:r,api:e})=>{const{data:o}=await e.patch(`/orgs/removestafffromorganziation?staffId=${t}&orgId=${r}`);if(!o.ok)throw new Error(o.message);return o.data},G=t=>{const r=["owner","staff","CTO"],{role:e}=a(),o=s(e);return u({queryKey:["staffs",t],queryFn:async()=>{if(!e)throw new Error("Not authrized");if(!r.includes(e))throw new Error("youre not allowed to access this api");if(!o)throw new Error("api is null");return await E(t,o)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},b=()=>{const t=["owner","CTO"],{role:r}=a(),e=s(r);return c({mutationFn:async o=>{if(!r)throw new Error("Not authrized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await m(o,e)},onSuccess:(o,n)=>{i.invalidateQueries({queryKey:["staffs",n.organizationId]})}})},_=()=>{const t=["owner"],{role:r}=a(),e=s(r);return c({mutationFn:async({staffId:o,orgId:n})=>{if(!r)throw new Error("Not authrized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await O({staffId:o,orgId:n,api:e})},onSuccess:(o,n)=>{i.invalidateQueries({queryKey:["staffs",n.orgId]})}})},z=async(t,r)=>{const{data:e}=await r.get(`/orgs/getctooforganization/${t}`);return e.ok,e.data},k=async(t,r)=>{const{data:e}=await r.post("/orgs/invitectotoorganization",t);if(!e.ok)throw new Error(e.message);return e.data},F=async({CTOId:t,orgId:r,api:e})=>{const{data:o}=await e.patch(`/orgs/removectofromorganziation?CTOId=${t}&orgId=${r}`);if(!o.ok)throw new Error(o.message);return o.data},j=t=>{const r=["owner","staff","CTO"],{role:e}=a(),o=s(e);return u({queryKey:["CTO",t],queryFn:async()=>{if(!e)throw new Error("Not authrized");if(!r.includes(e))throw new Error("youre not allowed to access this api");if(!o)throw new Error("api is null");return await z(t,o)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},M=()=>{const t=["owner"],{role:r}=a(),e=s(r);return c({mutationFn:async o=>{if(!r)throw new Error("Not authrized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await k(o,e)}})},Y=()=>{const t=["owner"],{role:r}=a(),e=s(r);return c({mutationFn:async({CTOId:o,orgId:n})=>{if(!r)throw new Error("Not authrized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await F({CTOId:o,orgId:n,api:e})},onSuccess:(o,n)=>{i.invalidateQueries({queryKey:["CTO",n.orgId]})}})},v=async({projectId:t,api:r,organizationId:e})=>{const{data:o}=await r.post("orgs/inviteclienttoproject",{projectId:t,organizationId:e});if(!o.ok)throw new Error(o.message);return o.data},D=()=>{const t=["owner","CTO"],{role:r}=a(),e=s(r);return c({mutationFn:async({projectId:o,organizationId:n})=>{if(!r)throw new Error("not authrized");if(!t.includes(r))throw new Error("youre not allowed to access this api");if(!e)throw new Error("api is null");return await v({projectId:o,api:e,organizationId:n})}})},q=async(t,r)=>{const{data:e}=await w.get(`/orgs/getclientsofproject/${t}/${r}`);return e.ok,e.data},x=(t,r)=>{const e=["owner","staff","CTO"],{role:o}=a(),n=s(o);return u({queryKey:["CTO",t],queryFn:async()=>{if(!o||!e.includes(o))throw new Error("not allowed to make this api call");if(!n)throw new Error("API instance not found for role");return await q(t,r)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},A=async({payload:t,api:r})=>{const{data:e}=await r.post("orgs/inviteworker",t);if(!e.ok)throw new Error(e.message);return e.data},C=async(t,r)=>{const{data:e}=await r.get(`orgs/getworker/${t}`);if(!e.ok)throw new Error(e.message);return e.data},S=async({workerId:t,orgId:r,projectId:e,api:o})=>{const{data:n}=await o.put(`orgs/removeworker/${r}/${t}/${e}`);if(!n.ok)throw new Error(n.message);return n.data},L=()=>{const t=["owner","staff","CTO"],{role:r}=a(),e=s(r);return c({mutationFn:async o=>{if(!r||!t.includes(r))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await A({api:e,payload:o})}})},H=t=>{const r=["owner","staff","CTO"],{role:e}=a(),o=s(e);return u({queryKey:["workers",t],queryFn:async()=>{if(!e||!r.includes(e))throw new Error("Not Allowed to Make this api Call");if(!o)throw new Error("API instance not found for role");return await C(t,o)},enabled:!!t,refetchOnWindowFocus:!1,retry:!1})},J=()=>{const t=["owner","staff","CTO"],{role:r}=a(),e=s(r);return c({mutationFn:async({workerId:o,orgId:n,projectId:f})=>{if(!r||!t.includes(r))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await S({workerId:o,orgId:n,projectId:f,api:e})},onSuccess:()=>i.invalidateQueries({queryKey:["workers"]})})},T=async({api:t,organizationId:r,roleToCreate:e,payload:o})=>{const{data:n}=await t.post(`orgs/registeruser/${r}/${e}`,o);if(!n.ok)throw new Error(n.message||"Failed to register");return n},R=async({api:t,userId:r,permission:e})=>{const{data:o}=await t.put(`orgs/updatepermission/${r}`,{permission:e});if(!o.ok)throw new Error(o.message||"Failed to update permissions");return o},K=async({api:t,organizationId:r})=>{const{data:e}=await t.get(`orgs/getalluser/${r}`);if(!e.ok)throw new Error(e.message||"Failed to fetch users");return e.data},$=async({userId:t,api:r})=>{const{data:e}=await r.get(`orgs/getsingleuser/${t}`);if(!e.ok)throw new Error(e.message||"Failed to fetch users");return e.data},P=async({api:t,userId:r})=>{const{data:e}=await t.delete(`orgs/deleteuser/${r}`);if(!e.ok)throw new Error(e.message||"Failed to delete user");return e},l=["owner"],V=()=>{const{role:t}=a(),r=s(t);return c({mutationFn:async({organizationId:e,roleToCreate:o,payload:n})=>{if(!t||!l.includes(t))throw new Error("You are not authorized to perform this action");if(!r)throw new Error("API instance not found for role");return await T({api:r,organizationId:e,roleToCreate:o,payload:n})},onSuccess:(e,o)=>{i.invalidateQueries({queryKey:["orgUsers",o.organizationId]})}})},X=()=>{const{role:t}=a(),r=s(t);return c({mutationFn:async({userId:e,permission:o})=>{if(!t||!l.includes(t))throw new Error("You are not authorized to update permissions");if(!r)throw new Error("API instance not found");return await R({api:r,userId:e,permission:o})},onSuccess:(e,o)=>{i.invalidateQueries({queryKey:["orgUsers","single",o.userId]})}})},Z=t=>{const{role:r}=a(),e=s(r);return u({queryKey:["orgUsers",t],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("You are not authorized to view users");if(!e)throw new Error("API instance not found");return await K({api:e,organizationId:t})},enabled:!!t&&!!r&&l.includes(r)})},ee=t=>{const{role:r}=a(),e=s(r);return u({queryKey:["orgUsers","single",t],queryFn:async()=>{if(!r||!l.includes(r))throw new Error("You are not authorized to view users");if(!e)throw new Error("API instance not found");return await $({api:e,userId:t})},enabled:!!t&&!!r&&l.includes(r)})},re=()=>{const{role:t}=a(),r=s(t);return c({mutationFn:async({userId:e,organizationId:o})=>{if(console.log(o),!t||!l.includes(t))throw new Error("You are not authorized to delete users");if(!r)throw new Error("API instance not found");return await P({api:r,userId:e})},onSuccess:(e,o)=>{i.invalidateQueries({queryKey:["orgUsers",o.organizationId]})}})};export{Z as a,re as b,X as c,ee as d,B as e,Q as f,I as g,N as h,W as i,H as j,L as k,J as l,G as m,_ as n,b as o,j as p,Y as q,M as r,D as s,x as t,V as u};
