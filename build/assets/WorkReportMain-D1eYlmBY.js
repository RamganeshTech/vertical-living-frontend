import{b as j,u,j as e}from"./index-mTWK40SB.js";import{u as g,a as N}from"./workReportsApi-Bm-Gi9Uz.js";import{B as l}from"./Button-D17pPJux.js";import b from"./MaterialOverviewLoading-DOIh6gsj.js";import{C as y,a as k,b as w,d as v}from"./Card-BPbh2zyJ.js";import{d as C}from"./downloadFile-DmnOOrMZ.js";import{t as m}from"./toast-BSC5QTk1.js";import"./useQuery-COMoCVsy.js";import"./useMutation-BbI9x9IC.js";import"./roleCheck-B4W0Vc_0.js";import"./Skeleton-CWzlSvu7.js";const E=()=>{const{projectId:n}=j(),{data:a,isLoading:r}=g(n),{mutateAsync:o,isPending:x}=N(),f=u(),h=async s=>{try{await o({id:s,projectId:n}),m({title:"Success",description:"deleted successfully"})}catch(i){m({title:"Error",description:i.response.data.message||"delete operation failed",variant:"destructive"})}};return r?e.jsx(b,{}):(console.log("reports",a),e.jsxs("div",{className:"space-y-4 max-h-full overflow-y-auto",children:[e.jsx("header",{children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{onClick:()=>f(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:"Work Reports"})]})}),(a==null?void 0:a.length)>0?e.jsx("main",{className:"grid grid-cols-3 gap-5",children:a==null?void 0:a.map(s=>{var i,c;return e.jsx(e.Fragment,{children:e.jsxs(y,{className:"border-l-4 border-blue-600 shadow-sm",children:[e.jsx(k,{children:e.jsx(w,{children:s.workerName||"Unnamed Worker"})}),e.jsxs(v,{className:"space-y-1 text-sm text-blue-950",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-calendar mr-1 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Date:"})," ",s!=null&&s.date?new Date(s.date).toLocaleDateString():"N/A"]}),e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-briefcase mr-1 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Work Done:"})," ",((i=s==null?void 0:s.workDone)==null?void 0:i.slice(0,100))+"..."||"-"]}),e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-map-marker-alt mr-1 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Place of Work:"})," ",((c=s==null?void 0:s.placeOfWork)==null?void 0:c.slice(0,100))+"..."||"-"]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxs(l,{size:"sm",variant:"secondary",onClick:()=>{var t;return window.open((t=s==null?void 0:s.imageLink)==null?void 0:t.url,"blank")},children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"View"]}),e.jsxs(l,{size:"sm",variant:"secondary",onClick:()=>{var t,d;return C({src:(t=s==null?void 0:s.imageLink)==null?void 0:t.url,alt:(d=s==null?void 0:s.imageLink)==null?void 0:d.originalName})},children:[e.jsx("i",{className:"fas fa-download mr-1"}),"Download"]}),e.jsxs(l,{size:"sm",isLoading:x,variant:"danger",onClick:()=>h(s._id),className:"text-white bg-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]})]},s._id)})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] w-full bg-white rounded-xl   text-center p-6",children:[e.jsx("i",{className:"fas fa-box-open text-5xl text-blue-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-1",children:"No Reports Found"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Create the Report by select any task in the Work Schedule Calender Page",e.jsx("br",{}),"Click on ",e.jsx("strong",{children:'"Create Report"'})," to get started ðŸš€"]})]})]}))};export{E as default};
