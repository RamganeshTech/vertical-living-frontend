import{u as y,a as V,j as e}from"./index-BZjlY-2Z.js";import{V as N}from"./VendorAccountForm-DwCSrFnz.js";import{t as p}from"./toast-BSC5QTk1.js";import{c as b,d as w,e as D,f as E}from"./vendorAccApi-Dr83gsac.js";import"./Card-CmzT6E3j.js";import"./Button-BGBzZFjk.js";import"./ImageGalleryMain-BBpbKra0.js";import"./downloadFile-Ck0ndJgl.js";import"./index-CEnBN4s8.js";import"./dateFormator-BGKi5rfZ.js";import"./useQuery-Coz1VCY2.js";import"./useMutation-BRRIqsxx.js";import"./useInfiniteQuery--LmPAkvr.js";import"./roleCheck-DuKNZHKs.js";const z=()=>{const{id:a}=y(),u=V(),{data:l,isLoading:x,isError:f,error:s,refetch:g}=b(a||""),r=w(),d=D(),h=E(),v=async(j,n,i)=>{var c,m;try{if(!a)return;if(await r.mutateAsync({vendorId:a,payload:j}),n&&n.length>0){const t=new FormData;n.forEach(o=>{t.append("files",o)}),await d.mutateAsync({id:a,formData:t})}if(i&&i.length>0){const t=new FormData;i.forEach(o=>{t.append("shopImages",o)}),await h.mutateAsync({id:a,formData:t})}p({title:"Success",description:"Vendor updated successfully"}),await g()}catch(t){console.error("Update failed",t),p({title:"Error",description:((m=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:m.message)||(t==null?void 0:t.message)||"Failed to update vendor",variant:"destructive"})}};return x?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-blue-600 text-4xl mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading vendor details..."})]})}):f?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-xl mb-2",children:"Error Loading Vendor"}),e.jsx("p",{className:"text-gray-500 mb-4",children:s==null?void 0:s.message}),e.jsx("button",{onClick:()=>u(-1),className:"text-blue-600 hover:underline",children:"Go Back"})]}):e.jsx(N,{mode:"view",initialData:l,onSubmit:v,isSubmitting:r.isPending||d.isPending})};export{z as default};
