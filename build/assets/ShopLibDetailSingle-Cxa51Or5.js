import{c as j,d as D,r as h,e as A,j as e,B as F,t as r}from"./index-CBsAK0nv.js";import{u as L,a as U}from"./shopLibDetailApi-7Q-KTTTk.js";const B=()=>{var f;const{shopId:p}=j(),{organizationId:y}=j(),v=D(),[n,o]=h.useState(!1),[a,c]=h.useState({shopName:"",address:"",contactPerson:"",phoneNumber:""}),{data:d,isLoading:w,error:u}=L(y),m=U(),{role:S,permission:x}=A(),C=S==="owner"||((f=x==null?void 0:x.ordermaterial)==null?void 0:f.edit),s=d==null?void 0:d.find(t=>t._id===p);h.useEffect(()=>{s&&c({shopName:s.shopName||"",address:s.address||"",contactPerson:s.contactPerson||"",phoneNumber:s.phoneNumber||""})},[s]);const i=t=>{c({...a,[t.target.name]:t.target.value})},k=async t=>{var b,N;t.preventDefault();try{if(!a.shopName.trim()){r({title:"Validation Error",description:"Shop name is required",variant:"destructive"});return}const l={id:p,shopData:{shopName:a.shopName,address:a.address,contactPerson:a.contactPerson,phoneNumber:a.phoneNumber}};await m.mutateAsync(l),r({title:"Success",description:"Shop updated successfully"}),o(!1)}catch(l){r({title:"Error",description:((N=(b=l==null?void 0:l.response)==null?void 0:b.data)==null?void 0:N.message)||"Failed to update shop",variant:"destructive"})}},P=async()=>{try{const t=`Shop: ${s.shopName}
Address: ${s.address||"N/A"}
Contact: ${s.contactPerson||"N/A"}
Phone: ${s.phoneNumber||"N/A"}`;await navigator.clipboard.writeText(t),r({title:"Success",description:"Shop details copied to clipboard"})}catch{r({title:"Error",description:"Failed to copy details",variant:"destructive"})}},g=()=>{try{v(-1)}catch{r({title:"Error",description:"Failed to navigate back",variant:"destructive"})}},E=()=>{s&&c({shopName:s.shopName||"",address:s.address||"",contactPerson:s.contactPerson||"",phoneNumber:s.phoneNumber||""}),o(!1)};return w?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading shop details..."})]})}):u||!s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-4xl text-red-500 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:u?"Failed to load shop details":"Shop not found"}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"fas fa-arrow-left text-gray-600"})})]})}):e.jsx("div",{className:"min-h-full  bg-gray-50 p-2",children:e.jsxs("div",{className:"max-w-full mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:g,className:"p-2 cursor-pointer hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"fas fa-arrow-left text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:n?"Edit Shop Details":"Shop Details"}),e.jsx("p",{className:"text-gray-600 mt-1",children:n?"Update shop information":"View and manage shop information"})]})]}),!n&&e.jsxs("button",{onClick:()=>o(!0),className:"px-4 cursor-pointer py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-edit"}),e.jsx("span",{children:"Edit Shop"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:n?e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-store mr-2"}),"Shop Name *"]}),e.jsx("input",{type:"text",name:"shopName",value:a.shopName,onChange:i,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-phone mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",maxLength:10,name:"phoneNumber",value:a.phoneNumber,onChange:i,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Contact Person"]}),e.jsx("input",{type:"text",name:"contactPerson",value:a.contactPerson,onChange:i,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-map-marker-alt mr-2"}),"Address"]}),e.jsx("textarea",{name:"address",value:a.address,onChange:i,rows:3,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[e.jsxs("button",{type:"button",onClick:E,className:"flex-1 px-4 cursor-pointer py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsx(F,{type:"submit",disabled:m.isPending,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:bg-blue-300 flex items-center justify-center gap-2",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save"}),e.jsx("span",{children:"Save Changes"})]})})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-500 block mb-1",children:[e.jsx("i",{className:"fas fa-store mr-2"}),"Shop Name"]}),e.jsx("p",{className:"text-lg font-medium text-gray-800",children:s.shopName||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-500 block mb-1",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Contact Person"]}),e.jsx("p",{className:"text-lg text-gray-800",children:s.contactPerson||"-"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-500 block mb-1",children:[e.jsx("i",{className:"fas fa-phone mr-2"}),"Phone Number"]}),e.jsx("p",{className:"text-lg text-gray-800",children:s.phoneNumber||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-500 block mb-1",children:[e.jsx("i",{className:"fas fa-map-marker-alt mr-2"}),"Address"]}),e.jsx("p",{className:"text-lg text-gray-800",children:s.address||"-"})]})]})]})})}),!n&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("i",{className:"fas fa-bolt mr-2 text-yellow-500"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C&&e.jsxs("button",{onClick:()=>o(!0),className:"p-4 cursor-pointer border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e.jsx("i",{className:"fas fa-edit text-blue-500 text-xl mb-2"}),e.jsx("p",{className:"font-medium text-gray-800",children:"Edit Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update shop information"})]}),e.jsxs("button",{onClick:P,className:"p-4 cursor-pointer border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e.jsx("i",{className:"fas fa-copy text-green-500 text-xl mb-2"}),e.jsx("p",{className:"font-medium text-gray-800",children:"Copy Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Copy to clipboard"})]})]})]})]})})};export{B as default};
