import{u as s,q as u,h as l}from"./index-By5P0A7l.js";import{g as i}from"./roleCheck-YGaMnK_P.js";import{u as w}from"./useQuery-Cc7pLKfK.js";import{u as c}from"./useMutation-7YLqc7VE.js";const y=async(t,o,e)=>{const{data:r}=await e.post(`/commonorder/createcommonproject/${t}`,o);if(!r.ok)throw new Error(r.message);return r.data},h=async(t,o,e)=>{const{data:r}=await e.put(`/commonorder/editcommonproject/${t}`,o);if(!r.ok)throw new Error(r.message);return r.data},p=async(t,o)=>{const{data:e}=await o.delete(`/commonorder/deletecommonproject/${t}`);if(!e.ok)throw new Error(e.message);return e.message},M=()=>{const t=["owner","staff","CTO"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({organizationId:n,payload:a})=>{if(!o||!t.includes(o))throw new Error("Not allowed");if(!e)throw new Error("API not available");return await y(n,a,e)},onSuccess:()=>{r.invalidateQueries({queryKey:["common-order-history"]})}})},_=()=>{const t=["owner","staff","CTO"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n,payload:a})=>{if(!o||!t.includes(o))throw new Error("Not allowed");if(!e)throw new Error("API not available");return await h(n,a,e)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-history",a]})}})},j=()=>{const t=["owner","staff","CTO"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n})=>{if(!o||!t.includes(o))throw new Error("Not allowed");if(!e)throw new Error("API not available");return await p(n,e)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-history",a]})}})},g=async({organizationId:t,api:o})=>{const{data:e}=await o.get(`/commonorder/getalldetails/${t}`);if(!e.ok)throw new Error(e.message);return e.data},D=t=>{const o=["owner","staff","CTO","worker","client"],{role:e}=s(),r=i(e);return w({queryKey:["common-order-history",t],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("Not allowed");if(!r)throw new Error("API not available");return await g({organizationId:t,api:r})},enabled:!!e&&!!t&&!!r,retry:!1,refetchOnMount:!1})},E=async({id:t,api:o})=>{const{data:e}=await o.get(`/commonorder/getsingleproject/${t}`);if(!e.ok)throw new Error(e.message);return e.data},N=t=>{const o=["owner","staff","CTO","worker","client"],{role:e}=s(),r=i(e);return w({queryKey:["common-order-single",t],queryFn:async()=>{if(!e||!o.includes(e))throw new Error("Not allowed");if(!r)throw new Error("API not available");return await E({id:t,api:r})},enabled:!!e&&!!t&&!!r,retry:!1,refetchOnMount:!1})},C=async(t,o,e)=>{const{data:r}=await e.put(`/commonorder/${t}/delivery-location`,o);if(!r.ok)throw new Error(r.message);return r.data},G=()=>{const t=["owner","staff","CTO"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n,updates:a})=>{if(!o||!t.includes(o))throw new Error("Not allowed to update delivery location");if(!e)throw new Error("API instance not available");return await C(n,a,e)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},O=async(t,o,e)=>{const{data:r}=await e.put(`/commonorder/${t}/shop`,o);if(!r.ok)throw new Error(r.message);return r.data},H=()=>{const t=["owner","staff","CTO"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n,updates:a})=>{if(!o||!t.includes(o))throw new Error("Not allowed to update shop details");if(!e)throw new Error("API instance not available");return await O(n,a,e)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},k=async({id:t,orderItemId:o,api:e})=>{const{data:r}=await e.get(`/commonorder/${t}/${o}/getsingleorderedItem`);if(!r.ok)throw new Error(r.message);return r.data},U=(t,o)=>{const e=["owner","staff","CTO","worker","client"],{role:r}=s(),n=i(r);return w({queryKey:["common-order-single","order-item",t],queryFn:async()=>{if(!r||!e.includes(r))throw new Error("Not allowed to fetch ordering material");if(!n)throw new Error("API not available");return await k({id:t,api:n,orderItemId:o})},enabled:!!r&&!!t&&!!n,retry:!1})},A=async({id:t,files:o,api:e})=>{const r=new FormData;o.forEach(a=>r.append("files",a));const{data:n}=await e.post(`/commonorder/${t}/upload`,r);if(!n.ok)throw new Error(n.message);return n.data},L=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o);return c({mutationFn:async({id:r,files:n})=>{if(!o||!t.includes(o))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({id:r,files:n,api:e})},onSuccess:(r,{id:n})=>{u.invalidateQueries({queryKey:["common-order-single",n]})}})},q=async({id:t,imageId:o,api:e})=>{const{data:r}=await e.delete(`/commonorder/${t}/deleteimage/${o}`);if(!r.ok)throw new Error(r.message);return r.data},x=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o);return c({mutationFn:async({id:r,imageId:n})=>{if(!o||!t.includes(o))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await q({id:r,api:e,imageId:n})},onSuccess:(r,{id:n})=>{u.invalidateQueries({queryKey:["common-order-single",n]})}})},I=async({id:t,subItemName:o,quantity:e,unit:r,api:n})=>{const{data:a}=await n.post(`/commonorder/${t}/unit/addsubitem`,{subItemName:o,quantity:e,unit:r});if(!a.ok)throw new Error(a.message);return a.data},B=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n,subItemName:a,quantity:d,unit:m})=>{if(!o||!t.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await I({id:n,subItemName:a,quantity:d,unit:m,api:e})},onSuccess:(n,a)=>{r.invalidateQueries({queryKey:["common-order-single",a.id]})}})},S=async({id:t,subItemId:o,api:e})=>{const{data:r}=await e.delete(`/commonorder/${t}/unit/deletesubitem/${o}`);if(!r.ok)throw new Error(r.message);return r.data},J=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n,subItemId:a})=>{if(!o||!t.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await S({id:n,subItemId:a,api:e})},onSuccess:(n,a)=>{r.invalidateQueries({queryKey:["common-order-single",a.id]})}})},P=async(t,o)=>{const{data:e}=await o.delete(`/commonorder/deleteallsubunits/${t}`);if(!e.ok)throw new Error(e.message);return e.data},V=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n})=>{if(!o||!t.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await P(n,e)},onSuccess:(n,a)=>{r.invalidateQueries({queryKey:["common-order-single",a.id]})}})},b=async({id:t,subItemId:o,subItemName:e,quantity:r,unit:n,api:a})=>{const{data:d}=await a.put(`/commonorder/${t}/unit/updatesubitem/${o}`,{subItemName:e,quantity:r,unit:n});if(!d.ok)throw new Error(d.message);return d.data},W=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o),r=l();return c({mutationFn:async({id:n,subItemId:a,subItemName:d,quantity:m,unit:f})=>{if(!o||!t.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await b({id:n,subItemId:a,subItemName:d,quantity:m,unit:f,api:e})},onSuccess:(n,a)=>{r.invalidateQueries({queryKey:["common-order-single",a.id]})}})},v=async({id:t,api:o})=>{const{data:e}=await o.put(`/commonorder/${t}/submitorder`);if(!e.ok)throw new Error(e.message);return e.data},$=async({id:t,orderItemId:o,organizationId:e,api:r})=>{const{data:n}=await r.put(`/commonorder/${t}/${o}/${e}/senttoprocurement`);if(!n.ok)throw new Error(n.message);return n.data},X=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o);return c({mutationFn:async({id:r})=>{if(!o||!t.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await v({id:r,api:e})},onSuccess:(r,{id:n})=>{u.invalidateQueries({queryKey:["common-order-single",n]})}})},Y=()=>{const t=["owner","staff","CTO","worker"],{role:o}=s(),e=i(o);return c({mutationFn:async({id:r,orderItemId:n,organizationId:a})=>{if(!o||!t.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await $({id:r,orderItemId:n,organizationId:a,api:e})},onSuccess:(r,{id:n})=>{u.invalidateQueries({queryKey:["common-order-single",n]})}})},F=async({id:t,organizationId:o,orderItemId:e,api:r})=>{const{data:n}=await r.patch(`/commonorder/generatelink/${t}/${o}/${e}`);if(!n.ok)throw new Error(n.message);return n.data},Z=()=>{const t=["owner","staff","CTO"],{role:o}=s(),e=i(o);return c({mutationFn:async({id:r,organizationId:n,orderItemId:a})=>{if(!o||!t.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await F({id:r,api:e,organizationId:n,orderItemId:a})},onSuccess:(r,{id:n})=>{u.invalidateQueries({queryKey:["common-order-single",n]})}})};export{Z as a,Y as b,D as c,M as d,j as e,_ as f,N as g,G as h,H as i,X as j,B as k,J as l,W as m,L as n,x as o,V as p,U as u};
