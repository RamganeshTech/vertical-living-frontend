import{u as l}from"./useQuery-Dp3DvoKb.js";import{u as c}from"./useMutation-CaYNPTtb.js";import{u as d}from"./useInfiniteQuery-CVtQ6J-e.js";import{c as i,q as o}from"./index-C0KkMjHg.js";import{g as u}from"./roleCheck-DWgWWcQZ.js";const p=async({expenseData:s,api:t})=>{const{data:e}=await t.post("/department/accounting/expense/create",s);if(!e.success)throw new Error(e.message);return e.data},w=async({id:s,expenseData:t,api:e})=>{const{data:n}=await e.put(`/department/accounting/expense/update/${s}`,t);if(!n.success)throw new Error(n.message);return n.data},f=async({id:s,api:t})=>{const{data:e}=await t.delete(`/department/accounting/expense/delete/${s}`);if(!e.success)throw new Error(e.message);return e},g=async({id:s,api:t})=>{const{data:e}=await t.get(`/department/accounting/expense/getsingle/${s}`);if(!e.success)throw new Error(e.message);return e.data},y=async({params:s,api:t})=>{const{data:e}=await t.get("/department/accounting/expense/getall",{params:s});if(!e.success)throw new Error(e.message);return e},q=()=>{const s=["owner","staff","CTO"],{role:t}=i(),e=u(t);return c({mutationFn:async n=>{if(!t||!s.includes(t))throw new Error("Not allowed to create expense");if(!e)throw new Error("API instance not found for role");return await p({expenseData:n,api:e})},onSuccess:n=>{o.invalidateQueries({queryKey:["expenses","list",n.organizationId]}),o.invalidateQueries({queryKey:["expenses","statistics",n.organizationId]})}})},P=()=>{const s=["owner","staff","CTO"],{role:t}=i(),e=u(t);return c({mutationFn:async({id:n,...r})=>{if(!t||!s.includes(t))throw new Error("Not allowed to update expense");if(!e)throw new Error("API instance not found for role");return await w({id:n,expenseData:r,api:e})},onSuccess:(n,r)=>{o.invalidateQueries({queryKey:["expenses","detail",r.id]}),o.invalidateQueries({queryKey:["expenses","list",n.organizationId]}),o.invalidateQueries({queryKey:["expenses","statistics",n.organizationId]})}})},v=()=>{const s=["owner","staff","CTO"],{role:t}=i(),e=u(t);return c({mutationFn:async({id:n,_organizationId:r})=>{if(!t||!s.includes(t))throw new Error("Not allowed to delete expense");if(!e)throw new Error("API instance not found for role");return await f({id:n,api:e})},onSuccess:(n,r)=>{o.invalidateQueries({queryKey:["expenses","detail",r.id]}),o.invalidateQueries({queryKey:["expenses","list",r._organizationId]}),o.invalidateQueries({queryKey:["expenses","statistics",r._organizationId]})}})},K=(s,t=!0)=>{const e=["owner","staff","CTO"],{role:n}=i(),r=u(n);return l({queryKey:["expenses","detail",s],queryFn:async()=>{if(!n||!e.includes(n))throw new Error("Not allowed to view expense");if(!r)throw new Error("API instance not found for role");return await g({id:s,api:r})},enabled:t&&!!s&&!!n&&!!r})},Q=(s,t=!0)=>{const e=["owner","staff","CTO"],{role:n}=i(),r=u(n);return d({queryKey:["expenses","list",s.organizationId,s],queryFn:async({pageParam:a=1})=>{if(!n||!e.includes(n))throw new Error("Not allowed to view expenses");if(!r)throw new Error("API instance not found for role");return await y({params:{...s,page:a},api:r})},getNextPageParam:a=>a.pagination.hasNextPage?a.pagination.page+1:void 0,getPreviousPageParam:a=>a.pagination.hasPrevPage?a.pagination.page-1:void 0,initialPageParam:1,enabled:t&&!!s.organizationId&&!!n&&!!r})};export{v as a,q as b,P as c,K as d,Q as u};
