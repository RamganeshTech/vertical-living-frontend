import{c as s,f as d,q as m}from"./index-CluF71pO.js";import{g as i}from"./roleCheck-C6Z-poLV.js";import{u as w}from"./useQuery-BSXZQ8G2.js";import{u as c}from"./useMutation-Deoeq1CZ.js";const y=async(t,e,o)=>{const{data:r}=await o.post(`/commonorder/createcommonproject/${t}`,e);if(!r.ok)throw new Error(r.message);return r.data},p=async(t,e,o)=>{const{data:r}=await o.put(`/commonorder/editcoommonproject/${t}`,e);if(!r.ok)throw new Error(r.message);return r.data},h=async(t,e)=>{const{data:o}=await e.delete(`/commonorder/deletecommonproject/${t}`);if(!o.ok)throw new Error(o.message);return o.message},C=async(t,e,o)=>{const{data:r}=await o.post(`/commonorder/createcommonorder/${t}/units`,e);if(!r.ok)throw new Error(r.message);return r.data},E=async(t,e,o,r)=>{const{data:n}=await r.put(`/commonorder/${t}/editcommonorder/${e}`,o);if(!n.ok)throw new Error(n.message);return n.data},g=async(t,e,o)=>{const{data:r}=await o.delete(`/commonorder/${t}/deletecommonorder/${e}`);if(!r.ok)throw new Error(r.message);return r.data},T=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({organizationId:n,payload:a})=>{if(!e||!t.includes(e))throw new Error("Not allowed");if(!o)throw new Error("API not available");return await y(n,a,o)},onSuccess:()=>{r.invalidateQueries({queryKey:["common-order-history"]})}})},_=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n,payload:a})=>{if(!e||!t.includes(e))throw new Error("Not allowed");if(!o)throw new Error("API not available");return await p(n,a,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-history",a]})}})},j=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n})=>{if(!e||!t.includes(e))throw new Error("Not allowed");if(!o)throw new Error("API not available");return await h(n,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-history",a]})}})},M=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n,payload:a})=>{if(!e||!t.includes(e))throw new Error("Not allowed");if(!o)throw new Error("API not available");return await C(n,a,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},N=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n,unitId:a,payload:l})=>{if(!e||!t.includes(e))throw new Error("Not allowed");if(!o)throw new Error("API not available");return await E(n,a,l,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},U=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n,unitId:a})=>{if(!e||!t.includes(e))throw new Error("Not allowed");if(!o)throw new Error("API not available");return await g(n,a,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},O=async({organizationId:t,api:e})=>{const{data:o}=await e.get(`/commonorder/getalldetails/${t}`);if(!o.ok)throw new Error(o.message);return o.data},D=t=>{const e=["owner","staff","CTO","worker","client"],{role:o}=s(),r=i(o);return w({queryKey:["common-order-history",t],queryFn:async()=>{if(!o||!e.includes(o))throw new Error("Not allowed");if(!r)throw new Error("API not available");return await O({organizationId:t,api:r})},enabled:!!o&&!!t&&!!r,retry:!1,refetchOnMount:!1})},A=async({id:t,api:e})=>{const{data:o}=await e.get(`/commonorder/getsingleproject/${t}`);if(!o.ok)throw new Error(o.message);return o.data},G=t=>{const e=["owner","staff","CTO","worker","client"],{role:o}=s(),r=i(o);return w({queryKey:["common-order-single",t],queryFn:async()=>{if(!o||!e.includes(o))throw new Error("Not allowed");if(!r)throw new Error("API not available");return await A({id:t,api:r})},enabled:!!o&&!!t&&!!r,retry:!1,refetchOnMount:!1})},q=async(t,e,o)=>{const{data:r}=await o.put(`/commonorder/${t}/delivery-location`,e);if(!r.ok)throw new Error(r.message);return r.data},L=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n,updates:a})=>{if(!e||!t.includes(e))throw new Error("Not allowed to update delivery location");if(!o)throw new Error("API instance not available");return await q(n,a,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},v=async(t,e,o)=>{const{data:r}=await o.put(`/commonorder/${t}/shop`,e);if(!r.ok)throw new Error(r.message);return r.data},H=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n,updates:a})=>{if(!e||!t.includes(e))throw new Error("Not allowed to update shop details");if(!o)throw new Error("API instance not available");return await v(n,a,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},k=async({id:t,unitId:e,subItemName:o,quantity:r,unit:n,api:a})=>{const{data:l}=await a.post(`/commonorder/${t}/unit/${e}/addsubitem`,{subItemName:o,quantity:r,unit:n});if(!l.ok)throw new Error(l.message);return l.data},x=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e);return c({mutationFn:async({id:r,unitId:n,subItemName:a,quantity:l,unit:u})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance missing");return await k({id:r,unitId:n,subItemName:a,quantity:l,unit:u,api:o})},onSuccess:(r,n)=>{m.invalidateQueries({queryKey:["common-order-single",n.id]})}})},P=async({id:t,unitId:e,subItemId:o,api:r})=>{const{data:n}=await r.delete(`/commonorder/${t}/unit/${e}/deletesubitem/${o}`);if(!n.ok)throw new Error(n.message);return n.data},Y=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e);return c({mutationFn:async({id:r,unitId:n,subItemId:a})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance missing");return await P({id:r,unitId:n,subItemId:a,api:o})},onSuccess:(r,n)=>{m.invalidateQueries({queryKey:["common-order-single",n.id]})}})},S=async({id:t,unitId:e,subItemId:o,subItemName:r,quantity:n,unit:a,api:l})=>{const{data:u}=await l.put(`/commonorder/${t}/unit/${e}/updatesubitem/${o}`,{subItemName:r,quantity:n,unit:a});if(!u.ok)throw new Error(u.message);return u.data},B=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e);return c({mutationFn:async({id:r,unitId:n,subItemId:a,subItemName:l,quantity:u,unit:f})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance missing");return await S({id:r,unitId:n,subItemId:a,subItemName:l,quantity:u,unit:f,api:o})},onSuccess:(r,n)=>{m.invalidateQueries({queryKey:["common-order-single",n.id]})}})},$=async(t,e,o)=>{const{data:r}=await o.delete(`/commonorder/delete/${t}/${e}`);if(!r.ok)throw new Error(r.message);return r.data},J=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e),r=d();return c({mutationFn:async({id:n,pdfId:a})=>{if(!e||!t.includes(e))throw new Error("Youre not allowed to delete pdf");if(!o)throw new Error("API instance not available");return await $(n,a,o)},onSuccess:(n,{id:a})=>{r.invalidateQueries({queryKey:["common-order-single",a]})}})},b=async({id:t,api:e})=>{const{data:o}=await e.patch(`/commonorder/generatelink/${t}`);if(!o.ok)throw new Error(o.message);return o.data},V=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e);return c({mutationFn:async({id:r})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance missing");return await b({id:r,api:o})},onSuccess:(r,{id:n})=>{m.invalidateQueries({queryKey:["common-order-single",n]})}})},I=async({id:t,pdfId:e,status:o,api:r})=>{const{data:n}=await r.patch(`/commonorder/upddatepdfstatus/${t}/${e}`,{status:o});if(!n.ok)throw new Error(n.message);return n.data},W=()=>{const t=["owner","staff","CTO"],{role:e}=s(),o=i(e);return c({mutationFn:async({id:r,pdfId:n,status:a})=>{if(!e||!t.includes(e))throw new Error("not allowed to make this api call");if(!o)throw new Error("API instance missing");return await I({id:r,pdfId:n,status:a,api:o})},onSuccess:(r,{id:n})=>{m.invalidateQueries({queryKey:["ordering-material-history",n]})}})};export{T as a,j as b,_ as c,M as d,N as e,G as f,U as g,L as h,H as i,V as j,J as k,W as l,x as m,Y as n,B as o,D as u};
