import{o as B,a as L,u as V,r,j as e,I as D,B as c,S as K,i as Q,k as _,l as G,m as S}from"./index-JlGfSpRF.js";import{d as R,m as $}from"./fieldConfigs-BTWRx_QB.js";import{S as q}from"./SingleModularUnitCard-D3tAOBBG.js";import H from"./AddModularUnit-D9nsN88I.js";import"./selectedModularUnitApi-B31iDWlL.js";function ee(){const{isMobile:C,openMobileSidebar:F}=B(),A=L(),{unitType:i,organizationId:h}=V(),[d,n]=r.useState({}),[E,g]=r.useState({}),[b,p]=r.useState(""),[M,f]=r.useState(""),[P,o]=r.useState(!1),{data:t,isLoading:u,isError:z}=R(i,h,E,M),[j,N]=r.useState(null),U=Object.entries($[i]||{}).filter(([s,a])=>a.type==="select"||a.type==="checkbox"),y=()=>{f(b)},I=s=>{s.key==="Enter"&&y()},x=Object.values(d).flat().length;return e.jsx(e.Fragment,{children:j?e.jsx(H,{unitToEdit:j,setUnitToEdit:N}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 overflow-y-auto",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-blue-800 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 sm:mb-0",children:[C&&e.jsx("button",{onClick:F,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white/20 rounded-xl",children:e.jsx("i",{className:"fas fa-cube text-xl"})}),e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold capitalize",children:[i," Collection"]}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Premium ",i," products"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx("i",{className:"fas fa-box text-sm"}),e.jsxs("span",{className:"text-sm font-medium",children:[(t==null?void 0:t.length)||0," Products"]})]}),e.jsxs("div",{onClick:()=>A(`/organizations/${h}/modularunits`),className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx("i",{className:"fas fa-arrow-left text-sm"}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]})]})]})})]}),e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 relative",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border mb-6 sticky top-4 z-30",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-between",children:e.jsxs("div",{className:"flex-1 flex gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"}),e.jsx(D,{placeholder:"Search by name, id, etc.",value:b,onChange:s=>p(s.target.value),onKeyDown:I,className:"pl-10 pr-4 py-2 rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500 bg-white text-sm"})]}),e.jsxs(c,{isLoading:u,onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-search mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]}),e.jsxs(c,{variant:"primary",onClick:()=>o(s=>!s),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-filter"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),x>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:x})]})]})})}),P&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>o(!1)}),e.jsx("div",{className:"fixed inset-x-8  sm:top-32 top-13 bottom-4 sm:inset-x-8 md:left-1/2 md:transform md:-translate-x-1/2 md:w-full md:max-w-4xl bg-white rounded-2xl shadow-2xl border z-50 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-sliders-h text-blue-600"}),"Advanced Filters"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[x>0&&e.jsxs(c,{variant:"danger",onClick:()=>n({}),className:"bg-red-600 text-white px-3 py-1 rounded-lg text-sm",children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Clear All (",x,")"]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100",children:e.jsx("i",{className:"fas fa-times text-lg"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:U.map(([s,a])=>{var v;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-blue-500"}),a.label]}),a.type==="select"&&a.options&&e.jsxs(K,{onValueChange:l=>n(m=>({...m,[s]:l?[l]:[]})),children:[e.jsx(Q,{className:"w-full rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500",children:e.jsx(_,{placeholder:"All",selectedValue:((v=d[s])==null?void 0:v[0])||""})}),e.jsxs(G,{children:[e.jsx(S,{value:"",children:"All"}),a.options.map(l=>e.jsx(S,{value:l,children:l},l))]})]}),a.type==="checkbox"&&a.options&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-32 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:a.options.map(l=>{var m;return e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white rounded p-1 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:((m=d[s])==null?void 0:m.includes(l))||!1,onChange:O=>{n(w=>{const k=w[s]||[];return{...w,[s]:O.target.checked?[...k,l]:k.filter(T=>T!==l)}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700 text-sm",children:l})]},l)})})})]},s)})})}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(c,{isLoading:u,onClick:()=>{g(d),o(!1)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-lg shadow-lg",children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Apply Filters"]})})})]})})]}),u?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):z?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-2xl mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again later."})]})}):(t==null?void 0:t.length)===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-xl p-8 max-w-md mx-auto",children:[e.jsx("i",{className:"fas fa-search text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No Products Found"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["No ",i," products match your current filters."]}),e.jsxs(c,{onClick:()=>{n({}),g({}),p(""),f("")},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:[e.jsx("i",{className:"fas fa-refresh mr-2"}),"Clear Filters"]})]})}):e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t==null?void 0:t.map(s=>e.jsx(q,{unit:s,onEdit:N},s._id))})]})]})})}export{ee as default};
