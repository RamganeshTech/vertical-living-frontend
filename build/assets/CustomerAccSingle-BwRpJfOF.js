import{u as b,a as f,j as t,M as w,B as n,t as c}from"./index-BAM0eJUz.js";import{c as C,d as j,e as v}from"./customerAccountApi-DSm95aD3.js";import{C as y}from"./CustomerAccountForm-DNjstrsv.js";import"./useInfiniteQuery-BGz0VllC.js";import"./Card-CdxfjEr-.js";import"./ImageGalleryMain-B3g6b13d.js";import"./downloadFile-BbGV_BaX.js";import"./index-C8BdbktQ.js";import"./ShortListMain-CkHPlJB3.js";import"./dateFormator-BGKi5rfZ.js";const P=()=>{const{id:o}=b(),a=f(),{data:i,isLoading:u,isError:l,error:s,refetch:p}=C(o),m=j(),d=v(),x=async(g,r)=>{try{if(await m.mutateAsync({customerId:o,payload:g}),r&&r.length>0){const e=new FormData;r.forEach(h=>{e.append("files",h)}),await d.mutateAsync({id:o,formData:e})}c({title:"Success",description:"Customer updated successfully"}),p()}catch(e){throw c({title:"Error",description:e.message||"Failed to update customer"}),e}};return u?t.jsx(w,{}):l?t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-red-600 font-semibold mb-2 text-xl",children:"⚠️ Error Occurred"}),t.jsx("p",{className:"text-red-500 mb-4",children:(s==null?void 0:s.message)||"Failed to load customer"}),t.jsx(n,{onClick:()=>a(-1),children:"Go Back"})]}):i?t.jsx(y,{mode:"view",initialData:i,onSubmit:x,isSubmitting:m.isPending||d.isPending}):t.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg shadow text-center",children:[t.jsx("div",{className:"text-yellow-600 font-semibold mb-2 text-xl",children:"Customer Not Found"}),t.jsx(n,{onClick:()=>a(-1),children:"Go Back"})]})};export{P as default};
