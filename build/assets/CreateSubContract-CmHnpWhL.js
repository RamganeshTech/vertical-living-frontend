import{c as b,b as j,r as d,j as e,I as C,B as g,t}from"./index-DyM6T-eT.js";import{b as N}from"./subContractNewApi-GIheeN0z.js";import{S as k}from"./SubContractForm-BRc3UqQR.js";import{C as v,b as y,d as S,a as w}from"./Card-CnQJFMCV.js";import"./Label-B3hr6461.js";import"./projectApi-CMY3yoCw.js";import"./SearchSelectNew-BTs46di7.js";import"./ImageGalleryMain-DbEY14VT.js";import"./downloadFile-CQDFTv8V.js";import"./index-CkRxYNyB.js";const A=()=>{const r=b(),{organizationId:i}=j(),c=N(),[m,n]=d.useState(!1),[a,x]=d.useState(""),u=async p=>{var o,l;try{const s=await c.mutateAsync({organizationId:i,...p});t({title:"Success",description:"Sub Contract created successfully"}),console.log("result",s);const f=`https://houseofram.in/subcontract/share/${s==null?void 0:s.contractId}?token=${s==null?void 0:s.token}`;x(f)}catch(s){t({title:"Error",description:((l=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:l.message)||(s==null?void 0:s.message)||"Failed to create sub contract",variant:"destructive"})}},h=()=>{navigator.clipboard.writeText(a),n(!0),t({title:"Copied!",description:"Link copied to clipboard"}),setTimeout(()=>n(!1),2e3)};return e.jsxs("div",{className:"space-y-6 max-h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{onClick:()=>r(-1),className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center mb-2",children:[e.jsx("i",{className:"fas fa-hard-hat mr-3 text-blue-600"}),"Create Sub Contract"]})]}),e.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[e.jsx(k,{organizationId:i,mode:"create",onSubmit:u,isLoading:c.isPending,onCancel:()=>r(-1)}),a&&e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(S,{className:"flex items-center text-lg",children:[e.jsx("i",{className:"fas fa-link mr-2 text-blue-600"}),"Generate Shareable Link"]})}),e.jsx(w,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Generate a shareable link for workers to submit their information for this sub contract."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{value:a,readOnly:!0,className:"flex-1"}),e.jsx(g,{onClick:h,variant:"outline",children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-copy mr-2"}),"Copy"]})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Link generated successfully! Share this with workers."})]})]})]})})]})]})]})};export{A as default};
