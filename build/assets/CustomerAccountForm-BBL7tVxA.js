import{b as T,u as A,r as b,j as e}from"./index-BzUhBKjh.js";import{C as R}from"./Card-kz-Izex-.js";import{B as f}from"./Button-G0_5Lr1e.js";const L=({mode:o,initialData:r,onSubmit:h,isSubmitting:x,setIsEditing:d})=>{var N,y;const{organizationId:v}=T(),g=A(),[n,p]=b.useState("main"),[l,a]=b.useState({customerType:(r==null?void 0:r.customerType)||"business",organizationId:(r==null?void 0:r.organizationId)||v,projectId:(r==null?void 0:r.projectId)||null,clientId:(r==null?void 0:r.clientId)||null,firstName:(r==null?void 0:r.firstName)||"",lastName:(r==null?void 0:r.lastName)||"",companyName:(r==null?void 0:r.companyName)||"",email:(r==null?void 0:r.email)||"",phone:{work:((N=r==null?void 0:r.phone)==null?void 0:N.work)||"",mobile:((y=r==null?void 0:r.phone)==null?void 0:y.mobile)||""},customerLanguage:(r==null?void 0:r.customerLanguage)||"English",pan:(r==null?void 0:r.pan)||"",currency:(r==null?void 0:r.currency)||"INR - Indian Rupee",accountsReceivable:(r==null?void 0:r.accountsReceivable)||"",openingBalance:(r==null?void 0:r.openingBalance)||0,paymentTerms:(r==null?void 0:r.paymentTerms)||"Due on Receipt",enablePortal:(r==null?void 0:r.enablePortal)||!1}),[u,j]=b.useState([]),[c,C]=b.useState({}),k=()=>{var t;const s={};if((t=l.firstName)!=null&&t.trim()||(s.firstName="First name is required"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(s.email="Invalid email format"),l.phone.mobile){const i=String(l.phone.mobile).replace(/[\s-()]/g,"");/^[0-9]{10}$/.test(i)||(s["phone.mobile"]="Mobile number must be exactly 10 digits")}if(l.phone.work){const i=String(l.phone.work).replace(/[\s-()]/g,"");/^[0-9]{10}$/.test(i)||(s["phone.work"]="Work number must be exactly 10 digits")}return l.pan&&!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(l.pan)&&(s.pan="Invalid PAN format (e.g., ABCDE1234F)"),l.openingBalance&&isNaN(Number(l.openingBalance))&&(s.openingBalance="Opening balance must be a valid number"),C(s),Object.keys(s).length===0},w=async()=>{if(!k()){p("main");return}try{o==="create"?await h(l,u):await h(l)}catch(s){console.error("Submit error:",s)}},B=s=>{s.target.files&&j(Array.from(s.target.files))},F=s=>{j(t=>t.filter((i,P)=>P!==s))},m=[{id:"main",label:"Main Information",icon:"fa-user"},{id:"other",label:"Other Details",icon:"fa-info-circle"},...o==="create"?[{id:"documents",label:"Documents",icon:"fa-file-upload"}]:[]];return e.jsxs("div",{className:"max-w-full mx-auto overflow-y-auto max-h-full",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{o==="create"?g(-1):d==null||d(!1)},className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx("i",{className:`fas ${o==="create"?"fa-plus-circle":"fa-edit"} mr-3 text-blue-600`}),o==="create"?"Create New Customer":"Update Customer"]}),e.jsx("p",{className:"text-gray-600 mt-1 ml-3",children:o==="create"?"Add a new customer to your organization":"Update customer information"})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:m.map(s=>e.jsxs("button",{onClick:()=>p(s.id),className:`
                                    py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                                    ${n===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                                `,children:[e.jsx("i",{className:`fas ${s.icon}`}),s.label]},s.id))})})}),e.jsx(R,{children:e.jsxs("div",{className:"p-2",children:[n==="main"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-user mr-2 text-blue-600"}),"Main Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Type"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"customerType",value:"business",checked:l.customerType==="business",onChange:s=>a({...l,customerType:s.target.value}),className:"mr-2"}),e.jsx("i",{className:"fas fa-building mr-2 text-blue-600"}),"Business"]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"customerType",value:"individual",checked:l.customerType==="individual",onChange:s=>a({...l,customerType:s.target.value}),className:"mr-2"}),e.jsx("i",{className:"fas fa-user mr-2 text-green-600"}),"Individual"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.firstName,onChange:s=>a({...l,firstName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter first name"}),c.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:l.lastName,onChange:s=>a({...l,lastName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),e.jsx("input",{type:"text",value:l.companyName,onChange:s=>a({...l,companyName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter company name"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-envelope mr-2 text-gray-400"}),"Email"]}),e.jsx("input",{type:"email",value:l.email,onChange:s=>a({...l,email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"customer@example.com"}),c.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.email})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-mobile-alt mr-2 text-gray-400"}),"Mobile Number"]}),e.jsx("input",{type:"tel",value:l.phone.mobile,onChange:s=>a({...l,phone:{...l.phone,mobile:s.target.value}}),maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1234567890"}),c["phone.mobile"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c["phone.mobile"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-phone mr-2 text-gray-400"}),"Work Number"]}),e.jsx("input",{type:"tel",value:l.phone.work,onChange:s=>a({...l,phone:{...l.phone,work:s.target.value}}),maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"9876543210"}),c["phone.work"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c["phone.work"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-language mr-2 text-gray-400"}),"Customer Language"]}),e.jsxs("select",{value:l.customerLanguage,onChange:s=>a({...l,customerLanguage:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Hindi",children:"Hindi"}),e.jsx("option",{value:"Tamil",children:"Tamil"}),e.jsx("option",{value:"Telugu",children:"Telugu"}),e.jsx("option",{value:"Malayalam",children:"Malayalam"}),e.jsx("option",{value:"Kannada",children:"Kannada"})]})]})]}),n==="other"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-info-circle mr-2 text-blue-600"}),"Other Details"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-id-card mr-2 text-gray-400"}),"PAN Number"]}),e.jsx("input",{type:"text",value:l.pan,onChange:s=>a({...l,pan:s.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ABCDE1234F",maxLength:10}),c.pan&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.pan}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 5 letters, 4 digits, 1 letter"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-dollar-sign mr-2 text-gray-400"}),"Currency"]}),e.jsxs("select",{value:l.currency,onChange:s=>a({...l,currency:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"INR - Indian Rupee",children:"INR - Indian Rupee"}),e.jsx("option",{value:"USD - US Dollar",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR - Euro",children:"EUR - Euro"}),e.jsx("option",{value:"GBP - British Pound",children:"GBP - British Pound"}),e.jsx("option",{value:"AED - UAE Dirham",children:"AED - UAE Dirham"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-receipt mr-2 text-gray-400"}),"Accounts Receivable"]}),e.jsx("input",{type:"text",value:l.accountsReceivable,onChange:s=>a({...l,accountsReceivable:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Account details"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-wallet mr-2 text-gray-400"}),"Opening Balance"]}),e.jsx("input",{type:"number",value:l.openingBalance,onChange:s=>a({...l,openingBalance:parseFloat(s.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01"}),c.openingBalance&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.openingBalance})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-calendar-check mr-2 text-gray-400"}),"Payment Terms"]}),e.jsxs("select",{value:l.paymentTerms,onChange:s=>a({...l,paymentTerms:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"}),e.jsx("option",{value:"Net 15",children:"Net 15"}),e.jsx("option",{value:"Net 30",children:"Net 30"}),e.jsx("option",{value:"Net 45",children:"Net 45"}),e.jsx("option",{value:"Net 60",children:"Net 60"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"enablePortal",checked:l.enablePortal,onChange:s=>a({...l,enablePortal:s.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"enablePortal",className:"ml-2 text-sm font-medium text-gray-700",children:"Enable Customer Portal Access"})]})]}),n==="documents"&&o==="create"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-file-upload mr-2 text-blue-600"}),"Documents"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Documents (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors cursor-pointer",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf",onChange:B,className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2 block"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, PNG, JPG, JPEG (MAX. 10MB per file)"})]})]})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Selected Files (",u.length,")"]}),e.jsx("div",{className:"space-y-2",children:u.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`fas ${s.type.includes("pdf")?"fa-file-pdf text-red-500":"fa-file-image text-blue-500"} text-xl`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>F(t),className:"text-red-500 hover:text-red-700",children:e.jsx("i",{className:"fas fa-times"})})]},t))})]}),u.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"fas fa-folder-open text-4xl mb-3 block"}),e.jsx("p",{children:"No documents selected"}),e.jsx("p",{className:"text-xs mt-1",children:"You can add documents later if needed"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200",children:[e.jsxs(f,{type:"button",variant:"outline",onClick:()=>o==="create"?g(-1):d==null?void 0:d(!1),disabled:x,children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsxs("div",{className:"flex gap-3",children:[n!=="main"&&e.jsxs(f,{type:"button",variant:"outline",onClick:()=>{const s=m.findIndex(t=>t.id===n);s>0&&p(m[s-1].id)},disabled:x,children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Previous"]}),n!==m[m.length-1].id&&e.jsxs(f,{type:"button",onClick:()=>{const s=m.findIndex(t=>t.id===n);s<m.length-1&&p(m[s+1].id)},disabled:x,children:["Next",e.jsx("i",{className:"fas fa-arrow-right ml-2"})]}),e.jsx(f,{type:"button",onClick:w,disabled:x,className:"bg-blue-600 hover:bg-blue-700",children:x?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),o==="create"?"Creating...":"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),o==="create"?"Create Customer":"Update Customer"]})})]})]})]})})]})};export{L as C};
