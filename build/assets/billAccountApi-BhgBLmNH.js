import{u as g,q as y}from"./index-BnxfhzlG.js";import{g as m}from"./roleCheck-B2ZABSQw.js";import{u as P}from"./useQuery-DQ8spYHd.js";import{u as h}from"./useMutation-BcezwzYU.js";import{u as E}from"./useInfiniteQuery-DjbdwBFi.js";const b=async({organizationId:t,vendorId:n,page:e,limit:r,date:l,billToDate:s,billFromDate:c,createdFromDate:u,createdToDate:p,search:f,sortBy:w,sortOrder:d,api:i})=>{const a=new URLSearchParams;t&&a.append("organizationId",t),n&&a.append("vendorId",n),e&&a.append("page",e.toString()),r&&a.append("limit",r.toString()),l&&a.append("date",l),w&&a.append("sortBy",w),d&&a.append("sortOrder",d),f&&a.append("search",f),s&&a.append("billToDate",s),c&&a.append("billFromDate",c),u&&a.append("createdFromDate",u),p&&a.append("createdToDate",p);const{data:o}=await i.get(`/department/accounting/bill/getallbill?${a.toString()}`);if(!o.ok)throw new Error(o.message);return o},A=async({billData:t,api:n})=>{const{data:e}=await n.post("/department/accounting/bill/createbill",t);if(!e.ok)throw new Error(e.message);return e.data},k=async({billId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/bill/deletebill/${t}`);if(!e.ok)throw new Error(e.message);return e.data},q=async({billId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/bill/getsinglebill/${t}`);if(!e.ok)throw new Error(e.message);return e.data},v=({organizationId:t,vendorId:n,limit:e=10,search:r,date:l,billToDate:s,billFromDate:c,createdFromDate:u,createdToDate:p,sortBy:f,sortOrder:w})=>{const d=["owner","staff","CTO"],{role:i}=g(),a=m(i);return E({queryKey:["bills",t,n,e,l,r,f,w,s,c,u,p],queryFn:async({pageParam:o=1})=>{if(!i||!d.includes(i))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await b({organizationId:t,vendorId:n,page:o,limit:e,date:l,billToDate:s,billFromDate:c,createdFromDate:u,createdToDate:p,search:r,sortBy:f,sortOrder:w,api:a})},getNextPageParam:o=>{if(o.pagination.page<o.pagination.totalPages)return o.pagination.page+1},getPreviousPageParam:o=>{if(o.pagination.page>1)return o.pagination.page-1},initialPageParam:1,enabled:!!i&&d.includes(i)&&!!t})},I=()=>{const t=["owner","staff","CTO"],{role:n}=g(),e=m(n);return h({mutationFn:async({billData:r})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({billData:r,api:e})},onSuccess:()=>{y.invalidateQueries({queryKey:["bills"]})}})},K=()=>{const t=["owner","staff","CTO"],{role:n}=g(),e=m(n);return h({mutationFn:async({billId:r})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await k({billId:r,api:e})},onSuccess:()=>{y.invalidateQueries({queryKey:["bills"]})}})},Q=t=>{const n=["owner","staff","CTO"],{role:e}=g(),r=m(e);return P({queryKey:["bill",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await q({billId:t,api:r})},enabled:!!t&&!!e&&n.includes(e)})};export{K as a,Q as b,I as c,v as u};
