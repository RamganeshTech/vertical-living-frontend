import{u as x,j as o,M as y,t as i}from"./index-CUvv9ev0.js";import{b as w,c as T,d as v}from"./toolMasterApi-D34GLMxr.js";import{T as D}from"./ToolMasterForm-DCkFRq78.js";import{T as j}from"./ToolHistoryTimeline-BKy-BBSm.js";import"./Label-CX2gOFKV.js";import"./ImageGalleryMain-CpyKJ1TW.js";import"./index-BKXLMMDl.js";import"./TextArea-BnQDaGer.js";import"./toolOtpApi-DbGg0Pvz.js";import"./dateFormator-BGKi5rfZ.js";const P=()=>{const{id:e,organizationId:d}=x(),{data:c,isLoading:l,isError:p,error:u,refetch:s}=w(e),m=T(),r=v(),f=async(n,t)=>{try{if(await m.mutateAsync({id:e,updateData:n}),t.length>0){const a=new FormData;t.forEach(h=>a.append("files",h)),await r.mutateAsync({id:e,formData:a})}await s(),i({title:"Success",description:"Tool details updated"})}catch(a){i({title:"Update Failed",description:a.message,variant:"destructive"})}},g=async n=>{try{const t=new FormData;n.forEach(a=>t.append("files",a)),await r.mutateAsync({id:e,formData:t}),await s(),i({title:"Success",description:"images updloaded"})}catch(t){i({title:"Update Failed",description:t.message,variant:"destructive"})}};return l?o.jsx(y,{}):p?o.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",u.message]}):o.jsxs("main",{className:"max-h-full space-y-2 overflow-y-auto p-2 !bg-white/20",children:[o.jsx(D,{mode:"view",initialData:c,organizationId:d,onSubmit:f,refetch:s,onQuickUpload:g,isSubmitting:m.isPending||r.isPending}),o.jsx(j,{toolId:e,organizationId:d})]})};export{P as default};
