import{a as R,w as L,n as O,j as e,O as P,B as p,b,t as f}from"./index-Bq7s2LOU.js";import{u as M,a as Q,b as q}from"./qualityCheckApi-DjMS0pT-.js";import{R as B}from"./ResetStageButton-BLsxruoM.js";import{C as F}from"./Card-Dcdc05O8.js";import{A as I,S as T}from"./AssignStaff-BvsTYBh_.js";import $ from"./MaterialOverviewLoading-CBnO-AL4.js";import{S as z}from"./ShareDocumentWhatsapp-D3JwqS9S.js";import"./getAllUsersApi-DbLjrMdU.js";import"./Skeleton-CG3o2pT1.js";import"./documentationApi-D8ak6w3s.js";import"./requirementFormApi-DH5IsQA_.js";const D=["LivingRoom","Bedroom","Kitchen","DiningRoom","Balcony","FoyerArea","Terrace","StudyRoom","CarParking","Garden","StorageRoom","EntertainmentRoom","HomeGym"],G=[{path:"adminwall",sectionName:"Admin Section"},{path:"workerwall",sectionName:"Worker Section"}];function ee(){var d,x,u,h,g;const{projectId:a,organizationId:j}=R(),w=L(),{isMobile:n,openMobileSidebar:c}=O();if(!a)return null;const{data:s,isLoading:m,isError:N,error:i,refetch:r}=M(a),{mutateAsync:y,isPending:k}=Q(),{mutateAsync:v,isPending:S}=q(),C=w.pathname.includes("/qualitycheckroom/"),A=async()=>{var t,l;try{await v({projectId:a}),f({title:"Success",description:"Quality Check marked as complete."}),r()}catch(o){f({title:"Error",description:((l=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:l.message)||o.message||"Failed to update completion status",variant:"destructive"})}};return m?e.jsx($,{}):e.jsx("main",{className:"w-full h-full  overflow-y-auto custom-scrollbar",children:C?e.jsx(P,{context:{isMobile:n,openMobileSidebar:c}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-blue-600 flex items-center gap-2",children:[n&&e.jsx("button",{onClick:c,className:"mr-2 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsx("i",{className:"fas fa-check-double"}),"Quality Check Overview"]}),e.jsxs("div",{className:"!w-[100%] sm:!w-[100%] lg:!w-[50%] xl:!w-[65%] flex flex-col sm:flex-row gap-2 justify-end",children:[e.jsxs(p,{isLoading:S,onClick:A,className:"bg-green-600 h-10 hover:bg-green-700 text-white w-full sm:w-auto",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark as Complete"}),e.jsx("span",{className:"inline sm:hidden",children:"Complete"})]}),e.jsx(B,{projectId:a,stageNumber:12,stagePath:"qualitycheck",className:"w-full sm:w-auto"}),!i&&e.jsx(z,{projectId:a,stageNumber:"12",className:"w-full sm:w-fit",isStageCompleted:s==null?void 0:s.status}),e.jsx(I,{stageName:"QualityCheckupModel",projectId:a,organizationId:j,currentAssignedStaff:(s==null?void 0:s.assignedTo)||null,className:"w-full sm:w-auto"})]})]}),N?e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-red-50 border border-red-200 rounded-lg shadow text-center",children:[e.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"⚠️ Oops! An Error Occurred"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:((x=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:x.message)||(i==null?void 0:i.message)||"Failed to load, please try again"}),e.jsx(p,{isLoading:m,onClick:()=>r(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(F,{className:"p-4 mb-6 border-l-4 border-blue-600 bg-white shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700 text-sm font-medium mb-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-blue-500 text-lg"}),e.jsx("span",{children:"Stage Timings"})]}),e.jsx(T,{stageName:"qualitycheck",completedAt:(u=s==null?void 0:s.timer)==null?void 0:u.completedAt,projectId:a,formId:s==null?void 0:s._id,deadLine:(h=s==null?void 0:s.timer)==null?void 0:h.deadLine,startedAt:(g=s==null?void 0:s.timer)==null?void 0:g.startedAt,refetchStageMutate:r,deadLineMutate:y,isPending:k})]}),e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Rooms"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 mb-10",children:D.map(t=>{var l;return e.jsxs(b,{to:`qualitycheckroom/${t}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:t.replace(/([A-Z])/g," $1").trim()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((l=s==null?void 0:s[t])==null?void 0:l.length)||0," works completed"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},t)})}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl text-blue-600 font-semibold mb-2",children:"Walls SOP Section"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10",children:G.map(t=>e.jsxs(b,{to:`qualitycheckroom/${t.path}`,className:"border-l-4 border-blue-600 p-4 rounded-xl bg-white shadow hover:shadow-lg transition cursor-pointer",children:[e.jsx("h3",{className:"text-md font-semibold text-blue-800 capitalize mb-1",children:t.sectionName.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to view details"})]},t.sectionName))})]})]})]})})}export{D as QualityCheckRoomKeys,ee as default,G as wallSectionSop};
