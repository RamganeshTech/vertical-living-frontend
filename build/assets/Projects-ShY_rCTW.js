import{u as j,r as S,b as C,j as o,O as L}from"./index-Dkf7SbMA.js";import{M as b,S as h}from"./MobileSidebar-Cd8kKK9G.js";import{S as R,a as z}from"./constants-4IFJeChr.js";import"./CTOApi-Dss2WTI3.js";import"./useMutation-DtRxugN4.js";import"./clientApi-Cfv1-YAN.js";import"./staffApi-CUU92k1g.js";import"./userApi-D1FANgdi.js";import"./workerApi-DXJD5jGq.js";import"./Button-ClgICMLF.js";import"./toast-BSC5QTk1.js";import"./currentActiveStageApi-B1WYtoZm.js";import"./useQuery-h0LZ4b8f.js";import"./roleCheck-CXq1v0D5.js";import"./notificationApi-EcLTaCV4.js";import"./useInfiniteQuery-BUWQcrvt.js";import"./issueDiscussionApi-Cdkr5g_O.js";const F={HR:"hr",LOGISTICS:"logistics",PROCUREMENT:"procurement",SHORTLIST:"referencedesign",DESIGNLAB:"design",COMMONORDER:"commonorder",ACCOUNTING:["accounts","billing","payments","vendor","customer","invoice","expense","billtemplate","purchaseorder","vendorpayment","salesorder","retailinvoice"],RATECONIG:"materialquote",RATECONIGSTAFF:"materialquote",INTERNALQUOTE:"materialquote",QUOTEVARIENT:"materialquote","QUOTES (CLIENT)":"materialquote",SUBCONTRACT:"subcontract",STAFFTASK:"stafftask",SINGLESTAFFTASK:"stafftask",WORKLIBRARY:"stafftask",MATERIALINVENTORY:"productinventory"},J=({projectId:E,setProjectId:N})=>{const{organizationId:t}=j(),[O,l]=S.useState(!1),[m,u]=S.useState(window.innerWidth<470),{role:T,permission:p}=C(),s=(T==null?void 0:T.toLowerCase())||"",I={PROJECTS:`/organizations/${t}/projects`,ORGANIZATION:`/organizations/${t}`,SHORTLIST:`/organizations/${t}/projects/shortlistdesign`,COMMONORDER:`/organizations/${t}/projects/commonorder`,SUBCONTRACT:`/organizations/${t}/projects/subcontractmain`,HR:`/organizations/${t}/projects/hr`,LOGISTICS:`/organizations/${t}/projects/logistics`,PROCUREMENT:`/organizations/${t}/projects/procurement`,ACCOUNTING:`/organizations/${t}/projects/accounting`,DESIGNLAB:`/organizations/${t}/projects/designlabmain`,RATECONIG:`/organizations/${t}/projects/rateconfig`,RATECONIGSTAFF:`/organizations/${t}/projects/labourrateconfig`,INTERNALQUOTE:`/organizations/${t}/projects/internalquote`,QUOTEVARIENT:`/organizations/${t}/projects/quotevariant`,"QUOTES (CLIENT)":`/organizations/${t}/projects/clientquotes`,WORKLIBRARY:`/organizations/${t}/projects/worklibrary`,STAFFTASK:`/organizations/${t}/projects/stafftask`,SINGLESTAFFTASK:`/organizations/${t}/projects/associatedstafftask`,MATERIALINVENTORY:`/organizations/${t}/projects/materialinventory`},a=Object.keys(R);let r=[];s==="owner"||s==="cto"?r=a.filter(e=>e!=="SINGLESTAFFTASK"):s==="staff"?r=a.filter(e=>e!=="STAFFTASK"&&e!=="WORKLIBRARY"):s==="worker"?r=a.filter(e=>e!=="STAFFTASK"&&e!=="WORKLIBRARY"):s==="client"?r=a.filter(e=>e!=="STAFFTASK"&&e!=="WORKLIBRARY"):r=["PROJECTS","ORGANIZATION"];let i={},A={},n={};return r.forEach(e=>{R[e]&&I[e]&&(i[e]=R[e],A[e]=z[e],n[e]=I[e])}),s!=="owner"&&Object.keys(i).forEach(e=>{const c=F[e];c&&((Array.isArray(c)?c:[c]).some(d=>{const f=p==null?void 0:p[d];return f&&Object.values(f).some(g=>g===!0)})||(delete i[e],delete A[e],delete n[e]))}),S.useEffect(()=>{const e=()=>{u(window.innerWidth<470)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex w-full h-full",children:[m?o.jsx(b,{labels:i,path:n,isOpen:O,onClose:()=>l(!1)}):o.jsx(h,{path:n,labels:i,icons:A}),o.jsx("main",{className:"!w-[100%] h-full p-4",children:o.jsx(L,{context:{projectId:E,setProjectId:N,organizationId:t,isMobile:m,isMobileSidebarOpen:O,openMobileSidebar:()=>l(!0),closeMobileSidebar:()=>l(!1)}})})]})})};export{J as default};
