import{a as A,r as f,c as L,j as i,O as R,ak as p,al as w}from"./index-By5P0A7l.js";import{M,S as P}from"./MobileSidebar-DM9GUuDu.js";import"./CTOApi-BAYv2JE1.js";import"./useMutation-7YLqc7VE.js";import"./clientApi-CkTT7T0B.js";import"./staffApi-I818liCO.js";import"./userApi-BwcMcx4P.js";import"./workerApi-DlTONNdO.js";import"./Button-DLUK8O0t.js";import"./toast-BSC5QTk1.js";import"./currentActiveStageApi-_FTPeAr6.js";import"./useQuery-Cc7pLKfK.js";import"./roleCheck-YGaMnK_P.js";import"./notificationApi-BZWUzyjQ.js";import"./useInfiniteQuery-DQF0m-E9.js";import"./issueDiscussionApi-eVzs4Q5x.js";const z={INVITECTO:"invitecto",INVITESTAFFS:"invitestaff",MODULAR:"modularunit"},q=({setOrganizationId:m})=>{const{organizationId:s}=A(),[I,r]=f.useState(!1),[O,h]=f.useState(window.innerWidth<470),{role:l,permission:c}=L(),o=(l==null?void 0:l.toLowerCase())||"",u={PROJECTS:`/organizations/${s}/projects`,DETAILS:`/organizations/${s}`,INVITECTO:`/organizations/${s}/invitecto`,INVITESTAFFS:`/organizations/${s}/invitestaff`,ROLESPERMISSIONS:`/organizations/${s}/dashboard`,PLAN:`/organizations/${s}/subscriptionplan`,PROFILE:`/organizations/${s}/userprofile`,MODULAR:`/organizations/${s}/modularunits`},S=Object.keys(p);let a=[];o==="owner"?a=S:o==="cto"||o==="staff"?a=S.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN"):a=S.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN");let t={},d={},n={};return a.forEach(e=>{p[e]&&u[e]&&(t[e]=p[e],d[e]=w[e],n[e]=u[e])}),o!=="owner"&&Object.keys(t).forEach(e=>{const b=z[e];if(b){const E=c==null?void 0:c[b];E&&Object.values(E).some(N=>N===!0)||(delete t[e],delete d[e],delete n[e])}}),f.useEffect(()=>{const e=()=>h(window.innerWidth<470);return window.addEventListener("resize",e),s&&m(s),()=>window.removeEventListener("resize",e)},[s,m]),i.jsxs("div",{className:"flex w-full h-full",children:[O?i.jsx(M,{labels:t,path:n,isOpen:I,onClose:()=>r(!1)}):i.jsx(P,{path:n,labels:t,icons:d}),i.jsx("main",{className:"!w-[100%] h-full",children:i.jsx(R,{context:{isMobile:O,isMobileSidebarOpen:I,openMobileSidebar:()=>r(!0),closeMobileSidebar:()=>r(!1)}})})]})};export{q as default};
