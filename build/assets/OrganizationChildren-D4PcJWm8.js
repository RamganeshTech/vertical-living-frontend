import{u as A,r as S,b as L,j as i,O as R}from"./index-DmIvND9E.js";import{O as d,e as w}from"./constants-4IFJeChr.js";import{M,S as P}from"./MobileSidebar-qXJkFxSU.js";import"./CTOApi-DIjozcKW.js";import"./useMutation-CAeBxy3I.js";import"./clientApi-BK8r6VrH.js";import"./staffApi-BdMobX7P.js";import"./userApi-mm52J5xZ.js";import"./workerApi-BhLvN3T4.js";import"./Button-CcLxO5cH.js";import"./toast-BSC5QTk1.js";import"./currentActiveStageApi-B-oA_E4S.js";import"./useQuery-BHdcKCtG.js";import"./roleCheck-DZRqXPrB.js";import"./notificationApi-BSLRsGK8.js";import"./useInfiniteQuery-iAVIpWnU.js";import"./issueDiscussionApi-2NpMuhwV.js";const z={INVITECTO:"invitecto",INVITESTAFFS:"invitestaff",MODULAR:"modularunit"},H=({setOrganizationId:m})=>{const{organizationId:t}=A(),[I,n]=S.useState(!1),[O,h]=S.useState(window.innerWidth<470),{role:l,permission:c}=L(),o=(l==null?void 0:l.toLowerCase())||"",u={PROJECTS:`/organizations/${t}/projects`,DETAILS:`/organizations/${t}`,INVITECTO:`/organizations/${t}/invitecto`,INVITESTAFFS:`/organizations/${t}/invitestaff`,ROLESPERMISSIONS:`/organizations/${t}/dashboard`,PLAN:`/organizations/${t}/subscriptionplan`,PROFILE:`/organizations/${t}/userprofile`,MODULAR:`/organizations/${t}/modularunits`},f=Object.keys(d);let a=[];o==="owner"?a=f:o==="cto"||o==="staff"?a=f.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN"):a=f.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN");let s={},p={},r={};return a.forEach(e=>{d[e]&&u[e]&&(s[e]=d[e],p[e]=w[e],r[e]=u[e])}),o!=="owner"&&Object.keys(s).forEach(e=>{const b=z[e];if(b){const E=c==null?void 0:c[b];E&&Object.values(E).some(N=>N===!0)||(delete s[e],delete p[e],delete r[e])}}),S.useEffect(()=>{const e=()=>h(window.innerWidth<470);return window.addEventListener("resize",e),t&&m(t),()=>window.removeEventListener("resize",e)},[t,m]),i.jsxs("div",{className:"flex w-full h-full",children:[O?i.jsx(M,{labels:s,path:r,isOpen:I,onClose:()=>n(!1)}):i.jsx(P,{path:r,labels:s,icons:p}),i.jsx("main",{className:"!w-[100%] h-full",children:i.jsx(R,{context:{isMobile:O,isMobileSidebarOpen:I,openMobileSidebar:()=>n(!0),closeMobileSidebar:()=>n(!1)}})})]})};export{H as default};
