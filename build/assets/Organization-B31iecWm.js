import{r as u,j as e,R as o,f as P,C as _,o as R,K as T,B as x,s as U,t as p,h as b,I as v,S as g}from"./index-C8ZngCsk.js";import{u as A,a as W,b as B}from"./orgApi-B_1PQL4q.js";import{T as G}from"./TextArea-C_viV-lw.js";import{M as V,S as $}from"./MobileSidebar-oP3HUN4I.js";import{L as E,c as H}from"./constants-DELhKX7a.js";import"./CTOApi-BjKV7OpF.js";import"./clientApi-CooGqWU5.js";import"./staffApi-BxnJDYOL.js";import"./userApi-Cxlm4jz-.js";import"./workerApi-BnCwD0ov.js";import"./stageSelectionApi-IUt31Drc.js";const K=({children:t})=>{const[s,r]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{const n=l=>{a.current&&!a.current.contains(l.target)&&r(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[]),e.jsx("div",{ref:a,className:"relative inline-block text-left",children:o.Children.map(t,n=>{if(o.isValidElement(n)){if(n.type===L)return o.cloneElement(n,{onClick:()=>r(!s)});if(n.type===S)return o.cloneElement(n,{isOpen:s,onClose:()=>r(!1)})}return n})})},L=({asChild:t=!1,children:s,onClick:r})=>t&&o.isValidElement(s)?o.cloneElement(s,{onClick:a=>{var n;if(a.stopPropagation(),r==null||r(),o.isValidElement(s)){const l=(n=s.props)==null?void 0:n.onClick;typeof l=="function"&&l(a)}}}):e.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),r==null||r()},className:"inline-flex items-center justify-center",children:s}),S=({align:t="start",className:s="",children:r,isOpen:a=!1,onClose:n})=>{if(!a)return null;const l=t==="end"?"right-0":"left-0";return e.jsx("div",{className:`absolute ${l} mt-2 w-48 rounded-xl bg-white shadow-lg border border-gray-200 py-1 z-50 ${s}`,children:o.Children.map(r,i=>o.isValidElement(i)&&i.type===M?o.cloneElement(i,{onClose:n}):i)})},M=({className:t="",children:s,onClick:r,onClose:a})=>{const n=()=>{r==null||r(),a==null||a()};return e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center ${t}`,onClick:n,children:s})};var D={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},k=o.createContext&&o.createContext(D),Y=["attr","size","title"];function q(t,s){if(t==null)return{};var r=J(t,s),a,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function J(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function N(){return N=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},N.apply(this,arguments)}function z(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function w(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?z(Object(r),!0).forEach(function(a){Q(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Q(t,s,r){return s=X(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function X(t){var s=Z(t,"string");return typeof s=="symbol"?s:s+""}function Z(t,s){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function I(t){return t&&t.map((s,r)=>o.createElement(s.tag,w({key:r},s.attr),I(s.child)))}function j(t){return s=>o.createElement(ee,N({attr:w({},t.attr)},s),I(t.child))}function ee(t){var s=r=>{var{attr:a,size:n,title:l}=t,i=q(t,Y),d=n||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),o.createElement("svg",N({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,i,{className:c,style:w(w({color:t.color||r.color},r.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&o.createElement("title",null,l),t.children)};return k!==void 0?o.createElement(k.Consumer,null,r=>s(r)):s(D)}function te(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function se(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function re(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function ae(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function ne(t){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function le({organization:t}){const s=A(),r=P(),a=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await s.mutateAsync(t._id),p({title:"Success",description:"Organization deleted successfully"})}catch(n){p({title:"Error",description:n.message||"Failed to delete organization",variant:"destructive"})}};return e.jsxs(_,{className:"group hover:shadow-2xl transition-all duration-300 hover:bg-white hover:scale-105",children:[e.jsx(R,{className:"pb-4 bg-gradient-to-br from-blue-50 to-blue-100/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t!=null&&t.logoUrl?e.jsx("img",{src:t.logoUrl||"/placeholder.svg",alt:t.organizationName,className:"w-8 h-8 rounded-lg object-cover"}):e.jsx(ne,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-blue-900 text-lg truncate",children:t==null?void 0:t.organizationName}),t.type&&e.jsx(T,{variant:"default",className:"mt-1",children:t.type})]})]}),e.jsxs(K,{children:[e.jsx(L,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsx(S,{align:"end",children:e.jsxs(M,{onClick:a,className:"text-red-600 focus:text-red-600",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]})}),e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx(te,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),(t==null?void 0:t.address)||"N/A"]}),(t==null?void 0:t.organizationPhoneNo)&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(re,{className:"w-4 h-4 mr-2 text-blue-500"}),t.organizationPhoneNo]}),e.jsx("div",{className:"flex items-center justify-end pt-3 border-t border-blue-100",children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>r(`/organizations/${t._id}`),className:"border-blue-200 text-blue-600 hover:bg-blue-50",children:"View Details"})})]})})]})}const ie=({open:t,onOpenChange:s,children:r})=>{const a=u.useRef(null);return u.useEffect(()=>{const n=i=>{i.key==="Escape"&&s(!1)},l=i=>{a.current&&!a.current.contains(i.target)&&s(!1)};return t&&(document.addEventListener("keydown",n),document.addEventListener("mousedown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",n),document.removeEventListener("mousedown",l),document.body.style.overflow="unset"}},[t,s]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{ref:a,className:"relative z-50 w-full max-w-lg mx-4",children:r})]}):null},oe=({className:t="",children:s})=>e.jsx("div",{className:`bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto ${t}`,children:s}),ce=({className:t="",children:s})=>e.jsx("div",{className:`p-6 pb-4 ${t}`,children:s}),de=({className:t="",children:s})=>e.jsx("h2",{className:`text-xl font-semibold text-gray-900 ${t}`,children:s});function me({isOpen:t,onClose:s}){const[r,a]=u.useState({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),n=W(),l=async d=>{var c,m;if(d.preventDefault(),!r.organizationName.trim()){p({title:"Error",description:"Organization name is required",variant:"destructive"});return}try{await n.mutateAsync(r),p({title:"Success",description:"Organization created successfully"}),a({organizationName:"",type:"",address:"",logoUrl:"",organizationPhoneNo:""}),s()}catch(f){p({title:"Error",description:((m=(c=f==null?void 0:f.response)==null?void 0:c.data)==null?void 0:m.message)||"Failed to create organization",variant:"destructive"})}},i=d=>{a(c=>({...c,[d.target.name]:d.target.value}))};return e.jsx(ie,{open:t,onOpenChange:s,children:e.jsxs(oe,{className:"sm:max-w-md p-4 custom-scrollbar",children:[e.jsx(ce,{children:e.jsx(de,{className:"text-blue-900",children:"Create New Organization"})}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"organizationName",className:"text-blue-800",children:"Organization Name *"}),e.jsx(v,{id:"organizationName",name:"organizationName",value:r.organizationName,onChange:i,placeholder:"Enter organization name",className:"border-blue-200 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"type",className:"text-blue-800",children:"Type"}),e.jsx(v,{id:"type",name:"type",value:r.type,onChange:i,placeholder:"e.g., Company, NGO, Startup",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"organizationPhoneNo",className:"text-blue-800",children:"Phone Number"}),e.jsx(v,{id:"organizationPhoneNo",name:"organizationPhoneNo",value:r.organizationPhoneNo,onChange:i,placeholder:"Enter phone number",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"address",className:"text-blue-800",children:"Address"}),e.jsx(G,{id:"address",name:"address",value:r.address,onChange:i,placeholder:"Enter organization address",className:"border-blue-200 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"logoUrl",className:"text-blue-800",children:"Logo URL"}),e.jsx(v,{id:"logoUrl",name:"logoUrl",value:r.logoUrl,onChange:i,placeholder:"Enter logo URL",className:"border-blue-200 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:s,className:"border-blue-200 text-blue-600",children:"Cancel"}),e.jsx(x,{type:"submit",disabled:n.isPending,className:"bg-blue-600 hover:bg-blue-700",children:n.isPending?"Creating...":"Create Organization"})]})]})]})})}function ye(){var O,C;const[t,s]=u.useState(!1),[r,a]=u.useState(!1),[n,l]=u.useState(window.innerWidth<470),i=P();let{data:d,isLoading:c,error:m,refetch:f}=B();const y={ADMIN:"/login",STAFF:"/login/staff",CTO:"/login/cto",WORKER:"/login/worker",CLIENT:"/login/client"},F=()=>{a(!0)};return u.useEffect(()=>{const h=()=>{l(window.innerWidth<470)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),c?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{className:"h-8 w-48 mb-2"}),e.jsx(g,{className:"h-4 w-64"})]}),e.jsx(g,{className:"h-10 w-40"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(h=>e.jsx(g,{className:"h-24 w-full rounded-2xl"},h))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6].map(h=>e.jsx(g,{className:"h-64 w-full rounded-2xl"},h))})]})]}):m?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Organizations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:((C=(O=m==null?void 0:m.response)==null?void 0:O.data)==null?void 0:C.message)||(m==null?void 0:m.message)||"Something happened try again please"}),e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[e.jsxs(x,{onClick:()=>f(),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]}),e.jsxs(x,{onClick:()=>i("/login/staff"),className:"bg-blue-600 hover:bg-blue-700 text-white active:scale-95",children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Login"]})]})]})}):e.jsxs("main",{className:"w-screen h-screen flex flex:1",children:[n?e.jsx(V,{labels:E,path:y,isOpen:r,onClose:()=>a(!1)}):e.jsx($,{path:y,labels:E,icons:H}),e.jsxs("section",{className:"w-full h-full",children:[e.jsx("div",{className:"max-w-full min-h-[10%] bg-white/90 backdrop-blur-sm border-b border-blue-200",children:e.jsx("div",{className:"max-w-full mx-auto px-2 sm:px-6 py-3",children:e.jsxs("div",{className:"flex  sm:flex-row items-center sm:items-center justify-between gap-3 sm:gap-6",children:[e.jsxs("div",{className:"flex flex:1 items-center",children:[n&&e.jsx("button",{onClick:F,className:"mr-3 p-2 rounded-md border border-gray-300 hover:bg-gray-100",title:"Open Menu",children:e.jsx("i",{className:"fa-solid fa-bars"})}),e.jsxs("div",{className:"flex flex-col gap-1 w-[50vw]",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-blue-800",children:[e.jsx("i",{className:"fas fa-building mr-2 text-blue-600"}),"Organization"]}),e.jsx("p",{className:"text-sm sm:inline hidden text-blue-500",children:"Manage your organization and teams"})]})]}),!d&&e.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3 sm:gap-4 w-full sm:w-auto",children:e.jsxs(x,{onClick:()=>s(!0),variant:"primary",className:"",children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Organization"}),e.jsx("span",{className:"inline sm:hidden",children:"Create"})]})})]})})}),e.jsx("div",{className:" min-h-[calc(100vh-10%)] sm:min-h-[calc(100vh-11%)] bg-gradient-to-br from-blue-50 via-white to-blue-100",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 py-6 relative",children:[d?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Your Organization"})}),e.jsx("div",{className:" xl:!w-[30%] lg:w-[50%] sm:w-[60%] w-[100%]",children:e.jsx(le,{organization:d})})]}):e.jsx("div",{className:"text-center py-2 overflow-y-auto max-h-[calc(100vh-15vh)]",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx("i",{className:"fas fa-building text-blue-500 text-4xl"})}),e.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:"No Organizations Yet"}),e.jsx("p",{className:"text-blue-600 mb-6 text-sm sm:text-base",children:"Create your first organization to start managing your teams and projects effectively"}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-6 text-left",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-4 text-center",children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Getting Started"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Create your organization with basic details"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Invite team members to join your organization"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Start managing tasks and projects together"})]})]})]}),e.jsxs(x,{onClick:()=>s(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Create Your First Organization"]})]})}),e.jsx(me,{isOpen:t,onClose:()=>s(!1)})]})})]})]})}export{ye as default};
