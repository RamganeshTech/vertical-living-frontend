import{u as A,r as f,a as L,j as i,O as M,aM as I,aN as R}from"./index-CUvv9ev0.js";import{M as w,S as P}from"./MobileSidebar-O_sm7cWk.js";import"./CTOApi-_3vSU2Pl.js";import"./clientApi-B9ZJpSCb.js";import"./staffApi-DuMYQv-Z.js";import"./userApi-qEKbX3yc.js";import"./workerApi-DT64gopP.js";import"./currentActiveStageApi-DQdoSrbz.js";import"./notificationApi-C_PMKJkS.js";import"./issueDiscussionApi-D5Fmy4CE.js";const z={INVITECTO:"invitecto",INVITESTAFFS:"invitestaff",MODULAR:"modularunit"},_=({setOrganizationId:O})=>{const{organizationId:s}=A(),[p,r]=f.useState(!1),[u,N]=f.useState(window.innerWidth<470),{role:l,permission:c}=L(),o=(l==null?void 0:l.toLowerCase())||"",b={PROJECTS:`/organizations/${s}/projects`,DETAILS:`/organizations/${s}`,INVITECTO:`/organizations/${s}/invitecto`,INVITESTAFFS:`/organizations/${s}/invitestaff`,ROLESPERMISSIONS:`/organizations/${s}/dashboard`,PLAN:`/organizations/${s}/subscriptionplan`,PROFILE:`/organizations/${s}/userprofile`,MODULAR:`/organizations/${s}/modularunits`},S=Object.keys(I);let a=[];o==="owner"?a=S:o==="cto"||o==="staff"?a=S.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN"):a=S.filter(e=>e!=="ROLESPERMISSIONS"&&e!=="PLAN");let t={},d={},n={};return a.forEach(e=>{I[e]&&b[e]&&(t[e]=I[e],d[e]=R[e],n[e]=b[e])}),o!=="owner"&&Object.keys(t).forEach(e=>{const E=z[e];if(E){const m=c==null?void 0:c[E];m&&Object.values(m).some(h=>h===!0)||(delete t[e],delete d[e],delete n[e])}}),f.useEffect(()=>{const e=()=>N(window.innerWidth<470);return window.addEventListener("resize",e),s&&O(s),()=>window.removeEventListener("resize",e)},[s,O]),i.jsxs("div",{className:"flex w-full h-full",children:[u?i.jsx(w,{labels:t,path:n,isOpen:p,onClose:()=>r(!1)}):i.jsx(P,{path:n,labels:t,icons:d}),i.jsx("main",{className:"!w-[100%] h-full",children:i.jsx(M,{context:{isMobile:u,isMobileSidebarOpen:p,openMobileSidebar:()=>r(!0),closeMobileSidebar:()=>r(!1)}})})]})};export{_ as default};
