import{u as f}from"./useQuery-C2l_NFV4.js";import{e as i,f as u}from"./index-Duiduteo.js";import{u as d}from"./useMutation-BNs_TkNH.js";import{u as m}from"./useInfiniteQuery-BEsLEhdS.js";import{g as c}from"./roleCheck-CeVvsM7Q.js";const l="/designlab",g=async({organizationId:e,formData:t,api:a})=>{const{data:n}=await a.post(`${l}/create/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}});if(!n.ok)throw new Error(n.message);return n.data},y=async({organizationId:e,pageParam:t=1,filters:a,api:n})=>{const r={organizationId:e,page:t,limit:10,...a},{data:o}=await n.get(`${l}/getall`,{params:r});if(!o.ok)throw new Error(o.message);return o.data},p=async({id:e,api:t})=>{const{data:a}=await t.get(`${l}/getsingle/${e}`);if(!a.ok)throw new Error(a.message);return a.data},h=async({id:e,updateData:t,api:a})=>{const{data:n}=await a.put(`${l}/updatedesign/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},A=async({id:e,api:t})=>{const{data:a}=await t.delete(`${l}/deletedesign/${e}`);if(!a.ok)throw new Error(a.message);return a.data},E=async({id:e,formData:t,api:a})=>{const{data:n}=await a.post(`${l}/upload/${e}/reference-images`,t,{headers:{"Content-Type":"multipart/form-data"}});if(!n.ok)throw new Error(n.message);return n.data},I=async({id:e,imageId:t,api:a})=>{const{data:n}=await a.delete(`${l}/delete/${e}/reference-images/${t}`);if(!n.ok)throw new Error(n.message);return n.data},b=async({id:e,componentId:t,materialId:a,formData:n,api:r})=>{const{data:o}=await r.post(`${l}/upload/${e}/components/${t}/materials/${a}/image`,n,{headers:{"Content-Type":"multipart/form-data"}});if(!o.ok)throw new Error(o.message);return o.data},P=async({id:e,componentId:t,materialId:a,api:n})=>{const{data:r}=await n.delete(`${l}/delete/${e}/components/${t}/materials/${a}/image`);if(!r.ok)throw new Error(r.message);return r.data},s=["owner","staff","CTO"],D=()=>{const{role:e}=i(),t=c(e),a=u();return d({mutationFn:async({organizationId:n,formData:r})=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await g({organizationId:n,formData:r,api:t})},onSuccess:(n,{organizationId:r})=>{a.invalidateQueries({queryKey:["designLabs",r]})}})},N=({organizationId:e,filters:t})=>{const{role:a}=i(),n=c(a);return m({queryKey:["designLabs",e,t],queryFn:async({pageParam:r=1})=>{if(!a||!s.includes(a))throw new Error("Not allowed to make this API call");if(!n)throw new Error("API instance not found for role");return await y({organizationId:e,pageParam:r,filters:t,api:n})},initialPageParam:1,getNextPageParam:r=>r.pagination.hasNextPage?r.pagination.nextPage:void 0,enabled:!!e&&!!a&&s.includes(a)})},Q=e=>{const{role:t}=i(),a=c(t);return f({queryKey:["designLab",e],queryFn:async()=>{if(!t||!s.includes(t))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await p({id:e,api:a})},enabled:!!e&&!!t&&s.includes(t)})},F=()=>{const{role:e}=i(),t=c(e),a=u();return d({mutationFn:async({id:n,updateData:r})=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await h({id:n,updateData:r,api:t})},onSuccess:(n,{id:r})=>{a.invalidateQueries({queryKey:["designLab",r]}),a.invalidateQueries({queryKey:["designLabs"]})}})},K=()=>{const{role:e}=i(),t=c(e),a=u();return d({mutationFn:async n=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await A({id:n,api:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["designLabs"]})}})},v=()=>{const{role:e}=i(),t=c(e),a=u();return d({mutationFn:async({id:n,formData:r})=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await E({id:n,formData:r,api:t})},onSuccess:(n,{id:r})=>{a.invalidateQueries({queryKey:["designLab",r]})}})},R=()=>{const{role:e}=i(),t=c(e),a=u();return d({mutationFn:async({id:n,imageId:r})=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await I({id:n,imageId:r,api:t})},onSuccess:(n,{id:r})=>{a.invalidateQueries({queryKey:["designLab",r]})}})},S=()=>{const{role:e}=i(),t=c(e),a=u();return d({mutationFn:async({id:n,componentId:r,materialId:o,formData:w})=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await b({id:n,componentId:r,materialId:o,formData:w,api:t})},onSuccess:(n,{id:r})=>{a.invalidateQueries({queryKey:["designLab",r]})}})},_=()=>{const{role:e}=i(),t=c(e),a=u();return d({mutationFn:async({id:n,componentId:r,materialId:o})=>{if(!e||!s.includes(e))throw new Error("Not allowed to make this API call");if(!t)throw new Error("API instance not found for role");return await P({id:n,componentId:r,materialId:o,api:t})},onSuccess:(n,{id:r})=>{a.invalidateQueries({queryKey:["designLab",r]})}})};export{Q as a,F as b,v as c,R as d,S as e,_ as f,N as g,K as h,D as u};
