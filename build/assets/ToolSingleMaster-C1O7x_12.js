import{b as x,j as o,M as y,t as i}from"./index-DyM6T-eT.js";import{b as w,c as T,d as v}from"./toolMasterApi-B0EJUK0H.js";import{T as D}from"./ToolMasterForm-BT_g9rlv.js";import{T as j}from"./ToolHistoryTimeline-cfsn3EUh.js";import"./Label-B3hr6461.js";import"./ImageGalleryMain-DbEY14VT.js";import"./downloadFile-CQDFTv8V.js";import"./index-CkRxYNyB.js";import"./TextArea-D3aqW0sD.js";import"./SearchSelectNew-BTs46di7.js";import"./toolOtpApi-C9e1qkzg.js";import"./dateFormator-BGKi5rfZ.js";const N=()=>{const{id:e,organizationId:d}=x(),{data:c,isLoading:p,isError:l,error:u,refetch:s}=w(e),m=T(),r=v(),f=async(n,t)=>{try{if(await m.mutateAsync({id:e,updateData:n}),t.length>0){const a=new FormData;t.forEach(h=>a.append("files",h)),await r.mutateAsync({id:e,formData:a})}await s(),i({title:"Success",description:"Tool details updated"})}catch(a){i({title:"Update Failed",description:a.message,variant:"destructive"})}},g=async n=>{try{const t=new FormData;n.forEach(a=>t.append("files",a)),await r.mutateAsync({id:e,formData:t}),await s(),i({title:"Success",description:"images updloaded"})}catch(t){i({title:"Update Failed",description:t.message,variant:"destructive"})}};return p?o.jsx(y,{}):l?o.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",u.message]}):o.jsxs("main",{className:"max-h-full space-y-2 overflow-y-auto p-2 !bg-white/20",children:[o.jsx(D,{mode:"view",initialData:c,organizationId:d,onSubmit:f,refetch:s,onQuickUpload:g,isSubmitting:m.isPending||r.isPending}),o.jsx(j,{toolId:e,organizationId:d})]})};export{N as default};
