import{r as c,j as t}from"./index-Duiduteo.js";import{d as g}from"./downloadFile-BUxmPHqL.js";import{r as w}from"./index-8lvJRKAt.js";const y=({videoFiles:r,handleDeleteFile:x,isDeleting:m,className:f="",minWidth:d=100,maxWidth:p=100,height:h=0})=>{const[l,o]=c.useState(null),a=c.useRef(null),b=()=>o(null),s=()=>{if(l){const e=(l.index+1)%r.length;o({url:r[e].url,index:e})}},i=()=>{if(l){const e=(l.index-1+r.length)%r.length;o({url:r[e].url,index:e})}};return c.useEffect(()=>{const e=n=>{var u;l&&(l&&((u=a.current)==null||u.focus()),n.key==="Escape"?b():n.key==="ArrowRight"?s():n.key==="ArrowLeft"?i():n.key===" "&&(n.preventDefault(),a.current&&(a.current.paused?a.current.play():a.current.pause())))};return l&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[l,s,i]),t.jsxs("div",{children:[t.jsx("div",{className:`gap-1 flex flex-wrap ${f}`,children:r.map((e,n)=>t.jsx("div",{className:"relative cursor-pointer bg-gray-100 overflow-hidden mb-2",style:{flex:`0 1 ${d}px`,minWidth:`${d}px`,maxWidth:`${p}px`,height:`${h}px`},onClick:()=>o({url:e.url,index:n}),children:t.jsx("video",{src:e.url,className:"w-full h-full object-cover rounded-lg shadow-md",muted:!0,playsInline:!0})},e._id))}),l&&w.createPortal(t.jsxs("div",{onClick:()=>o(null),className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:[t.jsx("div",{className:"absolute top-1 right-6 z-[10000] flex items-center gap-4",children:t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{className:"bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",onClick:e=>{var n;e.stopPropagation(),g({src:l.url,alt:((n=r[l.index])==null?void 0:n.originalName)||"video.mp4"})},children:t.jsx("i",{className:"fa-solid fa-download"})}),t.jsx("button",{className:"bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",disabled:m,onClick:e=>{e.stopPropagation(),x(r[l.index]._id),o(null)},children:t.jsx("i",{className:"fa-solid fa-trash-can"})}),t.jsx("button",{onClick:()=>o(null),className:" bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-all duration-200",children:"✕"})]})}),t.jsxs("div",{onClick:e=>e.stopPropagation(),className:"relative bg-black rounded-lg shadow-lg max-w-[80%] max-h-[80%] p-4 flex flex-col items-center",children:[t.jsx("video",{src:l.url,controls:!0,autoPlay:!0,className:"w-[80vw] max-h-[70vh] object-contain rounded-lg"}),t.jsx("button",{onClick:i,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white text-3xl",children:"‹"}),t.jsx("button",{onClick:s,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white text-3xl",children:"›"})]})]}),document.body)]})};export{y as V};
