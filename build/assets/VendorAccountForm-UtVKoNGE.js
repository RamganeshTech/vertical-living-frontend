import{b as A,u as E,r as f,j as e}from"./index-D7MAv7ev.js";import{C as U}from"./Card-BfzjSi8a.js";import{B as b}from"./Button-DedhS7G-.js";const T=({mode:t,initialData:r,onSubmit:g,isSubmitting:x,setIsEditing:m})=>{var N,y;const{organizationId:v}=A(),h=E(),[c,p]=f.useState("main"),[l,a]=f.useState({organizationId:(r==null?void 0:r.organizationId)||v,projectId:(r==null?void 0:r.projectId)||null,clientId:(r==null?void 0:r.clientId)||null,firstName:(r==null?void 0:r.firstName)||"",lastName:(r==null?void 0:r.lastName)||"",companyName:(r==null?void 0:r.companyName)||"",email:(r==null?void 0:r.email)||"",phone:{work:((N=r==null?void 0:r.phone)==null?void 0:N.work)||"",mobile:((y=r==null?void 0:r.phone)==null?void 0:y.mobile)||""},vendorLanguage:(r==null?void 0:r.vendorLanguage)||"English",pan:(r==null?void 0:r.pan)||"",currency:(r==null?void 0:r.currency)||"INR - Indian Rupee",accountsPayable:(r==null?void 0:r.accountsPayable)||"",openingBalance:(r==null?void 0:r.openingBalance)||0,paymentTerms:(r==null?void 0:r.paymentTerms)||"Due on Receipt"}),[u,j]=f.useState([]),[n,w]=f.useState({}),k=()=>{var o;const s={};if((o=l.firstName)!=null&&o.trim()||(s.firstName="First name is required"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(s.email="Invalid email format"),l.phone.mobile){const i=String(l.phone.mobile).replace(/[\s-()]/g,"");/^[0-9]{10}$/.test(i)||(s["phone.mobile"]="Mobile number must be exactly 10 digits")}if(l.phone.work){const i=String(l.phone.work).replace(/[\s-()]/g,"");/^[0-9]{10}$/.test(i)||(s["phone.work"]="Work number must be exactly 10 digits")}return l.pan&&!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(l.pan)&&(s.pan="Invalid PAN format (e.g., ABCDE1234F)"),l.openingBalance&&isNaN(Number(l.openingBalance))&&(s.openingBalance="Opening balance must be a valid number"),w(s),Object.keys(s).length===0},C=async()=>{if(!k()){p("main");return}try{t==="create"?await g(l,u):await g(l)}catch(s){console.error("Submit error:",s)}},B=s=>{s.target.files&&j(Array.from(s.target.files))},F=s=>{j(o=>o.filter((i,P)=>P!==s))},d=[{id:"main",label:"Main Information",icon:"fa-user"},{id:"other",label:"Other Details",icon:"fa-info-circle"},...t==="create"?[{id:"documents",label:"Documents",icon:"fa-file-upload"}]:[]];return e.jsxs("div",{className:"max-w-full mx-auto overflow-y-auto max-h-full",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{t==="create"?h(-1):m==null||m(!1)},className:"bg-blue-50 hover:bg-slate-300 flex items-center justify-between w-8 h-8 border border-[#a6aab8] text-sm cursor-pointer rounded-md px-2 ",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx("i",{className:`fas ${t==="create"?"fa-plus-circle":"fa-edit"} mr-3 text-blue-600`}),t==="create"?"Create New Vendor":"Update Vendor"]}),e.jsx("p",{className:"text-gray-600 mt-1 ml-3",children:t==="create"?"Add a new Vendor to your organization":"Update Vendor information"})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:d.map(s=>e.jsxs("button",{onClick:()=>p(s.id),className:`
                                    py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                                    ${c===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                                `,children:[e.jsx("i",{className:`fas ${s.icon}`}),s.label]},s.id))})})}),e.jsx(U,{children:e.jsxs("div",{className:"p-2",children:[c==="main"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-user mr-2 text-blue-600"}),"Main Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.firstName,onChange:s=>a({...l,firstName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter first name"}),n.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:l.lastName,onChange:s=>a({...l,lastName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),e.jsx("input",{type:"text",value:l.companyName,onChange:s=>a({...l,companyName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter company name"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-envelope mr-2 text-gray-400"}),"Email"]}),e.jsx("input",{type:"email",value:l.email,onChange:s=>a({...l,email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Vendor@example.com"}),n.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.email})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-mobile-alt mr-2 text-gray-400"}),"Mobile Number"]}),e.jsx("input",{type:"tel",value:l.phone.mobile,onChange:s=>a({...l,phone:{...l.phone,mobile:s.target.value}}),maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1234567890"}),n["phone.mobile"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n["phone.mobile"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-phone mr-2 text-gray-400"}),"Work Number"]}),e.jsx("input",{type:"tel",value:l.phone.work,onChange:s=>a({...l,phone:{...l.phone,work:s.target.value}}),maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"9876543210"}),n["phone.work"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n["phone.work"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-language mr-2 text-gray-400"}),"Vendor Language"]}),e.jsxs("select",{value:l.vendorLanguage,onChange:s=>a({...l,vendorLanguage:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Hindi",children:"Hindi"}),e.jsx("option",{value:"Tamil",children:"Tamil"}),e.jsx("option",{value:"Telugu",children:"Telugu"}),e.jsx("option",{value:"Malayalam",children:"Malayalam"}),e.jsx("option",{value:"Kannada",children:"Kannada"})]})]})]}),c==="other"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-info-circle mr-2 text-blue-600"}),"Other Details"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-id-card mr-2 text-gray-400"}),"PAN Number"]}),e.jsx("input",{type:"text",value:l.pan,onChange:s=>a({...l,pan:s.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ABCDE1234F",maxLength:10}),n.pan&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.pan}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 5 letters, 4 digits, 1 letter"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-dollar-sign mr-2 text-gray-400"}),"Currency"]}),e.jsxs("select",{value:l.currency,onChange:s=>a({...l,currency:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"INR - Indian Rupee",children:"INR - Indian Rupee"}),e.jsx("option",{value:"USD - US Dollar",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR - Euro",children:"EUR - Euro"}),e.jsx("option",{value:"GBP - British Pound",children:"GBP - British Pound"}),e.jsx("option",{value:"AED - UAE Dirham",children:"AED - UAE Dirham"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-receipt mr-2 text-gray-400"}),"Accounts Payable"]}),e.jsx("input",{type:"text",value:l.accountsPayable,onChange:s=>a({...l,accountsPayable:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Account details"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-wallet mr-2 text-gray-400"}),"Opening Balance"]}),e.jsx("input",{type:"number",value:l.openingBalance,onChange:s=>a({...l,openingBalance:parseFloat(s.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01"}),n.openingBalance&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.openingBalance})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-calendar-check mr-2 text-gray-400"}),"Payment Terms"]}),e.jsxs("select",{value:l.paymentTerms,onChange:s=>a({...l,paymentTerms:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"}),e.jsx("option",{value:"Net 15",children:"Net 15"}),e.jsx("option",{value:"Net 30",children:"Net 30"}),e.jsx("option",{value:"Net 45",children:"Net 45"}),e.jsx("option",{value:"Net 60",children:"Net 60"})]})]})]}),c==="documents"&&t==="create"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-file-upload mr-2 text-blue-600"}),"Documents"]}),e.jsxs("div",{className:"relative w-full h-48 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 transition-colors cursor-pointer overflow-hidden",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf",onChange:B,id:"file-upload",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center pointer-events-none z-10",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt text-5xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Click to upload"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, PNG, JPG, JPEG"})]})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Selected Files (",u.length,")"]}),e.jsx("div",{className:"space-y-2",children:u.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`fas ${s.type.includes("pdf")?"fa-file-pdf text-red-500":"fa-file-image text-blue-500"} text-xl`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>F(o),className:"text-red-500 hover:text-red-700",children:e.jsx("i",{className:"fas fa-times"})})]},o))})]}),u.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"fas fa-folder-open text-4xl mb-3 block"}),e.jsx("p",{children:"No documents selected"}),e.jsx("p",{className:"text-xs mt-1",children:"You can add documents later if needed"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:()=>t==="create"?h(-1):m==null?void 0:m(!1),disabled:x,children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),e.jsxs("div",{className:"flex gap-3",children:[c!=="main"&&e.jsxs(b,{type:"button",variant:"outline",onClick:()=>{const s=d.findIndex(o=>o.id===c);s>0&&p(d[s-1].id)},disabled:x,children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Previous"]}),c!==d[d.length-1].id&&e.jsxs(b,{type:"button",onClick:()=>{const s=d.findIndex(o=>o.id===c);s<d.length-1&&p(d[s+1].id)},disabled:x,children:["Next",e.jsx("i",{className:"fas fa-arrow-right ml-2"})]}),e.jsx(b,{type:"button",onClick:C,disabled:x,className:"bg-blue-600 hover:bg-blue-700",children:x?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),t==="create"?"Creating...":"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check mr-2"}),t==="create"?"Create Vendor":"Update Vendor"]})})]})]})]})})]})};export{T as V};
