import{r as d,j as a}from"./index-BAM0eJUz.js";const $=r=>(r==null?void 0:r.length)===0?[]:typeof(r==null?void 0:r[0])=="string"?r==null?void 0:r.map(s=>({value:s,label:s})):r,p=(r,s)=>{switch(s){case"email":return r.email||r.label;case"both":return`${r.label} ${r.email||""}`.toLowerCase();case"name":default:return r.label}},T=({options:r,placeholder:s="Select an option",searchPlaceholder:y="Search...",onValueChange:o,value:m,onFocus:f,className:j="",searchBy:N="name",displayFormat:b="detailed",enabled:w=!0})=>{const[S,x]=d.useState(!1),[g,u]=d.useState(""),[l,i]=d.useState(null),h=d.useRef(null),t=$(r),c=t==null?void 0:t.filter(e=>{var n,v;return(v=(n=p(e,N))==null?void 0:n.toLowerCase())==null?void 0:v.includes(g.toLowerCase())});d.useEffect(()=>{const e=n=>{h.current&&!h.current.contains(n.target)&&(x(!1),u(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),d.useEffect(()=>{if(m){const e=t==null?void 0:t.find(n=>n.value===m);i(e||null)}else i(null)},[m,t]);const C=e=>{i(e),o(e.value),x(!1),u("")},k=()=>{w&&(x(!0),u(""),f&&f())},E=e=>{u(e.target.value)},L=()=>{i(null),o(null),u("")};return a.jsxs("div",{className:`relative ${j}`,ref:h,children:[a.jsxs("div",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white cursor-pointer hover:border-gray-400 transition-colors flex justify-between items-center",onClick:k,children:[a.jsx("div",{className:"flex-1 min-w-0",children:l?a.jsxs("div",{className:"flex flex-col truncate",children:[a.jsx("span",{className:"text-gray-800 font-medium truncate",children:l.label}),b==="detailed"&&l.email&&a.jsx("span",{className:"text-gray-500 text-sm truncate",children:l.email})]}):a.jsx("span",{className:"text-gray-500 truncate",children:s})}),a.jsxs("div",{className:"flex items-center space-x-2 ml-2 flex-shrink-0",children:[l&&a.jsx("button",{onClick:e=>{e.stopPropagation(),L()},className:"text-gray-400 hover:text-gray-600 text-lg font-bold w-5 h-5 flex items-center justify-center rounded-full hover:bg-gray-200",title:"Clear selection",children:"×"}),a.jsx("span",{className:"text-gray-400 text-xs",children:"▼"})]})]}),S&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:[a.jsx("div",{className:"p-2 border-b border-gray-200 sticky top-0 bg-white",children:a.jsx("input",{type:"text",placeholder:y,value:g,onChange:E,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),a.jsx("div",{className:"py-1",children:(c==null?void 0:c.length)>0?c==null?void 0:c.map(e=>a.jsxs("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 ${(l==null?void 0:l.value)===e.value?"bg-blue-50 border-blue-200":""}`,onClick:()=>C(e),children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.label}),b==="detailed"&&e.email&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:e.email})]},e.value)):a.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:"No options found"})})]})]})};export{T as S};
