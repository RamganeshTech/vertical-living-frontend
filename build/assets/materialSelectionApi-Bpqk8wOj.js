import{u as s,g as c}from"./roleCheck-DbhaipVR.js";import{u as w}from"./useQuery-CqjHwNP0.js";import{z as l}from"./index-e8sHY52i.js";import{u}from"./useMutation-BqjQ-Xv_.js";const d=async({projectId:r,api:e})=>{const{data:t}=await e.get(`/materialconfirmation/${r}`);if(!t.ok)throw new Error(t.message);return t.data},f=async({projectId:r,roomId:e,roomType:t,api:a})=>{const{data:o}=await a.get(`/materialconfirmation/${r}/predefinedroom/${e}/${t}`);if(!o.ok)throw new Error(o.message);return o.data},y=async({projectId:r,roomId:e,fieldKey:t,updates:a,api:o})=>{const{data:n}=await o.put(`/materialconfirmation/${r}/predefinedroom/${e}/field/${t}`,a);if(!n.ok)throw new Error(n.message);return n.data},h=async({projectId:r,name:e,api:t})=>{const{data:a}=await t.post(`/materialconfirmation/${r}/customroom`,{name:e});if(!a.ok)throw new Error(a.message);return a.data},p=async({projectId:r,roomId:e,api:t})=>{const{data:a}=await t.patch(`/materialconfirmation/${r}/${e}/deleteroom`);if(!a.ok)throw new Error(a.message);return a.data},E=async({projectId:r,roomId:e,item:t,api:a})=>{const{data:o}=await a.post(`/materialconfirmation/${r}/customroom/${e}/field`,t);if(!o.ok)throw new Error(o.message);return o.data},C=async({projectId:r,roomId:e,fieldKey:t,api:a})=>{const{data:o}=await a.delete(`/materialconfirmation/${r}/customroom/${e}/field/${t}`);if(!o.ok)throw new Error(o.message);return o.data},R=async({projectId:r,roomId:e,formData:t,api:a})=>{const{data:o}=await a.post(`/materialconfirmation/${r}/uploads/${e}`,t);if(!o.ok)throw new Error(o.message);return o.data},g=async({projectId:r,roomId:e,fileId:t,api:a})=>{const{data:o}=await a.patch(`/materialconfirmation/${r}/deleteuploadedfile/${e}/${t}`);if(!o.ok)throw new Error(o.message);return o.data},A=async({formId:r,projectId:e,deadLine:t,api:a})=>{const{data:o}=await a.put(`/materialconfirmation/deadline/${e}/${r}`,{deadLine:t});if(!o.ok)throw new Error(o.message);return o.data},F=async({projectId:r,api:e})=>{const{data:t}=await e.put(`/materialconfirmation/completionstatus/${r}`);if(!t.ok)throw new Error(t.message);return t.data},P=r=>{const e=["owner","staff","CTO","client","worker"],{role:t}=s(),a=c(t);return w({queryKey:["material-confirmation",r],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("Not authorized");if(!a)throw new Error("API instance not available");return await d({projectId:r,api:a})},enabled:!!r,refetchOnWindowFocus:!1,retry:!1})},T=({projectId:r,roomId:e,roomType:t})=>{const a=["owner","staff","CTO","client","worker"],{role:o}=s(),n=c(o);return w({queryKey:["material-room",r,e],queryFn:async()=>{if(!o||!a.includes(o))throw new Error("Not authorized");if(!n)throw new Error("API instance unavailable");return await f({projectId:r,roomId:e,roomType:t,api:n})},enabled:!!r&&!!e,retry:!1,refetchOnWindowFocus:!1})},k=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o,roomId:n,fieldKey:i,updates:m})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance not available");return await y({projectId:o,roomId:n,fieldKey:i,updates:m,api:t})},onSuccess:(o,{projectId:n})=>{a.invalidateQueries({queryKey:["material-confirmation",n]})}})},O=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o,name:n})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance not available");return await h({projectId:o,name:n,api:t})},onSuccess:(o,{projectId:n})=>{a.invalidateQueries({queryKey:["material-confirmation",n]})}})},z=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o,roomId:n})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance not available");return await p({projectId:o,roomId:n,api:t})},onSuccess:(o,{projectId:n})=>{a.invalidateQueries({queryKey:["material-confirmation",n]})}})},K=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o,roomId:n,item:i})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance not available");return await E({projectId:o,roomId:n,item:i,api:t})},onSuccess:(o,{projectId:n})=>{a.invalidateQueries({queryKey:["material-confirmation",n]})}})},N=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o,roomId:n,fieldKey:i})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance not available");return await C({projectId:o,roomId:n,fieldKey:i,api:t})},onSuccess:(o,{projectId:n})=>{a.invalidateQueries({queryKey:["material-confirmation",n]})}})},Q=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o,roomId:n,formData:i})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await R({projectId:o,roomId:n,formData:i,api:t})},onSuccess:(o,{projectId:n,roomId:i})=>{a.invalidateQueries({queryKey:["material-room",n,i]})}})},b=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o,roomId:n,fileId:i})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await g({projectId:o,roomId:n,fileId:i,api:t})},onSuccess:(o,{projectId:n,roomId:i})=>{a.invalidateQueries({queryKey:["material-room",n,i]})}})},M=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({formId:o,projectId:n,deadLine:i})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await A({formId:o,projectId:n,deadLine:i,api:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["material-rooms"]})}})},_=()=>{const r=["owner","staff","CTO"],{role:e}=s(),t=c(e),a=l();return u({mutationFn:async({projectId:o})=>{if(!e||!r.includes(e))throw new Error("Not authorized");if(!t)throw new Error("API instance missing");return await F({projectId:o,api:t})},onSuccess:(o,{projectId:n})=>{a.invalidateQueries({queryKey:["material-confirmation",n]})}})};export{O as a,P as b,M as c,_ as d,Q as e,b as f,T as g,K as h,k as i,N as j,z as u};
