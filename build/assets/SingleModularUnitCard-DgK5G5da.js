import{b as v,r as w,i as S,j as e,B as o,t as i}from"./index-Dre-3JFT.js";import{a as I}from"./fieldConfigs-5Nbxd4RW.js";import{a as E}from"./selectedModularUnitApi-rXEM5FRW.js";import{N as U}from"./constants-BAzBevij.js";const M=({unit:s,onEdit:n})=>{var d,m,x;const{projectId:g}=v(),[p,f]=w.useState(!1),{mutateAsync:h,isPending:c}=I(),{mutateAsync:u,isPending:j}=E(),y=S().pathname.includes("projectdetails"),b=async()=>{var t,r;try{if(!window.confirm("Are you sure you want to delete this unit?"))return;await h({unitId:s._id,unitType:s.category,organizationId:s.organizationId}),i({title:"Success",description:"Product deleted successfully"})}catch(a){i({title:"Error",description:((r=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:r.message)||(a==null?void 0:a.message)||"Failed to delete",variant:"destructive"})}},N=async()=>{var t,r,a;try{const l={image:(t=s==null?void 0:s.images[0])==null?void 0:t.url,customId:s.customId,unitId:s._id,projectId:g,category:s.category,singleUnitCost:s.price,quantity:1};await u(l),i({title:"Success",description:"Unit selected successfully"})}catch(l){i({title:"Error",description:((a=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to select unit"})}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100 hover:border-blue-200",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200",children:[(m=(d=s.images)==null?void 0:d[0])!=null&&m.url&&!p?e.jsx("img",{src:s.images[0].url||U,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:()=>f(!0)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-image text-gray-400 text-3xl mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No Image"})]})}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx("div",{className:"flex gap-2"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm",children:s==null?void 0:s.category})}),s.price&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"bg-green-600 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-sm flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign"}),s.price.toLocaleString()]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-base mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:s.name||"Unnamed Product"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("i",{className:"fas fa-hashtag text-gray-400 text-xs"}),e.jsx("p",{className:"text-xs text-gray-500 font-mono truncate",children:s.customId||s._id})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-tag text-blue-500 text-xs"}),"Category"]}),e.jsx("span",{className:"font-medium text-gray-900 capitalize truncate ml-2",children:(s==null?void 0:s.category)||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-rupee-sign text-green-500 text-xs"}),"Price"]}),e.jsxs("span",{className:"font-bold text-green-600",children:["â‚¹",((x=s.price)==null?void 0:x.toLocaleString())||"N/A"]})]})]}),y?e.jsx("div",{className:"space-y-2",children:e.jsx(o,{variant:"primary",isLoading:j,onClick:N,className:"w-full",children:"Submit"})}):e.jsxs("div",{className:"flex gap-2",children:[n&&e.jsxs(o,{onClick:()=>n(s),className:"flex-1 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 hover:border-blue-300 py-2 px-3 rounded-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(o,{variant:"danger",onClick:b,disabled:c,className:"flex-1 bg-red-600 text-white  py-2 px-3 rounded-lg transition-all disabled:opacity-50 text-sm",children:[e.jsx("i",{className:`fas ${c?"fa-spinner fa-spin":"fa-trash"} mr-1`}),c?"Deleting...":"Delete"]})]})]})]})};export{M as S};
