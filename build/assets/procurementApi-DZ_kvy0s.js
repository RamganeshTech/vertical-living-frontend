import{u as m}from"./useQuery-Cc7pLKfK.js";import{u}from"./useMutation-7YLqc7VE.js";import{u as w}from"./useInfiniteQuery-DQF0m-E9.js";import{u as s,q as a,i as l}from"./index-By5P0A7l.js";import{g as i}from"./roleCheck-YGaMnK_P.js";const y=async({id:t,payload:r,api:e})=>{const{data:n}=await e.put(`/department/procurement/updateshop/${t}`,r);if(!n.ok)throw new Error(n.message);return n.data},f=async({payload:t,api:r})=>{const{data:e}=await r.post("/department/procurement/create",t);if(!e.ok)throw new Error(e.message);return e.data},h=async({projectId:t,api:r})=>{const{data:e}=await r.get(`/department/procurement/getordermaterial/fromdeptnumbers/${t}`);if(!e.ok)throw new Error(e.message);return e.data},P=async({id:t,payload:r,api:e})=>{const{data:n}=await e.put(`/department/procurement/updatedelivery/${t}`,r);if(!n.ok)throw new Error(n.message);return n.data},g=async({id:t,api:r})=>{const{data:e}=await r.delete(`/department/procurement/deleteprocurement/${t}`);if(!e.ok)throw new Error(e.message);return e.data},E=async({organizationId:t,api:r,pageParam:e=1,filters:n})=>{const o=new URLSearchParams;o.append("organizationId",t),o.append("page",e.toString()),o.append("limit","10"),n&&(n.projectId&&o.append("projectId",n.projectId),n.search&&o.append("search",n.search),typeof n.isSyncWithPaymentsSection=="boolean"&&o.append("isSyncWithPaymentsSection",String(n.isSyncWithPaymentsSection)),typeof n.isConfirmedRate=="boolean"&&o.append("isConfirmedRate",String(n.isConfirmedRate)),n.minAmount!==void 0&&o.append("minAmount",String(n.minAmount)),n.maxAmount!==void 0&&o.append("maxAmount",String(n.maxAmount)),n.fromDate&&o.append("fromDate",n.fromDate),n.toDate&&o.append("toDate",n.toDate));const{data:d}=await r.get(`/department/procurement/getprocurementall?${o.toString()}`);if(!d.ok)throw new Error(d.message);return d.data},S=async({id:t})=>{const{data:r}=await l.get(`https://houseofram.in/api/department/procurement/getprocurementsingle/${t}`);if(!r.ok)throw new Error(r.message);return r.data},A=async({id:t,api:r})=>{const{data:e}=await r.patch(`/department/procurement/generatepdf/${t}`);if(!e.ok)throw new Error(e.message);return e.data},q=async(t,r,e)=>{const{data:n}=await e.delete(`/department/procurement/deletepdf/${t}/${r}`);if(!n.ok)throw new Error(n.message);return n.data},k=async({id:t,api:r})=>{const{data:e}=await r.post(`/department/procurement/synctopayments/${t}`);if(!e.ok)throw new Error(e.message);return e.data},b=async({id:t,api:r})=>{const{data:e}=await r.post(`/department/procurement/cancelautomation/${t}`);if(!e.ok)throw new Error(e.message);return e.data},v=async({orderId:t,api:r})=>{const{data:e}=await r.post(`/department/procurement/generatetoken/${t}`);if(!e.ok)throw new Error(e.message);return e.data},p="https://houseofram.in/api/department/procurement",I=async({orderId:t,token:r})=>{const{data:e}=await l.get(`${p}/public/get?token=${r}&orderId=${t}`);if(!e.ok)throw new Error(e.message);return e.data},$=async({orderId:t,itemId:r,token:e,payload:n})=>{const{data:o}=await l.put(`${p}/public/item/update?token=${e}&orderId=${t}&itemId=${r}`,n);if(!o.ok)throw new Error(o.message);return o.data},c=["owner","CTO","staff"],C=()=>{const{role:t}=s(),r=i(t);return u({mutationFn:async({id:e,payload:n})=>{if(!t||!c.includes(t))throw new Error("Not allowed");if(!r)throw new Error("API instance not found for role");return await y({id:e,payload:n,api:r})},onSuccess:(e,{id:n})=>{a.invalidateQueries({queryKey:["procurement","details"]}),a.invalidateQueries({queryKey:["procurement","single",n]})}})},N=()=>{const{role:t}=s(),r=i(t);return u({mutationFn:async({id:e,payload:n})=>{if(!t||!c.includes(t))throw new Error("Not allowed");if(!r)throw new Error("API instance not found for role");return await P({id:e,payload:n,api:r})},onSuccess:(e,{id:n})=>{a.invalidateQueries({queryKey:["procurement","details"]}),a.invalidateQueries({queryKey:["procurement","single",n]})}})},O=()=>{const{role:t}=s(),r=i(t);return u({mutationFn:async({payload:e})=>{if(!t||!c.includes(t))throw new Error("Not allowed");if(!r)throw new Error("API instance not found for role");return await f({payload:e,api:r})},onSuccess:()=>{a.invalidateQueries({queryKey:["procurement","details"]})}})},x=t=>{const{role:r}=s(),e=i(r);return m({queryKey:["ordermaterial","refId",t],queryFn:async()=>{if(!r||!c.includes(r))throw new Error("Not allowed");if(!e)throw new Error("API instance not found for role");return await h({api:e,projectId:t})},enabled:!!t&&!!r&&!!e})},G=()=>{const{role:t}=s(),r=i(t);return u({mutationFn:async({id:e})=>{if(!t||!c.includes(t))throw new Error("Not allowed");if(!r)throw new Error("API instance not found for role");return await g({id:e,api:r})},onSuccess:()=>{a.invalidateQueries({queryKey:["procurement","details"]})}})},L=(t,r)=>{const{role:e}=s(),n=i(e);return w({queryKey:["procurement","infinite",t,r],queryFn:async({pageParam:o=1})=>{if(!e||!c.includes(e))throw new Error("Not allowed");if(!n)throw new Error("API instance not found for role");return await E({organizationId:t,api:n,pageParam:o,filters:r})},getNextPageParam:o=>{if(o.hasNextPage)return o.currentPage+1},initialPageParam:1,enabled:!!t&&!!e&&!!n})},T=t=>m({queryKey:["procurement","single",t],queryFn:async()=>await S({id:t}),enabled:!!t,refetchOnMount:!0}),U=()=>{const t=["owner","staff","CTO"],{role:r}=s(),e=i(r);return u({mutationFn:async({id:n})=>{if(!r||!t.includes(r))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await A({id:n,api:e})},onSuccess:(n,{id:o})=>{a.invalidateQueries({queryKey:["procurement","details"]}),a.invalidateQueries({queryKey:["procurement","single",o]})}})},_=()=>{const{role:t}=s(),r=i(t);return u({mutationFn:async({id:e,pdfId:n})=>{if(!t||!c.includes(t))throw new Error("Youre not allowed to delete pdf");if(!r)throw new Error("API instance not available");return await q(e,n,r)},onSuccess:(e,{id:n})=>{a.invalidateQueries({queryKey:["procurement","details"]}),a.invalidateQueries({queryKey:["procurement","single",n]})}})},M=()=>{const t=["owner","staff","CTO"],{role:r}=s(),e=i(r);return u({mutationFn:async({id:n})=>{if(!r||!t.includes(r))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await k({id:n,api:e})},onSuccess:()=>{a.invalidateQueries({queryKey:["bills"]})}})},W=()=>{const t=["owner","staff","CTO"],{role:r}=s(),e=i(r);return u({mutationFn:async({id:n})=>{if(!r||!t.includes(r))throw new Error("Unauthorized");if(!e)throw new Error("API instance not found for role");return await b({id:n,api:e})},onSuccess:()=>{a.invalidateQueries({queryKey:["bills"]})}})},j=()=>{const t=["owner","staff","CTO"],{role:r}=s(),e=i(r);return u({mutationFn:async({orderId:n})=>{if(!r||!t.includes(r))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance missing");return await v({orderId:n,api:e})},onSuccess:(n,{orderId:o})=>{a.invalidateQueries({queryKey:["procurement","details"]}),a.invalidateQueries({queryKey:["procurement","single",o]})}})},B=(t,r)=>m({queryKey:["procurement","public",t],queryFn:async()=>await I({token:t,orderId:r}),enabled:!!t,retry:!1}),z=()=>u({mutationFn:async({orderId:t,itemId:r,token:e,payload:n})=>await $({token:e,payload:n,orderId:t,itemId:r})});export{O as a,B as b,z as c,T as d,C as e,N as f,U as g,j as h,_ as i,M as j,W as k,L as l,G as m,x as u};
