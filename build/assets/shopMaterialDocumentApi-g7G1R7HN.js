import{f as s,b as m,g as u,h as p,i as l}from"./index-BAM0eJUz.js";import{u as h}from"./useInfiniteQuery-BGz0VllC.js";const w=async({categoryName:a,organizationId:e,files:t,api:n})=>{const o=new FormData;o.append("categoryName",a),o.append("organizationId",e),t.forEach(i=>o.append("files",i));const{data:r}=await n.post("/materialshop/document/uploadmaterials",o,{headers:{"Content-Type":"multipart/form-data"}});return r},y=async({categoryName:a,materialCategoryId:e,organizationId:t,files:n,api:o})=>{const r=new FormData;r.append("categoryName",a),r.append("materialCategoryId",e),r.append("organizationId",t),n.forEach(d=>r.append("files",d));const{data:i}=await o.post("/materialshop/document/uploadmaterials/v1",r,{headers:{"Content-Type":"multipart/form-data"}});return i},f=async({id:a,categoryName:e,organizationId:t,api:n})=>{const{data:o}=await n.patch(`/materialshop/document/update/category/${a}`,{categoryName:e,organizationId:t});return o},S=async({api:a,organizationId:e,categoryName:t,pageParam:n=1,limit:o=20})=>{const{data:r}=await a.get("/materialshop/document/getall",{params:{categoryName:t,organizationId:e,page:n,limit:o}});return r},g=async({categoryId:a,api:e})=>{const{data:t}=await e.get(`/materialshop/document/getsingle/v1/${a}`);return t.data},D=async(a,e)=>{const{data:t}=await e.delete(`/materialshop/document/delete/${a}`);return t},q=async({id:a,fileId:e,api:t})=>{const{data:n}=await t.delete(`/materialshop/document/deletefile/${a}/${e}`);return n},A=async({id:a,fileId:e,categoryId:t,organizationId:n,api:o})=>{const{data:r}=await o.put(`/materialshop/document/extract/v1/${n}/${t}/${a}/${e}`);return r.data},c=["owner","staff","CTO"],M=()=>{const a=u(),{role:e}=s(),t=l(e);return p({mutationFn:async({categoryName:n,organizationId:o,files:r})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await w({categoryName:n,organizationId:o,files:r,api:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["materialShopDoc","infinite"]})}})},v=()=>{const a=u(),{role:e}=s(),t=l(e);return p({mutationFn:async({categoryName:n,organizationId:o,materialCategoryId:r,files:i})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await y({categoryName:n,materialCategoryId:r,organizationId:o,files:i,api:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["materialShopDoc","single"]})}})},C=()=>{const a=u(),{role:e}=s(),t=l(e);return p({mutationFn:async({id:n,categoryName:o,organizationId:r})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await f({id:n,categoryName:o,api:t,organizationId:r})},onSuccess:(n,{id:o})=>{a.invalidateQueries({queryKey:["materialShopDoc","infinite"]}),a.invalidateQueries({queryKey:["materialShopDoc","single",o]})}})},I=(a,e)=>{const{role:t}=s(),n=l(t);return h({queryKey:["materialShopDoc","infinite",e],queryFn:async({pageParam:o=1})=>{if(!t||!c.includes(t))throw new Error("not allowed to make this api call");if(!n)throw new Error("API instance not found for role");return await S({api:n,categoryName:e,organizationId:a,pageParam:o})},initialPageParam:1,getNextPageParam:o=>{const{page:r,totalPages:i}=o.pagination;return r<i?r+1:void 0},enabled:!!t&&!!n})},P=({categoryId:a})=>{const{role:e}=s(),t=l(e);return m({queryKey:["materialShopDoc","single",a],queryFn:async()=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await g({categoryId:a,api:t})},enabled:!!a&&!!e&&!!t,retry:!1})},Q=()=>{const a=u(),{role:e}=s(),t=l(e);return p({mutationFn:async n=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await D(n,t)},onSuccess:()=>{a.invalidateQueries({queryKey:["materialShopDoc","infinite"]})}})},K=()=>{const a=u(),{role:e}=s(),t=l(e);return p({mutationFn:async({id:n,fileId:o})=>{if(!t)throw new Error("API instance not found");return await q({id:n,fileId:o,api:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["materialShopDoc","single"]})}})},$=()=>{const a=u(),{role:e}=s(),t=l(e);return p({mutationFn:async({id:n,organizationId:o,categoryId:r,fileId:i})=>{if(!e||!c.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance not found for role");return await A({id:n,organizationId:o,categoryId:r,fileId:i,api:t})},onSuccess:(n,{id:o,categoryId:r})=>{a.invalidateQueries({queryKey:["materialShopDoc","single",o]}),a.invalidateQueries({queryKey:["materialShopDoc","infinite"]}),a.invalidateQueries({queryKey:["rateconfig","items",r]})}})};export{I as a,P as b,M as c,$ as d,v as e,C as f,K as g,Q as u};
