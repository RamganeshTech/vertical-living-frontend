import{u as w}from"./useQuery-BmC89CNR.js";import{u as i}from"./useMutation-DaAue-fW.js";import{u as p}from"./useInfiniteQuery-Ce_ii5sB.js";import{c as a,q as u}from"./index-C2KHEypQ.js";import{g as s}from"./roleCheck-DBD7VNWv.js";const g=async({payload:t,api:r})=>{const e=new FormData,{files:o,phone:m,...f}=t;Object.entries(f).forEach(([l,d])=>{d!=null&&e.append(l,String(d))}),m&&e.append("phone",JSON.stringify(m)),o&&o.length>0&&o.forEach(l=>{e.append("files",l)});const{data:c}=await r.post("/department/accounting/customer/createcustomer",e,{headers:{"Content-Type":"multipart/form-data"}});if(!c.ok)throw new Error(c.message);return c.data},y=async({params:t,api:r})=>{const{data:e}=await r.get("/department/accounting/customer/getallcustomer",{params:t});if(!e.ok)throw new Error(e.message);return e},h=async({customerId:t,api:r})=>{const{data:e}=await r.get(`/department/accounting/customer/singlecustomer/${t}`);if(!e.ok)throw new Error(e.message);return e.data},P=async({organizationId:t,api:r})=>{const{data:e}=await r.get(`/department/accounting/customer/getallcustomername/${t}`);if(!e.ok)throw new Error(e.message);return e.data},E=async({customerId:t,payload:r,api:e})=>{const{data:o}=await e.put(`/department/accounting/customer/updatecustomer/${t}`,r);if(!o.ok)throw new Error(o.message);return o.data},A=async({api:t,formData:r,id:e})=>(await t.put(`/department/accounting/customer/updatecustomer/${e}/document`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,C=async({customerId:t,api:r})=>{const{data:e}=await r.delete(`/department/accounting/customer/deletecustomer/${t}`);if(!e.ok)throw new Error(e.message)},n=["owner","staff","CTO"],N=()=>{const{role:t}=a(),r=s(t);return i({mutationFn:async e=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await g({payload:e,api:r})},onSuccess:(e,o)=>{u.invalidateQueries({queryKey:["customers","list",o.organizationId]}),u.invalidateQueries({queryKey:["customers","list",o.organizationId,o.projectId]})}})},K=t=>{const{role:r}=a(),e=s(r);return p({queryKey:["customers","list",t.organizationId,t.projectId,t.customerType,t.search,t.sortBy,t.sortOrder,t.createdFromDate,t.createdToDate],queryFn:async({pageParam:o=1})=>{if(!r||!n.includes(r))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await y({params:{...t,page:o},api:e})},getNextPageParam:o=>{if(o.pagination.hasNextPage)return o.pagination.currentPage+1},getPreviousPageParam:o=>{if(o.pagination.hasPrevPage)return o.pagination.currentPage-1},initialPageParam:1,enabled:!!r&&n.includes(r)&&!!t.organizationId})},Q=(t,r=!0)=>{const{role:e}=a(),o=s(e);return w({queryKey:["customers","single",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await h({customerId:t,api:o})},enabled:r&&!!e&&n.includes(e)&&!!t})},v=(t,r=!0)=>{const{role:e}=a(),o=s(e);return w({queryKey:["allcustomersname",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await P({organizationId:t,api:o})},enabled:r&&!!e&&n.includes(e)&&!!t})},O=()=>{const{role:t}=a(),r=s(t);return i({mutationFn:async({customerId:e,payload:o})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await E({customerId:e,payload:o,api:r})},onSuccess:e=>{u.invalidateQueries({queryKey:["customers","single",e.customerId]}),u.invalidateQueries({queryKey:["customers","list"]})}})},S=()=>{const{role:t}=a(),r=s(t);return i({mutationFn:async({id:e,formData:o})=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await A({id:e,formData:o,api:r})}})},T=()=>{const{role:t}=a(),r=s(t);return i({mutationFn:async e=>{if(!t||!n.includes(t))throw new Error("Not allowed to make this API call");if(!r)throw new Error("API instance not found for role");return await C({customerId:e,api:r})},onSuccess:()=>{u.invalidateQueries({queryKey:["customers","list"]})}})};export{K as a,T as b,Q as c,O as d,S as e,N as f,v as u};
