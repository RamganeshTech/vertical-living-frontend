import{u as r,g as i}from"./roleCheck-DCYFBDfO.js";import{u as m}from"./useQuery-B4RrmMvA.js";import{V as c,k as l}from"./index-B7U0voEN.js";const u=["owner","staff","CTO"],d=async(o,e)=>{const{data:t}=await e.get(`/costestimation/${o}`);if(!t.ok)throw new Error(t.message);return t.data},f=async(o,e,t)=>{const{data:a}=await t.get(`/costestimation/${o}/room/${e}`);if(!a.ok)throw new Error(a.message);return a.data},y=async(o,e)=>{const{data:t}=await e.get(`/costestimation/${o}/labour/getlabour`);if(!t.ok)throw new Error(t.message);return t.data},E=async(o,e,t,a)=>{const{data:n}=await a.patch(`/costestimation/${o}/material/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},h=async(o,e,t)=>{const{data:a}=await t.post(`/costestimation/${o}/labour`,e);if(!a.ok)throw new Error(a.message);return a.data},p=async(o,e,t,a)=>{const{data:n}=await a.patch(`/costestimation/${o}/labour/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},g=async(o,e,t)=>{const{data:a}=await t.delete(`/costestimation/${o}/labour/${e}`);if(!a.ok)throw new Error(a.message);return a.data},C=async(o,e,t,a)=>{const{data:n}=await a.post(`/costestimation/${o}/uploads/${e}`,t);if(!n.ok)throw new Error(n.message);return n.data},A=async(o,e,t,a)=>{const{data:n}=await a.patch(`/costestimation/${o}/deleteuploadedfile/${e}/${t}`);if(!n.ok)throw new Error(n.message);return n.data},k=async({formId:o,projectId:e,deadLine:t,api:a})=>{const{data:n}=await a.put(`/costestimation/deadline/${e}/${o}`,{deadLine:t});if(!n.ok)throw new Error(n.message);return n.data},q=async({projectId:o,api:e})=>{const{data:t}=await e.put(`/costestimation/completionstatus/${o}`);if(!t.ok)throw new Error(t.message);return t.data},P=o=>{const e=["staff","CTO","owner"],{role:t}=r(),a=i(t);return m({queryKey:["cost-estimation",o],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await d(o,a)},enabled:!!t&&!!o&&!!a,retry:!1,refetchOnMount:!1})},S=(o,e)=>{const{role:t}=r(),a=i(t);return m({queryKey:["cost-estimation-room",o,e],queryFn:async()=>{if(!t||!u.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await f(o,e,a)},enabled:!!t&&!!o&&!!e&&!!a,retry:!1,refetchOnMount:!1})},K=()=>{const o=["owner","staff","CTO"],{role:e}=r(),t=i(e),a=c();return l({mutationFn:async({projectId:n,materialKey:s,updates:w})=>{if(!e||!o.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API not available");return await E(n,s,w,t)},onSuccess:(n,{projectId:s})=>{a.invalidateQueries({queryKey:["cost-estimation-room",s]})}})},Q=o=>{const e=["owner","staff","CTO"],{role:t}=r(),a=i(t);return m({queryKey:["labourEstimatation",o],queryFn:async()=>{if(!t||!e.includes(t))throw new Error("not allowed to make this api call");if(!a)throw new Error("API instance not found for role");return await y(o,a)},enabled:!!o,retry:!1,refetchOnMount:!1,staleTime:0})},R=()=>{const{role:o}=r(),e=i(o),t=c();return l({mutationFn:async({projectId:a,labourData:n})=>{if(!o||!u.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await h(a,n,e)},onSuccess:(a,{projectId:n})=>{t.invalidateQueries({queryKey:["labourEstimatation",n]})}})},v=()=>{const{role:o}=r(),e=i(o),t=c();return l({mutationFn:async({projectId:a,labourId:n,updates:s})=>{if(!o||!u.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await p(a,n,s,e)},onSuccess:(a,{projectId:n})=>{t.invalidateQueries({queryKey:["cost-estimation",n]})}})},O=()=>{const{role:o}=r(),e=i(o),t=c();return l({mutationFn:async({projectId:a,labourId:n})=>{if(!o||!u.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await g(a,n,e)},onSuccess:(a,{projectId:n})=>{t.invalidateQueries({queryKey:["cost-estimation",n]})}})},L=()=>{const{role:o}=r(),e=i(o),t=c();return l({mutationFn:async({projectId:a,roomId:n,formData:s})=>{if(!o||!u.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await C(a,n,s,e)},onSuccess:(a,{projectId:n})=>{t.invalidateQueries({queryKey:["cost-estimation-room",n]})}})},T=()=>{const{role:o}=r(),e=i(o),t=c();return l({mutationFn:async({projectId:a,roomId:n,fileId:s})=>{if(!o||!u.includes(o))throw new Error("not allowed to make this api call");if(!e)throw new Error("API instance not found for role");return await A(a,n,s,e)},onSuccess:(a,{projectId:n})=>{t.invalidateQueries({queryKey:["cost-estimation-room",n]})}})},_=()=>{const o=["owner","staff","CTO"],{role:e}=r(),t=i(e),a=c();return l({mutationFn:async({formId:n,projectId:s,deadLine:w})=>{if(!e||!o.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await k({formId:n,projectId:s,deadLine:w,api:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["cost-estimation"]})}})},M=()=>{const o=["owner","staff","CTO"],{role:e}=r(),t=i(e),a=c();return l({mutationFn:async({projectId:n})=>{if(!e||!o.includes(e))throw new Error("not allowed to make this api call");if(!t)throw new Error("API instance missing");return await q({projectId:n,api:t})},onSuccess:(n,{projectId:s})=>{a.invalidateQueries({queryKey:["cost-estimation",s]})}})};export{_ as a,M as b,L as c,T as d,S as e,K as f,Q as g,O as h,v as i,R as j,P as u};
