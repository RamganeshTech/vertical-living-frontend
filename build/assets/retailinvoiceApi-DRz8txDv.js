import{f as g,h,s as m,b as R,i as v}from"./index-BAM0eJUz.js";import{u as P}from"./useInfiniteQuery-BGz0VllC.js";const E=async({organizationId:t,customerId:n,page:e,limit:a,fromInvoiceDate:s,toInvoiceDate:c,createdFromDate:l,createdToDate:u,search:p,minAmount:w,maxAmount:d,api:y,sortBy:f,sortOrder:r})=>{const o=new URLSearchParams;t&&o.append("organizationId",t),n&&o.append("customerId",n),e&&o.append("page",e.toString()),a&&o.append("limit",a.toString()),s&&o.append("fromInvoiceDate",s),c&&o.append("toInvoiceDate",c),l&&o.append("createdFromDate",l),u&&o.append("createdToDate",u),w&&o.append("minAmount",w.toString()),d&&o.append("maxAmount",d.toString()),f&&o.append("sortBy",f),r&&o.append("sortOrder",r),p&&o.append("search",p);const{data:i}=await y.get(`/department/accounting/retailinvoice/getallinvoice?${o.toString()}`);if(!i.ok)throw new Error(i.message);return i},I=async({invoiceData:t,api:n})=>{const{data:e}=await n.post("/department/accounting/retailinvoice/createinvocie",t);if(!e.ok)throw new Error(e.message);return e.data},A=async({invoiceData:t,invoiceId:n,api:e})=>{const{data:a}=await e.put(`/department/accounting/retailinvoice/updateinvoice/${n}`,t);if(!a.ok)throw new Error(a.message);return a.data},S=async({invoiceId:t,api:n})=>{const{data:e}=await n.delete(`/department/accounting/retailinvoice/deleteinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},k=async({invoiceId:t,api:n})=>{const{data:e}=await n.get(`/department/accounting/retailinvoice/getsingleinvoice/${t}`);if(!e.ok)throw new Error(e.message);return e.data},N=({organizationId:t,customerId:n,limit:e=10,search:a,fromInvoiceDate:s,minAmount:c,maxAmount:l,toInvoiceDate:u,createdFromDate:p,createdToDate:w,sortBy:d,sortOrder:y})=>{const f=["owner","staff","CTO"],{role:r}=g(),o=v(r);return P({queryKey:["retailinvoices",t,n,e,s,u,p,c,l,w,a,d,y],queryFn:async({pageParam:i=1})=>{if(!r||!f.includes(r))throw new Error("Not allowed to make this API call");if(!o)throw new Error("API instance not found for role");return await E({organizationId:t,customerId:n,page:i,limit:e,fromInvoiceDate:s,toInvoiceDate:u,createdFromDate:p,createdToDate:w,minAmount:c,maxAmount:l,search:a,api:o,sortBy:d,sortOrder:y})},getNextPageParam:i=>{if(i.pagination.page<i.pagination.totalPages)return i.pagination.page+1},getPreviousPageParam:i=>{if(i.pagination.page>1)return i.pagination.page-1},initialPageParam:1,enabled:!!r&&f.includes(r)&&!!t})},F=()=>{const t=["owner","staff","CTO"],{role:n}=g(),e=v(n);return h({mutationFn:async({invoiceData:a})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await I({invoiceData:a,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["retailinvoices"]})}})},K=()=>{const t=["owner","staff","CTO"],{role:n}=g(),e=v(n);return h({mutationFn:async({invoiceData:a,invoiceId:s})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await A({invoiceData:a,invoiceId:s,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["retailinvoices"]})}})},Q=()=>{const t=["owner","staff","CTO"],{role:n}=g(),e=v(n);return h({mutationFn:async({invoiceId:a})=>{if(!n||!t.includes(n))throw new Error("Not allowed to make this API call");if(!e)throw new Error("API instance not found for role");return await S({invoiceId:a,api:e})},onSuccess:()=>{m.invalidateQueries({queryKey:["retailinvoices"]})}})},b=t=>{const n=["owner","staff","CTO"],{role:e}=g(),a=v(e);return R({queryKey:["retailinvoice",t],queryFn:async()=>{if(!e||!n.includes(e))throw new Error("Not allowed to make this API call");if(!a)throw new Error("API instance not found for role");return await k({invoiceId:t,api:a})},enabled:!!t&&!!e&&n.includes(e)})};export{Q as a,F as b,b as c,K as d,N as u};
