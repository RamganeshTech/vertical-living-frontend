import{a as q,u as U,b as Z,r as z,j as e}from"./index-BZjlY-2Z.js";import{u as Q,a as ee,D as te,P as se,b as le,C as ae}from"./core.esm-Ctxrv_8-.js";import{a as re,b as ne,c as oe}from"./billNewAccountingApi-CuXx9iWv.js";import{B as ie}from"./Button-BGBzZFjk.js";import"./index-CEnBN4s8.js";import"./useQuery-Coz1VCY2.js";import"./useMutation-BRRIqsxx.js";import"./useInfiniteQuery--LmPAkvr.js";import"./roleCheck-DuKNZHKs.js";function de(t){const[i,j]=z.useState([t]),[m,o]=z.useState(0),C=i[m],A=N=>{const S=typeof N=="function"?N(C):N;if(JSON.stringify(C)===JSON.stringify(S))return;const b=i.slice(0,m+1);b.push(S),j(b),o(b.length-1)},v=z.useCallback(()=>{o(N=>Math.max(N-1,0))},[]),c=z.useCallback(()=>{j(N=>(o(S=>Math.min(S+1,N.length-1)),N))},[]),M=N=>{j([N]),o(0)};return{state:C,setState:A,undo:v,redo:c,canUndo:m>0,canRedo:m<i.length-1,reset:M}}const _=()=>`blk_${Math.random().toString(36).substr(2,9)}`,F={fontSize:12,color:"#000000",backgroundColor:"transparent",fontWeight:"normal",textAlign:"left",width:200,height:"auto"},ue=({onSelect:t})=>{const[i,j]=z.useState({rows:0,cols:0});return e.jsxs("div",{className:"absolute top-12 left-0 z-50 bg-white shadow-xl border border-gray-300 p-3 rounded w-48",children:[e.jsxs("div",{className:"text-xs font-bold mb-2 text-gray-500",children:["Table ",i.cols,"x",i.rows]}),e.jsx("div",{className:"grid grid-cols-10 gap-1",onMouseLeave:()=>j({rows:0,cols:0}),children:Array.from({length:50}).map((m,o)=>{const C=Math.floor(o/10)+1,A=o%10+1,v=C<=i.rows&&A<=i.cols;return e.jsx("div",{className:`w-3 h-3 border ${v?"bg-blue-500 border-blue-600":"bg-gray-100 border-gray-300"}`,onMouseEnter:()=>j({rows:C,cols:A}),onClick:()=>t(C,A)},o)})})]})},ce=({x:t,y:i,actions:j,onClose:m})=>(z.useEffect(()=>{const o=()=>m();return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[m]),e.jsx("div",{className:"fixed z-[9999] bg-white shadow-xl border border-gray-200 rounded py-1 min-w-[180px]",style:{top:i,left:t},children:j.map((o,C)=>e.jsx("button",{onClick:o.action,className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 block ${o.color||"text-gray-700"}`,children:o.label},C))})),xe=({component:t,isSelected:i,onClick:j,onUpdateValue:m,onUpdateMeta:o,onResize:C,onDelete:A,activeCell:v,onCellSelect:c})=>{var O,I,K;const{attributes:M,listeners:N,setNodeRef:S,transform:b,isDragging:D}=le({id:t.id,data:{...t}}),[w,k]=z.useState(null),Y={transform:ae.Translate.toString(b),position:"absolute",left:`${t.x}px`,top:`${t.y}px`,width:t.style.width?`${t.style.width}px`:"auto",height:t.style.height?`${t.style.height}px`:"auto",zIndex:D?9999:i?100:1,fontSize:`${t.style.fontSize}px`,color:t.style.color,fontWeight:t.style.fontWeight,textAlign:t.style.textAlign,backgroundColor:t.style.backgroundColor},J=s=>{s.stopPropagation(),s.preventDefault();const r=s.clientX,n=s.clientY,x=t.style.width||100,h=t.style.height||100,y=p=>{const P=Math.max(50,x+(p.clientX-r)),W=Math.max(20,h+(p.clientY-n));C(P,W)},g=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",g)},H=(s,r)=>{s.stopPropagation();const n=s.clientX,x=t.columnWidths||[],h=t.style.width||300,y=p=>{const P=(p.clientX-n)/h*100,W=[...x];W[r+1]!==void 0&&(W[r]=Math.max(5,W[r]+P),W[r+1]=Math.max(5,W[r+1]-P),o("columnWidths",W))},g=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",g)},B=(s,r)=>{s.stopPropagation();const n=s.clientY,x=t.rowHeights||[],h=g=>{const p=[...x],P=g.clientY-n;p[r]=Math.max(20,(p[r]||30)+P),o("rowHeights",p)},y=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",y)},R=(s,r=-1,n=-1)=>{t.type==="table"&&(s.preventDefault(),s.stopPropagation(),k({x:s.clientX,y:s.clientY,targetR:r,targetC:n}))},L=()=>{if(!w)return;const{targetR:s}=w,r=s===-1?t.value.length:s+1,n=JSON.parse(JSON.stringify(t.value)),x=n[0]?n[0].length:1,h=Array.from({length:x},()=>({content:"",style:{}}));n.splice(r,0,h);const y=[...t.rowHeights||[]];y.splice(r,0,30),m(n),o("rowHeights",y),k(null)},X=()=>{var y;if(!w)return;const{targetC:s}=w,r=s===-1?((y=t.columnWidths)==null?void 0:y.length)||1:s+1,n=t.value.map(g=>{const p=[...g];return p.splice(r,0,{content:"",style:{}}),p});let x=[...t.columnWidths||[]];x.splice(r,0,15);const h=x.reduce((g,p)=>g+p,0);x=x.map(g=>g/h*100),m(n),o("columnWidths",x),k(null)},$=()=>{if(!w||w.targetR===-1)return;const{targetR:s}=w,r=[...t.value];if(r.length<=1)return;r.splice(s,1);const n=[...t.rowHeights||[]];n.splice(s,1),m(r),o("rowHeights",n),k(null)},G=()=>{if(!w||w.targetC===-1)return;const{targetC:s}=w;if(t.value[0].length<=1)return;const r=t.value.map(h=>h.filter((y,g)=>g!==s));let n=[...t.columnWidths||[]];n.splice(s,1);const x=n.reduce((h,y)=>h+y,0);n=n.map(h=>h/x*100),m(r),o("columnWidths",n),k(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:S,style:Y,onContextMenu:s=>R(s),onClick:s=>{s.stopPropagation(),j()},className:`group ${i?"ring-2 ring-blue-500":"hover:ring-1 hover:ring-gray-300"}`,children:[e.jsx("div",{...N,...M,className:`absolute -top-3 -left-3 w-6 h-6 bg-white shadow rounded-full flex items-center justify-center cursor-move z-50 
                    ${i?"flex":"hidden group-hover:flex"}`,children:e.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right text-xs text-gray-600"})}),t.type==="text"&&e.jsx("textarea",{className:"w-full h-full p-1 bg-transparent border-transparent hover:border-dotted hover:border-gray-300 outline-none focus:bg-blue-50/20 cursor-text resize-none overflow-hidden",value:t.label,style:{fontSize:t.style.fontSize,fontWeight:t.style.fontWeight,textAlign:t.style.textAlign,color:t.style.color},onChange:s=>o("label",s.target.value),onPointerDown:s=>s.stopPropagation()}),t.type==="data-field"&&e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 border border-dashed border-gray-400 bg-gray-50 w-full h-full overflow-hidden",...N,...M,children:[e.jsxs("span",{className:"font-bold text-xs whitespace-nowrap",children:[t.label,":"]}),e.jsx("input",{className:"bg-transparent border-b border-gray-300 text-xs w-full outline-none",value:t.value,onChange:s=>m(s.target.value),placeholder:"Value...",onPointerDown:s=>s.stopPropagation()})]}),t.type==="image"&&e.jsx("div",{className:"w-full h-full bg-gray-100",children:Array.isArray(t.value)&&t.value.length>0?e.jsx("img",{src:typeof t.value[0]=="string"?t.value[0]:t.value[0].preview,className:"w-full h-full block pointer-events-none object-fill"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400 border border-dashed",children:"No Img"})}),t.type==="table"&&Array.isArray(t.value)&&e.jsxs("div",{className:"w-full h-full flex flex-col relative",children:[i&&e.jsx("div",{className:"flex w-full h-2 absolute -top-2 left-0 pointer-events-none z-20",children:(O=t.columnWidths)==null?void 0:O.map((s,r)=>e.jsx("div",{style:{width:`${s}%`},className:"relative border-r border-blue-400 h-2 pointer-events-auto",children:e.jsx("div",{onMouseDown:n=>H(n,r),className:"absolute right-[-4px] top-0 w-2 h-4 cursor-col-resize bg-blue-400 hover:bg-blue-600 rounded-sm z-50"})},r))}),i&&e.jsx("div",{className:"absolute -left-2 top-0 w-2 h-full flex flex-col pointer-events-none z-20",children:(I=t.rowHeights)==null?void 0:I.map((s,r)=>e.jsx("div",{style:{height:`${s}px`},className:"relative border-b border-blue-400 w-2 pointer-events-auto",children:e.jsx("div",{onMouseDown:n=>B(n,r),className:"absolute bottom-[-4px] left-0 w-4 h-2 cursor-row-resize bg-blue-400 hover:bg-blue-600 rounded-sm z-50"})},r))}),e.jsxs("table",{className:"w-full table-fixed",style:{borderCollapse:"collapse",border:"1px solid #000"},children:[e.jsx("colgroup",{children:(K=t.columnWidths)==null?void 0:K.map((s,r)=>e.jsx("col",{style:{width:`${s}%`}},r))}),e.jsx("tbody",{children:t.value.map((s,r)=>e.jsx("tr",{style:{height:`${t.rowHeights&&t.rowHeights[r]||30}px`},children:s.map((n,x)=>{const h=n.style||{},y=(v==null?void 0:v.r)===r&&(v==null?void 0:v.c)===x;return e.jsx("td",{style:{border:"1px solid #000",padding:0,verticalAlign:"top",backgroundColor:h.backgroundColor||"transparent"},className:`relative ${y?"ring-2 ring-inset ring-blue-500 z-10":""}`,onContextMenu:g=>R(g,r,x),children:e.jsx("textarea",{className:"w-full h-full p-1 border-none outline-none bg-transparent cursor-text resize-none overflow-hidden whitespace-pre-wrap",style:{fontSize:`${h.fontSize||t.style.fontSize}px`,color:h.color||t.style.color,textAlign:h.textAlign||t.style.textAlign,fontWeight:h.fontWeight||t.style.fontWeight,fontFamily:"inherit",lineHeight:"1.2"},value:typeof n=="object"?n.content:n,onChange:g=>{const p=JSON.parse(JSON.stringify(t.value));typeof p[r][x]=="string"?p[r][x]={content:g.target.value,style:{}}:p[r][x].content=g.target.value,m(p)},onFocus:()=>c&&c(r,x),onPointerDown:g=>g.stopPropagation()})},x)})},r))})]})]}),i&&e.jsx("div",{onMouseDown:J,onPointerDown:s=>s.stopPropagation(),className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 cursor-nwse-resize rounded-full z-50 border-2 border-white shadow"})]}),w&&e.jsx(ce,{x:w.x,y:w.y,onClose:()=>k(null),actions:[{label:"Insert Row Below",action:L,color:"text-blue-600"},{label:"Insert Column Right",action:X,color:"text-blue-600"},{label:"Delete This Row",action:$,color:"text-gray-600"},{label:"Delete This Column",action:G,color:"text-gray-600"},{label:"Delete Entire Table",action:A,color:"text-red-600 font-bold border-t border-gray-200 mt-1 pt-1"}]})]})},he=({component:t,activeCell:i,onUpdate:j,onUpdateCell:m,onDelete:o,onClose:C})=>{const A=(c,M,N,S,b,D,w="")=>e.jsxs("div",{className:"space-y-2 p-3 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 uppercase",children:[w," Styling"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] text-gray-400",children:"Size"}),e.jsx("input",{type:"number",className:"w-full border p-1 text-xs rounded",value:c||12,onChange:k=>D("fontSize",Number(k.target.value))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"text-[10px] text-gray-400",children:"Text"}),e.jsx("div",{className:"flex items-center border p-1 rounded bg-white h-7",children:e.jsx("input",{type:"color",className:"w-full h-full border-none p-0 bg-transparent cursor-pointer",value:M||"#000000",onChange:k=>D("color",k.target.value)})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"text-[10px] text-gray-400",children:"BG Color"}),e.jsx("div",{className:"flex items-center border p-1 rounded bg-white h-7",children:e.jsx("input",{type:"color",className:"w-full h-full border-none p-0 bg-transparent cursor-pointer",value:N||"#ffffff",onChange:k=>D("backgroundColor",k.target.value)})})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>D("fontWeight",S==="bold"?"normal":"bold"),className:`flex-1 border p-1 rounded text-xs ${S==="bold"?"bg-blue-100 text-blue-600":"bg-white"}`,children:e.jsx("i",{className:"fa-solid fa-bold"})}),e.jsx("button",{onClick:()=>D("textAlign","left"),className:`flex-1 border p-1 rounded text-xs ${b==="left"?"bg-blue-100 text-blue-600":"bg-white"}`,children:e.jsx("i",{className:"fa-solid fa-align-left"})}),e.jsx("button",{onClick:()=>D("textAlign","center"),className:`flex-1 border p-1 rounded text-xs ${b==="center"?"bg-blue-100 text-blue-600":"bg-white"}`,children:e.jsx("i",{className:"fa-solid fa-align-center"})}),e.jsx("button",{onClick:()=>D("textAlign","right"),className:`flex-1 border p-1 rounded text-xs ${b==="right"?"bg-blue-100 text-blue-600":"bg-white"}`,children:e.jsx("i",{className:"fa-solid fa-align-right"})})]})]});let v={};return t.type==="table"&&i&&t.value[i.r]&&t.value[i.r][i.c]&&(v=t.value[i.r][i.c].style||{}),e.jsxs("div",{className:"w-72 bg-white border-l border-gray-200 flex flex-col h-full shadow-xl z-50 fixed right-0 top-16 bottom-0",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-xs uppercase text-gray-600",children:"Properties"}),e.jsx("button",{onClick:C,children:e.jsx("i",{className:"fa-solid fa-xmark text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto flex-1",children:[t.type==="text"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 mb-1 block",children:"Text Content"}),e.jsx("textarea",{className:"w-full border p-2 text-sm rounded",rows:3,value:t.label,onChange:c=>j("label",c.target.value)})]}),t.type==="data-field"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 mb-1 block",children:"Config"}),e.jsx("input",{className:"w-full border p-2 text-sm rounded mb-2",placeholder:"Label",value:t.label,onChange:c=>j("label",c.target.value)}),e.jsx("input",{className:"w-full border p-2 text-sm rounded",placeholder:"Default Value",value:t.value,onChange:c=>j("value",c.target.value)})]}),t.type==="table"&&i&&e.jsxs("div",{className:"mb-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-xs font-bold text-green-600",children:["Selected Cell (",i.r+1,", ",i.c+1,")"]})]}),A(v.fontSize||t.style.fontSize,v.color||t.style.color,v.backgroundColor||"transparent",v.fontWeight||t.style.fontWeight,v.textAlign||t.style.textAlign,(c,M)=>m(i.r,i.c,c,M),"Cell"),e.jsx("hr",{className:"my-4 border-gray-200"})]}),A(t.style.fontSize,t.style.color,t.style.backgroundColor,t.style.fontWeight,t.style.textAlign,(c,M)=>j(c,M,!0),"Global / Block"),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px]",children:"X"})," ",e.jsx("input",{type:"number",className:"w-full border p-1 text-sm",value:Math.round(t.x),readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px]",children:"Y"})," ",e.jsx("input",{type:"number",className:"w-full border p-1 text-sm",value:Math.round(t.y),readOnly:!0})]})]}),e.jsx("button",{onClick:()=>o(),className:"w-full mt-6 bg-red-50 text-red-600 py-2 rounded border border-red-200 text-sm",children:"Delete Block"})]})]})},Ne=({mode:t})=>{var W,V;const i=q(),{id:j,organizationId:m}=U(),{data:o}=re({id:j||"",organizationId:m}),C=ne(),A=oe(),{role:v,permission:c}=Z(),M=v==="owner"||((W=c==null?void 0:c.billtemplate)==null?void 0:W.create),N=v==="owner"||((V=c==null?void 0:c.billtemplate)==null?void 0:V.edit),{state:S=[],setState:b,undo:D,redo:w,canUndo:k,canRedo:Y,reset:J}=de([]),[H,B]=z.useState(""),[R,L]=z.useState(null),[X,$]=z.useState(null),[G,O]=z.useState(!1),I=z.useRef(null),K=Q(ee(se,{activationConstraint:{distance:5}}));z.useEffect(()=>{const l=a=>{(a.ctrlKey||a.metaKey)&&a.key==="z"&&(a.preventDefault(),a.shiftKey?w():D()),(a.ctrlKey||a.metaKey)&&a.key==="y"&&(a.preventDefault(),w())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[D,w]),z.useEffect(()=>{var l;if(t==="create")B(""),J([]);else if(o&&(B(o.templateName),o.layout&&((l=o.layout[0])!=null&&l.components))){const u=o.layout[0].components.map(f=>{var d;return f.type==="table"&&Array.isArray(f.value)&&typeof((d=f.value[0])==null?void 0:d[0])=="string"&&(f.value=f.value.map(E=>E.map(T=>({content:T,style:{}})))),f});J(u)}},[o,t]);const s=l=>{const a={id:_(),type:l,label:l==="text"?"Text":"Field",value:l==="text"?"":"Val",x:50,y:50+S.length*20,style:{...F,width:150,height:"auto"}};b(u=>[...u,a]),L(a.id),$(null)},r=(l,a)=>{const u=Array.from({length:l},()=>Array(a).fill({content:"",style:{}})),f=Array(a).fill(100/a),d=Array(l).fill(30),E={id:_(),type:"table",label:"Table",value:u,x:50,y:100,columnWidths:f,rowHeights:d,style:{...F,width:400,height:l*30}};b(T=>[...T,E]),O(!1),L(E.id),$(null)},n=l=>{if(l.target.files&&l.target.files[0]){const a=l.target.files[0],u=Object.assign(a,{preview:URL.createObjectURL(a)}),f={id:_(),type:"image",label:"Img",value:[u],x:50,y:50,style:{...F,width:200,height:200}};b(d=>[...d,f])}},x=l=>{const{active:a,delta:u}=l;b(f=>f.map(d=>d.id===a.id?{...d,x:d.x+u.x,y:d.y+u.y}:d))},h=(l,a,u)=>{b(f=>f.map(d=>d.id===l?{...d,style:{...d.style,width:a,height:u}}:d))},y=(l,a,u=!1)=>{R&&b(f=>f.map(d=>d.id!==R?d:u?{...d,style:{...d.style,[l]:a}}:{...d,[l]:a}))},g=(l,a,u,f)=>{R&&b(d=>d.map(E=>{if(E.id!==R||E.type!=="table")return E;const T=JSON.parse(JSON.stringify(E.value));return T[l]&&T[l][a]&&(T[l][a].style={...T[l][a].style,[u]:f}),{...E,value:T}}))},p=()=>{if(!H.trim())return alert("Name required");const a={organizationId:m,templateName:H,layout:[{id:"main_canvas",name:"Canvas",order:0,style:F,components:S}]};t==="create"?C.mutate(a):A.mutate({...a,id:j})},P=S.find(l=>l.id===R);return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"h-14 bg-white border-b flex items-center justify-between px-4 shadow-sm z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i(-1),children:e.jsx("i",{className:"fa-solid fa-arrow-left text-gray-500"})}),e.jsx("input",{className:"font-bold text-gray-700 outline-none",value:H,onChange:l=>B(l.target.value),placeholder:"Template Name"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:D,disabled:!k,className:`btn-tool ${k?"":"opacity-50 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:e.jsx("i",{className:"fa-solid fa-rotate-left"})}),e.jsx("button",{onClick:w,disabled:!Y,className:`btn-tool ${Y?"":"opacity-50 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsxs("button",{onClick:()=>s("text"),className:"btn-tool",children:[e.jsx("i",{className:"fa-solid fa-font"})," Text"]}),e.jsxs("button",{onClick:()=>s("data-field"),className:"btn-tool",children:[e.jsx("i",{className:"fa-solid fa-database"})," Field"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>O(!G),className:"btn-tool",children:[e.jsx("i",{className:"fa-solid fa-table"})," Table"]}),G&&e.jsx(ue,{onSelect:r})]}),e.jsxs("button",{onClick:()=>{var l;return(l=I.current)==null?void 0:l.click()},className:"btn-tool",children:[e.jsx("i",{className:"fa-regular fa-image"})," Image"]}),e.jsx("input",{type:"file",ref:I,className:"hidden",onChange:n})]}),(M||N)&&e.jsx(ie,{onClick:p,isLoading:C.isPending||A.isPending,children:"Save Template"})]}),e.jsx("div",{className:"flex-1 bg-gray-200 overflow-auto p-8 relative",onClick:()=>{L(null),$(null)},children:e.jsx(te,{sensors:K,onDragEnd:x,children:e.jsx("div",{className:"mx-auto bg-white shadow-2xl relative",style:{width:794,minHeight:1123,height:"auto"},children:S.map(l=>e.jsx(xe,{component:l,isSelected:l.id===R,activeCell:l.id===R?X:null,onClick:()=>L(l.id),onCellSelect:(a,u)=>{L(l.id),$({r:a,c:u})},onUpdateValue:a=>b(u=>u.map(f=>f.id===l.id?{...f,value:a}:f)),onUpdateMeta:(a,u)=>b(f=>f.map(d=>d.id===l.id?{...d,[a]:u}:d)),onResize:(a,u)=>h(l.id,a,u),onDelete:()=>{b(a=>a.filter(u=>u.id!==l.id)),L(null),$(null)}},l.id))})})}),R&&P&&e.jsx(he,{component:P,activeCell:P.type==="table"?X:null,onUpdate:y,onUpdateCell:g,onDelete:()=>{b(l=>l.filter(a=>a.id!==R)),L(null)},onClose:()=>L(null)})]})};export{Ne as TemplateBillSingle,Ne as default};
